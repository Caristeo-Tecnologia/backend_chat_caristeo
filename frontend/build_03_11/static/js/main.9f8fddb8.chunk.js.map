{"version":3,"sources":["assets/n8n.png","assets/dialogflow.png","assets/webhook.png","assets/typebot.jpg","layout/themeContext.js","context/Socket/SocketContext.js","translate/languages/pt.js","translate/languages/index.js","translate/languages/en.js","translate/languages/es.js","translate/i18n.js","errors/toastError.js","services/api.js","hooks/useWhatsApps/index.js","context/WhatsApp/WhatsAppsContext.js","hooks/useAuth.js/index.js","context/Auth/AuthContext.js","rules.js","components/Can/index.js","pages/ToDoList/index.js","hooks/usePlans/index.js","hooks/useVersion/index.js","layout/MainListItems.js","components/ButtonWithSpinner/index.js","components/MarkdownWrapper/index.js","context/Tickets/TicketsContext.js","components/ModalImageCors/index.js","components/ConfirmationModal/index.js","context/ReplyingMessage/ReplyingMessageContext.js","components/MessageOptionsMenu/index.js","components/LocationPreview/index.js","components/MessagesList/index.js","components/TicketHeaderSkeleton/index.js","components/TicketHeader/index.js","components/TicketInfo/index.js","components/TicketMessagesDialog/index.js","helpers/contrastColor.js","components/ContactTag/index.js","components/TicketAbstractDialog/index.js","components/TicketListItemCustom/index.js","hooks/useTickets/index.js","components/NotificationsPopOver/index.js","components/NotificationsVolume/index.js","components/QueueSelect/index.js","components/UserModal/index.js","components/BackdropLoading/index.js","components/DarkMode/index.js","components/AnnouncementsPopover/index.js","hooks/useDate/index.js","pages/Chat/ChatPopover.js","layout/index.js","components/Dashboard/CardCounter.js","components/Dashboard/TableAttendantsStatus.js","hooks/useDashboard/index.js","hooks/useContacts/index.js","hooks/useMessages/index.js","pages/Dashboard/ChartsUser.js","pages/Dashboard/ChartsDate.js","pages/Dashboard/index.js","components/ContactModal/index.js","components/NewTicketModal/index.js","components/TicketsListSkeleton/index.js","components/TicketsListCustom/index.js","components/TabPanel/index.js","components/TicketsQueueSelect/index.js","components/TagsFilter/index.js","components/UsersFilter/index.js","components/TicketsManagerTabs/index.js","components/ContactDrawerSkeleton/index.js","components/ContactForm/index.js","components/ContactNotesDialogListItem/index.js","hooks/useTicketNotes/index.js","components/ContactNotes/index.js","components/ContactDrawer/index.js","components/MessageInputCustom/RecordingTimer.js","hooks/useQuickMessages/index.js","components/MessageInputCustom/index.js","hooks/useLocalStorage/index.js","hooks/useQueues/index.js","components/TransferTicketModalCustom/index.js","components/OutlinedDiv/index.js","components/MessageVariablesPicker/index.js","components/ScheduleModal/index.js","components/TicketOptionsMenu/index.js","components/TicketActionButtonsCustom/index.js","components/TagsContainer/index.js","components/Ticket/index.js","pages/TicketsCustom/index.js","components/TicketAdvancedLayout/index.js","pages/TicketsAdvanced/index.js","pages/TicketResponsiveContainer/index.js","components/PaymentForm/index.js","pages/Signup/index.js","pages/Login/index.js","components/MainContainer/index.js","components/MainHeader/index.js","components/MainHeaderButtonsWrapper/index.js","components/Title/index.js","components/TableRowSkeleton/index.js","components/WhatsAppModal/index.js","components/QrcodeModal/index.js","pages/Connections/index.js","components/SchedulesForm/index.js","hooks/useCompanies/index.js","components/QueueSelectCustom/index.js","components/ModalUsers/index.js","components/CompaniesManager/index.js","components/PlansManager/index.js","hooks/useHelps/index.js","components/HelpsManager/index.js","hooks/useSettings/index.js","components/Settings/Options.js","components/OnlyForSuperUser/index.js","components/CompanyForm/index.js","pages/SettingsCustom/index.js","components/FormFields/InputField.js","components/FormFields/SelectField.js","components/CheckoutPage/Forms/AddressForm.js","components/CheckoutPage/Forms/PaymentForm.js","components/CheckoutPage/ReviewOrder/styles.js","components/CheckoutPage/ReviewOrder/ShippingDetails.js","components/CheckoutPage/ReviewOrder/index.js","components/CheckoutPage/ReviewOrder/ReviewOrder.js","components/CheckoutPage/CheckoutSuccess/style.js","components/CheckoutPage/CheckoutSuccess/CheckoutSuccess.js","components/CheckoutPage/FormModel/checkoutFormModel.js","components/CheckoutPage/FormModel/validationSchema.js","components/CheckoutPage/FormModel/formInitialValues.js","components/CheckoutPage/styles.js","components/CheckoutPage/index.js","components/CheckoutPage/CheckoutPage.js","components/SubscriptionModal/index.js","pages/Financeiro/index.js","pages/Users/index.js","pages/Contacts/index.js","components/ColorPicker/index.js","components/QueueOptions/index.js","components/QueueModal/index.js","pages/Queues/index.js","components/TagModal/index.js","pages/Tags/index.js","pages/MessagesAPI/index.js","pages/Helps/index.js","components/ContactListDialog/index.js","pages/ContactLists/index.js","components/ContactListItemModal/index.js","hooks/useContactLists/index.js","pages/ContactListItems/index.js","components/QuickMessageDialog/index.js","pages/QuickMessages/index.js","pages/Kanban/index.js","routes/Route.js","pages/Schedules/index.js","components/CampaignModal/index.js","pages/Campaigns/index.js","pages/CampaignsConfig/index.js","pages/CampaignReport/index.js","components/AnnouncementModal/index.js","pages/Annoucements/index.js","pages/Chat/ChatList.js","pages/Chat/ChatMessages.js","pages/Chat/index.js","pages/Subscription/index.js","components/FileModal/index.js","pages/Files/index.js","components/QueueSelectSingle/index.js","components/PromptModal/index.js","pages/Prompts/index.js","components/QueueIntegrationModal/index.js","pages/QueueIntegration/index.js","pages/ForgetPassWord/index.js","routes/index.js","App.js","index.js","assets/logo.png","assets/planilha.xlsx","assets/wa-background.png","assets/wa-background-dark.png","assets/sound.mp3","assets/chat_notify.mp3"],"names":["module","exports","ColorModeContext","React","createContext","toggleColorMode","ManagedSocket","constructor","socketManager","this","rawSocket","currentSocket","callbacks","joins","on","recovered","refreshJoinsOnReady","j","console","debug","emit","concat","event","params","off","callback","onReady","push","i","findIndex","c","splice","_len","arguments","length","Array","_key","startsWith","substring","log","disconnect","DummySocket","SocketManager","currentCompanyId","currentUserId","socketReady","getSocket","companyId","_this","userId","localStorage","getItem","_jwt$decode","warn","removeAllListeners","token","JSON","parse","exp","jwt","decode","Date","now","setTimeout","window","location","reload","openSocket","process","transports","pingTimeout","pingInterval","query","reason","connect","_len2","_key2","onAny","_len3","args","_key3","socket","callbackReady","once","SocketContext","messages","pt","translations","signup","title","toasts","success","fail","form","name","email","password","buttons","submit","login","register","plans","users","connections","campaigns","schedules","enabled","disabled","clear","delete","save","yes","no","money","companies","plan","auth","dashboard","charts","perDay","deleted","confirmationModal","deleteTitle","deleteMessage","disconnectTitle","disconnectMessage","add","tryAgain","qrcode","newQr","connecting","toolTips","disconnected","content","connected","timeout","table","status","lastUpdate","default","actions","session","whatsappModal","edit","tabs","general","assessments","integrations","sendIdQueue","timeSendQueue","queueRedirection","outOfHoursMessage","queueRedirectionDesc","prompt","expiresTicket","expiresInactiveMessage","greetingMessage","complationMessage","okAdd","okEdit","cancel","qrCode","message","contacts","deletedAll","searchPlaceholder","deleteAllTitle","importTitle","deleteAllMessage","importMessage","import","export","whatsapp","queueIntegrationModal","id","type","projectName","language","jsonContent","urlN8N","typebotSlug","typebotExpires","typebotKeywordFinish","typebotKeywordRestart","typebotRestartMessage","typebotUnknownMessage","typebotDelayMessage","test","testSuccess","addSuccess","editSuccess","sideMenu","note","options","promptModal","voice","max_tokens","temperature","apikey","max_messages","voiceKey","voiceRegion","prompts","queue","contactModal","mainInfo","extraInfo","number","extraName","extraValue","addExtraInfo","queueModal","color","ratingMessage","orderQueue","integrationId","userModal","profile","allTicket","allTicketEnabled","allTicketDesabled","scheduleModal","body","contact","sendAt","sentAt","tagModal","chat","noTicketMessage","uploads","titles","titleUploadMsgDragDrop","titleFileList","ticketsManager","newTicket","ticketsQueueSelect","placeholder","tickets","notification","open","closed","search","showAll","transferTicketModal","fieldLabel","fieldQueueLabel","fieldQueuePlaceholder","noOptions","ok","ticketsList","pendingHeader","assignedHeader","noTicketsTitle","noTicketsMessage","accept","reopen","newTicketModal","mainDrawer","listItems","quickMessages","queues","tags","administration","settings","helps","messagesAPI","annoucements","chats","financeiro","files","queueIntegration","appBar","notRegister","user","logout","deleteAll","textMessage","mediaMessage","media","notifications","noTickets","noAttachment","attach","dialog","shortcode","geral","visao","mediaName","messageVariablesPicker","label","vars","contactFirstName","contactName","greeting","protocolNumber","date","hour","contactLists","company","contactListItems","lists","importTitlte","contactList","scheduledAt","completedAt","confirmation","new","update","readonly","message1","message2","message3","message4","message5","confirmationMessage1","confirmationMessage2","confirmationMessage3","confirmationMessage4","confirmationMessage5","messagePlaceholder","tagList","fileList","okadd","restart","close","announcements","active","inactive","priority","text","mediaPath","campaignsConfig","queueSelect","inputLabel","userCreation","messagesList","header","assignedTo","return","resolve","messagesInput","placeholderOpen","placeholderClosed","signMessage","contactDrawer","fileModal","fileOptions","ticketOptionsMenu","schedule","transfer","registerAppointment","appointmentsModal","textarea","titleFrom","confirm","messageOptionsMenu","reply","backendErrors","ERR_NO_OTHER_WHATSAPP","ERR_NO_DEF_WAPP_FOUND","ERR_WAPP_NOT_INITIALIZED","ERR_WAPP_CHECK_CONTACT","ERR_WAPP_INVALID_CONTACT","ERR_WAPP_DOWNLOAD_MEDIA","ERR_INVALID_CREDENTIALS","ERR_SENDING_WAPP_MSG","ERR_DELETE_WAPP_MSG","ERR_OTHER_OPEN_TICKET","ERR_SESSION_EXPIRED","ERR_USER_CREATION_DISABLED","ERR_NO_PERMISSION","ERR_DUPLICATED_CONTACT","ERR_NO_SETTING_FOUND","ERR_NO_CONTACT_FOUND","ERR_NO_TICKET_FOUND","ERR_NO_USER_FOUND","ERR_NO_WAPP_FOUND","ERR_CREATING_MESSAGE","ERR_CREATING_TICKET","ERR_FETCH_WAPP_MSG","ERR_QUEUE_COLOR_ALREADY_EXISTS","ERR_WAPP_GREETING_REQUIRED","ERR_COMPANY_NAME_ALREADY_EXISTS","ERR_USER_EMAIL_ALREADY_EXISTS","en","es","i18n","use","LanguageDetector","init","defaultNS","fallbackLng","ns","resources","toastError","err","_err$response","_err$response$data","errorMsg","response","data","error","exists","toast","t","toastId","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","theme","isString","api","axios","create","baseURL","withCredentials","openApi","reducer","state","action","payload","whatsApp","whatsAppIndex","s","updatedAt","retries","whatsAppId","useWhatsApps","whatsApps","dispatch","useReducer","loading","setLoading","useState","useContext","useEffect","async","get","fetchSession","whatsappId","WhatsAppsContext","WhatsAppsProvider","_ref","children","createElement","Provider","value","useAuth","history","useHistory","isAuth","setIsAuth","setUser","interceptors","request","config","headers","Promise","reject","_error$response","_error$response2","originalRequest","_retry","post","setItem","stringify","defaults","Authorization","removeItem","handleLogin","userData","has","isArray","setting","find","key","moment","locale","dueDate","vencimento","format","diff","before","isBefore","dias","duration","asDays","Math","round","handleLogout","getCurrentUserInfo","AuthContext","AuthProvider","rules","static","admin","Can","role","perform","check","permissions","staticPermissions","includes","dynamicPermissions","dynamic","permissionCondition","defaultProps","useStyles","makeStyles","root","display","flexDirection","alignItems","margin","inputContainer","width","marginBottom","input","flexGrow","marginRight","listContainer","height","marginTop","backgroundColor","borderRadius","list","ToDoList","classes","task","setTask","tasks","setTasks","editIndex","setEditIndex","savedTasks","className","TextField","onChange","target","variant","Button","onClick","handleAddTask","trim","newTasks","createdAt","List","map","index","ListItem","ListItemText","primary","secondary","toLocaleString","ListItemSecondaryAction","IconButton","handleEditTask","EditIcon","handleDeleteTask","DeleteIcon","usePlans","getPlanList","url","method","responseData","finder","remove","getPlanCompany","useVersion","getVersion","ListSubheader","ListItemLink","props","icon","to","renderLink","useMemo","forwardRef","itemProps","ref","RouterLink","Object","assign","button","dense","component","ListItemIcon","newChats","forEach","chatIndex","u","chatId","MainListItems","drawerClose","collapsed","connectionWarning","setConnectionWarning","openCampaignSubmenu","setOpenCampaignSubmenu","showCampaigns","setShowCampaigns","showKanban","setShowKanban","showOpenAi","setShowOpenAi","showIntegrations","setShowIntegrations","showSchedules","setShowSchedules","showInternalChat","setShowInternalChat","showExternalApi","setShowExternalApi","invisible","setInvisible","pageNumber","setPageNumber","searchParam","version","setVersion","_version","fetchVersion","planConfigs","useCampaigns","useKanban","useOpenAi","useIntegrations","useSchedules","useInternalChat","useExternalApi","fetchData","delayDebounceFn","fetchChats","clearTimeout","unreadsCount","chatUser","unreads","filter","whats","records","DashboardOutlinedIcon","WhatsAppIcon","TableChartIcon","FlashOnIcon","BorderColorIcon","ContactPhoneOutlinedIcon","EventIcon","LocalOfferIcon","Badge","ForumIcon","HelpOutlineIcon","Fragment","Divider","hidden","style","position","fontSize","textAlign","paddingLeft","inset","prev","EventAvailableIcon","ExpandLessIcon","ExpandMoreIcon","Collapse","in","unmountOnExit","disablePadding","ListIcon","PeopleIcon","SettingsOutlinedIcon","super","AnnouncementIcon","AllInclusive","DeviceHubOutlined","badgeContent","SyncAltIcon","AttachFile","AccountTreeOutlinedIcon","PeopleAltOutlinedIcon","CodeRoundedIcon","LocalAtmIcon","Typography","padding","fontWeight","buttonProgress","green","top","left","marginLeft","ButtonWithSpinner","rest","CircularProgress","size","elements","allowedElements","CustomLink","rel","MarkdownWrapper","_ref2","boldRegex","tildaRegex","replace","markdownOptions","disableParsingRawHTML","forceInline","overrides","a","element","el","Markdown","TicketsContext","TicketsContextProvider","currentTicket","setCurrentTicket","code","uuid","messageMedia","objectFit","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius","ModalImageCors","imageUrl","fetching","setFetching","blobUrl","setBlobUrl","responseType","URL","createObjectURL","Blob","fetchImage","ModalImage","smallSrcSet","medium","large","alt","ConfirmationModal","onClose","onConfirm","Dialog","aria-labelledby","DialogTitle","DialogContent","dividers","DialogActions","ReplyMessageContext","ReplyMessageProvider","replyingMessage","setReplyingMessage","MessageOptionsMenu","menuOpen","handleClose","anchorEl","confirmationOpen","setConfirmationOpen","Menu","getContentAnchorEl","anchorOrigin","vertical","horizontal","transformOrigin","fromMe","MenuItem","e","hanldeReplyMessage","LocationPreview","image","link","description","handleLocation","minWidth","float","src","flexWrap","gutterBottom","dangerouslySetInnerHTML","__html","fullWidth","messagesListWrapper","overflow","minHeight","backgroundImage","mode","whatsBackground","whatsBackgroundDark","overflowY","scrollbarStyles","circleLoading","opacity","messageLeft","maxWidth","right","whiteSpace","alignSelf","paddingRight","paddingTop","paddingBottom","boxShadow","quotedContainerLeft","quotedMsg","quotedSideColorLeft","flex","messageRight","quotedContainerRight","quotedMsgRight","quotedSideColorRight","messageActionsButton","zIndex","messageContactName","textContentItem","overflowWrap","textContentItemEdited","textContentItemDeleted","fontStyle","timestamp","bottom","dailyTimestamp","dailyTimestampText","ackIcons","verticalAlign","deletedIcon","ackDoneAllIcon","downloadMedia","justifyContent","newMessages","messageIndex","m","newMessage","messageToUpdate","MessagesList","ticket","ticketId","isGroup","hasMore","setHasMore","lastMessageRef","useRef","selectedMessage","setSelectedMessage","setAnchorEl","messageOptionsMenuOpen","Boolean","currentTicketId","current","scrollToBottom","fetchMessages","scrollIntoView","handleOpenMessageOptionsMenu","currentTarget","checkMessageMedia","mediaType","split","locationParts","imageLocation","linkLocation","descriptionLocation","mediaUrl","controls","startIcon","GetApp","href","renderDailyTimestamps","parseISO","messageDay","previousMessageDay","isSameDay","renderNumberTicket","_message$ticket","_message$ticket$whats","messageTicket","ticketNunberClosed","ticketNunberOpen","renderMessageDivider","renderQuotedMessage","_message$quotedMsg","_message$quotedMsg2","_message$quotedMsg3","_message$quotedMsg3$c","_message$quotedMsg4","clsx","onScroll","scrollTop","document","getElementById","prevPageNumber","renderMessages","_message$contact","_message$contact2","messageCenter","isDeleted","ExpandMore","xmlns","viewBox","fill","d","isEdited","Block","ack","AccessTime","Done","DoneAll","renderMessageAck","ticketHeader","borderBottom","TicketHeaderSkeleton","Card","square","CardHeader","titleTypographyProps","noWrap","subheaderTypographyProps","avatar","Skeleton","animation","Avatar","subheader","palette","tabHeaderBackground","breakpoints","down","TicketHeader","TicketInfo","userName","setUserName","setContactName","offsetWidth","truncadName","cursor","profilePicUrl","mainWrapper","borderLeft","transition","transitions","easing","sharp","leavingScreen","mainWrapperShift","easeOut","enteringScreen","TicketMessagesDialog","setDrawerOpen","setContact","setTicket","queueId","q","fetchTicket","prevState","_data$contact","handleDrawerOpen","renderTicketInfo","Box","contrastColor","tag","ContactTag","toUpperCase","TicketAbstractDialog","abstract","setAbstract","res","scroll","question","answer","pendingTicket","queueTag","background","noTicketsDiv","newMessagesCount","noTicketsText","lineHeight","connectionTag","contactNameWrapper","lastMessageTime","justifySelf","closedBadge","contactLastMessage","badgeStyle","acceptButton","ticketQueueColor","ticketInfo","secondaryContentSecond","alignContent","ticketInfo1","Radiusdot","transform","TicketListItemCustom","_ticket$queue5","_ticket$queue5$name","_ticket$queue6","_ticket$contact","_ticket$contact2","_ticket$whatsapp","_ticket$whatsapp2","_ticket$whatsapp2$nam","_ticket$queue7","_ticket$queue8","_ticket$queue8$name","ticketUser","setTicketUser","ticketQueueName","setTicketQueueName","setTicketQueueColor","setTag","whatsAppName","setWhatsAppName","openTicketMessageDialog","setOpenTicketMessageDialog","openTicketAbstractDialog","setOpenTicketAbstractDialog","useParams","isMounted","_ticket$queue","_ticket$queue$name","_ticket$queue2","_ticket$user","_ticket$user$name","_ticket$whatsapp$name","handleSendMessage","msg","read","uuidv4","handleSelectTicket","selected","Tooltip","arrow","placement","ListItemAvatar","disableTypography","VisibilityIcon","blue","DescriptionOutlined","chatbot","AndroidIcon","grey","lastMessage","unreadMessages","badge","settingIndex","put","handleAcepptTicket","_ticket$queue3","useIntegration","promptId","handleCloseTicket","_ticket$queue4","handleReopenTicket","useTickets","queueIds","withUnreadMessages","setTickets","fetchTickets","tabContainer","maxHeight","popoverPaper","spacing","noShadow","NotificationsPopOver","volume","ticketIdUrl","pathname","ticketIdRef","isOpen","setIsOpen","setNotifications","showPendingTickets","setShowPendingTickets","setDesktopNotifications","play","useSound","alertSound","soundAlertRef","historyRef","fetchSettings","Notification","requestPermission","processNotifications","newNotifications","ticketIndex","notfiticationIndex","n","String","_user$queues","some","visibilityState","handleNotifications","urlPicture","renotify","onclick","preventDefault","focus","handleClickAway","NotificationTicket","handleClick","aria-label","overlap","ChatIcon","Popover","disableScrollLock","paper","TicketListItem","icons","customBadge","NotificationsVolume","setVolume","VolumeUpIcon","Grid","container","item","VolumeDownIcon","xs","Slider","step","min","max","handleVolumeChange","chips","chip","QueueSelect","selectedQueueIds","multiple","setQueues","fetchQueues","FormControl","InputLabel","shrink","Select","labelWidth","MenuProps","renderValue","_queues$find","_queues$find2","Chip","multFieldLine","btnWrapper","formControl","UserSchema","Yup","shape","required","UserModal","initialState","loggedInUser","setSelectedQueueIds","setWhatsappId","_data$queues","userQueueIds","fetchUser","Formik","initialValues","enableReinitialize","validationSchema","onSubmit","values","handleSaveUser","setSubmitting","touched","errors","isSubmitting","Form","Field","as","autoFocus","helperText","labelId","divider","dividerText","textField","backdrop","drawer","BackdropLoading","Backdrop","switch","visible","btnHeader","DarkMode","mainPaper","AnnouncementDialog","announcement","aria-describedby","border","filename","backgroundRepeat","backgroundSize","backgroundPosition","DialogContentText","newAnnouncements","announcementIndex","announcementId","AnnouncementsPopover","setAnnouncement","showAnnouncementDialog","setShowAnnouncementDialog","fetchAnnouncements","record","Notifications","Paper","scrollHeight","clientHeight","useDate","dateToClient","strDate","isValid","datetimeToClient","dateToDatabase","ChatPopover","notifySound","userObj","senderId","goToMessages","fancyBackground","main","toolbar","dark","barraSuperior","toolbarIcon","appBarShift","menuButton","menuButtonHidden","drawerPaper","scrollbarStylesSoft","drawerPaperClose","overflowX","up","appBarSpacer","containerWithScroll","logo","LoggedInLayout","_user$company","_user$company2","_user$company3","_user$company4","themeToggle","userModalOpen","setUserModalOpen","setMenuOpen","drawerOpen","drawerVariant","setDrawerVariant","useTheme","colorMode","greaterThenSm","useMediaQuery","interval","setInterval","clearInterval","handleCloseMenu","Drawer","ChevronLeftIcon","AppBar","Toolbar","edge","MenuIcon","Brightness7Icon","Brightness4Icon","handleRefreshPage","CachedIcon","aria-controls","aria-haspopup","AccountCircle","handleOpenUserModal","handleClickLogout","cardAvatar","cardTitle","cardSubtitle","CardCounter","red","pointer","RatingBox","rating","ratingTrunc","trunc","Rating","defaultValue","readOnly","TableAttendantsStatus","attendants","TableContainer","Table","TableHead","TableRow","TableCell","align","TableBody","k","minutes","avgSupportTime","startOf","online","CheckCircleIcon","ErrorIcon","useDashboard","useContacts","dateStart","dateEnd","setContacts","count","setCount","fetchContacts","useMessages","ChartJS","CategoryScale","LinearScale","BarElement","Title","Legend","ChartDataLabels","responsive","plugins","legend","datalabels","anchor","offset","textStrokeColor","textStrokeWidth","font","weight","ChatsUser","initialDate","setInitialDate","finalDate","setFinalDate","ticketsData","setTicketsData","handleGetTicketsInformation","dataCharts","labels","nome","datasets","quantidade","Stack","direction","sx","my","LocalizationProvider","dateAdapter","AdapterDateFns","adapterLocale","brLocale","DatePicker","newValue","renderInput","Bar","ChartsDate","hasOwnProperty","horario","total","fixedHeightPaper","alignRight","selectContainer","iframeDashboard","customFixedHeightPaper","customFixedHeightPaperLg","card1","boxticket","card2","card3","card4","card5","card6","card7","card8","card9","fixedHeightPaper2","Dashboard","counters","setCounters","setAttendants","period","setPeriod","filterType","setFilterType","dateFrom","setDateFrom","dateTo","setDateTo","newDate","getDate","month","getMonth","year","getFullYear","showFilter","setShowFilter","queueTicket","setQueueTicket","days","isEmpty","date_from","date_to","keys","formatTime","firstLoad","Container","sm","md","elevation","paragraph","supportHappening","CallIcon","supportPending","HourglassEmptyIcon","supportFinished","all","GetContacts","GroupAddIcon","AccessAlarmIcon","avgWaitTime","TimerIcon","handleChangeFilterType","FormHelperText","InputLabelProps","handleChangePeriod","extraAttr","ContactSchema","ContactModal","contactId","onSave","fetchContact","handleSaveContact","FieldArray","_ref3","info","DeleteOutlineIcon","offline","createFilterOptions","NewTicketModal","modalOpen","initialContact","setOptions","setSearchParam","selectedContact","setSelectedContact","selectedQueue","setSelectedQueue","selectedWhatsapp","setSelectedWhatsapp","newContact","setNewContact","whatsapps","setWhatsapps","contactModalOpen","setContactModalOpen","openAlert","setOpenAlert","userTicketOpen","setUserTicketOpen","queueTicketOpen","setQueueTicketOpen","then","handleSaveTicket","createAddContactOption","filterOptions","filtered","inputValue","renderOption","option","renderOptionLabel","handleCloseContactModal","Autocomplete","clearOnBlur","autoHighlight","freeSolo","clearOnEscape","getOptionLabel","handleSelectOption","onKeyPress","InputProps","endAdornment","displayEmpty","w","TicketsSkeleton","ticketsListWrapper","borderTop","ticketsListHeader","ticketsCount","unshift","TicketsListCustom","updateCount","filteredTickets","indexOf","shouldUpdateTicket","_data$ticket","_data$ticket$queue","TicketsListSkeleton","TabPanel","TicketsQueueSelect","userQueues","Checkbox","checked","TagsFilter","onFiltered","setTags","selecteds","setSelecteds","loadTags","v","r","renderTags","getTagProps","textShadow","UsersFilter","initialUsers","setUsers","loadUsers","userList","getOptionSelected","toLowerCase","getUserProps","ticketsWrapper","tabsHeader","tabsInternal","settingsIcon","tab","internalTab","ticketOptionsBox","optionsBackground","ticketSearchLine","serachInputWrapper","searchIcon","searchInput","insiderTabPanel","insiderDoubleTabPanel","labelContainer","iconLabelWrapper","insiderTabLabel","smallFormControl","TicketsManagerTabs","setTab","tabOpen","setTabOpen","newTicketModalOpen","setNewTicketModalOpen","showAllTickets","setShowAllTickets","searchInputRef","openCount","setOpenCount","pendingCount","setPendingCount","selectedTags","setSelectedTags","selectedUsers","setSelectedUsers","searchTimeout","applyPanelStyle","handleCloseOrOpenTicket","Tabs","handleChangeTab","indicatorColor","textColor","Tab","MoveToInboxIcon","CheckBoxIcon","SearchIcon","InputBase","inputRef","searchedTerm","FormControlLabel","labelPlacement","control","Switch","handleChangeTabOpen","TicketsList","val","ContactDrawerSkeleton","contactHeader","contactAvatar","contactDetails","contactExtraInfo","textCenter","ContactForm","onCancel","inline","ContactNotesDialogListItem","deleteItem","useTicketNotes","saveNote","deleteNote","listNotes","NoteSchema","ContactNotes","newNote","setNewNote","showOnDeleteDialog","setShowOnDeleteDialog","selectedNote","setSelectedNote","notes","setNotes","handleResetState","loadNotes","openAndFetchData","handleChangeComment","handleOpenDialogDelete","handleSave","setErrors","rows","multiline","flexShrink","borderRight","contactdrawer","ContactDrawer","_contact$extraInfo","handleDrawerClose","setModalOpen","openForm","setOpenForm","PaperProps","BackdropProps","ModalProps","CloseIcon","CreateIcon","Link","timerBox","RecordingTimer","timer","setTimer","seconds","addZero","useQuickMessages","deleteRecord","Mp3Recorder","MicRecorder","bitRate","bordabox","newMessageBox","newmessagebox","messageInputWrapper","inputdigita","messageInput","sendMessageIcons","uploadInput","viewMediaInputWrapper","emojiBox","audioLoading","recorderWrapper","cancelAudioIcon","sendAudioIcon","replyginMsgWrapper","replyginMsgContainer","replyginMsgBody","replyginContactMsgSideColor","replyginSelfMsgSideColor","EmojiOptions","showEmoji","setShowEmoji","handleAddEmoji","MoodIcon","Picker","perLine","showPreview","showSkinTones","onSelect","SignSwitch","setSignMessage","isWidthUp","FileInput","handleChangeMedias","disableOption","htmlFor","AttachFileIcon","ActionButtons","inputMessage","recording","ticketStatus","handleCancelAudio","handleUploadAudio","handleStartRecording","SendIcon","HighlightOffIcon","CheckCircleOutlineIcon","MicIcon","CustomInput","setInputMessage","handleInputPaste","handleQuickAnswersClick","setQuickMessages","popupOpen","setPopupOpen","listQuickMessages","truncatedMessage","firstWord","charAt","filteredOptions","setInputRef","closeIcon","isObject","opt","isNil","onInputChange","onPaste","shiftKey","maxRows","withWidth","_medias$","medias","setMedias","setRecording","initialValue","storedValue","setStoredValue","valueToStore","Function","useLocalStorage","emoji","native","selectedMedias","from","clipboardData","blob","extension","formData","FormData","getTime","append","handleUploadQuickMessageMedia","navigator","mediaDevices","getUserMedia","audio","start","stop","getMp3","CancelIcon","ClearIcon","renderReplyingMessage","useQueues","findAll","TransferTicketModalCustom","ticketid","allQueues","setAllQueues","selectedUser","setSelectedUser","findAllQueues","loadQueues","fetchUsers","noOptionsText","InputComponent","other","OutlinedDiv","inputComponent","inputProps","MessageVariablesPicker","msgVars","msgVar","onMouseDown","ScheduleSchema","ScheduleModal","scheduleId","cleanContact","setSchedule","currentContact","setCurrentContact","attachment","setAttachment","attachmentFile","messageInputRef","customList","capitalize","file","head","handleAttachmentFile","scheduleData","handleSaveSchedule","setFieldValue","setValueFunc","firstHalfText","selectionStart","secondHalfText","selectionEnd","newCursorPos","setSelectionRange","handleClickMsgVar","DeleteOutline","click","TicketOptionsMenu","transferTicketModalOpen","setTransferTicketModalOpen","scheduleModalOpen","setScheduleModalOpen","setContactId","handleOpenConfirmationModal","keepMounted","handleOpenScheduleModal","handleCloseTransferTicketModal","handleCloseScheduleModal","actionButtons","TicketActionButtonsCustom","ticketOptionsMenuOpen","customTheme","createTheme","handleUpdateTicketStatus","Replay","UndoRoundedIcon","ThemeProvider","MoreVert","TagsContainer","createTag","optionsChanged","newTag","syncTags","PaperComponent","Ticket","TicketActionButtons","MessageInput","chatContainer","chatPapper","contactsWrapper","messagesWrapper","welcomeMsg","TicketsCustom","TicketsManager","TicketAdvancedLayout","styled","gridTemplateRows","placeholderContainer","placeholderItem","TicketAdvanced","setOption","BottomNavigation","showLabels","BottomNavigationAction","QuestionAnswerIcon","Tickets","paymentSchema","cardNumber","expiryDate","parseInt","currentDate","cvv","matches","PaymentForm","formatCardNumber","handleChange","rowSpacing","columnSpacing","maxLength","formattedValue","slice","formatExpiryDate","InputAdornment","CalendarToday","PaymentSchema","cpfCnpj","SignUp","creditCard","setCreditCard","setPlans","listPlans","CssBaseline","phone","planId","postalCode","recurrence","campaignsEnabled","handleSignUp","autoComplete","InputMask","mask","field","justify","mt","Copyright","nomeEmpresa","versionSystem","powered","Login","handleChangeInput","noValidate","mainContainer","contentWrapper","MainContainer","contactsHeader","MainHeader","MainHeaderButtonsWrapper","customTableCell","TableRowSkeleton","columns","_","SessionSchema","memo","isDefault","provider","timeUseBotQueues","maxUseBotQueues","setWhatsApp","selectedQueueId","setSelectedQueueId","selectedPrompt","setSelectedPrompt","setPrompts","whatsQueueIds","transferQueueId","handleChangePrompt","whatsappData","handleSaveWhatsApp","selectedIds","timeToTransfer","selectedId","setQrCode","fontFamily","class","focusable","aria-hidden","QRCode","tooltip","typography","pxToRem","tooltipPopper","CustomToolTip","popper","Connections","whatsAppModalOpen","setWhatsAppModalOpen","qrModalOpen","setQrModalOpen","selectedWhatsApp","setSelectedWhatsApp","confirmModalOpen","setConfirmModalOpen","confirmationModalInitialState","confirmModalInfo","setConfirmModalInfo","handleOpenWhatsAppModal","handleCloseWhatsAppModal","useCallback","handleCloseQrModal","renderActionButtons","handleOpenQrModal","handleStartWhatsAppSession","handleRequestNewQrCode","QrcodeModal","WhatsAppModal","SignalCellularConnectedNoInternet0Bar","CropFree","SignalCellular4Bar","SignalCellularConnectedNoInternet2Bar","renderStatusToolTips","CheckCircle","handleEditWhatsApp","Edit","textfield","row","buttonContainer","SchedulesForm","labelSaveButton","setSchedules","weekday","weekdayEn","startTime","endTime","render","arrayHelpers","FastField","NumberFormat","customInput","_ref4","useCompanies","finding","updateSchedules","QueueSelectCustom","ModalUsers","tableContainer","textRight","CompanyForm","onDelete","modalUser","setModalUser","firstUser","setFirstUser","setRecord","handleCloseModalUsers","resetForm","handleSubmit","setValues","incrementDueDate","handleOpenModalUsers","CompaniesManagerGrid","rowStyle","renderPlan","renderCampaignsStatus","renderStatus","CompaniesManager","showConfirmDialog","setShowConfirmDialog","setRecords","loadPlans","companyList","handleCancel","handleOpenDeleteDialog","handleDelete","PlanManagerForm","PlansManagerGrid","minimumFractionDigits","renderCampaigns","renderSchedules","renderInternalChat","renderExternalApi","renderKanban","renderOpenAi","renderIntegrations","PlansManager","planList","_data$value","HelpManagerForm","HelpsManagerGrid","video","HelpsManager","useHelps","loadHelps","helpList","useSettings","getAll","fontecor","Options","scheduleTypeChanged","userRating","setUserRating","scheduleType","setScheduleType","callType","setCallType","chatbotType","setChatbotType","CheckMsgIsGroup","setCheckMsgIsGroupType","loadingUserRating","setLoadingUserRating","loadingScheduleType","setLoadingScheduleType","loadingCallType","setLoadingCallType","loadingChatbotType","setLoadingChatbotType","loadingCheckMsgIsGroup","setCheckMsgIsGroup","asaasType","setAsaasType","loadingAsaasType","setLoadingAsaasType","SendGreetingAccepted","setSendGreetingAccepted","loadingSendGreetingAccepted","setLoadingSendGreetingAccepted","SettingsTransfTicket","setSettingsTransfTicket","loadingSettingsTransfTicket","setLoadingSettingsTransfTicket","sendGreetingMessageOneQueues","setSendGreetingMessageOneQueues","loadingSendGreetingMessageOneQueues","setLoadingSendGreetingMessageOneQueues","handleChangeUserRating","handleScheduleType","handleGroupType","handleCallType","handleChatbotType","handleSendGreetingAccepted","handleSettingsTransfTicket","handleSendGreetingMessageOneQueues","scrollButtons","handleChangeAsaas","OnlyForSuperUser","findCompany","formik","useFormik","handleSaveCompany","SettingsCustom","setCompany","currentUser","setCurrentUser","setSettings","schedulesEnabled","setSchedulesEnabled","getAllSettings","settingList","findData","isSuper","handleTabChange","InputField","errorText","meta","useField","at","_renderHelperText","SelectField","selectedValue","isError","countries","AddressForm","billingName","setBillingName","addressZipCode","setAddressZipCode","addressStreet","setAddressStreet","addressState","setAddressState","addressCity","setAddressCity","addressDistrict","setAddressDistrict","formField","firstName","address1","city","zipcode","country","ul","listStyle","cardHeader","cardPricing","footer","customCard","custom","Pricing","setActiveStep","activeStep","usersPlans","setUsersPlans","companiesPlans","setCompaniesPlans","connectionsPlans","setConnectionsPlans","storagePlans","setStoragePlans","customValuePlans","setCustomValuePlans","loadCompanies","companiesList","plansCompanies","price","buttonText","buttonVariant","tiers","tier","StarIcon","CardContent","line","CardActions","listItem","PaymentDetails","formValues","newPlan","ReviewOrder","useFormikContext","ShippingDetails","div","_templateObject","_taggedTemplateLiteral","_templateObject2","_templateObject3","_templateObject4","CheckoutSuccess","formId","requiredErrorMsg","lastName","invalidErrorMsg","useAddressForPaymentDetails","invoiceId","nameOnCard","checkoutFormModel","nullable","stepper","wrapper","CheckoutPage","Invoice","steps","setinvoiceId","currentValidationSchema","isLastStep","_handleBack","Stepper","Step","StepLabel","formInitialValues","newValues","address2","_submitForm","setTouched","_renderStepContent","invoices","newUsers","userIndex","Invoices","selectedContactId","setSelectedContactId","selectedPlanId","setSelectedPlanId","fetchInvoices","hoje","rowStatus","SubscriptionModal","ev","detail","currency","paymentUrl","Users","deletingUser","setDeletingUser","handleDeleteUser","handleCloseUserModal","startAdornment","handleEditUser","newContacts","contactIndex","Contacts","contactTicket","setContactTicket","deletingContact","setDeletingContact","confirmOpen","setConfirmOpen","handleDeleteContact","go","handleimportContact","handleOpenContactModal","CSVLink","textDecoration","separator","hadleEditContact","ColorPicker","currentColor","selectedColor","setSelectedColor","BlockPicker","triangle","colors","hex","onChangeComplete","addButton","QueueOptionStepper","updateOptions","activeOption","setActiveOption","handleOption","parentId","optionList","edition","handleEdition","renderTitle","handleOptionChangeTitle","SaveIcon","order","handleDeleteOption","renderMessage","handleOptionChangeMessage","renderStep","StepContent","optionNumber","handleAddOption","AddIcon","nonLinear","orientation","QueueOptions","fetchOptions","addOption","newOption","renderStepper","colorAdorment","QueueSchema","QueueModal","colorPickerModalOpen","setColorPickerModalOpen","setQueue","greetingRef","setIntegrations","queueIntegrations","handleSaveQueue","onFocus","Colorize","textField1","integration","newQueues","queueIndex","Queues","queueModalOpen","setQueueModalOpen","handleCloseConfirmationModal","handleDeleteQueue","handleCloseQueueModal","handleOpenQueueModal","handleEditQueue","TagSchema","TagModal","tagId","kanban","setKanban","handleKanbanChange","tagData","handleSaveTag","ColorBox","disableAlpha","hslGradient","newTags","tagIndex","Tags","selectedTag","setSelectedTag","deletingTag","setDeletingTag","tagModalOpen","setTagModalOpen","fetchTags","handleDeleteTag","handleCloseTagModal","handleOpenTagModal","handleEditTag","mainHeader","elementMargin","formContainer","MessagesAPI","formMessageTextData","formMessageMediaData","setFile","handleSendTextMessage","firstFile","handleSendMediaMessage","mainPaperContainer","gridTemplateColumns","gap","helpPaper","shadows","paperHover","videoThumbnail","videoTitle","videoDescription","videoModal","videoModalContent","outline","aspectRatio","Helps","selectedVideo","setSelectedVideo","closeVideoModal","handleModalClose","addEventListener","removeEventListener","openVideoModal","Modal","frameBorder","allow","allowFullScreen","ContactListSchema","ContactListModal","contactListId","setContactList","fetchContactList","contactListData","handleSaveContactList","newContactLists","contactListIndex","ContactLists","selectedContactList","setSelectedContactList","deletingContactList","setDeletingContactList","contactListModalOpen","setContactListModalOpen","fetchContactLists","handleDeleteContactList","ContactListDialog","handleCloseContactListModal","handleOpenContactListModal","contactsCount","planilhaExemplo","download","DownloadIcon","goToContacts","handleEditContactList","ContactListItemModal","useContactLists","findById","ContactListItems","contactListItemModalOpen","setContactListItemModalOpen","fileUploadRef","findContactList","handleCloseContactListItemModal","handleImportContacts","goToContactLists","handleOpenContactListItemModal","isWhatsappValid","titleAccess","htmlColor","BlockIcon","path","require","QuickeMessageSchema","QuickMessageDialog","quickemessageId","quickemessage","setQuickemessage","quickemessageData","isMedia","basename","handleSaveQuickeMessage","quickmessages","newQuickmessages","quickemessageIndex","Quickemessages","selectedQuickemessage","setSelectedQuickemessage","deletingQuickemessage","setDeletingQuickemessage","quickemessageModalOpen","setQuickMessageDialogOpen","quickemessages","fetchQuickemessages","handleDeleteQuickemessage","resetPagination","handleCloseQuickMessageDialog","handleOpenQuickMessageDialog","_quickemessage$mediaN","handleEditQuickemessage","Kanban","reloadData","setReloadData","isInitialLoadComplete","setIsInitialLoadComplete","fetchedTags","lista","jsonString","lanes","UserQueue","teste","handleCardClick","cards","toString","popularCards","Board","onCardMoveAcrossLanes","cardId","sourceLaneId","targetLaneId","Route","Component","isPrivate","Redirect","RouterRoute","eventTitleStyle","textOverflow","localizer","momentLocalizer","defaultMessages","time","allDay","week","work_week","day","previous","next","yesterday","tomorrow","today","agenda","noEventsInRange","showMore","scheduleIndex","Schedules","selectedSchedule","setSelectedSchedule","deletingSchedule","setDeletingSchedule","paramName","URLSearchParams","fetchSchedules","handleOpenScheduleModalFromContactId","handleDeleteSchedule","Calendar","formats","agendaDateFormat","weekdayFormat","events","handleEditSchedule","end","startAccessor","endAccessor","tabmsg","campaigntab","CampaignSchema","CampaignModal","campaignId","tagListId","campaign","setCampaign","setContactLists","messageTab","setMessageTab","campaignEditable","setCampaignEditable","tagLists","setTagLists","formattedTagLists","catch","_ref5","prevCampaignData","entries","_ref6","moreThenAnHour","Number","isNaN","isEditable","renderMessageField","identifier","renderConfirmationMessageField","dataValues","_ref7","handleSaveCampaign","_ref8","fileListId","f","centered","restartCampaign","cancelCampaign","newCampaigns","campaignIndex","Campaigns","selectedCampaign","setSelectedCampaign","deletingCampaign","setDeletingCampaign","campaignModalOpen","setCampaignModalOpen","fetchCampaigns","handleDeleteCampaign","handleCloseCampaignModal","handleOpenCampaignModal","formatStatus","PauseCircleOutlineIcon","PlayCircleOutlineIcon","DescriptionIcon","handleEditCampaign","tabPanelsContainer","initialSettings","messageInterval","longerIntervalAfter","greaterInterval","variables","CampaignsConfig","showVariablesForm","setShowVariablesForm","selectedKey","setSelectedKey","variable","setVariable","settingsList","fromEntries","handleOnChangeVariable","changedProp","handleOnChangeSettings","removeVariable","newList","addVariable","variablesExists","CampaignReport","validContacts","setValidContacts","delivered","setDelivered","confirmationRequested","setConfirmationRequested","confirmed","setConfirmed","percent","setPercent","mounted","findCampaign","valids","isNull","deliveredAt","confirmationRequestedAt","LinearProgress","GroupIcon","DoneIcon","DoneAllIcon","ListAltIcon","ScheduleIcon","AnnouncementSchema","AnnouncementModal","announcementData","handleSaveAnnouncement","Announcements","selectedAnnouncement","setSelectedAnnouncement","deletingAnnouncement","setDeletingAnnouncement","announcementModalOpen","setAnnouncementModalOpen","handleDeleteAnnouncement","handleCloseAnnouncementModal","handleOpenAnnouncementModal","_announcement$mediaNa","handleEditAnnouncement","boxlist","chatList","ChatList","handleSelectChat","handleDeleteChat","handleEditChat","pageInfo","selectedChat","setSelectedChat","getPrimaryText","mainText","getSecondaryText","getItemStyle","ownerId","messageList","chatlist","inputArea","buttonSend","boxLeft","boxRight","ChatMessages","handleLoadMore","scrollToBottomRef","baseRef","contentMessage","setContentMessage","sender","Input","onKeyUp","gridContainer","gridItem","gridItemTab","btnContainer","ChatModal","handleLoadNewChat","setTitle","alert","showDialog","setShowDialog","dialogType","setDialogType","currentChat","setCurrentChat","setChats","chatsPageInfo","setChatsPageInfo","setMessages","messagesPageInfo","setMessagesPageInfo","messagesPage","setMessagesPage","findChats","selectChat","findMessages","changedChats","filteredChats","sendMessage","deleteChat","loadMoreMessages","_formatDate","past","abs","ceil","trialExpiration","FileListSchema","FilesModal","setFiles","selectedFileNames","setSelectedFileNames","setFileList","uploadFiles","filesOptions","fileOption","fileData","handleSaveFileList","minRows","selectedFile","updatedOptions","updatedFileNames","newFiles","fileListIndex","FileLists","selectedFileList","setSelectedFileList","deletingFileList","setDeletingFileList","fileListModalOpen","setFileListModalOpen","fetchFileLists","fileId","handleDeleteFileList","FileModal","handleCloseFileListModal","handleOpenFileListModal","handleEditFileList","QueueSelectSingle","PromptModal","selectedVoice","setSelectedVoice","showApiKey","setShowApiKey","handleToggleApiKey","maxTokens","apiKey","maxMessages","setPrompt","fetchPrompt","handleChangeVoice","promptData","handleSavePrompt","VisibilityOff","Visibility","redBox","newPrompts","promptIndex","p","Prompts","promptModalOpen","setPromptModalOpen","handleDeletePrompt","handleClosePromptModal","handleOpenPromptModal","handleEditPrompt","btnLeft","DialogflowSchema","QueueIntegration","setIntegration","handleSaveDialogflow","xl","helpertext","handleTestSession","newIntegrations","integrationIndex","selectedIntegration","setSelectedIntegration","fetchIntegrations","handleDeleteIntegration","IntegrationModal","handleCloseIntegrationModal","dialogflow","n8n","webhooks","typebot","handleEditIntegration","passwordRegex","ForgetPassword","showAdditionalFields","setShowAdditionalFields","showResetPasswordButton","setShowResetPasswordButton","showPassword","setShowPassword","showConfirmPassword","setShowConfirmPassword","setError","togglePasswordVisibility","toggleConfirmPasswordVisibility","qs","isResetPasswordButtonClicked","newPassword","confirmPassword","when","is","oneOf","otherwise","handleResetPassword","handleSendEmail","VisibilityOffIcon","Routes","BrowserRouter","exact","Signup","TicketResponsiveContainer","QuickMessages","Files","Financeiro","Annoucements","Subscription","Chat","ToastContainer","queryClient","QueryClient","App","setLocale","prefersDarkMode","preferredTheme","setMode","prevMode","textPrimary","borderPrimary","light","announcementspopover","boxchatlist","messageIcons","inputBackground","mediainput","i18nlocale","ptBR","QueryClientProvider","client","ReactDOM"],"mappings":"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B,IAAA6b,cAAC+H,GAAY,CACXG,GAAG,YACHvB,QAASzK,KAAKkB,EAAE,iCAChB6K,KAAM9jB,IAAA6b,cAACkO,KAAoB,SAI3B5E,GAAanlB,IAAA6b,cAAC7b,IAAM4oB,SAAQ,KAC5B5oB,IAAA6b,cAACgN,IAAO,MAOR7oB,IAAA6b,cAAC8O,IAAU,CAAC5B,MAAO,CAAEE,SAAU,OAAQ2B,QAAS,OAAQ1B,UAAW,QAAS2B,WAAY,SAAS,e,kJCrf/G,MAAMjL,GAAYC,YAAWnG,IAAK,CACjC8K,OAAQ,CACPwE,SAAU,YAGX8B,eAAgB,CACf7d,MAAO8d,KAAM,KACb/B,SAAU,WACVgC,IAAK,MACLC,KAAM,MACNtK,WAAY,GACZuK,YAAa,OAiBAC,OAbWxP,IAAqC,IAApC,QAAEX,EAAO,SAAEY,KAAawP,GAAMzP,EACxD,MAAMqF,EAAUpB,KAEhB,OACC5f,IAAA6b,cAACgG,KAAMyC,OAAAC,OAAA,CAAC/C,UAAWR,EAAQwD,OAAQhe,SAAUwU,GAAaoQ,GACxDxP,EACAZ,GACAhb,IAAA6b,cAACwP,KAAgB,CAACC,KAAM,GAAI9J,UAAWR,EAAQ8J,mB,UCzBnD,MAAMS,GAAW,CAChB,IACA,OACA,UACA,OACA,UACA,QACA,QACA,IACA,OACA,MACA,MACA,MACA,aACA,OACA,KACA,SACA,SACA,UACA,OACA,OACA,MACA,WACA,OACA,WACA,KACA,MACA,UACA,MACA,SACA,MACA,KACA,KACA,KACA,QACA,WACA,aACA,SACA,SACA,OACA,KACA,KACA,KACA,KACA,KACA,KACA,OACA,SACA,SACA,KACA,OACA,IACA,SACA,MACA,QACA,MACA,MACA,SACA,QACA,SACA,KACA,OACA,OACA,MACA,OACA,UACA,OACA,WACA,OACA,QACA,MACA,WACA,SACA,KACA,WACA,SACA,SACA,IACA,QACA,UACA,MACA,WACA,IACA,KACA,KACA,OACA,IACA,OACA,SACA,UACA,SACA,QACA,SACA,OACA,SACA,QACA,MACA,UACA,MACA,QACA,QACA,KACA,WACA,QACA,KACA,QACA,OACA,QACA,KACA,QACA,IACA,KACA,MACA,QACA,MAGA,SACA,WACA,OACA,UACA,gBACA,IACA,QACA,OACA,iBACA,SACA,OACA,OACA,UACA,UACA,WACA,iBACA,OACA,OACA,MACA,OACA,SAGKC,GAAkB,CAAC,IAAK,IAAK,SAAU,KAAM,IAAK,OAAQ,OAE1DC,GAAa9P,IAAA,IAAC,SAAEC,KAAaiI,GAAOlI,EAAA,OACzC3b,IAAA6b,cAAA,IAAAyI,OAAAC,OAAA,GAAOV,EAAK,CAAElC,OAAO,SAAS+J,IAAI,wBAChC9P,IAsCY+P,OAlCSC,IAAmB,IAAlB,SAAEhQ,GAAUgQ,EACpC,MAAMC,EAAY,aACZC,EAAa,WAEflQ,GAAYiQ,EAAUrgB,KAAKoQ,KAC9BA,EAAWA,EAASmQ,QAAQF,EAAW,WAEpCjQ,GAAYkQ,EAAWtgB,KAAKoQ,KAC/BA,EAAWA,EAASmQ,QAAQD,EAAY,WAGzC,MAAMhgB,EAAU9L,IAAMikB,QAAQ,KAC7B,MAAM+H,EAAkB,CACvBC,uBAAuB,EACvBC,aAAa,EACbC,UAAW,CACVC,EAAG,CAAE1H,UAAW+G,MAUlB,OANAF,GAAS1G,QAAQwH,IACXb,GAAgBjM,SAAS8M,KAC7BL,EAAgBG,UAAUE,GAAWC,GAAMA,EAAG1Q,UAAY,QAIrDoQ,GACL,IAEH,OAAKpQ,EAEE5b,IAAA6b,cAAC0Q,KAAQ,CAACzgB,QAASA,GAAU8P,GAFd,M,WCjLvB,MAAM4Q,GAAiBvsB,0BAEjBwsB,GAAyB9Q,IAAmB,IAAlB,SAAEC,GAAUD,EAC3C,MAAO+Q,EAAeC,GAAoBzR,mBAAS,CAAEvQ,GAAI,KAAMiiB,KAAM,OAC5D3Q,EAAUC,uBASnB,OAPGd,oBAAU,KACmB,OAArBsR,EAAc/hB,IACdsR,EAAQza,KAAK,YAADN,OAAawrB,EAAcG,QAG5C,CAACH,IAGN1sB,IAAA6b,cAAC2Q,GAAe1Q,SAAQ,CACvBC,MAAO,CAAE2Q,gBAAeC,qBAEvB/Q,I,4JCdJ,MAAMgE,GAAYC,YAAWnG,IAAK,CACjCoT,aAAc,CACbC,UAAW,QACX3M,MAAO,IACPM,OAAQ,IACRsM,oBAAqB,EACrBC,qBAAsB,EACtBC,uBAAwB,EACxBC,wBAAyB,MAmCZC,OA/BQzR,IAAmB,IAAlB,SAAE0R,GAAU1R,EACnC,MAAMqF,EAAUpB,MACT0N,EAAUC,GAAerS,oBAAS,IAClCsS,EAASC,GAAcvS,mBAAS,IAiBvC,OAfAE,oBAAU,KACT,IAAKiS,EAAU,OACIhS,WAClB,MAAM,KAAExC,EAAI,QAAE4D,SAAkB7C,GAAI0B,IAAI+R,EAAU,CACjDK,aAAc,SAETvK,EAAMtf,OAAO8pB,IAAIC,gBACtB,IAAIC,KAAK,CAAChV,GAAO,CAAEjO,KAAM6R,EAAQ,mBAElCgR,EAAWtK,GACXoK,GAAY,IAEbO,IACE,CAACT,IAGHrtB,IAAA6b,cAACkS,KAAU,CACVvM,UAAWR,EAAQ8L,aACnBkB,YAAaV,EAAWD,EAAWG,EACnCS,OAAQX,EAAWD,EAAWG,EAC9BU,MAAOZ,EAAWD,EAAWG,EAC7BW,IAAI,W,sBCAQC,OAlCWzS,IAAoD,IAAnD,MAAErW,EAAK,SAAEsW,EAAQ,KAAEhN,EAAI,QAAEyf,EAAO,UAAEC,GAAW3S,EACvE,OACC3b,IAAA6b,cAAC0S,KAAM,CACN3f,KAAMA,EACNyf,QAASA,IAAMA,GAAQ,GACvBG,kBAAgB,kBAEhBxuB,IAAA6b,cAAC4S,KAAW,CAAC9jB,GAAG,kBAAkBrF,GAClCtF,IAAA6b,cAAC6S,KAAa,CAACC,UAAQ,GACtB3uB,IAAA6b,cAAC8O,IAAU,KAAE/O,IAEd5b,IAAA6b,cAAC+S,KAAa,KACb5uB,IAAA6b,cAACgG,KAAM,CACND,QAAQ,YACRE,QAASA,IAAMuM,GAAQ,GACvBphB,MAAM,WAEL8K,KAAKkB,EAAE,qCAETjZ,IAAA6b,cAACgG,KAAM,CACND,QAAQ,YACRE,QAASA,KACRuM,GAAQ,GACRC,KAEDrhB,MAAM,aAEL8K,KAAKkB,EAAE,yCCnCb,MAAM4V,GAAsB5uB,0BAEtB6uB,GAAuBnT,IAAmB,IAAlB,SAAEC,GAAUD,EACzC,MAAOoT,EAAiBC,GAAsB9T,mBAAS,MAEvD,OACClb,IAAA6b,cAACgT,GAAoB/S,SAAQ,CAC5BC,MAAO,CAAEgT,kBAAiBC,uBAEzBpT,IC2DWqT,OA3DYtT,IAAmD,IAAlD,QAAE5R,EAAO,SAAEmlB,EAAQ,YAAEC,EAAW,SAAEC,GAAUzT,EACvE,MAAM,mBAAEqT,GAAuB7T,qBAAW0T,KACnCQ,EAAkBC,GAAuBpU,oBAAS,GAoBzD,OACClb,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACC5oB,IAAA6b,cAACuS,GAAiB,CACjB9oB,MAAOyS,KAAKkB,EAAE,8CACdrK,KAAMygB,EACNhB,QAASiB,EACThB,UAxByBjT,UAC3B,UACOzB,GAAIlT,OAAO,aAADxF,OAAc6I,EAAQY,KACrC,MAAO6N,GACRD,GAAWC,MAsBTT,KAAKkB,EAAE,iDAETjZ,IAAA6b,cAAC0T,IAAI,CACJH,SAAUA,EACVI,mBAAoB,KACpBC,aAAc,CACbC,SAAU,SACVC,WAAY,SAEbC,gBAAiB,CAChBF,SAAU,MACVC,WAAY,SAEb/gB,KAAMsgB,EACNb,QAASc,GAERplB,EAAQ8lB,QACR7vB,IAAA6b,cAACiU,IAAQ,CAAChO,QA9BsBiO,IACnCT,GAAoB,GACpBH,MA6BKpX,KAAKkB,EAAE,8BAGVjZ,IAAA6b,cAACiU,IAAQ,CAAChO,QAvCckO,KAC1BhB,EAAmBjlB,GACnBolB,MAsCIpX,KAAKkB,EAAE,gC,qBCdEgX,OA5CStU,IAAmC,IAAlC,MAAEuU,EAAK,KAAEC,EAAI,YAAEC,GAAazU,EACjDP,oBAAU,OAAU,CAAC8U,EAAOC,EAAMC,IAElC,MAAMC,EAAiBhV,UACnB,IACIxX,OAAO+K,KAAKuhB,GACd,MAAO3X,GACLD,GAAWC,KAInB,OACFxY,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACC5oB,IAAA6b,cAAA,OAAKkN,MAAO,CACXuH,SAAU,UAEVtwB,IAAA6b,cAAA,WACC7b,IAAA6b,cAAA,OAAKkN,MAAO,CAAEwH,MAAO,SACpBvwB,IAAA6b,cAAA,OAAK2U,IAAKN,EAAO/B,IAAI,MAAMrM,QAASuO,EAAgBtH,MAAO,CAAE3I,MAAO,YAEnEgQ,GACFpwB,IAAA6b,cAAA,OAAKkN,MAAO,CAAEhJ,QAAS,OAAQ0Q,SAAU,SACxCzwB,IAAA6b,cAAC8O,IAAU,CAAC5B,MAAO,CAAEpI,UAAW,OAAQuK,WAAY,OAAQ1K,YAAa,OAAQ+P,MAAO,QAAU3O,QAAQ,YAAY3U,MAAM,UAAUyjB,cAAY,GACjJ1wB,IAAA6b,cAAA,OAAK8U,wBAAyB,CAAEC,OAAQR,EAAYrE,QAAQ,MAAO,eAIrE/rB,IAAA6b,cAAA,OAAKkN,MAAO,CAAEhJ,QAAS,QAAS7X,QAAS,GAAIzB,MAAO,UACpDzG,IAAA6b,cAAA,WACC7b,IAAA6b,cAACgN,IAAO,MACR7oB,IAAA6b,cAACgG,KAAM,CACNgP,WAAS,EACT5jB,MAAM,UACN6U,QAASuO,EACT7pB,UAAW2pB,GACX,mB,qBCLP,MAAMvQ,GAAYC,YAAYnG,IAAK,CACjCoX,oBAAqB,CACnBC,SAAU,SACV/H,SAAU,WACVjJ,QAAS,OACTC,cAAe,SACfO,SAAU,EACVH,MAAO,OACPkQ,SAAU,IACVU,UAAW,KAGbpc,aAAc,CACZqc,gBAAgC,UAAfvX,EAAMwX,KAAgB,OAAAhwB,OAAUiwB,KAAe,YAAAjwB,OAAakwB,KAAmB,KAChGrR,QAAS,OACTC,cAAe,SACfO,SAAU,EACVqK,QAAS,sBACTyG,UAAW,YACR3X,EAAM4X,iBAGXC,cAAe,CACbtkB,MAAO8d,KAAM,KACb/B,SAAU,WACVwI,QAAS,MACTxG,IAAK,EACLC,KAAM,MACNtK,UAAW,IAGb8Q,YAAa,CACXjR,YAAa,GACbG,UAAW,EACX2P,SAAU,IACVoB,SAAU,IACVhR,OAAQ,OACRX,QAAS,QACTiJ,SAAU,WACV,gCAAiC,CAC/BjJ,QAAS,OACTiJ,SAAU,WACVgC,IAAK,EACL2G,MAAO,GAGTC,WAAY,WACZhR,gBAAiB,UACjB3T,MAAO,UACP4kB,UAAW,aACX7E,oBAAqB,EACrBC,qBAAsB,EACtBC,uBAAwB,EACxBC,wBAAyB,EACzBhE,YAAa,EACb2I,aAAc,EACdC,WAAY,EACZC,cAAe,EACfC,UAAW,qBAGbC,oBAAqB,CACnBhS,OAAQ,sBACR6Q,SAAU,SACVnQ,gBAAiB,UACjBC,aAAc,QACdd,QAAS,OACTiJ,SAAU,YAGZmJ,UAAW,CACTvH,QAAS,GACT8G,SAAU,IACVhR,OAAQ,OACRX,QAAS,QACT6R,WAAY,WACZb,SAAU,UAGZqB,oBAAqB,CACnBC,KAAM,OACNjS,MAAO,MACPQ,gBAAiB,WAGnB0R,aAAc,CACZpH,WAAY,GACZvK,UAAW,EACX2P,SAAU,IACVoB,SAAU,IACVhR,OAAQ,OACRX,QAAS,QACTiJ,SAAU,WACV,gCAAiC,CAC/BjJ,QAAS,OACTiJ,SAAU,WACVgC,IAAK,EACL2G,MAAO,GAGTC,WAAY,WACZhR,gBAAiB,UACjB3T,MAAO,UACP4kB,UAAW,WACX7E,oBAAqB,EACrBC,qBAAsB,EACtBC,uBAAwB,EACxBC,wBAAyB,EACzBhE,YAAa,EACb2I,aAAc,EACdC,WAAY,EACZC,cAAe,EACfC,UAAW,qBAGbM,qBAAsB,CACpBrS,OAAQ,sBACRmR,UAAW,SACXzQ,gBAAiB,UACjBC,aAAc,QACdd,QAAS,OACTiJ,SAAU,YAGZwJ,eAAgB,CACd5H,QAAS,GACT8G,SAAU,IACVhR,OAAQ,OACRkR,WAAY,YAGda,qBAAsB,CACpBJ,KAAM,OACNjS,MAAO,MACPQ,gBAAiB,WAGnB8R,qBAAsB,CACpB3S,QAAS,OACTiJ,SAAU,WACV/b,MAAO,OACP0lB,OAAQ,EACR/R,gBAAiB,UACjB4Q,QAAS,MACT,8BAA+B,CAAE5Q,gBAAiB,YAGpDgS,mBAAoB,CAClB7S,QAAS,OACT9S,MAAO,UACP4d,WAAY,KAGdgI,gBAAiB,CACfC,aAAc,aACdlI,QAAS,oBAGXmI,sBAAuB,CACrBD,aAAc,aACdlI,QAAS,qBAGXoI,uBAAwB,CACtBC,UAAW,SACXhmB,MAAO,sBACP6lB,aAAc,aACdlI,QAAS,oBAGXkC,aAAc,CACZC,UAAW,QACX3M,MAAO,IACPM,OAAQ,IACRsM,oBAAqB,EACrBC,qBAAsB,EACtBC,uBAAwB,EACxBC,wBAAyB,GAG3B+F,UAAW,CACTjK,SAAU,GACVD,SAAU,WACVmK,OAAQ,EACRxB,MAAO,EACP1kB,MAAO,QAGTmmB,eAAgB,CACdnT,WAAY,SACZiJ,UAAW,SACX2I,UAAW,SACXzR,MAAO,QACPQ,gBAAiB,UACjBV,OAAQ,OACRW,aAAc,OACdoR,UAAW,qBAGboB,mBAAoB,CAClBpmB,MAAO,UACP2d,QAAS,EACTiH,UAAW,SACX3G,WAAY,OAGdoI,SAAU,CACRrK,SAAU,GACVsK,cAAe,SACfrI,WAAY,GAGdsI,YAAa,CACXvK,SAAU,GACVsK,cAAe,SACf/S,YAAa,GAGfiT,eAAgB,CACdxmB,MAAO8d,KAAM,KACb9B,SAAU,GACVsK,cAAe,SACfrI,WAAY,GAGdwI,cAAe,CACb3T,QAAS,OACTE,WAAY,SACZ0T,eAAgB,SAChB/S,gBAAiB,UACjBgK,QAAS,OAIP1Q,GAAUA,CAACC,EAAOC,KACtB,GAAoB,kBAAhBA,EAAOxP,KAA0B,CACnC,MAAM1F,EAAWkV,EAAOC,QAClBuZ,EAAc,GAWpB,OATA1uB,EAAS2f,QAAS9a,IAChB,MAAM8pB,EAAe1Z,EAAMzY,UAAWoyB,GAAMA,EAAEnpB,KAAOZ,EAAQY,KACvC,IAAlBkpB,EACF1Z,EAAM0Z,GAAgB9pB,EAEtB6pB,EAAYpyB,KAAKuI,KAId,IAAI6pB,KAAgBzZ,GAG7B,GAAoB,gBAAhBC,EAAOxP,KAAwB,CACjC,MAAMmpB,EAAa3Z,EAAOC,QACpBwZ,EAAe1Z,EAAMzY,UAAWoyB,GAAMA,EAAEnpB,KAAOopB,EAAWppB,IAQhE,OANsB,IAAlBkpB,EACF1Z,EAAM0Z,GAAgBE,EAEtB5Z,EAAM3Y,KAAKuyB,GAGN,IAAI5Z,GAGb,GAAoB,mBAAhBC,EAAOxP,KAA2B,CACpC,MAAMopB,EAAkB5Z,EAAOC,QACzBwZ,EAAe1Z,EAAMzY,UAAWoyB,GAAMA,EAAEnpB,KAAOqpB,EAAgBrpB,IAMrE,OAJsB,IAAlBkpB,IACF1Z,EAAM0Z,GAAgBG,GAGjB,IAAI7Z,GAGb,GAAoB,UAAhBC,EAAOxP,KACT,MAAO,IAsgBIqpB,OAlgBMtY,IAAoC,IAAnC,OAAEuY,EAAM,SAAEC,EAAQ,QAAEC,GAASzY,EACjD,MAAMqF,EAAUpB,MAEThL,EAAckG,GAAYC,qBAAWb,GAAS,KAC9CsM,EAAYC,GAAiBvL,mBAAS,IACtCmZ,EAASC,GAAcpZ,oBAAS,IAChCF,EAASC,GAAcC,oBAAS,GACjCqZ,EAAiBC,oBAEhBC,EAAiBC,GAAsBxZ,mBAAS,KAChDkU,EAAUuF,GAAezZ,mBAAS,MACnC0Z,EAAyBC,QAAQzF,GACjC0F,EAAkBN,iBAAOL,GAEzB9zB,EAAgB8a,qBAAWlW,GAEjCmW,oBAAU,KACRN,EAAS,CAAElQ,KAAM,UACjB6b,EAAc,GAEdqO,EAAgBC,QAAUZ,GACzB,CAACA,IAEJ/Y,oBAAU,KACRH,GAAW,GACX,MAAMuM,EAAkB5jB,WAAW,KACXyX,WACpB,QAAiB5B,IAAb0a,EACJ,IACE,MAAM,KAAEtb,SAAee,GAAI0B,IAAI,aAAe6Y,EAAU,CACtD/yB,OAAQ,CAAEolB,gBAGRsO,EAAgBC,UAAYZ,IAC9BrZ,EAAS,CAAElQ,KAAM,gBAAiByP,QAASxB,EAAK3T,WAChDovB,EAAWzb,EAAKwb,SAChBpZ,GAAW,IAGM,IAAfuL,GAAoB3N,EAAK3T,SAASnD,OAAS,GAC7CizB,IAEF,MAAOxc,GACPyC,GAAW,GACX1C,GAAWC,KAGfyc,IACC,KACH,MAAO,KACLvN,aAAaF,KAEd,CAAChB,EAAY2N,IAEhB/Y,oBAAU,KACR,MAAMxY,EAAYG,aAAaC,QAAQ,aACjC8B,EAASzE,EAAcsC,UAAUC,GAevC,OAbAkC,EAAOnE,GAAG,QAAS,IAAMmE,EAAO7D,KAAK,cAAc,GAADC,OAAKgzB,EAAOvpB,MAE9D7F,EAAOnE,GAAG,WAADO,OAAY0B,EAAS,eAAgBiW,IACxB,WAAhBA,EAAKuB,QAAuBvB,EAAK9O,QAAQoqB,WAAaW,EAAgBC,UACxEja,EAAS,CAAElQ,KAAM,cAAeyP,QAASxB,EAAK9O,UAC9CirB,KAGkB,WAAhBnc,EAAKuB,QAAuBvB,EAAK9O,QAAQoqB,WAAaW,EAAgBC,SACxEja,EAAS,CAAElQ,KAAM,iBAAkByP,QAASxB,EAAK9O,YAI9C,KACLjF,EAAOzC,eAER,CAAC8xB,EAAUD,EAAQ7zB,IAEtB,MAIM20B,EAAiBA,KACjBT,EAAeQ,SACjBR,EAAeQ,QAAQG,eAAe,KAqBpCC,EAA+BA,CAACpF,EAAGhmB,KACvC4qB,EAAY5E,EAAEqF,eACdV,EAAmB3qB,IAOfsrB,EAAqBtrB,IACzB,GAA0B,oBAAtBA,EAAQurB,WAAmCvrB,EAAQ4D,KAAK4nB,MAAM,KAAKxzB,QAAU,EAAG,CAClF,IAAIyzB,EAAgBzrB,EAAQ4D,KAAK4nB,MAAM,KACnCE,EAAgBD,EAAc,GAC9BE,EAAeF,EAAc,GAE7BG,EAAsB,KAK1B,OAHIH,EAAczzB,OAAS,IACzB4zB,EAAsB5rB,EAAQ4D,KAAK4nB,MAAM,KAAK,IAEzCv1B,IAAA6b,cAACoU,GAAe,CAACC,MAAOuF,EAAetF,KAAMuF,EAActF,YAAauF,IAqC5E,MAA0B,UAAtB5rB,EAAQurB,UACRt1B,IAAA6b,cAACuR,GAAc,CAACC,SAAUtjB,EAAQ6rB,WACV,UAAtB7rB,EAAQurB,UAEft1B,IAAA6b,cAAA,SAAOga,UAAQ,GACb71B,IAAA6b,cAAA,UAAQ2U,IAAKzmB,EAAQ6rB,SAAUhrB,KAAK,eAGT,UAAtBb,EAAQurB,UAEft1B,IAAA6b,cAAA,SACE2F,UAAWR,EAAQ8L,aACnB0D,IAAKzmB,EAAQ6rB,SACbC,UAAQ,IAKV71B,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACE5oB,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQ0S,eACtB1zB,IAAA6b,cAACgG,KAAM,CACLiU,UAAW91B,IAAA6b,cAACka,KAAM,MAClB9oB,MAAM,UACN2U,QAAQ,WACRD,OAAO,SACPqU,KAAMjsB,EAAQ6rB,UACf,aAIH51B,IAAA6b,cAACgN,IAAO,QAqBVoN,EAAwBA,CAAClsB,EAASsY,KACtC,GAAc,IAAVA,EACF,OACEriB,IAAA6b,cAAA,QACE2F,UAAWR,EAAQoS,eACnBxV,IAAG,aAAA1c,OAAe6I,EAAQY,KAE1B3K,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQqS,oBACrBpV,aAAOiY,aAASthB,EAAayN,GAAOH,WAAY,gBAKzD,GAAIG,EAAQzN,EAAa7S,OAAS,EAAG,CACnC,IAAIo0B,EAAaD,aAASthB,EAAayN,GAAOH,WAC1CkU,EAAqBF,aAASthB,EAAayN,EAAQ,GAAGH,WAE1D,IAAKmU,aAAUF,EAAYC,GACzB,OACEp2B,IAAA6b,cAAA,QACE2F,UAAWR,EAAQoS,eACnBxV,IAAG,aAAA1c,OAAe6I,EAAQY,KAE1B3K,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQqS,oBACrBpV,aAAOiY,aAASthB,EAAayN,GAAOH,WAAY,gBAM3D,OAAIG,IAAUzN,EAAa7S,OAAS,EAEhC/B,IAAA6b,cAAA,OACE+B,IAAG,OAAA1c,OAAS6I,EAAQmY,WACpBkC,IAAKmQ,EACLxL,MAAO,CAAEwH,MAAO,OAAQ9pB,MAAO,eALrC,GAWI6vB,EAAqBA,CAACvsB,EAASsY,KACnC,GAAIA,EAAQzN,EAAa7S,QAAUsgB,EAAQ,EAAG,CAAC,IAADkU,EAAAC,EAE5C,IAAIC,EAAgB1sB,EAAQoqB,SACO,QAAjBoC,EAAGxsB,EAAQmqB,cAAM,IAAAqC,GAAU,QAAVC,EAAdD,EAAgB9rB,gBAAQ,IAAA+rB,GAAxBA,EAA0B7wB,KAG/C,GAAI8wB,IAFwB7hB,EAAayN,EAAQ,GAAG8R,SAGlD,OACEn0B,IAAA6b,cAAA,cACE7b,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQ0V,oBAAoB,uBACrBzY,aAAOiY,aAASthB,EAAayN,EAAQ,GAAGH,WAAY,wBAG3EliB,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQ2V,kBAAkB,sBACpB1Y,aAAOiY,aAASnsB,EAAQmY,WAAY,2BAQ9D0U,EAAuBA,CAAC7sB,EAASsY,KACrC,GAAIA,EAAQzN,EAAa7S,QAAUsgB,EAAQ,EAAG,CAI5C,GAHkBzN,EAAayN,GAAOwN,SACZjb,EAAayN,EAAQ,GAAGwN,OAGhD,OACE7vB,IAAA6b,cAAA,QAAMkN,MAAO,CAAEpI,UAAW,IAAM/C,IAAG,WAAA1c,OAAa6I,EAAQY,QAM1DksB,EAAuB9sB,IAAa,IAAD+sB,EAAAC,EAAAC,EAAAC,EAAAC,EACvC,OACEl3B,IAAA6b,cAAA,OACE2F,UAAW2V,YAAKnW,EAAQkR,oBAAqB,CAC3C,CAAClR,EAAQuR,sBAAuBxoB,EAAQ8lB,UAG1C7vB,IAAA6b,cAAA,QACE2F,UAAW2V,YAAKnW,EAAQoR,oBAAqB,CAC3C,CAACpR,EAAQyR,sBAAwC,QAApBqE,EAAG/sB,EAAQooB,iBAAS,IAAA2E,OAAA,EAAjBA,EAAmBjH,WAGvD7vB,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQmR,aACH,QAAlB4E,EAAChtB,EAAQooB,iBAAS,IAAA4E,OAAA,EAAjBA,EAAmBlH,SACnB7vB,IAAA6b,cAAA,QAAM2F,UAAWR,EAAQ4R,oBACL,QADwBoE,EACzCjtB,EAAQooB,iBAAS,IAAA6E,GAAS,QAATC,EAAjBD,EAAmBppB,eAAO,IAAAqpB,OAAT,EAAjBA,EAA4BtxB,MAIA,UAAhCoE,EAAQooB,UAAUmD,WAEft1B,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQ0S,eACtB1zB,IAAA6b,cAAA,SAAOga,UAAQ,GACb71B,IAAA6b,cAAA,UAAQ2U,IAAKzmB,EAAQooB,UAAUyD,SAAUhrB,KAAK,gBAKrB,UAAhCb,EAAQooB,UAAUmD,WAEft1B,IAAA6b,cAAA,SACE2F,UAAWR,EAAQ8L,aACnB0D,IAAKzmB,EAAQooB,UAAUyD,SACvBC,UAAQ,IAImB,gBAAhC9rB,EAAQooB,UAAUmD,WAEft1B,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQ0S,eACtB1zB,IAAA6b,cAACgG,KAAM,CACLiU,UAAW91B,IAAA6b,cAACka,KAAM,MAClB9oB,MAAM,UACN2U,QAAQ,WACRD,OAAO,SACPqU,KAAMjsB,EAAQooB,UAAUyD,UACzB,aAO0B,UAAhC7rB,EAAQooB,UAAUmD,WAEft1B,IAAA6b,cAACuR,GAAc,CAACC,SAAUtjB,EAAQooB,UAAUyD,aAC1B,QADuCsB,EACxDntB,EAAQooB,iBAAS,IAAA+E,OAAA,EAAjBA,EAAmBvpB,SAkJhC,OACE3N,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQ8P,qBACtB9wB,IAAA6b,cAACoT,GAAkB,CACjBllB,QAAS0qB,EACTrF,SAAUA,EACVF,SAAU0F,EACVzF,YApYiCY,IACrC4E,EAAY,SAqYV30B,IAAA6b,cAAA,OACElR,GAAG,eACH6W,UAAWR,EAAQpM,aACnBwiB,SA/ZgBrH,IACpB,IAAKsE,EAAS,OACd,MAAM,UAAEgD,GAActH,EAAEqF,cAEN,IAAdiC,IACFC,SAASC,eAAe,gBAAgBF,UAAY,GAGlDrc,GAIAqc,EAAY,IArBhB5Q,EAAe+Q,GAAmBA,EAAiB,KA0a9C5iB,EAAa7S,OAAS,EAxJN01B,MACrB,GAAI7iB,EAAa7S,OAAS,EAAG,CAoI3B,OAnIyB6S,EAAawN,IAAI,CAACrY,EAASsY,KAEX,IAADqV,EAgCjBC,EAhCrB,MAA0B,aAAtB5tB,EAAQurB,UAERt1B,IAAA6b,cAAC7b,IAAM4oB,SAAQ,CAAChL,IAAK7T,EAAQY,IAC1BsrB,EAAsBlsB,EAASsY,GAC/BiU,EAAmBvsB,EAASsY,GAC5BuU,EAAqB7sB,EAASsY,GAC/BriB,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQ4W,eACtB53B,IAAA6b,cAAC+G,IAAU,CACThB,QAAQ,YACR0J,KAAK,QACL3gB,GAAG,uBACHnE,SAAUuD,EAAQ8tB,UAClBrW,UAAWR,EAAQ0R,qBACnB5Q,QAAUiO,GAAMoF,EAA6BpF,EAAGhmB,IAEhD/J,IAAA6b,cAACic,KAAU,OAEZ1D,GACCp0B,IAAA6b,cAAA,QAAM2F,UAAWR,EAAQ4R,oBACP,QAD0B8E,EACzC3tB,EAAQ6D,eAAO,IAAA8pB,OAAA,EAAfA,EAAiB/xB,MAGtB3F,IAAA6b,cAAA,WACE7b,IAAA6b,cAAA,OAAKkc,MAAM,6BAA6BC,QAAQ,YAAY5X,MAAM,KAAKM,OAAO,MAC5E1gB,IAAA6b,cAAA,QAAMoc,KAAK,UAAUC,EAAE,0RACnB,IAACl4B,IAAA6b,cAAA,YAAM,yCAAiCoC,aAAOiY,aAASnsB,EAAQmY,WAAY,aAOvFnY,EAAQ8lB,OAqDT7vB,IAAA6b,cAAC7b,IAAM4oB,SAAQ,CAAChL,IAAK7T,EAAQY,IAC1BsrB,EAAsBlsB,EAASsY,GAC/BiU,EAAmBvsB,EAASsY,GAC5BuU,EAAqB7sB,EAASsY,GAC/BriB,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQsR,cACtBtyB,IAAA6b,cAAC+G,IAAU,CACThB,QAAQ,YACR0J,KAAK,QACL3gB,GAAG,uBACHnE,SAAUuD,EAAQ8tB,UAClBrW,UAAWR,EAAQ0R,qBACnB5Q,QAAUiO,GAAMoF,EAA6BpF,EAAGhmB,IAEhD/J,IAAA6b,cAACic,KAAU,QAEX/tB,EAAQ6rB,UAAkC,oBAAtB7rB,EAAQurB,WAAyD,UAAtBvrB,EAAQurB,YAEpED,EAAkBtrB,GACvB/J,IAAA6b,cAAA,OACE2F,UAAW2V,YAAKnW,EAAQ6R,gBAAiB,CACvC,CAAC7R,EAAQgS,wBAAyBjpB,EAAQ8tB,UACzD,CAAC7W,EAAQ+R,uBAAwBhpB,EAAQouB,YAG3BpuB,EAAQ8tB,WACP73B,IAAA6b,cAACuc,KAAK,CACJnrB,MAAM,WACNgc,SAAS,QACTzH,UAAWR,EAAQwS,cAGtBzpB,EAAQooB,WAAa0E,EAAoB9sB,GAC1C/J,IAAA6b,cAAC8P,GAAe,KAAE5hB,EAAQ4D,MAC1B3N,IAAA6b,cAAA,QAAM2F,UAAWR,EAAQkS,WAClCnpB,EAAQouB,UAAYn4B,IAAA6b,cAAA,YAAM,YACdoC,aAAOiY,aAASnsB,EAAQmY,WAAY,SAvR7BnY,IACJ,IAAhBA,EAAQsuB,IACHr4B,IAAA6b,cAACyc,KAAU,CAACrP,SAAS,QAAQzH,UAAWR,EAAQsS,WAErC,IAAhBvpB,EAAQsuB,IACHr4B,IAAA6b,cAAC0c,KAAI,CAACtP,SAAS,QAAQzH,UAAWR,EAAQsS,WAE/B,IAAhBvpB,EAAQsuB,IACHr4B,IAAA6b,cAAC2c,KAAO,CAACvP,SAAS,QAAQzH,UAAWR,EAAQsS,WAElC,IAAhBvpB,EAAQsuB,KAA6B,IAAhBtuB,EAAQsuB,IACxBr4B,IAAA6b,cAAC2c,KAAO,CAACvP,SAAS,QAAQzH,UAAWR,EAAQyS,sBADtD,EA8QiBgF,CAAiB1uB,OAvF1B/J,IAAA6b,cAAC7b,IAAM4oB,SAAQ,CAAChL,IAAK7T,EAAQY,IAC1BsrB,EAAsBlsB,EAASsY,GAC/BiU,EAAmBvsB,EAASsY,GAC5BuU,EAAqB7sB,EAASsY,GAC/BriB,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQyQ,aACtBzxB,IAAA6b,cAAC+G,IAAU,CACThB,QAAQ,YACR0J,KAAK,QACL3gB,GAAG,uBACHnE,SAAUuD,EAAQ8tB,UAClBrW,UAAWR,EAAQ0R,qBACnB5Q,QAAUiO,GAAMoF,EAA6BpF,EAAGhmB,IAEhD/J,IAAA6b,cAACic,KAAU,OAEZ1D,GACCp0B,IAAA6b,cAAA,QAAM2F,UAAWR,EAAQ4R,oBACP,QAD0B+E,EACzC5tB,EAAQ6D,eAAO,IAAA+pB,OAAA,EAAfA,EAAiBhyB,MAKrBoE,EAAQ8tB,WACP73B,IAAA6b,cAAA,WACE7b,IAAA6b,cAAA,QAAM2F,UAAW,mBAChB,8CACCxhB,IAAA6b,cAACuc,KAAK,CACJnrB,MAAM,QACNgc,SAAS,QACTzH,UAAWR,EAAQwS,iBAMzBzpB,EAAQ6rB,UAAkC,oBAAtB7rB,EAAQurB,WAAyD,UAAtBvrB,EAAQurB,YAEpED,EAAkBtrB,GACvB/J,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQ6R,iBACrB9oB,EAAQooB,WAAa0E,EAAoB9sB,GAC1C/J,IAAA6b,cAAC8P,GAAe,KAAwB,oBAAtB5hB,EAAQurB,UAAkC,KAAOvrB,EAAQ4D,MAC3E3N,IAAA6b,cAAA,QAAM2F,UAAWR,EAAQkS,WAClCnpB,EAAQouB,UAAYn4B,IAAA6b,cAAA,YAAM,YACdoC,aAAOiY,aAASnsB,EAAQmY,WAAY,eAsDnD,OAAOliB,IAAA6b,cAAA,WAAK,uCAiBiB4b,GAAmB,IAE/Czc,GACChb,IAAA6b,cAAA,WACE7b,IAAA6b,cAACwP,KAAgB,CAAC7J,UAAWR,EAAQuQ,mB,iCChzB/C,MAAM3R,GAAYC,YAAWnG,IAAK,CACjCgf,aAAc,CACb3Y,QAAS,OACTa,gBAAiB,OACjByR,KAAM,OACNsG,aAAc,oCAwBDC,OApBcA,KAC5B,MAAM5X,EAAUpB,KAEhB,OACC5f,IAAA6b,cAACgd,KAAI,CAACC,QAAM,EAACtX,UAAWR,EAAQ0X,cAC/B14B,IAAA6b,cAACkd,KAAU,CACVC,qBAAsB,CAAEC,QAAQ,GAChCC,yBAA0B,CAAED,QAAQ,GACpCE,OACCn5B,IAAA6b,cAACud,KAAQ,CAACC,UAAU,OAAOzX,QAAQ,UAClC5hB,IAAA6b,cAACyd,KAAM,CAACnL,IAAI,mBAGd7oB,MAAOtF,IAAA6b,cAACud,KAAQ,CAACC,UAAU,OAAOjZ,MAAO,KACzCmZ,UAAWv5B,IAAA6b,cAACud,KAAQ,CAACC,UAAU,OAAOjZ,MAAO,UCvBjD,MAAMR,GAAYC,YAAWnG,IAAK,CACjCgf,aAAc,CACb3Y,QAAS,OACTa,gBAAiBlH,EAAM8f,QAAQC,oBAC/BpH,KAAM,OACNsG,aAAc,gCACd,CAACjf,EAAMggB,YAAYC,KAAK,OAAQ,CAC/BlJ,SAAU,YAsBEmJ,OAhBMje,IAA4B,IAA3B,QAAEX,EAAO,SAAEY,GAAUD,EAC1C,MAAMqF,EAAUpB,KAEhB,OACC5f,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACE5N,EACAhb,IAAA6b,cAAC+c,GAAoB,MAErB54B,IAAA6b,cAACgd,KAAI,CAACC,QAAM,EAACtX,UAAWR,EAAQ0X,cAC9B9c,KCiBSie,OAvCIle,IAAmC,IAAlC,QAAE/N,EAAO,OAAEsmB,EAAM,QAAEpS,GAASnG,EAC/C,MAAM,KAAE7K,GAASojB,GACV4F,EAAUC,GAAe7e,mBAAS,KAClCjJ,EAAa+nB,GAAkB9e,mBAAS,IAuB/C,OArBAE,oBAAU,KACT,GAAIxN,IACHosB,EAAepsB,EAAQjI,MACpB2xB,SAAS3pB,KAAKssB,YAAc,KAC1BrsB,EAAQjI,KAAK5D,OAAS,IAAI,CAC7B,MAAMm4B,EAActsB,EAAQjI,KAAKxD,UAAU,EAAG,IAAM,MACpD63B,EAAeE,GAKdppB,GAAQlD,IACXmsB,EAAY,GAAD74B,OAAI6W,KAAKkB,EAAE,kCAAiC,KAAA/X,OAAI4P,EAAKnL,OAE7D2xB,SAAS3pB,KAAKssB,YAAc,KAC9BF,EAAY,GAAD74B,OAAI4P,EAAKnL,SAIpB,IAGF3F,IAAA6b,cAACkd,KAAU,CACVjX,QAASA,EACTiH,MAAO,CAAEoR,OAAQ,WACjBnB,qBAAsB,CAAEC,QAAQ,GAChCC,yBAA0B,CAAED,QAAQ,GACpCE,OAAQn5B,IAAA6b,cAACyd,KAAM,CAAC9I,IAAK5iB,EAAQwsB,cAAejM,IAAI,kBAChD7oB,MAAK,GAAApE,OAAK+Q,EAAW,MAAA/Q,OAAKgzB,EAAOvpB,IACjC4uB,UAAWrF,EAAOpjB,MAAI,GAAA5P,OAAO44B,MCnBhC,MAEMla,GAAYC,YAAYnG,IAAK,CACjCoG,KAAM,CACJC,QAAS,OACTW,OAAQ,OACRsI,SAAU,WACV+H,SAAU,UAGZsJ,YAAa,CACXhI,KAAM,EACN3R,OAAQ,OACRX,QAAS,OACTC,cAAe,SACf+Q,SAAU,SACV/D,oBAAqB,EACrBE,uBAAwB,EACxBoN,WAAY,IACZ9Z,aAnBgB,IAoBhB+Z,WAAY7gB,EAAM8gB,YAAY1gB,OAAO,SAAU,CAC7C2gB,OAAQ/gB,EAAM8gB,YAAYC,OAAOC,MACjCpc,SAAU5E,EAAM8gB,YAAYlc,SAASqc,iBAIzCC,iBAAkB,CAChB3N,qBAAsB,EACtBE,wBAAyB,EACzBoN,WAAY7gB,EAAM8gB,YAAY1gB,OAAO,SAAU,CAC7C2gB,OAAQ/gB,EAAM8gB,YAAYC,OAAOI,QACjCvc,SAAU5E,EAAM8gB,YAAYlc,SAASwc,iBAEvCta,YAAa,MAIF,SAASua,GAAoBpf,GAAmC,IAAlC,KAAE/M,EAAI,YAAEugB,EAAW,SAAEgF,GAAUxY,EAC1E,MAAMM,EAAUC,uBACV8E,EAAUpB,MAEV,KAAE9O,GAASqK,qBAAWyD,KAErB,CAAEoc,GAAiB9f,oBAAS,IAC5BF,EAASC,GAAcC,oBAAS,IAChCtN,EAASqtB,GAAc/f,mBAAS,KAChCgZ,EAAQgH,GAAahgB,mBAAS,IAE/B7a,EAAgB8a,qBAAWlW,GAEjCmW,oBAAU,KACR,IAAIoM,EAAkB,KA4BtB,OA3BI5Y,IACFqM,GAAW,GACXuM,EAAkB5jB,WAAW,KACPyX,WAClB,IACE,MAAM,KAAExC,SAAee,GAAI0B,IAAI,YAAc6Y,IACvC,QAAEgH,GAAYtiB,GACd,OAAE5I,EAAM,QAAE3C,GAAYwD,EAG5B,QAAqB2I,IADAxJ,EAAO0N,KAAMyd,GAAMA,EAAEzwB,KAAOwwB,IACH,UAAZ7tB,EAGhC,OAFA0L,IAAMF,MAAM,gCACZmD,EAAQza,KAAK,YAIfy5B,EAAWpiB,EAAKjL,SAChBstB,EAAUriB,GACVoC,GAAW,GACX,MAAOzC,GACPyC,GAAW,GACX1C,GAAWC,KAGf6iB,IACC,MAEE,KACmB,OAApB7T,GACFE,aAAaF,KAGhB,CAAC2M,EAAUrjB,EAAMmL,EAASrN,IAE7BwM,oBAAU,KACR,MAAMxY,EAAYG,aAAaC,QAAQ,aAGvC,GAAI4L,EAAM,CACR,MAAM9J,EAASzE,EAAcsC,UAAUC,GACvCkC,EAAOnE,GAAG,QAAS,IAAMmE,EAAO7D,KAAK,cAAc,GAADC,OAAKgzB,EAAOvpB,MAE9D7F,EAAOnE,GAAG,WAADO,OAAY0B,EAAS,WAAYiW,IACpB,WAAhBA,EAAKuB,QAAuBvB,EAAKqb,OAAOvpB,KAAOupB,EAAOvpB,IACxDuwB,EAAUriB,EAAKqb,QAGG,WAAhBrb,EAAKuB,QAAuBvB,EAAKsb,WAAaD,EAAOvpB,IAEvDsR,EAAQza,KAAK,cAIjBsD,EAAOnE,GAAG,WAADO,OAAY0B,EAAS,YAAaiW,IACrB,WAAhBA,EAAKuB,QACP6gB,EAAYK,IAAe,IAADC,EACxB,OAAID,EAAU3wB,MAAmB,QAAjB4wB,EAAK1iB,EAAKjL,eAAO,IAAA2tB,OAAA,EAAZA,EAAc5wB,IAC1B,IAAK2wB,KAAcziB,EAAKjL,SAE1B0tB,MAMf,MAAO,KACDx2B,IAIL,CAACqvB,EAAUD,EAAQjY,EAASrN,EAAMvO,IAErC,MAAMm7B,EAAmBA,KACvBR,GAAc,IA2BhB,OACEh7B,IAAA6b,cAAC0S,KAAM,CAACmD,SAAS,KAAKrD,QAASc,EAAavgB,KAAMA,GAChD5O,IAAA6b,cAAC+d,GAAY,CAAC5e,QAASA,GA1BFygB,MACvB,QAAoBhiB,IAAhBya,EAAOpjB,KACT,OACE9Q,IAAA6b,cAACge,GAAU,CACTjsB,QAASA,EACTsmB,OAAQA,EACRpS,QAAS0Z,KAoBoBC,IACjCz7B,IAAA6b,cAACiT,GAAoB,KAbrB9uB,IAAA6b,cAAC6f,KAAG,CAACla,UAAWR,EAAQlB,MACtB9f,IAAA6b,cAACoY,GAAY,CACXC,OAAQA,EACRC,SAAUD,EAAOvpB,GACjBypB,QAASF,EAAOE,YAUpBp0B,IAAA6b,cAAC+S,KAAa,KACZ5uB,IAAA6b,cAACgG,KAAM,CAACC,QAASqN,EAAaliB,MAAM,WAAU,YC/IvC0uB,I,WChCf,MAAM/b,GAAYC,aAAWnG,IAAK,CAC9BkiB,IAAK,CACDhR,QAAS,UACT/J,aAAc,MACdoI,SAAU,QACV4B,WAAY,OACZ5d,MAAO,OACPuT,YAAa,MACboR,WAAY,aAcLiK,OAVIlgB,IAAc,IAAb,IAAEigB,GAAKjgB,EACvB,MAAMqF,EAAUpB,KAEhB,OACI5f,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQ4a,IAAK7S,MAAO,CAAEnI,gBAAiBgb,EAAI3uB,MAAO0T,UAAW,QACxEib,EAAIj2B,KAAKm2B,gBCgCPC,OAxCcpgB,IAAsC,IAArC,SAAEwY,EAAQ,KAAEvlB,EAAI,YAAEugB,GAAaxT,EAE3D,MAAOqgB,EAAUC,GAAe/gB,mBAAS,IASzC,OAPAE,oBAAUC,UACR,GAAIzM,EAAM,CACR,MAAMstB,QAAYtiB,GAAI0B,IAAI,YAADpa,OAAaizB,EAAQ,cAC9C8H,EAAYC,EAAIrjB,QAEjB,CAACjK,IAGF5O,IAAA6b,cAAC0S,KAAM,CACL3f,KAAMA,EACNyf,QAASc,EACTuC,SAAS,KACTb,WAAS,EACTsL,OAAO,SAEPn8B,IAAA6b,cAAC4S,KAAW,KAAC,UACbzuB,IAAA6b,cAAC6S,KAAa,KACZ1uB,IAAA6b,cAACsG,IAAI,KACF6Z,EAAS5Z,IAAI,CAACrG,EAAOsG,IACpBriB,IAAA6b,cAACyG,IAAQ,CAAC1E,IAAKyE,EAAO0G,MAAO,CAAChJ,QAAS,OAAQC,cAAe,SAAUC,WAAY,eAClFjgB,IAAA6b,cAAA,YAAM7b,IAAA6b,cAAA,cAAQ,YAAUwG,EAAM,EAAE,SAAiBtG,EAAMqgB,UACvDp8B,IAAA6b,cAAA,YAAM7b,IAAA6b,cAAA,cAAQ,YAAUwG,EAAM,EAAE,SAAiBtG,EAAMsgB,WAIxC,IAApBL,EAASj6B,QAAiB/B,IAAA6b,cAAA,YAAM,iCAEnC7b,IAAA6b,cAAC+S,KAAa,KACZ5uB,IAAA6b,cAACgG,KAAM,CAACC,QAASqN,EAAaliB,MAAM,WAAU,a,WCHtD,MAAM2S,GAAYC,YAAYnG,IAAK,CACjCwa,OAAQ,CACNlL,SAAU,YAGZsT,cAAe,CACbnC,OAAQ,SAEVoC,SAAU,CACRC,WAAY,UACZvvB,MAAO,OACPuT,YAAa,EACboK,QAAS,EACTC,WAAY,OACZ1B,YAAa,EACb2I,aAAc,EACdjR,aAAc,EACdoI,SAAU,QACV2I,WAAY,UAEd6K,aAAc,CACZ1c,QAAS,OACTW,OAAQ,QACRR,OAAQ,GACRF,cAAe,SACfC,WAAY,SACZ0T,eAAgB,UAElB+I,iBAAkB,CAChB1T,SAAU,WACV6I,UAAW,SACXrR,YAAa,EACb0K,WAAY,OACZF,IAAK,OACLC,KAAM,OACNpK,aAAc,GAEhB8b,cAAe,CACbzT,UAAW,SACXjc,MAAO,qBACPgc,SAAU,OACV2T,WAAY,OAEdC,cAAe,CACbL,WAAY,QACZvvB,MAAO,OACPuT,YAAa,EACboK,QAAS,EACTC,WAAY,OACZ1B,YAAa,EACb2I,aAAc,EACdjR,aAAc,EACdoI,SAAU,QACV2I,WAAY,UAEdniB,eAAgB,CACdyZ,UAAW,SACXD,SAAU,OACV4B,WAAY,MACZ3K,OAAQ,OAGV4c,mBAAoB,CAClB/c,QAAS,OACT4T,eAAgB,gBAChBzI,WAAY,OAGd6R,gBAAiB,CACfC,YAAa,WACb9T,UAAW,QACXF,SAAU,WACVgC,KAAM,IAGRiS,YAAa,CACXpL,UAAW,SACXmL,YAAa,WACbxc,YAAa,GACb0K,WAAY,QAGdgS,mBAAoB,CAClBpL,aAAc,KACd5G,WAAY,OAIdiS,WAAY,CACVlwB,MAAO,QACP2T,gBAAiBmK,KAAM,MAGzBqS,aAAc,CACZpU,SAAU,WACV2I,MAAO,SAITyL,aAAc,CACZpU,SAAU,WACViC,KAAM,OAIRoS,iBAAkB,CAChBhL,KAAM,OACNjS,MAAO,MACPM,OAAQ,OACRsI,SAAU,WACVgC,IAAK,KACLC,KAAM,MAGRqS,WAAY,CACVtU,SAAU,WACVgC,KAAM,IAERuS,uBAAwB,CACtBxd,QAAS,OAGTE,WAAY,aACZwQ,SAAU,OACVzQ,cAAe,MACfwd,aAAc,cAEhBC,YAAa,CACXzU,SAAU,WACVgC,IAAK,GACL2G,MAAO,GAET+L,UAAW,CACT,oBAAqB,CACnB7c,aAAc,EACdmI,SAAU,UACVtI,OAAQ,GACRR,OAAQ,EACR0K,QAAS,GAEX,4CAA6C,CAC3C+S,UAAW,oCAqYFC,OA/XgBjiB,IAAiB,IAADkiB,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,IAAf,OAAErK,GAAQvY,EACxC,MAAMqF,EAAUpB,KACV3D,EAAUC,wBACTlB,EAASC,GAAcC,oBAAS,IAChCsjB,EAAYC,GAAiBvjB,mBAAS,OACtCwjB,EAAiBC,GAAsBzjB,mBAAS,OAChDmiB,EAAkBuB,GAAuB1jB,mBAAS,OAClD0gB,EAAKiD,GAAU3jB,mBAAS,KACxB4jB,EAAcC,GAAmB7jB,mBAAS,OAE1C8jB,EAAyBC,GAA8B/jB,oBAAS,IAChEgkB,EAA0BC,GAA+BjkB,oBAAS,IACnE,SAAEiZ,GAAaiL,sBACfC,EAAY7K,kBAAO,IACnB,iBAAE7H,GAAqBxR,qBAAWqR,KAClC,KAAE1b,GAASqK,qBAAWyD,KACtB,QAAEtR,GAAYwD,EAEpBsK,oBAAU,KAAO,IAADkkB,EAAAC,EAAAC,EACoBC,EAAAC,EAMQC,EANtCzL,EAAOpxB,QAAUoxB,EAAOpjB,MAC1B2tB,EAAyB,QAAZgB,EAACvL,EAAOpjB,YAAI,IAAA2uB,GAAM,QAANC,EAAXD,EAAa95B,YAAI,IAAA+5B,OAAN,EAAXA,EAAmB5D,gBAEnC6C,EAA+B,QAAbW,EAACpL,EAAO1nB,aAAK,IAAA8yB,GAAM,QAANC,EAAZD,EAAc35B,YAAI,IAAA45B,OAAN,EAAZA,EAAoBzD,eACvC8C,EAAgC,QAAbY,EAACtL,EAAO1nB,aAAK,IAAAgzB,OAAA,EAAZA,EAAcvyB,OAE9BinB,EAAO1Y,YAAc0Y,EAAOzpB,WAC9Bs0B,EAAoC,QAArBY,EAACzL,EAAOzpB,SAAS9E,YAAI,IAAAg6B,OAAA,EAApBA,EAAsB7D,eAKxC,OAFA+C,EAAa,OAAN3K,QAAM,IAANA,OAAM,EAANA,EAAQhkB,MAER,KACLmvB,EAAUtK,SAAU,IAGrB,IAGH,MA+ES6K,EAAoBvkB,UAEvB,MAAMwkB,EAAG,qCAAA3+B,OAAyC,OAAJ4P,QAAI,IAAJA,OAAI,EAAJA,EAAMnL,KAAI,oDAClDoE,EAAU,CACZ+1B,KAAM,EACNjQ,QAAQ,EACR+F,SAAU,GACVjoB,KAAK,8BAADzM,OAA6B2+B,EAAI7d,SAEzC,UACUpI,GAAIoD,KAAK,aAAD9b,OAAcyJ,GAAMZ,GACpC,MAAOyO,GACLD,GAAWC,KA8CrB,OACExY,IAAA6b,cAAC7b,IAAM4oB,SAAQ,CAAChL,IAAKsW,EAAOvpB,IAC1B3K,IAAA6b,cAACkgB,GAAoB,CACnBntB,KAAMswB,EACN/P,YAAaA,IAAMgQ,GAA4B,GAC/ChL,SAAUD,EAAOvpB,KAEnB3K,IAAA6b,cAACkf,GAAoB,CACnBnsB,KAAMowB,EACN7P,YAAaA,IAAM8P,GAA2B,GAC9C9K,SAAUD,EAAOvpB,KAEnB3K,IAAA6b,cAACyG,IAAQ,CAACmC,OAAK,EAACD,QAAM,EACpB1C,QAAUiO,IACc,YAAlBmE,EAAO5rB,QAtDS4rB,KAC1B,MAAMtH,EAAOmT,gBACP,GAAEp1B,EAAE,KAAEkiB,GAASqH,EACrBvH,EAAiB,CAAEhiB,KAAIkiB,OAAMD,UAoDvBoT,CAAmB9L,IAErB+L,SAAU9L,IAAaA,IAAaD,EAAOvpB,GAC3C6W,UAAW2V,YAAKnW,EAAQkT,OAAQ,CAC9B,CAAClT,EAAQsb,eAAkC,YAAlBpI,EAAO5rB,UAGlCtI,IAAA6b,cAACqkB,KAAO,CAACC,OAAK,EAACC,UAAU,QAAQ96B,OAAmB,QAAZu4B,EAAA3J,EAAO1nB,aAAK,IAAAqxB,GAAM,QAANC,EAAZD,EAAcl4B,YAAI,IAAAm4B,OAAN,EAAZA,EAAoBhC,gBAAiB,YAC3E97B,IAAA6b,cAAA,QAAMkN,MAAO,CAAEnI,iBAA6B,QAAZmd,EAAA7J,EAAO1nB,aAAK,IAAAuxB,OAAA,EAAZA,EAAc9wB,QAAS,WAAauU,UAAWR,EAAQqc,oBAEzFr9B,IAAA6b,cAACwkB,KAAc,KACM,YAAlBnM,EAAO5rB,OACNtI,IAAA6b,cAACyd,KAAM,CACLvQ,MAAO,CACLpI,UAAW,QACXuK,WAAY,OACZ9K,MAAO,OACPM,OAAQ,OACRG,aAAc,OAEhB2P,IAAW,OAAN0D,QAAM,IAANA,GAAe,QAAT8J,EAAN9J,EAAQtmB,eAAO,IAAAowB,OAAT,EAANA,EAAiB5D,gBAGxBp6B,IAAA6b,cAACyd,KAAM,CACLvQ,MAAO,CACLpI,UAAW,QACXuK,WAAY,MACZ9K,MAAO,OACPM,OAAQ,OACRG,aAAc,OAEhB2P,IAAW,OAAN0D,QAAM,IAANA,GAAe,QAAT+J,EAAN/J,EAAQtmB,eAAO,IAAAqwB,OAAT,EAANA,EAAiB7D,iBAI5Bp6B,IAAA6b,cAAC0G,IAAY,CACX+d,mBAAiB,EAEjB9d,QACExiB,IAAA6b,cAAA,QAAM2F,UAAWR,EAAQ8b,oBACvB98B,IAAA6b,cAAC8O,IAAU,CACTsO,QAAM,EACNvU,UAAU,OACV9C,QAAQ,QACR3U,MAAM,eAELinB,EAAOtmB,QAAQjI,KACH,UAAZ2H,GACCtN,IAAA6b,cAACqkB,KAAO,CAAC56B,MAAM,mBACbtF,IAAA6b,cAAC0kB,KAAc,CACbze,QAASA,IAAMmd,GAA2B,GAC1ChW,SAAS,QACTF,MAAO,CACL9b,MAAOuzB,KAAK,KACZrG,OAAQ,UACRjP,WAAY,GACZqI,cAAe,aAKL,UAAjBW,EAAO5rB,QACNtI,IAAA6b,cAACqkB,KAAO,CAAC56B,MAAM,qBACbtF,IAAA6b,cAAC4kB,KAAmB,CAClB3e,QAASA,IAAMqd,GAA4B,GAC3ClW,SAAS,QACTF,MAAO,CACL9b,MAAOuzB,KAAK,KACZrG,OAAQ,UACRjP,WAAY,GACZqI,cAAe,cAMzBvzB,IAAA6b,cAAC8G,KAAuB,KACtB3iB,IAAA6b,cAAC6f,KAAG,CAACla,UAAWR,EAAQyc,aAzHhCz9B,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACGsL,EAAOwM,SACN1gC,IAAA6b,cAACqkB,KAAO,CAAC56B,MAAM,WACbtF,IAAA6b,cAAC8kB,KAAW,CACV1X,SAAS,QACTF,MAAO,CAAE9b,MAAO2zB,KAAK,KAAMpgB,YAAa,UAyH9CiC,UACEziB,IAAA6b,cAAA,QAAM2F,UAAWR,EAAQ8b,oBAEvB98B,IAAA6b,cAAC8O,IAAU,CACTnJ,UAAWR,EAAQkc,mBACnBjE,QAAM,EACNvU,UAAU,OACV9C,QAAQ,QACR3U,MAAM,iBACP,IAAEinB,EAAO2M,YAAYthB,SAAS,yBAA2Bvf,IAAA6b,cAAC8P,GAAe,KAAC,sBAAiC3rB,IAAA6b,cAAC8P,GAAe,KAAEuI,EAAO2M,aACnI7gC,IAAA6b,cAAA,QAAM2F,UAAWR,EAAQuc,yBAChB,OAANrJ,QAAM,IAANA,GAAgB,QAAVgK,EAANhK,EAAQzpB,gBAAQ,IAAAyzB,OAAV,EAANA,EAAkBv4B,MAAO3F,IAAA6b,cAAC4M,IAAK,CAACjH,UAAWR,EAAQ6b,eAAsB,OAAN3I,QAAM,IAANA,GAAgB,QAAViK,EAANjK,EAAQzpB,gBAAQ,IAAA0zB,GAAM,QAANC,EAAhBD,EAAkBx4B,YAAI,IAAAy4B,OAAhB,EAANA,EAAwBtC,eAAyB97B,IAAA6b,cAAA,WACpH2iB,EAAax+B,IAAA6b,cAAC4M,IAAK,CAACM,MAAO,CAAEnI,gBAAiB,WAAaY,UAAWR,EAAQ6b,eAAgB2B,GAAsBx+B,IAAA6b,cAAA,WACrH7b,IAAA6b,cAAC4M,IAAK,CAACM,MAAO,CAAEnI,iBAA6B,QAAZyd,EAAAnK,EAAO1nB,aAAK,IAAA6xB,OAAA,EAAZA,EAAcpxB,QAAS,WAAauU,UAAWR,EAAQ6b,gBAA4B,QAAZyB,EAAApK,EAAO1nB,aAAK,IAAA8xB,GAAM,QAANC,EAAZD,EAAc34B,YAAI,IAAA44B,OAAN,EAAZA,EAAoBzC,gBAAiB,aAE/I97B,IAAA6b,cAAA,QAAMkN,MAAO,CAAEgJ,WAAY,OAASvQ,UAAWR,EAAQuc,wBACjD,OAAH3B,QAAG,IAAHA,OAAG,EAAHA,EAAKxZ,IAAKwZ,GAEP57B,IAAA6b,cAACggB,GAAU,CAACD,IAAKA,EAAKhe,IAAG,sBAAA1c,OAAwBgzB,EAAOvpB,GAAE,KAAAzJ,OAAI06B,EAAIjxB,SAM1E3K,IAAA6b,cAAC4M,IAAK,CACJjH,UAAWR,EAAQ0b,iBACnBtS,aAAc8J,EAAO4M,eACrB9f,QAAS,CACP+f,MAAO/f,EAAQmc,iBAOzBn9B,IAAA6b,cAAC8G,KAAuB,KACrBuR,EAAO2M,aACN7gC,IAAA6b,cAAA7b,IAAA4oB,SAAA,KAEE5oB,IAAA6b,cAAC8O,IAAU,CACTnJ,UAAWR,EAAQ+b,gBACnBrY,UAAU,OACV9C,QAAQ,QACR3U,MAAM,iBAGLopB,aAAUH,aAAShC,EAAOzZ,WAAY,IAAI/W,MACzC1D,IAAA6b,cAAA7b,IAAA4oB,SAAA,KAAG3K,aAAOiY,aAAShC,EAAOzZ,WAAY,UAEtCza,IAAA6b,cAAA7b,IAAA4oB,SAAA,KAAG3K,aAAOiY,aAAShC,EAAOzZ,WAAY,gBAI1Cza,IAAA6b,cAAA,aAMN7b,IAAA6b,cAAA,QAAM2F,UAAWR,EAAQuc,wBACJ,YAAlBrJ,EAAO5rB,QACNtI,IAAA6b,cAACsP,GACC,CACApC,MAAO,CAAEnI,gBAAiB,QAAS3T,MAAO,QAAS2d,QAAS,MAAOuI,OAAQ,OAAQtS,aAAc,MAAOoK,KAAM,MAAOhC,SAAU,UAC/HrH,QAAQ,YACRJ,UAAWR,EAAQoc,aACnB9R,KAAK,QACLtQ,QAASA,EAET8G,QAASiO,GAvQQ1U,WACvBJ,GAAW,GACX,IAMI,IAAI+lB,QALEpnB,GAAIqnB,IAAI,YAAD//B,OAAayJ,GAAM,CAC5BrC,OAAQ,OACRxF,OAAY,OAAJgO,QAAI,IAAJA,OAAI,EAAJA,EAAMnG,KAKlB,IACI,MAAM,KAAEkO,SAAee,GAAI0B,IAAI,cAE/B0lB,EAAenoB,EAAKiP,OAAQtN,GAAgB,yBAAVA,EAAEoD,KAEtC,MAAOpF,GACLD,GAAWC,GAIe,YAA1BwoB,EAAa,GAAGjlB,OAAwBmY,EAAOE,SAC/CwL,EAAkB1L,EAAOvpB,IAI/B,MAAO6N,GACLyC,GAAW,GAEX1C,GAAWC,GAEX6mB,EAAUtK,SACV9Z,GAAW,GAKfgB,EAAQza,KAAK,YAADN,OAAagzB,EAAOrH,QAmOZqU,CAAmBhN,EAAOvpB,KAEvCoN,KAAKkB,EAAE,+BAIQ,WAAlBib,EAAO5rB,QACPtI,IAAA6b,cAACsP,GACC,CACApC,MAAO,CAAEnI,gBAAiB,MAAO3T,MAAO,QAAS2d,QAAS,MAAOuI,OAAQ,MAAOtS,aAAc,MAAOoK,KAAM,MAAOhC,SAAU,UAC5HrH,QAAQ,YACRJ,UAAWR,EAAQoc,aACnB9R,KAAK,QACLtQ,QAASA,EACT8G,QAASiO,GA7TK1U,WACxBwjB,EAAa,OAAN3K,QAAM,IAANA,OAAM,EAANA,EAAQhkB,MACf+K,GAAW,GACX,IAAK,IAADkmB,QACIvnB,GAAIqnB,IAAI,YAAD//B,OAAayJ,GAAM,CAC9BrC,OAAQ,SACRxF,OAAY,OAAJgO,QAAI,IAAJA,OAAI,EAAJA,EAAMnG,GACdwwB,QAAe,OAANjH,QAAM,IAANA,GAAa,QAAPiN,EAANjN,EAAQ1nB,aAAK,IAAA20B,OAAP,EAANA,EAAex2B,GACxBy2B,gBAAgB,EAChBC,SAAU,KACVj0B,cAAe,OAEjB,MAAOoL,GACPyC,GAAW,GACX1C,GAAWC,GAET6mB,EAAUtK,SACZ9Z,GAAW,GAEbgB,EAAQza,KAAK,cA0SW8/B,CAAkBpN,EAAOvpB,KAEtCoN,KAAKkB,EAAE,+BAIQ,WAAlBib,EAAO5rB,QACPtI,IAAA6b,cAACsP,GACC,CACApC,MAAO,CAAEnI,gBAAiB,MAAO3T,MAAO,QAAS2d,QAAS,MAAOuI,OAAQ,MAAOtS,aAAc,MAAOoK,KAAM,MAAOhC,SAAU,UAC5HrH,QAAQ,YACRJ,UAAWR,EAAQoc,aACnB9R,KAAK,QACLtQ,QAASA,EACT8G,QAASiO,GArTM1U,WACzBJ,GAAW,GACX,IAAK,IAADsmB,QACI3nB,GAAIqnB,IAAI,YAAD//B,OAAayJ,GAAM,CAC9BrC,OAAQ,OACRxF,OAAY,OAAJgO,QAAI,IAAJA,OAAI,EAAJA,EAAMnG,GACdwwB,QAAe,OAANjH,QAAM,IAANA,GAAa,QAAPqN,EAANrN,EAAQ1nB,aAAK,IAAA+0B,OAAP,EAANA,EAAe52B,KAE1B,MAAO6N,GACPyC,GAAW,GACX1C,GAAWC,GAET6mB,EAAUtK,SACZ9Z,GAAW,GAEbgB,EAAQza,KAAK,YAADN,OAAagzB,EAAOrH,QAsSR2U,CAAmBtN,EAAOvpB,KAEvCoN,KAAKkB,EAAE,iCAOhBjZ,IAAA6b,cAACgN,IAAO,CAACjH,QAAQ,QAAQ8C,UAAU,SCnf1B+c,OA9DI9lB,IAWZ,IAXa,YAClB+K,EAAW,KACXxW,EAAI,MACJ/J,EAAK,WACLqgB,EAAU,OACVle,EAAM,KACN8J,EAAI,UACJqI,EAAS,QACT1L,EAAO,SACP2yB,EAAQ,mBACRC,GACDhmB,EACC,MAAOX,EAASC,GAAcC,oBAAS,IAChCmZ,EAASC,GAAcpZ,oBAAS,IAChCxM,EAASkzB,GAAc1mB,mBAAS,IA6CvC,OA3CAE,oBAAU,KACRH,GAAW,GACX,MAAMuM,EAAkB5jB,WAAW,KACZyX,WACnB,IACE,MAAM,KAAExC,SAAee,GAAI0B,IAAI,WAAY,CACzCla,OAAQ,CACNslB,cACAF,aACAtW,OACA/J,QACAmC,SACA8J,OACAqI,YACA1L,UACA2yB,WACAC,wBAGJC,EAAW/oB,EAAKnK,SAChB4lB,EAAWzb,EAAKwb,SAChBpZ,GAAW,GACX,MAAOzC,GACPyC,GAAW,GACX1C,GAAWC,KAGfqpB,IACC,KACH,MAAO,IAAMna,aAAaF,IACzB,CACDd,EACAxW,EACA/J,EACAqgB,EACAle,EACA8J,EACAqI,EACA1L,EACA2yB,EACAC,IAGK,CAAEjzB,UAASsM,UAASqZ,Y,qBCxC7B,MAAMzU,GAAYC,YAAWnG,IAAK,CACjCooB,aAAc,CACbzQ,UAAW,OACX0Q,UAAW,OACRroB,EAAM4X,iBAEV0Q,aAAc,CACb5hB,MAAO,OACPsR,SAAU,IACVxG,WAAYxR,EAAMuoB,QAAQ,GAC1BzhB,YAAa9G,EAAMuoB,QAAQ,GAC3B,CAACvoB,EAAMggB,YAAYC,KAAK,OAAQ,CAC/BjI,SAAU,MAGZwQ,SAAU,CACTjQ,UAAW,sBAqOEkQ,OAjOeC,IAC7B,MAAMphB,EAAUpB,KAEV3D,EAAUC,wBACV,KAAEpL,GAASqK,qBAAWyD,IACtByjB,GAAepmB,EAAQnY,SAASw+B,SAAS/M,MAAM,KAAK,GACpDgN,EAAc/N,iBAAO6N,GACrBjT,EAAWoF,oBACVgO,EAAQC,GAAavnB,oBAAS,IAC9B9J,EAAesxB,GAAoBxnB,mBAAS,KAE5CynB,EAAoBC,GAAyB1nB,oBAAS,IAEtD,CAAE2nB,GAA2B3nB,mBAAS,KAEvC,QAAExM,GAAY+yB,GAAW,CAAEE,mBAAoB,UAE9CmB,GAAQC,aAASC,KAAYZ,GAC9Ba,EAAgBzO,mBAEhB0O,EAAa1O,iBAAOvY,GAEnB5b,EAAgB8a,qBAAWlW,GAElCmW,oBAAU,KACaC,WACrB,IAEwB,WAAnBvK,EAAKvD,WACRq1B,GAAsB,GAEtB,MAAOpqB,GACND,GAAWC,KAIf2qB,IACE,IAEH/nB,oBAAU,KACT6nB,EAAclO,QAAU+N,EAElB,iBAAkBj/B,OAGvBu/B,aAAaC,oBAFbtiC,QAAQqB,IAAI,+CAIX,CAAC0gC,IAEJ1nB,oBAAU,KACoBkoB,MAC5B,GAAIX,EACHD,EAAiBh0B,OACX,CACN,MAAM60B,EAAmB70B,EAAQoZ,OAAOoM,GAA4B,YAAlBA,EAAO5rB,QAEzDo6B,EAAiBa,KAInBD,IACE,CAAC50B,IAEJ0M,oBAAU,KACTmnB,EAAYxN,QAAUsN,GACpB,CAACA,IAEJjnB,oBAAU,KACP,MAAMtW,EAASzE,EAAcsC,UAAUmO,EAAKlO,WA0D9C,OAxDAkC,EAAOnE,GAAG,QAAS,IAAMmE,EAAO7D,KAAK,qBAErC6D,EAAOnE,GAAG,WAADO,OAAY4P,EAAKlO,UAAS,WAAWiW,IACzB,iBAAhBA,EAAKuB,QAA6C,WAAhBvB,EAAKuB,SAC1CsoB,EAAiBpH,IAChB,MAAMkI,EAAclI,EAAU55B,UAAUuX,GAAKA,EAAEtO,KAAOkO,EAAKsb,UAC3D,OAAqB,IAAjBqP,GACHlI,EAAU15B,OAAO4hC,EAAa,GACvB,IAAIlI,IAELA,IAGRuH,EAAwBvH,IACvB,MAAMmI,EAAqBnI,EAAU55B,UACpCgiC,GAAKA,EAAE9H,MAAQ+H,OAAO9qB,EAAKsb,WAE5B,OAA4B,IAAxBsP,GACHnI,EAAUmI,GAAoBxvB,QAC9BqnB,EAAU15B,OAAO6hC,EAAoB,GAC9B,IAAInI,IAELA,OAKVx2B,EAAOnE,GAAG,WAADO,OAAY4P,EAAKlO,UAAS,eAAeiW,IAAS,IAAD+qB,EACzD,GACiB,WAAhB/qB,EAAKuB,SAAwBvB,EAAK9O,QAAQ8lB,QAClB,YAAvBhX,EAAKqb,OAAO5rB,UACXuQ,EAAK9O,QAAQ+1B,MAA+B,YAAvBjnB,EAAKqb,OAAO5rB,UAClCuQ,EAAKqb,OAAOpxB,UAAe,OAAJgO,QAAI,IAAJA,OAAI,EAAJA,EAAMnG,MAAOkO,EAAKqb,OAAOpxB,WAC5C,OAAJgO,QAAI,IAAJA,GAAY,QAAR8yB,EAAJ9yB,EAAMb,cAAM,IAAA2zB,OAAR,EAAJA,EAAcC,KAAKr3B,GAAUA,EAAM7B,KAAOkO,EAAKqb,OAAOiH,YAActiB,EAAKqb,OAAOiH,SAChF,CACDuH,EAAiBpH,IAChB,MAAMkI,EAAclI,EAAU55B,UAAUuX,GAAKA,EAAEtO,KAAOkO,EAAKqb,OAAOvpB,IAClE,OAAqB,IAAjB64B,GACHlI,EAAUkI,GAAe3qB,EAAKqb,OACvB,IAAIoH,IAEL,CAACziB,EAAKqb,UAAWoH,KASzB,GALEziB,EAAK9O,QAAQoqB,WAAaoO,EAAYxN,SACT,YAA7BuC,SAASwM,iBACTjrB,EAAKqb,OAAOpxB,QAAU+V,EAAKqb,OAAOpxB,UAAe,OAAJgO,QAAI,IAAJA,OAAI,EAAJA,EAAMnG,KACpDkO,EAAKqb,OAAOE,QAEY,OAEzB2P,EAAoBlrB,MAIf,KACN/T,EAAOzC,eAEN,CAACyO,EAAM6xB,EAAoBtiC,IAE9B,MAAM0jC,EAAsBlrB,IAC3B,MAAM,QAAE9O,EAAO,QAAE6D,EAAO,OAAEsmB,GAAWrb,EAE/B/M,EAAU,CACf6B,KAAK,GAADzM,OAAK6I,EAAQ4D,KAAI,OAAAzM,OAAM+c,aAAO,IAAIva,KAAQ,UAC9CogB,KAAMlW,EAAQo2B,WACdpI,IAAK1H,EAAOvpB,GACZs5B,UAAU,GAGLt1B,EAAe,IAAIy0B,aAAa,GAADliC,OACjC6W,KAAKkB,EAAE,gCAA+B,KAAA/X,OAAI0M,EAAQjI,MACrDmG,GAGD6C,EAAau1B,QAAUnU,IACtBA,EAAEoU,iBACFtgC,OAAOugC,QACPlB,EAAWnO,QAAQvzB,KAAK,YAADN,OAAagzB,EAAOrH,QAI5CgW,EAAwBvH,IACvB,MAAMmI,EAAqBnI,EAAU55B,UACpCgiC,GAAKA,EAAE9H,MAAQjtB,EAAaitB,KAE7B,OAA4B,IAAxB6H,GACHnI,EAAUmI,GAAsB90B,EACzB,IAAI2sB,IAEL,CAAC3sB,KAAiB2sB,KAG1B2H,EAAclO,WAOTsP,EAAkBA,KACvB5B,GAAU,IAGL6B,EAAqB3oB,IAAmB,IAAlB,SAAEC,GAAUD,EACvC,OAAO3b,IAAA6b,cAAA,OAAKiG,QAASuiB,GAAkBzoB,IAGxC,OACC5b,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACC5oB,IAAA6b,cAAC+G,IAAU,CACVd,QAfiByiB,KACnB9B,EAAUnH,IAAcA,IAetBlX,IAAKgL,EACLoV,aAAW,qBACXv3B,MAAM,UACN8b,MAAO,CAAC9b,MAAM,UAEdjN,IAAA6b,cAAC4M,IAAK,CAACgc,QAAQ,cAAcra,aAAchZ,EAAcrP,OAAQkL,MAAM,aACtEjN,IAAA6b,cAAC6oB,KAAQ,QAGX1kC,IAAA6b,cAAC8oB,KAAO,CACPC,mBAAiB,EACjBh2B,KAAM4zB,EACNpT,SAAUA,EAAS2F,QACnBtF,aAAc,CACbC,SAAU,SACVC,WAAY,SAEbC,gBAAiB,CAChBF,SAAU,MACVC,WAAY,SAEb3O,QAAS,CAAE6jB,MAAO7jB,EAAQghB,cAC1B3T,QAASgW,GAETrkC,IAAA6b,cAACsG,IAAI,CAACsC,OAAK,EAACjD,UAAWR,EAAQ8gB,cACJ,IAAzB1wB,EAAcrP,OACd/B,IAAA6b,cAACyG,IAAQ,KACRtiB,IAAA6b,cAAC0G,IAAY,KAAExK,KAAKkB,EAAE,6BAGvB7H,EAAcgR,IAAI8R,GACjBl0B,IAAA6b,cAACyoB,EAAkB,CAAC1mB,IAAKsW,EAAOvpB,IAC/B3K,IAAA6b,cAACipB,GAAc,CAAC5Q,OAAQA,U,gECxPhC,MAAMtU,GAAYC,YAAYnG,IAAK,CAC/BooB,aAAc,CACVlX,QAASlR,EAAMuoB,QAAQ,IAE3BD,aAAc,CACV5hB,MAAO,OACPsR,SAAU,IACVxG,WAAYxR,EAAMuoB,QAAQ,GAC1BzhB,YAAa9G,EAAMuoB,QAAQ,GAC3B,CAACvoB,EAAMggB,YAAYC,KAAK,OAAQ,CAC5BjI,SAAU,MAGlBwQ,SAAU,CACNjQ,UAAW,mBAEf8S,MAAO,CACH93B,MAAO,QAEX+3B,YAAa,CACTpkB,gBAAiB,UACjB3T,MAAO,WA6EAg4B,OAzEatpB,IAA4B,IAA3B,OAAEymB,EAAM,UAAE8C,GAAWvpB,EAC9C,MAAMqF,EAAUpB,KAEVwP,EAAWoF,oBACVgO,EAAQC,GAAavnB,oBAAS,GAerC,OACIlb,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACI5oB,IAAA6b,cAAC+G,IAAU,CACPpB,UAAWR,EAAQ+jB,MACnBjjB,QAjBQyiB,KAChB9B,EAAWnH,IAAeA,IAiBlBlX,IAAKgL,EACLoV,aAAW,sBAIXxkC,IAAA6b,cAACspB,KAAY,CAACl4B,MAAM,aAExBjN,IAAA6b,cAAC8oB,KAAO,CACJC,mBAAiB,EACjBh2B,KAAM4zB,EACNpT,SAAUA,EAAS2F,QACnBtF,aAAc,CACVC,SAAU,SACVC,WAAY,SAEhBC,gBAAiB,CACbF,SAAU,MACVC,WAAY,SAEhB3O,QAAS,CAAE6jB,MAAO7jB,EAAQghB,cAC1B3T,QAlCYgW,KACpB5B,GAAU,KAmCFziC,IAAA6b,cAACsG,IAAI,CAACsC,OAAK,EAACjD,UAAWR,EAAQ8gB,cAC3B9hC,IAAA6b,cAACupB,KAAI,CAACC,WAAS,EAACpD,QAAS,GACrBjiC,IAAA6b,cAACupB,KAAI,CAACE,MAAI,GACNtlC,IAAA6b,cAAC0pB,KAAc,OAEnBvlC,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,IAAE,GACTxlC,IAAA6b,cAAC4pB,KAAM,CACH1pB,MAAOqmB,EACP5T,kBAAgB,oBAChBkX,KAAM,GACNC,IAAK,EACLC,IAAK,EACLlkB,SAAUA,CAACqO,EAAGhU,IA5CdA,KACxBmpB,EAAUnpB,GACVhZ,aAAaka,QAAQ,SAAUlB,IA2CH8pB,CAAmB9pB,MAI/B/b,IAAA6b,cAACupB,KAAI,CAACE,MAAI,GACNtlC,IAAA6b,cAACspB,KAAY,Y,4DCzFzC,MAAMvlB,GAAYC,YAAWnG,IAAK,CACjCosB,MAAO,CACN/lB,QAAS,OACT0Q,SAAU,QAEXsV,KAAM,CACL7lB,OAAQ,MA8FK8lB,OA1FKrqB,IAAgG,IAA/F,iBAAEsqB,EAAgB,SAAEvkB,EAAQ,SAAEwkB,GAAW,EAAI,MAAE5gC,EAAQyS,KAAKkB,EAAE,2BAA2B0C,EAC7G,MAAMqF,EAAUpB,MACT3P,EAAQk2B,GAAajrB,mBAAS,IAErCE,oBAAU,KAETgrB,KAEE,IAEH,MAAMA,EAAc/qB,UACnB,IACC,MAAM,KAAExC,SAAee,GAAI0B,IAAI,UAC/B6qB,EAAUttB,GACT,MAAOL,GACRD,GAAWC,KAQb,OACCxY,IAAA6b,cAAA,WACC7b,IAAA6b,cAACwqB,KAAW,CAACxV,WAAS,EAAC3Q,OAAO,QAAQ0B,QAAQ,YAC7C5hB,IAAA6b,cAACyqB,KAAU,CAACC,SAAQN,GAAmC3gC,GACvDtF,IAAA6b,cAAC2qB,KAAM,CACN10B,MAAOxM,EACP4gC,SAAUA,EACVO,WAAY,GACZ1qB,MAAOkqB,EACPvkB,SAbiBqO,IACpBrO,EAASqO,EAAEpO,OAAO5F,QAaf2qB,UAAW,CACVjX,aAAc,CACbC,SAAU,SACVC,WAAY,QAEbC,gBAAiB,CAChBF,SAAU,MACVC,WAAY,QAEbH,mBAAoB,MAGrBmX,YAAa1G,IAAa,IAAD2G,EAAAC,EACxB,OACC7mC,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQ8kB,QACd,OAAR7F,QAAQ,IAARA,OAAQ,EAARA,EAAUl+B,QAAS,GAAKmkC,EACxBjG,EAAS7d,IAAIzX,IACZ,MAAM6B,EAAQyD,EAAO0N,KAAKyd,GAAKA,EAAEzwB,KAAOA,GACxC,OAAO6B,EACNxM,IAAA6b,cAACirB,KAAI,CACJlpB,IAAKjT,EACLoe,MAAO,CAAEnI,gBAAiBpU,EAAMS,OAChC2U,QAAQ,WACR9P,MAAOtF,EAAM7G,KACb6b,UAAWR,EAAQ+kB,OAEjB,OAKJ/lC,IAAA6b,cAACirB,KAAI,CACJlpB,IAAKqiB,EACLre,QAAQ,WACRmH,MAAO,CAAEnI,gBAAoD,QAArCgmB,EAAE32B,EAAO0N,KAAKyd,GAAKA,EAAEzwB,KAAOs1B,UAAS,IAAA2G,OAAA,EAAnCA,EAAqC35B,OAC/D6E,MAA0C,QAArC+0B,EAAE52B,EAAO0N,KAAKyd,GAAKA,EAAEzwB,KAAOs1B,UAAS,IAAA4G,OAAA,EAAnCA,EAAqClhC,KAC5C6b,UAAWR,EAAQ+kB,WASvBG,GAAYlmC,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,MAAM,UACpC9L,EAAOmS,IAAI5V,GACXxM,IAAA6b,cAACiU,IAAQ,CAAClS,IAAKpR,EAAM7B,GAAIoR,MAAOvP,EAAM7B,IACpC6B,EAAM7G,WCzEd,MAAMia,GAAYC,YAAWnG,IAAK,CACjCoG,KAAM,CACLC,QAAS,OACT0Q,SAAU,QAEXsW,cAAe,CACdhnB,QAAS,OACT,yBAA0B,CACzBS,YAAa9G,EAAMuoB,QAAQ,KAI7B+E,WAAY,CACXhe,SAAU,YAGX8B,eAAgB,CACf7d,MAAO8d,KAAM,KACb/B,SAAU,WACVgC,IAAK,MACLC,KAAM,MACNtK,WAAY,GACZuK,YAAa,IAEd+b,YAAa,CACZ/mB,OAAQxG,EAAMuoB,QAAQ,GACtB3R,SAAU,QAIN4W,GAAaC,OAAaC,MAAM,CACrCzhC,KAAMwhC,OACJxB,IAAI,EAAG,cACPC,IAAI,GAAI,aACRyB,SAAS,YACXxhC,SAAUshC,OAAaxB,IAAI,EAAG,cAAcC,IAAI,GAAI,aACpDhgC,MAAOuhC,OAAavhC,MAAM,iBAAiByhC,SAAS,cAuQtCC,OApQG3rB,IAAgC,IAA/B,KAAE/M,EAAI,QAAEyf,EAAO,OAAEvrB,GAAQ6Y,EAC3C,MAAMqF,EAAUpB,KAEV2nB,EAAe,CACpB5hC,KAAM,GACNC,MAAO,GACPC,SAAU,GACVyH,QAAS,OACTC,UAAW,aAGJuD,KAAM02B,GAAiBrsB,qBAAWyD,KAEnC9N,EAAMuL,GAAWnB,mBAASqsB,IAC1BtB,EAAkBwB,GAAuBvsB,mBAAS,KAClDM,EAAYksB,GAAiBxsB,oBAAS,IACvC,QAAEF,EAAO,UAAEH,GAAcD,KAE/BQ,oBAAU,KACSC,WACjB,GAAKvY,EACL,IAAK,IAAD6kC,EACH,MAAM,KAAE9uB,SAAee,GAAI0B,IAAI,UAADpa,OAAW4B,IACzCuZ,EAAQif,IACA,IAAKA,KAAcziB,KAE3B,MAAM+uB,EAA0B,QAAdD,EAAG9uB,EAAK5I,cAAM,IAAA03B,OAAA,EAAXA,EAAavlB,IAAI5V,GAASA,EAAM7B,IACrD88B,EAAoBG,GACpBF,EAAc7uB,EAAK2C,WAAa3C,EAAK2C,WAAa,IACjD,MAAOhD,GACRD,GAAWC,KAIbqvB,IACE,CAAC/kC,EAAQ8L,IAEZ,MAAMugB,EAAcA,KACnBd,IACAhS,EAAQkrB,IAkBT,OACCvnC,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQlB,MACvB9f,IAAA6b,cAAC0S,KAAM,CACN3f,KAAMA,EACNyf,QAASc,EACTuC,SAAS,KACTb,WAAS,EACTsL,OAAO,SAEPn8B,IAAA6b,cAAC4S,KAAW,CAAC9jB,GAAG,qBACR,GAAAzJ,OAAN4B,EACKiV,KAAKkB,EAAE,wBACPlB,KAAKkB,EAAE,yBAEdjZ,IAAA6b,cAACisB,KAAM,CACNC,cAAej3B,EACfk3B,oBAAoB,EACpBC,iBAAkBf,GAClBgB,SAAUA,CAACC,EAAQ1/B,KAClB7E,WAAW,KAlCOyX,WACtB,MAAMkC,EAAW,IAAK4qB,EAAQ3sB,aAAYkmB,SAAUuE,EAAkB14B,UAAW46B,EAAO56B,WACxF,IACKzK,QACG8W,GAAIqnB,IAAI,UAAD//B,OAAW4B,GAAUya,SAE5B3D,GAAIoD,KAAK,SAAUO,GAE1BvE,IAAMxT,QAAQuS,KAAKkB,EAAE,sBACpB,MAAOT,GACRD,GAAWC,GAEZ2W,KAuBKiZ,CAAeD,GACf1/B,EAAQ4/B,eAAc,IACpB,OAGHzc,IAAA,IAAC,QAAE0c,EAAO,OAAEC,EAAM,aAAEC,GAAc5c,EAAA,OAClC5rB,IAAA6b,cAAC4sB,KAAI,KACJzoC,IAAA6b,cAAC6S,KAAa,CAACC,UAAQ,GACtB3uB,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQ+lB,eACvB/mC,IAAA6b,cAAC6sB,KAAK,CACLC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,uBACd2vB,WAAS,EACTjjC,KAAK,OACLmT,MAAOwvB,EAAQ3iC,MAAQkvB,QAAQ0T,EAAO5iC,MACtCkjC,WAAYP,EAAQ3iC,MAAQ4iC,EAAO5iC,KACnCic,QAAQ,WACR1B,OAAO,QACP2Q,WAAS,IAEV7wB,IAAA6b,cAAC6sB,KAAK,CACLC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,2BACdrO,KAAK,WACLjF,KAAK,WACLmT,MAAOwvB,EAAQziC,UAAYgvB,QAAQ0T,EAAO1iC,UAC1CgjC,WAAYP,EAAQziC,UAAY0iC,EAAO1iC,SACvC+b,QAAQ,WACR1B,OAAO,QACP2Q,WAAS,KAGX7wB,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQ+lB,eACvB/mC,IAAA6b,cAAC6sB,KAAK,CACLC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,wBACdtT,KAAK,QACLmT,MAAOwvB,EAAQ1iC,OAASivB,QAAQ0T,EAAO3iC,OACvCijC,WAAYP,EAAQ1iC,OAAS2iC,EAAO3iC,MACpCgc,QAAQ,WACR1B,OAAO,QACP2Q,WAAS,IAEV7wB,IAAA6b,cAACwqB,KAAW,CACXzkB,QAAQ,WACRJ,UAAWR,EAAQimB,YACnB/mB,OAAO,SAEPlgB,IAAA6b,cAACoD,GAAG,CACHC,KAAMsoB,EAAal6B,QACnB6R,QAAQ,yBACRvY,IAAKA,IACJ5G,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACC5oB,IAAA6b,cAACyqB,KAAU,CAAC37B,GAAG,iCACboN,KAAKkB,EAAE,2BAGTjZ,IAAA6b,cAAC6sB,KAAK,CACLC,GAAInC,KACJ10B,MAAOiG,KAAKkB,EAAE,0BACdtT,KAAK,UACLmjC,QAAQ,0BACRn+B,GAAG,oBACH08B,UAAQ,GAERrnC,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAM,SAAQ,SACxB/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAM,QAAO,cAO7B/b,IAAA6b,cAACoD,GAAG,CACHC,KAAMsoB,EAAal6B,QACnB6R,QAAQ,wBACRvY,IAAKA,IACJ5G,IAAA6b,cAACmqB,GAAW,CACXC,iBAAkBA,EAClBvkB,SAAUymB,GAAUV,EAAoBU,OAI3CnoC,IAAA6b,cAACoD,GAAG,CACHC,KAAMsoB,EAAal6B,QACnB6R,QAAQ,yBACRvY,IAAKA,IACJ5G,IAAA6b,cAACwqB,KAAW,CAACzkB,QAAQ,WAAW1B,OAAO,QAAQsB,UAAWR,EAAQ0Q,SAAUb,WAAS,GACpF7wB,IAAA6b,cAACyqB,KAAU,KACTvuB,KAAKkB,EAAE,4BAETjZ,IAAA6b,cAAC6sB,KAAK,CACLC,GAAInC,KACJzqB,MAAOP,EACPkG,SAAWqO,GAAM2X,EAAc3X,EAAEpO,OAAO5F,OACxCjK,MAAOiG,KAAKkB,EAAE,4BAGdjZ,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,IAAI,QACpBlB,EAAUuH,IAAK3X,GACfzK,IAAA6b,cAACiU,IAAQ,CAAClS,IAAKnT,EAASE,GAAIoR,MAAOtR,EAASE,IAAKF,EAAS9E,WAS/D3F,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQ+nB,SACvB/oC,IAAA6b,cAAA,QAAM2F,UAAWR,EAAQgoB,aAAa,qBAGvChpC,IAAA6b,cAACoD,GAAG,CACHC,KAAMsoB,EAAal6B,QACnB6R,QAAQ,yBACRvY,IAAKA,KAAQoU,GACZhb,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQioB,WACvBjpC,IAAA6b,cAACwqB,KAAW,CACXzkB,QAAQ,WACRJ,UAAWR,EAAQ0Q,SACnBxR,OAAO,QACP2Q,WAAS,GAET7wB,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACC5oB,IAAA6b,cAACyqB,KAAU,CAAC37B,GAAG,iCACboN,KAAKkB,EAAE,6BAGTjZ,IAAA6b,cAAC6sB,KAAK,CACLC,GAAInC,KACJ10B,MAAOiG,KAAKkB,EAAE,2BACdtT,KAAK,YACLmjC,QAAQ,4BACRn+B,GAAG,sBACH08B,UAAQ,GAERrnC,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAM,WAAWhE,KAAKkB,EAAE,oCAClCjZ,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAM,YAAYhE,KAAKkB,EAAE,4CAU1CjZ,IAAA6b,cAAC+S,KAAa,KACb5uB,IAAA6b,cAACgG,KAAM,CACNC,QAASqN,EACTliB,MAAM,YACNzG,SAAUgiC,EACV5mB,QAAQ,YAEP7J,KAAKkB,EAAE,6BAETjZ,IAAA6b,cAACgG,KAAM,CACNjX,KAAK,SACLqC,MAAM,UACNzG,SAAUgiC,EACV5mB,QAAQ,YACRJ,UAAWR,EAAQgmB,YAEZ,GAAA9lC,OAAN4B,EACKiV,KAAKkB,EAAE,4BACPlB,KAAKkB,EAAE,4BACZuvB,GACAxoC,IAAA6b,cAACwP,KAAgB,CAChBC,KAAM,GACN9J,UAAWR,EAAQ8J,yB,WCrT9B,MAAMlL,GAAYC,YAAWnG,IAAK,CACjCwvB,SAAU,CACTvW,OAAQjZ,EAAMiZ,OAAOwW,OAAS,EAC9Bl8B,MAAO,WAaMm8B,OATSA,KACvB,MAAMpoB,EAAUpB,KAChB,OACC5f,IAAA6b,cAACwtB,KAAQ,CAAC7nB,UAAWR,EAAQkoB,SAAUt6B,MAAM,GAC5C5O,IAAA6b,cAACwP,KAAgB,CAACpe,MAAM,c,0CCVT4S,YAAYnG,IAAK,CAC/BqrB,MAAO,CACH93B,MAAO,QAEXq8B,OAAQ,CACJr8B,MAAO,QAEXs8B,QAAS,CACLxpB,QAAS,QAEbypB,UAAW,CACPv8B,MAAO,WAmDAw8B,I,0CCxCf,MAAM7pB,GAAYC,YAAYnG,IAAK,CACjCgwB,UAAW,CACTrX,KAAM,EACN0P,UAAW,IACXrQ,SAAU,IACV9G,QAASlR,EAAMuoB,QAAQ,GACvB5Q,UAAW,YACR3X,EAAM4X,oBAIb,SAASqY,GAAkBhuB,GAAuC,IAAtC,aAAEiuB,EAAY,KAAEh7B,EAAI,YAAEugB,GAAaxT,EAI7D,OACE3b,IAAA6b,cAAC0S,KAAM,CACL3f,KAAMA,EACNyf,QAASA,IAAMc,IACfX,kBAAgB,qBAChBqb,mBAAiB,4BAEjB7pC,IAAA6b,cAAC4S,KAAW,CAAC9jB,GAAG,sBAAsBi/B,EAAatkC,OACnDtF,IAAA6b,cAAC6S,KAAa,KACXkb,EAAar1B,WACZvU,IAAA6b,cAAA,OACEkN,MAAO,CACL+gB,OAAQ,oBACR5pB,OAAQ,cACRgJ,UAAW,SACX9I,MAAO,QACPM,OAAQ,IACRuQ,gBAAgB,OAAD/vB,QApBL6oC,EAoB2BH,EAAar1B,UAnBtD,GAANrT,OAAU+C,mCAAiC,YAAA/C,OAAW6oC,IAmBgB,KAC5DC,iBAAkB,YAClBC,eAAgB,UAChBC,mBAAoB,YAI1BlqC,IAAA6b,cAACsuB,KAAiB,CAACx/B,GAAG,4BACnBi/B,EAAat1B,OAGlBtU,IAAA6b,cAAC+S,KAAa,KACZ5uB,IAAA6b,cAACgG,KAAM,CAACC,QAASA,IAAMqN,IAAeliB,MAAM,UAAU27B,WAAS,GAAC,YAhChDmB,MAwCxB,MAAM7vB,GAAUA,CAACC,EAAOC,KACtB,GAAoB,uBAAhBA,EAAOxP,KAA+B,CACxC,MAAMsJ,EAAgBkG,EAAOC,QACvB+vB,EAAmB,GAezB,OAbI3sB,mBAAQvJ,IACVA,EAAc2Q,QAAS+kB,IACrB,MAAMS,EAAoBlwB,EAAMzY,UAC7BqjB,GAAMA,EAAEpa,KAAOi/B,EAAaj/B,KAEJ,IAAvB0/B,EACFlwB,EAAMkwB,GAAqBT,EAE3BQ,EAAiB5oC,KAAKooC,KAKrB,IAAIzvB,KAAUiwB,GAGvB,GAAoB,yBAAhBhwB,EAAOxP,KAAiC,CAC1C,MAAMg/B,EAAexvB,EAAOC,QACtBgwB,EAAoBlwB,EAAMzY,UAAWqjB,GAAMA,EAAEpa,KAAOi/B,EAAaj/B,IAEvE,OAA2B,IAAvB0/B,GACFlwB,EAAMkwB,GAAqBT,EACpB,IAAIzvB,IAEJ,CAACyvB,KAAiBzvB,GAI7B,GAAoB,wBAAhBC,EAAOxP,KAAgC,CACzC,MAAM0/B,EAAiBlwB,EAAOC,QAExBgwB,EAAoBlwB,EAAMzY,UAAWqjB,GAAMA,EAAEpa,KAAO2/B,GAI1D,OAH2B,IAAvBD,GACFlwB,EAAMvY,OAAOyoC,EAAmB,GAE3B,IAAIlwB,GAGb,GAAoB,UAAhBC,EAAOxP,KACT,MAAO,IAII,SAAS2/B,KACtB,MAAMvpB,EAAUpB,MAET5E,EAASC,GAAcC,oBAAS,IAChCkU,EAAUuF,GAAezZ,mBAAS,OAClCsL,EAAYC,GAAiBvL,mBAAS,IACtCmZ,EAASC,GAAcpZ,oBAAS,IAChCwL,GAAexL,mBAAS,KACxBhH,EAAe4G,GAAYC,qBAAWb,GAAS,KAC/CoM,EAAWC,GAAgBrL,oBAAS,IACpC0uB,EAAcY,GAAmBtvB,mBAAS,KAC1CuvB,EAAwBC,GAA6BxvB,oBAAS,GAE/D7a,EAAgB8a,qBAAWlW,GAEjCmW,oBAAU,KACRN,EAAS,CAAElQ,KAAM,UACjB6b,EAAc,IACb,CAACC,IAEJtL,oBAAU,KACRH,GAAW,GACX,MAAMuM,EAAkB5jB,WAAW,KACjC+mC,KACC,KACH,MAAO,IAAMjjB,aAAaF,IAEzB,CAACd,EAAaF,IAEjBpL,oBAAU,KACR,MAAMxY,EAAYG,aAAaC,QAAQ,aACjC8B,EAASzE,EAAcsC,UAAUC,GAEvC,OAAKkC,GAILA,EAAOnE,GAAG,uBAAyBkY,IACb,WAAhBA,EAAKuB,QAAuC,WAAhBvB,EAAKuB,SACnCU,EAAS,CAAElQ,KAAM,uBAAwByP,QAASxB,EAAK+xB,SACvDrkB,GAAa,IAEK,WAAhB1N,EAAKuB,QACPU,EAAS,CAAElQ,KAAM,sBAAuByP,SAAUxB,EAAKlO,OAGpD,KACL7F,EAAOzC,eAbA,QAeR,CAAChC,IAEJ,MAAMsqC,EAAqBtvB,UACzB,IACE,MAAM,KAAExC,SAAee,GAAI0B,IAAI,kBAAmB,CAChDla,OAAQ,CAAEslB,cAAaF,gBAEzB1L,EAAS,CAAElQ,KAAM,qBAAsByP,QAASxB,EAAKmP,UACrDsM,EAAWzb,EAAKwb,SAChBpZ,GAAW,GACX,MAAOzC,GACPD,GAAWC,KA+CT5J,EAAOimB,QAAQzF,GACfzkB,EAAKiE,EAAO,sBAAmB6K,EAErC,OACEzZ,IAAA6b,cAAA,WACE7b,IAAA6b,cAAC8tB,GAAkB,CACjBC,aAAcA,EACdh7B,KAAM67B,EACNtb,YAAaA,IAAMub,GAA0B,KAE/C1qC,IAAA6b,cAAC+G,IAAU,CACThB,QAAQ,YACRioB,mBAAkBl/B,EAClBmX,QA5Ce3gB,IACnBwzB,EAAYxzB,EAAMi0B,eAClB7O,GAAa,IA2CTwC,MAAO,CAAE9b,MAAO,UAEhBjN,IAAA6b,cAAC4M,IAAK,CACJxb,MAAM,YACN2U,QAAQ,MACR0E,UAAWA,GAAapS,EAAcnS,OAAS,GAE/C/B,IAAA6b,cAACgvB,KAAa,QAGlB7qC,IAAA6b,cAAC8oB,KAAO,CACNh6B,GAAIA,EACJiE,KAAMA,EACNwgB,SAAUA,EACVf,QAtDcc,KAClBwF,EAAY,OAsDRlF,aAAc,CACZC,SAAU,SACVC,WAAY,UAEdC,gBAAiB,CACfF,SAAU,MACVC,WAAY,WAGd3vB,IAAA6b,cAACivB,KAAK,CACJlpB,QAAQ,WACRwV,SA/EcrH,IACpB,IAAKsE,GAAWrZ,EAAS,OACzB,MAAM,UAAEqc,EAAS,aAAE0T,EAAY,aAAEC,GAAiBjb,EAAEqF,cAChD2V,GAAgB1T,EAAY,KAAO2T,GANvCvkB,EAAe6U,GAAcA,EAAY,IAmFnC9Z,UAAWR,EAAQ0oB,WAEnB1pC,IAAA6b,cAACsG,IAAI,CACHuC,UAAU,MACV8f,aAAW,uBACXzb,MAAO,CAAEuH,SAAU,MAElB7S,mBAAQvJ,IACPA,EAAckO,IAAI,CAACkjB,EAAM1nB,KACvB5d,WAAA6b,cAACyG,IAAQ,CACP1E,IAAKA,EACLmL,MAAO,CAEL+gB,OAAQ,iBACRxP,YA7EMjmB,EA6EqBixB,EAAKjxB,SA5E/B,IAAbA,EACK,oBAEQ,IAAbA,EACK,mBAEQ,IAAbA,EACK,sBADT,GAuEgB8lB,OAAQ,WAEVrY,QAASA,KA/DvB0oB,EA+D0DlF,GA9D1DoF,GAA0B,QAC1B/V,EAAY,QA+DG2Q,EAAK/wB,WACJvU,IAAA6b,cAACwkB,KAAc,KACbrgC,IAAA6b,cAACyd,KAAM,CACLnL,IAAKmX,EAAK1zB,UACV4e,KA1EAuZ,EA0EkBzE,EAAK/wB,UAzErC,GAANrT,OAAU+C,mCAAiC,YAAA/C,OAAW6oC,OA6ExC/pC,IAAA6b,cAAC0G,IAAY,CACXC,QAAS8iB,EAAKhgC,MACdmd,UACEziB,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACE5oB,IAAA6b,cAAC8O,IAAU,CAACjG,UAAU,OAAOqE,MAAO,CAAEE,SAAU,KAC7CpL,IAAOynB,EAAKpjB,WAAWjE,OAAO,eAEjCje,IAAA6b,cAAA,QAAMkN,MAAO,CAAEpI,UAAW,EAAGZ,QAAS,WACtC/f,IAAA6b,cAAC8O,IAAU,CAACjG,UAAU,OAAO9C,QAAQ,SAClC0jB,EAAKhxB,UAvFRy1B,MAZE11B,IA0GboJ,mBAAQvJ,IAA2C,IAAzBA,EAAcnS,QACvC/B,IAAA6b,cAAC0G,IAAY,CAACC,QAAQ,wB,yBC/T7B,SAASyoB,KAsBd,MAAO,CACLC,aAtBF,SAAsBC,GACpB,OAAIttB,IAAOstB,GAASC,UACXvtB,IAAOstB,GAASltB,OAAO,cAEzBktB,GAmBPE,iBAhBF,SAA0BF,GACxB,OAAIttB,IAAOstB,GAASC,UACXvtB,IAAOstB,GAASltB,OAAO,oBAEzBktB,GAaPG,eAVF,SAAwBH,GACtB,OAAIttB,IAAOstB,EAAS,cAAcC,UACzBvtB,IAAOstB,GAASltB,OAAO,uBAEzBktB,I,yBCSX,MAAMvrB,GAAYC,YAAYnG,IAAK,CACjCgwB,UAAW,CACTrX,KAAM,EACN0P,UAAW,IACXrQ,SAAU,IACV9G,QAASlR,EAAMuoB,QAAQ,GACvB5Q,UAAW,YACR3X,EAAM4X,oBAIPpX,GAAUA,CAACC,EAAOC,KACtB,GAAoB,eAAhBA,EAAOxP,KAAuB,CAChC,MAAM4F,EAAQ4J,EAAOC,QACfuK,EAAW,GAajB,OAXInH,mBAAQjN,IACVA,EAAMqU,QAAS7W,IACb,MAAM8W,EAAY3K,EAAMzY,UAAWqjB,GAAMA,EAAEpa,KAAOqD,EAAKrD,KACpC,IAAfma,EACF3K,EAAM2K,GAAa9W,EAEnB4W,EAASpjB,KAAKwM,KAKb,IAAImM,KAAUyK,GAGvB,GAAoB,iBAAhBxK,EAAOxP,KAAyB,CAClC,MAAMoD,EAAOoM,EAAOC,QACdyK,EAAY3K,EAAMzY,UAAWqjB,GAAMA,EAAEpa,KAAOqD,EAAKrD,IAEvD,OAAmB,IAAfma,GACF3K,EAAM2K,GAAa9W,EACZ,IAAImM,IAEJ,CAACnM,KAASmM,GAIrB,GAAoB,gBAAhBC,EAAOxP,KAAwB,CACjC,MAAMoa,EAAS5K,EAAOC,QAEhByK,EAAY3K,EAAMzY,UAAWqjB,GAAMA,EAAEpa,KAAOqa,GAIlD,OAHmB,IAAfF,GACF3K,EAAMvY,OAAOkjB,EAAW,GAEnB,IAAI3K,GAGb,GAAoB,UAAhBC,EAAOxP,KACT,MAAO,GAGT,GAAoB,gBAAhBwP,EAAOxP,KAAwB,CAOjC,OANqBuP,EAAMiI,IAAKpU,GAC1BA,EAAKrD,KAAOyP,EAAOC,QAAQrM,KAAKrD,GAC3ByP,EAAOC,QAAQrM,KAEjBA,KAME,SAASu9B,KACtB,MAAMvqB,EAAUpB,MAEV,KAAE9O,GAASqK,qBAAWyD,KAErB5D,EAASC,GAAcC,oBAAS,IAChCkU,EAAUuF,GAAezZ,mBAAS,OAClCsL,EAAYC,GAAiBvL,mBAAS,IACtCmZ,EAASC,GAAcpZ,oBAAS,IAChCwL,GAAexL,mBAAS,KACxB1K,EAAOsK,GAAYC,qBAAWb,GAAS,KACvCoM,EAAWC,GAAgBrL,oBAAS,IACrC,iBAAEmwB,GAAqBJ,MACtBnI,GAAQC,aAASyI,MAClBvI,EAAgBzO,mBAEhBn0B,EAAgB8a,qBAAWlW,GAEjCmW,oBAAU,KACR6nB,EAAclO,QAAU+N,EAElB,iBAAkBj/B,OAGtBu/B,aAAaC,oBAFbtiC,QAAQqB,IAAI,+CAIb,CAAC0gC,IAEJ1nB,oBAAU,KACRN,EAAS,CAAElQ,KAAM,UACjB6b,EAAc,IACb,CAACC,IAEJtL,oBAAU,KACRH,GAAW,GACX,MAAMuM,EAAkB5jB,WAAW,KACjC6jB,KACC,KACH,MAAO,IAAMC,aAAaF,IAEzB,CAACd,EAAaF,IAEjBpL,oBAAU,KACR,MAAMxY,EAAYG,aAAaC,QAAQ,aACjC8B,EAASzE,EAAcsC,UAAUC,GACvC,OAAKkC,GAILA,EAAOnE,GAAG,WAADO,OAAY0B,EAAS,SAAUiW,IACtC,GAAoB,gBAAhBA,EAAKuB,OAA0B,CACjCU,EAAS,CAAElQ,KAAM,cAAeyP,QAASxB,IACzBA,EAAKkb,WAAW/lB,KAAK7H,MAAMic,IAAIqpB,GAAWA,EAAQ3oC,QAEtDyc,SAASzO,EAAKnG,KAAOkO,EAAKkb,WAAW2X,WAAa56B,EAAKnG,IACjEs4B,EAAclO,UAGE,WAAhBlc,EAAKuB,QACPU,EAAS,CAAElQ,KAAM,cAAeyP,QAASxB,MAGtC,KACL/T,EAAOzC,eAjBA,QAmBR,CAAChC,EAAeyQ,EAAKnG,KAExByQ,oBAAU,KACR,IAAIuM,EAAe,EACnB,GAAInX,EAAMzO,OAAS,EACjB,IAAK,IAAIiM,KAAQwC,EACf,IAAK,IAAIoX,KAAY5Z,EAAK7H,MACpByhB,EAAS9kB,SAAWgO,EAAKnG,KAC3Bgd,GAAgBC,EAASC,SAM/BtB,IADEoB,EAAe,KAKlB,CAACnX,EAAOM,EAAKnG,KAEhB,MAAM8c,EAAapM,UACjB,IACE,MAAM,KAAExC,SAAee,GAAI0B,IAAI,UAAW,CACxCla,OAAQ,CAAEslB,cAAaF,gBAEzB1L,EAAS,CAAElQ,KAAM,aAAcyP,QAASxB,EAAKmP,UAC7CsM,EAAWzb,EAAKwb,SAChBpZ,GAAW,GACX,MAAOzC,GACPD,GAAWC,KA6BT5J,EAAOimB,QAAQzF,GACfzkB,EAAKiE,EAAO,sBAAmB6K,EAErC,OACEzZ,IAAA6b,cAAA,WACE7b,IAAA6b,cAAC+G,IAAU,CACTinB,mBAAkBl/B,EAClBiX,QAAQ,YACR3U,MAAOqZ,EAAY,UAAY,UAC/BxE,QAtBe3gB,IACnBwzB,EAAYxzB,EAAMi0B,eAClB7O,GAAa,IAqBTwC,MAAO,CAAE9b,MAAO,UAEhBjN,IAAA6b,cAAC4M,IAAK,CAACxb,MAAM,YAAY2U,QAAQ,MAAM0E,UAAWA,GAChDtmB,IAAA6b,cAAC6M,KAAS,QAGd1oB,IAAA6b,cAAC8oB,KAAO,CACNh6B,GAAIA,EACJiE,KAAMA,EACNwgB,SAAUA,EACVf,QA5Bcc,KAClBwF,EAAY,OA4BRlF,aAAc,CACZC,SAAU,SACVC,WAAY,UAEdC,gBAAiB,CACfF,SAAU,MACVC,WAAY,WAGd3vB,IAAA6b,cAACivB,KAAK,CACJlpB,QAAQ,WACRwV,SArDcrH,IACpB,IAAKsE,GAAWrZ,EAAS,OACzB,MAAM,UAAEqc,EAAS,aAAE0T,EAAY,aAAEC,GAAiBjb,EAAEqF,cAChD2V,GAAgB1T,EAAY,KAAO2T,GANvCvkB,EAAe6U,GAAcA,EAAY,IAyDnC9Z,UAAWR,EAAQ0oB,WAEnB1pC,IAAA6b,cAACsG,IAAI,CACHuC,UAAU,MACV8f,aAAW,uBACXzb,MAAO,CAAEuH,SAAU,MAElB7S,mBAAQjN,IACPA,EAAM4R,IAAI,CAACkjB,EAAM1nB,IACf5d,IAAA6b,cAACyG,IAAQ,CACP1E,IAAKA,EACLmL,MAAO,CACLyT,WAAY5e,EAAM,IAAM,EAAI,UAAY,QACxCksB,OAAQ,iBACR3P,OAAQ,WAEVrY,QAASA,KAAM6pB,OArDT39B,EAqDsBs3B,OApD1CzhC,OAAOC,SAASkyB,KAAI,UAAA90B,OAAa8M,EAAK6e,OADlB7e,OAsDNwW,QAAM,GAENxkB,IAAA6b,cAAC0G,IAAY,CACXC,QAAS8iB,EAAKzE,YACdpe,UACEziB,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACE5oB,IAAA6b,cAAC8O,IAAU,CAACjG,UAAU,OAAOqE,MAAO,CAAEE,SAAU,KAC7CoiB,EAAiB/F,EAAK7qB,YAEzBza,IAAA6b,cAAA,QAAMkN,MAAO,CAAEpI,UAAW,EAAGZ,QAAS,gBAMjDtC,mBAAQjN,IAA2B,IAAjBA,EAAMzO,QACvB/B,IAAA6b,cAAC0G,IAAY,CAACC,QAASzK,KAAKkB,EAAE,uCClP5C,MAEM2G,GAAYC,YAAYnG,IAAK,CACjCoG,KAAM,CACJC,QAAS,OACTW,OAAQ,QACR,CAAChH,EAAMggB,YAAYC,KAAK,OAAQ,CAC9BjZ,OAAQ,sBAEVE,gBAAiBlH,EAAM8f,QAAQoS,gBAC/B,+BAAgC,CAC9B3+B,OAAOyM,EAAMwX,KAAmB,QAErCtQ,gBAAgC,UAAflH,EAAMwX,KAAmBxX,EAAM8f,QAAQhX,QAAQqpB,KAAO,WAGpE,0CAA2C,CACzC5+B,MAAsB,UAAfyM,EAAMwX,KAAmB,UAAY,SAGhDiI,OAAQ,CACN/Y,MAAO,QAET0rB,QAAS,CACPha,aAAc,GACd7kB,MAAOyM,EAAM8f,QAAQuS,KAAKF,KAC1BrP,WAAY9iB,EAAM8f,QAAQwS,eAE5BC,YAAa,CACXlsB,QAAS,OACTE,WAAY,SACZ0T,eAAgB,gBAChB/I,QAAS,QACToG,UAAW,OACX,CAACtX,EAAMggB,YAAYC,KAAK,OAAQ,CAC9BjZ,OAAQ,SAGZ9P,OAAQ,CACN+hB,OAAQjZ,EAAMiZ,OAAOwW,OAAS,EAC9B5O,WAAY7gB,EAAM8gB,YAAY1gB,OAAO,CAAC,QAAS,UAAW,CACxD2gB,OAAQ/gB,EAAM8gB,YAAYC,OAAOC,MACjCpc,SAAU5E,EAAM8gB,YAAYlc,SAASqc,iBAGzCuR,YAAa,CACXhhB,WA9CgB,IA+ChB9K,MAAM,eAADlf,OA/CW,IA+CiB,OACjCq5B,WAAY7gB,EAAM8gB,YAAY1gB,OAAO,CAAC,QAAS,UAAW,CACxD2gB,OAAQ/gB,EAAM8gB,YAAYC,OAAOC,MACjCpc,SAAU5E,EAAM8gB,YAAYlc,SAASwc,iBAEvC,CAACphB,EAAMggB,YAAYC,KAAK,OAAQ,CAC9B5Z,QAAS,SAGbosB,WAAY,CACV3rB,YAAa,IAEf4rB,iBAAkB,CAChBrsB,QAAS,QAEXza,MAAO,CACLib,SAAU,EACV0I,SAAU,GACVhc,MAAO,SAETo/B,YAAa,CACXrjB,SAAU,WACV4I,WAAY,SACZxR,MAtEgB,IAuEhBma,WAAY7gB,EAAM8gB,YAAY1gB,OAAO,QAAS,CAC5C2gB,OAAQ/gB,EAAM8gB,YAAYC,OAAOC,MACjCpc,SAAU5E,EAAM8gB,YAAYlc,SAASwc,iBAEvC,CAACphB,EAAMggB,YAAYC,KAAK,OAAQ,CAC9BvZ,MAAO,WAEN1G,EAAM4yB,qBAEXC,iBAAkB,CAChBC,UAAW,SACXjS,WAAY7gB,EAAM8gB,YAAY1gB,OAAO,QAAS,CAC5C2gB,OAAQ/gB,EAAM8gB,YAAYC,OAAOC,MACjCpc,SAAU5E,EAAM8gB,YAAYlc,SAASqc,gBAEvCva,MAAO1G,EAAMuoB,QAAQ,GACrB,CAACvoB,EAAMggB,YAAY+S,GAAG,OAAQ,CAC5BrsB,MAAO1G,EAAMuoB,QAAQ,IAEvB,CAACvoB,EAAMggB,YAAYC,KAAK,OAAQ,CAC9BvZ,MAAO,SAGXssB,aAAc,CACZ1b,UAAW,QAEb9oB,QAAS,CACPmqB,KAAM,EACNtB,SAAU,QAGZsU,UAAW,CACTtT,WAAYrY,EAAMuoB,QAAQ,GAC1BjQ,cAAetY,EAAMuoB,QAAQ,IAE/B4C,MAAO,CACLja,QAASlR,EAAMuoB,QAAQ,GACvBliB,QAAS,OACTgR,SAAU,OACV/Q,cAAe,UAEjB2sB,oBAAqB,CACnBta,KAAM,EACNzH,QAASlR,EAAMuoB,QAAQ,GACvB5Q,UAAW,YACR3X,EAAM4X,iBAEX6Q,qBAAsB,GAGtByK,KAAM,CACJxsB,MAAO,MACPM,OAAQ,OACRgR,SAAU,IACV,CAAChY,EAAMggB,YAAYC,KAAK,OAAQ,CAC9BvZ,MAAO,OACPM,OAAQ,MACRgR,SAAU,KAEZkb,KAAMlzB,EAAMkzB,SAuSDC,OAnSQlxB,IAAgC,IAADmxB,EAAAC,EAAAC,EAAAC,EAAA,IAA9B,SAAErxB,EAAQ,YAAEsxB,GAAavxB,EAC/C,MAAMqF,EAAUpB,MACTutB,EAAeC,GAAoBlyB,oBAAS,IAC5CkU,EAAUuF,GAAezZ,mBAAS,OAClCgU,EAAUme,GAAenyB,oBAAS,IACnC,aAAEwD,EAAY,QAAE1D,GAAYG,qBAAWyD,KACtC0uB,EAAYtS,GAAiB9f,oBAAS,IACtCqyB,EAAeC,GAAoBtyB,mBAAS,cAE7C,KAAEpK,GAASqK,qBAAWyD,IAEtBlF,EAAQ+zB,eACR,UAAEC,GAAcvyB,qBAAWpb,GAC3B4tC,EAAgBC,YAAcl0B,EAAMggB,YAAY+S,GAAG,QAElDrK,EAAQ8C,GAAahqB,mBAASnY,aAAaC,QAAQ,WAAa,IAEjE,aAAEkoC,GAAiBD,KAkDnB5qC,EAAgB8a,qBAAWlW,GAEjCmW,oBAAU,KACJkc,SAAS3pB,KAAKssB,YAAc,MAC9Be,GAAc,IAEf,IAEH5f,oBAAU,KACJkc,SAAS3pB,KAAKssB,YAAc,IAC9BuT,EAAiB,aAEjBA,EAAiB,cAElB,CAACF,IAEJlyB,oBAAU,KACR,MAAMxY,EAAYG,aAAaC,QAAQ,aACjCF,EAASC,aAAaC,QAAQ,UAE9B8B,EAASzE,EAAcsC,UAAUC,GAEvCkC,EAAOnE,GAAG,WAADO,OAAY0B,EAAS,SAAUiW,IAClCA,EAAK/H,KAAKnG,MAAQ7H,IACpByV,GAAW,+CACX3U,WAAW,KACTb,aAAa0D,QACb5C,OAAOC,SAASC,UACf,QAIPe,EAAO7D,KAAK,cACZ,MAAM4sC,EAAWC,YAAY,KAC3BhpC,EAAO7D,KAAK,eACX,KAEH,MAAO,KACL6D,EAAOzC,aACP0rC,cAAcF,KAEf,CAACxtC,IAEJ,MAKM2tC,EAAkBA,KACtBrZ,EAAY,MACZ0Y,GAAY,IAkCd,OAAIryB,EACKhb,IAAA6b,cAACutB,GAAe,MAIvBppC,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQlB,MACtB9f,IAAA6b,cAACoyB,IAAM,CACLrsB,QAAS2rB,EACT/rB,UAAW8rB,EAAatsB,EAAQqrB,YAAcrrB,EAAQurB,iBACtDvrB,QAAS,CACP6jB,MAAO1N,YACLnW,EAAQqrB,aACPiB,GAActsB,EAAQurB,mBAG3B39B,KAAM0+B,GAENttC,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQirB,aACtBjsC,IAAA6b,cAAA,OAAK2U,IAAKoc,KAAMprB,UAAWR,EAAQ4rB,KAAMze,IAAI,SAC7CnuB,IAAA6b,cAAC+G,IAAU,CAACd,QAASA,IAAMkZ,GAAesS,IACxCttC,IAAA6b,cAACqyB,IAAe,QAGpBluC,IAAA6b,cAACgN,IAAO,MACR7oB,IAAA6b,cAACsG,IAAI,CAACX,UAAWR,EAAQ2rB,qBACvB3sC,IAAA6b,cAACoJ,GAAa,CAACC,YA9CHA,KACdoS,SAAS3pB,KAAKssB,YAAc,KAC9Be,GAAc,IA4C+B7V,WAAYmoB,KAEvDttC,IAAA6b,cAACgN,IAAO,OAEV7oB,IAAA6b,cAACyrB,GAAS,CACR14B,KAAMu+B,EACN9e,QAASA,IAAM+e,GAAiB,GAChCtqC,OAAY,OAAJgO,QAAI,IAAJA,OAAI,EAAJA,EAAMnG,KAEhB3K,IAAA6b,cAACsyB,IAAM,CACLnlB,SAAS,WACTxH,UAAW2V,YAAKnW,EAAQpQ,OAAQ08B,GAActsB,EAAQkrB,aACtDj/B,MAAM,WAENjN,IAAA6b,cAACuyB,IAAO,CAACxsB,QAAQ,QAAQJ,UAAWR,EAAQ8qB,SAC1C9rC,IAAA6b,cAAC+G,IAAU,CACTyrB,KAAK,QACLzsB,QAAQ,YACR4iB,aAAW,cACX1iB,QAASA,IAAMkZ,GAAesS,GAC9B9rB,UAAW2V,YACTnW,EAAQmrB,WACRmB,GAActsB,EAAQorB,mBAGxBpsC,IAAA6b,cAACyyB,IAAQ,OAGXtuC,IAAA6b,cAAC8O,IAAU,CACTjG,UAAU,KACV9C,QAAQ,KACR3U,MAAM,UACNgsB,QAAM,EACNzX,UAAWR,EAAQ1b,OAGlBqoC,GAAmC,WAAd,OAAJ78B,QAAI,IAAJA,OAAI,EAAJA,EAAMxD,WAA2B,OAAJwD,QAAI,IAAJA,GAAa,QAATg8B,EAAJh8B,EAAMyB,eAAO,IAAAu6B,OAAT,EAAJA,EAAe/uB,SAC5D/d,IAAA6b,cAAA7b,IAAA4oB,SAAA,KAAE,UACI5oB,IAAA6b,cAAA,SAAI/K,EAAKnL,MAAU,iBAAa3F,IAAA6b,cAAA,SAAQ,OAAJ/K,QAAI,IAAJA,GAAa,QAATi8B,EAAJj8B,EAAMyB,eAAO,IAAAw6B,OAAT,EAAJA,EAAepnC,MAAS,mBAAculC,EAAiB,OAAJp6B,QAAI,IAAJA,GAAa,QAATk8B,EAAJl8B,EAAMyB,eAAO,IAAAy6B,OAAT,EAAJA,EAAejvB,SAAS,KAGrH/d,IAAA6b,cAAA7b,IAAA4oB,SAAA,KAAE,WACK5oB,IAAA6b,cAAA,SAAI/K,EAAKnL,MAAU,iBAAa3F,IAAA6b,cAAA,SAAQ,OAAJ/K,QAAI,IAAJA,GAAa,QAATm8B,EAAJn8B,EAAMyB,eAAO,IAAA06B,OAAT,EAAJA,EAAetnC,MAAS,MAKvE3F,IAAA6b,cAAC+G,IAAU,CAACyrB,KAAK,QAAQvsB,QA5ET5hB,KACtBwtC,EAAUxtC,oBA4Ec,SAAfwZ,EAAMwX,KAAkBlxB,IAAA6b,cAAC0yB,KAAe,CAACxlB,MAAO,CAAE9b,MAAO,WAAgBjN,IAAA6b,cAAC2yB,KAAe,CAACzlB,MAAO,CAAE9b,MAAO,YAG7GjN,IAAA6b,cAACopB,GAAmB,CAClBC,UAAWA,EACX9C,OAAQA,IAGVpiC,IAAA6b,cAAC+G,IAAU,CACTd,QAjGgB2sB,KACxB5qC,OAAOC,SAASC,QAAO,IAiGfygC,aAAYzsB,KAAKkB,EAAE,6BACnBhM,MAAM,WAENjN,IAAA6b,cAAC6yB,IAAU,CAAC3lB,MAAO,CAAE9b,MAAO,YAG7B6D,EAAKnG,IAAM3K,IAAA6b,cAACsmB,GAAoB,CAACC,OAAQA,IAE1CpiC,IAAA6b,cAAC0uB,GAAoB,MAErBvqC,IAAA6b,cAAC0vB,GAAW,MAEZvrC,IAAA6b,cAAA,WACE7b,IAAA6b,cAAC+G,IAAU,CACT4hB,aAAW,0BACXmK,gBAAc,cACdC,gBAAc,OACd9sB,QA7IQ3gB,IAClBwzB,EAAYxzB,EAAMi0B,eAClBiY,GAAY,IA4IFzrB,QAAQ,YACRmH,MAAO,CAAE9b,MAAO,UAEhBjN,IAAA6b,cAACgzB,IAAa,OAEhB7uC,IAAA6b,cAAC0T,IAAI,CACH5kB,GAAG,cACHykB,SAAUA,EACVI,mBAAoB,KACpBC,aAAc,CACZC,SAAU,SACVC,WAAY,SAEdC,gBAAiB,CACfF,SAAU,MACVC,WAAY,SAEd/gB,KAAMsgB,EACNb,QAAS2f,GAEThuC,IAAA6b,cAACiU,IAAQ,CAAChO,QAxJMgtB,KAC1B1B,GAAiB,GACjBY,MAuJaj2B,KAAKkB,EAAE,mCAEVjZ,IAAA6b,cAACiU,IAAQ,CAAChO,QAtJIitB,KACxBf,IACAtvB,MAqJa3G,KAAKkB,EAAE,sCAMlBjZ,IAAA6b,cAAA,QAAM2F,UAAWR,EAAQ9Y,SACvBlI,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQ0rB,eAEvB9wB,GAAsB,Q,6NCvc/B,MAAMgE,GAAYC,YAAWnG,IAAK,CACjCs1B,WAAY,CACX/lB,SAAU,OACVhc,MAAO2zB,KAAK,KACZhgB,gBAAiB,UACjBR,MAAO1G,EAAMuoB,QAAQ,GACrBvhB,OAAQhH,EAAMuoB,QAAQ,IAEvBgN,UAAW,CACVhmB,SAAU,OACVhc,MAAOyM,EAAM8f,QAAQllB,KAAKkO,SAE3B0sB,aAAc,CACbjiC,MAAO2zB,KAAK,KACZ3X,SAAU,WAIG,SAASkmB,GAAYtrB,GAChC,MAAM,KAAEC,EAAI,MAAExe,EAAK,MAAEyW,EAAK,QAAEf,GAAY6I,EACrC7C,EAAUpB,KACb,OAAU5E,EAoBJhb,IAAA6b,cAACud,KAAQ,CAACxX,QAAQ,OAAOlB,OAAQ,KAnBnC1gB,IAAA6b,cAACgd,KAAI,KACD74B,IAAA6b,cAACkd,KAAU,CACPI,OACIn5B,IAAA6b,cAACyd,KAAM,CAAC9X,UAAWR,EAAQguB,YACtBlrB,GAGTxe,MACItF,IAAA6b,cAAC8O,IAAU,CAAC/I,QAAQ,KAAK8C,UAAU,KAAKlD,UAAWR,EAAQiuB,WACrD3pC,GAGVi0B,UACIv5B,IAAA6b,cAAC8O,IAAU,CAAC/I,QAAQ,YAAY8C,UAAU,IAAIlD,UAAWR,EAAQkuB,cAC3DnzB,M,gHCxB1B,MAAM6D,GAAYC,YAAWnG,IAAK,CACjC/Y,GAAI,CACHsM,MAAO8d,KAAM,KACb9B,SAAU,QAEX5nB,IAAK,CACJ4L,MAAOmiC,KAAI,KACXnmB,SAAU,QAERomB,QAAS,CACLlV,OAAQ,cAIT,SAASmV,GAAS3zB,GAAe,IAAb,OAAE4zB,GAAQ5zB,EACjC,MAAM6zB,EAAyB,OAAXD,EAAkB,EAAI/wB,KAAKixB,MAAMF,GACrD,OAAOvvC,IAAA6b,cAAC6zB,KAAM,CACVC,aAAcH,EACd5J,IAAK,EACLgK,UAAQ,IAID,SAASC,GAAsBhsB,GAC1C,MAAM,QAAE7I,EAAO,WAAE80B,GAAejsB,EAC7B7C,EAAUpB,KAwBb,OAAU5E,EAgCJhb,IAAA6b,cAACud,KAAQ,CAACxX,QAAQ,OAAOlB,OAAQ,MA/BnC1gB,IAAA6b,cAACk0B,KAAc,CAACrrB,UAAWomB,MACvB9qC,IAAA6b,cAACm0B,KAAK,KACFhwC,IAAA6b,cAACo0B,KAAS,KACNjwC,IAAA6b,cAACq0B,KAAQ,KACLlwC,IAAA6b,cAACs0B,KAAS,KAAC,QACXnwC,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAAS,oBAC1BpwC,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAAS,uBAC1BpwC,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAAS,oBAGlCpwC,IAAA6b,cAACw0B,KAAS,KAhCXP,EAAW1tB,IAAI,CAACgK,EAAGkkB,KACtBtwC,WAAA6b,cAACq0B,KAAQ,CAACtyB,IAAK0yB,GACXtwC,IAAA6b,cAACs0B,KAAS,KAAE/jB,EAAEzmB,MACd3F,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,SAAS9qC,MAAM,yDAAyDkc,UAAWR,EAAQquB,SACxGrvC,IAAA6b,cAACyzB,GAAS,CAACC,OAAQnjB,EAAEmjB,UAEzBvvC,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,WAWZG,EAXiCnkB,EAAEokB,eAY/C3yB,MAAS4yB,QAAQ,OAAO9oC,IAAI4oC,EAAS,WAAWtyB,OAAO,iBAXhDje,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACXhkB,EAAEskB,OACA1wC,IAAA6b,cAAC80B,KAAe,CAACnvB,UAAWR,EAAQrgB,KAClCX,IAAA6b,cAAC+0B,KAAS,CAACpvB,UAAWR,EAAQ3f,QAOvD,IAAoBkvC,OC/CNM,OAhBMA,KAWV,CACHlzB,KAVStC,UACT,MAAM,KAAExC,SAAee,GAAI2C,QAAQ,CAC/B4G,IAAI,aACJC,OAAQ,MACRhiB,WAEJ,OAAOyX,KCkCAi4B,OAvCKn1B,IAA4D,IAA3D,YAAE+K,EAAW,WAAEF,EAAU,KAAEpU,EAAI,UAAE2+B,EAAS,QAAEC,GAASr1B,EACtE,MAAOX,EAASC,GAAcC,oBAAS,IAChCmZ,EAASC,GAAcpZ,oBAAS,IAChClR,EAAUinC,GAAe/1B,mBAAS,KAClCg2B,EAAOC,GAAYj2B,mBAAS,GAgCnC,OA9BAE,oBAAU,KACNH,GAAW,GACX,MAAMuM,EAAkB5jB,WAAW,KACTyX,WAClB,IACI,MAAM,KAAExC,SAAee,GAAI0B,IAAI,YAAa,CACxCla,OAAQ,CACJslB,cACAF,aACApU,OACA2+B,YACAC,aAGRC,EAAYp4B,EAAK7O,UAEjBsqB,EAAWzb,EAAKwb,SAChB8c,EAASt4B,EAAKq4B,OACdj2B,GAAW,GACb,MAAOzC,GACLyC,GAAW,GACX1C,GAAWC,KAInB44B,IACD,KACH,MAAO,IAAM1pB,aAAaF,IAC3B,CAACd,EAAaF,EAAYpU,EAAM2+B,EAAWC,IAEvC,CAAEhnC,WAAUgR,UAASqZ,UAAS6c,UCJ1BG,I,gHCdGxxB,YAAYnG,IAAK,CAC/B2rB,UAAW,CACPtT,WAAYrY,EAAMuoB,QAAQ,GAC1BjQ,cAAetY,EAAMkR,QACrBzB,YAAazP,EAAMuoB,QAAQ,GAC3BnQ,aAAcpY,EAAMuoB,QAAQ,OAIpCqP,KAAQrrC,SACJsrC,KACAC,KACAC,KACAC,KACAxR,KACAyR,KACAC,MAGG,MAAM9lC,GAAU,CACnB+lC,YAAY,EACZC,QAAS,CACLC,OAAQ,CACJ/oB,SAAU,MACVjJ,SAAS,GAEbza,MAAO,CACHya,SAAS,EACTzL,KAAM,0BACN0U,SAAU,QAEdgpB,WAAY,CACRjyB,SAAS,EACTkyB,OAAQ,QACRC,QAAS,GACT9B,MAAO,QACPnjC,MAAO,OACPklC,gBAAiB,OACjBC,gBAAiB,EACjBC,KAAM,CACF/mB,KAAM,GACNgnB,OAAQ,WAOXC,GAAYA,KAErB,MAAOC,EAAaC,GAAkBv3B,mBAAS,IAAIxX,OAC5CgvC,EAAWC,GAAgBz3B,mBAAS,IAAIxX,OACxCkvC,EAAaC,GAAkB33B,mBAAS,CAAErC,KAAM,KAEjDjW,EAAYG,aAAaC,QAAQ,aAEvCoY,oBAAU,KACN03B,KACD,IAEH,MAAMC,EAAa,CAEfC,OAAQJ,IAA0B,OAAXA,QAAW,IAAXA,OAAW,EAAXA,EAAa/5B,KAAK9W,QAAS,IAAgB,OAAX6wC,QAAW,IAAXA,OAAW,EAAXA,EAAa/5B,KAAKuJ,IAAKkjB,GAASA,EAAK2N,OAC5FC,SAAU,CACN,CACIr6B,MAAiB,OAAX+5B,QAAW,IAAXA,OAAW,EAAXA,EAAa/5B,KAAK9W,QAAS,IAAgB,OAAX6wC,QAAW,IAAXA,OAAW,EAAXA,EAAa/5B,KAAKuJ,IAAI,CAACkjB,EAAMjjB,IACxDijB,EAAK6N,aAEhBvyB,gBAAiB,aAMvBkyB,EAA8Bz3B,UAChC,IAEI,MAAM,KAAExC,SAAee,GAAI0B,IAAI,uCAADpa,OAAwC+c,aAAOu0B,EAAa,cAAa,eAAAtxC,OAAc+c,aAAOy0B,EAAW,cAAa,eAAAxxC,OAAc0B,IAClKiwC,EAAeh6B,GACjB,MAAOC,GACLE,IAAMF,MAAM,iDAIpB,OACI9Y,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACI5oB,IAAA6b,cAAC8O,IAAU,CAACjG,UAAU,KAAK9C,QAAQ,KAAK3U,MAAM,UAAUyjB,cAAY,GAAC,sCAIrE1wB,IAAA6b,cAACu3B,KAAK,CAACC,UAAW,MAAOpR,QAAS,EAAGhiB,WAAY,SAAUqzB,GAAI,CAAEC,GAAI,IAEjEvzC,IAAA6b,cAAC23B,KAAoB,CAACC,YAAaC,KAAgBC,cAAeC,MAC9D5zC,IAAA6b,cAACg4B,KAAU,CACP93B,MAAOy2B,EACP9wB,SAAWoyB,IAAerB,EAAeqB,IACzChiC,MAAM,SACNiiC,YAAc3yC,GAAWpB,IAAA6b,cAAC4F,KAAS6C,OAAAC,OAAA,CAACsM,WAAS,GAAKzvB,EAAM,CAAEkyC,GAAI,CAAElzB,MAAO,cAK/EpgB,IAAA6b,cAAC23B,KAAoB,CAACC,YAAaC,KAAgBC,cAAeC,MAC9D5zC,IAAA6b,cAACg4B,KAAU,CACP93B,MAAO22B,EACPhxB,SAAWoyB,IAAenB,EAAamB,IACvChiC,MAAM,MACNiiC,YAAc3yC,GAAWpB,IAAA6b,cAAC4F,KAAS6C,OAAAC,OAAA,CAACsM,WAAS,GAAKzvB,EAAM,CAAEkyC,GAAI,CAAElzB,MAAO,cAI/EpgB,IAAA6b,cAACgG,KAAM,CAACL,UAAU,cAAcM,QAASgxB,EAA6BlxB,QAAQ,aAAY,YAG9F5hB,IAAA6b,cAACm4B,KAAG,CAACloC,QAASA,GAAS+M,KAAMk6B,EAAYhqB,MAAO,CAAE2I,SAAU,OAAQqQ,UAAW,aCpH3FuP,KAAQrrC,SACJsrC,KACAC,KACAC,KACAC,KACAxR,KACAyR,MAGG,MAAM7lC,GAAU,CACnB+lC,YAAY,EACZC,QAAS,CACLC,OAAQ,CACJ/oB,SAAU,MACVjJ,SAAS,GAEbza,MAAO,CACHya,SAAS,EACTzL,KAAM,0BACN0U,SAAU,QAEdgpB,WAAY,CACRjyB,SAAS,EACTkyB,OAAQ,QACRC,QAAS,GACT9B,MAAO,QACPnjC,MAAO,OACPklC,gBAAiB,OACjBC,gBAAiB,EACjBC,KAAM,CACF/mB,KAAM,GACNgnB,OAAQ,WAOX2B,GAAaA,KAEtB,MAAOzB,EAAaC,GAAkBv3B,mBAAS,IAAIxX,OAC5CgvC,EAAWC,GAAgBz3B,mBAAS,IAAIxX,OACxCkvC,EAAaC,GAAkB33B,mBAAS,CAAErC,KAAM,GAAIq4B,MAAO,IAE5DtuC,EAAYG,aAAaC,QAAQ,aAEvCoY,oBAAU,KACN03B,KACD,IAEH,MAAMC,EAAa,CAEfC,OAAQJ,IAA0B,OAAXA,QAAW,IAAXA,OAAW,EAAXA,EAAa/5B,KAAK9W,QAAS,IAAgB,OAAX6wC,QAAW,IAAXA,OAAW,EAAXA,EAAa/5B,KAAKuJ,IAAKkjB,GAAUA,EAAK4O,eAAe,WAAU,OAAAhzC,OAAUokC,EAAK6O,QAAO,WAAAjzC,OAAUokC,EAAK6O,QAAO,OAAQ7O,EAAKzsB,OAC/Kq6B,SAAU,CACN,CAEIr6B,MAAiB,OAAX+5B,QAAW,IAAXA,OAAW,EAAXA,EAAa/5B,KAAK9W,QAAS,IAAgB,OAAX6wC,QAAW,IAAXA,OAAW,EAAXA,EAAa/5B,KAAKuJ,IAAI,CAACkjB,EAAMjjB,IACxDijB,EAAK8O,QAEhBxzB,gBAAiB,aAKvBkyB,EAA8Bz3B,UAChC,IACI,MAAM,KAAExC,SAAee,GAAI0B,IAAI,qCAADpa,OAAsC+c,aAAOu0B,EAAa,cAAa,eAAAtxC,OAAc+c,aAAOy0B,EAAW,cAAa,eAAAxxC,OAAc0B,IAChKiwC,EAAeh6B,GACjB,MAAOC,GACLE,IAAMF,MAAM,kDAIpB,OACI9Y,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACI5oB,IAAA6b,cAAC8O,IAAU,CAACjG,UAAU,KAAK9C,QAAQ,KAAK3U,MAAM,UAAUyjB,cAAY,GAAC,UAC9C,OAAXkiB,QAAW,IAAXA,OAAW,EAAXA,EAAa1B,MAAM,KAG/BlxC,IAAA6b,cAACu3B,KAAK,CAACC,UAAW,MAAOpR,QAAS,EAAGhiB,WAAY,SAAUqzB,GAAI,CAAEC,GAAI,IAEjEvzC,IAAA6b,cAAC23B,KAAoB,CAACC,YAAaC,KAAgBC,cAAeC,MAC9D5zC,IAAA6b,cAACg4B,KAAU,CACP93B,MAAOy2B,EACP9wB,SAAWoyB,IAAerB,EAAeqB,IACzChiC,MAAM,SACNiiC,YAAc3yC,GAAWpB,IAAA6b,cAAC4F,KAAS6C,OAAAC,OAAA,CAACsM,WAAS,GAAKzvB,EAAM,CAAEkyC,GAAI,CAAElzB,MAAO,cAK/EpgB,IAAA6b,cAAC23B,KAAoB,CAACC,YAAaC,KAAgBC,cAAeC,MAC9D5zC,IAAA6b,cAACg4B,KAAU,CACP93B,MAAO22B,EACPhxB,SAAWoyB,IAAenB,EAAamB,IACvChiC,MAAM,MACNiiC,YAAc3yC,GAAWpB,IAAA6b,cAAC4F,KAAS6C,OAAAC,OAAA,CAACsM,WAAS,GAAKzvB,EAAM,CAAEkyC,GAAI,CAAElzB,MAAO,cAI/EpgB,IAAA6b,cAACgG,KAAM,CAACL,UAAU,cAAcM,QAASgxB,EAA6BlxB,QAAQ,aAAa,YAG/F5hB,IAAA6b,cAACm4B,KAAG,CAACloC,QAASA,GAAS+M,KAAMk6B,EAAYhqB,MAAO,CAAE2I,SAAU,OAAQqQ,UAAW,aCpErFniB,GAAYC,YAAYnG,IAAK,CACjC2rB,UAAW,CACTtT,WAAYrY,EAAMuoB,QAAQ,GAC1BjQ,cAAetY,EAAMkR,QACrBzB,YAAazP,EAAMuoB,QAAQ,GAC3BnQ,aAAcpY,EAAMuoB,QAAQ,IAE9BoS,iBAAkB,CAChBzpB,QAASlR,EAAMuoB,QAAQ,GACvBliB,QAAS,OACTC,cAAe,SACfU,OAAQ,IACR2Q,UAAW,UACR3X,EAAM4X,iBAEX0d,WAAY,CACV/lB,SAAU,OACVhc,MAAO2zB,KAAK,KACZhgB,gBAAiB,UACjBR,MAAO1G,EAAMuoB,QAAQ,GACrBvhB,OAAQhH,EAAMuoB,QAAQ,IAExBgN,UAAW,CACThmB,SAAU,OACVhc,MAAOuzB,KAAK,MAEd0O,aAAc,CACZjiC,MAAO2zB,KAAK,KACZ3X,SAAU,QAEZqrB,WAAY,CACVprB,UAAW,SAEb2H,UAAW,CACTzQ,MAAO,QAETm0B,gBAAiB,CACfn0B,MAAO,OACP8I,UAAW,QAEbsrB,gBAAiB,CACfp0B,MAAO,OACPM,OAAQ,qBACRopB,OAAQ,QAEVzE,UAAW,CACTtT,WAAYrY,EAAMuoB,QAAQ,GAC1BjQ,cAAetY,EAAMuoB,QAAQ,IAE/BoS,iBAAkB,CAChBzpB,QAASlR,EAAMuoB,QAAQ,GACvBliB,QAAS,OACTgR,SAAU,OACV/Q,cAAe,SACfU,OAAQ,KAEV+zB,uBAAwB,CACtB7pB,QAASlR,EAAMuoB,QAAQ,GACvBliB,QAAS,OACTgR,SAAU,OACV/Q,cAAe,SACfU,OAAQ,KAEVg0B,yBAA0B,CACxB9pB,QAASlR,EAAMuoB,QAAQ,GACvBliB,QAAS,OACTgR,SAAU,OACV/Q,cAAe,SACfU,OAAQ,QAEVi0B,MAAO,CACL/pB,QAASlR,EAAMuoB,QAAQ,GACvBliB,QAAS,OACTgR,SAAU,OACV/Q,cAAe,SACfU,OAAQ,OAGRE,gBAAwC,SAAvBlH,EAAM8f,QAAQ5uB,KAAkB8O,EAAM8f,QAAQob,UAAU/I,KAAOnyB,EAAM8f,QAAQhX,QAAQqpB,KACtG5+B,MAAO,QAET4nC,MAAO,CACLjqB,QAASlR,EAAMuoB,QAAQ,GACvBliB,QAAS,OACTgR,SAAU,OACV/Q,cAAe,SACfU,OAAQ,OAGRE,gBAAwC,SAAvBlH,EAAM8f,QAAQ5uB,KAAkB8O,EAAM8f,QAAQob,UAAU/I,KAAOnyB,EAAM8f,QAAQhX,QAAQqpB,KACtG5+B,MAAO,QAET6nC,MAAO,CACLlqB,QAASlR,EAAMuoB,QAAQ,GACvBliB,QAAS,OACTgR,SAAU,OACV/Q,cAAe,SACfU,OAAQ,OAERE,gBAAwC,SAAvBlH,EAAM8f,QAAQ5uB,KAAkB8O,EAAM8f,QAAQob,UAAU/I,KAAOnyB,EAAM8f,QAAQhX,QAAQqpB,KACtG5+B,MAAO,QAET8nC,MAAO,CACLnqB,QAASlR,EAAMuoB,QAAQ,GACvBliB,QAAS,OACTgR,SAAU,OACV/Q,cAAe,SACfU,OAAQ,OAERE,gBAAwC,SAAvBlH,EAAM8f,QAAQ5uB,KAAkB8O,EAAM8f,QAAQob,UAAU/I,KAAOnyB,EAAM8f,QAAQhX,QAAQqpB,KACtG5+B,MAAO,QAET+nC,MAAO,CACLpqB,QAASlR,EAAMuoB,QAAQ,GACvBliB,QAAS,OACTgR,SAAU,OACV/Q,cAAe,SACfU,OAAQ,OAERE,gBAAwC,SAAvBlH,EAAM8f,QAAQ5uB,KAAkB8O,EAAM8f,QAAQob,UAAU/I,KAAOnyB,EAAM8f,QAAQhX,QAAQqpB,KACtG5+B,MAAO,QAETgoC,MAAO,CACLrqB,QAASlR,EAAMuoB,QAAQ,GACvBliB,QAAS,OACTgR,SAAU,OACV/Q,cAAe,SACfU,OAAQ,OAERE,gBAAwC,SAAvBlH,EAAM8f,QAAQ5uB,KAAkB8O,EAAM8f,QAAQob,UAAU/I,KAAOnyB,EAAM8f,QAAQhX,QAAQqpB,KACtG5+B,MAAO,QAETioC,MAAO,CACLtqB,QAASlR,EAAMuoB,QAAQ,GACvBliB,QAAS,OACTgR,SAAU,OACV/Q,cAAe,SACfU,OAAQ,OAERE,gBAAwC,SAAvBlH,EAAM8f,QAAQ5uB,KAAkB8O,EAAM8f,QAAQob,UAAU/I,KAAOnyB,EAAM8f,QAAQhX,QAAQqpB,KACtG5+B,MAAO,QAETkoC,MAAO,CACLvqB,QAASlR,EAAMuoB,QAAQ,GACvBliB,QAAS,OACTgR,SAAU,OACV/Q,cAAe,SACfU,OAAQ,OAERE,gBAAwC,SAAvBlH,EAAM8f,QAAQ5uB,KAAkB8O,EAAM8f,QAAQob,UAAU/I,KAAOnyB,EAAM8f,QAAQhX,QAAQqpB,KACtG5+B,MAAO,QAETmoC,MAAO,CACLxqB,QAASlR,EAAMuoB,QAAQ,GACvBliB,QAAS,OACTgR,SAAU,OACV/Q,cAAe,SACfU,OAAQ,OAERE,gBAAwC,SAAvBlH,EAAM8f,QAAQ5uB,KAAkB8O,EAAM8f,QAAQob,UAAU/I,KAAOnyB,EAAM8f,QAAQhX,QAAQqpB,KACtG5+B,MAAO,QAETooC,kBAAmB,CACjBzqB,QAASlR,EAAMuoB,QAAQ,GACvBliB,QAAS,OACTgR,SAAU,OACV/Q,cAAe,aAigBJs1B,OA7fGA,KAChB,MAAMt0B,EAAUpB,MACT21B,EAAUC,GAAet6B,mBAAS,KAClC40B,EAAY2F,GAAiBv6B,mBAAS,KACtCw6B,EAAQC,GAAaz6B,mBAAS,IAC9B06B,EAAYC,GAAiB36B,mBAAS,IACtC46B,EAAUC,GAAe76B,mBAAS2C,IAAO,IAAK,KAAKI,OAAO,gBAC1D+3B,EAAQC,GAAa/6B,mBAAS2C,MAASI,OAAO,gBAC9CjD,EAASC,GAAcC,oBAAS,IACjC,KAAEyC,GAASkzB,KAEjB,IAAIqF,EAAU,IAAIxyC,KACd0O,EAAO8jC,EAAQC,UACfC,EAAQF,EAAQG,WAAa,EAC7BC,EAAOJ,EAAQK,cACZ,GAAAr1C,OAAMo1C,EAAI,KAAAp1C,OAAIk1C,EAAQ,GAAE,IAAAl1C,OAAOk1C,GAAK,GAAAl1C,OAAQk1C,GAAO,KAAAl1C,OAAIkR,EAAO,GAAE,IAAAlR,OAAOkR,GAAI,GAAAlR,OAAQkR,IAE1F,MAAOokC,EAAYC,GAAiBv7B,oBAAS,IACtCw7B,EAAaC,GAAkBz7B,oBAAS,IAEzC,KAAEpK,GAASqK,qBAAWyD,IA+B5BvD,eAAekM,IACbtM,GAAW,GAEX,IAAI7Z,EAAS,GAsBb,GApBIs0C,EAAS,IACXt0C,EAAS,CACPw1C,KAAMlB,KAILmB,mBAAQf,IAAaj4B,IAAOi4B,GAAU1K,YACzChqC,EAAS,IACJA,EACH01C,UAAWj5B,IAAOi4B,GAAU73B,OAAO,iBAIlC44B,mBAAQb,IAAWn4B,IAAOm4B,GAAQ5K,YACrChqC,EAAS,IACJA,EACH21C,QAASl5B,IAAOm4B,GAAQ/3B,OAAO,gBAIA,IAA/BqG,OAAO0yB,KAAK51C,GAAQW,OAGtB,OAFAiX,IAAMF,MAAM,6BACZmC,GAAW,GAIb,MAAMpC,QAAa8E,EAAKvc,GAExBo0C,EAAY38B,EAAK08B,UACb93B,mBAAQ5E,EAAKi3B,YACf2F,EAAc58B,EAAKi3B,YAEnB2F,EAAc,IAGhBx6B,GAAW,GAGb,SAASg8B,EAAW1G,GAClB,OAAO1yB,MACJ4yB,QAAQ,OACR9oC,IAAI4oC,EAAS,WACbtyB,OAAO,eA3ERnN,EAAKb,QAAUa,EAAKb,OAAOlO,OAAS,GACvB+O,EAAKb,OAAOmS,IAAKgZ,GAAMA,EAAEzwB,IAG1CyQ,oBAAU,KAIRxX,WAAW,MAHXyX,uBACQkM,IAGN2vB,IACC,MAEF,IA+IH,OACEl3C,IAAA6b,cAAA,WACE7b,IAAA6b,cAACs7B,KAAS,CAACzlB,SAAS,KAAKlQ,UAAWR,EAAQqkB,WAC1CrlC,IAAA6b,cAACupB,KAAI,CAACC,WAAS,EAACpD,QAAS,EAAGtO,eAAe,YAIzC3zB,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GAAI4R,GAAI,EAAGC,GAAI,GAC5Br3C,IAAA6b,cAACivB,KAAK,CACJtpB,UAAWR,EAAQ2zB,MACnB5rB,MAAO,CAAEgI,SAAU,UACnBumB,UAAW,GAEXt3C,IAAA6b,cAACupB,KAAI,CAACC,WAAS,EAACpD,QAAS,GACvBjiC,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GACbxlC,IAAA6b,cAAC8O,IAAU,CACTjG,UAAU,KACV9C,QAAQ,KACR21B,WAAS,GACV,eAGDv3C,IAAA6b,cAACupB,KAAI,CAACE,MAAI,GACRtlC,IAAA6b,cAAC8O,IAAU,CACTjG,UAAU,KACV9C,QAAQ,MAEP2zB,EAASiC,oBAIhBx3C,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GACbxlC,IAAA6b,cAAC47B,KAAQ,CACP1uB,MAAO,CACLE,SAAU,IACVhc,MAAO,iBASnBjN,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GAAI4R,GAAI,EAAGC,GAAI,GAC5Br3C,IAAA6b,cAACivB,KAAK,CACJtpB,UAAWR,EAAQ6zB,MACnB9rB,MAAO,CAAEgI,SAAU,UACnBumB,UAAW,GAEXt3C,IAAA6b,cAACupB,KAAI,CAACC,WAAS,EAACpD,QAAS,GACvBjiC,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GACbxlC,IAAA6b,cAAC8O,IAAU,CACTjG,UAAU,KACV9C,QAAQ,KACR21B,WAAS,GACV,cAGDv3C,IAAA6b,cAACupB,KAAI,CAACE,MAAI,GACRtlC,IAAA6b,cAAC8O,IAAU,CACTjG,UAAU,KACV9C,QAAQ,MAEP2zB,EAASmC,kBAIhB13C,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GACbxlC,IAAA6b,cAAC87B,KAAkB,CACjB5uB,MAAO,CACLE,SAAU,IACVhc,MAAO,iBAmDnBjN,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GAAI4R,GAAI,EAAGC,GAAI,GAC5Br3C,IAAA6b,cAACivB,KAAK,CACJtpB,UAAWR,EAAQ8zB,MACnB/rB,MAAO,CAAEgI,SAAU,UACnBumB,UAAW,GAEXt3C,IAAA6b,cAACupB,KAAI,CAACC,WAAS,EAACpD,QAAS,GACvBjiC,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GACbxlC,IAAA6b,cAAC8O,IAAU,CACTjG,UAAU,KACV9C,QAAQ,KACR21B,WAAS,GACV,eAGDv3C,IAAA6b,cAACupB,KAAI,CAACE,MAAI,GACRtlC,IAAA6b,cAAC8O,IAAU,CACTjG,UAAU,KACV9C,QAAQ,MAEP2zB,EAASqC,mBAIhB53C,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GACbxlC,IAAA6b,cAAC80B,KAAe,CACd5nB,MAAO,CACLE,SAAU,IACVhc,MAAO,iBASnBjN,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GAAI4R,GAAI,EAAGC,GAAI,GAC5Br3C,IAAA6b,cAACivB,KAAK,CACJtpB,UAAWR,EAAQ+zB,MACnBhsB,MAAO,CAAEgI,SAAU,UACnBumB,UAAW,GAEXt3C,IAAA6b,cAACupB,KAAI,CAACC,WAAS,EAACpD,QAAS,GACvBjiC,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GACbxlC,IAAA6b,cAAC8O,IAAU,CACTjG,UAAU,KACV9C,QAAQ,KACR21B,WAAS,GACV,kBAGDv3C,IAAA6b,cAACupB,KAAI,CAACE,MAAI,GACRtlC,IAAA6b,cAAC8O,IAAU,CACTjG,UAAU,KACV9C,QAAQ,MAnPLi2B,KACrB,IAAIh0B,EAAQ,GACRg0B,IACFh0B,EAAQ,IAEV,MAAM,MAAEqtB,GAAUJ,GAAYjtB,GAC9B,OAAOqtB,GA+OY4G,EAAY,MAInB93C,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GACbxlC,IAAA6b,cAACk8B,KAAY,CACXhvB,MAAO,CACLE,SAAU,IACVhc,MAAO,iBAUnBjN,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GAAI4R,GAAI,EAAGC,GAAI,GAC5Br3C,IAAA6b,cAACivB,KAAK,CACJtpB,UAAWR,EAAQm0B,MACnBpsB,MAAO,CAAEgI,SAAU,UACnBumB,UAAW,GAEXt3C,IAAA6b,cAACupB,KAAI,CAACC,WAAS,EAACpD,QAAS,GACvBjiC,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GACbxlC,IAAA6b,cAAC8O,IAAU,CACTjG,UAAU,KACV9C,QAAQ,KACR21B,WAAS,GACV,oBAGDv3C,IAAA6b,cAACupB,KAAI,CAACE,MAAI,GACRtlC,IAAA6b,cAAC8O,IAAU,CACTjG,UAAU,KACV9C,QAAQ,MAEPq1B,EAAW1B,EAAS/E,mBAI3BxwC,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GACbxlC,IAAA6b,cAACm8B,KAAe,CACdjvB,MAAO,CACLE,SAAU,IACVhc,MAAO,iBASnBjN,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GAAI4R,GAAI,EAAGC,GAAI,GAC5Br3C,IAAA6b,cAACivB,KAAK,CACJtpB,UAAWR,EAAQo0B,MACnBrsB,MAAO,CAAEgI,SAAU,UACnBumB,UAAW,GAEXt3C,IAAA6b,cAACupB,KAAI,CAACC,WAAS,EAACpD,QAAS,GACvBjiC,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GACbxlC,IAAA6b,cAAC8O,IAAU,CACTjG,UAAU,KACV9C,QAAQ,KACR21B,WAAS,GACV,kBAGDv3C,IAAA6b,cAACupB,KAAI,CAACE,MAAI,GACRtlC,IAAA6b,cAAC8O,IAAU,CACTjG,UAAU,KACV9C,QAAQ,MAEPq1B,EAAW1B,EAAS0C,gBAI3Bj4C,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GACbxlC,IAAA6b,cAACq8B,KAAS,CACRnvB,MAAO,CACLE,SAAU,IACVhc,MAAO,iBASnBjN,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GAAI4R,GAAI,EAAGC,GAAI,GAC5Br3C,IAAA6b,cAACwqB,KAAW,CAAC7kB,UAAWR,EAAQuzB,iBAC9Bv0C,IAAA6b,cAACyqB,KAAU,CAAC37B,GAAG,yBAAwB,kBACvC3K,IAAA6b,cAAC2qB,KAAM,CACLsC,QAAQ,wBACR/sB,MAAO65B,EACPl0B,SAAWqO,GA/ZzB1U,eAAsCU,GACpC85B,EAAc95B,GACA,IAAVA,EACF45B,EAAU,IAEVI,EAAY,IACZE,EAAU,KAyZiBkC,CAAuBpoB,EAAEpO,OAAO5F,QAEjD/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,GAAG,mBACpB/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,GAAG,0BAEtB/b,IAAA6b,cAACu8B,KAAc,KAAC,qCAlVP,IAAfxC,EAEA51C,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACE5oB,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GAAI4R,GAAI,EAAGC,GAAI,GAC5Br3C,IAAA6b,cAAC4F,KAAS,CACR3P,MAAM,eACNlH,KAAK,OACLmR,MAAO+5B,EACPp0B,SAAWqO,GAAMgmB,EAAYhmB,EAAEpO,OAAO5F,OACtCyF,UAAWR,EAAQ6P,UACnBwnB,gBAAiB,CACf9R,QAAQ,MAIdvmC,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GAAI4R,GAAI,EAAGC,GAAI,GAC5Br3C,IAAA6b,cAAC4F,KAAS,CACR3P,MAAM,aACNlH,KAAK,OACLmR,MAAOi6B,EACPt0B,SAAWqO,GAAMkmB,EAAUlmB,EAAEpO,OAAO5F,OACpCyF,UAAWR,EAAQ6P,UACnBwnB,gBAAiB,CACf9R,QAAQ,OAQhBvmC,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GAAI4R,GAAI,EAAGC,GAAI,GAC5Br3C,IAAA6b,cAACwqB,KAAW,CAAC7kB,UAAWR,EAAQuzB,iBAC9Bv0C,IAAA6b,cAACyqB,KAAU,CAAC37B,GAAG,yBAAwB,cACvC3K,IAAA6b,cAAC2qB,KAAM,CACLsC,QAAQ,wBACRn+B,GAAG,kBACHoR,MAAO25B,EACPh0B,SAAWqO,GA5HrB1U,eAAkCU,GAClC45B,EAAU55B,GA2HiBu8B,CAAmBvoB,EAAEpO,OAAO5F,QAE7C/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,GAAG,sBACpB/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,GAAG,qBACpB/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,GAAG,qBACpB/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,IAAI,sBACrB/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,IAAI,sBACrB/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,IAAI,sBACrB/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,IAAI,uBAEvB/b,IAAA6b,cAACu8B,KAAc,KAAC,qCAySlBp4C,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GAAIhkB,UAAWR,EAAQszB,YACpCt0C,IAAA6b,cAACsP,GAAiB,CAChBnQ,QAASA,EACT8G,QAASA,IAAMyF,IACf3F,QAAQ,YACR3U,MAAM,WACP,YAMHjN,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,IACZsK,EAAW/tC,OACV/B,IAAA6b,cAACg0B,GAAqB,CACpBC,WAAYA,EACZ90B,QAASA,IAET,MAINhb,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,IACbxlC,IAAA6b,cAACivB,KAAK,CAACtpB,UAAWR,EAAQq0B,mBACxBr1C,IAAA6b,cAAC02B,GAAS,QAKdvyC,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,IACbxlC,IAAA6b,cAACivB,KAAK,CAACtpB,UAAWR,EAAQq0B,mBACxBr1C,IAAA6b,cAACo4B,GAAU,Y,0KC7rBzB,MAAMr0B,GAAYC,YAAWnG,IAAK,CACjCoG,KAAM,CACLC,QAAS,OACT0Q,SAAU,QAEXwY,UAAW,CACVzoB,YAAa9G,EAAMuoB,QAAQ,GAC3B5P,KAAM,GAGPkmB,UAAW,CACVx4B,QAAS,OACT4T,eAAgB,SAChB1T,WAAY,UAGb+mB,WAAY,CACXhe,SAAU,YAGX8B,eAAgB,CACf7d,MAAO8d,KAAM,KACb/B,SAAU,WACVgC,IAAK,MACLC,KAAM,MACNtK,WAAY,GACZuK,YAAa,OAITstB,GAAgBrR,OAAaC,MAAM,CACxCzhC,KAAMwhC,OACJxB,IAAI,EAAG,cACPC,IAAI,GAAI,aACRyB,SAAS,YACXz6B,OAAQu6B,OAAaxB,IAAI,EAAG,cAAcC,IAAI,GAAI,aAClDhgC,MAAOuhC,OAAavhC,MAAM,mBA+NZ6yC,OA5NM98B,IAA0D,IAAzD,KAAE/M,EAAI,QAAEyf,EAAO,UAAEqqB,EAAS,cAAE3Q,EAAa,OAAE4Q,GAAQh9B,EACxE,MAAMqF,EAAUpB,KACVyf,EAAY7K,kBAAO,GAEnB+S,EAAe,CACpB5hC,KAAM,GACNiH,OAAQ,GACRhH,MAAO,KAGDgI,EAASqtB,GAAc/f,mBAASqsB,GAEvCnsB,oBAAU,IACF,KACNikB,EAAUtK,SAAU,GAEnB,IAEH3Z,oBAAU,KACYC,WAOpB,GANI0sB,GACH9M,EAAWK,IACH,IAAKA,KAAcyM,KAIvB2Q,EAEL,IACC,MAAM,KAAE7/B,SAAee,GAAI0B,IAAI,aAADpa,OAAcw3C,IACxCrZ,EAAUtK,UACbh0B,QAAQqB,IAAIyW,GACZoiB,EAAWpiB,IAEX,MAAOL,GACRD,GAAWC,KAIbogC,IACE,CAACF,EAAW9pC,EAAMm5B,IAErB,MAAM5Y,EAAcA,KACnBd,IACA4M,EAAWsM,IAqBZ,OACCvnC,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQlB,MACvB9f,IAAA6b,cAAC0S,KAAM,CAAC3f,KAAMA,EAAMyf,QAASc,EAAauC,SAAS,KAAKyK,OAAO,SAC9Dn8B,IAAA6b,cAAC4S,KAAW,CAAC9jB,GAAG,qBACL,GAAAzJ,OAATw3C,EACK3gC,KAAKkB,EAAE,2BACPlB,KAAKkB,EAAE,4BAEdjZ,IAAA6b,cAACisB,KAAM,CACNC,cAAen6B,EACfo6B,oBAAoB,EACpBC,iBAAkBuQ,GAClBtQ,SAAUA,CAACC,EAAQ1/B,KAClB7E,WAAW,KA/BUyX,WACzB,IACC,GAAIq9B,QACG9+B,GAAIqnB,IAAI,aAAD//B,OAAcw3C,GAAavQ,GACxChZ,QACM,CACN,MAAM,KAAEtW,SAAee,GAAIoD,KAAK,YAAamrB,GACzCwQ,GACHA,EAAO9/B,GAERsW,IAEDnW,IAAMxT,QAAQuS,KAAKkB,EAAE,yBACpB,MAAOT,GACRD,GAAWC,KAkBPqgC,CAAkB1Q,GAClB1/B,EAAQ4/B,eAAc,IACpB,OAGHzc,IAAA,IAAC,OAAEuc,EAAM,OAAEI,EAAM,QAAED,EAAO,aAAEE,GAAc5c,EAAA,OAC1C5rB,IAAA6b,cAAC4sB,KAAI,KACJzoC,IAAA6b,cAAC6S,KAAa,CAACC,UAAQ,GACtB3uB,IAAA6b,cAAC8O,IAAU,CAAC/I,QAAQ,YAAY8O,cAAY,GAC1C3Y,KAAKkB,EAAE,+BAETjZ,IAAA6b,cAAC6sB,KAAK,CACLC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,0BACdtT,KAAK,OACLijC,WAAS,EACT9vB,MAAOwvB,EAAQ3iC,MAAQkvB,QAAQ0T,EAAO5iC,MACtCkjC,WAAYP,EAAQ3iC,MAAQ4iC,EAAO5iC,KACnCic,QAAQ,WACR1B,OAAO,QACPsB,UAAWR,EAAQioB,YAEpBjpC,IAAA6b,cAAC6sB,KAAK,CACLC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,4BACdtT,KAAK,SACLmT,MAAOwvB,EAAQ17B,QAAUioB,QAAQ0T,EAAO37B,QACxCi8B,WAAYP,EAAQ17B,QAAU27B,EAAO37B,OACrC6B,YAAY,gBACZmT,QAAQ,WACR1B,OAAO,UAERlgB,IAAA6b,cAAA,WACC7b,IAAA6b,cAAC6sB,KAAK,CACLC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,2BACdtT,KAAK,QACLmT,MAAOwvB,EAAQ1iC,OAASivB,QAAQ0T,EAAO3iC,OACvCijC,WAAYP,EAAQ1iC,OAAS2iC,EAAO3iC,MACpC6I,YAAY,gBACZoiB,WAAS,EACT3Q,OAAO,QACP0B,QAAQ,cAGV5hB,IAAA6b,cAAC8O,IAAU,CACV5B,MAAO,CAAE1I,aAAc,EAAGM,UAAW,IACrCiB,QAAQ,aAEP7J,KAAKkB,EAAE,8BAA8B,KAAS,OAAPrL,QAAO,IAAPA,OAAO,EAAPA,EAASnD,UAAkB,OAAPmD,QAAO,IAAPA,OAAO,EAAPA,EAASnD,SAAS9E,KAAO,IAEtF3F,IAAA6b,cAAC8O,IAAU,CACV5B,MAAO,CAAE1I,aAAc,EAAGM,UAAW,IACrCiB,QAAQ,aAEP7J,KAAKkB,EAAE,gCAGTjZ,IAAA6b,cAACi9B,KAAU,CAACnzC,KAAK,aACfozC,IAAA,IAAC,KAAEv3C,EAAI,OAAE+hB,GAAQw1B,EAAA,OACjB/4C,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACEuf,EAAOx7B,WACPw7B,EAAOx7B,UAAU5K,OAAS,GAC1BomC,EAAOx7B,UAAUyV,IAAI,CAAC42B,EAAM32B,IAC3BriB,IAAA6b,cAAA,OACC2F,UAAWR,EAAQu3B,UACnB36B,IAAG,GAAA1c,OAAKmhB,EAAK,UAEbriB,IAAA6b,cAAC6sB,KAAK,CACLC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,+BACdtT,KAAI,aAAAzE,OAAemhB,EAAK,UACxBT,QAAQ,WACR1B,OAAO,QACPsB,UAAWR,EAAQioB,YAEpBjpC,IAAA6b,cAAC6sB,KAAK,CACLC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,gCACdtT,KAAI,aAAAzE,OAAemhB,EAAK,WACxBT,QAAQ,WACR1B,OAAO,QACPsB,UAAWR,EAAQioB,YAEpBjpC,IAAA6b,cAAC+G,IAAU,CACV0I,KAAK,QACLxJ,QAASA,IAAMyB,EAAOlB,IAEtBriB,IAAA6b,cAACo9B,KAAiB,SAItBj5C,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQu3B,WACvBv4C,IAAA6b,cAACgG,KAAM,CACNkH,MAAO,CAAEsJ,KAAM,EAAG1R,UAAW,GAC7BiB,QAAQ,WACR3U,MAAM,UACN6U,QAASA,IAAMtgB,EAAK,CAAEmE,KAAM,GAAIoW,MAAO,MAAM,KAAA7a,OAEvC6W,KAAKkB,EAAE,4CAOnBjZ,IAAA6b,cAAC+S,KAAa,KACb5uB,IAAA6b,cAACgG,KAAM,CACNC,QAASqN,EACTliB,MAAM,YACNzG,SAAUgiC,EACV5mB,QAAQ,YAEP7J,KAAKkB,EAAE,gCAETjZ,IAAA6b,cAACgG,KAAM,CACNjX,KAAK,SACLqC,MAAM,UACNzG,SAAUgiC,EACV5mB,QAAQ,YACRJ,UAAWR,EAAQgmB,YAET,GAAA9lC,OAATw3C,EACK3gC,KAAKkB,EAAE,+BACPlB,KAAKkB,EAAE,+BACZuvB,GACAxoC,IAAA6b,cAACwP,KAAgB,CAChBC,KAAM,GACN9J,UAAWR,EAAQ8J,yBCnP9B,MAAMlL,GAAYC,YAAYnG,IAAK,CACjCg3B,OAAQ,CACNznB,SAAU,GACVhc,MAAO,WAETisC,QAAS,CACPjwB,SAAU,GACVhc,MAAO,cAIL6a,GAASqxB,aAAoB,CACjCn3B,MAAM,IAuXOo3B,OApXQz9B,IAA6C,IAADioB,EAAA,IAA3C,UAAEyV,EAAS,QAAEhrB,EAAO,eAAEirB,GAAgB39B,EAC5D,MAAMqF,EAAUpB,MACT9T,EAASytC,GAAcr+B,mBAAS,KAEhCF,EAASC,GAAcC,oBAAS,IAChCwL,EAAa8yB,GAAkBt+B,mBAAS,KACxCu+B,EAAiBC,GAAsBx+B,mBAAS,OAChDy+B,EAAeC,GAAoB1+B,mBAAS,KAC5C2+B,EAAkBC,GAAuB5+B,mBAAS,KAClD6+B,EAAYC,GAAiB9+B,mBAAS,KACtC++B,EAAWC,GAAgBh/B,mBAAS,KACpCi/B,EAAkBC,GAAuBl/B,oBAAS,IACnD,KAAEpK,GAASqK,qBAAWyD,KACtB,UAAEhc,EAAS,WAAE4Y,GAAe1K,GAE1BupC,EAAWC,GAAiBp/B,oBAAS,IACtCq/B,EAAgBC,GAAqBt/B,mBAAS,KAC9Cu/B,EAAiBC,GAAsBx/B,mBAAS,IAEvDE,oBAAU,UACmB3B,KAAT,OAAd6/B,QAAc,IAAdA,OAAc,EAAdA,EAAgB3uC,MAClB4uC,EAAW,CAACD,IACZI,EAAmBJ,KAEpB,CAACA,IAEJl+B,oBAAU,KACRH,GAAW,GACX,MAAMuM,EAAkB5jB,WAAW,KAOd,OAAf4X,QAAqC/B,IAAd+B,GACzBs+B,EAAoBt+B,GAGK,IAAvB1K,EAAKb,OAAOlO,QACd63C,EAAiB9oC,EAAKb,OAAO,GAAGtF,IAXZ0Q,WACpBzB,GACG0B,IAAI,YAAa,CAAEla,OAAQ,CAAEwB,YAAW8F,QAAS,KACjDiyC,KAAK/uB,IAAA,IAAC,KAAE/S,GAAM+S,EAAA,OAAKsuB,EAAarhC,MAUrCu4B,GACAn2B,GAAW,IACV,KACH,MAAO,IAAMyM,aAAaF,IACzB,IAEHpM,oBAAU,KACR,IAAKi+B,GAAa3yB,EAAY3kB,OAAS,EAErC,YADAkZ,GAAW,GAGbA,GAAW,GACX,MAAMuM,EAAkB5jB,WAAW,KACXyX,WACpB,IACE,MAAM,KAAExC,SAAee,GAAI0B,IAAI,WAAY,CACzCla,OAAQ,CAAEslB,iBAEZ6yB,EAAW1gC,EAAK7O,UAChBiR,GAAW,GACX,MAAOzC,GACPyC,GAAW,GACX1C,GAAWC,KAGf44B,IACC,KACH,MAAO,IAAM1pB,aAAaF,IACzB,CAACd,EAAa2yB,IAejB,MAAMlqB,EAAcA,KAClBd,IACAmrB,EAAe,IACfc,GAAa,GACbE,EAAkB,IAClBE,EAAmB,IACnBhB,EAAmB,OAWfkB,EAAmBv/B,UACvB,GAAKq9B,EACL,GAAsB,KAAlBiB,GAAyC,UAAjB7oC,EAAKxD,QAAjC,CAKA2N,GAAW,GACX,IACE,MAAMkgB,EAA4B,KAAlBwe,EAAuBA,EAAgB,KACjDn+B,EAAkC,KAArBq+B,EAA0BA,EAAmB,MACxDhhC,KAAMqb,SAAiBta,GAAIoD,KAAK,WAAY,CAClD07B,UAAWA,EACXvd,UACA3f,aACA1Y,OAAQgO,EAAKnG,GACbrC,OAAQ,SAGV+lB,EAAQ6F,GACR,MAAO1b,GAEP,MAAM0b,EAAU7wB,KAAKC,MAAMkV,EAAII,SAASC,KAAKC,OAEzCob,EAAOpxB,UAAe,OAAJgO,QAAI,IAAJA,OAAI,EAAJA,EAAMnG,KAC1B2vC,GAAa,GACbE,EAAkBtmB,EAAOpjB,KAAKnL,MAC9B+0C,EAAmBxmB,EAAO1nB,MAAM7G,QAEhC20C,GAAa,GACbE,EAAkB,IAClBE,EAAmB,IACnBz/B,GAAW,GACXoT,EAAQ6F,IAGZjZ,GAAW,QAjCTjC,IAAMF,MAAM,uBAqDV+hC,EAAyBA,CAACC,EAAe15C,KAC7C,MAAM25C,EAAWjzB,GAAOgzB,EAAe15C,GAMvC,MAL0B,KAAtBA,EAAO45C,aAAsBhgC,GAAW0L,EAAY3kB,QAAU,GAChEg5C,EAASv5C,KAAK,CACZmE,KAAK,GAADzE,OAAKE,EAAO45C,cAGbD,GAGHE,EAAeC,GACfA,EAAOtuC,OACF5M,IAAA6b,cAAA7b,IAAA4oB,SAAA,KAEL5oB,IAAA6b,cAAC8O,IAAU,CAACjG,UAAU,OAAOqE,MAAO,CAAEE,SAAU,GAAIiC,WAAY,OAAQnL,QAAS,cAAeE,WAAY,SAAU2c,WAAY,MAC/Hse,EAAOv1C,KAAK,MAAIu1C,EAAOtuC,SAItB,GAAN1L,OAAU6W,KAAKkB,EAAE,sBAAqB,KAAA/X,OAAIg6C,EAAOv1C,MAI/Cw1C,EAAoBD,GACpBA,EAAOtuC,OACH,GAAN1L,OAAUg6C,EAAOv1C,KAAI,OAAAzE,OAAMg6C,EAAOtuC,QAE5B,GAAN1L,OAAUg6C,EAAOv1C,MAqDrB,OACE3F,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACE5oB,IAAA6b,cAAC48B,GAAY,CACX7pC,KAAMurC,EACNpS,cAAegS,EACf1rB,QA7F0B+sB,KAC9BhB,GAAoB,IA6FhBzB,OA1F4B/qC,IAChCgtC,EAAiBhtC,EAAQjD,OA2FvB3K,IAAA6b,cAAC0S,KAAM,CAAC3f,KAAMyqC,EAAWhrB,QAASc,GAChCnvB,IAAA6b,cAAC4S,KAAW,CAAC9jB,GAAG,qBACboN,KAAKkB,EAAE,yBAEVjZ,IAAA6b,cAAC6S,KAAa,CAACC,UAAQ,GACrB3uB,IAAA6b,cAACupB,KAAI,CAACrc,MAAO,CAAE3I,MAAO,KAAOilB,WAAS,EAACpD,QAAS,QA7D/BxoB,IAAnB6/B,QAAsD7/B,IAAtB6/B,EAAe3uC,GAE/C3K,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAIF,MAAI,GAChBtlC,IAAA6b,cAACw/B,KAAY,CACXxqB,WAAS,EACT/kB,QAASA,EACTkP,QAASA,EACTsgC,aAAW,EACXC,eAAa,EACbC,UAAQ,EACRC,eAAa,EACbC,eAAgBP,EAChBF,aAAcA,EACdH,cAAeD,EACfn5B,SAAUA,CAACqO,EAAG+jB,IA/DG6H,EAAC5rB,EAAG+jB,MACjB,OAARA,QAAQ,IAARA,OAAQ,EAARA,EAAUlnC,QACZ8sC,EAAmB5F,IACF,OAARA,QAAQ,IAARA,OAAQ,EAARA,EAAUnuC,QACnBq0C,EAAc,CAAEr0C,KAAMmuC,EAASnuC,OAC/By0C,GAAoB,KA0DauB,CAAmB5rB,EAAG+jB,GACjDC,YAAa3yC,GACXpB,IAAA6b,cAAC4F,KAAS6C,OAAAC,OAAA,GACJnjB,EAAM,CACV0Q,MAAOiG,KAAKkB,EAAE,6BACd2I,QAAQ,WACRgnB,WAAS,EACTlnB,SAAUqO,GAAKypB,EAAezpB,EAAEpO,OAAO5F,OACvC6/B,WAAY7rB,KACN/U,GAAYy+B,GACG,UAAV1pB,EAAEnS,KACTg9B,EAAiBnB,EAAgB9uC,KAGrCkxC,WAAY,IACPz6C,EAAOy6C,WACVC,aACE97C,IAAA6b,cAAC7b,IAAM4oB,SAAQ,KACZ5N,EACChb,IAAA6b,cAACwP,KAAgB,CAACpe,MAAM,UAAUqe,KAAM,KACtC,KACHlqB,EAAOy6C,WAAWC,qBAU9B,KAoBC97C,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAIF,MAAI,GAChBtlC,IAAA6b,cAAC2qB,KAAM,CACLa,UAAQ,EACRxW,WAAS,EACTkrB,cAAY,EACZn6B,QAAQ,WACR7F,MAAO49B,EACPj4B,SAAWqO,IACT6pB,EAAiB7pB,EAAEpO,OAAO5F,QAE5B2qB,UAAW,CACTjX,aAAc,CACZC,SAAU,SACVC,WAAY,QAEdC,gBAAiB,CACfF,SAAU,MACVC,WAAY,QAEdH,mBAAoB,MAEtBmX,YAAaA,KACX,GAAsB,KAAlBgT,EACF,MAAO,qBAGT,OADc7oC,EAAKb,OAAO0N,KAAKyd,GAAKA,EAAEzwB,KAAOgvC,GAChCh0C,QAGH,QAAXi+B,EAAA9yB,EAAKb,cAAM,IAAA2zB,OAAA,EAAXA,EAAa7hC,QAAS,GACrB+O,EAAKb,OAAOmS,IAAI,CAAC5V,EAAOoR,IACtB5d,IAAA6b,cAACiU,IAAQ,CAACrL,OAAK,EAAC7G,IAAKA,EAAK7B,MAAOvP,EAAM7B,IACrC3K,IAAA6b,cAAC0G,IAAY,CAACC,QAAShW,EAAM7G,WAOvC3F,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAIF,MAAI,GAChBtlC,IAAA6b,cAAC2qB,KAAM,CACLa,UAAQ,EACRxW,WAAS,EACTkrB,cAAY,EACZn6B,QAAQ,WACR7F,MAAO89B,EACPn4B,SAAWqO,IACT+pB,EAAoB/pB,EAAEpO,OAAO5F,QAE/B2qB,UAAW,CACTjX,aAAc,CACZC,SAAU,SACVC,WAAY,QAEdC,gBAAiB,CACfF,SAAU,MACVC,WAAY,QAEdH,mBAAoB,MAEtBmX,YAAaA,KACX,GAAyB,KAArBkT,EACF,MAAO,2BAGT,OADiBI,EAAUt8B,KAAKq+B,GAAKA,EAAErxC,KAAOkvC,GAC9Bl0C,QAGR,OAATs0C,QAAS,IAATA,OAAS,EAATA,EAAWl4C,QAAS,GACnBk4C,EAAU73B,IAAI,CAAC3X,EAAUmT,IACvB5d,IAAA6b,cAACiU,IAAQ,CAACrL,OAAK,EAAC7G,IAAKA,EAAK7B,MAAOtR,EAASE,IACxC3K,IAAA6b,cAAC0G,IAAY,CACXC,QACExiB,IAAA6b,cAAA7b,IAAA4oB,SAAA,KAEE5oB,IAAA6b,cAAC8O,IAAU,CAACjG,UAAU,OAAOqE,MAAO,CAAEE,SAAU,GAAIiC,WAAY,OAAQnL,QAAS,cAAeE,WAAY,SAAU2c,WAAY,MAC/HnyB,EAAS9E,KAAK,SAAQ3F,IAAA6b,cAAA,KAAG2F,UAAiC,cAArB/W,EAASnC,OAA0B0Y,EAAQ0vB,OAAS1vB,EAAQk4B,SAAU,IAAEzuC,EAASnC,OAAO,eAWpJtI,IAAA6b,cAAC+S,KAAa,KACZ5uB,IAAA6b,cAACgG,KAAM,CACLC,QAASqN,EACTliB,MAAM,YACNzG,SAAUwU,EACV4G,QAAQ,YAEP7J,KAAKkB,EAAE,kCAEVjZ,IAAA6b,cAACsP,GAAiB,CAChBvJ,QAAQ,YACRhX,KAAK,SACLpE,UAAWizC,EACX33B,QAASA,IAAM84B,EAAiBnB,EAAgB9uC,IAChDsC,MAAM,UACN+N,QAASA,GAERjD,KAAKkB,EAAE,kCCpWLgjC,OArCSA,IAEtBj8C,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACC5oB,IAAA6b,cAACyG,IAAQ,CAACmC,OAAK,GACdzkB,IAAA6b,cAACwkB,KAAc,KACdrgC,IAAA6b,cAACud,KAAQ,CAACC,UAAU,OAAOzX,QAAQ,SAASxB,MAAO,GAAIM,OAAQ,MAEhE1gB,IAAA6b,cAAC0G,IAAY,CACZC,QAASxiB,IAAA6b,cAACud,KAAQ,CAACC,UAAU,OAAO3Y,OAAQ,GAAIN,MAAO,KACvDqC,UAAWziB,IAAA6b,cAACud,KAAQ,CAACC,UAAU,OAAO3Y,OAAQ,GAAIN,MAAO,QAG3DpgB,IAAA6b,cAACgN,IAAO,CAACjH,QAAQ,UACjB5hB,IAAA6b,cAACyG,IAAQ,CAACmC,OAAK,GACdzkB,IAAA6b,cAACwkB,KAAc,KACdrgC,IAAA6b,cAACud,KAAQ,CAACC,UAAU,OAAOzX,QAAQ,SAASxB,MAAO,GAAIM,OAAQ,MAEhE1gB,IAAA6b,cAAC0G,IAAY,CACZC,QAASxiB,IAAA6b,cAACud,KAAQ,CAACC,UAAU,OAAO3Y,OAAQ,GAAIN,MAAO,KACvDqC,UAAWziB,IAAA6b,cAACud,KAAQ,CAACC,UAAU,OAAO3Y,OAAQ,GAAIN,MAAO,SAG3DpgB,IAAA6b,cAACgN,IAAO,CAACjH,QAAQ,UACjB5hB,IAAA6b,cAACyG,IAAQ,CAACmC,OAAK,GACdzkB,IAAA6b,cAACwkB,KAAc,KACdrgC,IAAA6b,cAACud,KAAQ,CAACC,UAAU,OAAOzX,QAAQ,SAASxB,MAAO,GAAIM,OAAQ,MAEhE1gB,IAAA6b,cAAC0G,IAAY,CACZC,QAASxiB,IAAA6b,cAACud,KAAQ,CAACC,UAAU,OAAO3Y,OAAQ,GAAIN,MAAO,KACvDqC,UAAWziB,IAAA6b,cAACud,KAAQ,CAACC,UAAU,OAAO3Y,OAAQ,GAAIN,MAAO,QAG3DpgB,IAAA6b,cAACgN,IAAO,CAACjH,QAAQ,WC1BpB,MAAMhC,GAAYC,YAAYnG,IAAK,CACjCwiC,mBAAoB,CAClBlzB,SAAU,WACVjJ,QAAS,OACTW,OAAQ,OACRV,cAAe,SACf+Q,SAAU,SACV9D,qBAAsB,EACtBE,wBAAyB,GAG3B7d,YAAa,CACX+iB,KAAM,EACN0P,UAAW,OACX1Q,UAAW,YACR3X,EAAM4X,gBACT6qB,UAAW,iCAGbC,kBAAmB,CACjBnvC,MAAO,mBACP0lB,OAAQ,EACR/R,gBAAiB,QACjB+X,aAAc,gCACd5Y,QAAS,OACTE,WAAY,SACZ0T,eAAgB,iBAGlB0oB,aAAc,CACZxxB,WAAY,SACZ5d,MAAO,qBACPie,WAAY,MACZjC,SAAU,QAGZ0T,cAAe,CACbzT,UAAW,SACXjc,MAAO,qBACPgc,SAAU,OACV2T,WAAY,OAGdntB,eAAgB,CACdyZ,UAAW,SACXD,SAAU,OACV4B,WAAY,MACZ3K,OAAQ,OAGVuc,aAAc,CACZ1c,QAAS,OACTW,OAAQ,QACRR,OAAQ,GACRF,cAAe,SACfC,WAAY,SACZ0T,eAAgB,aAIdzZ,GAAUA,CAACC,EAAOC,KACtB,GAAoB,iBAAhBA,EAAOxP,KAAyB,CAelC,OAdmBwP,EAAOC,QAEfwK,QAASqP,IAClB,MAAMsP,EAAcrpB,EAAMzY,UAAWuX,GAAMA,EAAEtO,KAAOupB,EAAOvpB,KACtC,IAAjB64B,GACFrpB,EAAMqpB,GAAetP,EACjBA,EAAO4M,eAAiB,GAC1B3mB,EAAMmiC,QAAQniC,EAAMvY,OAAO4hC,EAAa,GAAG,KAG7CrpB,EAAM3Y,KAAK0yB,KAIR,IAAI/Z,GAGb,GAAoB,iBAAhBC,EAAOxP,KAAyB,CAClC,MAAMupB,EAAW/Z,EAAOC,QAElBmpB,EAAcrpB,EAAMzY,UAAWuX,GAAMA,EAAEtO,KAAOwpB,GAKpD,OAJqB,IAAjBqP,IACFrpB,EAAMqpB,GAAa1C,eAAiB,GAG/B,IAAI3mB,GAGb,GAAoB,kBAAhBC,EAAOxP,KAA0B,CACnC,MAAMspB,EAAS9Z,EAAOC,QAEhBmpB,EAAcrpB,EAAMzY,UAAWuX,GAAMA,EAAEtO,KAAOupB,EAAOvpB,IAO3D,OANqB,IAAjB64B,EACFrpB,EAAMqpB,GAAetP,EAErB/Z,EAAMmiC,QAAQpoB,GAGT,IAAI/Z,GAGb,GAAoB,kCAAhBC,EAAOxP,KAA0C,CACnD,MAAMspB,EAAS9Z,EAAOC,QAEhBmpB,EAAcrpB,EAAMzY,UAAWuX,GAAMA,EAAEtO,KAAOupB,EAAOvpB,IAQ3D,OAPqB,IAAjB64B,GACFrpB,EAAMqpB,GAAetP,EACrB/Z,EAAMmiC,QAAQniC,EAAMvY,OAAO4hC,EAAa,GAAG,KAE3CrpB,EAAMmiC,QAAQpoB,GAGT,IAAI/Z,GAGb,GAAoB,0BAAhBC,EAAOxP,KAAkC,CAC3C,MAAMgD,EAAUwM,EAAOC,QACjBmpB,EAAcrpB,EAAMzY,UAAWuX,GAAMA,EAAEy/B,YAAc9qC,EAAQjD,IAInE,OAHqB,IAAjB64B,IACFrpB,EAAMqpB,GAAa51B,QAAUA,GAExB,IAAIuM,GAGb,GAAoB,kBAAhBC,EAAOxP,KAA0B,CACnC,MAAMupB,EAAW/Z,EAAOC,QAClBmpB,EAAcrpB,EAAMzY,UAAWuX,GAAMA,EAAEtO,KAAOwpB,GAKpD,OAJqB,IAAjBqP,GACFrpB,EAAMvY,OAAO4hC,EAAa,GAGrB,IAAIrpB,GAGb,GAAoB,UAAhBC,EAAOxP,KACT,MAAO,IAqLI2xC,OAjLY14B,IACzB,MAAM,OACJvb,EAAM,YACNoe,EAAW,KACXxW,EAAI,MACJ/J,EAAK,QACL4I,EAAO,iBACPk3B,EAAgB,YAChBuW,EAAW,MACXzzB,GACElF,EACE7C,EAAUpB,MACT4G,EAAYC,GAAiBvL,mBAAS,IACtC5L,EAAawL,GAAYC,qBAAWb,GAAS,KAC9C,KAAEpJ,GAASqK,qBAAWyD,KACtB,QAAEtR,EAAO,OAAE2C,GAAWa,EAEtBzQ,EAAgB8a,qBAAWlW,GAEjCmW,oBAAU,KACRN,EAAS,CAAElQ,KAAM,UACjB6b,EAAc,IACb,CAACne,EAAQoe,EAAa5L,EAAU/L,EAASmB,EAAM/J,EAAO8/B,IAEzD,MAAM,QAAEv3B,EAAO,QAAE2lB,EAAO,QAAErZ,GAAYymB,GAAW,CAC/Cjb,aACAE,cACApe,SACAyG,UACAmB,KAAM7M,KAAK6Z,UAAUhN,GACrB/J,MAAO9C,KAAK6Z,UAAU/W,GACtBu7B,SAAUr+B,KAAK6Z,UAAU+oB,KAG3B7qB,oBAAU,KACR,MAAMsmB,EAAWzxB,EAAOmS,IAAKgZ,GAAMA,EAAEzwB,IAC/B8xC,EAAkB/tC,EAAQoZ,OAC7B7O,GAAMyoB,EAASgb,QAAQzjC,EAAEkiB,UAAY,GAItCrgB,EADc,SAAZxN,EACO,CAAE1C,KAAM,eAAgByP,QAASoiC,GAEjC,CAAE7xC,KAAM,eAAgByP,QAAS3L,KAE3C,CAACA,EAASpG,EAAQoe,EAAazW,EAAQ3C,IAE1C8N,oBAAU,KACR,MAAMxY,EAAYG,aAAaC,QAAQ,aACjC8B,EAASzE,EAAcsC,UAAUC,GAEjC+5C,EAAsBzoB,KACxBA,EAAOpxB,QAAUoxB,EAAOpxB,UAAe,OAAJgO,QAAI,IAAJA,OAAI,EAAJA,EAAMnG,KAAMoE,MAC/CmlB,EAAOiH,SAAW8K,EAAiByW,QAAQxoB,EAAOiH,UAAY,GAiElE,OA5DAr2B,EAAOnE,GAAG,QAAS,KACb2H,EACFxD,EAAO7D,KAAK,cAAeqH,GAE3BxD,EAAO7D,KAAK,sBAIhB6D,EAAOnE,GAAG,WAADO,OAAY0B,EAAS,WAAYiW,IAXVqb,MAaV,iBAAhBrb,EAAKuB,QACPU,EAAS,CACPlQ,KAAM,eACNyP,QAASxB,EAAKsb,WAIE,WAAhBtb,EAAKuB,QAAuBuiC,EAAmB9jC,EAAKqb,SAAWrb,EAAKqb,OAAO5rB,SAAWA,GACxFwS,EAAS,CACPlQ,KAAM,gBACNyP,QAASxB,EAAKqb,SAIE,WAAhBrb,EAAKuB,UA3BqB8Z,EA2ByBrb,EAAKqb,QA1BrDiH,UAAyD,IAA9C8K,EAAiByW,QAAQxoB,EAAOiH,WA2BhDrgB,EAAS,CAAElQ,KAAM,gBAAiByP,QAASxB,EAAKqb,OAAOvpB,KAGrC,WAAhBkO,EAAKuB,QACPU,EAAS,CAAElQ,KAAM,gBAAiByP,QAASxB,EAAKsb,aAIpDrvB,EAAOnE,GAAG,WAADO,OAAY0B,EAAS,eAAgBiW,IAAU,IAAD+jC,EAAAC,EACrD,MAAMnb,EAAWzxB,EAAOmS,IAAKgZ,GAAMA,EAAEzwB,KAEvB,SAAZ2C,IAC+C,IAA9Co0B,EAASgb,QAAmB,QAAZE,EAAC/jC,EAAKqb,cAAM,IAAA0oB,GAAO,QAAPC,EAAXD,EAAapwC,aAAK,IAAAqwC,OAAP,EAAXA,EAAoBlyC,KACd,OAAtBkO,EAAKqb,OAAO1nB,SAKI,WAAhBqM,EAAKuB,SAAuBuiC,EAAmB9jC,EAAKqb,cAAwBza,IAAXnR,GAAwBuQ,EAAKqb,OAAO5rB,SAAWA,GAClHwS,EAAS,CACPlQ,KAAM,gCACNyP,QAASxB,EAAKqb,YAKpBpvB,EAAOnE,GAAG,WAADO,OAAY0B,EAAS,YAAaiW,IACrB,WAAhBA,EAAKuB,QACPU,EAAS,CACPlQ,KAAM,wBACNyP,QAASxB,EAAKjL,YAKb,KACL9I,EAAOzC,eAER,CAACiG,EAAQyG,EAAS+B,EAAMm1B,EAAkB/1B,EAAM/J,EAAOmH,EAAS2C,EAAQ5P,IAE3E+a,oBAAU,KACmB,oBAAhBohC,GACTA,EAAYltC,EAAYvN,SAGzB,CAACuN,IAgBJ,OACEtP,IAAA6b,cAACivB,KAAK,CAACtpB,UAAWR,EAAQk7B,mBAAoBnzB,MAAOA,GACnD/oB,IAAA6b,cAACivB,KAAK,CACJhS,QAAM,EACNnzB,KAAK,SACL2xC,UAAW,EACX91B,UAAWR,EAAQ1R,YACnB8nB,SAjBgBrH,IACpB,IAAKsE,GAAWrZ,EAAS,OAEzB,MAAM,UAAEqc,EAAS,aAAE0T,EAAY,aAAEC,GAAiBjb,EAAEqF,cAEhD2V,GAAgB1T,EAAY,KAAO2T,GARvCvkB,EAAe6U,GAAcA,EAAY,KAsBrCt7B,IAAA6b,cAACsG,IAAI,CAAC4G,MAAO,CAAEgJ,WAAY,IACD,IAAvBziB,EAAYvN,QAAiBiZ,EAU5Bhb,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACGtZ,EAAY8S,IAAK8R,GAChBl0B,IAAA6b,cAACipB,GAAc,CAAC5Q,OAAQA,EAAQtW,IAAKsW,EAAOvpB,OAXhD3K,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQyb,cACtBz8B,IAAA6b,cAAA,QAAM2F,UAAWR,EAAQvR,gBACtBsI,KAAKkB,EAAE,+BAEVjZ,IAAA6b,cAAA,KAAG2F,UAAWR,EAAQ2b,eACnB5kB,KAAKkB,EAAE,kCAUb+B,GAAWhb,IAAA6b,cAACihC,GAAmB,UCpT3BC,OAfEphC,IAAyC,IAAxC,SAAEC,EAAQ,MAAEG,EAAK,KAAEpW,KAASylB,GAAMzP,EACnD,OAAII,IAAUpW,EAEZ3F,IAAA6b,cAAA,MAAAyI,OAAAC,OAAA,CACCrF,KAAK,WACLvU,GAAE,mBAAAzJ,OAAqByE,GACvB6oB,kBAAA,cAAAttB,OAA+ByE,IAC3BylB,GAEJprB,IAAA6b,cAAA7b,IAAA4oB,SAAA,KAAGhN,IAGQ,M,WC6CAohC,OAnDYrhC,IAIpB,IAJqB,WAC3BshC,EAAU,iBACVhX,EAAmB,GAAE,SACrBvkB,GACA/F,EAKA,OACC3b,IAAA6b,cAAA,OAAKkN,MAAO,CAAE3I,MAAO,IAAKO,WAAY,IACrC3gB,IAAA6b,cAACwqB,KAAW,CAACxV,WAAS,EAAC3Q,OAAO,SAC7BlgB,IAAA6b,cAAC2qB,KAAM,CACNN,UAAQ,EACR6V,cAAY,EACZn6B,QAAQ,WACR7F,MAAOkqB,EACPvkB,SAZiBqO,IACpBrO,EAASqO,EAAEpO,OAAO5F,QAYf2qB,UAAW,CACVjX,aAAc,CACbC,SAAU,SACVC,WAAY,QAEbC,gBAAiB,CAChBF,SAAU,MACVC,WAAY,QAEbH,mBAAoB,MAErBmX,YAAaA,IAAM5uB,KAAKkB,EAAE,oCAEf,OAAVgkC,QAAU,IAAVA,OAAU,EAAVA,EAAYl7C,QAAS,GACrBk7C,EAAW76B,IAAI5V,GACdxM,IAAA6b,cAACiU,IAAQ,CAACrL,OAAK,EAAC7G,IAAKpR,EAAM7B,GAAIoR,MAAOvP,EAAM7B,IAC3C3K,IAAA6b,cAACqhC,KAAQ,CACRn0B,MAAO,CACN9b,MAAOT,EAAMS,OAEdqe,KAAK,QACLre,MAAM,UACNkwC,QAASlX,EAAiByW,QAAQlwC,EAAM7B,KAAO,IAEhD3K,IAAA6b,cAAC0G,IAAY,CAACC,QAAShW,EAAM7G,aC5C9B,SAASy3C,GAAUzhC,GAAkB,IAAjB,WAAE0hC,GAAY1hC,EACvC,MAAOzL,EAAMotC,GAAWpiC,mBAAS,KAC1BqiC,EAAWC,GAAgBtiC,mBAAS,IAE3CE,oBAAU,MACRC,uBACQoiC,IAERl2B,IACC,IAEH,MAAMk2B,EAAWpiC,UACf,IACE,MAAM,KAAExC,SAAee,GAAI0B,IAAI,cAC/BgiC,EAAQzkC,GACR,MAAOL,GACPD,GAAWC,KASf,OACExY,IAAA6b,cAAC6f,KAAG,CAAC3S,MAAO,CAAE6B,QAAS,KACrB5qB,IAAA6b,cAACw/B,KAAY,CACXnV,UAAQ,EACR5a,KAAK,QACLxf,QAASoE,EACT6L,MAAOwhC,EACP77B,SAAUA,CAACqO,EAAG2tB,EAAGC,IAZNtiC,WACfmiC,EAAazhC,GACbshC,EAAWthC,IAUgB2F,CAASg8B,GAChChC,eAAiBR,GAAWA,EAAOv1C,KACnCi4C,WAAYA,CAAC7hC,EAAO8hC,IAClB9hC,EAAMqG,IAAI,CAAC84B,EAAQ74B,IACjBriB,IAAA6b,cAACirB,KAAIxiB,OAAAC,OAAA,CACH3C,QAAQ,WACRmH,MAAO,CACLnI,gBAAiBs6B,EAAOjuC,OAAS,OACjC6wC,WAAY,mBACZ7wC,MAAO,SAET6E,MAAOopC,EAAOv1C,MACVk4C,EAAY,CAAEx7B,UAAQ,CAC1BiJ,KAAK,YAIXyoB,YAAc3yC,GACZpB,IAAA6b,cAAC4F,KAAS6C,OAAAC,OAAA,GACJnjB,EAAM,CACVwgB,QAAQ,WACRnT,YAAY,wBCrDjB,SAASsvC,GAAWpiC,GAAgC,IAA/B,WAAE0hC,EAAU,aAAEW,GAAcriC,EACtD,MAAOxV,EAAO83C,GAAY/iC,mBAAS,KAC5BqiC,EAAWC,GAAgBtiC,mBAAS,IAE3CE,oBAAU,MACRC,uBACQ6iC,IAER32B,IACC,IAEHnM,oBAAU,KACRoiC,EAAa,IAEXx7C,MAAMyb,QAAQugC,IACdh8C,MAAMyb,QAAQtX,IACdA,EAAMpE,OAAS,GAEf2f,EAASs8B,IAGV,CAACA,EAAc73C,IAElB,MAAM+3C,EAAY7iC,UAChB,IACE,MAAM,KAAExC,SAAee,GAAI0B,IAAI,eACzB6iC,EAAWtlC,EAAKuJ,IAAK2C,IAAC,CAAQpa,GAAIoa,EAAEpa,GAAIhF,KAAMof,EAAEpf,QACtDs4C,EAASE,GACT,MAAO3lC,GACPD,GAAWC,KAITkJ,EAAWrG,UACfmiC,EAAazhC,GACbshC,EAAWthC,IAGb,OACE/b,IAAA6b,cAAC6f,KAAG,CAAC3S,MAAO,CAAE6B,QAAS,kBACrB5qB,IAAA6b,cAACw/B,KAAY,CACXnV,UAAQ,EACR5a,KAAK,QACLxf,QAAS3F,EACT4V,MAAOwhC,EACP77B,SAAUA,CAACqO,EAAG2tB,EAAGC,IAAMj8B,EAASg8B,GAChChC,eAAiBR,GAAWA,EAAOv1C,KACnCy4C,kBAAmBA,CAAClD,EAAQn/B,KAElB,OAANm/B,QAAM,IAANA,OAAM,EAANA,EAAQvwC,OAAY,OAALoR,QAAK,IAALA,OAAK,EAALA,EAAOpR,MAChB,OAANuwC,QAAM,IAANA,OAAM,EAANA,EAAQv1C,KAAK04C,kBAAuB,OAALtiC,QAAK,IAALA,OAAK,EAALA,EAAOpW,KAAK04C,eAG/CT,WAAYA,CAAC7hC,EAAOuiC,IAClBviC,EAAMqG,IAAI,CAAC84B,EAAQ74B,IACjBriB,IAAA6b,cAACirB,KAAIxiB,OAAAC,OAAA,CACH3C,QAAQ,WACRmH,MAAO,CACLnI,gBAAiB,UACjBk9B,WAAY,mBACZ7wC,MAAO,SAET6E,MAAOopC,EAAOv1C,MACV24C,EAAa,CAAEj8B,UAAQ,CAC3BiJ,KAAK,YAIXyoB,YAAc3yC,GACZpB,IAAA6b,cAAC4F,KAAS6C,OAAAC,OAAA,GACJnjB,EAAM,CACVwgB,QAAQ,WACRnT,YAAY,yBClDxB,MAAMmR,GAAYC,YAAWnG,IAAK,CACjC6kC,eAAgB,CACfv1B,SAAU,WACVjJ,QAAS,OACTW,OAAQ,OACRV,cAAe,SACf+Q,SAAU,SACV9D,qBAAsB,EACtBE,wBAAyB,EACzBtM,aAAa,GAGd29B,WAAY,CACXnsB,KAAM,OACNzR,gBAAiBlH,EAAM8f,QAAQC,qBAGhCglB,aAAc,CACbpsB,KAAM,OACNzR,gBAAiBlH,EAAM8f,QAAQC,qBAGhCilB,aAAc,CACb7sB,UAAW,SACX3G,WAAY,OACZN,QAAS,GAGV+zB,IAAK,CACJruB,SAAU,IACVlQ,MAAO,KAGRw+B,YAAa,CACZtuB,SAAU,IACVlQ,MAAO,IACPwK,QAAS,GAGVi0B,iBAAkB,CACjB9+B,QAAS,OACT4T,eAAgB,gBAChB1T,WAAY,SACZuc,WAAY9iB,EAAM8f,QAAQslB,kBAC1Bl0B,QAASlR,EAAMuoB,QAAQ,IAGxB8c,iBAAkB,CACjBn0B,QAASlR,EAAMuoB,QAAQ,IAGxB+c,mBAAoB,CACnB3sB,KAAM,EACNmK,WAAY9iB,EAAM8f,QAAQ4a,MAC1Br0B,QAAS,OACTc,aAAc,GACd+J,QAAS,EACTpK,YAAa9G,EAAMuoB,QAAQ,IAG5Bgd,WAAY,CACXhyC,MAAO,OACPie,WAAY,EACZ1K,YAAa,EACbqR,UAAW,UAGZqtB,YAAa,CACZ7sB,KAAM,EACNyX,OAAQ,OACRjpB,aAAc,IAGfs+B,gBAAiB,CAChBz+B,OAAQ,OACRC,UAAW,QACXoR,WAAY,QAGbqtB,sBAAuB,CACtBr/B,QAAQ,OACRC,cAAe,SACfW,UAAW,QACXoR,WAAY,OACZrR,OAAQ,QAGT2+B,eAAgB,CACfj/B,MAAO,OACPwK,QAAS,GAEV00B,iBAAkB,CACjBt/B,cAAe,MACf,oBAAqB,CACpBK,aAAc,iBACdG,YAAa,KAGf++B,gBAAiB,CAChB,CAAC7lC,EAAMggB,YAAYC,KAAK,OAAQ,CAC/B5Z,QAAQ,SAGVy/B,iBAAkB,CACjB,4BAA6B,CAC5B50B,QAAS,aAEV,4BAA6B,CAC5BjK,UAAW,YA0PC8+B,OArPYA,KACzB,MAAMz+B,EAAUpB,KACV3D,EAAUC,wBAETwK,EAAa8yB,GAAkBt+B,mBAAS,KACxCyjC,EAAKe,GAAUxkC,mBAAS,SACxBykC,EAASC,GAAc1kC,mBAAS,SAChC2kC,EAAoBC,GAAyB5kC,oBAAS,IACtD6kC,EAAgBC,GAAqB9kC,oBAAS,GAC/C+kC,EAAiBzrB,oBACjB,KAAE1jB,GAASqK,qBAAWyD,KACtB,QAAEtR,GAAYwD,GAEbovC,EAAWC,GAAgBjlC,mBAAS,IACpCklC,EAAcC,GAAmBnlC,mBAAS,GAE3C0sB,EAAe92B,EAAKb,OAAOmS,IAAKgZ,GAAMA,EAAEzwB,KACvCs7B,EAAkBwB,GAAuBvsB,mBAAS0sB,GAAgB,KAClE0Y,EAAcC,GAAmBrlC,mBAAS,KAC1CslC,EAAeC,GAAoBvlC,mBAAS,IAenD,IAAIwlC,EAbJtlC,oBAAU,KAC2B,UAA/BtK,EAAKxD,QAAQwuB,eACfkkB,GAAkB,IAGnB,IAEH5kC,oBAAU,KACI,WAARujC,GACFsB,EAAelrB,QAAQqP,SAExB,CAACua,IAIJ,MAwBMgC,EAAmBr4C,IACvB,GAAIq3C,IAAYr3C,EACd,MAAO,CAAE8X,MAAO,EAAGM,OAAQ,IAqB/B,OACE1gB,IAAA6b,cAACivB,KAAK,CAACwM,UAAW,EAAG11B,QAAQ,WAAWJ,UAAWR,EAAQu9B,gBACzDv+C,IAAA6b,cAACu9B,GAAc,CACbC,UAAWwG,EACXxxB,QAAU6F,IArBiBA,KAC/B4rB,GAAsB,QACPrmC,IAAXya,QAAwCza,IAAhBya,EAAOrH,MACjC5Q,EAAQza,KAAK,YAADN,OAAagzB,EAAOrH,QAoB5B+zB,CAAwB1sB,MAG5Bl0B,IAAA6b,cAACivB,KAAK,CAACwM,UAAW,EAAGxe,QAAM,EAACtX,UAAWR,EAAQw9B,YAC7Cx+C,IAAA6b,cAACglC,KAAI,CACH9kC,MAAO4iC,EACPj9B,SA3CgBo/B,CAAC/wB,EAAG+jB,KAC1B4L,EAAO5L,IA2CDlyB,QAAQ,YACRm/B,eAAe,UACfC,UAAU,UACVxc,aAAW,2BAEXxkC,IAAA6b,cAAColC,KAAG,CACFllC,MAAO,OACP+H,KAAM9jB,IAAA6b,cAACqlC,KAAe,MACtBpvC,MAAOiG,KAAKkB,EAAE,2BACd+H,QAAS,CAAElB,KAAMkB,EAAQ29B,OAE3B3+C,IAAA6b,cAAColC,KAAG,CACFllC,MAAO,SACP+H,KAAM9jB,IAAA6b,cAACslC,KAAY,MACnBrvC,MAAOiG,KAAKkB,EAAE,6BACd+H,QAAS,CAAElB,KAAMkB,EAAQ29B,OAE3B3+C,IAAA6b,cAAColC,KAAG,CACFllC,MAAO,SACP+H,KAAM9jB,IAAA6b,cAACulC,KAAU,MACjBtvC,MAAOiG,KAAKkB,EAAE,6BACd+H,QAAS,CAAElB,KAAMkB,EAAQ29B,SAI/B3+C,IAAA6b,cAACivB,KAAK,CAAChS,QAAM,EAACwe,UAAW,EAAG91B,UAAWR,EAAQ69B,kBACpC,WAARF,EACC3+C,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQg+B,oBACtBh/C,IAAA6b,cAACulC,KAAU,CAAC5/B,UAAWR,EAAQi+B,aAC/Bj/C,IAAA6b,cAACwlC,KAAS,CACR7/B,UAAWR,EAAQk+B,YACnBoC,SAAUrB,EACVxxC,YAAasJ,KAAKkB,EAAE,8BACpBrO,KAAK,SACL8W,SA9FUqO,IACpB,MAAMwxB,EAAexxB,EAAEpO,OAAO5F,MAAMsiC,cAIpC,GAFA32B,aAAag5B,GAEQ,KAAjBa,EAGF,OAFA/H,EAAe+H,QACf7B,EAAO,QAITgB,EAAgB98C,WAAW,KACzB41C,EAAe+H,IACd,SAqFGvhD,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACE5oB,IAAA6b,cAACgG,KAAM,CACLD,QAAQ,WACR3U,MAAM,UACN6U,QAASA,IAAMg+B,GAAsB,IAEpC/nC,KAAKkB,EAAE,qCAEVjZ,IAAA6b,cAACoD,GAAG,CACFC,KAAMpO,EAAKxD,QACX6R,QAAQ,0BACRvY,IAAKA,IACH5G,IAAA6b,cAAC2lC,KAAgB,CACf1vC,MAAOiG,KAAKkB,EAAE,2BACdwoC,eAAe,QACfC,QACE1hD,IAAA6b,cAAC8lC,KAAM,CACLr2B,KAAK,QACL6xB,QAAS4C,EACTr+B,SAAUA,IACRs+B,EAAmB1kB,IAAeA,GAEpC31B,KAAK,iBACLsH,MAAM,iBAQpBjN,IAAA6b,cAACmhC,GAAkB,CACjBj0B,MAAO,CAAEmC,WAAY,GACrB+a,iBAAkBA,EAClBgX,WAAgB,OAAJnsC,QAAI,IAAJA,OAAI,EAAJA,EAAMb,OAClByR,SAAWymB,GAAWV,EAAoBU,MAG9CnoC,IAAA6b,cAACkhC,GAAQ,CAAChhC,MAAO4iC,EAAKh5C,KAAK,OAAO6b,UAAWR,EAAQu9B,gBACnDv+C,IAAA6b,cAACglC,KAAI,CACH9kC,MAAO4jC,EACPj+B,SAvHoBkgC,CAAC7xB,EAAG+jB,KAC9B8L,EAAW9L,IAuHLiN,eAAe,UACfC,UAAU,UACVp/B,QAAQ,aAER5hB,IAAA6b,cAAColC,KAAG,CACFnvC,MACE9R,IAAA6b,cAAC4M,IAAK,CACJjH,UAAWR,EAAQ+f,MACnB3W,aAAc81B,EACdjzC,MAAM,WAEL8K,KAAKkB,EAAE,+BAGZ8C,MAAO,SAET/b,IAAA6b,cAAColC,KAAG,CACFnvC,MACE9R,IAAA6b,cAAC4M,IAAK,CACJjH,UAAWR,EAAQ+f,MACnB3W,aAAcg2B,EACdnzC,MAAM,aAEL8K,KAAKkB,EAAE,8BAGZ8C,MAAO,aAGX/b,IAAA6b,cAACivB,KAAK,CAACtpB,UAAWR,EAAQu9B,gBACxBv+C,IAAA6b,cAACgmC,GAAW,CACVv5C,OAAO,OACPyG,QAASgxC,EACT9Z,iBAAkBA,EAClBuW,YAAcsF,GAAQ3B,EAAa2B,GACnC/4B,MAAO43B,EAAgB,UAEzB3gD,IAAA6b,cAACgmC,GAAW,CACVv5C,OAAO,UACP29B,iBAAkBA,EAClBuW,YAAcsF,GAAQzB,EAAgByB,GACtC/4B,MAAO43B,EAAgB,eAI7B3gD,IAAA6b,cAACkhC,GAAQ,CAAChhC,MAAO4iC,EAAKh5C,KAAK,SAAS6b,UAAWR,EAAQu9B,gBACrDv+C,IAAA6b,cAACgmC,GAAW,CACVv5C,OAAO,SACPyG,SAAS,EACTk3B,iBAAkBA,KAGtBjmC,IAAA6b,cAACkhC,GAAQ,CAAChhC,MAAO4iC,EAAKh5C,KAAK,SAAS6b,UAAWR,EAAQu9B,gBACrDv+C,IAAA6b,cAACuhC,GAAU,CAACC,WA5JUE,IAC1B,MAAMrtC,EAAOqtC,EAAUn7B,IAAKnJ,GAAMA,EAAEtO,IACpC41C,EAAgBrwC,MA2JC,UAAZ5C,GACCtN,IAAA6b,cAACkiC,GAAW,CAACV,WAzJQE,IAC3B,MAAMp3C,EAAQo3C,EAAUn7B,IAAKnJ,GAAMA,EAAEtO,IACrC81C,EAAiBt6C,MAyJbnG,IAAA6b,cAACgmC,GAAW,CACVn7B,YAAaA,EACb3X,SAAS,EACTmB,KAAMowC,EACNn6C,MAAOq6C,EACPva,iBAAkBA,O,qDC1Ub8b,OA1CepmC,IAAkB,IAAjB,QAAEqF,GAASrF,EACzC,OACC3b,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQ9Y,SACvBlI,IAAA6b,cAACivB,KAAK,CAAChS,QAAM,EAAClX,QAAQ,WAAWJ,UAAWR,EAAQghC,eACnDhiD,IAAA6b,cAACupB,KAAI,CAACC,WAAS,GACdrlC,IAAA6b,cAACupB,KAAI,CAACE,MAAI,GACTtlC,IAAA6b,cAACud,KAAQ,CACRC,UAAU,OACVzX,QAAQ,SACRxB,MAAO,GACPM,OAAQ,GACRc,UAAWR,EAAQihC,iBAGrBjiD,IAAA6b,cAACupB,KAAI,CAACE,MAAI,GACTtlC,IAAA6b,cAACud,KAAQ,CAACC,UAAU,OAAO3Y,OAAQ,GAAIN,MAAO,KAC9CpgB,IAAA6b,cAACud,KAAQ,CAACC,UAAU,OAAO3Y,OAAQ,GAAIN,MAAO,KAC9CpgB,IAAA6b,cAACud,KAAQ,CAACC,UAAU,OAAO3Y,OAAQ,GAAIN,MAAO,QAIjDpgB,IAAA6b,cAACivB,KAAK,CAAChS,QAAM,EAACtX,UAAWR,EAAQkhC,gBAChCliD,IAAA6b,cAAC8O,IAAU,CAAC/I,QAAQ,aAClB7J,KAAKkB,EAAE,4BAETjZ,IAAA6b,cAACivB,KAAK,CAAChS,QAAM,EAAClX,QAAQ,WAAWJ,UAAWR,EAAQmhC,kBACnDniD,IAAA6b,cAACud,KAAQ,CAACC,UAAU,OAAO3Y,OAAQ,GAAIN,MAAO,KAC9CpgB,IAAA6b,cAACud,KAAQ,CAACC,UAAU,OAAO3Y,OAAQ,GAAIN,MAAO,OAE/CpgB,IAAA6b,cAACivB,KAAK,CAAChS,QAAM,EAAClX,QAAQ,WAAWJ,UAAWR,EAAQmhC,kBACnDniD,IAAA6b,cAACud,KAAQ,CAACC,UAAU,OAAO3Y,OAAQ,GAAIN,MAAO,KAC9CpgB,IAAA6b,cAACud,KAAQ,CAACC,UAAU,OAAO3Y,OAAQ,GAAIN,MAAO,OAE/CpgB,IAAA6b,cAACivB,KAAK,CAAChS,QAAM,EAAClX,QAAQ,WAAWJ,UAAWR,EAAQmhC,kBACnDniD,IAAA6b,cAACud,KAAQ,CAACC,UAAU,OAAO3Y,OAAQ,GAAIN,MAAO,KAC9CpgB,IAAA6b,cAACud,KAAQ,CAACC,UAAU,OAAO3Y,OAAQ,GAAIN,MAAO,UCxBnD,MAAMR,GAAYC,YAAWnG,IAAK,CACjCoG,KAAM,CACLC,QAAS,OACT0Q,SAAU,QAEXwY,UAAW,CACVzoB,YAAa9G,EAAMuoB,QAAQ,GAC3B5P,KAAM,GAGPkmB,UAAW,CACVx4B,QAAS,OACT4T,eAAgB,SAChB1T,WAAY,UAGb+mB,WAAY,CACXhe,SAAU,YAGX8B,eAAgB,CACf7d,MAAO8d,KAAM,KACb/B,SAAU,WACVgC,IAAK,MACLC,KAAM,MACNtK,WAAY,GACZuK,YAAa,IAGXk3B,WAAY,CACRxhC,gBAAiB,UAInB43B,GAAgBrR,OAAaC,MAAM,CACxCzhC,KAAMwhC,OACJxB,IAAI,EAAG,cACPC,IAAI,GAAI,aACRyB,SAAS,YACXz6B,OAAQu6B,OAAaxB,IAAI,EAAG,cAAcC,IAAI,GAAI,aAClDhgC,MAAOuhC,OAAavhC,MAAM,mBAGpB,SAASy8C,GAAW1mC,GAAyC,IAAvC,eAAE29B,EAAc,OAAEX,EAAM,SAAE2J,GAAU3mC,EAChE,MAAMqF,EAAUpB,MAEThS,EAASqtB,GAAc/f,mBAASo+B,GAEpCl+B,oBAAU,KACN6f,EAAWqe,IACZ,CAACA,IAkBJ,OACIt5C,IAAA6b,cAACisB,KAAM,CACHC,cAAen6B,EACfo6B,oBAAoB,EACpBC,iBAAkBuQ,GAClBtQ,SAAUA,CAACC,EAAQ1/B,KACf7E,WAAW,KAtBAyX,WACzB,IACC,GAAIzN,EAAQjD,SACLiP,GAAIqnB,IAAI,aAAD//B,OAAc0M,EAAQjD,IAAMw9B,OACnC,CACN,MAAM,KAAEtvB,SAAee,GAAIoD,KAAK,YAAamrB,GACzCwQ,GACHA,EAAO9/B,GAGTG,IAAMxT,QAAQuS,KAAKkB,EAAE,yBACpB,MAAOT,GACRD,GAAWC,KAWMqgC,CAAkB1Q,GAClB1/B,EAAQ4/B,eAAc,IACvB,OAGNzc,IAAA,IAAC,OAAEuc,EAAM,OAAEI,EAAM,QAAED,EAAO,aAAEE,GAAc5c,EAAA,OACvC5rB,IAAA6b,cAAC4sB,KAAI,KACDzoC,IAAA6b,cAACupB,KAAI,CAACC,WAAS,EAACpD,QAAS,GAMrBjiC,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,IACXxlC,IAAA6b,cAAC6sB,KAAK,CACFC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,0BACdtT,KAAK,OACLijC,WAAS,EACT9vB,MAAOwvB,EAAQ3iC,MAAQkvB,QAAQ0T,EAAO5iC,MACtCkjC,WAAYP,EAAQ3iC,MAAQ4iC,EAAO5iC,KACnCic,QAAQ,WACR1B,OAAO,QACPsB,UAAWR,EAAQioB,UACnBpY,WAAS,KAGjB7wB,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,IACXxlC,IAAA6b,cAAC6sB,KAAK,CACFC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,4BACdtT,KAAK,SACLmT,MAAOwvB,EAAQ17B,QAAUioB,QAAQ0T,EAAO37B,QACxCi8B,WAAYP,EAAQ17B,QAAU27B,EAAO37B,OACrC6B,YAAY,gBACZmT,QAAQ,WACR1B,OAAO,QACP2Q,WAAS,KAGjB7wB,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,IACXxlC,IAAA6b,cAAC6sB,KAAK,CACFC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,2BACdtT,KAAK,QACLmT,MAAOwvB,EAAQ1iC,OAASivB,QAAQ0T,EAAO3iC,OACvCijC,WAAYP,EAAQ1iC,OAAS2iC,EAAO3iC,MACpC6I,YAAY,gBACZoiB,WAAS,EACT3Q,OAAO,QACP0B,QAAQ,cAGhB5hB,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GAAIvD,QAAS,GACxBjiC,IAAA6b,cAACupB,KAAI,CAACC,WAAS,EAACpD,QAAS,GACrBjiC,IAAA6b,cAACupB,KAAI,CAACI,GAAI,EAAGF,MAAI,GACbtlC,IAAA6b,cAACgG,KAAM,CACHC,QAASwgC,EACTr1C,MAAM,YACNzG,SAAUgiC,EACV5mB,QAAQ,WACRiP,WAAS,GAER9Y,KAAKkB,EAAE,iCAGhBjZ,IAAA6b,cAACupB,KAAI,CAACpkB,QAASA,EAAQohC,WAAY5c,GAAI,EAAGF,MAAI,GAC1CtlC,IAAA6b,cAACgG,KAAM,CACHjX,KAAK,SACLqC,MAAM,UACNzG,SAAUgiC,EACV5mB,QAAQ,YACRJ,UAAWR,EAAQgmB,WACnBnW,WAAS,GAERjjB,EAAQjD,GAAE,GAAAzJ,OACF6W,KAAKkB,EAAE,gCAA8B,GAAA/X,OACrC6W,KAAKkB,EAAE,+BACfuvB,GACGxoC,IAAA6b,cAACwP,KAAgB,CACbC,KAAM,GACN9J,UAAWR,EAAQ8J,yBCjKnE,MAAMlL,GAAYC,YAAYnG,IAAK,CAC/B6oC,OAAQ,CACJniC,MAAO,WAIA,SAASoiC,GAA4B3+B,GAChD,MAAM,KAAEhY,EAAI,WAAE42C,GAAe5+B,EACvB7C,EAAUpB,KAMhB,OACI5f,IAAA6b,cAACyG,IAAQ,CAACrC,WAAW,cACjBjgB,IAAA6b,cAACwkB,KAAc,KACXrgC,IAAA6b,cAACyd,KAAM,CAACnL,IAAKtiB,EAAKiF,KAAKnL,KAAM6qB,IAAI,iCAErCxwB,IAAA6b,cAAC0G,IAAY,CACTC,QACIxiB,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACI5oB,IAAA6b,cAAC8O,IAAU,CACPjG,UAAU,OACV9C,QAAQ,QACRJ,UAAWR,EAAQuhC,OACnBt1C,MAAM,eAELpB,EAAKA,OAIlB4W,UACIziB,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACK/c,EAAKiF,KAAKnL,KAAK,KAAGkY,IAAOhS,EAAKqW,WAAWjE,OAAO,qBAI7Dje,IAAA6b,cAAC8G,KAAuB,KACpB3iB,IAAA6b,cAAC+G,IAAU,CAACd,QAASA,KA5B7B2gC,EA4BgD52C,IAAOwiC,KAAK,MAAM7J,aAAW,UACjExkC,IAAA6b,cAACmH,KAAU,SChBhB0/B,OAnCQA,KA4BZ,CACHC,SA3BatnC,UACb,MAAQxC,KAAMwK,SAAuBzJ,GAAI2C,QAAQ,CAC7C4G,IAAK,gBACLC,OAAQ,OACRvK,SAEJ,OAAOwK,GAsBPu/B,WAnBevnC,UACf,MAAM,KAAExC,SAAee,GAAI2C,QAAQ,CAC/B4G,IAAI,iBAADjiB,OAAmByJ,GACtByY,OAAQ,WAEZ,OAAOvK,GAePgqC,UAZcxnC,UACd,MAAM,KAAExC,SAAee,GAAI2C,QAAQ,CAC/B4G,IAAK,qBACLC,OAAQ,MACRhiB,WAEJ,OAAOyX,KCPf,MAAM+G,GAAYC,YAAYnG,IAAK,CAC/BoG,KAAM,CACF,uBAAwB,CACpBI,OAAQxG,EAAMuoB,QAAQ,GACtB7hB,MAAO,UAGfU,KAAM,CACFV,MAAO,OACPsR,SAAU,QACVqQ,UAAW,QACXnhB,gBAAiBlH,EAAM8f,QAAQgD,WAAWqI,MAC1C9T,SAAU,QAEdwxB,OAAQ,CACJniC,MAAO,WAIT0iC,GAAa3b,OAAaC,MAAM,CACrCv7B,KAAMs7B,OACJxB,IAAI,EAAG,cACP0B,SAAS,cAEL,SAAS0b,GAAYpnC,GAAe,IAAb,OAAEuY,GAAQvY,EACpC,MAAQhR,GAAIwpB,EAAQ,UAAEukB,GAAcxkB,EAC9BlT,EAAUpB,MACTojC,EAASC,GAAc/nC,mBAAS,CAAErP,KAAM,MACxCmP,EAASC,GAAcC,oBAAS,IAChCgoC,EAAoBC,GAAyBjoC,oBAAS,IACtDkoC,EAAcC,GAAmBnoC,mBAAS,KAC1CooC,EAAOC,GAAYroC,mBAAS,KAC7B,SAAEynC,EAAQ,WAAEC,EAAU,UAAEC,GAAcH,KAE5CtnC,oBAAU,MACNC,iBACImoC,UACMC,IAEVC,IAED,IAEH,MAAMF,EAAmBA,KACrBP,EAAW,CAAEp3C,KAAM,KACnBoP,GAAW,IAGT0oC,EAAuB5zB,IACzBkzB,EAAW,CAAEp3C,KAAMkkB,EAAEpO,OAAO5F,SAoB1B6nC,EAA0Bte,IAC5B+d,EAAgB/d,GAChB6d,GAAsB,IAgBpBM,EAAYpoC,UACdJ,GAAW,GACX,IACI,MAAMqoC,QAAcT,EAAU,CAAE1uB,WAAUukB,cAC1C6K,EAASD,GACX,MAAOvzB,GACL/W,IAAMF,MAAMiX,GAEhB9U,GAAW,IAaf,OACIjb,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACI5oB,IAAA6b,cAACuS,GAAiB,CACd9oB,MAAM,mBACNsJ,KAAMs0C,EACN70B,QAAS80B,EACT70B,UAxCSjT,UACjBJ,GAAW,GACX,UACU2nC,EAAWQ,EAAaz4C,UACxB84C,IACNJ,EAAgB,IAChBrqC,IAAMxT,QAAQ,6CAChB,MAAOuqB,GACL/W,IAAMF,MAAMiX,GAEhB9U,GAAW,KA+BN,2CAGDjb,IAAA6b,cAACisB,KAAM,CACHC,cAAeib,EACfhb,oBAAoB,EACpBC,iBAAkB6a,GAClB5a,SAAUA,CAACC,EAAQ1/B,KACf7E,WAAW,KAvERyX,WACfJ,GAAW,GACX,UACU0nC,EAAS,IACRxa,EACHhU,WACAukB,oBAEE+K,IACNR,EAAW,CAAEp3C,KAAM,KACnBmN,IAAMxT,QAAQ,4CAChB,MAAOuqB,GACL/W,IAAMF,MAAMiX,GAEhB9U,GAAW,IA0DK4oC,CAAW1b,GACX1/B,EAAQ4/B,eAAc,IACvB,OAINzc,IAAA,IAAC,QAAE0c,EAAO,OAAEC,EAAM,UAAEub,GAAWl4B,EAAA,OAC5B5rB,IAAA6b,cAAC4sB,KAAI,KACDzoC,IAAA6b,cAACupB,KAAI,CAACC,WAAS,EAACpD,QAAS,GACrBjiC,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAIF,MAAI,GACdtlC,IAAA6b,cAAC6sB,KAAK,CACFC,GAAIlnB,KACJ9b,KAAK,OACLo+C,KAAM,EACNjyC,MAAOiG,KAAKkB,EAAE,gDACdxK,YAAasJ,KAAKkB,EAAE,mDACpB+qC,WAAW,EACXlrC,MAAOwvB,EAAQz8B,MAAQgpB,QAAQ0T,EAAO18B,MACtCg9B,WAAYP,EAAQz8B,MAAQ08B,EAAO18B,KACnC+V,QAAQ,WACRF,SAAUiiC,EACV9yB,WAAS,KAGfyyB,EAAMvhD,OAAS,GACb/B,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAIF,MAAI,GACdtlC,IAAA6b,cAACsG,IAAI,CAACX,UAAWR,EAAQF,MAnD9CwiC,EAAMlhC,IAAKvW,GACP7L,IAAA6b,cAAC2mC,GAA0B,CAC9B32C,KAAMA,EACN+R,IAAK/R,EAAKlB,GACV83C,WAAYmB,OAoDA5jD,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAIF,MAAI,GACdtlC,IAAA6b,cAACupB,KAAI,CAACC,WAAS,EAACpD,QAAS,GACrBjiC,IAAA6b,cAACupB,KAAI,CAACI,GAAI,EAAGF,MAAI,GACbtlC,IAAA6b,cAACgG,KAAM,CACHC,QAASA,KACLmhC,EAAW,IACXa,EAAU,KAEd72C,MAAM,UACN2U,QAAQ,WACRiP,WAAS,GACZ,aAIL7wB,IAAA6b,cAACupB,KAAI,CAACI,GAAI,EAAGF,MAAI,GACbtlC,IAAA6b,cAACsP,GAAiB,CAACnQ,QAASA,EAAS/N,MAAM,UAAUrC,KAAK,SAASgX,QAAQ,YAAYgnB,WAAS,EAAC/X,WAAS,GAAC,kBCxKnJ,MAEMjR,GAAYC,YAAWnG,IAAK,CACjCyvB,OAAQ,CACP/oB,MAJkB,IAKlB6jC,WAAY,GAEb5X,YAAa,CACZjsB,MARkB,IASlBL,QAAS,OACTo8B,UAAW,gCACX+H,YAAa,gCACbvrB,aAAc,gCACd1L,qBAAsB,EACtBE,wBAAyB,GAE1BtY,OAAQ,CACPkL,QAAS,OACT4Y,aAAc,gCACd/X,gBAAiBlH,EAAM8f,QAAQ2qB,cAC/BlkC,WAAY,SACZ2K,QAASlR,EAAMuoB,QAAQ,EAAG,GAC1BjR,UAAW,OACX2C,eAAgB,cAEjBzrB,QAAS,CACR6X,QAAS,OACTa,gBAAiBlH,EAAM8f,QAAQ2qB,cAC/BnkC,cAAe,SACf4K,QAAS,kBACTlK,OAAQ,OACR2Q,UAAW,YACR3X,EAAM4X,iBAGV2wB,cAAe,CACd/hC,OAAQ,GACRE,MAAO,IACPM,OAAQ,KAGTshC,cAAe,CACdjiC,QAAS,OACT6K,QAAS,EACT5K,cAAe,SACfC,WAAY,SACZ0T,eAAgB,SAChB,QAAS,CACRzT,OAAQ,IAIVgiC,eAAgB,CACfvhC,UAAW,EACXiK,QAAS,EACT7K,QAAS,OACTC,cAAe,UAEhBmiC,iBAAkB,CACjBxhC,UAAW,EACXiK,QAAS,MAmHIw5B,OA/GOzoC,IAA4D,IAAD0oC,EAAA,IAA1D,KAAEz1C,EAAI,kBAAE01C,EAAiB,QAAE12C,EAAO,OAAEsmB,EAAM,QAAElZ,GAASW,EAC3E,MAAMqF,EAAUpB,MAETy5B,EAAWkL,GAAgBrpC,oBAAS,IACpCspC,EAAUC,GAAevpC,oBAAS,GAMzC,OAJAE,oBAAU,KACTqpC,GAAY,IACV,CAAC71C,EAAMhB,IAGT5N,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACC5oB,IAAA6b,cAACoyB,IAAM,CACNzsB,UAAWR,EAAQmoB,OACnBvnB,QAAQ,aACRqwB,OAAO,QACPrjC,KAAMA,EACN81C,WAAY,CAAE37B,MAAO,CAAEC,SAAU,aACjC27B,cAAe,CAAE57B,MAAO,CAAEC,SAAU,aACpC47B,WAAY,CACXvf,UAAW/N,SAASC,eAAe,oBACnCxO,MAAO,CAAEC,SAAU,aAEpBhI,QAAS,CACR6jB,MAAO7jB,EAAQqrB,cAGhBrsC,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQnM,QACvB7U,IAAA6b,cAAC+G,IAAU,CAACd,QAASwiC,GACpBtkD,IAAA6b,cAACgpC,KAAS,OAEX7kD,IAAA6b,cAAC8O,IAAU,CAAC5B,MAAO,CAAEiU,YAAa,WAChCjlB,KAAKkB,EAAE,0BAGT+B,EACAhb,IAAA6b,cAACkmC,GAAqB,CAAC/gC,QAASA,IAEhChhB,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQ9Y,SACvBlI,IAAA6b,cAACivB,KAAK,CAAChS,QAAM,EAAClX,QAAQ,WAAWJ,UAAWR,EAAQghC,eACnDhiD,IAAA6b,cAACkd,KAAU,CACVjX,QAASA,OACTiH,MAAO,CAAEoR,OAAQ,UAAW/Z,MAAO,QACnC4Y,qBAAsB,CAAEC,QAAQ,GAChCC,yBAA0B,CAAED,QAAQ,GACpCE,OAAQn5B,IAAA6b,cAACyd,KAAM,CAAC9I,IAAK5iB,EAAQwsB,cAAejM,IAAI,gBAAgBpF,MAAO,CAAE3I,MAAO,GAAIM,OAAQ,MAC5Fpb,MACCtF,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACC5oB,IAAA6b,cAAC8O,IAAU,CAAC7I,QAASA,IAAM2iC,GAAY,IACrC72C,EAAQjI,KACT3F,IAAA6b,cAACipC,KAAU,CAAC/7B,MAAO,CAACE,SAAU,GAAIiC,WAAY,OAIjDqO,UACCv5B,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACC5oB,IAAA6b,cAAC8O,IAAU,CAAC5B,MAAO,CAACE,SAAU,KAC7BjpB,IAAA6b,cAACkpC,KAAI,CAAC/uB,KAAI,OAAA90B,OAAS0M,EAAQhB,SAAWgB,EAAQhB,SAE/C5M,IAAA6b,cAAC8O,IAAU,CAAC5B,MAAO,CAACE,SAAU,KAC7BjpB,IAAA6b,cAACkpC,KAAI,CAAC/uB,KAAI,UAAA90B,OAAY0M,EAAQhI,QAAUgI,EAAQhI,WAKpD5F,IAAA6b,cAACgG,KAAM,CACND,QAAQ,WACR3U,MAAM,UACN6U,QAASA,IAAMyiC,GAAcC,GAC7Bz7B,MAAO,CAACE,SAAU,KAEjBlR,KAAKkB,EAAE,+BAEPrL,EAAQjD,IAAM65C,GAAaxkD,IAAA6b,cAACwmC,GAAW,CAAC/I,eAAgB1rC,EAAS00C,SAAUA,IAAMmC,GAAY,MAEhGzkD,IAAA6b,cAACivB,KAAK,CAAChS,QAAM,EAAClX,QAAQ,WAAWJ,UAAWR,EAAQkhC,gBACnDliD,IAAA6b,cAAC8O,IAAU,CAAC/I,QAAQ,YAAYmH,MAAO,CAAC1I,aAAc,KACpDtI,KAAKkB,EAAE,8CAETjZ,IAAA6b,cAACknC,GAAY,CAAC7uB,OAAQA,KAEvBl0B,IAAA6b,cAACivB,KAAK,CAAChS,QAAM,EAAClX,QAAQ,WAAWJ,UAAWR,EAAQkhC,gBACnDliD,IAAA6b,cAAC48B,GAAY,CACZ7pC,KAAMyqC,EACNhrB,QAASA,IAAMk2B,GAAa,GAC5B7L,UAAW9qC,EAAQjD,KAEpB3K,IAAA6b,cAAC8O,IAAU,CAAC/I,QAAQ,aAClB7J,KAAKkB,EAAE,4BAED,OAAPrL,QAAO,IAAPA,GAAkB,QAAXy2C,EAAPz2C,EAASjB,iBAAS,IAAA03C,OAAX,EAAPA,EAAoBjiC,IAAI42B,GACxBh5C,IAAA6b,cAACivB,KAAK,CACLltB,IAAKo7B,EAAKruC,GACVmuB,QAAM,EACNlX,QAAQ,WACRJ,UAAWR,EAAQmhC,kBAEnBniD,IAAA6b,cAACyqB,KAAU,KAAE0S,EAAKrzC,MAClB3F,IAAA6b,cAAC8O,IAAU,CAACjG,UAAU,MAAMuU,QAAM,EAAClQ,MAAO,CAAEgJ,WAAY,IACvD/xB,IAAA6b,cAAC8P,GAAe,KAAEqtB,EAAKj9B,e,kNCvLjC,MAAM6D,GAAYC,YAAWnG,IAAK,CACjCsrC,SAAU,CACTjlC,QAAS,OACTmL,WAAY,GACZ1K,YAAa,GACbP,WAAY,aAuCCglC,OAnCQA,KACtB,MAAMjkC,EAAUpB,MAKTslC,EAAOC,GAAYjqC,mBAJL,CACpBq1B,QAAS,EACT6U,QAAS,IAIVhqC,oBAAU,KACT,MAAMyyB,EAAWC,YAChB,IACCqX,EAAS7pB,GACkB,KAAtBA,EAAU8pB,QACN,IAAK9pB,EAAWiV,QAASjV,EAAUiV,QAAU,EAAG6U,QAAS,GAE1D,IAAK9pB,EAAW8pB,QAAS9pB,EAAU8pB,QAAU,IAEtD,KAED,MAAO,KACNrX,cAAcF,KAEb,IAEH,MAAMwX,EAAU3hB,GACRA,EAAI,GAAK,IAAMA,EAAIA,EAG3B,OACC1jC,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQgkC,UACvBhlD,IAAA6b,cAAA,eAAA3a,OAAUmkD,EAAQH,EAAM3U,SAAQ,KAAArvC,OAAImkD,EAAQH,EAAME,aCKtCE,OA7CUA,KAqCd,CACH3+C,KApCS0U,UACT,MAAQxC,KAAMwK,SAAuBzJ,GAAI2C,QAAQ,CAC7C4G,IAAK,kBACLC,OAAQ,OACRvK,SAEJ,OAAOwK,GA+BPrQ,OA5BWqI,UACX,MAAQxC,KAAMwK,SAAuBzJ,GAAI2C,QAAQ,CAC7C4G,IAAI,mBAADjiB,OAAqB2X,EAAKlO,IAC7ByY,OAAQ,MACRvK,SAEJ,OAAOwK,GAuBPkiC,aApBiBlqC,UACjB,MAAM,KAAExC,SAAee,GAAI2C,QAAQ,CAC/B4G,IAAI,mBAADjiB,OAAqByJ,GACxByY,OAAQ,WAEZ,OAAOvK,GAgBPiI,KAbSzF,UACT,MAAM,KAAExC,SAAee,GAAI2C,QAAQ,CAC/B4G,IAAK,uBACLC,OAAQ,MACRhiB,WAEJ,OAAOyX,KCEf,MAAM2sC,GAAc,IAAIC,KAAY,CAAEC,QAAS,MAEzC9lC,GAAYC,YAAYnG,IAAK,CACjC2gB,YAAa,CACXzZ,gBAAiBlH,EAAM8f,QAAQmsB,SAC/B5lC,QAAS,OACTC,cAAe,SACfC,WAAY,SACZk8B,UAAW,iCAGbyJ,cAAe,CACbhlC,gBAAiBlH,EAAM8f,QAAQqsB,cAC/BzlC,MAAO,OACPL,QAAS,OACT6K,QAAS,MACT3K,WAAY,UAGd6lC,oBAAqB,CACnBl7B,QAAS,EACTpK,YAAa,EACbI,gBAAiBlH,EAAM8f,QAAQusB,YAC/BhmC,QAAS,OACTc,aAAc,GACdwR,KAAM,GAGR2zB,aAAc,CACZ78B,YAAa,GACbkJ,KAAM,EACNyX,OAAQ,QAGVmc,iBAAkB,CAChBh5C,MAAO,QAGTi5C,YAAa,CACXnmC,QAAS,QAGXomC,sBAAuB,CACrBpmC,QAAS,OACT6K,QAAS,YACT5B,SAAU,WACV2K,eAAgB,gBAChB1T,WAAY,SACZW,gBAAiB,OACjBu7B,UAAW,iCAGbiK,SAAU,CACRp9B,SAAU,WACVmK,OAAQ,GACR/S,MAAO,GACP+7B,UAAW,qBAGb5qB,cAAe,CACbtkB,MAAO8d,KAAM,KACbyG,QAAS,MACTxI,SAAU,WACVgC,IAAK,MACLC,KAAM,MACNC,YAAa,IAGfm7B,aAAc,CACZp5C,MAAO8d,KAAM,KACbyG,QAAS,OAGX80B,gBAAiB,CACfvmC,QAAS,OACTE,WAAY,SACZud,aAAc,UAGhB+oB,gBAAiB,CACft5C,MAAO,OAGTu5C,cAAe,CACbv5C,MAAO,SAGTw5C,mBAAoB,CAClB1mC,QAAS,OACTK,MAAO,OACPH,WAAY,SACZ0T,eAAgB,SAChB5B,WAAY,EACZ5I,YAAa,GACb2I,aAAc,GAGhB40B,qBAAsB,CACpBr0B,KAAM,EACN7R,YAAa,EACb6Q,UAAW,SACXzQ,gBAAiB,sBACjBC,aAAc,QACdd,QAAS,OACTiJ,SAAU,YAGZ29B,gBAAiB,CACf/7B,QAAS,GACTlK,OAAQ,OACRX,QAAS,QACT6R,WAAY,WACZb,SAAU,UAGZ61B,4BAA6B,CAC3Bv0B,KAAM,OACNjS,MAAO,MACPQ,gBAAiB,WAGnBimC,yBAA0B,CACxBx0B,KAAM,OACNjS,MAAO,MACPQ,gBAAiB,WAGnBgS,mBAAoB,CAClB7S,QAAS,OACT9S,MAAO,UACP4d,WAAY,QAIVi8B,GAAgBjjC,IACpB,MAAM,SAAErd,EAAQ,UAAEugD,EAAS,aAAEC,EAAY,eAAEC,GAAmBpjC,EACxD7C,EAAUpB,KAChB,OACE5f,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACE5oB,IAAA6b,cAAC+G,IAAU,CACT4hB,aAAW,cACX9f,UAAU,OACVle,SAAUA,EACVsb,QAAUiO,GAAMi3B,EAAc1rB,IAAeA,IAE7Ct7B,IAAA6b,cAACqrC,KAAQ,CAAC1lC,UAAWR,EAAQilC,oBAE9Bc,EACC/mD,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQolC,UACtBpmD,IAAA6b,cAACsrC,KAAM,CACLC,QAAS,GACTC,aAAa,EACbC,eAAe,EACfC,SAAUN,KAGZ,OAKJO,GAAc3jC,IAClB,MAAM,MAAEzD,EAAK,eAAEqnC,EAAc,YAAEryC,GAAgByO,EAC/C,OAAI6jC,aAAU,KAAMtnC,GAEhBpgB,IAAA6b,cAAC2lC,KAAgB,CACfz4B,MAAO,CAAEvI,YAAa,EAAGvT,MAAO,QAChC6E,MAAOiG,KAAKkB,EAAE,6BACdwoC,eAAe,QACfC,QACE1hD,IAAA6b,cAAC8lC,KAAM,CACLr2B,KAAK,QACL6xB,QAAS/nC,EACTsM,SAAWqO,IACT03B,EAAe13B,EAAEpO,OAAOw7B,UAE1Bx3C,KAAK,iBACLsH,MAAM,cAMT,MAGH06C,GAAa9jC,IACjB,MAAM,mBAAE+jC,EAAkB,cAAEC,GAAkBhkC,EACxC7C,EAAUpB,KAChB,OACE5f,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACE5oB,IAAA6b,cAAA,SACEqqB,UAAQ,EACRt7B,KAAK,OACLD,GAAG,gBACHnE,SAAUqhD,IACVrmC,UAAWR,EAAQklC,YACnBxkC,SAAUkmC,IAEZ5nD,IAAA6b,cAAA,SAAOisC,QAAQ,iBACb9nD,IAAA6b,cAAC+G,IAAU,CACT4hB,aAAW,SACX9f,UAAU,OACVle,SAAUqhD,KAEV7nD,IAAA6b,cAACksC,KAAc,CAACvmC,UAAWR,EAAQilC,uBAOvC+B,GAAiBnkC,IACrB,MAAM,aACJokC,EAAY,QACZjtC,EAAO,UACPktC,EAAS,aACTC,EAAY,kBACZvoB,EAAiB,kBACjBwoB,EAAiB,kBACjBC,EAAiB,qBACjBC,GACEzkC,EACE7C,EAAUpB,KAChB,OAAIqoC,EAEAjoD,IAAA6b,cAAC+G,IAAU,CACT4hB,aAAW,cACX9f,UAAU,OACV5C,QAAS8d,EACTp5B,SAAUwU,GAEVhb,IAAA6b,cAAC0sC,KAAQ,CAAC/mC,UAAWR,EAAQilC,oBAGxBiC,EAEPloD,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQslC,iBACtBtmD,IAAA6b,cAAC+G,IAAU,CACT4hB,aAAW,kBACX9f,UAAU,OACVuE,SAAS,QACTziB,SAAUwU,EACV8G,QAASsmC,GAETpoD,IAAA6b,cAAC2sC,KAAgB,CAAChnC,UAAWR,EAAQulC,mBAEtCvrC,EACChb,IAAA6b,cAAA,WACE7b,IAAA6b,cAACwP,KAAgB,CAAC7J,UAAWR,EAAQqlC,gBAGvCrmD,IAAA6b,cAACopC,GAAc,MAGjBjlD,IAAA6b,cAAC+G,IAAU,CACT4hB,aAAW,oBACX9f,UAAU,OACV5C,QAASumC,EACT7hD,SAAUwU,GAEVhb,IAAA6b,cAAC4sC,KAAsB,CAACjnC,UAAWR,EAAQwlC,kBAM/CxmD,IAAA6b,cAAC+G,IAAU,CACT4hB,aAAW,eACX9f,UAAU,OACVle,SAAUwU,GAA4B,SAAjBmtC,EACrBrmC,QAASwmC,GAETtoD,IAAA6b,cAAC6sC,KAAO,CAAClnC,UAAWR,EAAQilC,qBAM9B0C,GAAe9kC,IACnB,MAAM,QACJ7I,EAAO,SACPsmC,EAAQ,aACR6G,EAAY,aACZF,EAAY,gBACZW,EAAe,kBACfhpB,EAAiB,iBACjBipB,EAAgB,cAChBhB,EAAa,wBACbiB,GACEjlC,EACE7C,EAAUpB,MACT5P,EAAe+4C,GAAoB7tC,mBAAS,KAC5CpP,EAASytC,GAAcr+B,mBAAS,KAChC8tC,EAAWC,GAAgB/tC,oBAAS,IAErC,KAAEpK,GAASqK,qBAAWyD,KAEpBkC,KAAMooC,GAAsB5D,KAEpClqC,oBAAU,MACRC,iBACE,MAAMzY,EAAYG,aAAaC,QAAQ,aAEjC8I,SADiBo9C,EAAkB,CAAEtmD,YAAWE,OAAQgO,EAAKnG,MAC1CyX,IAAK0R,IAC5B,IAAIq1B,EAAmBr1B,EAAE/pB,QAIzB,OAHI4P,oBAASwvC,IAAqBA,EAAiBpnD,OAAS,KAC1DonD,EAAmBr1B,EAAE/pB,QAAQ5H,UAAU,EAAG,IAAM,OAE3C,CACL4Z,MAAO+X,EAAE/pB,QACT+H,MAAM,IAAD5Q,OAAM4yB,EAAEriB,UAAS,OAAAvQ,OAAMioD,GAC5B50C,UAAWuf,EAAEvf,aAGjBw0C,EAAiBj9C,GAEnByb,IAEC,IAEHnM,oBAAU,KACR,GACEzB,oBAASsuC,KACRpR,mBAAQoR,IACTA,EAAalmD,OAAS,EACtB,CACA,MAAMqnD,EAAYnB,EAAaoB,OAAO,GACtCJ,EAAaG,EAAU1M,QAAQ,MAAQ,GAEvC,MAAM4M,EAAkBt5C,EAAc8X,OACnCgM,GAAMA,EAAEhiB,MAAM4qC,QAAQuL,IAAiB,GAE1C1O,EAAW+P,QAEXL,GAAa,IAGd,CAAChB,IAEJ,MAqBMsB,EAAejpC,IACfA,IACFA,EAAM8jB,QACNkd,EAASvsB,QAAUzU,IAIvB,OACEtgB,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQ8kC,qBACtB9lD,IAAA6b,cAACw/B,KAAY,CACXG,UAAQ,EACR5sC,KAAMo6C,EACNr+C,GAAG,eACHoR,MAAOksC,EACPn8C,QAASA,EACT09C,UAAW,KACX9N,eAAiBR,GACXuO,oBAASvO,GACJA,EAAOppC,MAEPopC,EAGXx5B,SAAUA,CAACvgB,EAAOuoD,KAEZD,oBAASC,IAAQlsC,eAAIksC,EAAK,UAAYC,iBAAMD,EAAIn1C,YAClDq0C,EAAgBc,EAAI3tC,OACpBnY,WAAW,KACT09C,EAASvsB,QAAQsC,UAAYiqB,EAASvsB,QAAQgW,cAC7C,MACM0e,oBAASC,IAAQlsC,eAAIksC,EAAK,WAAaC,iBAAMD,EAAIn1C,aAC1Du0C,EAAwBY,GAExB9lD,WAAW,KACT09C,EAASvsB,QAAQsC,UAAYiqB,EAASvsB,QAAQgW,cAC7C,OAGP6e,cAAeA,CAACzoD,EAAOuoD,EAAKplD,KACX,UAAXA,GACFskD,EAAgBznD,EAAMwgB,OAAO5F,QAGjC8tC,QAzDW95B,IACM,SAAjBo4B,GACFU,EAAiB94B,IAwDf6rB,WAjEc7rB,IACd/U,GAAW+U,EAAE+5B,UACE,UAAV/5B,EAAEnS,KACTgiB,KA+DE7W,MAAO,CAAE3I,MAAO,QAChB2zB,YAAc3yC,IACZ,MAAM,gBAAEi3C,EAAe,WAAEwD,KAAezwB,GAAShqB,EACjD,OACEpB,IAAA6b,cAACwlC,KAAS/8B,OAAAC,OAAA,GACJnjB,EAAOy6C,WACPzwB,EAAI,CACR5kB,SAAUqhD,IACVvG,SAAUiI,EACV96C,YA7DW,SAAjB05C,EACKpwC,KAAKkB,EAAE,iCAETlB,KAAKkB,EAAE,mCA2DJ+qC,WAAS,EACTxiC,UAAWR,EAAQglC,aACnB+D,QAAS,UA4TRC,sBAnTanmC,IAAW,IAADomC,EACpC,MAAM,aAAE9B,EAAY,SAAEh0B,GAAatQ,EAC7B7C,EAAUpB,MAETsqC,EAAQC,GAAajvC,mBAAS,KAC9B+sC,EAAcW,GAAmB1tC,mBAAS,KAC1C6rC,EAAWC,GAAgB9rC,oBAAS,IACpCF,EAASC,GAAcC,oBAAS,IAChCgtC,EAAWkC,GAAgBlvC,oBAAS,GACrComC,EAAW9sB,oBACX,mBAAExF,EAAkB,gBAAED,GAC1B5T,qBAAW0T,KACP,KAAE/d,GAASqK,qBAAWyD,KAErBxJ,EAAaqyC,GC5df,SAAyB7pC,EAAKysC,GACpC,MAAOC,EAAaC,GAAkBrvC,mBAAS,KAC9C,IACC,MAAMoqB,EAAOviC,aAAaC,QAAQ4a,GAClC,OAAO0nB,EAAOjiC,KAAKC,MAAMgiC,GAAQ+kB,EAChC,MAAOvxC,GAER,OADAP,GAAWO,GACJuxC,KAiBT,MAAO,CAACC,EAbSvuC,IAChB,IACC,MAAMyuC,EACLzuC,aAAiB0uC,SAAW1uC,EAAMuuC,GAAevuC,EAElDwuC,EAAeC,GAEfznD,aAAaka,QAAQW,EAAKva,KAAK6Z,UAAUstC,IACxC,MAAO1xC,GACRP,GAAWO,MDwc0B4xC,CAAgB,cAAc,GAEpEtvC,oBAAU,KACRkmC,EAASvsB,QAAQqP,SAChB,CAACrV,IAEJ3T,oBAAU,KACRkmC,EAASvsB,QAAQqP,QACV,KACLwkB,EAAgB,IAChB5B,GAAa,GACbmD,EAAU,IACVn7B,EAAmB,QAEpB,CAACmF,EAAUnF,IAUd,MAAMi4B,EAAkBl3B,IACtB,IAAI46B,EAAQ56B,EAAE66B,OACdhC,EAAiBttB,GAAcA,EAAYqvB,IAGvC/C,EAAsB73B,IAC1B,IAAKA,EAAEpO,OAAOjR,MACZ,OAGF,MAAMm6C,EAAiB7oD,MAAM8oD,KAAK/6B,EAAEpO,OAAOjR,OAC3Cy5C,EAAUU,IAGNhC,EAAoB94B,IACpBA,EAAEg7B,cAAcr6C,MAAM,IACxBy5C,EAAU,CAACp6B,EAAEg7B,cAAcr6C,MAAM,MAuB/Bo4C,EAA0BztC,UAC9B,GAAIU,EAAMxH,UACR,IACE,MAAM,KAAEsE,SAAegB,KAAMyB,IAAIS,EAAMxH,UAAW,CAChDmZ,aAAc,SAKhB,MA5BgCrS,OAAO2vC,EAAMjhD,KACjDkR,GAAW,GACX,IACE,MAAMgwC,EAAYD,EAAKpgD,KAAK2qB,MAAM,KAAK,GAEjC21B,EAAW,IAAIC,SACfphB,EAAQ,GAAA7oC,QAAM,IAAIwC,MAAO0nD,UAAS,KAAAlqD,OAAI+pD,GAC5CC,EAASG,OAAO,SAAUL,EAAMjhB,GAChCmhB,EAASG,OAAO,OAASthD,GACzBmhD,EAASG,OAAO,UAAU,SAEpBzxC,GAAIoD,KAAK,aAAD9b,OAAcizB,GAAY+2B,GACxC,MAAO1yC,GACPD,GAAWC,GACXyC,GAAW,GAEbA,GAAW,IAUPqwC,CAA8BzyC,EAAMkD,EAAMA,YAC1C6sC,EAAgB,IAGhB,MAAOpwC,GACPD,GAAWC,GAIfowC,EAAgB,IAChBA,EAAgB7sC,EAAMA,QAwBlB6jB,EAAoBvkB,UACxB,GAA4B,KAAxB4sC,EAAajmC,OAAe,OAChC/G,GAAW,GAEX,MAAMlR,EAAU,CACd+1B,KAAM,EACNjQ,QAAQ,EACR+F,SAAU,GACVjoB,KAAMyH,EAAW,IAAAlU,OACL,OAAJ4P,QAAI,IAAJA,OAAI,EAAJA,EAAMnL,KAAI,QAAAzE,OAAO+mD,EAAajmC,QAClCimC,EAAajmC,OACjBmQ,UAAWpD,GAEb,UACQnV,GAAIoD,KAAK,aAAD9b,OAAcizB,GAAYpqB,GACxC,MAAOyO,GACPD,GAAWC,GAGbowC,EAAgB,IAChB5B,GAAa,GACb/rC,GAAW,GACX+T,EAAmB,OAGfs5B,EAAuBjtC,UAC3BJ,GAAW,GACX,UACQswC,UAAUC,aAAaC,aAAa,CAAEC,OAAO,UAC7ClG,GAAYmG,QAClBvB,GAAa,GACbnvC,GAAW,GACX,MAAOzC,GACPD,GAAWC,GACXyC,GAAW,KAITotC,EAAoBhtC,UACxBJ,GAAW,GACX,IACE,MAAO,CAAE+vC,SAAcxF,GAAYoG,OAAOC,SAC1C,GAAIb,EAAK1/B,KAAO,IAGd,OAFArQ,GAAW,QACXmvC,GAAa,GAIf,MAAMc,EAAW,IAAIC,SACfphB,EAAQ,qBAAA7oC,QAAwB,IAAIwC,MAAO0nD,UAAS,QAC1DF,EAASG,OAAO,SAAUL,EAAMjhB,GAChCmhB,EAASG,OAAO,OAAQthB,GACxBmhB,EAASG,OAAO,UAAU,SAEpBzxC,GAAIoD,KAAK,aAAD9b,OAAcizB,GAAY+2B,GACxC,MAAO1yC,GACPD,GAAWC,GAGb4xC,GAAa,GACbnvC,GAAW,IAGPmtC,EAAoB/sC,UACxB,UACQmqC,GAAYoG,OAAOC,SACzBzB,GAAa,GACb,MAAO5xC,GACPD,GAAWC,KAITqvC,EAAgBA,IACb7sC,GAAWktC,GAA8B,SAAjBC,EAiCjC,OAAI+B,EAAOnoD,OAAS,EAEhB/B,IAAA6b,cAACivB,KAAK,CAACwM,UAAW,EAAGxe,QAAM,EAACtX,UAAWR,EAAQmlC,uBAC7CnmD,IAAA6b,cAAC+G,IAAU,CACT4hB,aAAW,gBACX9f,UAAU,OACV5C,QAAUiO,GAAMo6B,EAAU,KAE1BnqD,IAAA6b,cAACiwC,KAAU,CAACtqC,UAAWR,EAAQilC,oBAGhCjrC,EACChb,IAAA6b,cAAA,WACE7b,IAAA6b,cAACwP,KAAgB,CAAC7J,UAAWR,EAAQuQ,iBAGvCvxB,IAAA6b,cAAA,YACY,QADZouC,EACGC,EAAO,UAAE,IAAAD,OAAA,EAATA,EAAWtkD,MAIhB3F,IAAA6b,cAAC+G,IAAU,CACT4hB,aAAW,cACX9f,UAAU,OACV5C,QAvJkBzG,UACxBJ,GAAW,GACX8U,EAAEoU,iBAEF,MAAM+mB,EAAW,IAAIC,SACrBD,EAASG,OAAO,UAAU,GAC1BnB,EAAOrlC,QAAS1T,IACd+5C,EAASG,OAAO,SAAUl6C,GAC1B+5C,EAASG,OAAO,OAAQl6C,EAAMxL,QAGhC,UACQiU,GAAIoD,KAAK,aAAD9b,OAAcizB,GAAY+2B,GACxC,MAAO1yC,GACPD,GAAWC,GAGbyC,GAAW,GACXkvC,EAAU,KAsIJ3jD,SAAUwU,GAEVhb,IAAA6b,cAAC0sC,KAAQ,CAAC/mC,UAAWR,EAAQilC,qBAMjCjmD,IAAA6b,cAACivB,KAAK,CAAChS,QAAM,EAACwe,UAAW,EAAG91B,UAAWR,EAAQqZ,aAC5CtL,GAhEwBhlB,KAAa,IAAD2tB,EACzC,OACE13B,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQylC,oBACtBzmD,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQ0lC,sBACtB1mD,IAAA6b,cAAA,QACE2F,UAAW2V,YAAKnW,EAAQ4lC,4BAA6B,CACnD,CAAC5lC,EAAQ6lC,2BAA4B98C,EAAQ8lB,WAGjD7vB,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQ2lC,kBACpB58C,EAAQ8lB,QACR7vB,IAAA6b,cAAA,QAAM2F,UAAWR,EAAQ4R,oBACP,QAD0B8E,EACzC3tB,EAAQ6D,eAAO,IAAA8pB,OAAA,EAAfA,EAAiB/xB,MAGrBoE,EAAQ4D,OAGb3N,IAAA6b,cAAC+G,IAAU,CACT4hB,aAAW,eACX9f,UAAU,OACVle,SAAUwU,GAA4B,SAAjBmtC,EACrBrmC,QAASA,IAAMkN,EAAmB,OAElChvB,IAAA6b,cAACkwC,KAAS,CAACvqC,UAAWR,EAAQilC,sBAwCZ+F,CAAsBj9B,GAC1C/uB,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQ4kC,eACtB5lD,IAAA6b,cAACirC,GAAY,CACXtgD,SAAUqhD,IACVZ,eAAgBA,EAChBF,UAAWA,EACXC,aAAcA,IAGhBhnD,IAAA6b,cAAC8rC,GAAS,CACRE,cAAeA,EACfD,mBAAoBA,IAGtB5nD,IAAA6b,cAAC2rC,GAAU,CACTpnC,MAAOyD,EAAMzD,MACbqnC,eAAgBA,EAChBryC,YAAaA,IAGfpV,IAAA6b,cAAC8sC,GAAW,CACV3tC,QAASA,EACTsmC,SAAUA,EACV6G,aAAcA,EACdF,aAAcA,EACdW,gBAAiBA,EAEjBhpB,kBAAmBA,EACnBipB,iBAAkBA,EAClBhB,cAAeA,EACfiB,wBAAyBA,IAG3B9oD,IAAA6b,cAACmsC,GAAa,CACZC,aAAcA,EACdjtC,QAASA,EACTktC,UAAWA,EACXC,aAAcA,EACdvoB,kBAAmBA,EACnBwoB,kBAAmBA,EACnBC,kBAAmBA,EACnBC,qBAAsBA,Q,sBEjvBnB2D,OATGA,KAMV,CAAEC,QALO7wC,UACT,MAAM,KAAExC,SAAee,GAAI0B,IAAI,UAC/B,OAAOzC,KCsBf,MAAM+G,GAAYC,YAAYnG,IAAK,CACjCgY,SAAU,CACRtR,MAAO,WAIL06B,GAAgB3B,aAAoB,CACxCn3B,MAAM,IAmQOmqC,OAhQmBxwC,IAAuC,IAAtC,UAAE09B,EAAS,QAAEhrB,EAAO,SAAE+9B,GAAUzwC,EACjE,MAAMM,EAAUC,wBACTpQ,EAASytC,GAAcr+B,mBAAS,KAChCjL,EAAQk2B,GAAajrB,mBAAS,KAC9BmxC,EAAWC,GAAgBpxC,mBAAS,KACpCF,EAASC,GAAcC,oBAAS,IAChCwL,EAAa8yB,GAAkBt+B,mBAAS,KACxCqxC,EAAcC,GAAmBtxC,mBAAS,OAC1Cy+B,EAAeC,GAAoB1+B,mBAAS,IAC7C8F,EAAUpB,MACRssC,QAASO,GAAkBR,KAC7B5sB,EAAY7K,kBAAO,IAClBylB,EAAWC,GAAgBh/B,mBAAS,KACpC2+B,EAAkBC,GAAuB5+B,mBAAS,KACnD,KAAEpK,GAASqK,qBAAWyD,KACtB,UAAEhc,EAAS,WAAE4Y,GAAe1K,EAElCsK,oBAAU,IACD,KACLikB,EAAUtK,SAAU,GAErB,IAEH3Z,oBAAU,KACRH,GAAW,GACX,MAAMuM,EAAkB5jB,WAAW,KAOd,OAAf4X,QAAsC/B,IAAf+B,GACzBs+B,EAAoBt+B,GAGK,IAAvB1K,EAAKb,OAAOlO,QACd63C,EAAiB9oC,EAAKb,OAAO,GAAGtF,IAXZ0Q,WACpBzB,GACG0B,IAAI,YAAa,CAAEla,OAAQ,CAAEwB,YAAW8F,QAAS,KACjDiyC,KAAK/uB,IAAA,IAAC,KAAE/S,GAAM+S,EAAA,OAAKsuB,EAAarhC,MAUrCu4B,GACAn2B,GAAW,IACV,KACH,MAAO,IAAMyM,aAAaF,IACzB,IAEHpM,oBAAU,KACR,GAAIikB,EAAUtK,QAAS,CACF1Z,WACjB,MAAMyF,QAAa2rC,IACnBH,EAAaxrC,GACbqlB,EAAUrlB,IAEZ4rC,KAGD,IAEHtxC,oBAAU,KACR,IAAKi+B,GAAa3yB,EAAY3kB,OAAS,EAErC,YADAkZ,GAAW,GAGb,MAAMuM,EAAkB5jB,WAAW,KACjCqX,GAAW,GACQI,WACjB,IACE,MAAM,KAAExC,SAAee,GAAI0B,IAAI,UAAW,CACxCla,OAAQ,CAAEslB,iBAEZ6yB,EAAW1gC,EAAK1S,OAChB8U,GAAW,GACX,MAAOzC,GACPyC,GAAW,GACX1C,GAAWC,KAIfm0C,IACC,KACH,MAAO,IAAMjlC,aAAaF,IACzB,CAACd,EAAa2yB,IAEjB,MAAMlqB,EAAcA,KAClBd,IACAmrB,EAAe,IACfgT,EAAgB,OAoClB,OACExsD,IAAA6b,cAAC0S,KAAM,CAAC3f,KAAMyqC,EAAWhrB,QAASc,EAAauC,SAAS,KAAKyK,OAAO,SAClEn8B,IAAA6b,cAAA,QAAMqsB,SAnCe7sB,UAEvB,GADA0U,EAAEoU,iBACGioB,GACAzS,GAAmC,KAAlBA,EAAtB,CACA1+B,GAAW,GACX,IACE,IAAIpC,EAAO,GAEP0zC,IACF1zC,EAAK/V,OAASypD,EAAa5hD,IAGzBgvC,GAAmC,OAAlBA,IACnB9gC,EAAKsiB,QAAUwe,EAEV4S,IACH1zC,EAAKvQ,OAAS,UACduQ,EAAK/V,OAAS,OAId+2C,IACFhhC,EAAK2C,WAAaq+B,SAEdjgC,GAAIqnB,IAAI,YAAD//B,OAAakrD,GAAYvzC,GAEtCoD,EAAQza,KAAK,YACb,MAAOgX,GACPyC,GAAW,GACX1C,GAAWC,OAOTxY,IAAA6b,cAAC4S,KAAW,CAAC9jB,GAAG,qBACboN,KAAKkB,EAAE,8BAEVjZ,IAAA6b,cAAC6S,KAAa,CAACC,UAAQ,GACrB3uB,IAAA6b,cAACw/B,KAAY,CACXtyB,MAAO,CAAE3I,MAAO,IAAKC,aAAc,IACnCq7B,eAAiBR,GAAM,GAAAh6C,OAAQg6C,EAAOv1C,MACtC+b,SAAUA,CAACqO,EAAG+jB,KACZ0Y,EAAgB1Y,GACA,MAAZA,GAAoB9xC,MAAMyb,QAAQq2B,EAAS7jC,QAC7Ck2B,EAAU2N,EAAS7jC,SAEnBk2B,EAAUkmB,GACVzS,EAAiB,MAGrB9tC,QAASA,EACTgvC,cAAeA,GACfU,UAAQ,EACRD,eAAa,EACbqR,cAAe70C,KAAKkB,EAAE,iCACtB+B,QAASA,EACT+4B,YAAc3yC,GACZpB,IAAA6b,cAAC4F,KAAS6C,OAAAC,OAAA,GACJnjB,EAAM,CACV0Q,MAAOiG,KAAKkB,EAAE,kCACd2I,QAAQ,WACRgnB,WAAS,EACTlnB,SAAWqO,GAAMypB,EAAezpB,EAAEpO,OAAO5F,OACzC8/B,WAAY,IACPz6C,EAAOy6C,WACVC,aACE97C,IAAA6b,cAAC7b,IAAM4oB,SAAQ,KACZ5N,EACChb,IAAA6b,cAACwP,KAAgB,CAACpe,MAAM,UAAUqe,KAAM,KACtC,KACHlqB,EAAOy6C,WAAWC,oBAO/B97C,IAAA6b,cAACwqB,KAAW,CAACzkB,QAAQ,WAAWJ,UAAWR,EAAQ0Q,UACjD1xB,IAAA6b,cAACyqB,KAAU,KACRvuB,KAAKkB,EAAE,wCAEVjZ,IAAA6b,cAAC2qB,KAAM,CACLzqB,MAAO49B,EACPj4B,SAAWqO,GAAM6pB,EAAiB7pB,EAAEpO,OAAO5F,OAC3CjK,MAAOiG,KAAKkB,EAAE,8CAEbhJ,EAAOmS,IAAK5V,GACXxM,IAAA6b,cAACiU,IAAQ,CAAClS,IAAKpR,EAAM7B,GAAIoR,MAAOvP,EAAM7B,IACnC6B,EAAM7G,SAMf3F,IAAA6b,cAACupB,KAAI,CAACC,WAAS,EAACpD,QAAS,EAAGlZ,MAAO,CAACpI,UAAW,SAC7C3gB,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAIF,MAAI,GAChBtlC,IAAA6b,cAAC2qB,KAAM,CACLa,UAAQ,EACRxW,WAAS,EACTkrB,cAAY,EACZn6B,QAAQ,WACR7F,MAAO89B,EACPn4B,SAAWqO,IACT+pB,EAAoB/pB,EAAEpO,OAAO5F,QAE/B2qB,UAAW,CACTjX,aAAc,CACZC,SAAU,SACVC,WAAY,QAEdC,gBAAiB,CACfF,SAAU,MACVC,WAAY,QAEdH,mBAAoB,MAEtBmX,YAAaA,KACX,GAAyB,KAArBkT,EACF,MAAO,2BAGT,OADiBI,EAAUt8B,KAAKq+B,GAAKA,EAAErxC,KAAOkvC,GAC9Bl0C,QAGR,OAATs0C,QAAS,IAATA,OAAS,EAATA,EAAWl4C,QAAS,GACnBk4C,EAAU73B,IAAI,CAAC3X,EAAUmT,IACvB5d,IAAA6b,cAACiU,IAAQ,CAACrL,OAAK,EAAC7G,IAAKA,EAAK7B,MAAOtR,EAASE,IACxC3K,IAAA6b,cAAC0G,IAAY,CACXC,QACExiB,IAAA6b,cAAA7b,IAAA4oB,SAAA,KAEE5oB,IAAA6b,cAAC8O,IAAU,CAACjG,UAAU,OAAOqE,MAAO,CAAEE,SAAU,GAAIiC,WAAY,OAAQnL,QAAS,cAAeE,WAAY,SAAU2c,WAAY,MAC/HnyB,EAAS9E,KAAK,SAAQ3F,IAAA6b,cAAA,KAAG2F,UAAiC,cAArB/W,EAASnC,OAA0B0Y,EAAQ0vB,OAAS1vB,EAAQk4B,SAAU,IAAEzuC,EAASnC,OAAO,eAWpJtI,IAAA6b,cAAC+S,KAAa,KACZ5uB,IAAA6b,cAACgG,KAAM,CACLC,QAASqN,EACTliB,MAAM,YACNzG,SAAUwU,EACV4G,QAAQ,YAEP7J,KAAKkB,EAAE,uCAEVjZ,IAAA6b,cAACsP,GAAiB,CAChBvJ,QAAQ,YACRhX,KAAK,SACLqC,MAAM,UACN+N,QAASA,GAERjD,KAAKkB,EAAE,uCCzRpB,MAAM4zC,GAAiBlxC,IAAA,IAAC,SAAE2lC,KAAawL,GAAOnxC,EAAA,OAAK3b,IAAA6b,cAAA,MAASixC,IAyB7CC,OAvBKnhC,IAMb,IANc,WACnBiwB,EAAU,SACVjgC,EAAQ,gBACRy8B,EAAe,MACfvmC,KACGg7C,GACJlhC,EACC,OACE5rB,IAAA6b,cAAC4F,KAAS6C,OAAAC,OAAA,GACJuoC,EAAK,CACTlrC,QAAQ,WACR9P,MAAOA,EACPkyC,WAAS,EACT3L,gBAAiB,CAAE9R,QAAQ,KAAS8R,GACpCwD,WAAY,CACVmR,eAAgBH,MACbhR,GAELoR,WAAY,CAAErxC,SAAUA,OCnB9B,MAAMgE,GAAYC,YAAWnG,IAAK,CAC9BqsB,KAAM,CACF7lB,OAAQxG,EAAMuoB,QAAQ,IACtB9H,OAAQ,cAyDD+yB,OArDgBvxC,IAA4B,IAA3B,QAAEmG,EAAO,SAAEtb,GAAUmV,EACjD,MAAMqF,EAAUpB,KAQVutC,EAAU,CACZ,CACIxnD,KAAMoS,KAAKkB,EAAE,gDACb8C,MAAO,iBAEX,CACIpW,KAAMoS,KAAKkB,EAAE,2CACb8C,MAAO,aAEX,CACIpW,KAAMoS,KAAKkB,EAAE,wCACb8C,MAAO,WAEX,CACIpW,KAAMoS,KAAKkB,EAAE,8CACb8C,MAAO,iBAEX,CACIpW,KAAMoS,KAAKkB,EAAE,oCACb8C,MAAO,cAIf,OACI/b,IAAA6b,cAACkxC,GAAW,CACR7sC,OAAO,QACP2Q,WAAS,EACT/e,MAAOiG,KAAKkB,EAAE,gCACdzS,SAAUA,GAET2mD,EAAQ/qC,IAAIgrC,GACTptD,IAAA6b,cAACirB,KAAI,CACDlpB,IAAKwvC,EAAOrxC,MACZsxC,YAAat9B,GAvCTwU,EAACxU,EAAGhU,KACpBgU,EAAEoU,iBACE39B,GACJsb,EAAQ/F,IAoCsBwoB,CAAYxU,EAAGq9B,EAAOrxC,OACxCjK,MAAOs7C,EAAOznD,KACd2lB,KAAK,QACL9J,UAAWR,EAAQ+kB,KACnB94B,MAAM,eC1B1B,MAAM2S,GAAYC,YAAWnG,IAAK,CACjCoG,KAAM,CACLC,QAAS,OACT0Q,SAAU,QAEXsW,cAAe,CACdhnB,QAAS,OACT,yBAA0B,CACzBS,YAAa9G,EAAMuoB,QAAQ,KAI7B+E,WAAY,CACXhe,SAAU,YAGX8B,eAAgB,CACf7d,MAAO8d,KAAM,KACb/B,SAAU,WACVgC,IAAK,MACLC,KAAM,MACNtK,WAAY,GACZuK,YAAa,IAEd+b,YAAa,CACZ/mB,OAAQxG,EAAMuoB,QAAQ,GACtB3R,SAAU,QAINg9B,GAAiBnmB,OAAaC,MAAM,CACzCz5B,KAAMw5B,OACJxB,IAAI,EAAG,wBACP0B,SAAS,kBACXqR,UAAWvR,OAAaE,SAAS,kBACjCx5B,OAAQs5B,OAAaE,SAAS,oBA0ThBkmB,OAvTO5xC,IAAqE,IAApE,KAAE/M,EAAI,QAAEyf,EAAO,WAAEm/B,EAAU,UAAE9U,EAAS,aAAE+U,EAAY,OAAE1pD,GAAQ4X,EACpF,MAAMqF,EAAUpB,KACV3D,EAAUC,wBACV,KAAEpL,GAASqK,qBAAWyD,IAEtB2oB,EAAe,CACpB55B,KAAM,GACN+qC,UAAW,GACX7qC,OAAQgQ,MAASlW,IAAI,EAAG,QAAQsW,OAAO,oBACvCnQ,OAAQ,IAGHwrC,EAAiB,CACtB3uC,GAAI,GACJhF,KAAM,KAGA8P,EAAUi4C,GAAexyC,mBAASqsB,IAClComB,EAAgBC,GAAqB1yC,mBAASo+B,IAC9CtvC,EAAUinC,GAAe/1B,mBAAS,CAACo+B,KACnCuU,EAAYC,GAAiB5yC,mBAAS,MACvC6yC,EAAiBv5B,iBAAO,OACvBnF,EAAkBC,GAAuBpU,oBAAS,GACnD8yC,EAAkBx5B,mBAExBpZ,oBAAU,KACT,GAAIs9B,GAAa1uC,EAASjI,OAAQ,CACjC,MAAM6L,EAAU5D,EAAS2T,KAAKhc,GAAKA,EAAEgJ,KAAO+tC,GACxC9qC,GACHggD,EAAkBhgD,KAGlB,CAAC8qC,EAAW1uC,IAEfoR,oBAAU,KACT,MAAM,UAAExY,GAAckO,EACtB,GAAIlC,EACH,IACC,WACC,MAAQiK,KAAMlG,SAAsBiH,GAAI0B,IAAI,iBAAkB,CAAEla,OAAQ,CAAEwB,UAAWA,KACrF,IAAIqrD,EAAat7C,EAAYyP,IAAKzgB,IAAC,CAAQgJ,GAAIhJ,EAAEgJ,GAAIhF,KAAMhE,EAAEgE,QAU7D,GATI8X,mBAAQwwC,IACXhd,EAAY,CAAC,CAAEtmC,GAAI,GAAIhF,KAAM,OAASsoD,IAEnCvV,GACHgV,EAAYpyB,IACJ,IAAKA,EAAWod,gBAIpB8U,EAAY,OAEjB,MAAM,KAAE30C,SAAee,GAAI0B,IAAI,cAADpa,OAAessD,IAC7CE,EAAYpyB,IACJ,IAAKA,KAAcziB,EAAMhL,OAAQgQ,IAAOhF,EAAKhL,QAAQoQ,OAAO,uBAEpE2vC,EAAkB/0C,EAAKjL,UAlBxB,GAoBC,MAAO4K,GACRD,GAAWC,KAGX,CAACg1C,EAAY9U,EAAW9pC,EAAMkC,IAEjC,MAAMqe,EAAcA,KACnBd,IACAy/B,EAAc,MACdJ,EAAYnmB,IAiFb,OACCvnC,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQlB,MACvB9f,IAAA6b,cAACuS,GAAiB,CACjB9oB,MAAOyS,KAAKkB,EAAE,+CACdrK,KAAMygB,EACNhB,QAASA,IAAMiB,GAAoB,GACnChB,UA3BiBjT,UACfwyC,IACHC,EAAc,MACdC,EAAeh5B,QAAQhZ,MAAQ,MAG5BtG,EAASlB,kBACNqF,GAAIlT,OAAO,cAADxF,OAAeuU,EAAS9K,GAAE,kBAC1C+iD,EAAarkC,IAAI,IACbA,EACH9U,UAAW,QAEZyE,IAAMxT,QAAQuS,KAAKkB,EAAE,iCACA,mBAAVlV,IACVhD,QAAQqB,IAAI2B,GACZhD,QAAQqB,IAAI,KACZ2B,QAaCgU,KAAKkB,EAAE,kDAETjZ,IAAA6b,cAAC0S,KAAM,CACN3f,KAAMA,EACNyf,QAASc,EACTuC,SAAS,KACTb,WAAS,EACTsL,OAAO,SAEPn8B,IAAA6b,cAAC4S,KAAW,CAAC9jB,GAAG,qBACM,SAApB8K,EAASnN,OAAoB,gBAAe,YAAApH,OAAegtD,sBAAWz4C,EAASnN,UAEjFtI,IAAA6b,cAAA,OAAKkN,MAAO,CAAEhJ,QAAS,SACtB/f,IAAA6b,cAAA,SACCjR,KAAK,OACL+E,OAAO,kBACPyU,IAAK2pC,EACLrsC,SAAWqO,GAvGcA,KAC7B,MAAMo+B,EAAOC,gBAAKr+B,EAAEpO,OAAOjR,OACvBy9C,GACHL,EAAcK,IAoGME,CAAqBt+B,MAGxC/vB,IAAA6b,cAACisB,KAAM,CACNC,cAAetyB,EACfuyB,oBAAoB,EACpBC,iBAAkBqlB,GAClBplB,SAAUA,CAACC,EAAQ1/B,KAClB7E,WAAW,KAxGWyX,WAC1B,MAAMizC,EAAe,IAAKnmB,EAAQrlC,OAAQgO,EAAKnG,IAC/C,IACC,GAAI6iD,GAEH,SADM5zC,GAAIqnB,IAAI,cAAD//B,OAAessD,GAAcc,GACxB,MAAdT,EAAoB,CACvB,MAAM3C,EAAW,IAAIC,SACrBD,EAASG,OAAO,OAAQwC,SAClBj0C,GAAIoD,KAAK,cAAD9b,OACCssD,EAAU,iBACxBtC,QAGI,CACN,MAAM,KAAEryC,SAAee,GAAIoD,KAAK,aAAcsxC,GAC9C,GAAkB,MAAdT,EAAoB,CACvB,MAAM3C,EAAW,IAAIC,SACrBD,EAASG,OAAO,OAAQwC,SAClBj0C,GAAIoD,KAAK,cAAD9b,OAAe2X,EAAKlO,GAAE,iBAAiBugD,IAGvDlyC,IAAMxT,QAAQuS,KAAKkB,EAAE,0BACA,mBAAVlV,GACVA,IAEG20C,GACyB,oBAAjB+U,IACVA,IACAxxC,EAAQza,KAAK,eAGd,MAAOgX,GACRD,GAAWC,GAEZo1C,EAAkBtU,GAClBoU,EAAYnmB,GACZpY,KAqEKo/B,CAAmBpmB,GACnB1/B,EAAQ4/B,eAAc,IACpB,OAGHzc,IAAA,IAAC,QAAE0c,EAAO,OAAEC,EAAM,aAAEC,EAAY,OAAEL,EAAM,cAAEqmB,GAAe5iC,EAAA,OACzD5rB,IAAA6b,cAAC4sB,KAAI,KACJzoC,IAAA6b,cAAC6S,KAAa,CAACC,UAAQ,GACtB3uB,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQ+lB,eACvB/mC,IAAA6b,cAACwqB,KAAW,CACXzkB,QAAQ,WACRiP,WAAS,GAET7wB,IAAA6b,cAACw/B,KAAY,CACZxqB,WAAS,EACT9U,MAAO4xC,EACP7hD,QAAS9B,EACT0X,SAAUA,CAACqO,EAAGniB,KACb,MAAM8qC,EAAY9qC,EAAUA,EAAQjD,GAAK,GACzC+iD,EAAY,IAAKj4C,EAAUijC,cAC3BkV,EAAkBhgD,GAAoB0rC,IAEvCoC,eAAiBR,GAAWA,EAAOv1C,KACnCy4C,kBAAmBA,CAAClD,EAAQn/B,IACpBA,EAAMpR,KAAOuwC,EAAOvwC,GAE5BopC,YAAc3yC,GAAWpB,IAAA6b,cAAC4F,KAAS6C,OAAAC,OAAA,GAAKnjB,EAAM,CAAEwgB,QAAQ,WAAWnT,YAAY,iBAIlFzO,IAAA6b,cAAA,WACA7b,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQ+lB,eACvB/mC,IAAA6b,cAAC6sB,KAAK,CACLC,GAAIlnB,KACJsiC,KAAM,EACNC,WAAW,EACXlyC,MAAOiG,KAAKkB,EAAE,2BACdtT,KAAK,OACL27C,SAAU0M,EACVl1C,MAAOwvB,EAAQ36B,MAAQknB,QAAQ0T,EAAO56B,MACtCk7B,WAAYP,EAAQ36B,MAAQ46B,EAAO56B,KACnCiU,QAAQ,WACR1B,OAAO,QACP2Q,WAAS,KAGX7wB,IAAA6b,cAACupB,KAAI,CAACE,MAAI,GACTtlC,IAAA6b,cAACqxC,GAAsB,CACtB1mD,SAAUgiC,EACV1mB,QAAS/F,GApHQV,OAAO+xC,EAAQqB,KACxC,MAAMniC,EAAK0hC,EAAgBj5B,QACrB25B,EAAgBpiC,EAAGvQ,MAAM5Z,UAAU,EAAGmqB,EAAGqiC,gBACzCC,EAAiBtiC,EAAGvQ,MAAM5Z,UAAUmqB,EAAGuiC,cACvCC,EAAexiC,EAAGqiC,eAAiBvB,EAAOrrD,OAEhD0sD,EAAa,OAAO,GAADvtD,OAAKwtD,GAAaxtD,OAAGksD,GAAMlsD,OAAG0tD,UAE3C,IAAIlyC,QAAQihC,GAAK/5C,WAAW+5C,EAAG,MACrCqQ,EAAgBj5B,QAAQg6B,kBAAkBD,EAAcA,IA2G9BE,CAAkBjzC,EAAOyyC,MAG7CxuD,IAAA6b,cAAA,WACA7b,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQ+lB,eACvB/mC,IAAA6b,cAAC6sB,KAAK,CACLC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,6BACdrO,KAAK,iBACLjF,KAAK,SACL0yC,gBAAiB,CAChB9R,QAAQ,GAETztB,MAAOwvB,EAAQz6B,QAAUgnB,QAAQ0T,EAAO16B,QACxCg7B,WAAYP,EAAQz6B,QAAU06B,EAAO16B,OACrC+T,QAAQ,WACRiP,WAAS,MAGTpb,EAASlB,WAAas5C,IACvB7tD,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAIF,MAAI,GACjBtlC,IAAA6b,cAACgG,KAAM,CAACiU,UAAW91B,IAAA6b,cAACyO,KAAU,OAC5BujC,EAAaA,EAAWloD,KAAO8P,EAAS7D,WAE1C5R,IAAA6b,cAAC+G,IAAU,CACVd,QAASA,IAAMwN,GAAoB,GACnCriB,MAAM,aAENjN,IAAA6b,cAACozC,KAAa,CAAChiD,MAAM,iBAKzBjN,IAAA6b,cAAC+S,KAAa,MACXi/B,IAAep4C,EAASlB,WACzBvU,IAAA6b,cAACgG,KAAM,CACN5U,MAAM,UACN6U,QAASA,IAAMisC,EAAeh5B,QAAQm6B,QACtC1oD,SAAUgiC,EACV5mB,QAAQ,YAEP7J,KAAKkB,EAAE,iCAGVjZ,IAAA6b,cAACgG,KAAM,CACNC,QAASqN,EACTliB,MAAM,YACNzG,SAAUgiC,EACV5mB,QAAQ,YAEP7J,KAAKkB,EAAE,kCAEa,OAApBxD,EAAS3H,QAAuC,KAApB2H,EAAS3H,SACtC9N,IAAA6b,cAACgG,KAAM,CACNjX,KAAK,SACLqC,MAAM,UACNzG,SAAUgiC,EACV5mB,QAAQ,YACRJ,UAAWR,EAAQgmB,YAER,GAAA9lC,OAAVssD,EACKz1C,KAAKkB,EAAE,gCACPlB,KAAKkB,EAAE,gCACZuvB,GACAxoC,IAAA6b,cAACwP,KAAgB,CAChBC,KAAM,GACN9J,UAAWR,EAAQ8J,yBCjPhBqkC,OA/GWxzC,IAAkD,IAAjD,OAAEuY,EAAM,SAAEhF,EAAQ,YAAEC,EAAW,SAAEC,GAAUzT,EACrE,MAAO0T,EAAkBC,GAAuBpU,oBAAS,IAClDk0C,EAAyBC,GAA8Bn0C,oBAAS,GACjEmkB,EAAY7K,kBAAO,IACnB,KAAE1jB,GAASqK,qBAAWyD,KAErB0wC,EAAmBC,GAAwBr0C,oBAAS,IACpDw9B,EAAW8W,GAAgBt0C,mBAAS,MAE3CE,oBAAU,IACF,KACNikB,EAAUtK,SAAU,GAEnB,IAEH,MAQM06B,EAA8B1/B,IACnCT,GAAoB,GACpBH,KAyBD,OACCnvB,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACC5oB,IAAA6b,cAAC0T,IAAI,CACJ5kB,GAAG,cACHykB,SAAUA,EACVI,mBAAoB,KACpBC,aAAc,CACbC,SAAU,SACVC,WAAY,SAEb+/B,aAAW,EACX9/B,gBAAiB,CAChBF,SAAU,MACVC,WAAY,SAEb/gB,KAAMsgB,EACNb,QAASc,GAETnvB,IAAA6b,cAACiU,IAAQ,CAAChO,QA7BmB6tC,KAC/BxgC,IACAqgC,EAAat7B,EAAOtmB,QAAQjD,IAC5B4kD,GAAqB,KA2BjBx3C,KAAKkB,EAAE,+BAETjZ,IAAA6b,cAACiU,IAAQ,CAAChO,QA3CmBiO,IAC/Bs/B,GAA2B,GAC3BlgC,MA0CIpX,KAAKkB,EAAE,+BAETjZ,IAAA6b,cAACoD,GAAG,CACHC,KAAMpO,EAAKxD,QACX6R,QAAQ,8BACRvY,IAAKA,IACJ5G,IAAA6b,cAACiU,IAAQ,CAAChO,QAAS2tC,GACjB13C,KAAKkB,EAAE,gCAKZjZ,IAAA6b,cAACuS,GAAiB,CACjB9oB,MAAK,GAAApE,OAAK6W,KAAKkB,EAAE,8CAA4C/X,OAC5DgzB,EAAOvpB,GAAE,KAAAzJ,OACN6W,KAAKkB,EAAE,iDAAgD,KAAA/X,OAC1DgzB,EAAOtmB,QAAQjI,KAAI,KAEpBiJ,KAAMygB,EACNhB,QAASiB,EACThB,UA7EwBjT,UAC1B,UACOzB,GAAIlT,OAAO,YAADxF,OAAagzB,EAAOvpB,KACnC,MAAO6N,GACRD,GAAWC,MA2ETT,KAAKkB,EAAE,gDAETjZ,IAAA6b,cAACswC,GAAyB,CACzB9S,UAAW+V,EACX/gC,QAjEoCuhC,KAClCvwB,EAAUtK,SACbs6B,GAA2B,IAgE1BjD,SAAUl4B,EAAOvpB,KAElB3K,IAAA6b,cAAC0xC,GAAa,CACb3+C,KAAM0gD,EACNjhC,QA1D8BwhC,KAChCN,GAAqB,GACrBC,EAAa,OAyDXhhC,kBAAgB,oBAChBkqB,UAAWA,M,qBCpGf,MAAM94B,GAAYC,YAAWnG,IAAK,CACjCo2C,cAAe,CACdtvC,YAAa,EACb6R,KAAM,OACNR,UAAW,SACX3G,WAAY,OACZ,QAAS,CACRhL,OAAQxG,EAAMuoB,QAAQ,SAyHV8tB,OApHmBp0C,IAAiB,IAAhB,OAAEuY,GAAQvY,EAC5C,MAAMqF,EAAUpB,KACV3D,EAAUC,wBACTkT,EAAUuF,GAAezZ,mBAAS,OAClCF,EAASC,GAAcC,oBAAS,GACjC80C,EAAwBn7B,QAAQzF,IAChC,KAAEte,GAASqK,qBAAWyD,KACtB,iBAAE+N,GAAqBxR,qBAAWqR,IAElCyjC,EAAcC,YAAY,CAC/B12B,QAAS,CACNhX,QAASuI,QAYPolC,EAA2B90C,MAAO0U,EAAGznB,EAAQxF,KAClDmY,GAAW,GACX,UACOrB,GAAIqnB,IAAI,YAAD//B,OAAagzB,EAAOvpB,IAAM,CACtCrC,OAAQA,EACRxF,OAAQA,GAAU,KAClBs+B,eAA2B,WAAX94B,GAA8B4rB,EAAOkN,eACrDC,SAAqB,WAAX/4B,GAA8B4rB,EAAOmN,SAC/Cj0B,cAA0B,WAAX9E,GAA8B4rB,EAAO9mB,gBAGrD6N,GAAW,GACI,SAAX3S,EACHqkB,EAAiB,IAAKuH,EAAQtH,KAAM,WAEpCD,EAAiB,CAAEhiB,GAAI,KAAMiiB,KAAM,OACnC3Q,EAAQza,KAAK,aAEb,MAAOgX,GACRyC,GAAW,GACX1C,GAAWC,KAIb,OACCxY,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQ8uC,eACJ,WAAlB57B,EAAO5rB,QACPtI,IAAA6b,cAACsP,GAAiB,CACjBnQ,QAASA,EACT8a,UAAW91B,IAAA6b,cAACu0C,KAAM,MAClB9kC,KAAK,QACLxJ,QAASiO,GAAKogC,EAAyBpgC,EAAG,OAAY,OAAJjf,QAAI,IAAJA,OAAI,EAAJA,EAAMnG,KAEvDoN,KAAKkB,EAAE,uCAGS,SAAlBib,EAAO5rB,QACPtI,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACC5oB,IAAA6b,cAACqkB,KAAO,CAAC56B,MAAOyS,KAAKkB,EAAE,uCACtBjZ,IAAA6b,cAAC+G,IAAU,CAACd,QAASiO,GAAKogC,EAAyBpgC,EAAG,UAAW,OAChE/vB,IAAA6b,cAACw0C,KAAe,QAGlBrwD,IAAA6b,cAACy0C,IAAa,CAAC52C,MAAOu2C,GACrBjwD,IAAA6b,cAACqkB,KAAO,CAAC56B,MAAOyS,KAAKkB,EAAE,wCACtBjZ,IAAA6b,cAAC+G,IAAU,CAACd,QAASiO,GAAKogC,EAAyBpgC,EAAG,SAAc,OAAJjf,QAAI,IAAJA,OAAI,EAAJA,EAAMnG,IAAKsC,MAAM,WAChFjN,IAAA6b,cAAC80B,KAAe,SAqBnB3wC,IAAA6b,cAAC+G,IAAU,CAACd,QA3EoBiO,IACnC4E,EAAY5E,EAAEqF,iBA2EVp1B,IAAA6b,cAAC00C,KAAQ,OAEVvwD,IAAA6b,cAACszC,GAAiB,CACjBj7B,OAAQA,EACR9E,SAAUA,EACVF,SAAU8gC,EACV7gC,YA9EgCY,IACpC4E,EAAY,UAiFQ,YAAlBT,EAAO5rB,QACPtI,IAAA6b,cAACsP,GAAiB,CACjBnQ,QAASA,EACTsQ,KAAK,QACL1J,QAAQ,YACR3U,MAAM,UACN6U,QAASiO,GAAKogC,EAAyBpgC,EAAG,OAAY,OAAJjf,QAAI,IAAJA,OAAI,EAAJA,EAAMnG,KAEvDoN,KAAKkB,EAAE,yCCtIN,SAASu3C,GAAa70C,GAAc,IAAb,OAAEuY,GAAQvY,EAEpC,MAAOzL,EAAMotC,GAAWpiC,mBAAS,KAC1BqiC,EAAWC,GAAgBtiC,mBAAS,IACrCmkB,EAAY7K,kBAAO,GAEzBpZ,oBAAU,IACC,KACHikB,EAAUtK,SAAU,GAEzB,IAEH3Z,oBAAU,KACFikB,EAAUtK,SACV0oB,IAAW9C,KAAK,KACR34C,MAAMyb,QAAQyW,EAAOhkB,MACrBstC,EAAatpB,EAAOhkB,MAEpBstC,EAAa,OAI1B,CAACtpB,IAEJ,MAAMu8B,EAAYp1C,UACd,IACI,MAAQxC,KAAMwK,SAAuBzJ,GAAIoD,KAAK,QAASnE,GACvD,OAAOwK,EACT,MAAO7K,GACLD,GAAWC,KAIbilC,EAAWpiC,UACb,IACI,MAAM,KAAExC,SAAee,GAAI0B,IAAI,cAC/BgiC,EAAQzkC,GACV,MAAOL,GACLD,GAAWC,KAabkJ,EAAWrG,MAAOU,EAAOzX,KAC3B,IAAIosD,EAAiB,GACrB,GAAe,kBAAXpsD,EAA4B,CAC5B,GAAImZ,mBAAQ1B,GACR,IAAK,IAAIupB,KAAQvpB,EACb,GAAIpC,oBAAS2rB,GAAO,CAChB,MAAMqrB,QAAeF,EAAU,CAAE9qD,KAAM2/B,IACvCorB,EAAelvD,KAAKmvD,QAEpBD,EAAelvD,KAAK8jC,SAI1BmY,SAENiT,EAAiB30C,EAErByhC,EAAakT,QA1BAr1C,WACb,IACI,MAAQxC,KAAMwK,SAAuBzJ,GAAIoD,KAAK,aAAcnE,GAC5D,OAAOwK,EACT,MAAO7K,GACLD,GAAWC,KAsBTo4C,CAAS,CAAEz8B,SAAUD,EAAOvpB,GAAIuF,KAAMwgD,KAGhD,OACI1wD,IAAA6b,cAACivB,KAAK,CAAC/hB,MAAO,CAAE6B,QAAS,KACrB5qB,IAAA6b,cAACw/B,KAAY,CACTnV,UAAQ,EACR5a,KAAK,QACLxf,QAASoE,EACT6L,MAAOwhC,EACP/B,UAAQ,EACR95B,SAAUA,CAACqO,EAAG2tB,EAAGC,IAAMj8B,EAASg8B,EAAGC,GACnCjC,eAAiBR,GAAWA,EAAOv1C,KACnCi4C,WAAYA,CAAC7hC,EAAO8hC,IAChB9hC,EAAMqG,IAAI,CAAC84B,EAAQ74B,IACfriB,IAAA6b,cAACirB,KAAIxiB,OAAAC,OAAA,CACD3C,QAAQ,WACRmH,MAAO,CACHyT,WAAY0e,EAAOjuC,OAAS,OAC5BA,MAAO,OACPuT,YAAa,EACbqK,WAAY,IACZhK,aAAc,EACdoI,SAAU,QACV2I,WAAY,UAEhB9f,MAAOopC,EAAOv1C,KAAKm2B,eACf+hB,EAAY,CAAEx7B,UAAQ,CAC1BiJ,KAAK,YAIjByoB,YAAc3yC,GACVpB,IAAA6b,cAAC4F,KAAS6C,OAAAC,OAAA,GAAKnjB,EAAM,CAAEwgB,QAAQ,WAAWnT,YAAY,UAE1DoiD,eAAgBjlC,IAAA,IAAC,SAAEhQ,GAAUgQ,EAAA,OACzB5rB,IAAA6b,cAACivB,KAAK,CAAC/hB,MAAO,CAAE3I,MAAO,IAAK8K,WAAY,KACnCtP,OC5FzB,MAEMgE,GAAYC,YAAYnG,IAAK,CACjCoG,KAAM,CACJC,QAAS,OACTW,OAAQ,OACRsI,SAAU,WACV+H,SAAU,UAGZsJ,YAAa,CACXhI,KAAM,EACN3R,OAAQ,OACRX,QAAS,OACTC,cAAe,SACf+Q,SAAU,SACV/D,oBAAqB,EACrBE,uBAAwB,EACxBoN,WAAY,IACZ9Z,aAnBgB,IAoBhB+Z,WAAY7gB,EAAM8gB,YAAY1gB,OAAO,SAAU,CAC7C2gB,OAAQ/gB,EAAM8gB,YAAYC,OAAOC,MACjCpc,SAAU5E,EAAM8gB,YAAYlc,SAASqc,iBAIzCC,iBAAkB,CAChB3N,qBAAsB,EACtBE,wBAAyB,EACzBoN,WAAY7gB,EAAM8gB,YAAY1gB,OAAO,SAAU,CAC7C2gB,OAAQ/gB,EAAM8gB,YAAYC,OAAOI,QACjCvc,SAAU5E,EAAM8gB,YAAYlc,SAASwc,iBAEvCta,YAAa,MA8IFswC,OA1IAA,KACb,MAAM,SAAE38B,GAAaiL,sBACfnjB,EAAUC,uBACV8E,EAAUpB,MAEV,KAAE9O,GAASqK,qBAAWyD,KAErB0uB,EAAYtS,GAAiB9f,oBAAS,IACtCF,EAASC,GAAcC,oBAAS,IAChCtN,EAASqtB,GAAc/f,mBAAS,KAChCgZ,EAAQgH,GAAahgB,mBAAS,IAE/B7a,EAAgB8a,qBAAWlW,GAEjCmW,oBAAU,KACRH,GAAW,GACX,MAAMuM,EAAkB5jB,WAAW,KACbyX,WAClB,IACE,MAAM,KAAExC,SAAee,GAAI0B,IAAI,cAAgB6Y,IACzC,QAAEgH,GAAYtiB,GACd,OAAE5I,EAAM,QAAE3C,GAAYwD,EAG5B,QAAqB2I,IADAxJ,EAAO0N,KAAMyd,GAAMA,EAAEzwB,KAAOwwB,IACH,UAAZ7tB,EAGhC,OAFA0L,IAAMF,MAAM,gCACZmD,EAAQza,KAAK,YAIfy5B,EAAWpiB,EAAKjL,SAChBstB,EAAUriB,GACVoC,GAAW,GACX,MAAOzC,GACPyC,GAAW,GACX1C,GAAWC,KAGf6iB,IACC,KACH,MAAO,IAAM3T,aAAaF,IACzB,CAAC2M,EAAUrjB,EAAMmL,IAEpBb,oBAAU,KACR,MAAMxY,EAAYG,aAAaC,QAAQ,aACjC8B,EAASzE,EAAcsC,UAAUC,GA0BvC,OAxBAkC,EAAOnE,GAAG,QAAS,IAAMmE,EAAO7D,KAAK,cAAc,GAADC,OAAKgzB,EAAOvpB,MAE9D7F,EAAOnE,GAAG,WAADO,OAAY0B,EAAS,WAAYiW,IACpB,WAAhBA,EAAKuB,QAAuBvB,EAAKqb,OAAOvpB,KAAOupB,EAAOvpB,IACxDuwB,EAAUriB,EAAKqb,QAGG,WAAhBrb,EAAKuB,QAAuBvB,EAAKsb,WAAaD,EAAOvpB,IAEvDsR,EAAQza,KAAK,cAIjBsD,EAAOnE,GAAG,WAADO,OAAY0B,EAAS,YAAaiW,IACrB,WAAhBA,EAAKuB,QACP6gB,EAAYK,IAAe,IAADC,EACxB,OAAID,EAAU3wB,MAAmB,QAAjB4wB,EAAK1iB,EAAKjL,eAAO,IAAA2tB,OAAA,EAAZA,EAAc5wB,IAC1B,IAAK2wB,KAAcziB,EAAKjL,SAE1B0tB,MAKN,KACLx2B,EAAOzC,eAER,CAAC8xB,EAAUD,EAAQjY,EAAS5b,IAE/B,MAAMm7B,EAAmBA,KACvBR,GAAc,IAgChB,OACEh7B,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQlB,KAAMnV,GAAG,oBAC/B3K,IAAA6b,cAACivB,KAAK,CACJlpB,QAAQ,WACR01B,UAAW,EACX91B,UAAW2V,YAAKnW,EAAQqZ,YAAa,CACnC,CAACrZ,EAAQ4Z,kBAAmB0S,KAG9BttC,IAAA6b,cAAC+d,GAAY,CAAC5e,QAASA,GAlCJygB,MACvB,QAAoBhiB,IAAhBya,EAAOpjB,KACT,OACE9Q,IAAA6b,cAACge,GAAU,CACTjsB,QAASA,EACTsmB,OAAQA,EACRpS,QAAS0Z,KA6BRC,GACDz7B,IAAA6b,cAACk1C,GAAmB,CAAC78B,OAAQA,KAE/Bl0B,IAAA6b,cAACivB,KAAK,KACJ9qC,IAAA6b,cAAC20C,GAAa,CAACt8B,OAAQA,KAEzBl0B,IAAA6b,cAACiT,GAAoB,KA3BvB9uB,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACE5oB,IAAA6b,cAACoY,GAAY,CACXC,OAAQA,EACRC,SAAUD,EAAOvpB,GACjBypB,QAASF,EAAOE,UAElBp0B,IAAA6b,cAACm1C,GAAY,CAAC78B,SAAUD,EAAOvpB,GAAIw9C,aAAcj0B,EAAO5rB,YAuB1DtI,IAAA6b,cAACuoC,GAAa,CACZx1C,KAAM0+B,EACNgX,kBAjDoBA,KACxBtpB,GAAc,IAiDVptB,QAASA,EACToN,QAASA,EACTkZ,OAAQA,MCnLhB,MAAMtU,GAAYC,YAAWnG,IAAK,CACjCu3C,cAAe,CACd5+B,KAAM,EAENzH,QAASlR,EAAMuoB,QAAQ,GACvBvhB,OAAO,oBACP2Q,UAAW,UAGZ6/B,WAAY,CAEXnxC,QAAS,OACTW,OAAQ,QAGTywC,gBAAiB,CAChBpxC,QAAS,OACTW,OAAQ,OACRV,cAAe,SACfqR,UAAW,UAEZ+/B,gBAAiB,CAChBrxC,QAAS,OACTW,OAAQ,OACRV,cAAe,UAEhBqxC,WAAY,CACXzwC,gBAAiBlH,EAAM8f,QAAQob,UAC/B70B,QAAS,OACT4T,eAAgB,eAChB1T,WAAY,SACZS,OAAQ,OACRwI,UAAW,aAqCEooC,OAjCOA,KACrB,MAAMtwC,EAAUpB,MACV,SAAEuU,GAAaiL,sBAErB,OACCp/B,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQiwC,eACvBjxD,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQkwC,YACvBlxD,IAAA6b,cAACupB,KAAI,CAACC,WAAS,EAACpD,QAAS,GACxBjiC,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,EAAGhkB,UAAWR,EAAQmwC,iBACpCnxD,IAAA6b,cAAC01C,GAAc,OAEhBvxD,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,EAAGhkB,UAAWR,EAAQowC,iBACnCj9B,EACAn0B,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACC5oB,IAAA6b,cAACi1C,GAAM,OAGR9wD,IAAA6b,cAACivB,KAAK,CAAChS,QAAM,EAAClX,QAAQ,WAAWJ,UAAWR,EAAQqwC,YAEpDrxD,IAAA6b,cAAA,WACA7b,IAAA6b,cAAA,cAAQ7b,IAAA6b,cAAA,OAAKkN,MAAO,CAAE7I,OAAQ,SAAUE,MAAO,OAASoQ,IAAKoc,KAAMze,IAAI,sB,sDC1D/DqjC,OANcC,aAAO3mB,KAAP2mB,CAAc,CACvC/wC,OAAO,oBACPX,QAAS,OACT2xC,iBAAkB,aCYtB,MAAM9xC,GAAYC,YAAWnG,IAAK,CAC9B7E,OAAQ,GAER3M,QAAS,CACL6oB,SAAU,QAEd4gC,qBAAsB,CAClB5xC,QAAS,OACTC,cAAe,SACfC,WAAY,SACZ0T,eAAgB,SAChBjT,OAAQ,OACdE,gBAAiBlH,EAAM8f,QAAQob,WAE7Bgd,gBAAiB,MA6ENC,OAzEShuC,IACvB,MAAM7C,EAAUpB,MACV,SAAEuU,GAAaiL,uBACd8b,EAAQ4W,GAAa52C,mBAAS,IAC5B,cAAEwR,EAAa,iBAAEC,GAAqBxR,qBAAWqR,IAEvDpR,oBAAU,KACkB,OAArBsR,EAAc/hB,IACbgiB,EAAiB,CAAEhiB,GAAI+hB,EAAc/hB,GAAIiiB,KAAM,UAE9CuH,GACD29B,EAAU,GAEP,KACHnlC,EAAiB,CAAEhiB,GAAI,KAAMiiB,KAAM,SAGxC,IAEHxR,oBAAU,KACmB,OAArBsR,EAAc/hB,IACdmnD,EAAU,IAEf,CAACplC,IA4BP,OACO1sB,IAAA6b,cAAC21C,GAAoB,KACjBxxD,IAAA6b,cAAC6f,KAAG,CAACla,UAAWR,EAAQnM,QACpB7U,IAAA6b,cAACk2C,KAAgB,CACbh2C,MAAOm/B,EACPx5B,SAAUA,CAACvgB,EAAO2yC,KACdge,EAAUhe,IAEdke,YAAU,EACVxwC,UAAWR,EAAQlB,MAEnB9f,IAAA6b,cAACo2C,KAAsB,CAACngD,MAAM,SAASgS,KAAM9jB,IAAA6b,cAAC6oB,KAAQ,QACtD1kC,IAAA6b,cAACo2C,KAAsB,CAACngD,MAAM,eAAegS,KAAM9jB,IAAA6b,cAACq2C,KAAkB,UAG9ElyD,IAAA6b,cAAC6f,KAAG,CAACla,UAAWR,EAAQ9Y,SACP,IAAXgzC,EA1BZ/mB,EACIn0B,IAAA6b,cAACi1C,GAAM,MAhBR9wD,IAAA6b,cAAC6f,KAAG,CAACla,UAAWR,EAAQ2wC,sBACiE,sBAE/F3xD,IAAA6b,cAAA,WACA7b,IAAA6b,cAAA,cAAQ7b,IAAA6b,cAAA,OAAKkN,MAAO,CAAE7I,OAAQ,SAAUE,MAAO,OAASoQ,IAAKoc,KAAMze,IAAI,gBACjE,sBAENnuB,IAAA6b,cAAA,WACS7b,IAAA6b,cAACgG,KAAM,CAACC,QAASA,IAAMgwC,EAAU,GAAIlwC,QAAQ,YAAY3U,MAAM,WAAU,sBAc5EjN,IAAA6b,cAAC4jC,GAAkB,SCvEbuK,uBAPf,SAAoCnmC,GAChC,OAAI6jC,aAAU,KAAM7jC,EAAMzD,OACfpgB,IAAA6b,cAACs2C,GAAO,MAEZnyD,IAAA6b,cAACg2C,GAAc,S,4ECE1B,MAAMO,GAAgBjrB,KAAW,CAC/BkrB,WAAYlrB,OAETE,SAAS,2BAEZirB,WAAYnrB,OACTE,SAAS,2BACT77B,KAAK,cAAe,iBAAiB,SAAUuQ,GAC9C,IAAKA,EACH,OAAO,EAGT,MAAOq6B,GAASr6B,EAAMwZ,MAAM,KAAKnT,IAAKkjB,GAASitB,SAASjtB,EAAM,KAE9D,OAAO8Q,GAAS,GAAKA,GAAS,MAE/B5qC,KACC,iBACA,qCACA,SAAUuQ,GACR,IAAKA,EACH,OAAO,EAGT,MAAMy2C,EAAc,IAAI9uD,MACjB0yC,EAAOE,GAAQv6B,EACnBwZ,MAAM,KACNnT,IAAKkjB,GAASitB,SAASjtB,EAAM,KAKhC,OAFmB,IAAI5hC,KAAK4yC,EAAO,IAAMF,EAAO,GAE5Boc,KAG1B7sD,KAAMwhC,OAAaE,SAAS,oBAC5BorB,IAAKtrB,OACFurB,QAAQ,eAAgB,eACxBrrB,SAAS,qBAGDsrB,GAAch3C,IAAmB,IAAlB,SAAE+F,GAAU/F,EACtC,MAAMi3C,EAAoB72C,GACjBA,EACJgQ,QAAQ,MAAO,IACfA,QAAQ,UAAW,OACnB/J,OAkBL,OACEhiB,IAAA6b,cAACisB,KAAM,CACLC,cAAe,CACbpiC,KAAM,GACN0sD,WAAY,GACZC,WAAY,GACZG,IAAK,IAEPxqB,iBAAkBmqB,IAEjBxmC,IAAA,IAAC,QAAE0c,EAAO,OAAEH,EAAM,OAAEI,EAAM,aAAEsqB,GAAcjnC,EAAA,OACzC5rB,IAAA6b,cAAC4sB,KAAI,CAAC/mB,SAAUA,IAAMA,EAASymB,IAC7BnoC,IAAA6b,cAACupB,KAAI,CAACC,WAAS,EAACytB,WAAY,EAAGC,cAAe,GAC5C/yD,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GAAI4R,GAAI,IACrBp3C,IAAA6b,cAAC6f,KAAG,KACF17B,IAAA6b,cAACyqB,KAAU,KAAC,mCACZtmC,IAAA6b,cAAC4F,KAAS,CACRoP,WAAS,EACTlmB,GAAG,OACHhF,KAAK,OACL+b,SAAUmxC,EACV92C,MAAOosB,EAAOxiC,KACdmT,MAAOwvB,EAAQ3iC,MAAQkvB,QAAQ0T,EAAO5iC,MACtCkjC,WAAYP,EAAQ3iC,MAAQ4iC,EAAO5iC,KACnC8I,YAAY,sBACZ44B,UAAQ,MAIdrnC,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GAAI4R,GAAI,IACrBp3C,IAAA6b,cAAC6f,KAAG,KACF17B,IAAA6b,cAACyqB,KAAU,KAAC,wCACZtmC,IAAA6b,cAAC4F,KAAS,CACRoP,WAAS,EACTlmB,GAAG,aACHhF,KAAK,aACLoW,MAAO62C,EAAiBzqB,EAAOkqB,YAC/B3wC,SAAWqO,IACTA,EAAEpO,OAAO5F,MAAQ62C,EAAiB7iC,EAAEpO,OAAO5F,OAC3C82C,EAAa9iC,IAEfjX,MAAOwvB,EAAQ+pB,YAAcx9B,QAAQ0T,EAAO8pB,YAC5CxpB,WAAYP,EAAQ+pB,YAAc9pB,EAAO8pB,WACzC/e,GAAI,CACF,uBAAwB,CACtBnqB,YAAa,QAGjB8jC,WAAY,CAAE+F,UAAW,IACzBvkD,YAAY,sBACZ44B,UAAQ,MAIZrnC,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GAAI4R,GAAI,GACrBp3C,IAAA6b,cAACyqB,KAAU,KAAC,2BACZtmC,IAAA6b,cAAC4F,KAAS,CACRG,QAAQ,WACRiP,WAAS,EACTlmB,GAAG,aACHhF,KAAK,aACLoW,MAAOosB,EAAOmqB,WACd5wC,SAAWqO,IACTA,EAAEpO,OAAO5F,MA9EDA,KAExB,MAGMk3C,EAHel3C,EAAMgQ,QAAQ,MAAO,IAGNmnC,MAAM,EAAG,GAG7C,OAAID,EAAelxD,OAAS,EACnBkxD,EAAeC,MAAM,EAAG,GAAK,MAAQD,EAAeC,MAAM,GAE1DD,GAmEwBE,CAAiBpjC,EAAEpO,OAAO5F,OAC3C82C,EAAa9iC,IAEfjX,MAAOwvB,EAAQgqB,YAAcz9B,QAAQ0T,EAAO+pB,YAC5CzpB,WAAYP,EAAQgqB,YAAc/pB,EAAO+pB,WACzCzW,WAAY,CACVC,aACE97C,IAAA6b,cAACu3C,KAAc,CAACpqC,SAAS,OACvBhpB,IAAA6b,cAACw3C,KAAa,CACZ/f,GAAI,CAAErmC,MAAO,UAAWmT,MAAO,YAKvC3R,YAAY,UACZ44B,UAAQ,KAGZrnC,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GAAI4R,GAAI,GACrBp3C,IAAA6b,cAACyqB,KAAU,KAAC,OACZtmC,IAAA6b,cAAC4F,KAAS,CACRG,QAAQ,WACRiP,WAAS,EACTlmB,GAAG,MACHhF,KAAK,MACL+b,SAAUmxC,EACV92C,MAAOosB,EAAOsqB,IACd35C,MAAOwvB,EAAQmqB,KAAO59B,QAAQ0T,EAAOkqB,KACrC5pB,WAAYP,EAAQmqB,KAAOlqB,EAAOkqB,IAClCxF,WAAY,CAAE+F,UAAW,GACzBvkD,YAAY,MACZ44B,UAAQ,UC/IpBznB,GAAYC,YAAYnG,IAAK,CACjCmrB,MAAO,CACLlkB,UAAWjH,EAAMuoB,QAAQ,GACzBliB,QAAS,OACTC,cAAe,SACfC,WAAY,UAEdkZ,OAAQ,CACNjZ,OAAQxG,EAAMuoB,QAAQ,GACtBrhB,gBAAiBlH,EAAM8f,QAAQ/W,UAAUopB,MAE3CnmC,KAAM,CACJ0a,MAAO,OACPO,UAAWjH,EAAMuoB,QAAQ,IAE3Bl8B,OAAQ,CACNma,OAAQxG,EAAMuoB,QAAQ,EAAG,EAAG,OAI1BqxB,GAAgBnsB,OAAaC,MAAM,CACvCzhC,KAAMwhC,OACHxB,IAAI,EAAG,cACPC,IAAI,GAAI,aACRyB,SAAS,YACZxhC,SAAUshC,OAAaxB,IAAI,EAAG,cAAcC,IAAI,GAAI,aACpDhgC,MAAOuhC,OAAavhC,MAAM,iBAAiByhC,SAAS,YACpDksB,QAASpsB,OACNxB,IAAI,GAAI,cACRC,IAAI,GAAI,aACRyB,SAAS,cAyPCmsB,OAtPAA,KACb,MAAMxyC,EAAUpB,KACV3D,EAAUC,wBACTlB,EAASC,GAAcC,oBAAS,IAYhCu4C,EAAYC,GAAiBx4C,mBAAS,CAC3CvV,KAAM,GACN0sD,WAAY,GACZC,WAAY,GACZG,IAAK,KAGD10C,EAAUF,MAASlW,IAAI,EAAG,OAAOsW,UA+BhC/X,EAAOytD,GAAYz4C,mBAAS,KAC3B4F,KAAM8yC,GAAc3wC,KAU5B,OARA7H,oBAAU,MACRC,iBACE,MAAMyF,QAAa8yC,IACnBD,EAAS7yC,GAEXyG,IACC,IAGDvnB,IAAA6b,cAACs7B,KAAS,CAACzyB,UAAU,OAAOgN,SAAS,MACnC1xB,IAAA6b,cAACg4C,IAAW,MACZ7zD,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQ6jB,OACtB7kC,IAAA6b,cAAA,WACE7b,IAAA6b,cAAA,cACE7b,IAAA6b,cAAA,OACEkN,MAAO,CAAE7I,OAAQ,SAAUE,MAAO,OAClCoQ,IAAKoc,KACLze,IAAI,YAIVnuB,IAAA6b,cAACisB,KAAM,CACLC,cAzEa,CACnBpiC,KAAM,GACNC,MAAO,GACPkuD,MAAO,GACPjuD,SAAU,GACVkuD,OAAQ,GACRR,QAAS,GACTS,WAAY,IAmENhsB,oBAAoB,EACpBC,iBAAkBqrB,GAClBprB,SAAUA,CAACC,EAAQ1/B,KACjB7E,WAAW,KA1DAyX,WAQnB,GAPAJ,GAAW,GACXqJ,OAAOC,OAAO4jB,EAAQ,CAAE8rB,WAAY,WACpC3vC,OAAOC,OAAO4jB,EAAQ,CAAEpqB,QAASA,IACjCuG,OAAOC,OAAO4jB,EAAQ,CAAE7/B,OAAQ,MAChCgc,OAAOC,OAAO4jB,EAAQ,CAAE+rB,kBAAkB,IAC1C5vC,OAAOC,OAAO4jB,EAAQ,CAAEsrB,eAGrBA,EAAWpB,YACXoB,EAAW9tD,MACX8tD,EAAWhB,KACXgB,EAAWnB,WAJd,CAUA,UACQ14C,GAAIoD,KAAK,sBAAuBmrB,GACtCnvB,IAAMxT,QAAQuS,KAAKkB,EAAE,0BACrBgD,EAAQza,KAAK,UACb,MAAOgX,GACPD,GAAWC,GAGbyC,GAAW,QAZTjC,IAAMF,MAAM,wDA6CJq7C,CAAahsB,GACb1/B,EAAQ4/B,eAAc,IACrB,OAGJ1sB,IAAA,IAAC,QAAE2sB,EAAO,OAAEC,EAAM,aAAEC,GAAc7sB,EAAA,OACjC3b,IAAA6b,cAAC4sB,KAAI,CAACjnB,UAAWR,EAAQtb,MACvB1F,IAAA6b,cAACupB,KAAI,CAACC,WAAS,EAACpD,QAAS,GACvBjiC,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,IACbxlC,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJ2yC,aAAa,OACbzuD,KAAK,OACLmT,MAAOwvB,EAAQ3iC,MAAQkvB,QAAQ0T,EAAO5iC,MACtCkjC,WAAYP,EAAQ3iC,MAAQ4iC,EAAO5iC,KACnCic,QAAQ,WACRiP,WAAS,EACTlmB,GAAG,OACHmH,MAAM,kBACNu1B,UAAQ,KAIZrnC,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,IACbxlC,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJG,QAAQ,WACRiP,WAAS,EACTlmB,GAAG,QACHmH,MAAOiG,KAAKkB,EAAE,qBACdtT,KAAK,QACLmT,MAAOwvB,EAAQ1iC,OAASivB,QAAQ0T,EAAO3iC,OACvCijC,WAAYP,EAAQ1iC,OAAS2iC,EAAO3iC,MACpCwuD,aAAa,QACb/sB,UAAQ,KAIZrnC,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,IACbxlC,IAAA6b,cAAC6sB,KAAK,CACJC,GAAI0rB,KACJC,KAAK,kBACL1yC,QAAQ,WACRiP,WAAS,EACTlmB,GAAG,QACHhF,KAAK,QACLmT,MAAOwvB,EAAQwrB,OAASj/B,QAAQ0T,EAAOurB,OACvCjrB,WAAYP,EAAQwrB,OAASvrB,EAAOurB,MACpCM,aAAa,SAEZxoC,IAAA,IAAC,MAAE2oC,GAAO3oC,EAAA,OACT5rB,IAAA6b,cAAC4F,KAAS6C,OAAAC,OAAA,GACJgwC,EAAK,CACT3yC,QAAQ,WACRiP,WAAS,EACT/e,MAAM,qBACNm7C,WAAY,CAAE+F,UAAW,IACzB3rB,UAAQ,QAKhBrnC,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,IACbxlC,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJ2yC,aAAa,UACbzuD,KAAK,UACLmT,MAAOwvB,EAAQirB,SAAW1+B,QAAQ0T,EAAOgrB,SACzC1qB,WAAYP,EAAQirB,SAAWhrB,EAAOgrB,QACtC3xC,QAAQ,WACRiP,WAAS,EACTlmB,GAAG,UACHmH,MAAM,WACNu1B,UAAQ,KAIZrnC,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,IACbxlC,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJ2yC,aAAa,aACbzuD,KAAK,aACLmT,MAAOwvB,EAAQ0rB,YAAcn/B,QAAQ0T,EAAOyrB,YAC5CnrB,WAAYP,EAAQ0rB,YAAczrB,EAAOyrB,WACzCpyC,QAAQ,WACRiP,WAAS,EACTlmB,GAAG,aACHmH,MAAM,MACNu1B,UAAQ,KAIZrnC,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,IACbxlC,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJG,QAAQ,WACRiP,WAAS,EACTlrB,KAAK,WACLmT,MAAOwvB,EAAQziC,UAAYgvB,QAAQ0T,EAAO1iC,UAC1CgjC,WAAYP,EAAQziC,UAAY0iC,EAAO1iC,SACvCiM,MAAOiG,KAAKkB,EAAE,wBACdrO,KAAK,WACLD,GAAG,WACHypD,aAAa,mBACb/sB,UAAQ,KAGZrnC,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,IACbxlC,IAAA6b,cAACyqB,KAAU,CAACwhB,QAAQ,kBAAiB,SACrC9nD,IAAA6b,cAAC6sB,KAAK,CACJC,GAAInC,KACJ5kB,QAAQ,WACRiP,WAAS,EACTlmB,GAAG,iBACHmH,MAAM,QACNnM,KAAK,SACL0hC,UAAQ,GAEPnhC,EAAMkc,IAAI,CAACpb,EAAM4W,IAChB5d,IAAA6b,cAACiU,IAAQ,CAAClS,IAAKA,EAAK7B,MAAO/U,EAAK2D,IAC7B3D,EAAKrB,KAAK,kBAAgBqB,EAAKb,MAAM,eAAa,IAClDa,EAAKZ,YAAY,aAAWY,EAAKiJ,OAAO,QAAM,IAC9CjJ,EAAK+U,UAKd/b,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,IACbxlC,IAAA6b,cAAC82C,GAAW,CAACjxC,SAAUgyC,MAG3B1zD,IAAA6b,cAACgG,KAAM,CACLjX,KAAK,SACLimB,WAAS,EACTjP,QAAQ,YACR3U,MAAM,UACNuU,UAAWR,EAAQjb,OACnBS,SAAUwU,EACV8a,UAAW9a,EAAUhb,IAAA6b,cAACwP,KAAgB,CAACpe,MAAM,UAAUqe,KAAM,KAAS,MAErEvT,KAAKkB,EAAE,0BAEVjZ,IAAA6b,cAACupB,KAAI,CAACC,WAAS,EAACmvB,QAAQ,YACtBx0D,IAAA6b,cAACupB,KAAI,CAACE,MAAI,GACRtlC,IAAA6b,cAACkpC,KAAI,CACH/uB,KAAK,IACLpU,QAAQ,QACR8C,UAAWL,IACXN,GAAG,UAEFhM,KAAKkB,EAAE,+BAQtBjZ,IAAA6b,cAAC6f,KAAG,CAAC+4B,GAAI,M,UC1Rf,MAAMC,GAAYA,IAEhB10D,IAAA6b,cAAC8O,IAAU,CAAC/I,QAAQ,QAAQ3U,MAAM,UAAUmjC,MAAM,UAChD,aACApwC,IAAA6b,cAACkpC,KAAI,CAAC93C,MAAM,UAAU+oB,KAAK,KACxB2+B,KAAa,QAAOC,MACf,KACP,IAAIlxD,MAAO6yC,cACX,KAKC32B,GAAYC,YAAWnG,IAAK,CACjCoG,KAAM,CACLM,MAAO,QACPM,OAAQ,QAGRE,gBAAiBlH,EAAM8f,QAAQhX,QAAQqpB,KACvC7B,iBAAkB,YAClBC,eAAgB,YAChBC,mBAAoB,SACpBnqB,QAAS,OACTC,cAAe,SACfC,WAAY,SACZ0T,eAAgB,SAChBzK,UAAW,UAEZ2b,MAAO,CACNjkB,gBAAiBlH,EAAM8f,QAAQxzB,MAC/B+Z,QAAS,OACTC,cAAe,SACfC,WAAY,SACZ2K,QAAS,YACT/J,aAAc,UAEfsY,OAAQ,CACPjZ,OAAQxG,EAAMuoB,QAAQ,GACtBrhB,gBAAiBlH,EAAM8f,QAAQ/W,UAAUopB,MAE1CnmC,KAAM,CACL0a,MAAO,OACPO,UAAWjH,EAAMuoB,QAAQ,IAE1Bl8B,OAAQ,CACPma,OAAQxG,EAAMuoB,QAAQ,EAAG,EAAG,IAE7B4yB,QAAS,CACR5nD,MAAO,YAkGM6nD,OA9FDA,KACb,MAAM9zC,EAAUpB,MAET9O,EAAMuL,GAAWnB,mBAAS,CAAEtV,MAAO,GAAIC,SAAU,MAElD,YAAEyX,GAAgBnC,qBAAWyD,IAE7Bm2C,EAAoBhlC,IACzB1T,EAAQ,IAAKvL,EAAM,CAACif,EAAEpO,OAAOhc,MAAOoqB,EAAEpO,OAAO5F,SAS9C,OACC/b,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQlB,MACxB9f,IAAA6b,cAACs7B,KAAS,CAACzyB,UAAU,OAAOgN,SAAS,MACpC1xB,IAAA6b,cAACg4C,IAAW,MACZ7zD,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQ6jB,OACvB7kC,IAAA6b,cAAA,WACC7b,IAAA6b,cAAA,OAAKkN,MAAO,CAAE7I,OAAQ,SAAUE,MAAO,OAASoQ,IAAKoc,KAAMze,IAAI,WAKhEnuB,IAAA6b,cAAA,QAAM2F,UAAWR,EAAQtb,KAAMsvD,YAAU,EAAC9sB,SAjBzBnY,IACnBA,EAAEoU,iBACF7mB,EAAYxM,KAgBT9Q,IAAA6b,cAAC4F,KAAS,CACTG,QAAQ,WACR1B,OAAO,SACPmnB,UAAQ,EACRxW,WAAS,EACTlmB,GAAG,QACHmH,MAAOiG,KAAKkB,EAAE,oBACdtT,KAAK,QACLoW,MAAOjL,EAAKlL,MACZ8b,SAAUqzC,EACVX,aAAa,QACbxrB,WAAS,IAEV5oC,IAAA6b,cAAC4F,KAAS,CACTG,QAAQ,WACR1B,OAAO,SACPmnB,UAAQ,EACRxW,WAAS,EACTlrB,KAAK,WACLmM,MAAOiG,KAAKkB,EAAE,uBACdrO,KAAK,WACLD,GAAG,WACHoR,MAAOjL,EAAKjL,SACZ6b,SAAUqzC,EACVX,aAAa,qBAWdp0D,IAAA6b,cAACgG,KAAM,CACNjX,KAAK,SACLimB,WAAS,EACTjP,QAAQ,YACR3U,MAAM,UACNuU,UAAWR,EAAQjb,QAElBgS,KAAKkB,EAAE,yBAEPjZ,IAAA6b,cAACupB,KAAI,CAACC,WAAS,GAChBrlC,IAAA6b,cAACupB,KAAI,CAACE,MAAI,GACTtlC,IAAA6b,cAACkpC,KAAI,CACJ/uB,KAAK,IACLpU,QAAQ,QACR8C,UAAWL,IACXN,GAAG,WAEFhM,KAAKkB,EAAE,+BAObjZ,IAAA6b,cAAC6f,KAAG,CAAC+4B,GAAI,GAAGz0D,IAAA6b,cAAC64C,GAAS,U,6EC3JzB,MAAM90C,GAAYC,YAAWnG,IAAK,CACjCu7C,cAAe,CACd5iC,KAAM,EACNzH,QAASlR,EAAMuoB,QAAQ,GACvBvhB,OAAO,qBAGRw0C,eAAgB,CACfx0C,OAAQ,OACR2Q,UAAW,SACXtR,QAAS,OACTC,cAAe,aAcFm1C,OAVOx5C,IAAmB,IAAlB,SAAEC,GAAUD,EAClC,MAAMqF,EAAUpB,KAEhB,OACC5f,IAAA6b,cAACs7B,KAAS,CAAC31B,UAAWR,EAAQi0C,eAC7Bj1D,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQk0C,gBAAiBt5C,KCrB5C,MAAMgE,GAAYC,YAAWnG,IAAK,CACjC07C,eAAgB,CACfr1C,QAAS,OACTE,WAAY,SACZ2K,QAAS,sBAUIyqC,OANI15C,IAAmB,IAAlB,SAAEC,GAAUD,EAC/B,MAAMqF,EAAUpB,KAEhB,OAAO5f,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQo0C,gBAAiBx5C,ICXjD,MAAMgE,GAAYC,YAAWnG,IAAK,CACjC47C,yBAA0B,CACzBjjC,KAAM,OACNnH,WAAY,OACZ,QAAS,CACRhL,OAAQxG,EAAMuoB,QAAQ,QAWVqzB,OANkB35C,IAAmB,IAAlB,SAAEC,GAAUD,EAC7C,MAAMqF,EAAUpB,KAEhB,OAAO5f,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQs0C,0BAA2B15C,ICd5C,SAAS81B,GAAM7tB,GAC7B,OACC7jB,IAAA6b,cAAC8O,IAAU,CAAC/I,QAAQ,KAAK3U,MAAM,UAAUyjB,cAAY,GACnD7M,EAAMjI,UCAV,MAAMgE,GAAYC,YAAWnG,IAAK,CACjC67C,gBAAiB,CAChBx1C,QAAS,OACTE,WAAY,SACZ0T,eAAgB,aAyCH6hC,OArCU75C,IAA0B,IAAzB,OAAEwd,EAAM,QAAEs8B,GAAS95C,EAC5C,MAAMqF,EAAUpB,KAChB,OACC5f,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACC5oB,IAAA6b,cAACq0B,KAAQ,KACP/W,GACAn5B,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACC5oB,IAAA6b,cAACs0B,KAAS,CAACpnB,MAAO,CAAE+I,aAAc,IACjC9xB,IAAA6b,cAACud,KAAQ,CACRC,UAAU,OACVzX,QAAQ,SACRxB,MAAO,GACPM,OAAQ,MAGV1gB,IAAA6b,cAACs0B,KAAS,KACTnwC,IAAA6b,cAACud,KAAQ,CAACC,UAAU,OAAO3Y,OAAQ,GAAIN,MAAO,OAIhDpe,MAAM8oD,KAAK,CAAE/oD,OAAQ0zD,GAAW,CAACC,EAAGrzC,IACpCriB,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,SAASxyB,IAAKyE,GAC9BriB,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQu0C,iBACvBv1D,IAAA6b,cAACud,KAAQ,CACRgX,MAAM,SACN/W,UAAU,OACV3Y,OAAQ,GACRN,MAAO,WCXf,MAAMR,GAAYC,YAAYnG,IAAK,CACjCoG,KAAM,CACJC,QAAS,OACT0Q,SAAU,QAGZsW,cAAe,CACbhnB,QAAS,OACT,yBAA0B,CACxBS,YAAa9G,EAAMuoB,QAAQ,KAI/B+E,WAAY,CACVhe,SAAU,YAGZ8B,eAAgB,CACd7d,MAAO8d,KAAM,KACb/B,SAAU,WACVgC,IAAK,MACLC,KAAM,MACNtK,WAAY,GACZuK,YAAa,OAIXyqC,GAAgBxuB,OAAaC,MAAM,CACvCzhC,KAAMwhC,OACHxB,IAAI,EAAG,cACPC,IAAI,GAAI,aACRyB,SAAS,cAyYCrnC,WAAM41D,KAtYCj6C,IAAoC,IAAnC,KAAE/M,EAAI,QAAEyf,EAAO,WAAE1T,GAAYgB,EAClD,MAAMqF,EAAUpB,KACV2nB,EAAe,CACnB5hC,KAAM,GACN8D,gBAAiB,GACjBC,kBAAmB,GACnBN,kBAAmB,GACnB8D,cAAe,GACf2oD,WAAW,EACXzyD,MAAO,GACP0yD,SAAU,OAGVtsD,uBAAwB,GACxBD,cAAe,EACfwsD,iBAAkB,EAClBC,gBAAiB,IAEZ17C,EAAU27C,GAAe/6C,mBAASqsB,IAClCtB,EAAkBwB,GAAuBvsB,mBAAS,KAClDjL,EAAQk2B,GAAajrB,mBAAS,KAC9Bg7C,EAAiBC,GAAsBj7C,mBAAS,OAChDk7C,EAAgBC,GAAqBn7C,mBAAS,OAC9C3O,EAAS+pD,GAAcp7C,mBAAS,IAErCE,oBAAU,KACWC,WACnB,GAAKV,EAEL,IAAK,IAADgtB,EACF,MAAM,KAAE9uB,SAAee,GAAI0B,IAAI,YAADpa,OAAayZ,EAAU,eACrDs7C,EAAYp9C,GAEZ,MAAM09C,EAA2B,QAAd5uB,EAAG9uB,EAAK5I,cAAM,IAAA03B,OAAA,EAAXA,EAAavlB,IAAK5V,GAAUA,EAAM7B,IACxD88B,EAAoB8uB,GAC1BJ,EAAmBt9C,EAAK29C,iBAClB,MAAOh+C,GACPD,GAAWC,KAGf+C,IACC,CAACZ,IAEJS,oBAAU,KACR,WACE,IACE,MAAM,KAAEvC,SAAee,GAAI0B,IAAI,WAC/Bg7C,EAAWz9C,EAAKtM,SAChB,MAAOiM,GACPD,GAAWC,KALf,IAQC,CAACmC,IAEJS,oBAAU,KACR,WACE,IACE,MAAM,KAAEvC,SAAee,GAAI0B,IAAI,UAC/B6qB,EAAUttB,GACV,MAAOL,GACPD,GAAWC,KALf,IAQC,IAEH,MA0BMi+C,EAAsB1mC,IAC1BsmC,EAAkBtmC,EAAEpO,OAAO5F,OAC3B0rB,EAAoB,KAGhBtY,EAAcA,KAClBd,IACA4nC,EAAY1uB,GACb4uB,EAAmB,MAClB1uB,EAAoB,KAGtB,OACEznC,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQlB,MACtB9f,IAAA6b,cAAC0S,KAAM,CACL3f,KAAMA,EACNyf,QAASc,EACTuC,SAAS,KACTb,WAAS,EACTsL,OAAO,SAEPn8B,IAAA6b,cAAC4S,KAAW,KACT9T,EACG5C,KAAKkB,EAAE,4BACPlB,KAAKkB,EAAE,4BAEbjZ,IAAA6b,cAACisB,KAAM,CACLC,cAAeztB,EACf0tB,oBAAoB,EACpBC,iBAAkB0tB,GAClBztB,SAAUA,CAACC,EAAQ1/B,KACjB7E,WAAW,KAzDMyX,WAC7B,MAAMq7C,EAAe,IACZvuB,EAAQzG,SAAUuE,EAAkBuwB,gBAAiBN,EACxD70B,SAAU+0B,GAAkC,aAEvCM,EAAqB,cACrBA,EAAsB,QAE7B,IACM/7C,QACIf,GAAIqnB,IAAI,aAAD//B,OAAcyZ,GAAc+7C,SAEnC98C,GAAIoD,KAAK,YAAa05C,GAE9B19C,IAAMxT,QAAQuS,KAAKkB,EAAE,0BACrBkW,IACA,MAAO3W,GACPD,GAAWC,KAyCHm+C,CAAmBxuB,GACnB1/B,EAAQ4/B,eAAc,IACrB,OAGJzc,IAAA,IAAC,OAAEuc,EAAM,QAAEG,EAAO,OAAEC,EAAM,aAAEC,GAAc5c,EAAA,OACzC5rB,IAAA6b,cAAC4sB,KAAI,KACHzoC,IAAA6b,cAAC6S,KAAa,CAACC,UAAQ,GACrB3uB,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQ+lB,eACtB/mC,IAAA6b,cAACupB,KAAI,CAACnD,QAAS,EAAGoD,WAAS,GACzBrlC,IAAA6b,cAACupB,KAAI,CAACE,MAAI,GACRtlC,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,2BACd2vB,WAAS,EACTjjC,KAAK,OACLmT,MAAOwvB,EAAQ3iC,MAAQkvB,QAAQ0T,EAAO5iC,MACtCkjC,WAAYP,EAAQ3iC,MAAQ4iC,EAAO5iC,KACnCic,QAAQ,WACR1B,OAAO,QACPsB,UAAWR,EAAQioB,aAGvBjpC,IAAA6b,cAACupB,KAAI,CAACrc,MAAO,CAAEgJ,WAAY,IAAMuT,MAAI,GACnCtlC,IAAA6b,cAAC2lC,KAAgB,CACfE,QACE1hD,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIgZ,KACJ10C,MAAM,UACNtH,KAAK,YACLw3C,QAAShV,EAAO0tB,YAGpB/jD,MAAOiG,KAAKkB,EAAE,mCAKtBjZ,IAAA6b,cAAA,WACE7b,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,mCACdrO,KAAK,kBACLo5C,WAAS,EACTD,KAAM,EACNlzB,WAAS,EACTlrB,KAAK,kBACLmT,MACEwvB,EAAQ7+B,iBAAmBorB,QAAQ0T,EAAO9+B,iBAE5Co/B,WACEP,EAAQ7+B,iBAAmB8+B,EAAO9+B,gBAEpCmY,QAAQ,WACR1B,OAAO,WAGXlgB,IAAA6b,cAAA,WACE7b,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,qCACdrO,KAAK,oBACLo5C,WAAS,EACTD,KAAM,EACNlzB,WAAS,EACTlrB,KAAK,oBACLmT,MACEwvB,EAAQ5+B,mBACRmrB,QAAQ0T,EAAO7+B,mBAEjBm/B,WACEP,EAAQ5+B,mBAAqB6+B,EAAO7+B,kBAEtCkY,QAAQ,WACR1B,OAAO,WAGXlgB,IAAA6b,cAAA,WACE7b,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,qCACdrO,KAAK,oBACLo5C,WAAS,EACTD,KAAM,EACNlzB,WAAS,EACTlrB,KAAK,oBACLmT,MACEwvB,EAAQl/B,mBACRyrB,QAAQ0T,EAAOn/B,mBAEjBy/B,WACEP,EAAQl/B,mBAAqBm/B,EAAOn/B,kBAEtCwY,QAAQ,WACR1B,OAAO,WAGXlgB,IAAA6b,cAAA,WACE7b,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,iCACdrO,KAAK,gBACLo5C,WAAS,EACTD,KAAM,EACNlzB,WAAS,EACTlrB,KAAK,gBACLmT,MACEwvB,EAAQp7B,eAAiB2nB,QAAQ0T,EAAOr7B,eAE1C27B,WAAYP,EAAQp7B,eAAiBq7B,EAAOr7B,cAC5C0U,QAAQ,WACR1B,OAAO,WAGXlgB,IAAA6b,cAAA,WACE7b,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,yBACdrO,KAAK,QACLimB,WAAS,EACTlrB,KAAK,QACLic,QAAQ,WACR1B,OAAO,WAGXlgB,IAAA6b,cAACmqB,GAAW,CACVC,iBAAkBA,EAClBvkB,SAAWk1C,IAnKzBnvB,EAmK2DmvB,QAlK3DP,EAAkB,SAoKNr2D,IAAA6b,cAACwqB,KAAW,CACVnmB,OAAO,QACP0B,QAAQ,WACRiP,WAAS,GAET7wB,IAAA6b,cAACyqB,KAAU,KACRvuB,KAAKkB,EAAE,8BAEVjZ,IAAA6b,cAAC2qB,KAAM,CACLsC,QAAQ,6BACRn+B,GAAG,uBACHhF,KAAK,WACLoW,MAAOq6C,GAAkB,GACzB10C,SAAU+0C,EACV3kD,MAAOiG,KAAKkB,EAAE,6BACd4X,WAAS,EACT6V,UAAW,CACTjX,aAAc,CACZC,SAAU,SACVC,WAAY,QAEdC,gBAAiB,CACfF,SAAU,MACVC,WAAY,QAEdH,mBAAoB,OAGrBjjB,EAAQ6V,IAAK9Y,GACZtJ,IAAA6b,cAACiU,IAAQ,CACPlS,IAAKtU,EAAOqB,GACZoR,MAAOzS,EAAOqB,IAEbrB,EAAO3D,SAKhB3F,IAAA6b,cAAA,WACE7b,IAAA6b,cAAA,UAAK9D,KAAKkB,EAAE,wCACZjZ,IAAA6b,cAAA,SAAI9D,KAAKkB,EAAE,4CACzBjZ,IAAA6b,cAACupB,KAAI,CAACC,WAAS,EAACpD,QAAS,GACXjiC,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAAC8R,GAAI,GACbp3C,IAAA6b,cAAC6sB,KAAK,CACJ7X,WAAS,EACTjmB,KAAK,SACL+9B,GAAIlnB,KACJ3P,MAAM,iCACNnM,KAAK,iBACLmT,MAAOwvB,EAAQuuB,gBAAkBhiC,QAAQ0T,EAAOsuB,gBAChDhuB,WAAYP,EAAQuuB,gBAAkBtuB,EAAOsuB,eAC7Cj1C,QAAQ,WACR1B,OAAO,QACPsB,UAAWR,EAAQioB,UACnBoP,gBAAiB,CAAE9R,SAAQ4B,EAAO0uB,mBAKtC72D,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAAC8R,GAAI,GACbp3C,IAAA6b,cAACmqB,GAAW,CACVC,iBAAkBiwB,EAClBx0C,SAAWo1C,IACTX,EAAmBW,IAErB5wB,UAAU,EACV5gC,MAAO,+BAKXtF,IAAA6b,cAACupB,KAAI,CAACnD,QAAS,EAAGoD,WAAS,GAEzBrlC,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI6R,GAAI,GAAI/R,MAAI,GACxBtlC,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,oCACd4X,WAAS,EACTlrB,KAAK,gBACLic,QAAQ,WACR1B,OAAO,QACPpH,MAAOwvB,EAAQ/+B,eAAiBsrB,QAAQ0T,EAAOh/B,eAC/Cs/B,WAAYP,EAAQ/+B,eAAiBg/B,EAAOh/B,kBAKlDvJ,IAAA6b,cAAA,WACE7b,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,6CACd+qC,WAAS,EACTD,KAAM,EACNlzB,WAAS,EACTlrB,KAAK,yBACLmT,MAAOwvB,EAAQ9+B,wBAA0BqrB,QAAQ0T,EAAO/+B,wBACxDq/B,WAAYP,EAAQ9+B,wBAA0B++B,EAAO/+B,uBACrDoY,QAAQ,WACR1B,OAAO,aAKflgB,IAAA6b,cAAC+S,KAAa,KACZ5uB,IAAA6b,cAACgG,KAAM,CACLC,QAASqN,EACTliB,MAAM,YACNzG,SAAUgiC,EACV5mB,QAAQ,YAEP7J,KAAKkB,EAAE,iCAEVjZ,IAAA6b,cAACgG,KAAM,CACLjX,KAAK,SACLqC,MAAM,UACNzG,SAAUgiC,EACV5mB,QAAQ,YACRJ,UAAWR,EAAQgmB,YAElBrsB,EACG5C,KAAKkB,EAAE,gCACPlB,KAAKkB,EAAE,+BACVuvB,GACCxoC,IAAA6b,cAACwP,KAAgB,CACfC,KAAM,GACN9J,UAAWR,EAAQ8J,0B,qBCtW1B9qB,WAAM41D,KA1EDj6C,IAAoC,IAAnC,KAAE/M,EAAI,QAAEyf,EAAO,WAAE1T,GAAYgB,EAChD,MAAO7R,EAAQitD,GAAa77C,mBAAS,IAG/B7a,GAFQotC,cAEQtyB,qBAAWlW,IAoCjC,OAlCAmW,oBAAU,KACaC,WACnB,GAAKV,EAEL,IACE,MAAM,KAAE9B,SAAee,GAAI0B,IAAI,aAADpa,OAAcyZ,IAC5Co8C,EAAUl+C,EAAKhR,QACf,MAAO2Q,GACPD,GAAWC,KAGf+C,IACC,CAACZ,IAEJS,oBAAU,KACR,IAAKT,EAAY,OACjB,MAAM/X,EAAYG,aAAaC,QAAQ,aACjC8B,EAASzE,EAAcsC,UAAUC,GAYvC,OAVAkC,EAAOnE,GAAG,WAADO,OAAY0B,EAAS,oBAAqBiW,IAC7B,WAAhBA,EAAKuB,QAAuBvB,EAAKnQ,QAAQiC,KAAOgQ,GAClDo8C,EAAUl+C,EAAKnQ,QAAQb,QAGL,WAAhBgR,EAAKuB,QAA+C,KAAxBvB,EAAKnQ,QAAQb,QAC3CwmB,MAIG,KACLvpB,EAAOzC,eAER,CAACsY,EAAY0T,EAAShuB,IAGvBL,IAAA6b,cAAC0S,KAAM,CAAC3f,KAAMA,EAAMyf,QAASA,EAASqD,SAAS,KAAKyK,OAAO,SACzDn8B,IAAA6b,cAAC6S,KAAa,KACZ1uB,IAAA6b,cAACivB,KAAK,CAACwM,UAAW,EAAGvuB,MAAO,CAAEhJ,QAAS,OAAQE,WAAY,WACzDjgB,IAAA6b,cAAA,OAAKkN,MAAO,CAAEvI,YAAa,SACzBxgB,IAAA6b,cAAC8O,IAAU,CAAC/I,QAAQ,KAAK8C,UAAU,KAAKzX,MAAM,cAAcyjB,cAAY,EAAC3H,MAAO,CAAEiuC,WAAY,aAAcnsC,WAAY,OAAQ5B,SAAS,SAAU,2BAGnJjpB,IAAA6b,cAAC8O,IAAU,CAAC/I,QAAQ,QAAQ3U,MAAM,cAAcyjB,cAAY,GAAC,sCAG7D1wB,IAAA6b,cAAC8O,IAAU,CAAC/I,QAAQ,QAAQ3U,MAAM,cAAcyjB,cAAY,GAAC,6CACvB1wB,IAAA6b,cAAA,OAAKo7C,MAAM,kBAAkBC,UAAU,QAAQl/B,QAAQ,YAAYm/B,cAAY,QAAOn3D,IAAA6b,cAAA,QAAMqc,EAAE,uJAAiK,8BAAqBl4B,IAAA6b,cAAA,OAAKo7C,MAAM,kBAAkBC,UAAU,QAAQl/B,QAAQ,YAAYm/B,cAAY,QAAOn3D,IAAA6b,cAAA,QAAMqc,EAAE,isBAA2sB,cAEnmCl4B,IAAA6b,cAAC8O,IAAU,CAAC/I,QAAQ,QAAQ3U,MAAM,cAAcyjB,cAAY,GAAC,gFAG7D1wB,IAAA6b,cAAC8O,IAAU,CAAC/I,QAAQ,QAAQ3U,MAAM,cAAcyjB,cAAY,GAAC,kEAI/D1wB,IAAA6b,cAAA,WACG/R,EACC9J,IAAA6b,cAACu7C,KAAM,CAACr7C,MAAOjS,EAAQwhB,KAAM,MAE7BtrB,IAAA6b,cAAA,YAAM,6BC5BpB,MAAM+D,GAAYC,YAAWnG,IAAK,CACjCgwB,UAAW,CACVrX,KAAM,EACNzH,QAASlR,EAAMuoB,QAAQ,GACvB5Q,UAAW,YACR3X,EAAM4X,iBAEVikC,gBAAiB,CAChBx1C,QAAS,OACTE,WAAY,SACZ0T,eAAgB,UAEjB0jC,QAAS,CACRz2C,gBAAiB,UACjB3T,MAAO,sBACPgc,SAAUvP,EAAM49C,WAAWC,QAAQ,IACnCztB,OAAQ,oBACRpY,SAAU,KAEX8lC,cAAe,CACdtuC,UAAW,UAEZ4B,eAAgB,CACf7d,MAAO8d,KAAM,SAIT0sC,GAAgB97C,IAAmC,IAAlC,MAAErW,EAAK,QAAE4C,EAAO,SAAE0T,GAAUD,EAClD,MAAMqF,EAAUpB,KAEhB,OACC5f,IAAA6b,cAACqkB,KAAO,CACPC,OAAK,EACLnf,QAAS,CACRq2C,QAASr2C,EAAQq2C,QACjBK,OAAQ12C,EAAQw2C,eAEjBlyD,MACCtF,IAAA6b,cAAC7b,IAAM4oB,SAAQ,KACd5oB,IAAA6b,cAAC8O,IAAU,CAAC+F,cAAY,EAACzjB,MAAM,WAC7B3H,GAED4C,GAAWlI,IAAA6b,cAAC8O,IAAU,KAAEziB,KAI1B0T,IAsVW+7C,OAjVKA,KACnB,MAAM32C,EAAUpB,MAEV,KAAE9O,GAASqK,qBAAWyD,KACtB,UAAE/D,EAAS,QAAEG,GAAYG,qBAAWM,KACnCm8C,EAAmBC,GAAwB38C,oBAAS,IACpD48C,EAAaC,GAAkB78C,oBAAS,IACxC88C,EAAkBC,GAAuB/8C,mBAAS,OAClDg9C,EAAkBC,GAAuBj9C,oBAAS,GACnDk9C,EAAgC,CACrCh+C,OAAQ,GACR9U,MAAO,GACPyE,QAAS,GACT4Q,WAAY,GACZ/L,MAAM,IAEAypD,EAAkBC,GAAuBp9C,mBAC/Ck9C,GAmBKG,EAA0BA,KAC/BN,EAAoB,MACpBJ,GAAqB,IAGhBW,EAA2BC,sBAAY,KAC5CZ,GAAqB,GACrBI,EAAoB,OAClB,CAACA,EAAqBJ,IAOnBa,EAAqBD,sBAAY,KACtCR,EAAoB,MACpBF,GAAe,IACb,CAACA,EAAgBE,IAOdxI,EAA8BA,CAACr1C,EAAQO,KAC7B,eAAXP,GACHk+C,EAAoB,CACnBl+C,OAAQA,EACR9U,MAAOyS,KAAKkB,EAAE,iDACdlP,QAASgO,KAAKkB,EAAE,mDAChB0B,WAAYA,IAIC,WAAXP,GACHk+C,EAAoB,CACnBl+C,OAAQA,EACR9U,MAAOyS,KAAKkB,EAAE,6CACdlP,QAASgO,KAAKkB,EAAE,+CAChB0B,WAAYA,IAGdw9C,GAAoB,IAwBfQ,EAAsBr+C,GAE1Bta,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACsB,WAApBtO,EAAShS,QACTtI,IAAA6b,cAACgG,KAAM,CACNyJ,KAAK,QACL1J,QAAQ,YACR3U,MAAM,UACN6U,QAASA,IAjEYxH,KACzB29C,EAAoB39C,GACpBy9C,GAAe,IA+DIa,CAAkBt+C,IAEhCvC,KAAKkB,EAAE,+BAGW,iBAApBqB,EAAShS,QACTtI,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACC5oB,IAAA6b,cAACgG,KAAM,CACNyJ,KAAK,QACL1J,QAAQ,WACR3U,MAAM,UACN6U,QAASA,IAtGoBzG,WAClC,UACOzB,GAAIoD,KAAK,oBAAD9b,OAAqByZ,IAClC,MAAOnC,GACRD,GAAWC,KAkGQqgD,CAA2Bv+C,EAAS3P,KAElDoN,KAAKkB,EAAE,iCACC,IACVjZ,IAAA6b,cAACgG,KAAM,CACNyJ,KAAK,QACL1J,QAAQ,WACR3U,MAAM,YACN6U,QAASA,IAtGgBzG,WAC9B,UACOzB,GAAIqnB,IAAI,oBAAD//B,OAAqByZ,IACjC,MAAOnC,GACRD,GAAWC,KAkGQsgD,CAAuBx+C,EAAS3P,KAE9CoN,KAAKkB,EAAE,gCAIW,cAApBqB,EAAShS,QACU,YAApBgS,EAAShS,QACW,YAApBgS,EAAShS,SACTtI,IAAA6b,cAACgG,KAAM,CACNyJ,KAAK,QACL1J,QAAQ,WACR3U,MAAM,YACN6U,QAASA,KACR2tC,EAA4B,aAAcn1C,EAAS3P,MAGnDoN,KAAKkB,EAAE,mCAGW,YAApBqB,EAAShS,QACTtI,IAAA6b,cAACgG,KAAM,CAACyJ,KAAK,QAAQ1J,QAAQ,WAAWpb,UAAQ,EAACyG,MAAM,WACrD8K,KAAKkB,EAAE,oCA8Cb,OACCjZ,IAAA6b,cAACs5C,GAAa,KACbn1D,IAAA6b,cAACuS,GAAiB,CACjB9oB,MAAO+yD,EAAiB/yD,MACxBsJ,KAAMspD,EACN7pC,QAAS8pC,EACT7pC,UA1HmCjT,UACrC,GAAgC,eAA5Bg9C,EAAiBj+C,OACpB,UACOR,GAAIlT,OAAO,oBAADxF,OAAqBm3D,EAAiB19C,aACrD,MAAOnC,GACRD,GAAWC,GAIb,GAAgC,WAA5B6/C,EAAiBj+C,OACpB,UACOR,GAAIlT,OAAO,aAADxF,OAAcm3D,EAAiB19C,aAC/C3B,IAAMxT,QAAQuS,KAAKkB,EAAE,+BACpB,MAAOT,GACRD,GAAWC,GAIb8/C,EAAoBF,KA0GjBC,EAAiBtuD,SAEnB/J,IAAA6b,cAACk9C,GAAW,CACXnqD,KAAMkpD,EACNzpC,QAASqqC,EACT/9C,YAAai9C,IAAqC,OAAhBI,QAAgB,IAAhBA,OAAgB,EAAhBA,EAAkBrtD,MAErD3K,IAAA6b,cAACm9C,GAAa,CACbpqD,KAAMgpD,EACNvpC,QAASmqC,EACT79C,YAAam9C,IAA+B,OAAhBE,QAAgB,IAAhBA,OAAgB,EAAhBA,EAAkBrtD,MAE/C3K,IAAA6b,cAACw5C,GAAU,KACVr1D,IAAA6b,cAAC61B,GAAK,KAAE35B,KAAKkB,EAAE,sBACfjZ,IAAA6b,cAACy5C,GAAwB,KACxBt1D,IAAA6b,cAACoD,GAAG,CACHC,KAAMpO,EAAKxD,QACX6R,QAAQ,iCACRvY,IAAKA,IACJ5G,IAAA6b,cAACgG,KAAM,CACND,QAAQ,YACR3U,MAAM,UACN6U,QAASy2C,GAERxgD,KAAKkB,EAAE,gCAMbjZ,IAAA6b,cAACivB,KAAK,CAACtpB,UAAWR,EAAQ0oB,UAAW9nB,QAAQ,YAC5C5hB,IAAA6b,cAACm0B,KAAK,CAAC1kB,KAAK,SACXtrB,IAAA6b,cAACo0B,KAAS,KACTjwC,IAAA6b,cAACq0B,KAAQ,KACRlwC,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACfr4B,KAAKkB,EAAE,2BAETjZ,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACfr4B,KAAKkB,EAAE,6BAETjZ,IAAA6b,cAACoD,GAAG,CACHC,KAAMpO,EAAKxD,QACX6R,QAAQ,iCACRvY,IAAKA,IACJ5G,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACfr4B,KAAKkB,EAAE,gCAIXjZ,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACfr4B,KAAKkB,EAAE,iCAETjZ,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACfr4B,KAAKkB,EAAE,8BAETjZ,IAAA6b,cAACoD,GAAG,CACHC,KAAMpO,EAAKxD,QACX6R,QAAQ,0CACRvY,IAAKA,IACJ5G,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACfr4B,KAAKkB,EAAE,kCAMbjZ,IAAA6b,cAACw0B,KAAS,KACRr1B,EACAhb,IAAA6b,cAAC25C,GAAgB,MAEjBx1D,IAAA6b,cAAA7b,IAAA4oB,SAAA,MACW,OAAT/N,QAAS,IAATA,OAAS,EAATA,EAAW9Y,QAAS,GACpB8Y,EAAUuH,IAAI9H,GACbta,IAAA6b,cAACq0B,KAAQ,CAACtyB,IAAKtD,EAAS3P,IACvB3K,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAAU91B,EAAS3U,MACpC3F,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UA1HE91B,IAE3Bta,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQu0C,iBACF,iBAApBj7C,EAAShS,QACTtI,IAAA6b,cAAC47C,GAAa,CACbnyD,MAAOyS,KAAKkB,EAAE,2CACd/Q,QAAS6P,KAAKkB,EAAE,8CAEhBjZ,IAAA6b,cAACo9C,KAAqC,CAAChsD,MAAM,eAG1B,YAApBqN,EAAShS,QACTtI,IAAA6b,cAACwP,KAAgB,CAACC,KAAM,GAAI9J,UAAWR,EAAQ8J,iBAE3B,WAApBxQ,EAAShS,QACTtI,IAAA6b,cAAC47C,GAAa,CACbnyD,MAAOyS,KAAKkB,EAAE,qCACd/Q,QAAS6P,KAAKkB,EAAE,wCAEhBjZ,IAAA6b,cAACq9C,KAAQ,OAGU,cAApB5+C,EAAShS,QACTtI,IAAA6b,cAAC47C,GAAa,CAACnyD,MAAOyS,KAAKkB,EAAE,yCAC5BjZ,IAAA6b,cAACs9C,KAAkB,CAACpwC,MAAO,CAAE9b,MAAO8d,KAAM,UAGtB,YAApBzQ,EAAShS,QAA4C,YAApBgS,EAAShS,SAC3CtI,IAAA6b,cAAC47C,GAAa,CACbnyD,MAAOyS,KAAKkB,EAAE,sCACd/Q,QAAS6P,KAAKkB,EAAE,yCAEhBjZ,IAAA6b,cAACu9C,KAAqC,CAACnsD,MAAM,gBA2FtCosD,CAAqB/+C,IAEvBta,IAAA6b,cAACoD,GAAG,CACHC,KAAMpO,EAAKxD,QACX6R,QAAQ,iCACRvY,IAAKA,IACJ5G,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACfuoB,EAAoBr+C,MAIxBta,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACfnyB,aAAOiY,aAAS5b,EAASG,WAAY,mBAEvCza,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACf91B,EAASu7C,WACT71D,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQu0C,iBACvBv1D,IAAA6b,cAACy9C,KAAW,CAACvwC,MAAO,CAAE9b,MAAO8d,KAAM,UAItC/qB,IAAA6b,cAACoD,GAAG,CACHC,KAAMpO,EAAKxD,QACX6R,QAAQ,0CACRvY,IAAKA,IACJ5G,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAChBpwC,IAAA6b,cAAC+G,IAAU,CACV0I,KAAK,QACLxJ,QAASA,IA9PIxH,KAC1B29C,EAAoB39C,GACpBu9C,GAAqB,IA4PO0B,CAAmBj/C,IAElCta,IAAA6b,cAAC29C,KAAI,OAGNx5D,IAAA6b,cAAC+G,IAAU,CACV0I,KAAK,QACLxJ,QAASiO,IACR0/B,EAA4B,SAAUn1C,EAAS3P,MAGhD3K,IAAA6b,cAACozC,KAAa,kB,UC3Z7B,MAAMrvC,GAAYC,YAAYnG,IAAK,CACjCoG,KAAM,CACJM,MAAO,QAETyQ,UAAW,CACTzQ,MAAO,QAETq5C,UAAW,CACTr5C,MAAO,QAETs5C,IAAK,CACH3nC,WAAYrY,EAAMuoB,QAAQ,GAC1BjQ,cAAetY,EAAMuoB,QAAQ,IAE/Byf,QAAS,CACP5vB,aAAcpY,EAAMuoB,QAAQ,GAC5B9Y,YAAazP,EAAMuoB,QAAQ,IAE7B03B,gBAAiB,CACfzwC,UAAW,QACX0B,QAASlR,EAAMuoB,QAAQ,OAgHZ23B,OA5Gf,SAAuB/1C,GACrB,MAAM,cAAEkkB,EAAa,SAAEG,EAAQ,QAAEltB,EAAO,gBAAE6+C,GAAoBh2C,EACxD7C,EAAUpB,MAETtZ,EAAWwzD,GAAgB5+C,mBAAS,CACzC,CAAE6+C,QAAS,gBAAiBC,UAAW,SAAUC,UAAW,GAAIC,QAAS,IACzE,CAAEH,QAAS,iBAAeC,UAAW,UAAWC,UAAW,GAAIC,QAAS,IACxE,CAAEH,QAAS,eAAgBC,UAAW,YAAaC,UAAW,GAAIC,QAAS,IAC3E,CAAEH,QAAS,eAAgBC,UAAW,WAAYC,UAAW,GAAIC,QAAS,IAC1E,CAAEH,QAAS,cAAeC,UAAW,SAAUC,UAAW,GAAIC,QAAS,IACvE,CAAEH,QAAS,YAAUC,UAAW,WAAYC,UAAW,GAAIC,QAAS,IACpE,CAAEH,QAAS,UAAWC,UAAW,SAAUC,UAAW,GAAIC,QAAS,MAcrE,OAXA9+C,oBAAU,KACJqC,mBAAQsqB,IAAkBA,EAAchmC,OAAS,GACnD+3D,EAAa/xB,IAGd,CAACA,IAOF/nC,IAAA6b,cAACisB,KAAM,CACLE,oBAAkB,EAClBxmB,UAAWR,EAAQ6P,UACnBkX,cAAe,CAAEzhC,aACjB4hC,SAAUvsB,IAAA,IAAC,UAAErV,GAAWqV,EAAA,OACtB/X,WAAW,KATfskC,EAUmB5hC,IACZ,OAGJslB,IAAA,IAAC,OAAEuc,GAAQvc,EAAA,OACV5rB,IAAA6b,cAAC4sB,KAAI,CAACjnB,UAAWR,EAAQ6P,WACvB7wB,IAAA6b,cAACi9B,KAAU,CACTnzC,KAAK,YACLw0D,OAASC,GACPp6D,IAAA6b,cAACupB,KAAI,CAACnD,QAAS,EAAGoD,WAAS,GACxB8C,EAAO7hC,UAAU8b,IAAI,CAACkjB,EAAMjjB,IAEvBriB,IAAA6b,cAACs7B,KAAS,KACNn3C,IAAA6b,cAACw+C,KAAS,CACR1xB,GAAIlnB,KACJ3P,MAAM,gBACNnM,KAAI,aAAAzE,OAAemhB,EAAK,aACxB7b,UAAQ,EACRob,QAAQ,WACRmH,MAAO,CAAEvI,YAAa,OAAQJ,MAAO,OACrCF,OAAO,UAETlgB,IAAA6b,cAACw+C,KAAS,CACR10D,KAAI,aAAAzE,OAAemhB,EAAK,gBAEvB02B,IAAA,IAAC,MAAEwb,GAAOxb,EAAA,OACT/4C,IAAA6b,cAACy+C,KAAYh2C,OAAAC,OAAA,CACXzS,MAAM,mBACFyiD,EAAK,CACT3yC,QAAQ,WACR1B,OAAO,QACPq6C,YAAa94C,KACbxD,OAAO,QACP8K,MAAO,CAAEvI,YAAa,OAAQJ,MAAO,YAI3CpgB,IAAA6b,cAACw+C,KAAS,CACR10D,KAAI,aAAAzE,OAAemhB,EAAK,cAEvBm4C,IAAA,IAAC,MAAEjG,GAAOiG,EAAA,OACTx6D,IAAA6b,cAACy+C,KAAYh2C,OAAAC,OAAA,CACXzS,MAAM,iBACFyiD,EAAK,CACT3yC,QAAQ,WACR1B,OAAO,QACPq6C,YAAa94C,KACbxD,OAAO,QACP8K,MAAO,CAAEvI,YAAa,OAAQJ,MAAO,iBAY3DpgB,IAAA6b,cAAA,OAAKkN,MAAO,CAAEG,UAAW,SAAUvI,UAAW,MAAQa,UAAWR,EAAQ24C,iBACvE35D,IAAA6b,cAACsP,GAAiB,CAChBnQ,QAASA,EACTpQ,KAAK,SACLqC,MAAM,UACN2U,QAAQ,aAEQ,OAAfi4C,QAAe,IAAfA,IAAmB,eC9CnBY,OAlFMA,KAsEV,CACH9zD,KArES0U,UACT,MAAQxC,KAAMwK,SAAuBzJ,GAAI2C,QAAQ,CAC7C4G,IAAK,aACLC,OAAQ,OACRvK,SAEJ,OAAOwK,GAgEPrQ,OA5BWqI,UACX,MAAQxC,KAAMwK,SAAuBzJ,GAAI2C,QAAQ,CAC7C4G,IAAI,cAADjiB,OAAgB2X,EAAKlO,IACxByY,OAAQ,MACRvK,SAEJ,OAAOwK,GAuBPE,OApBWlI,UACX,MAAM,KAAExC,SAAee,GAAI2C,QAAQ,CAC/B4G,IAAI,cAADjiB,OAAgByJ,GACnByY,OAAQ,WAEZ,OAAOvK,GAgBPiI,KAvDSzF,UACT,MAAM,KAAExC,SAAee,GAAI2C,QAAQ,CAC/B4G,IAAI,kBACJC,OAAQ,QAEZ,OAAOvK,GAmDP8E,KAhDStC,UACT,MAAM,KAAExC,SAAee,GAAI2C,QAAQ,CAC/B4G,IAAI,cAADjiB,OAAgByJ,GACnByY,OAAQ,QAEZ,OAAOvK,GA4CP6hD,QAzCYr/C,UACZ,MAAM,KAAExC,SAAee,GAAI2C,QAAQ,CAC/B4G,IAAI,cAADjiB,OAAgByJ,GACnByY,OAAQ,QAEZ,OAAOvK,GAqCPqzC,QAlEY7wC,UACZ,MAAM,KAAExC,SAAee,GAAI2C,QAAQ,CAC/B4G,IAAI,aACJC,OAAQ,QAEZ,OAAOvK,GA8DP8hD,gBAjBoBt/C,UACpB,MAAQxC,KAAMwK,SAAuBzJ,GAAI2C,QAAQ,CAC7C4G,IAAI,cAADjiB,OAAgB2X,EAAKlO,GAAE,cAC1ByY,OAAQ,MACRvK,SAEJ,OAAOwK,KC1Df,MAAMzD,GAAYC,YAAWnG,IAAK,CACjCosB,MAAO,CACN/lB,QAAS,OACT0Q,SAAU,QAEXsV,KAAM,CACL7lB,OAAQ,MA0EK06C,OAtEWj/C,IAAgD,IAA/C,iBAAEsqB,EAAgB,UAAErjC,EAAS,SAAE8e,GAAU/F,EACnE,MAAMqF,EAAUpB,MACT3P,EAAQk2B,GAAajrB,mBAAS,IAErCE,oBAAU,KACT,WACC,IACC,MAAM,KAAEvC,SAAee,GAAI0B,IAAI,SAAU,CACxCla,OAAQ,CAAEwB,eAEXujC,EAAUttB,GACT,MAAOL,GACRD,GAAWC,KAPb,IAUE,CAAC5V,IAMJ,OACC5C,IAAA6b,cAAA,OAAKkN,MAAO,CAAEpI,UAAW,IACxB3gB,IAAA6b,cAACwqB,KAAW,CAACxV,WAAS,EAAC3Q,OAAO,QAAQ0B,QAAQ,YAC7C5hB,IAAA6b,cAACyqB,KAAU,KAAEvuB,KAAKkB,EAAE,2BACpBjZ,IAAA6b,cAAC2qB,KAAM,CACNN,UAAQ,EACRO,WAAY,GACZ1qB,MAAOkqB,EACPvkB,SAZiBqO,IACpBrO,EAASqO,EAAEpO,OAAO5F,QAYf2qB,UAAW,CACVjX,aAAc,CACbC,SAAU,SACVC,WAAY,QAEbC,gBAAiB,CAChBF,SAAU,MACVC,WAAY,QAEbH,mBAAoB,MAErBmX,YAAa1G,GACZjgC,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQ8kB,QACd,OAAR7F,QAAQ,IAARA,OAAQ,EAARA,EAAUl+B,QAAS,GACnBk+B,EAAS7d,IAAIzX,IACZ,MAAM6B,EAAQyD,EAAO0N,KAAKyd,GAAKA,EAAEzwB,KAAOA,GACxC,OAAO6B,EACNxM,IAAA6b,cAACirB,KAAI,CACJlpB,IAAKjT,EACLoe,MAAO,CAAEnI,gBAAiBpU,EAAMS,OAChC2U,QAAQ,WACR9P,MAAOtF,EAAM7G,KACb6b,UAAWR,EAAQ+kB,OAEjB,SAKP91B,EAAOmS,IAAI5V,GACXxM,IAAA6b,cAACiU,IAAQ,CAAClS,IAAKpR,EAAM7B,GAAIoR,MAAOvP,EAAM7B,IACpC6B,EAAM7G,WCtDd,MAAMia,GAAYC,YAAYnG,IAAK,CACjCoG,KAAM,CACJC,QAAS,OACT0Q,SAAU,QAEZsW,cAAe,CACbhnB,QAAS,OACT,yBAA0B,CACxBS,YAAa9G,EAAMuoB,QAAQ,KAI/B+E,WAAY,CACVhe,SAAU,YAGZ8B,eAAgB,CACd7d,MAAO8d,KAAM,KACb/B,SAAU,WACVgC,IAAK,MACLC,KAAM,MACNtK,WAAY,GACZuK,YAAa,IAEf+b,YAAa,CACX/mB,OAAQxG,EAAMuoB,QAAQ,GACtB3R,SAAU,QAIR4W,GAAaC,OAAaC,MAAM,CACpCzhC,KAAMwhC,OACHxB,IAAI,EAAG,cACPC,IAAI,GAAI,aACRyB,SAAS,YACZxhC,SAAUshC,OAAaxB,IAAI,EAAG,cAAcC,IAAI,GAAI,aACpDhgC,MAAOuhC,OAAavhC,MAAM,iBAAiByhC,SAAS,cAsMvCwzB,OAnMIl/C,IAA2C,IAA1C,KAAE/M,EAAI,QAAEyf,EAAO,OAAEvrB,EAAM,UAAEF,GAAW+Y,EACtD,MAAMqF,EAAUpB,KAEV2nB,EAAe,CACnB5hC,KAAM,GACNC,MAAO,GACPC,SAAU,GACVyH,QAAS,SAGHwD,KAAM02B,GAAiBrsB,qBAAWyD,KAEnC9N,EAAMuL,GAAWnB,mBAASqsB,IAC1BtB,EAAkBwB,GAAuBvsB,mBAAS,IAEzDE,oBAAU,KACUC,WAChB,GAAKvY,GACD8L,EACF,IAAK,IAAD+4B,EACF,MAAM,KAAE9uB,SAAee,GAAI0B,IAAI,UAADpa,OAAW4B,IACzCuZ,EAASif,IACA,IAAKA,KAAcziB,KAE5B,MAAM+uB,EAA0B,QAAdD,EAAG9uB,EAAK5I,cAAM,IAAA03B,OAAA,EAAXA,EAAavlB,IAAK5V,GAAUA,EAAM7B,IACvD88B,EAAoBG,GACpB,MAAOpvB,GACPD,GAAWC,KAKjBqvB,IACC,CAAC/kC,EAAQ8L,IAEZ,MAAMugB,EAAcA,KAClBd,IACAhS,EAAQkrB,IAkBV,OACEvnC,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQlB,MACtB9f,IAAA6b,cAAC0S,KAAM,CACL3f,KAAMA,EACNyf,QAASc,EACTuC,SAAS,KACTb,WAAS,EACTsL,OAAO,SAEPn8B,IAAA6b,cAAC4S,KAAW,CAAC9jB,GAAG,qBACP,GAAAzJ,OAAN4B,EACMiV,KAAKkB,EAAE,wBACPlB,KAAKkB,EAAE,yBAEhBjZ,IAAA6b,cAACisB,KAAM,CACLC,cAAej3B,EACfk3B,oBAAoB,EACpBC,iBAAkBf,GAClBgB,SAAUA,CAACC,EAAQ1/B,KACjB7E,WAAW,KAlCEyX,WACrB,MAAMkC,EAAW,IAAK4qB,EAAQvlC,YAAW8+B,SAAUuE,GACnD,IACMnjC,QACI8W,GAAIqnB,IAAI,UAAD//B,OAAW4B,GAAUya,SAE5B3D,GAAIoD,KAAK,SAAUO,GAE3BvE,IAAMxT,QAAQuS,KAAKkB,EAAE,sBACrB,MAAOT,GACPD,GAAWC,GAEb2W,KAuBUiZ,CAAeD,GACf1/B,EAAQ4/B,eAAc,IACrB,OAGJzc,IAAA,IAAC,QAAE0c,EAAO,OAAEC,EAAM,aAAEC,GAAc5c,EAAA,OACjC5rB,IAAA6b,cAAC4sB,KAAI,KACHzoC,IAAA6b,cAAC6S,KAAa,CAACC,UAAQ,GACrB3uB,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQ+lB,eACtB/mC,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,uBACd2vB,WAAS,EACTjjC,KAAK,OACLmT,MAAOwvB,EAAQ3iC,MAAQkvB,QAAQ0T,EAAO5iC,MACtCkjC,WAAYP,EAAQ3iC,MAAQ4iC,EAAO5iC,KACnCic,QAAQ,WACR1B,OAAO,QACP2Q,WAAS,IAEX7wB,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,2BACdrO,KAAK,WACLjF,KAAK,WACLmT,MAAOwvB,EAAQziC,UAAYgvB,QAAQ0T,EAAO1iC,UAC1CgjC,WAAYP,EAAQziC,UAAY0iC,EAAO1iC,SACvC+b,QAAQ,WACR1B,OAAO,QACP2Q,WAAS,KAGb7wB,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQ+lB,eACtB/mC,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,wBACdtT,KAAK,QACLmT,MAAOwvB,EAAQ1iC,OAASivB,QAAQ0T,EAAO3iC,OACvCijC,WAAYP,EAAQ1iC,OAAS2iC,EAAO3iC,MACpCgc,QAAQ,WACR1B,OAAO,QACP2Q,WAAS,IAEX7wB,IAAA6b,cAACwqB,KAAW,CACVzkB,QAAQ,WACRJ,UAAWR,EAAQimB,YACnB/mB,OAAO,SAEPlgB,IAAA6b,cAACoD,GAAG,CACFC,KAAMsoB,EAAal6B,QACnB6R,QAAQ,yBACRvY,IAAKA,IACH5G,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACE5oB,IAAA6b,cAACyqB,KAAU,CAAC37B,GAAG,iCACZoN,KAAKkB,EAAE,2BAGVjZ,IAAA6b,cAAC6sB,KAAK,CACJC,GAAInC,KACJ10B,MAAOiG,KAAKkB,EAAE,0BACdtT,KAAK,UACLmjC,QAAQ,0BACRn+B,GAAG,oBACH08B,UAAQ,GAERrnC,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAM,SAAQ,SACxB/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAM,QAAO,cAOnC/b,IAAA6b,cAACoD,GAAG,CACFC,KAAMsoB,EAAal6B,QACnB6R,QAAQ,wBACRvY,IAAKA,IACH5G,IAAA6b,cAAC++C,GAAiB,CAChBh4D,UAAWA,EACXqjC,iBAAkBA,EAClBvkB,SAAWymB,GAAWV,EAAoBU,QAKlDnoC,IAAA6b,cAAC+S,KAAa,KACZ5uB,IAAA6b,cAACgG,KAAM,CACLC,QAASqN,EACTliB,MAAM,YACNzG,SAAUgiC,EACV5mB,QAAQ,YAEP7J,KAAKkB,EAAE,6BAEVjZ,IAAA6b,cAACgG,KAAM,CACLjX,KAAK,SACLqC,MAAM,UACNzG,SAAUgiC,EACV5mB,QAAQ,YACRJ,UAAWR,EAAQgmB,YAEZ,GAAA9lC,OAAN4B,EACMiV,KAAKkB,EAAE,4BACPlB,KAAKkB,EAAE,4BACbuvB,GACCxoC,IAAA6b,cAACwP,KAAgB,CACfC,KAAM,GACN9J,UAAWR,EAAQ8J,yBCxNzC,MAAMlL,GAAYC,YAAYnG,IAAK,CACjCoG,KAAM,CACJM,MAAO,QAETspB,UAAW,CACTtpB,MAAO,OACPiS,KAAM,EACNzH,QAASlR,EAAMuoB,QAAQ,IAEzBpR,UAAW,CACTzQ,MAAO,QAET06C,eAAgB,CACd16C,MAAO,OACPosB,UAAW,YACR9yB,EAAM4X,iBAEXmoC,UAAW,CACTr5C,MAAO,QAET26C,UAAW,CACT7xC,UAAW,SAEbwwC,IAAK,CACH3nC,WAAYrY,EAAMuoB,QAAQ,GAC1BjQ,cAAetY,EAAMuoB,QAAQ,IAE/Byf,QAAS,CACP5vB,aAAcpY,EAAMuoB,QAAQ,GAC5B9Y,YAAazP,EAAMuoB,QAAQ,IAE7B03B,gBAAiB,CACfzwC,UAAW,QACX0B,QAASlR,EAAMuoB,QAAQ,OAIpB,SAAS+4B,GAAYn3C,GAC1B,MAAM,SAAEqkB,EAAQ,SAAE+yB,EAAQ,SAAE3Y,EAAQ,aAAE+H,EAAY,QAAErvC,GAAY6I,EAC1D7C,EAAUpB,MACT1Z,EAAOytD,GAAYz4C,mBAAS,KAC5BggD,EAAWC,GAAgBjgD,oBAAS,IACpCkgD,EAAWC,GAAgBngD,mBAAS,KAEpC0vB,EAAQ0wB,GAAapgD,mBAAS,CACnCvV,KAAM,GACNC,MAAO,GACPkuD,MAAO,GACPC,OAAQ,GACRzrD,QAAQ,EACR4rD,kBAAkB,EAClBn2C,QAAS,GACTk2C,WAAY,MACT5J,KAGGvpC,KAAM8yC,GAAc3wC,KAE5B7H,oBAAU,MACRC,iBACE,MAAMyF,QAAa8yC,IACnBD,EAAS7yC,GAEXyG,IAEC,IAEHnM,oBAAU,KACRkgD,EAAWjyC,IACLxL,IAAOwsC,GAAcjf,YACvBif,EAAatsC,QAAUF,IAAOwsC,EAAatsC,SAASE,OAClD,eAGG,IACFoL,KACAghC,MAGN,CAACA,IAmEJ,OACErqD,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACE5oB,IAAA6b,cAACg/C,GAAU,CACT/3D,OAAQs4D,EAAUzwD,GAClB/H,UAAWynD,EAAa1/C,GACxBiE,KAAMssD,EACN7sC,QA/CwBktC,KAC5BF,EAAa,IACbF,GAAa,MA+CXn7D,IAAA6b,cAACisB,KAAM,CACLE,oBAAkB,EAClBxmB,UAAWR,EAAQ6P,UACnBkX,cAAe6C,EACf1C,SAAUA,CAACC,EAAMxsB,KAAA,IAAE,UAAE6/C,GAAW7/C,EAAA,OAC9B/X,WAAW,KA9EEyX,WACE,KAAjBxC,EAAKkF,UAAqD,IAAnCF,IAAOhF,EAAKkF,SAASqtB,YAC9CvyB,EAAKkF,QAAU,MAEjBmqB,EAASrvB,GACTyiD,EAAU,IAAKjR,EAActsC,QAAS,MA0E9B09C,CAAatzB,GACbqzB,KACC,OAGJ,CAACrzB,EAAQuzB,IACR17D,IAAA6b,cAAC4sB,KAAI,CAACjnB,UAAWR,EAAQ6P,WACvB7wB,IAAA6b,cAACupB,KAAI,CAACnD,QAAS,EAAGtO,eAAe,WAAW0R,WAAS,GACnDrlC,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI4R,GAAI,EAAGC,GAAI,EAAG/R,MAAI,GAC9BtlC,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJ3P,MAAM,OACNnM,KAAK,OACLic,QAAQ,WACRJ,UAAWR,EAAQ6P,UACnB3Q,OAAO,WAGXlgB,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI4R,GAAI,EAAGC,GAAI,EAAG/R,MAAI,GAC9BtlC,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJ3P,MAAM,SACNnM,KAAK,QACLic,QAAQ,WACRJ,UAAWR,EAAQ6P,UACnB3Q,OAAO,QACPmnB,UAAQ,KAGZrnC,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI4R,GAAI,EAAGC,GAAI,EAAG/R,MAAI,GAC9BtlC,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJ3P,MAAM,WACNnM,KAAK,QACLic,QAAQ,WACRJ,UAAWR,EAAQ6P,UACnB3Q,OAAO,WAGXlgB,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI4R,GAAI,EAAGC,GAAI,EAAG/R,MAAI,GAC9BtlC,IAAA6b,cAACwqB,KAAW,CAACnmB,OAAO,QAAQ0B,QAAQ,WAAWiP,WAAS,GACtD7wB,IAAA6b,cAACyqB,KAAU,CAACwhB,QAAQ,kBAAiB,SACrC9nD,IAAA6b,cAAC6sB,KAAK,CACJC,GAAInC,KACJ77B,GAAG,iBACHmH,MAAM,QACNg3B,QAAQ,uBACRnjC,KAAK,SACLua,OAAO,QACPmnB,UAAQ,GAEPnhC,EAAMkc,IAAI,CAACpb,EAAM4W,IAChB5d,IAAA6b,cAACiU,IAAQ,CAAClS,IAAKA,EAAK7B,MAAO/U,EAAK2D,IAC7B3D,EAAKrB,UAMhB3F,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI4R,GAAI,EAAGC,GAAI,EAAG/R,MAAI,GAC9BtlC,IAAA6b,cAACwqB,KAAW,CAACnmB,OAAO,QAAQ0B,QAAQ,WAAWiP,WAAS,GACtD7wB,IAAA6b,cAACyqB,KAAU,CAACwhB,QAAQ,oBAAmB,UACvC9nD,IAAA6b,cAAC6sB,KAAK,CACJC,GAAInC,KACJ77B,GAAG,mBACHmH,MAAM,SACNg3B,QAAQ,yBACRnjC,KAAK,SACLua,OAAO,SAEPlgB,IAAA6b,cAACiU,IAAQ,CAAC/T,OAAO,GAAM,OACvB/b,IAAA6b,cAACiU,IAAQ,CAAC/T,OAAO,GAAO,aAI9B/b,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI4R,GAAI,EAAGC,GAAI,EAAG/R,MAAI,GAC9BtlC,IAAA6b,cAACwqB,KAAW,CAACnmB,OAAO,QAAQ0B,QAAQ,WAAWiP,WAAS,GACtD7wB,IAAA6b,cAACyqB,KAAU,CAACwhB,QAAQ,oBAAmB,aACvC9nD,IAAA6b,cAAC6sB,KAAK,CACJC,GAAInC,KACJ77B,GAAG,sBACHmH,MAAM,YACNg3B,QAAQ,4BACRnjC,KAAK,mBACLua,OAAO,SAEPlgB,IAAA6b,cAACiU,IAAQ,CAAC/T,OAAO,GAAM,eACvB/b,IAAA6b,cAACiU,IAAQ,CAAC/T,OAAO,GAAO,oBAI9B/b,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI4R,GAAI,EAAGC,GAAI,EAAG/R,MAAI,GAC9BtlC,IAAA6b,cAACwqB,KAAW,CAACzkB,QAAQ,WAAWiP,WAAS,GACvC7wB,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJ3P,MAAM,qBACNlH,KAAK,OACLjF,KAAK,UACL0yC,gBAAiB,CACf9R,QAAQ,GAEV3kB,QAAQ,WACRiP,WAAS,EACT3Q,OAAO,YAIblgB,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI4R,GAAI,EAAGC,GAAI,EAAG/R,MAAI,GAC9BtlC,IAAA6b,cAACwqB,KAAW,CAACnmB,OAAO,QAAQ0B,QAAQ,WAAWiP,WAAS,GACtD7wB,IAAA6b,cAACyqB,KAAU,CAACwhB,QAAQ,yBAAwB,kBAG5C9nD,IAAA6b,cAAC6sB,KAAK,CACJC,GAAInC,KACJ10B,MAAM,iBACNg3B,QAAQ,8BACRn+B,GAAG,aACHhF,KAAK,aACLua,OAAO,SAEPlgB,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAM,UAAS,aAQ/B/b,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAIF,MAAI,GAChBtlC,IAAA6b,cAACupB,KAAI,CAACzR,eAAe,WAAWsO,QAAS,EAAGoD,WAAS,GACnDrlC,IAAA6b,cAACupB,KAAI,CAACI,GAAI,EAAG6R,GAAI,EAAG/R,MAAI,GACtBtlC,IAAA6b,cAACsP,GAAiB,CAChB3J,UAAWR,EAAQ6P,UACnB9H,MAAO,CAAEpI,UAAW,GACpB3F,QAASA,EACT8G,QAASA,IAAMwgC,IACf1gC,QAAQ,aACT,gBAIYnI,IAAdmxB,EAAOjgC,GACN3K,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACE5oB,IAAA6b,cAACupB,KAAI,CAACI,GAAI,EAAG6R,GAAI,EAAG/R,MAAI,GACtBtlC,IAAA6b,cAACsP,GAAiB,CAChBpC,MAAO,CAAEpI,UAAW,GACpBa,UAAWR,EAAQ6P,UACnB7V,QAASA,EACT8G,QAASA,IAAMm5C,EAASrwB,GACxBhpB,QAAQ,YACR3U,MAAM,aACP,YAIHjN,IAAA6b,cAACupB,KAAI,CAACI,GAAI,EAAG6R,GAAI,EAAG/R,MAAI,GACtBtlC,IAAA6b,cAACsP,GAAiB,CAChBpC,MAAO,CAAEpI,UAAW,GACpBa,UAAWR,EAAQ6P,UACnB7V,QAASA,EACT8G,QAASA,IAlNR65C,MACvB,MAAM9iD,EAAO,IAAK+xB,GAClB,GAAqB,KAAjB/xB,EAAKkF,SAAmC,OAAjBlF,EAAKkF,QAC9B,OAAQlF,EAAKo7C,YACX,IAAK,SACHp7C,EAAKkF,QAAUF,IAAOhF,EAAKkF,SACxBpW,IAAI,EAAG,SACPsW,OAAO,cACV,MACF,IAAK,YACHpF,EAAKkF,QAAUF,IAAOhF,EAAKkF,SACxBpW,IAAI,EAAG,SACPsW,OAAO,cACV,MACF,IAAK,aACHpF,EAAKkF,QAAUF,IAAOhF,EAAKkF,SACxBpW,IAAI,EAAG,SACPsW,OAAO,cACV,MACF,IAAK,YACHpF,EAAKkF,QAAUF,IAAOhF,EAAKkF,SACxBpW,IAAI,EAAG,SACPsW,OAAO,cACV,MACF,IAAK,QACHpF,EAAKkF,QAAUF,IAAOhF,EAAKkF,SACxBpW,IAAI,GAAI,SACRsW,OAAO,cAMhBq9C,EAAUziD,IAiL2B8iD,GACf/5C,QAAQ,YACR3U,MAAM,WACP,iBAIHjN,IAAA6b,cAACupB,KAAI,CAACI,GAAI,EAAG6R,GAAI,EAAG/R,MAAI,GACtBtlC,IAAA6b,cAACsP,GAAiB,CAChBpC,MAAO,CAAEpI,UAAW,GACpBa,UAAWR,EAAQ6P,UACnB7V,QAASA,EACT8G,QAASA,IAnPJzG,WAC3B,IACE,MAAM,KAAExC,SAAee,GAAI0B,IAAI,cAAe,CAC5Cla,OAAQ,CACNwB,UAAWynD,EAAa1/C,MAGxB8S,mBAAQ5E,IAASA,EAAK9W,QACxBs5D,EAAajN,gBAAKv1C,IAEpBsiD,GAAa,GACb,MAAOprC,GACP/W,IAAMF,MAAMiX,KAuOuB6rC,GACfh6C,QAAQ,YACR3U,MAAM,WACP,gBAKH,KACJjN,IAAA6b,cAACupB,KAAI,CAACI,GAAI,EAAG6R,GAAI,EAAG/R,MAAI,GACtBtlC,IAAA6b,cAACsP,GAAiB,CAChB3J,UAAWR,EAAQ6P,UACnB9H,MAAO,CAAEpI,UAAW,GACpB3F,QAASA,EACTpQ,KAAK,SACLgX,QAAQ,YACR3U,MAAM,WACP,iBAcd,SAAS4uD,GAAqBh4C,GACnC,MAAM,QAAEmE,EAAO,SAAEu/B,GAAa1jC,EACxB7C,EAAUpB,MACV,aAAEsrB,GAAiBD,KAwBnB6wB,EAAYlxB,IAChB,GAAI/sB,IAAO+sB,EAAO7sB,SAASqtB,UAAW,CACpC,MAAMznC,EAAMka,MAENK,EADUL,IAAO+sB,EAAO7sB,SACTG,KAAKva,EAAK,QAC/B,GAAa,IAATua,EACF,MAAO,CAAE0C,gBAAiB,WAE5B,GAAI1C,IAAS,GAAKA,GAAQ,EACxB,MAAO,CAAE0C,gBAAiB,WAE5B,IAAc,IAAV1C,EACF,MAAO,CAAE0C,gBAAiB,WAG9B,MAAO,IAGT,OACE5gB,IAAA6b,cAACivB,KAAK,CAACtpB,UAAWR,EAAQ85C,gBACxB96D,IAAA6b,cAACm0B,KAAK,CACJxuB,UAAWR,EAAQ6P,UACnBvF,KAAK,QACLkZ,aAAW,iBAEXxkC,IAAA6b,cAACo0B,KAAS,KACRjwC,IAAA6b,cAACq0B,KAAQ,KACPlwC,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,SAASrnB,MAAO,CAAE3I,MAAO,OAAQ,KAGlDpgB,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,QAAO,QACxBpwC,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,QAAO,UACxBpwC,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,QAAO,YACxBpwC,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,QAAO,SACxBpwC,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,QAAO,aACxBpwC,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,QAAO,UACxBpwC,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,QAAO,aACxBpwC,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,QAAO,gBAG5BpwC,IAAA6b,cAACw0B,KAAS,KACProB,EAAQ5F,IAAI,CAACs3C,EAAK97C,IACjB5d,IAAA6b,cAACq0B,KAAQ,CAACnnB,MAAO+yC,EAASpC,GAAM97C,IAAKA,GACnC5d,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,SAASrnB,MAAO,CAAE3I,MAAO,OACxCpgB,IAAA6b,cAAC+G,IAAU,CAACd,QAASA,IAAMylC,EAASmS,GAAMl1B,aAAW,UACnDxkC,IAAA6b,cAACiH,KAAQ,QAGb9iB,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,QAAQspB,EAAI/zD,MAAQ,KACrC3F,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,QAAQspB,EAAI9zD,OAAS,KACtC5F,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,QAAQspB,EAAI5F,OAAS,KACtC9zD,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,QArETspB,IACI,OAAfA,EAAI3F,OAAkB2F,EAAI1yD,KAAKrB,KAAO,IAoEVo2D,CAAWrC,IACpC15D,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,QAlEEspB,KAC7B,GACEl8C,eAAIk8C,EAAK,aACTj8C,mBAAQi8C,EAAItpD,WACZspD,EAAItpD,SAASrO,OAAS,EACtB,CACA,MAAM2b,EAAUg8C,EAAItpD,SAASuN,KAAMnD,GAAgB,qBAAVA,EAAEoD,KAC3C,GAAIF,EACF,MAAyB,SAAlBA,EAAQ3B,MAAmB,cAAgB,gBAGtD,MAAO,iBAuD4BigD,CAAsBtC,IAC/C15D,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,QA3EPspB,KACE,IAAfA,EAAIpxD,OAAmB,SAAQ,MA0EH2zD,CAAavC,IACtC15D,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,QAAQlF,EAAawuB,EAAIx3C,YAC1CliB,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,QACdlF,EAAawuB,EAAI37C,SAClB/d,IAAA6b,cAAA,WACA7b,IAAA6b,cAAA,YAAO69C,EAAIzF,kBAUZ,SAASiI,KACtB,MAAMl7C,EAAUpB,MACV,KAAEkB,EAAI,KAAEna,EAAI,OAAEqM,EAAM,OAAEuQ,GAAWk3C,MAEhC0B,EAAmBC,GAAwBlhD,oBAAS,IACpDF,EAASC,GAAcC,oBAAS,IAChC8M,EAASq0C,GAAcnhD,mBAAS,KAChC0vB,EAAQ0wB,GAAapgD,mBAAS,CACnCvV,KAAM,GACNC,MAAO,GACPkuD,MAAO,GACPC,OAAQ,GACRzrD,QAAQ,EACR4rD,kBAAkB,EAClBn2C,QAAS,GACTk2C,WAAY,KAGd74C,oBAAU,KACRkhD,KAEC,IAEH,MAAMA,EAAYjhD,UAChBJ,GAAW,GACX,IACE,MAAMshD,QAAoBz7C,IAC1Bu7C,EAAWE,GACX,MAAOxsC,GACP/W,IAAMF,MAAM,wDAEdmC,GAAW,IAuCPuhD,EAAeA,KACnBlB,EAAWjyC,IAAI,IACVA,EACH1jB,KAAM,GACNC,MAAO,GACPkuD,MAAO,GACPC,OAAQ,GACRzrD,QAAQ,EACR4rD,kBAAkB,EAClBn2C,QAAS,GACTk2C,WAAY,OA6BhB,OACEj0D,IAAA6b,cAACivB,KAAK,CAACtpB,UAAWR,EAAQ0oB,UAAW4N,UAAW,GAC9Ct3C,IAAA6b,cAACupB,KAAI,CAACnD,QAAS,EAAGoD,WAAS,GACzBrlC,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAIF,MAAI,GAChBtlC,IAAA6b,cAACm/C,GAAW,CACV3Q,aAAczf,EACdqwB,SAjDqBwB,KAC7BL,GAAqB,IAiDbl0B,SAlFW7sB,UACnBJ,GAAW,GACX,SACkBxB,IAAZZ,EAAKlO,SACDqI,EAAO6F,SAEPlS,EAAKkS,SAEPyjD,IACNE,IACAxjD,IAAMxT,QAAQ,yCACd,MAAOuqB,GACP/W,IAAMF,MACJ,2JAGJmC,GAAW,IAmEHqnC,SAAUka,EACVxhD,QAASA,KAGbhb,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAIF,MAAI,GAChBtlC,IAAA6b,cAACggD,GAAoB,CAAC7zC,QAASA,EAASu/B,SAtC1B1uC,IACpB,IAAIq7C,GAAmB,EAEvB,MAAMx2C,EAAU7E,EAAKzI,SAASuN,KAC3BnD,GAAMA,EAAEoD,IAAI8+B,QAAQ,qBAAuB,GAE1Ch/B,IACFw2C,EACoB,SAAlBx2C,EAAQ3B,OAAsC,YAAlB2B,EAAQ3B,OAGxCu/C,EAAWjyC,IAAI,IACVA,EACH1e,GAAIkO,EAAKlO,GACThF,KAAMkT,EAAKlT,MAAQ,GACnBmuD,MAAOj7C,EAAKi7C,OAAS,GACrBluD,MAAOiT,EAAKjT,OAAS,GACrBmuD,OAAQl7C,EAAKk7C,QAAU,GACvBzrD,QAAwB,IAAhBuQ,EAAKvQ,OACb4rD,mBACAn2C,QAASlF,EAAKkF,SAAW,GACzBk2C,WAAYp7C,EAAKo7C,YAAc,WAoB/Bj0D,IAAA6b,cAACuS,GAAiB,CAChB9oB,MAAM,0BACNsJ,KAAMutD,EACN9tC,QAASA,IAAM+tC,GAAqB,GACpC9tC,UAAWA,IA5EIjT,WACnBJ,GAAW,GACX,UACQsI,EAAOqnB,EAAOjgC,UACd2xD,IACNE,IACAxjD,IAAMxT,QAAQ,yCACd,MAAOuqB,GACP/W,IAAMF,MAAM,oDAEdmC,GAAW,IAkEUyhD,IAClB,4CCjlBP,MAAM98C,GAAYC,YAAWnG,IAAK,CAC9BoG,KAAM,CACFM,MAAO,QAEXspB,UAAW,CACPtpB,MAAO,OACPiS,KAAM,EACNzH,QAASlR,EAAMuoB,QAAQ,IAE3BpR,UAAW,CACPzQ,MAAO,QAEX06C,eAAgB,CACZ16C,MAAO,OACPosB,UAAW,YACR9yB,EAAM4X,iBAEbmoC,UAAW,CACPr5C,MAAO,QAEX26C,UAAW,CACP7xC,UAAW,SAEfwwC,IAAK,CACD3nC,WAAYrY,EAAMuoB,QAAQ,GAC1BjQ,cAAetY,EAAMuoB,QAAQ,IAEjCyf,QAAS,CACL5vB,aAAcpY,EAAMuoB,QAAQ,GAC5B9Y,YAAazP,EAAMuoB,QAAQ,IAE/B03B,gBAAiB,CACbzwC,UAAW,QACX0B,QAASlR,EAAMuoB,QAAQ,OAIxB,SAAS06B,GAAgB94C,GAC5B,MAAM,SAAEqkB,EAAQ,SAAE+yB,EAAQ,SAAE3Y,EAAQ,aAAE+H,EAAY,QAAErvC,GAAY6I,EAC1D7C,EAAUpB,MAETgrB,EAAQ0wB,GAAapgD,mBAAS,CACjCvV,KAAM,GACNQ,MAAO,EACPC,YAAa,EACb6J,OAAQ,EACR8L,MAAO,EACPiL,cAAc,EACdI,cAAc,EACdC,iBAAiB,EACjBC,gBAAgB,EAChBL,WAAW,EACXC,WAAW,EACXC,iBAAiB,IAGrB/L,oBAAU,KACNkgD,EAAUjR,IACX,CAACA,IAMJ,OACIrqD,IAAA6b,cAACisB,KAAM,CACHE,oBAAkB,EAClBxmB,UAAWR,EAAQ6P,UACnBkX,cAAe6C,EACf1C,SAAUA,CAACC,EAAMxsB,KAAA,IAAE,UAAE6/C,GAAW7/C,EAAA,OAC5B/X,WAAW,KAVFyX,WACjB6sB,EAASrvB,IAUG4iD,CAAatzB,GACbqzB,KACD,OAGLrzB,GACEnoC,IAAA6b,cAAC4sB,KAAI,CAACjnB,UAAWR,EAAQ6P,WACrB7wB,IAAA6b,cAACupB,KAAI,CAACnD,QAAS,EAAGtO,eAAe,aAAa0R,WAAS,GAEnDrlC,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI4R,GAAI,EAAGC,GAAI,EAAG/R,MAAI,GAC5BtlC,IAAA6b,cAAC6sB,KAAK,CACFC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,mBACdtT,KAAK,OACLic,QAAQ,WACRJ,UAAWR,EAAQ6P,UACnB3Q,OAAO,WAKflgB,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI4R,GAAI,EAAGC,GAAI,EAAG/R,MAAI,GAC5BtlC,IAAA6b,cAAC6sB,KAAK,CACFC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,oBACdtT,KAAK,QACLic,QAAQ,WACRJ,UAAWR,EAAQ6P,UACnB3Q,OAAO,QACPtV,KAAK,YAKb5K,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI4R,GAAI,EAAGC,GAAI,EAAG/R,MAAI,GAC5BtlC,IAAA6b,cAAC6sB,KAAK,CACFC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,0BACdtT,KAAK,cACLic,QAAQ,WACRJ,UAAWR,EAAQ6P,UACnB3Q,OAAO,QACPtV,KAAK,YAKb5K,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI4R,GAAI,EAAGC,GAAI,EAAG/R,MAAI,GAC5BtlC,IAAA6b,cAAC6sB,KAAK,CACFC,GAAIlnB,KACJ3P,MAAM,QACNnM,KAAK,SACLic,QAAQ,WACRJ,UAAWR,EAAQ6P,UACnB3Q,OAAO,QACPtV,KAAK,YAKb5K,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI4R,GAAI,EAAGC,GAAI,EAAG/R,MAAI,GAC5BtlC,IAAA6b,cAAC6sB,KAAK,CACFC,GAAIlnB,KACJ3P,MAAM,QACNnM,KAAK,QACLic,QAAQ,WACRJ,UAAWR,EAAQ6P,UACnB3Q,OAAO,QACPtV,KAAK,UAKb5K,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI4R,GAAI,EAAGC,GAAI,EAAG/R,MAAI,GAC5BtlC,IAAA6b,cAACwqB,KAAW,CAACnmB,OAAO,QAAQ0B,QAAQ,WAAWiP,WAAS,GACpD7wB,IAAA6b,cAACyqB,KAAU,CAACwhB,QAAQ,0BAA0B/vC,KAAKkB,EAAE,yBACrDjZ,IAAA6b,cAAC6sB,KAAK,CACFC,GAAInC,KACJ77B,GAAG,yBACHmH,MAAOiG,KAAKkB,EAAE,wBACd6vB,QAAQ,+BACRnjC,KAAK,eACLua,OAAO,SAEPlgB,IAAA6b,cAACiU,IAAQ,CAAC/T,OAAO,GAAOhE,KAAKkB,EAAE,uBAC/BjZ,IAAA6b,cAACiU,IAAQ,CAAC/T,OAAO,GAAQhE,KAAKkB,EAAE,2BAM5CjZ,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI4R,GAAI,EAAGC,GAAI,EAAG/R,MAAI,GAC5BtlC,IAAA6b,cAACwqB,KAAW,CAACnmB,OAAO,QAAQ0B,QAAQ,WAAWiP,WAAS,GACpD7wB,IAAA6b,cAACyqB,KAAU,CAACwhB,QAAQ,0BAA0B/vC,KAAKkB,EAAE,yBACrDjZ,IAAA6b,cAAC6sB,KAAK,CACFC,GAAInC,KACJ77B,GAAG,yBACHmH,MAAOiG,KAAKkB,EAAE,wBACd6vB,QAAQ,+BACRnjC,KAAK,eACLua,OAAO,SAEPlgB,IAAA6b,cAACiU,IAAQ,CAAC/T,OAAO,GAAOhE,KAAKkB,EAAE,uBAC/BjZ,IAAA6b,cAACiU,IAAQ,CAAC/T,OAAO,GAAQhE,KAAKkB,EAAE,2BAM5CjZ,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI4R,GAAI,EAAGC,GAAI,EAAG/R,MAAI,GAC5BtlC,IAAA6b,cAACwqB,KAAW,CAACnmB,OAAO,QAAQ0B,QAAQ,WAAWiP,WAAS,GACpD7wB,IAAA6b,cAACyqB,KAAU,CAACwhB,QAAQ,6BAA4B,gBAChD9nD,IAAA6b,cAAC6sB,KAAK,CACFC,GAAInC,KACJ77B,GAAG,4BACHmH,MAAM,eACNg3B,QAAQ,kCACRnjC,KAAK,kBACLua,OAAO,SAEPlgB,IAAA6b,cAACiU,IAAQ,CAAC/T,OAAO,GAAOhE,KAAKkB,EAAE,uBAC/BjZ,IAAA6b,cAACiU,IAAQ,CAAC/T,OAAO,GAAQhE,KAAKkB,EAAE,2BAM5CjZ,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI4R,GAAI,EAAGC,GAAI,EAAG/R,MAAI,GAC5BtlC,IAAA6b,cAACwqB,KAAW,CAACnmB,OAAO,QAAQ0B,QAAQ,WAAWiP,WAAS,GACpD7wB,IAAA6b,cAACyqB,KAAU,CAACwhB,QAAQ,4BAA2B,eAC/C9nD,IAAA6b,cAAC6sB,KAAK,CACFC,GAAInC,KACJ77B,GAAG,2BACHmH,MAAM,cACNg3B,QAAQ,iCACRnjC,KAAK,iBACLua,OAAO,SAEPlgB,IAAA6b,cAACiU,IAAQ,CAAC/T,OAAO,GAAOhE,KAAKkB,EAAE,uBAC/BjZ,IAAA6b,cAACiU,IAAQ,CAAC/T,OAAO,GAAQhE,KAAKkB,EAAE,2BAM5CjZ,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI4R,GAAI,EAAGC,GAAI,EAAG/R,MAAI,GAC5BtlC,IAAA6b,cAACwqB,KAAW,CAACnmB,OAAO,QAAQ0B,QAAQ,WAAWiP,WAAS,GACpD7wB,IAAA6b,cAACyqB,KAAU,CAACwhB,QAAQ,uBAAsB,UAC1C9nD,IAAA6b,cAAC6sB,KAAK,CACFC,GAAInC,KACJ77B,GAAG,sBACHmH,MAAM,SACNg3B,QAAQ,4BACRnjC,KAAK,YACLua,OAAO,SAEPlgB,IAAA6b,cAACiU,IAAQ,CAAC/T,OAAO,GAAOhE,KAAKkB,EAAE,uBAC/BjZ,IAAA6b,cAACiU,IAAQ,CAAC/T,OAAO,GAAQhE,KAAKkB,EAAE,2BAM5CjZ,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI4R,GAAI,EAAGC,GAAI,EAAG/R,MAAI,GAC5BtlC,IAAA6b,cAACwqB,KAAW,CAACnmB,OAAO,QAAQ0B,QAAQ,WAAWiP,WAAS,GACpD7wB,IAAA6b,cAACyqB,KAAU,CAACwhB,QAAQ,uBAAsB,WAC1C9nD,IAAA6b,cAAC6sB,KAAK,CACFC,GAAInC,KACJ77B,GAAG,sBACHmH,MAAM,UACNg3B,QAAQ,4BACRnjC,KAAK,YACLua,OAAO,SAEPlgB,IAAA6b,cAACiU,IAAQ,CAAC/T,OAAO,GAAOhE,KAAKkB,EAAE,uBAC/BjZ,IAAA6b,cAACiU,IAAQ,CAAC/T,OAAO,GAAQhE,KAAKkB,EAAE,2BAM5CjZ,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI4R,GAAI,EAAGC,GAAI,EAAG/R,MAAI,GAC5BtlC,IAAA6b,cAACwqB,KAAW,CAACnmB,OAAO,QAAQ0B,QAAQ,WAAWiP,WAAS,GACpD7wB,IAAA6b,cAACyqB,KAAU,CAACwhB,QAAQ,6BAA4B,qBAChD9nD,IAAA6b,cAAC6sB,KAAK,CACFC,GAAInC,KACJ77B,GAAG,4BACHmH,MAAM,oBACNg3B,QAAQ,kCACRnjC,KAAK,kBACLua,OAAO,SAEPlgB,IAAA6b,cAACiU,IAAQ,CAAC/T,OAAO,GAAOhE,KAAKkB,EAAE,uBAC/BjZ,IAAA6b,cAACiU,IAAQ,CAAC/T,OAAO,GAAQhE,KAAKkB,EAAE,4BAKhDjZ,IAAA6b,cAACupB,KAAI,CAACnD,QAAS,EAAGtO,eAAe,WAAW0R,WAAS,GAEjDrlC,IAAA6b,cAACupB,KAAI,CAACgS,GAAI,EAAGC,GAAI,EAAG/R,MAAI,GACpBtlC,IAAA6b,cAACsP,GAAiB,CAAC3J,UAAWR,EAAQ6P,UAAW7V,QAASA,EAAS8G,QAASA,IAAMwgC,IAAY1gC,QAAQ,aACjG7J,KAAKkB,EAAE,2BAGDQ,IAAdmxB,EAAOjgC,GACJ3K,IAAA6b,cAACupB,KAAI,CAACgS,GAAI,EAAGC,GAAI,EAAG/R,MAAI,GACpBtlC,IAAA6b,cAACsP,GAAiB,CAAC3J,UAAWR,EAAQ6P,UAAW7V,QAASA,EAAS8G,QAASA,IAAMm5C,EAASrwB,GAAShpB,QAAQ,YAAY3U,MAAM,aACzH8K,KAAKkB,EAAE,uBAGhB,KACJjZ,IAAA6b,cAACupB,KAAI,CAACgS,GAAI,EAAGC,GAAI,EAAG/R,MAAI,GACpBtlC,IAAA6b,cAACsP,GAAiB,CAAC3J,UAAWR,EAAQ6P,UAAW7V,QAASA,EAASpQ,KAAK,SAASgX,QAAQ,YAAY3U,MAAM,WACtG8K,KAAKkB,EAAE,wBAUjC,SAAS2jD,GAAiB/4C,GAC7B,MAAM,QAAEmE,EAAO,SAAEu/B,GAAa1jC,EACxB7C,EAAUpB,KA8BhB,OACI5f,IAAA6b,cAACivB,KAAK,CAACtpB,UAAWR,EAAQ85C,gBACtB96D,IAAA6b,cAACm0B,KAAK,CACFxuB,UAAWR,EAAQ6P,UAEnBjG,QAAQ,OACR4Z,aAAW,iBAEXxkC,IAAA6b,cAACo0B,KAAS,KACNjwC,IAAA6b,cAACq0B,KAAQ,KACLlwC,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,SAASrnB,MAAO,CAAE3I,MAAO,OAAQ,KAClDpgB,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,QAAQr4B,KAAKkB,EAAE,oBAChCjZ,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAAUr4B,KAAKkB,EAAE,qBAClCjZ,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAAUr4B,KAAKkB,EAAE,2BAClCjZ,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAAS,SAC1BpwC,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAAS,SAC1BpwC,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAAUr4B,KAAKkB,EAAE,yBAClCjZ,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAAUr4B,KAAKkB,EAAE,yBAClCjZ,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAAS,gBAC1BpwC,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAAS,eAC1BpwC,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAAS,UAC1BpwC,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAAS,WAC1BpwC,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAAS,uBAGlCpwC,IAAA6b,cAACw0B,KAAS,KACLroB,EAAQ5F,IAAKs3C,GACV15D,IAAA6b,cAACq0B,KAAQ,CAACtyB,IAAK87C,EAAI/uD,IACf3K,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,SAASrnB,MAAO,CAAE3I,MAAO,OACtCpgB,IAAA6b,cAAC+G,IAAU,CAACd,QAASA,IAAMylC,EAASmS,GAAMl1B,aAAW,UACjDxkC,IAAA6b,cAACiH,KAAQ,QAGjB9iB,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,QAAQspB,EAAI/zD,MAAQ,KACrC3F,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAAUspB,EAAIvzD,OAAS,KACxCnG,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAAUspB,EAAItzD,aAAe,KAC9CpG,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAAUspB,EAAIzpD,QAAU,KACzCjQ,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAAUr4B,KAAKkB,EAAE,oBAAoB,IAAEygD,EAAI39C,MAAQ29C,EAAI39C,MAAM2G,eAAe,QAAS,CAAEm6C,sBAAuB,IAAO,SACtI78D,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAlEhBspB,KACO,IAArBA,EAAI1yC,aAAsB,GAAA9lB,OAAM6W,KAAKkB,EAAE,kBAAgB,GAAA/X,OAAQ6W,KAAKkB,EAAE,mBAiE9B6jD,CAAgBpD,IAC3C15D,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UA/DhBspB,KACO,IAArBA,EAAItyC,aAAsB,GAAAlmB,OAAM6W,KAAKkB,EAAE,kBAAgB,GAAA/X,OAAQ6W,KAAKkB,EAAE,mBA8D9B8jD,CAAgBrD,IAC3C15D,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UA5DbspB,KACO,IAAxBA,EAAIryC,gBAAyB,GAAAnmB,OAAM6W,KAAKkB,EAAE,kBAAgB,GAAA/X,OAAQ6W,KAAKkB,EAAE,mBA2DjC+jD,CAAmBtD,IAC9C15D,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAzDdspB,KACO,IAAvBA,EAAIpyC,eAAwB,GAAApmB,OAAM6W,KAAKkB,EAAE,kBAAgB,GAAA/X,OAAQ6W,KAAKkB,EAAE,mBAwDhCgkD,CAAkBvD,IAC7C15D,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAtDnBspB,KACO,IAAlBA,EAAIzyC,UAAmB,GAAA/lB,OAAM6W,KAAKkB,EAAE,kBAAgB,GAAA/X,OAAQ6W,KAAKkB,EAAE,mBAqD3BikD,CAAaxD,IACxC15D,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAnDnBspB,KACO,IAAlBA,EAAIxyC,UAAmB,GAAAhmB,OAAM6W,KAAKkB,EAAE,kBAAgB,GAAA/X,OAAQ6W,KAAKkB,EAAE,mBAkD3BkkD,CAAazD,IACxC15D,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAhDbspB,KACO,IAAxBA,EAAIvyC,gBAAyB,GAAAjmB,OAAM6W,KAAKkB,EAAE,kBAAgB,GAAA/X,OAAQ6W,KAAKkB,EAAE,mBA+CjCmkD,CAAmB1D,SAS3D,SAAS2D,KACpB,MAAMr8C,EAAUpB,MACV,KAAEkB,EAAI,KAAEna,EAAI,OAAEqM,EAAM,OAAEuQ,GAAWN,MAEhCk5C,EAAmBC,GAAwBlhD,oBAAS,IACpDF,EAASC,GAAcC,oBAAS,IAChC8M,EAASq0C,GAAcnhD,mBAAS,KAChC0vB,EAAQ0wB,GAAapgD,mBAAS,CACjCvV,KAAM,GACNQ,MAAO,EACPC,YAAa,EACb6J,OAAQ,EACR8L,MAAO,EACPiL,cAAc,EACdI,cAAc,EACdC,iBAAiB,EACjBC,gBAAgB,EAChBL,WAAW,EACXC,WAAW,EACXC,iBAAiB,IAGrB/L,oBAAU,MACNC,uBACUihD,IAEV/0C,IAED,CAACqjB,IAEJ,MAAM0xB,EAAYjhD,UACdJ,GAAW,GACX,IACI,MAAMqiD,QAAiBx8C,IACvBu7C,EAAWiB,GACb,MAAOvtC,GACL/W,IAAMF,MAAM,wDAEhBmC,GAAW,IAsCTuhD,EAAeA,KACjBlB,EAAU,CACN3wD,QAAI8O,EACJ9T,KAAM,GACNQ,MAAO,EACPC,YAAa,EACb6J,OAAQ,EACR8L,MAAO,EACPiL,cAAc,EACdI,cAAc,EACdC,iBAAiB,EACjBC,gBAAgB,EAChBL,WAAW,EACXC,WAAW,EACXC,iBAAiB,KA+BzB,OACInnB,IAAA6b,cAACivB,KAAK,CAACtpB,UAAWR,EAAQ0oB,UAAW4N,UAAW,GAC5Ct3C,IAAA6b,cAACupB,KAAI,CAACnD,QAAS,EAAGoD,WAAS,GACvBrlC,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAIF,MAAI,GACdtlC,IAAA6b,cAAC8gD,GAAe,CACZtS,aAAczf,EACdqwB,SAvDWwB,KAC3BL,GAAqB,IAuDLl0B,SAvFC7sB,UACjBJ,GAAW,GACXla,QAAQqB,IAAIyW,GACZ,SACoBY,IAAZZ,EAAKlO,SACCqI,EAAO6F,SAEPlS,EAAKkS,SAETyjD,IACNE,IACAxjD,IAAMxT,QAAQ,yCAChB,MAAOuqB,GACL/W,IAAMF,MAAM,yJAEhBmC,GAAW,IAyEKqnC,SAAUka,EACVxhD,QAASA,KAGjBhb,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAIF,MAAI,GACdtlC,IAAA6b,cAAC+gD,GAAgB,CACb50C,QAASA,EACTu/B,SA1CE1uC,IAAU,IAAD0kD,EAE3B,IAAIv2C,GAAqC,IAAtBnO,EAAKmO,aACpBI,GAAqC,IAAtBvO,EAAKuO,aACpBC,GAA2C,IAAzBxO,EAAKwO,gBACvBC,GAAyC,IAAxBzO,EAAKyO,eACtBL,GAA+B,IAAnBpO,EAAKoO,UACjBC,GAA+B,IAAnBrO,EAAKqO,UACjBC,GAA2C,IAAzBtO,EAAKsO,gBAE3Bm0C,EAAU,CACN3wD,GAAIkO,EAAKlO,GACThF,KAAMkT,EAAKlT,MAAQ,GACnBQ,MAAO0S,EAAK1S,OAAS,EACrBC,YAAayS,EAAKzS,aAAe,EACjC6J,OAAQ4I,EAAK5I,QAAU,EACvB8L,OAAiB,QAAVwhD,EAAA1kD,EAAKkD,aAAK,IAAAwhD,OAAA,EAAVA,EAAY76C,eAAe,QAAS,CAAEm6C,sBAAuB,MAAQ,EAC5E71C,eACAI,eACAC,kBACAC,iBACAL,YACAC,YACAC,yBAuBAnnB,IAAA6b,cAACuS,GAAiB,CACd9oB,MAAM,0BACNsJ,KAAMutD,EACN9tC,QAASA,IAAM+tC,GAAqB,GACpC9tC,UAAWA,IArFFjT,WACjBJ,GAAW,GACX,UACUsI,EAAOqnB,EAAOjgC,UACd2xD,IACNE,IACAxjD,IAAMxT,QAAQ,yCAChB,MAAOuqB,GACL/W,IAAMF,MAAM,oDAEhBmC,GAAW,IA2EcyhD,IACpB,4CChfEz5C,OAvDEA,KA8CN,CACHipC,QA7CY7wC,UACZ,MAAM,KAAExC,SAAee,GAAI2C,QAAQ,CAC/B4G,IAAI,SACJC,OAAQ,MACRhiB,WAEJ,OAAOyX,GAwCPiI,KArCSzF,UACT,MAAM,KAAExC,SAAee,GAAI2C,QAAQ,CAC/B4G,IAAK,cACLC,OAAQ,MACRhiB,WAEJ,OAAOyX,GAgCPlS,KA7BS0U,UACT,MAAQxC,KAAMwK,SAAuBzJ,GAAI2C,QAAQ,CAC7C4G,IAAK,SACLC,OAAQ,OACRvK,SAEJ,OAAOwK,GAwBPrQ,OArBWqI,UACX,MAAQxC,KAAMwK,SAAuBzJ,GAAI2C,QAAQ,CAC7C4G,IAAI,UAADjiB,OAAY2X,EAAKlO,IACpByY,OAAQ,MACRvK,SAEJ,OAAOwK,GAgBPE,OAbWlI,UACX,MAAM,KAAExC,SAAee,GAAI2C,QAAQ,CAC/B4G,IAAI,UAADjiB,OAAYyJ,GACfyY,OAAQ,WAEZ,OAAOvK,KCtBf,MAAM+G,GAAYC,YAAWnG,IAAK,CACjCoG,KAAM,CACLM,MAAO,QAELspB,UAAW,CACbtpB,MAAO,OACPiS,KAAM,EACNzH,QAASlR,EAAMuoB,QAAQ,IAExBpR,UAAW,CACVzQ,MAAO,QAEL06C,eAAgB,CAClB16C,MAAO,OACPosB,UAAW,YACR9yB,EAAM4X,iBAEVmoC,UAAW,CACVr5C,MAAO,QAEL26C,UAAW,CACP7xC,UAAW,SAEfwwC,IAAK,CACP3nC,WAAYrY,EAAMuoB,QAAQ,GAC1BjQ,cAAetY,EAAMuoB,QAAQ,IAE3Byf,QAAS,CACX5vB,aAAcpY,EAAMuoB,QAAQ,GAC5B9Y,YAAazP,EAAMuoB,QAAQ,IAEzB03B,gBAAiB,CACbzwC,UAAW,QACjB0B,QAASlR,EAAMuoB,QAAQ,OAIlB,SAASu7B,GAAiB35C,GAC7B,MAAM,SAAEqkB,EAAQ,SAAE+yB,EAAQ,SAAE3Y,EAAQ,aAAE+H,EAAY,QAAErvC,GAAY6I,EAC1D7C,EAAUpB,MAETgrB,EAAQ0wB,GAAapgD,mBAASmvC,GAErCjvC,oBAAU,KACNkgD,EAAUjR,IACX,CAACA,IAMJ,OACIrqD,IAAA6b,cAACisB,KAAM,CACHE,oBAAkB,EAClBxmB,UAAWR,EAAQ6P,UACnBkX,cAAe6C,EACf1C,SAAUA,CAACC,EAAMxsB,KAAA,IAAE,UAAE6/C,GAAW7/C,EAAA,OAC5B/X,WAAW,KAVFyX,WACjB6sB,EAASrvB,IAUG4iD,CAAatzB,GACbqzB,KACD,OAGLrzB,GACEnoC,IAAA6b,cAAC4sB,KAAI,CAACjnB,UAAWR,EAAQ6P,WACrB7wB,IAAA6b,cAACupB,KAAI,CAACnD,QAAS,EAAGtO,eAAe,WAAW0R,WAAS,GACjDrlC,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI4R,GAAI,EAAGC,GAAI,EAAG/R,MAAI,GAC5BtlC,IAAA6b,cAAC6sB,KAAK,CACFC,GAAIlnB,KACJ3P,MAAM,YACNnM,KAAK,QACLic,QAAQ,WACRJ,UAAWR,EAAQ6P,UACnB3Q,OAAO,WAGflgB,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI4R,GAAI,EAAGC,GAAI,EAAG/R,MAAI,GAC5BtlC,IAAA6b,cAAC6sB,KAAK,CACFC,GAAIlnB,KACJ3P,MAAM,wBACNnM,KAAK,QACLic,QAAQ,WACRJ,UAAWR,EAAQ6P,UACnB3Q,OAAO,WAGflgB,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI4R,GAAI,GAAIC,GAAI,EAAG/R,MAAI,GAC7BtlC,IAAA6b,cAAC6sB,KAAK,CACFC,GAAIlnB,KACJ3P,MAAM,kBACNnM,KAAK,cACLic,QAAQ,WACRJ,UAAWR,EAAQ6P,UACnB3Q,OAAO,WAGflgB,IAAA6b,cAACupB,KAAI,CAACgS,GAAI,EAAGC,GAAI,EAAG/R,MAAI,GACpBtlC,IAAA6b,cAACsP,GAAiB,CAAC3J,UAAWR,EAAQ6P,UAAW7V,QAASA,EAAS8G,QAASA,IAAMwgC,IAAY1gC,QAAQ,aAAY,gBAItGnI,IAAdmxB,EAAOjgC,GACL3K,IAAA6b,cAACupB,KAAI,CAACgS,GAAI,EAAGC,GAAI,EAAG/R,MAAI,GACpBtlC,IAAA6b,cAACsP,GAAiB,CAAC3J,UAAWR,EAAQ6P,UAAW7V,QAASA,EAAS8G,QAASA,IAAMm5C,EAASrwB,GAAShpB,QAAQ,YAAY3U,MAAM,aAAY,YAI9I,KACJjN,IAAA6b,cAACupB,KAAI,CAACgS,GAAI,EAAGC,GAAI,EAAG/R,MAAI,GACpBtlC,IAAA6b,cAACsP,GAAiB,CAAC3J,UAAWR,EAAQ6P,UAAW7V,QAASA,EAASpQ,KAAK,SAASgX,QAAQ,YAAY3U,MAAM,WAAU,cAW1I,SAASwwD,GAAkB55C,GAC9B,MAAM,QAAEmE,EAAO,SAAEu/B,GAAa1jC,EACxB7C,EAAUpB,KAEhB,OACI5f,IAAA6b,cAACivB,KAAK,CAACtpB,UAAWR,EAAQ85C,gBACtB96D,IAAA6b,cAACm0B,KAAK,CAACxuB,UAAWR,EAAQ6P,UAAWvF,KAAK,QAAQkZ,aAAW,iBACzDxkC,IAAA6b,cAACo0B,KAAS,KACVjwC,IAAA6b,cAACq0B,KAAQ,KACLlwC,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,SAASrnB,MAAO,CAAC3I,MAAO,OAAO,KAChDpgB,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,QAAO,aACxBpwC,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,QAAO,mBACxBpwC,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,QAAO,cAG5BpwC,IAAA6b,cAACw0B,KAAS,KACTroB,EAAQ5F,IAAKs3C,GACV15D,IAAA6b,cAACq0B,KAAQ,CAACtyB,IAAK87C,EAAI/uD,IACf3K,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,SAASrnB,MAAO,CAAC3I,MAAO,OACrCpgB,IAAA6b,cAAC+G,IAAU,CAACd,QAASA,IAAMylC,EAASmS,GAAMl1B,aAAW,UACjDxkC,IAAA6b,cAACiH,KAAQ,QAGjB9iB,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,QAAQspB,EAAIp0D,OAAS,KACtCtF,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,QAAQspB,EAAItpC,aAAe,KAC5CpwB,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,QAAQspB,EAAIgE,OAAS,UAS/C,SAASC,KACpB,MAAM38C,EAAUpB,MACV,KAAEkB,EAAI,KAAEna,EAAI,OAAEqM,EAAM,OAAEuQ,GAAWq6C,MAEhCzB,EAAmBC,GAAwBlhD,oBAAS,IACpDF,EAASC,GAAcC,oBAAS,IAChC8M,EAASq0C,GAAcnhD,mBAAS,KAChC0vB,EAAQ0wB,GAAapgD,mBAAS,CACjC5V,MAAO,GACP8qB,YAAa,GACbstC,MAAO,KAGXtiD,oBAAU,MACNC,uBACUwiD,IAEVt2C,IAED,IAEH,MAAMs2C,EAAYxiD,UACdJ,GAAW,GACX,IACI,MAAM6iD,QAAiBh9C,IACvBu7C,EAAWyB,GACb,MAAO/tC,GACL/W,IAAMF,MAAM,wDAEhBmC,GAAW,IAqCTuhD,EAAeA,KACjBlB,EAAU,CACNh2D,MAAO,GACP8qB,YAAa,GACbstC,MAAO,MAaf,OACI19D,IAAA6b,cAACivB,KAAK,CAACtpB,UAAWR,EAAQ0oB,UAAW4N,UAAW,GAC5Ct3C,IAAA6b,cAACupB,KAAI,CAACnD,QAAS,EAAGoD,WAAS,GACvBrlC,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAIF,MAAI,GACdtlC,IAAA6b,cAAC2hD,GAAe,CACZnT,aAAczf,EACdqwB,SA3BWwB,KAC3BL,GAAqB,IA2BLl0B,SA1DC7sB,UACjBJ,GAAW,GACX,SACoBxB,IAAZZ,EAAKlO,SACCqI,EAAO6F,SAEPlS,EAAKkS,SAETglD,IACNrB,IACAxjD,IAAMxT,QAAQ,yCAChB,MAAOuqB,GACL/W,IAAMF,MAAM,yJAEhBmC,GAAW,IA6CKqnC,SAAUka,EACVxhD,QAASA,KAGjBhb,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAIF,MAAI,GACdtlC,IAAA6b,cAAC4hD,GAAgB,CACbz1C,QAASA,EACTu/B,SAxBE1uC,IAClByiD,EAAU,CACN3wD,GAAIkO,EAAKlO,GACTrF,MAAOuT,EAAKvT,OAAS,GACrB8qB,YAAavX,EAAKuX,aAAe,GACjCstC,MAAO7kD,EAAK6kD,OAAS,UAuBrB19D,IAAA6b,cAACuS,GAAiB,CACd9oB,MAAM,0BACNsJ,KAAMutD,EACN9tC,QAASA,IAAM+tC,GAAqB,GACpC9tC,UAAWA,IAzDFjT,WACjBJ,GAAW,GACX,UACUsI,EAAOqnB,EAAOjgC,UACdkzD,IACNrB,IACAxjD,IAAMxT,QAAQ,yCAChB,MAAOuqB,GACL/W,IAAMF,MAAM,oDAEhBmC,GAAW,IA+CcyhD,IACpB,4CChQEqB,OA1BKA,KAoBT,CACTC,OAnBiB3iD,UACX,MAAM,KAAExC,SAAee,GAAI2C,QAAQ,CAC/B4G,IAAK,YACLC,OAAQ,MACRhiB,WAEJ,OAAOyX,GAcP7F,OAXWqI,UACX,MAAQxC,KAAMwK,SAAuBzJ,GAAI2C,QAAQ,CAC7C4G,IAAI,aAADjiB,OAAe2X,EAAK+E,KACvBwF,OAAQ,MACRvK,SAEJ,OAAOwK,KCCf,MAAMzD,GAAYC,YAAYnG,IAAK,CACjC2rB,UAAW,CACTtT,WAAYrY,EAAMuoB,QAAQ,GAC1BjQ,cAAetY,EAAMuoB,QAAQ,IAE/BoS,iBAAkB,CAChBzpB,QAASlR,EAAMuoB,QAAQ,GACvBliB,QAAS,OACTgR,SAAU,OACV/Q,cAAe,SACfU,OAAQ,KAEVi+B,IAAK,CACH/9B,gBAAiBlH,EAAM8f,QAAQ1tB,QAC/B+U,aAAc,EACdT,MAAO,OACP,oBAAqB,CACnBnT,MAAOyM,EAAM8f,QAAQykC,UAEvB,2BAA4B,CAC1BtqC,eAAgB,WAKpBkR,MAAO,CACLja,QAASlR,EAAMuoB,QAAQ,GACvBliB,QAAS,OACTE,WAAY,SACZI,aAAc,GACdD,MAAO,QAET4uB,WAAY,CACV/lB,SAAU,OACVhc,MAAO2zB,KAAK,KACZhgB,gBAAiB,UACjBR,MAAO1G,EAAMuoB,QAAQ,GACrBvhB,OAAQhH,EAAMuoB,QAAQ,IAExBgN,UAAW,CACThmB,SAAU,OACVhc,MAAOuzB,KAAK,MAEd0O,aAAc,CACZjiC,MAAO2zB,KAAK,KACZ3X,SAAU,QAEZqrB,WAAY,CACVprB,UAAW,SAEb2H,UAAW,CACTzQ,MAAO,QAETm0B,gBAAiB,CACfn0B,MAAO,OACP8I,UAAW,WAIA,SAASg1C,GAAQr6C,GAC9B,MAAM,SAAEzT,EAAQ,oBAAE+tD,GAAwBt6C,EACpC7C,EAAUpB,MACTw+C,EAAYC,GAAiBnjD,mBAAS,aACtCojD,EAAcC,GAAmBrjD,mBAAS,aAC1CsjD,EAAUC,GAAevjD,mBAAS,YAClCwjD,EAAaC,GAAkBzjD,mBAAS,KACxC0jD,EAAiBC,GAA0B3jD,mBAAS,YAEpD4jD,EAAmBC,GAAwB7jD,oBAAS,IACpD8jD,EAAqBC,GAA0B/jD,oBAAS,IACxDgkD,EAAiBC,GAAsBjkD,oBAAS,IAChDkkD,EAAoBC,GAAyBnkD,oBAAS,IACtDokD,EAAwBC,GAAsBrkD,oBAAS,IAevDskD,EAAWC,GAAgBvkD,mBAAS,KACpCwkD,EAAkBC,GAAuBzkD,oBAAS,IAIlD0kD,EAAsBC,GAA2B3kD,mBAAS,aAC1D4kD,EAA6BC,GAAkC7kD,oBAAS,IAExE8kD,EAAsBC,GAA2B/kD,mBAAS,aAC1DglD,EAA6BC,GAAkCjlD,oBAAS,IAExEklD,EAA8BC,GAAmCnlD,mBAAS,aAC1EolD,EAAqCC,GAA0CrlD,oBAAS,IAEzF,OAAElI,GAAW+qD,KA2PnB,OAzPA3iD,oBAAU,KACR,GAAIpZ,MAAMyb,QAAQrN,IAAaA,EAASrO,OAAQ,CAC9C,MAAMq8D,EAAahuD,EAASuN,KAAMnD,GAAgB,eAAVA,EAAEoD,KACtCwgD,GACFC,EAAcD,EAAWriD,OAE3B,MAAMuiD,EAAeluD,EAASuN,KAAMnD,GAAgB,iBAAVA,EAAEoD,KACxC0gD,GACFC,EAAgBD,EAAaviD,OAE/B,MAAMyiD,EAAWpuD,EAASuN,KAAMnD,GAAgB,SAAVA,EAAEoD,KACpC4gD,GACFC,EAAYD,EAASziD,OAEvB,MAAM6iD,EAAkBxuD,EAASuN,KAAMnD,GAAgB,oBAAVA,EAAEoD,KAC3CghD,GACFC,EAAuBD,EAAgB7iD,OAIzC,MAAM6jD,EAAuBxvD,EAASuN,KAAMnD,GAAgB,yBAAVA,EAAEoD,KAChDgiD,GACFC,EAAwBD,EAAqB7jD,OAKlD,MAAMikD,EAAuB5vD,EAASuN,KAAMnD,GAAgB,wBAAVA,EAAEoD,KAC7CoiD,GACFC,EAAwBD,EAAqBjkD,OAI/C,MAAMqkD,EAA+BhwD,EAASuN,KAAMnD,GAAgB,iCAAVA,EAAEoD,KACxDwiD,GACFC,EAAgCD,EAA6BrkD,OAG/D,MAAM2iD,EAActuD,EAASuN,KAAMnD,GAAgB,gBAAVA,EAAEoD,KACvC8gD,GACFC,EAAeD,EAAY3iD,OA4B7B,MAAMyjD,EAAYpvD,EAASuN,KAAMnD,GAAgB,UAAVA,EAAEoD,KACrC4hD,GACFC,EAAaD,EAAUzjD,SAI1B,CAAC3L,IAgLFpQ,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACE5oB,IAAA6b,cAACupB,KAAI,CAACnD,QAAS,EAAGoD,WAAS,GAIzBrlC,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI4R,GAAI,EAAGC,GAAI,EAAG/R,MAAI,GAC9BtlC,IAAA6b,cAACwqB,KAAW,CAAC7kB,UAAWR,EAAQuzB,iBAC9Bv0C,IAAA6b,cAACyqB,KAAU,CAAC37B,GAAG,iBAAgB,oBAC/B3K,IAAA6b,cAAC2qB,KAAM,CACLsC,QAAQ,gBACR/sB,MAAOqiD,EACP18C,SAAUrG,WAzLtBA,eAAsCU,GACpCsiD,EAActiD,GACdgjD,GAAqB,SACf/rD,EAAO,CACX4K,IAAK,aACL7B,UAEF/C,IAAMxT,QAAQ,0CACdu5D,GAAqB,GAkLTyB,CAAuBzwC,EAAEpO,OAAO5F,SAGlC/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,YAAY,iBAC7B/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,WAAW,gBAE9B/b,IAAA6b,cAACu8B,KAAc,KACZ0mB,GAAqB,oBAI5B9+D,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI4R,GAAI,EAAGC,GAAI,EAAG/R,MAAI,GAC9BtlC,IAAA6b,cAACwqB,KAAW,CAAC7kB,UAAWR,EAAQuzB,iBAC9Bv0C,IAAA6b,cAACyqB,KAAU,CAAC37B,GAAG,uBAAsB,+BAGrC3K,IAAA6b,cAAC2qB,KAAM,CACLsC,QAAQ,sBACR/sB,MAAOuiD,EACP58C,SAAUrG,WAvLtBA,eAAkCU,GAChCwiD,EAAgBxiD,GAChBkjD,GAAuB,SACjBjsD,EAAO,CACX4K,IAAK,eACL7B,UAGF/C,IAAMxT,QAAQ,yCAAoC,CAChDwjB,SAAU,YACV7P,UAAW,IACXC,iBAAiB,EACjBC,cAAc,EACdC,cAAc,EACdC,WAAW,EACXG,MAAO,UAETulD,GAAuB,GACY,oBAAxBd,GACTA,EAAoBpiD,GAqKV0kD,CAAmB1wC,EAAEpO,OAAO5F,SAG9B/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,YAAY,gBAC7B/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,SAAS,QAC1B/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,WAAW,YAE9B/b,IAAA6b,cAACu8B,KAAc,KACZ4mB,GAAuB,oBAI9Bh/D,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI4R,GAAI,EAAGC,GAAI,EAAG/R,MAAI,GAC9BtlC,IAAA6b,cAACwqB,KAAW,CAAC7kB,UAAWR,EAAQuzB,iBAC9Bv0C,IAAA6b,cAACyqB,KAAU,CAAC37B,GAAG,oBAAmB,+BAGlC3K,IAAA6b,cAAC2qB,KAAM,CACLsC,QAAQ,mBACR/sB,MAAO6iD,EACPl9C,SAAUrG,WA/JtBA,eAA+BU,GAC7B8iD,EAAuB9iD,GACvBwjD,GAAmB,SACbvsD,EAAO,CACX4K,IAAK,kBACL7B,UAEF/C,IAAMxT,QAAQ,0CACdq5D,GAAuB,GAwJX6B,CAAgB3wC,EAAEpO,OAAO5F,SAG3B/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,YAAY,cAC7B/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,WAAW,YAE9B/b,IAAA6b,cAACu8B,KAAc,KACZ4mB,GAAuB,oBAI9Bh/D,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI4R,GAAI,EAAGC,GAAI,EAAG/R,MAAI,GAC9BtlC,IAAA6b,cAACwqB,KAAW,CAAC7kB,UAAWR,EAAQuzB,iBAC9Bv0C,IAAA6b,cAACyqB,KAAU,CAAC37B,GAAG,mBAAkB,mBAGjC3K,IAAA6b,cAAC2qB,KAAM,CACLsC,QAAQ,kBACR/sB,MAAOyiD,EACP98C,SAAUrG,WAzMtBA,eAA8BU,GAC5B0iD,EAAY1iD,GACZojD,GAAmB,SACbnsD,EAAO,CACX4K,IAAK,OACL7B,UAEF/C,IAAMxT,QAAQ,0CACd25D,GAAmB,GAkMPwB,CAAe5wC,EAAEpO,OAAO5F,SAG1B/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,YAAY,kBAC7B/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,WAAW,YAE9B/b,IAAA6b,cAACu8B,KAAc,KACZ8mB,GAAmB,oBAI1Bl/D,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI4R,GAAI,EAAGC,GAAI,EAAG/R,MAAI,GAC9BtlC,IAAA6b,cAACwqB,KAAW,CAAC7kB,UAAWR,EAAQuzB,iBAC9Bv0C,IAAA6b,cAACyqB,KAAU,CAAC37B,GAAG,sBAAqB,gBAGpC3K,IAAA6b,cAAC2qB,KAAM,CACLsC,QAAQ,qBACR/sB,MAAO2iD,EACPh9C,SAAUrG,WAlNtBA,eAAiCU,GAC/B4iD,EAAe5iD,GACfsjD,GAAsB,SAChBrsD,EAAO,CACX4K,IAAK,cACL7B,UAEF/C,IAAMxT,QAAQ,0CACd65D,GAAsB,GA2MVuB,CAAkB7wC,EAAEpO,OAAO5F,SAG7B/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,QAAQ,UAI3B/b,IAAA6b,cAACu8B,KAAc,KACZgnB,GAAsB,oBAK7Bp/D,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI4R,GAAI,EAAGC,GAAI,EAAG/R,MAAI,GAC9BtlC,IAAA6b,cAACwqB,KAAW,CAAC7kB,UAAWR,EAAQuzB,iBAC9Bv0C,IAAA6b,cAACyqB,KAAU,CAAC37B,GAAG,8BAA6B,6CAC5C3K,IAAA6b,cAAC2qB,KAAM,CACLsC,QAAQ,6BACR/sB,MAAO6jD,EACPl+C,SAAUrG,WA5MtBA,eAA0CU,GACxC8jD,EAAwB9jD,GACxBgkD,GAA+B,SACzB/sD,EAAO,CACX4K,IAAK,uBACL7B,UAEL/C,IAAMxT,QAAQ,0CACXu6D,GAA+B,GAqMnBc,CAA2B9wC,EAAEpO,OAAO5F,SAGtC/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,YAAY,gBAC7B/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,WAAW,eAE9B/b,IAAA6b,cAACu8B,KAAc,KACZ0nB,GAA+B,oBAOtC9/D,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI4R,GAAI,EAAGC,GAAI,EAAG/R,MAAI,GAC9BtlC,IAAA6b,cAACwqB,KAAW,CAAC7kB,UAAWR,EAAQuzB,iBAC9Bv0C,IAAA6b,cAACyqB,KAAU,CAAC37B,GAAG,6BAA4B,mDAC3C3K,IAAA6b,cAAC2qB,KAAM,CACLsC,QAAQ,4BACR/sB,MAAOikD,EACPt+C,SAAUrG,WAnNtBA,eAA0CU,GACxCkkD,EAAwBlkD,GACxBokD,GAA+B,SACzBntD,EAAO,CACX4K,IAAK,sBACL7B,UAGF/C,IAAMxT,QAAQ,0CACd26D,GAA+B,GA2MnBW,CAA2B/wC,EAAEpO,OAAO5F,SAGtC/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,YAAY,gBAC7B/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,WAAW,eAE9B/b,IAAA6b,cAACu8B,KAAc,KACZ8nB,GAA+B,oBAMtClgE,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI4R,GAAI,EAAGC,GAAI,EAAG/R,MAAI,GAC9BtlC,IAAA6b,cAACwqB,KAAW,CAAC7kB,UAAWR,EAAQuzB,iBAC9Bv0C,IAAA6b,cAACyqB,KAAU,CAAC37B,GAAG,sCAAqC,sDACpD3K,IAAA6b,cAAC2qB,KAAM,CACLsC,QAAQ,qCACR/sB,MAAOqkD,EACP1+C,SAAUrG,WA5TpBA,eAAkDU,GAClDskD,EAAgCtkD,GAChCwkD,GAAuC,SACjCvtD,EAAO,CACX4K,IAAK,+BACL7B,UAEL/C,IAAMxT,QAAQ,0CACX+6D,GAAuC,GAqT3BQ,CAAmChxC,EAAEpO,OAAO5F,SAG9C/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,YAAY,gBAC7B/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,WAAW,eAE9B/b,IAAA6b,cAACu8B,KAAc,KACZkoB,GAAuC,qBAMhDtgE,IAAA6b,cAACupB,KAAI,CAACnD,QAAS,EAAGoD,WAAS,GACzBrlC,IAAA6b,cAACglC,KAAI,CACHE,eAAe,UACfC,UAAU,UACVggB,cAAc,KACdp/C,QAAQ,aACRJ,UAAWR,EAAQ29B,IACnB51B,MAAO,CACL1I,aAAc,GACdM,UAAW,KAGb3gB,IAAA6b,cAAColC,KAAG,CAEFnvC,MAAM,wBAmIZ9R,IAAA6b,cAACupB,KAAI,CAACnD,QAAS,EAAGoD,WAAS,EACzBtc,MAAO,CAAE1I,aAAc,KACvBrgB,IAAA6b,cAACglC,KAAI,CACHE,eAAe,UACfC,UAAU,UACVggB,cAAc,KACdp/C,QAAQ,aACRJ,UAAWR,EAAQ29B,KAEnB3+C,IAAA6b,cAAColC,KAAG,CAACnvC,MAAM,WAGb9R,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI4R,GAAI,GAAIC,GAAI,GAAI/R,MAAI,GAChCtlC,IAAA6b,cAACwqB,KAAW,CAAC7kB,UAAWR,EAAQuzB,iBAC9Bv0C,IAAA6b,cAAC4F,KAAS,CACR9W,GAAG,QACHhF,KAAK,QACLua,OAAO,QACPpO,MAAM,cACN8P,QAAQ,WACR7F,MAAOyjD,EACP99C,SAAUrG,WAxVtBA,eAAiCU,GAC/B0jD,EAAa1jD,GACb4jD,GAAoB,SACd3sD,EAAO,CACX4K,IAAK,QACL7B,UAEF/C,IAAMxT,QAAQ,0CACdm6D,GAAoB,GAiVRsB,CAAkBlxC,EAAEpO,OAAO5F,UAI/B/b,IAAA6b,cAACu8B,KAAc,KACZsnB,GAAoB,sBCxsBnC,MAAMwB,GAAmBvlD,IAAA,IAAC,KAAE7K,EAAI,IAAElK,EAAG,GAAEC,GAAI8U,EAAA,OAAK7K,EAAKkZ,MAAQpjB,IAAQC,KAErEq6D,GAAiBvhD,aAAe,CAC5B7O,KAAM,GACTlK,IAAKA,IAAM,KACXC,GAAIA,IAAM,MAGIq6D,UC8JAlG,OAjJKA,KAClB,MAAM,KAAElqD,GAASqK,qBAAWyD,KACpBjB,KAAMwjD,GAAgB1G,MACvBv0D,EAAOytD,GAAYz4C,mBAAS,KAC3B4F,KAAM8yC,GAAc3wC,MACrBwwC,EAAYC,GAAiBx4C,mBAAS,CAC3CvV,KAAM,GACN0sD,WAAY,GACZC,WAAY,GACZG,IAAK,KAGD2O,EAASC,aAAU,CACvBt5B,cAAe,CACbp9B,GAAI,GACJhF,KAAM,GACNC,MAAO,GACPkuD,MAAO,GACPjuD,SAAU,GACVkuD,OAAQ,GACRR,QAAS,GACTS,WAAY,IAEd9rB,SAAWC,IACTm5B,EAAkBn5B,MAItB/sB,oBAAUC,UACRs4C,QAAeC,KACfwN,EAAO1F,gBAAgByF,EAAYrwD,EAAKlO,aACvC,IAEH,MAAM0+D,EAAoBjmD,UACxB,UACQzB,GAAIqnB,IAAI,cAAD//B,OAAe4P,EAAKlO,WAC/B,IAAIw+D,EAAOj5B,OAAQsrB,eAErBz6C,IAAMxT,QAAQ,kCACd,MAAOsT,GACP/X,QAAQ+X,MAAMA,GACdP,GAAWO,KAIf,OACE9Y,IAAA6b,cAAA,QAAMqsB,SAAUk5B,EAAO3F,cACrBz7D,IAAA6b,cAACupB,KAAI,CAACC,WAAS,EAACpD,QAAS,EAAGhiB,WAAW,YACrCjgB,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAAC+R,GAAI,EAAG7R,GAAI,IACpBxlC,IAAA6b,cAAC4F,KAAS,CACR9b,KAAK,OACLoW,MAAOqlD,EAAOj5B,OAAOxiC,KACrBmT,MAAOsoD,EAAO94B,QAAQ3iC,QAAUy7D,EAAO74B,OAAO5iC,KAC9C+b,SAAU0/C,EAAOvO,aACjBjxC,QAAQ,WACRjX,GAAG,OACHypD,aAAa,OACbtiD,MAAM,kBACNu1B,UAAQ,EACRxW,WAAS,KAGb7wB,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAAC+R,GAAI,EAAG7R,GAAI,IACpBxlC,IAAA6b,cAAC4F,KAAS,CACR9b,KAAK,QACLoW,MAAOqlD,EAAOj5B,OAAOviC,MACrBkT,MAAOsoD,EAAO94B,QAAQ1iC,SAAWw7D,EAAO74B,OAAO3iC,MAC/C8b,SAAU0/C,EAAOvO,aACjBjxC,QAAQ,WACRjX,GAAG,QACHmH,MAAOiG,KAAKkB,EAAE,qBACdouB,UAAQ,EACR+sB,aAAa,QACbvjC,WAAS,KAGb7wB,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAAC+R,GAAI,EAAG7R,GAAI,IACpBxlC,IAAA6b,cAACw4C,KAAS,CACRC,KAAK,kBACLv4C,MAAOqlD,EAAOj5B,OAAO2rB,MACrBpyC,SAAU0/C,EAAOvO,cAEf5F,GACAjtD,IAAA6b,cAAC4F,KAAS6C,OAAAC,OAAA,GACJ0oC,EAAU,CACdriD,KAAK,MACLgX,QAAQ,WACRjX,GAAG,QACHhF,KAAK,QACLmT,MAAOsoD,EAAO94B,QAAQwrB,SAAWsN,EAAO74B,OAAOurB,MAC/CM,aAAa,QACbtiD,MAAM,qBACNu1B,UAAQ,EACRxW,WAAS,OAKjB7wB,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAAC+R,GAAI,EAAG7R,GAAI,IACpBxlC,IAAA6b,cAAC4F,KAAS,CACR2yC,aAAa,cACbzuD,KAAK,aACLoW,MAAOqlD,EAAOj5B,OAAO6rB,WACrBl7C,MAAOsoD,EAAO94B,QAAQ0rB,cAAgBoN,EAAO74B,OAAOyrB,WACpDtyC,SAAU0/C,EAAOvO,aACjBjxC,QAAQ,WACRjX,GAAG,aACHmH,MAAM,MACNu1B,UAAQ,EACRxW,WAAS,KAGb7wB,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAAC+R,GAAI,EAAG7R,GAAI,IACpBxlC,IAAA6b,cAACyqB,KAAU,CAACwhB,QAAQ,kBAAiB,SACrC9nD,IAAA6b,cAAC2qB,KAAM,CACL5kB,QAAQ,WACRjX,GAAG,iBACHmH,MAAM,QACNnM,KAAK,SACLoW,MAAOqlD,EAAOj5B,OAAO4rB,OACrBryC,SAAU0/C,EAAOvO,aACjBxrB,UAAQ,EACRxW,WAAS,GAER3qB,EAAMkc,IAAI,CAACpb,EAAM4W,IAChB5d,IAAA6b,cAACiU,IAAQ,CAAClS,IAAKA,EAAK7B,MAAO/U,EAAK2D,IAC7B3D,EAAKrB,KAAK,kBAAgBqB,EAAKb,MAAM,eAAa,IAClDa,EAAKZ,YAAY,aAAWY,EAAKiJ,OAAO,SAAOjJ,EAAK+U,UAK7D/b,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,IACbxlC,IAAA6b,cAAC82C,GAAW,CAACjxC,SAAUgyC,KAEzB1zD,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,IACbxlC,IAAA6b,cAACgG,KAAM,CAACjX,KAAK,SAASqC,MAAM,UAAU2U,QAAQ,WAAWiP,WAAS,EAACrqB,UAAW46D,EAAOh2B,UAAYg2B,EAAO94B,SAAS,iBCpI3H,MAAM1oB,GAAYC,YAAYnG,IAAK,CACjCoG,KAAM,CACJuS,KAAM,EACNzR,gBAAiBlH,EAAM8f,QAAQgD,WAAWqI,OAE5C6E,UAAW,IACNhwB,EAAM4X,gBACTD,UAAW,SACXgB,KAAM,GAERssB,IAAK,CACH/9B,gBAAiBlH,EAAM8f,QAAQ1tB,QAC/B+U,aAAc,GAEhBgkB,MAAO,IACFnrB,EAAM4X,gBACTD,UAAW,SACXzG,QAASlR,EAAMuoB,QAAQ,GACvBliB,QAAS,OACTE,WAAY,SACZG,MAAO,QAETilB,UAAW,CACTjlB,MAAO,OACP2hB,UAAW,QAEb2f,QAAS,CACP92B,QAASlR,EAAMuoB,QAAQ,IAEzBw3B,UAAW,CACTr5C,MAAO,WAyLImhD,OArLQA,KACrB,MAAMvgD,EAAUpB,MACT++B,EAAKe,GAAUxkC,mBAAS,WACxB5U,EAAWwzD,GAAgB5+C,mBAAS,KACpC3I,EAASivD,GAActmD,mBAAS,KAChCF,EAASC,GAAcC,oBAAS,IAChCumD,EAAaC,GAAkBxmD,mBAAS,KACxC9K,EAAUuxD,GAAezmD,mBAAS,KAClC0mD,EAAkBC,GAAuB3mD,oBAAS,IAEnD,mBAAEyD,GAAuB3C,MACzB,KAAE2B,EAAI,gBAAEg9C,GAAoBF,MAC1BuD,OAAQ8D,GAAmB/D,KAEnC3iD,oBAAU,MACRC,iBACEJ,GAAW,GACX,IACE,MAAMrY,EAAYG,aAAaC,QAAQ,aACjCuP,QAAgBoL,EAAK/a,GACrBm/D,QAAoBD,IAK1B,GAJAN,EAAWjvD,GACXunD,EAAavnD,EAAQjM,WACrBq7D,EAAYI,GAER//D,MAAMyb,QAAQskD,GAAc,CAC9B,MAAMzD,EAAeyD,EAAYpkD,KAC9Bua,GAAgB,iBAAVA,EAAEta,KAEP0gD,GACFuD,EAA2C,YAAvBvD,EAAaviD,OAIrC,MAAMjL,QAAa6N,IACnB+iD,EAAe5wD,GACf,MAAOif,GACP/W,IAAMF,MAAMiX,GAEd9U,GAAW,GAEb+mD,IAEC,IAEH,MA6CMC,EAAUA,IACPR,EAAYz3C,MAGrB,OACEhqB,IAAA6b,cAACs5C,GAAa,CAAC3zC,UAAWR,EAAQlB,MAChC9f,IAAA6b,cAACw5C,GAAU,KACTr1D,IAAA6b,cAAC61B,GAAK,KAAE35B,KAAKkB,EAAE,oBAEjBjZ,IAAA6b,cAACivB,KAAK,CAACtpB,UAAWR,EAAQ0oB,UAAW4N,UAAW,GAC9Ct3C,IAAA6b,cAACglC,KAAI,CACH9kC,MAAO4iC,EACPoC,eAAe,UACfC,UAAU,UACVggB,cAAc,KACdp/C,QAAQ,aACRF,SA7DgBwgD,CAAC/gE,EAAO2yC,MAC9Bz4B,iBACEJ,GAAW,GACX,IACE,MAAMrY,EAAYG,aAAaC,QAAQ,aACjCuP,QAAgBoL,EAAK/a,GACrBm/D,QAAoBD,IAK1B,GAJAN,EAAWjvD,GACXunD,EAAavnD,EAAQjM,WACrBq7D,EAAYI,GAER//D,MAAMyb,QAAQskD,GAAc,CAC9B,MAAMzD,EAAeyD,EAAYpkD,KAC9Bua,GAAgB,iBAAVA,EAAEta,KAEP0gD,GACFuD,EAA2C,YAAvBvD,EAAaviD,OAIrC,MAAMjL,QAAa6N,IACnB+iD,EAAe5wD,GACf,MAAOif,GACP/W,IAAMF,MAAMiX,GAEd9U,GAAW,GAEb+mD,GAGAtiB,EAAO5L,IAgCDtyB,UAAWR,EAAQ29B,KAEnB3+C,IAAA6b,cAAColC,KAAG,CAACnvC,MAAM,YAAYiK,MAAO,WAC9B/b,IAAA6b,cAAColC,KAAG,CAACnvC,MAAM,eAASiK,MAAO,YAC1B6lD,GAAoB5hE,IAAA6b,cAAColC,KAAG,CAACnvC,MAAM,cAAWiK,MAAO,cACjDkmD,IAAYjiE,IAAA6b,cAAColC,KAAG,CAACnvC,MAAM,WAAWiK,MAAO,cAAkB,KAC3DkmD,IAAYjiE,IAAA6b,cAAColC,KAAG,CAACnvC,MAAM,SAASiK,MAAO,UAAc,KACrDkmD,IAAYjiE,IAAA6b,cAAColC,KAAG,CAACnvC,MAAM,QAAQiK,MAAO,UAAc,MAEvD/b,IAAA6b,cAACivB,KAAK,CAACtpB,UAAWR,EAAQ6jB,MAAOyS,UAAW,GAC1Ct3C,IAAA6b,cAACkhC,GAAQ,CACPv7B,UAAWR,EAAQqkB,UACnBtpB,MAAO4iC,EACPh5C,KAAM,aAEN3F,IAAA6b,cAAC+9C,GAAa,CACZ5+C,QAASA,EACTktB,SA9CkB7sB,UAC5BJ,GAAW,GACX,IACE6+C,EAAajhD,SACP8hD,EAAgB,CAAEhwD,GAAI4H,EAAQ5H,GAAIrE,UAAWuS,IACnDG,IAAMxT,QAAQ,wCACd,MAAOuqB,GACP/W,IAAMF,MAAMiX,GAEd9U,GAAW,IAsCD8sB,cAAezhC,KAGnBtG,IAAA6b,cAACqlD,GAAgB,CACfpwD,KAAM2wD,EACN76D,IAAKA,IACH5G,IAAA6b,cAACkhC,GAAQ,CACPv7B,UAAWR,EAAQqkB,UACnBtpB,MAAO4iC,EACPh5C,KAAM,aAEN3F,IAAA6b,cAACqgD,GAAgB,SAIvBl8D,IAAA6b,cAACqlD,GAAgB,CACfpwD,KAAM2wD,EACN76D,IAAKA,IACH5G,IAAA6b,cAACkhC,GAAQ,CACPv7B,UAAWR,EAAQqkB,UACnBtpB,MAAO4iC,EACPh5C,KAAM,SAEN3F,IAAA6b,cAACwhD,GAAY,SAInBr9D,IAAA6b,cAACqlD,GAAgB,CACfpwD,KAAM2wD,EACN76D,IAAKA,IACH5G,IAAA6b,cAACkhC,GAAQ,CACPv7B,UAAWR,EAAQqkB,UACnBtpB,MAAO4iC,EACPh5C,KAAM,SAEN3F,IAAA6b,cAAC8hD,GAAY,SAInB39D,IAAA6b,cAACkhC,GAAQ,CAACv7B,UAAWR,EAAQqkB,UAAWtpB,MAAO4iC,EAAKh5C,KAAM,WACxD3F,IAAA6b,cAACqiD,GAAO,CACN9tD,SAAUA,EACV+tD,oBAAsBpiD,GACpB8lD,EAA8B,YAAV9lD,MAI1B/b,IAAA6b,cAACkhC,GAAQ,CAACv7B,UAAWR,EAAQqkB,UAAWtpB,MAAO4iC,EAAKh5C,KAAM,UACxD3F,IAAA6b,cAACm/C,GAAW,W,iCCnOT,SAASmH,GAAWt+C,GACjC,MAAM,UAAEu+C,KAAch3C,GAASvH,GACxB0wC,EAAO8N,GAAQC,aAASz+C,GAS/B,OACE7jB,IAAA6b,cAAC4F,KAAS6C,OAAAC,OAAA,CACR3Z,KAAK,OACLkO,MAAOupD,EAAK/5B,SAAW+5B,EAAKvpD,QAAS,EACrC+vB,WAXJ,WACE,MAAOP,EAASxvB,GAASypD,cAAGF,EAAM,UAAW,SAC7C,GAAI/5B,GAAWxvB,EACb,OAAOA,EAQK0pD,IACRjO,EACAnpC,ICVV,SAASq3C,GAAY5+C,GACnB,MAAM,MAAE/R,EAAK,KAAE+G,KAASuS,GAASvH,GAC1B0wC,EAAO8N,GAAQC,aAASz+C,IACvB9H,MAAO2mD,GAAkBnO,GAC1BjsB,EAASxvB,GAASypD,cAAGF,EAAM,UAAW,SACvCM,EAAUr6B,GAAWxvB,IAAS,EAOpC,OACE9Y,IAAA6b,cAACwqB,KAAW/hB,OAAAC,OAAA,GAAK6G,EAAI,CAAEtS,MAAO6pD,IAC5B3iE,IAAA6b,cAACyqB,KAAU,KAAEx0B,GACb9R,IAAA6b,cAAC2qB,KAAMliB,OAAAC,OAAA,GAAKgwC,EAAK,CAAEx4C,MAAO2mD,GAAgC,KACvD7pD,EAAKuJ,IAAI,CAACkjB,EAAMjjB,IACfriB,IAAA6b,cAACiU,IAAQ,CAAClS,IAAKyE,EAAOtG,MAAOupB,EAAKvpB,OAC/BupB,EAAKxzB,SAZhB,WACE,GAAI6wD,EACF,OAAO3iE,IAAA6b,cAACu8B,KAAc,KAAEt/B,GAcvB0pD,IAKPC,GAAY9iD,aAAe,CACzB9G,KAAM,IAOO4pD,U,uBC1Cf,MAAMG,GAAY,CAChB,CACE7mD,MAAO,KACPjK,MAAO,UAET,CACEiK,MAAO,MACPjK,MAAO,kBAII,SAAS+wD,GAAYh/C,GAElC,MAAM,KAAE/S,GAASqK,qBAAWyD,KACrBkkD,EAAaC,GAAkB7nD,mBAASpK,EAAKyB,QAAQuwD,cACrDE,EAAgBC,GAAqB/nD,mBAASpK,EAAKyB,QAAQywD,iBAC3DE,EAAeC,GAAoBjoD,mBAASpK,EAAKyB,QAAQ2wD,gBACzDE,EAAcC,GAAmBnoD,mBAASpK,EAAKyB,QAAQ6wD,eACvDE,EAAaC,GAAkBroD,mBAASpK,EAAKyB,QAAQ+wD,cACrDE,EAAiBC,GAAsBvoD,mBAASpK,EAAKyB,QAAQixD,kBAGlEE,WAAW,UACTC,EAAS,SACTC,EAAQ,KACRC,EAAI,MACJ1pD,EAAK,QACL2pD,EAAO,QACPC,GACD,cACDvV,GACE3qC,EAWJ,OAVAzI,oBAAU,KACRozC,EAAc,YAAasU,GAC3BtU,EAAc,UAAWwU,GACzBxU,EAAc,WAAY0U,GAC1B1U,EAAc,QAAS4U,GACvB5U,EAAc,OAAQ8U,GACtB9U,EAAc,UAAWgV,IAExB,IAGDxjE,IAAA6b,cAAC7b,IAAM4oB,SAAQ,KACb5oB,IAAA6b,cAAC8O,IAAU,CAAC/I,QAAQ,KAAK8O,cAAY,GAAC,+CAGtC1wB,IAAA6b,cAACupB,KAAI,CAACC,WAAS,EAACpD,QAAS,GAEvBjiC,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,EAAG4R,GAAI,GACpBp3C,IAAA6b,cAACsmD,GAAU,CAACx8D,KAAMg+D,EAAUh+D,KAAMmM,MAAO6xD,EAAU7xD,MAAO+e,WAAS,EACjE9U,MAAO+mD,EACPphD,SAAWqO,IACTgzC,EAAehzC,EAAEpO,OAAO5F,OACxByyC,EAAc,YAAaz+B,EAAEpO,OAAO5F,WAI1C/b,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,EAAG4R,GAAI,GACpBp3C,IAAA6b,cAAC4mD,GAAW,CACV98D,KAAMo+D,EAAQp+D,KACdmM,MAAOiyD,EAAQjyD,MACf+G,KAAM+pD,GACN/xC,WAAS,EACT9U,MAAOynD,EACP9hD,SAAWqO,IACT0zC,EAAmB1zC,EAAEpO,OAAO5F,OAC5ByyC,EAAc,UAAWz+B,EAAEpO,OAAO5F,WAMxC/b,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GACbxlC,IAAA6b,cAACsmD,GAAU,CACTx8D,KAAMm+D,EAAQn+D,KACdmM,MAAOgyD,EAAQhyD,MACf+e,WAAS,EACT9U,MAAOinD,EACPthD,SAAWqO,IACTkzC,EAAkBlzC,EAAEpO,OAAO5F,OAC3ByyC,EAAc,UAAWz+B,EAAEpO,OAAO5F,WAIxC/b,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GACbxlC,IAAA6b,cAACsmD,GAAU,CACTx8D,KAAMi+D,EAASj+D,KACfmM,MAAO8xD,EAAS9xD,MAChB+e,WAAS,EACT9U,MAAOmnD,EACPxhD,SAAWqO,IACTozC,EAAiBpzC,EAAEpO,OAAO5F,OAC1ByyC,EAAc,WAAYz+B,EAAEpO,OAAO5F,WAMzC/b,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GACbxlC,IAAA6b,cAACsmD,GAAU,CACTx8D,KAAMwU,EAAMxU,KACZmM,MAAOqI,EAAMrI,MACb+e,WAAS,EACT9U,MAAOqnD,EACP1hD,SAAWqO,IACTszC,EAAgBtzC,EAAEpO,OAAO5F,OACzByyC,EAAc,QAASz+B,EAAEpO,OAAO5F,WAKtC/b,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GACbxlC,IAAA6b,cAACsmD,GAAU,CACTx8D,KAAMk+D,EAAKl+D,KACXmM,MAAO+xD,EAAK/xD,MACZ+e,WAAS,EACT9U,MAAOunD,EACP5hD,SAAWqO,IACTwzC,EAAexzC,EAAEpO,OAAO5F,OACxByyC,EAAc,OAAQz+B,EAAEpO,OAAO5F,a,+CC3G7C,MAAM6D,GAAYC,YAAYnG,IAAK,CACjC,UAAW,CACTsqD,GAAI,CACF9jD,OAAQ,EACR0K,QAAS,EACTq5C,UAAW,SAGf/jD,OAAQ,CACNA,OAAQxG,EAAMuoB,QAAQ,IAIxBiiC,WAAY,CACVtjD,gBACyB,UAAvBlH,EAAM8f,QAAQ5uB,KAAmB8O,EAAM8f,QAAQoH,KAAK,KAAOlnB,EAAM8f,QAAQoH,KAAK,MAElFujC,YAAa,CACXpkD,QAAS,OACT4T,eAAgB,SAChB1T,WAAY,WACZI,aAAc3G,EAAMuoB,QAAQ,IAE9BmiC,OAAQ,CACNjoB,UAAU,aAADj7C,OAAewY,EAAM8f,QAAQuP,SACtCpoB,UAAWjH,EAAMuoB,QAAQ,GACzBlQ,WAAYrY,EAAMuoB,QAAQ,GAC1BjQ,cAAetY,EAAMuoB,QAAQ,GAC7B,CAACvoB,EAAMggB,YAAY+S,GAAG,OAAQ,CAC5B1a,WAAYrY,EAAMuoB,QAAQ,GAC1BjQ,cAAetY,EAAMuoB,QAAQ,KAIjCoiC,WAAY,CACVtkD,QAAS,OACTY,UAAW,OACXV,WAAY,SACZD,cAAe,UAEjBskD,OAAQ,CACNvkD,QAAS,OACTE,WAAY,SACZ0T,eAAgB,oBAKL,SAAS4wC,GAAQ1gD,GAC9B,MAAM,cACJ2qC,EAAa,cACbgW,EAAa,WACbC,GACE5gD,GAkCE,KAAE/C,EAAI,OAAEwC,GAAWL,MACnB,KAAEtF,GAAS88C,KAEXz5C,EAAUpB,MACT8kD,EAAYC,GAAiB3kE,IAAMkb,SAAS,IAC5C0pD,EAAgBC,GAAqB3pD,mBAAS,IAC9C4pD,EAAkBC,GAAuB/kE,IAAMkb,SAAS,IACxD8pD,EAAcC,GAAmBjlE,IAAMkb,SAAS,KAChDgqD,EAAkBC,GAAuBnlE,IAAMkb,SAAS,KACxDF,EAASC,GAAcjb,IAAMkb,UAAS,GACvCtY,EAAYG,aAAaC,QAAQ,aAEvCoY,oBAAU,MACRC,uBACQ+pD,IAER79C,IACC,IAEH,MAAM69C,EAAgB/pD,UACpBJ,GAAW,GACX,IACE,MAAMoqD,QAAsB1nD,EAAK/a,GACjCiiE,EAAkBQ,EAActR,cAC1BuI,EAAU+I,EAActR,QAC9B,MAAOhkC,GACPhvB,QAAQqB,IAAI2tB,GAGd9U,GAAW,IAEPqhD,EAAYjhD,UAChBJ,GAAW,GACX,IACE,MAAMqqD,QAAuBhiD,EAAOshD,GAC9B1+D,EAAQ,GAGdA,EAAM1E,KAAK,CACT8D,MAAOggE,EAAe3/D,KACtBouD,OAAQuR,EAAe36D,GACvB46D,MAAOD,EAAevpD,MACtBqU,YAAa,CAAC,GAADlvB,OACRokE,EAAen/D,MAAK,mBAAAjF,OACpBokE,EAAel/D,YAAW,kBAAAlF,OAC1BokE,EAAer1D,OAAM,WAE1B9J,MAAOm/D,EAAen/D,MACtBC,YAAak/D,EAAel/D,YAC5B6J,OAAQq1D,EAAer1D,OACvBu1D,WAAY,aACZC,cAAe,aAKjBR,EAAgB/+D,GAChB,MAAO6pB,GACPhvB,QAAQqB,IAAI2tB,GAGd9U,GAAW,IAIPyqD,EAAQV,EACd,OACEhlE,IAAA6b,cAAC7b,IAAM4oB,SAAQ,KACb5oB,IAAA6b,cAACupB,KAAI,CAACC,WAAS,EAACpD,QAAS,GACtByjC,EAAMtjD,IAAKujD,GAEV3lE,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAAC1nB,IAAK+nD,EAAKrgE,MAAOkgC,GAAI,GAAI4R,IAAIuuB,EAAKrgE,MAAyB,IAAS+xC,GAAI,IACjFr3C,IAAA6b,cAACgd,KAAI,KACH74B,IAAA6b,cAACkd,KAAU,CACTzzB,MAAOqgE,EAAKrgE,MACZi0B,UAAWosC,EAAKpsC,UAChBP,qBAAsB,CAAEoX,MAAO,UAC/BlX,yBAA0B,CAAEkX,MAAO,UACnCh2B,OAAuB,QAAfurD,EAAKrgE,MAAkBtF,IAAA6b,cAAC+pD,KAAQ,MAAM,KAC9CpkD,UAAWR,EAAQkjD,aAErBlkE,IAAA6b,cAACgqD,KAAW,KACV7lE,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQmjD,aACtBnkE,IAAA6b,cAAC8O,IAAU,CAACjG,UAAU,KAAK9C,QAAQ,KAAK3U,MAAM,eAG1CjN,IAAA6b,cAAC7b,IAAM4oB,SAAQ,KAAC,KACX+8C,EAAKJ,MAAM7iD,eAAe,QAAS,CAAEm6C,sBAAuB,MAIrE78D,IAAA6b,cAAC8O,IAAU,CAAC/I,QAAQ,KAAK3U,MAAM,iBAAgB,YAIjDjN,IAAA6b,cAAA,UACG8pD,EAAKv1C,YAAYhO,IAAK0jD,GACrB9lE,IAAA6b,cAAC8O,IAAU,CAACjG,UAAU,KAAK9C,QAAQ,YAAYwuB,MAAM,SAASxyB,IAAKkoD,GAChEA,MAKT9lE,IAAA6b,cAACkqD,KAAW,KACV/lE,IAAA6b,cAACgG,KAAM,CACLgP,WAAS,EACTjP,QAAS+jD,EAAKF,cACdx4D,MAAM,UACN6U,QAASA,KACH6jD,EAAKrB,OACP9V,EAAc,OAAQnrD,KAAK6Z,UAAU,CACnC/W,MAAOu+D,EACPt+D,YAAa0+D,EACbS,MAAOL,KAGT1W,EAAc,OAAQnrD,KAAK6Z,UAAUyoD,IAEvCnB,EAAcC,EAAa,KAI5BkB,EAAKH,kBClOT3lD,mBAAWnG,IAAK,CAC7BssD,SAAU,CACRp7C,QAASlR,EAAMuoB,QAAQ,EAAG,IAE5BmS,MAAO,CACLvpB,WAAY,OAEdvlB,MAAO,CACLqb,UAAWjH,EAAMuoB,QAAQ,OCedgkC,OApBf,SAAwBpiD,GACtB,MAAM,WAAEqiD,GAAeriD,EACjB7C,EAAUpB,MACV,KAAE5Y,GAASk/D,EAEXC,EAAU9iE,KAAKC,MAAM0D,IACrB,MAAEb,EAAK,YAAEC,EAAW,MAAEm/D,GAAUY,EACtC,OACEnmE,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GAAI4R,GAAI,IACrBp3C,IAAA6b,cAAC8O,IAAU,CAAC/I,QAAQ,KAAK8O,cAAY,EAAClP,UAAWR,EAAQ1b,OAAO,qBAGhEtF,IAAA6b,cAAC8O,IAAU,CAAC+F,cAAY,GAAC,gBAAWvqB,GACpCnG,IAAA6b,cAAC8O,IAAU,CAAC+F,cAAY,GAAC,cAAYtqB,GACrCpG,IAAA6b,cAAC8O,IAAU,CAAC+F,cAAY,GAAC,uBACzB1wB,IAAA6b,cAAC8O,IAAU,CAAC+F,cAAY,GAAC,YAAU60C,EAAM7iD,eAAe,QAAS,CAACm6C,sBAAuB,OClBhFuJ,I,YAAAA,GCKA,WACb,MAAQj+B,OAAQ+9B,GAAeG,eAC/B,OACErmE,IAAA6b,cAAC7b,IAAM4oB,SAAQ,KACb5oB,IAAA6b,cAAC8O,IAAU,CAAC/I,QAAQ,KAAK8O,cAAY,GAAC,wBAGtC1wB,IAAA6b,cAACupB,KAAI,CAACC,WAAS,EAACpD,QAAS,GACvBjiC,IAAA6b,cAACyqD,GAAe,CAACJ,WAAYA,O,6BCZZzU,WAAO8U,IAAGC,QAAAC,aAAA,2fA4BdhV,WAAO8U,IAAGG,QAAAD,aAAA,oSAqBDhV,WAAO8U,IAAGI,QAAAF,aAAA,64BAqDThV,WAAO8U,IAAGK,QAAAH,aAAA,4Q,cC7B1BI,IC3EA,IACbC,OAAQ,eACRpD,UAAW,CACTC,UAAW,CACTh+D,KAAM,YACNmM,MAAO,iBACPi1D,iBAAkB,uCAEpBC,SAAU,CACRrhE,KAAM,WACNmM,MAAO,aACPi1D,iBAAkB,yBAEpBnD,SAAU,CACRj+D,KAAM,WACNmM,MAAO,eACPi1D,iBAAkB,qCAGpBlD,KAAM,CACJl+D,KAAM,OACNmM,MAAO,UACPi1D,iBAAkB,8BAEpB5sD,MAAO,CACLxU,KAAM,QACNmM,MAAO,UACPi1D,iBAAkB,8BAEpBjD,QAAS,CACPn+D,KAAM,UACNmM,MAAO,OACPi1D,iBAAkB,0BAClBE,gBAAiB,8BAEnBlD,QAAS,CACPp+D,KAAM,UACNmM,MAAO,WACPi1D,iBAAkB,+BAEpBG,4BAA6B,CAC3BvhE,KAAM,8BACNmM,MAAO,wCAETq1D,UAAW,CACTxhE,KAAM,YACNmM,MAAO,sBAETs1D,WAAY,CACVzhE,KAAM,aACNmM,MAAO,gBACPi1D,iBAAkB,4BAEpB1U,WAAY,CACV1sD,KAAM,aACNmM,MAAO,eACPi1D,iBAAkB,0BAClBE,gBAAiB,iDAEnB3U,WAAY,CACV3sD,KAAM,aACNmM,MAAO,eACPi1D,iBAAkB,0BAClBE,gBAAiB,4BAEnBxU,IAAK,CACH9sD,KAAM,MACNmM,MAAO,OACPi1D,iBAAkB,kBAClBE,gBAAiB,+BCnEvB,MACEvD,WACEC,UAAS,GACTC,SAAQ,GACRC,KAAI,GACJC,QAAO,GACPC,QACF,KACEsD,GAGW,QACblgC,OAAaC,MAAM,CACjB,CAACu8B,GAAUh+D,MAAOwhC,OAAaE,SAAS,GAADnmC,OAAIyiE,GAAUoD,mBACrD,CAACnD,GAASj+D,MAAOwhC,OAAaE,SAAS,GAADnmC,OAAI0iE,GAASmD,mBACnD,CAAClD,GAAKl+D,MAAOwhC,OACVmgC,WACAjgC,SAAS,GAADnmC,OAAI2iE,GAAKkD,mBACpB,CAACjD,GAAQn+D,MAAOwhC,OACbE,SAAS,GAADnmC,OAAI4iE,GAAQiD,mBAEvB,CAAChD,GAAQp+D,MAAOwhC,OACbmgC,WACAjgC,SAAS,GAADnmC,OAAI6iE,GAAQgD,sBCxB3B,MACErD,WACEC,UAAS,YACTqD,GACApD,SAAQ,GACRC,KAAI,GACJ1pD,MAAK,GACL2pD,QAAO,GACPC,QAAO,+BACPmD,GAA2B,WAC3BE,GAAU,WACV/U,GACA8U,UAAS,OACT1U,KAEA4U,GAEW,QACb,CAAC1D,GAAUh+D,MAAO,GAClB,CAACqhE,GAASrhE,MAAO,GACjB,CAACi+D,GAASj+D,MAAO,GACjB,CAACk+D,GAAKl+D,MAAO,GACb,CAACwU,GAAMxU,MAAO,GACd,CAACm+D,GAAQn+D,MAAO,GAChB,CAACo+D,GAAQp+D,MAAO,GAChB,CAACuhE,GAA4BvhE,OAAO,EACpC,CAACyhE,GAAWzhE,MAAO,GACnB,CAAC0sD,GAAW1sD,MAAO,GACnB,CAACwhE,GAAUxhE,MAAO,GAClB,CAAC8sD,GAAI9sD,MAAO,IC7BCka,eAAWnG,IAAK,CAC7B6tD,QAAS,CACP38C,QAASlR,EAAMuoB,QAAQ,EAAG,EAAG,IAE/Bn8B,QAAS,CACPia,QAAS,OACT4T,eAAgB,YAElBnP,OAAQ,CACN7D,UAAWjH,EAAMuoB,QAAQ,GACzB/W,WAAYxR,EAAMuoB,QAAQ,IAE5BulC,QAAS,CACPtnD,OAAQxG,EAAMuoB,QAAQ,GACtBjZ,SAAU,YAEZ8B,eAAgB,CACd9B,SAAU,WACVgC,IAAK,MACLC,KAAM,UCnBKw8C,OC6BA,SAAqB9rD,GAA4B,IAA3B,QAAE+rD,EAAO,YAAEv4C,GAAaxT,EAC3D,MAAMgsD,EAAQ,CAAC,QAAS,eAAgB,YAClC,OAAEb,EAAM,UAAEpD,GAAc2D,GAExBrmD,EAAUpB,MACT6kD,EAAYD,GAAiBtpD,mBAAS,IACtCisD,EAAWS,GAAgB1sD,mBAASwsD,EAAQ/8D,IAC7Ck9D,EAA0B5/B,GAAiBw8B,GAC3CqD,EAAarD,IAAekD,EAAM5lE,OAAS,GAC3C,KAAE+O,GAASqK,qBAAWyD,IAwE5B,SAASmpD,IACPvD,EAAcC,EAAa,GAG7B,OACEzkE,IAAA6b,cAAC7b,IAAM4oB,SAAQ,KACb5oB,IAAA6b,cAAC8O,IAAU,CAACjG,UAAU,KAAK9C,QAAQ,KAAKwuB,MAAM,UAAS,gBAGvDpwC,IAAA6b,cAACmsD,KAAO,CAACvD,WAAYA,EAAYjjD,UAAWR,EAAQumD,SACjDI,EAAMvlD,IAAKtQ,GACV9R,IAAA6b,cAACosD,KAAI,CAACrqD,IAAK9L,GACT9R,IAAA6b,cAACqsD,KAAS,KAAEp2D,MAIlB9R,IAAA6b,cAAC7b,IAAM4oB,SAAQ,KAIX5oB,IAAA6b,cAACisB,KAAM,CACLC,cAAe,IACVj3B,KACAq3D,IAELlgC,iBAAkB4/B,EAClB3/B,SApCV,SAAuBC,EAAQ1/B,GACzBq/D,EAvCNzsD,eAA2B8sB,EAAQ1/B,GACjC,IACE,MAAMzB,EAAO3D,KAAKC,MAAM6kC,EAAOnhC,MACzBohE,EAAY,CAChBzE,UAAWx7B,EAAOw7B,UAClBqD,SAAU7+B,EAAO6+B,SACjBqB,SAAUlgC,EAAOkgC,SACjBxE,KAAM17B,EAAO07B,KACb1pD,MAAOguB,EAAOhuB,MACd2pD,QAAS37B,EAAO27B,QAChBC,QAAS57B,EAAO47B,QAChBmD,4BAA6B/+B,EAAO++B,4BACpCE,WAAYj/B,EAAOi/B,WACnB/U,WAAYlqB,EAAOkqB,WACnBI,IAAKtqB,EAAOsqB,IACZzrD,KAAMmhC,EAAOnhC,KACb+sD,OAAQ/sD,EAAK2D,GACb46D,MAAOv+D,EAAKu+D,MACZp/D,MAAOa,EAAKb,MACZC,YAAaY,EAAKZ,YAClB+gE,UAAWA,IAGP,KAAEtuD,SAAee,GAAIoD,KAAK,sBAAuBorD,GACnDvvD,EAAKsK,KACPtf,OAAO+K,KAAKiK,EAAKsK,IAAK,UAExB1a,EAAQ4/B,eAAc,GACtBm8B,EAAcC,EAAa,GAC3BzrD,IAAMxT,QAAQ,iFACV2pB,GACFA,IAEF,MAAO3W,GACPD,GAAWC,IAMX8vD,CAAYngC,EAAQ1/B,IAEpB+7D,EAAcC,EAAa,GAC3Bh8D,EAAQ8/D,WAAW,IACnB9/D,EAAQ4/B,eAAc,MAgCfzc,IAAA,IAAC,aAAE4c,EAAY,cAAEgmB,EAAa,OAAErmB,GAAQvc,EAAA,OACvC5rB,IAAA6b,cAAC4sB,KAAI,CAAC99B,GAAIm8D,GAnGxB,SAA4BphC,EAAM8oB,EAAegW,EAAer8B,GAE9D,OAAQzC,GACN,KAAK,EACH,OAAO1lC,IAAA6b,cAACgnD,GAAW,CAACa,UAAWA,EAAWv7B,OAAQA,EAAQqmB,cAAeA,IAC3E,KAAK,EACH,OAAOxuD,IAAA6b,cAAC82C,GAAW,CACnB+Q,UAAWA,EACXlV,cAAeA,EACfgW,cAAeA,EACfC,WAAY/+B,EACZyhC,UAAWA,EACXh/B,OAAQA,IAEV,KAAK,EACH,OAAOnoC,IAAA6b,cAACuqD,GAAW,MACrB,QACE,OAAOpmE,IAAA6b,cAAA,WAAK,cAmFD2sD,CAAmB/D,EAAYjW,EAAegW,EAAer8B,GAE9DnoC,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQlb,SACN,IAAf2+D,GACCzkE,IAAA6b,cAACgG,KAAM,CAACC,QAASimD,EAAavmD,UAAWR,EAAQwD,QAAQ,UAI3DxkB,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQwmD,SACN,IAAf/C,GACCzkE,IAAA6b,cAACgG,KAAM,CACLrb,SAAUgiC,EACV59B,KAAK,SACLgX,QAAQ,YACR3U,MAAM,UACNuU,UAAWR,EAAQwD,QAElBsjD,EAAa,QAAU,cAG3Bt/B,GACCxoC,IAAA6b,cAACwP,KAAgB,CACfC,KAAM,GACN9J,UAAWR,EAAQ8J,yBC3J3C,MAAMlL,GAAYC,YAAYnG,IAAK,CACjCoG,KAAM,CACJC,QAAS,OACT0Q,SAAU,QAEZwY,UAAW,CACTzoB,YAAa9G,EAAMuoB,QAAQ,GAC3B5P,KAAM,GAGRkmB,UAAW,CACTx4B,QAAS,OACT4T,eAAgB,SAChB1T,WAAY,UAGd+mB,WAAY,CACVhe,SAAU,YAGZ8B,eAAgB,CACd7d,MAAO8d,KAAM,KACb/B,SAAU,WACVgC,IAAK,MACLC,KAAM,MACNtK,WAAY,GACZuK,YAAa,OAmCFutB,OA9BM98B,IAAmE,IAAlE,KAAE/M,EAAI,QAAEyf,EAAO,QAAEq5C,EAAO,UAAEhvB,EAAS,cAAE3Q,EAAa,OAAE4Q,GAAQh9B,EAChF,MAAMqF,EAAUpB,KACVyf,EAAY7K,kBAAO,GAGzBpZ,oBAAU,IACD,KACLikB,EAAUtK,SAAU,GAErB,IAGH,MAAM5F,EAAcA,KAClBd,KAGF,OACEruB,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQlB,MACtB9f,IAAA6b,cAAC0S,KAAM,CAAC3f,KAAMA,EAAMyf,QAASc,EAAauC,SAAS,KAAKyK,OAAO,SAC7Dn8B,IAAA6b,cAAC6S,KAAa,CAACC,UAAQ,GACrB3uB,IAAA6b,cAAC4rD,GAAY,CACXC,QAASA,EACTv4C,YAAaA,QCxBzB,MAAMjV,GAAUA,CAACC,EAAOC,KACtB,GAAoB,kBAAhBA,EAAOxP,KAA0B,CACnC,MAAM69D,EAAWruD,EAAOC,QAClBquD,EAAW,GAWjB,OATAD,EAAS5jD,QAAS/T,IAChB,MAAM63D,EAAYxuD,EAAMzY,UAAWqjB,GAAMA,EAAEpa,KAAOmG,EAAKnG,KACpC,IAAfg+D,EACFxuD,EAAMwuD,GAAa73D,EAEnB43D,EAASlnE,KAAKsP,KAIX,IAAIqJ,KAAUuuD,GAGvB,GAAoB,iBAAhBtuD,EAAOxP,KAAyB,CAClC,MAAMkG,EAAOsJ,EAAOC,QACdsuD,EAAYxuD,EAAMzY,UAAWqjB,GAAMA,EAAEpa,KAAOmG,EAAKnG,IAEvD,OAAmB,IAAfg+D,GACFxuD,EAAMwuD,GAAa73D,EACZ,IAAIqJ,IAEJ,CAACrJ,KAASqJ,GAIrB,GAAoB,gBAAhBC,EAAOxP,KAAwB,CACjC,MAAM9H,EAASsX,EAAOC,QAEhBsuD,EAAYxuD,EAAMzY,UAAWqjB,GAAMA,EAAEpa,KAAO7H,GAIlD,OAHmB,IAAf6lE,GACFxuD,EAAMvY,OAAO+mE,EAAW,GAEnB,IAAIxuD,GAGb,GAAoB,UAAhBC,EAAOxP,KACT,MAAO,IAILgV,GAAYC,YAAYnG,IAAK,CACjCgwB,UAAW,CACTrX,KAAM,EACNzH,QAASlR,EAAMuoB,QAAQ,GACvB5Q,UAAW,YACR3X,EAAM4X,oBAuNEs3C,OAnNEA,KAAO,IAAD97B,EACrB,MAAM9rB,EAAUpB,MAET5E,EAASC,GAAcC,oBAAS,IAChCsL,EAAYC,GAAiBvL,mBAAS,IACtCmZ,EAASC,GAAcpZ,oBAAS,IAChCwL,EAAa8yB,GAAkBt+B,mBAAS,KACxCutD,EAAU3tD,GAAYC,qBAAWb,GAAS,KAC1C8qD,EAAcC,GAAmBjlE,IAAMkb,SAAS,KAChD2tD,EAAmBC,GAAwB5tD,mBAAS,OACpDi/B,EAAkBC,GAAuBl/B,oBAAS,IACnD,KAAEpK,GAASqK,qBAAWyD,KACrBmqD,EAAgBC,GAAqB9tD,mBAAa,OAAJpK,QAAI,IAAJA,GAAa,QAATg8B,EAAJh8B,EAAMyB,eAAO,IAAAu6B,OAAT,EAAJA,EAAeinB,SAE7D7tD,EAAOytD,GAAYz4C,mBAAS,KAC5B4F,KAAM8yC,GAAc3wC,KAE5B7H,oBAAU,MACTC,iBACC,MAAMyF,QAAa8yC,IACnBD,EAAS7yC,GAEVyG,IACE,IAeFnM,oBAAU,KACRN,EAAS,CAAElQ,KAAM,UACjB6b,EAAc,IACb,CAACC,IAEJ,MAAMuiD,EAAgB5tD,UACpB,IACE,MAAM,KAAExC,SAAee,GAAI0B,IAAI,gBAAiB,CAC9Cla,OAAQ,CAAEslB,cAAaF,gBAEzB1L,EAAS,CAAElQ,KAAM,gBAAiByP,QAASxB,IAC3Cyb,EAAWzb,EAAKwb,SAChBpZ,GAAW,GACX,MAAOzC,GACPD,GAAWC,KAIf4C,oBAAU,KACRH,GAAW,GACX,MAAMuM,EAAkB5jB,WAAW,KACjCqlE,KACC,KACH,MAAO,IAAMvhD,aAAaF,IACzB,CAACd,EAAaF,IAGjB,MAWMs1C,EAAYlxB,IAChB,MAAMs+B,EAAOrrD,IAAOA,OAAUI,OAAO,cAC/BD,EAAaH,IAAO+sB,EAAO7sB,SAASE,OAAO,cACjD,IAAIC,EAAOL,IAAOG,EAAY,cAAcE,KAAKL,IAAOqrD,EAAM,eAE9D,GADWrrD,IAAOS,SAASJ,GAAMK,SACtB,GAAuB,SAAlBqsB,EAAOtiC,OACrB,MAAO,CAAEsY,gBAAiB,cAIxBuoD,EAAav+B,IACjB,MAAMs+B,EAAOrrD,IAAOA,OAAUI,OAAO,cAC/BD,EAAaH,IAAO+sB,EAAO7sB,SAASE,OAAO,cACjD,IAAIC,EAAOL,IAAOG,EAAY,cAAcE,KAAKL,IAAOqrD,EAAM,eAC1D7qD,EAAOR,IAAOS,SAASJ,GAAMK,SACjC,MAAMjW,EAASsiC,EAAOtiC,OACtB,MAAe,SAAXA,EACK,OAGM,YAAXA,EACK,YAGL+V,EAAO,EACF,UAEA,aAkBX,OACEre,IAAA6b,cAACs5C,GAAa,KACZn1D,IAAA6b,cAACutD,GAAiB,CAChBx6D,KAAMurC,EACN9rB,QA5F0B+sB,KAC9B0tB,EAAqB,MACrB1uB,GAAoB,GACpB3zB,EAAc,IA0FV+H,kBAAgB,oBAChBk5C,QAAS1C,EACTtsB,UAAWmwB,IAGb7oE,IAAA6b,cAACw5C,GAAU,KACTr1D,IAAA6b,cAACupB,KAAI,CAACC,WAAS,EAAE1R,eAAe,iBAC9B3zB,IAAA6b,cAACupB,KAAI,CAACE,MAAI,GACRtlC,IAAA6b,cAAC61B,GAAK,KAAC,YAET1xC,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GACbxlC,IAAA6b,cAACyqB,KAAU,CAACwhB,QAAQ,kBAAiB,SACrC9nD,IAAA6b,cAAC2qB,KAAM,CACL5kB,QAAQ,WACR7F,MAAOgtD,EACPl4C,WAAS,EACTlmB,GAAG,iBACHmH,MAAM,QACN4P,SApCarG,UACvB,IACE,MAAMU,EAAQstD,EAAG1nD,OAAO5F,MACxBitD,EAAkBjtD,SAEZnC,GAAIqnB,IAAI,cAAD//B,OAAe4P,EAAKyB,QAAQ5H,GAAE,SAAS,CAACopD,OAAQh4C,IAC7DktD,IACAjwD,IAAMxT,QAAQ,8CACd,MAAOsT,GACPP,GAAWO,KA4BHuuB,UAAQ,GAEPnhC,EAAMkc,IAAI,CAACpb,EAAM4W,IAChB5d,IAAA6b,cAACiU,IAAQ,CAAClS,IAAKA,EAAK7B,MAAO/U,EAAK2D,IAC7B3D,EAAKrB,KAAK,kBAAgBqB,EAAKb,MAAM,gBAAca,EAAKZ,YAAY,aAAWY,EAAKiJ,OAAO,SAAOjJ,EAAK+U,YAOpH/b,IAAA6b,cAACivB,KAAK,CACJtpB,UAAWR,EAAQ0oB,UACnB9nB,QAAQ,WACRwV,SA1FgBrH,IACpB,IAAKsE,GAAWrZ,EAAS,OACzB,MAAM,UAAEqc,EAAS,aAAE0T,EAAY,aAAEC,GAAiBjb,EAAEqF,cAChD2V,GAAgB1T,EAAY,KAAO2T,GANvCvkB,EAAe6U,GAAcA,EAAY,KA+FrCt7B,IAAA6b,cAACm0B,KAAK,CAAC1kB,KAAK,SACVtrB,IAAA6b,cAACo0B,KAAS,KACRjwC,IAAA6b,cAACq0B,KAAQ,KACPlwC,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAAS,MAC1BpwC,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAAS,YAC1BpwC,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAAS,SAC1BpwC,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAAS,cAC1BpwC,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAAS,UAC1BpwC,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAAS,uBAG9BpwC,IAAA6b,cAACw0B,KAAS,KACRrwC,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACG6/C,EAASrmD,IAAKqmD,GACbzoE,IAAA6b,cAACq0B,KAAQ,CAACnnB,MAAO+yC,EAAS2M,GAAW7qD,IAAK6qD,EAAS99D,IACjD3K,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAAUq4B,EAAS99D,IACpC3K,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAAUq4B,EAASa,QACpCtpE,IAAA6b,cAACs0B,KAAS,CAACpnB,MAAO,CAAE8B,WAAY,QAAUulB,MAAM,UAAUq4B,EAAS1sD,MAAM2G,eAAe,QAAS,CAAEqG,MAAO,WAAYwgD,SAAU,SAChIvpE,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAAUvyB,IAAO4qD,EAAS1qD,SAASE,OAAO,eAC3Dje,IAAA6b,cAACs0B,KAAS,CAACpnB,MAAO,CAAE8B,WAAY,QAAUulB,MAAM,UAAU+4B,EAAUV,IACpEzoE,IAAA6b,cAACs0B,KAAS,CAACpnB,MAAO,CAAE8B,WAAY,QAAUulB,MAAM,UAAS,IAAG,CAAC,OAAQ,aAAa7wB,SAAS4pD,EAAUV,IAAuE,IAA1DzoE,IAAA6b,cAAA,KAAGma,KAAMyyC,EAASe,WAAY7nD,OAAO,UAAS,YAqBnK3G,GAAWhb,IAAA6b,cAAC25C,GAAgB,CAACC,QAAS,U,WCrQrD,MAAMv7C,GAAUA,CAACC,EAAOC,KACtB,GAAoB,eAAhBA,EAAOxP,KAAuB,CAChC,MAAMzE,EAAQiU,EAAOC,QACfquD,EAAW,GAWjB,OATAviE,EAAM0e,QAAS/T,IACb,MAAM63D,EAAYxuD,EAAMzY,UAAWqjB,GAAMA,EAAEpa,KAAOmG,EAAKnG,KACpC,IAAfg+D,EACFxuD,EAAMwuD,GAAa73D,EAEnB43D,EAASlnE,KAAKsP,KAIX,IAAIqJ,KAAUuuD,GAGvB,GAAoB,iBAAhBtuD,EAAOxP,KAAyB,CAClC,MAAMkG,EAAOsJ,EAAOC,QACdsuD,EAAYxuD,EAAMzY,UAAWqjB,GAAMA,EAAEpa,KAAOmG,EAAKnG,IAEvD,OAAmB,IAAfg+D,GACFxuD,EAAMwuD,GAAa73D,EACZ,IAAIqJ,IAEJ,CAACrJ,KAASqJ,GAIrB,GAAoB,gBAAhBC,EAAOxP,KAAwB,CACjC,MAAM9H,EAASsX,EAAOC,QAEhBsuD,EAAYxuD,EAAMzY,UAAWqjB,GAAMA,EAAEpa,KAAO7H,GAIlD,OAHmB,IAAf6lE,GACFxuD,EAAMvY,OAAO+mE,EAAW,GAEnB,IAAIxuD,GAGb,GAAoB,UAAhBC,EAAOxP,KACT,MAAO,IAILgV,GAAYC,YAAYnG,IAAK,CACjCgwB,UAAW,CACTrX,KAAM,EACNzH,QAASlR,EAAMuoB,QAAQ,GACvB5Q,UAAW,YACR3X,EAAM4X,oBAoNEm4C,OAhNDA,KACZ,MAAMzoD,EAAUpB,MAET5E,EAASC,GAAcC,oBAAS,IAChCsL,EAAYC,GAAiBvL,mBAAS,IACtCmZ,EAASC,GAAcpZ,oBAAS,IAChCqxC,EAAcC,GAAmBtxC,mBAAS,OAC1CwuD,EAAcC,GAAmBzuD,mBAAS,OAC1CiyB,EAAeC,GAAoBlyB,oBAAS,IAC5Cg9C,EAAkBC,GAAuBj9C,oBAAS,IAClDwL,EAAa8yB,GAAkBt+B,mBAAS,KACxC/U,EAAO2U,GAAYC,qBAAWb,GAAS,IAExC7Z,EAAgB8a,qBAAWlW,GAEjCmW,oBAAU,KACRN,EAAS,CAAElQ,KAAM,UACjB6b,EAAc,IACb,CAACC,IAEJtL,oBAAU,KACRH,GAAW,GACX,MAAMuM,EAAkB5jB,WAAW,KACdyX,WACjB,IACE,MAAM,KAAExC,SAAee,GAAI0B,IAAI,UAAW,CACxCla,OAAQ,CAAEslB,cAAaF,gBAEzB1L,EAAS,CAAElQ,KAAM,aAAcyP,QAASxB,EAAK1S,QAC7CmuB,EAAWzb,EAAKwb,SAChBpZ,GAAW,GACX,MAAOzC,GACPD,GAAWC,KAGfm0C,IACC,KACH,MAAO,IAAMjlC,aAAaF,IACzB,CAACd,EAAaF,IAEjBpL,oBAAU,KACR,MAAMxY,EAAYG,aAAaC,QAAQ,aACjC8B,EAASzE,EAAcsC,UAAUC,GAYvC,OAVAkC,EAAOnE,GAAG,WAADO,OAAY0B,EAAS,SAAUiW,IAClB,WAAhBA,EAAKuB,QAAuC,WAAhBvB,EAAKuB,QACnCU,EAAS,CAAElQ,KAAM,eAAgByP,QAASxB,EAAK/H,OAG7B,WAAhB+H,EAAKuB,QACPU,EAAS,CAAElQ,KAAM,cAAeyP,SAAUxB,EAAK/V,WAI5C,KACLgC,EAAOzC,eAER,CAAChC,IA6CJ,OACEL,IAAA6b,cAACs5C,GAAa,KACZn1D,IAAA6b,cAACuS,GAAiB,CAChB9oB,MACEokE,GAAY,GAAAxoE,OACT6W,KAAKkB,EAAE,uCAAsC,KAAA/X,OAC9CwoE,EAAa/jE,KAAI,KAGrBiJ,KAAMspD,EACN7pC,QAAS8pC,EACT7pC,UAAWA,IAnCQjT,WACvB,UACQzB,GAAIlT,OAAO,UAADxF,OAAW4B,IAC3BkW,IAAMxT,QAAQuS,KAAKkB,EAAE,yBACrB,MAAOT,GACPD,GAAWC,GAEbmxD,EAAgB,MAChBnwB,EAAe,IACf/yB,EAAc,IA0BOmjD,CAAiBF,EAAa/+D,KAE9CoN,KAAKkB,EAAE,0CAEVjZ,IAAA6b,cAACyrB,GAAS,CACR14B,KAAMu+B,EACN9e,QAvDuBw7C,KAC3Brd,EAAgB,MAChBpf,GAAiB,IAsDb5e,kBAAgB,oBAChB1rB,OAAQypD,GAAgBA,EAAa5hD,KAEvC3K,IAAA6b,cAACw5C,GAAU,KACTr1D,IAAA6b,cAAC61B,GAAK,KAAE35B,KAAKkB,EAAE,gBACfjZ,IAAA6b,cAACy5C,GAAwB,KACvBt1D,IAAA6b,cAAC4F,KAAS,CACRhT,YAAasJ,KAAKkB,EAAE,8BACpBrO,KAAK,SACLmR,MAAO2K,EACPhF,SA7DYvgB,IACpBq4C,EAAer4C,EAAMwgB,OAAO5F,MAAMsiC,gBA6D1BxC,WAAY,CACViuB,eACE9pE,IAAA6b,cAACu3C,KAAc,CAACpqC,SAAS,SACvBhpB,IAAA6b,cAACulC,KAAU,CAACr4B,MAAO,CAAE9b,MAAO,cAKpCjN,IAAA6b,cAACgG,KAAM,CACLD,QAAQ,YACR3U,MAAM,UACN6U,QAnFkBgtB,KAC1B0d,EAAgB,MAChBpf,GAAiB,KAmFRr1B,KAAKkB,EAAE,wBAIdjZ,IAAA6b,cAACivB,KAAK,CACJtpB,UAAWR,EAAQ0oB,UACnB9nB,QAAQ,WACRwV,SAzDgBrH,IACpB,IAAKsE,GAAWrZ,EAAS,OACzB,MAAM,UAAEqc,EAAS,aAAE0T,EAAY,aAAEC,GAAiBjb,EAAEqF,cAChD2V,GAAgB1T,EAAY,KAAO2T,GANvCvkB,EAAe6U,GAAcA,EAAY,KA8DrCt7B,IAAA6b,cAACm0B,KAAK,CAAC1kB,KAAK,SACVtrB,IAAA6b,cAACo0B,KAAS,KACRjwC,IAAA6b,cAACq0B,KAAQ,KAClBlwC,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACHr4B,KAAKkB,EAAE,mBAEVjZ,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAAUr4B,KAAKkB,EAAE,qBAClCjZ,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACdr4B,KAAKkB,EAAE,sBAEVjZ,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACdr4B,KAAKkB,EAAE,wBAEVjZ,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACdr4B,KAAKkB,EAAE,0BAIdjZ,IAAA6b,cAACw0B,KAAS,KACRrwC,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACGziB,EAAMic,IAAKtR,GACV9Q,IAAA6b,cAACq0B,KAAQ,CAACtyB,IAAK9M,EAAKnG,IAC9B3K,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAAUt/B,EAAKnG,IACpB3K,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAAUt/B,EAAKnL,MAChC3F,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAAUt/B,EAAKlL,OAChC5F,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAAUt/B,EAAKxD,SAChCtN,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACfpwC,IAAA6b,cAAC+G,IAAU,CACT0I,KAAK,QACLxJ,QAASA,IA7GLhR,KACtB07C,EAAgB17C,GAChBs8B,GAAiB,IA2GgB28B,CAAej5D,IAE9B9Q,IAAA6b,cAACiH,KAAQ,OAGX9iB,IAAA6b,cAAC+G,IAAU,CACT0I,KAAK,QACLxJ,QAAUiO,IACRooC,GAAoB,GACpBwR,EAAgB74D,KAGlB9Q,IAAA6b,cAACo9B,KAAiB,UAKzBj+B,GAAWhb,IAAA6b,cAAC25C,GAAgB,CAACC,QAAS,U,UCpPrD,MAAMv7C,GAAUA,CAACC,EAAOC,KACtB,GAAoB,kBAAhBA,EAAOxP,KAA0B,CACnC,MAAMZ,EAAWoQ,EAAOC,QAClB2vD,EAAc,GAWpB,OATAhgE,EAAS6a,QAASjX,IAChB,MAAMq8D,EAAe9vD,EAAMzY,UAAWC,GAAMA,EAAEgJ,KAAOiD,EAAQjD,KACvC,IAAlBs/D,EACF9vD,EAAM8vD,GAAgBr8D,EAEtBo8D,EAAYxoE,KAAKoM,KAId,IAAIuM,KAAU6vD,GAGvB,GAAoB,oBAAhB5vD,EAAOxP,KAA4B,CACrC,MAAMgD,EAAUwM,EAAOC,QACjB4vD,EAAe9vD,EAAMzY,UAAWC,GAAMA,EAAEgJ,KAAOiD,EAAQjD,IAE7D,OAAsB,IAAlBs/D,GACF9vD,EAAM8vD,GAAgBr8D,EACf,IAAIuM,IAEJ,CAACvM,KAAYuM,GAIxB,GAAoB,mBAAhBC,EAAOxP,KAA2B,CACpC,MAAM8tC,EAAYt+B,EAAOC,QAEnB4vD,EAAe9vD,EAAMzY,UAAWC,GAAMA,EAAEgJ,KAAO+tC,GAIrD,OAHsB,IAAlBuxB,GACF9vD,EAAMvY,OAAOqoE,EAAc,GAEtB,IAAI9vD,GAGb,GAAoB,UAAhBC,EAAOxP,KACT,MAAO,IAILgV,GAAYC,YAAYnG,IAAK,CACjCgwB,UAAW,CACTrX,KAAM,EACNzH,QAASlR,EAAMuoB,QAAQ,GACvB5Q,UAAW,YACR3X,EAAM4X,oBAmSE44C,OA/REA,KACf,MAAMlpD,EAAUpB,KACV3D,EAAUC,wBAEV,KAAEpL,GAASqK,qBAAWyD,KAErB5D,EAASC,GAAcC,oBAAS,IAChCsL,EAAYC,GAAiBvL,mBAAS,IACtCwL,EAAa8yB,GAAkBt+B,mBAAS,KACxClR,EAAU8Q,GAAYC,qBAAWb,GAAS,KAC1C2uD,EAAmBC,GAAwB5tD,mBAAS,OACpDi/B,EAAkBC,GAAuBl/B,oBAAS,IAClD2kC,EAAoBC,GAAyB5kC,oBAAS,IACtDivD,EAAeC,GAAoBlvD,mBAAS,KAC5CmvD,EAAiBC,GAAsBpvD,mBAAS,OAChDqvD,EAAaC,GAAkBtvD,oBAAS,IACxCmZ,EAASC,GAAcpZ,oBAAS,GAEjC7a,EAAgB8a,qBAAWlW,GAEjCmW,oBAAU,KACRN,EAAS,CAAElQ,KAAM,UACjB6b,EAAc,IACb,CAACC,IAEJtL,oBAAU,KACRH,GAAW,GACX,MAAMuM,EAAkB5jB,WAAW,KACXyX,WACpB,IACE,MAAM,KAAExC,SAAee,GAAI0B,IAAI,aAAc,CAC3Cla,OAAQ,CAAEslB,cAAaF,gBAEzB1L,EAAS,CAAElQ,KAAM,gBAAiByP,QAASxB,EAAK7O,WAChDsqB,EAAWzb,EAAKwb,SAChBpZ,GAAW,GACX,MAAOzC,GACPD,GAAWC,KAGf44B,IACC,KACH,MAAO,IAAM1pB,aAAaF,IACzB,CAACd,EAAaF,IAEjBpL,oBAAU,KACR,MAAMxY,EAAYG,aAAaC,QAAQ,aACjC8B,EAASzE,EAAcsC,UAAUC,GAYvC,OAVAkC,EAAOnE,GAAG,WAADO,OAAY0B,EAAS,YAAaiW,IACrB,WAAhBA,EAAKuB,QAAuC,WAAhBvB,EAAKuB,QACnCU,EAAS,CAAElQ,KAAM,kBAAmByP,QAASxB,EAAKjL,UAGhC,WAAhBiL,EAAKuB,QACPU,EAAS,CAAElQ,KAAM,iBAAkByP,SAAUxB,EAAK6/B,cAI/C,KACL5zC,EAAOzC,eAER,CAAEhC,IA6EL,OACEL,IAAA6b,cAACs5C,GAAa,CAAC3zC,UAAWR,EAAQi0C,eAChCj1D,IAAA6b,cAACu9B,GAAc,CACbC,UAAWwG,EACXvG,eAAgB6wB,EAChB97C,QAAU6F,IAlDiBA,KAC/B4rB,GAAsB,QACPrmC,IAAXya,QAAwCza,IAAhBya,EAAOrH,MACjC5Q,EAAQza,KAAK,YAADN,OAAagzB,EAAOrH,QAgD5B+zB,CAAwB1sB,MAG5Bl0B,IAAA6b,cAAC48B,GAAY,CACX7pC,KAAMurC,EACN9rB,QA7E0B+sB,KAC9B0tB,EAAqB,MACrB1uB,GAAoB,IA4EhB5rB,kBAAgB,oBAChBkqB,UAAWmwB,IAEb7oE,IAAA6b,cAACuS,GAAiB,CAChB9oB,MACE+kE,EAAe,GAAAnpE,OACR6W,KAAKkB,EAAE,0CAAyC,KAAA/X,OACjDmpE,EAAgB1kE,KAAI,QAAAzE,OAEnB6W,KAAKkB,EAAE,4CAEhBrK,KAAM27D,EACNl8C,QAASm8C,EACTl8C,UAAYyB,GACVs6C,EA3DoBhvD,WAC1B,UACQzB,GAAIlT,OAAO,aAADxF,OAAcw3C,IAC9B1/B,IAAMxT,QAAQuS,KAAKkB,EAAE,4BACrB,MAAOT,GACPD,GAAWC,GAEb8xD,EAAmB,MACnB9wB,EAAe,IACf/yB,EAAc,IAmDJgkD,CAAoBJ,EAAgB1/D,IAhDpB0Q,WAC1B,UACQzB,GAAIoD,KAAK,oBACff,EAAQyuD,GAAG,GACX,MAAOlyD,GACPD,GAAWC,KA4CHmyD,IAGU,GAAAzpE,OAAfmpE,EACMtyD,KAAKkB,EAAE,4CACPlB,KAAKkB,EAAE,8CAEhBjZ,IAAA6b,cAACw5C,GAAU,KACTr1D,IAAA6b,cAAC61B,GAAK,KAAE35B,KAAKkB,EAAE,mBACfjZ,IAAA6b,cAACy5C,GAAwB,KACvBt1D,IAAA6b,cAAC4F,KAAS,CACRhT,YAAasJ,KAAKkB,EAAE,8BACpBrO,KAAK,SACLmR,MAAO2K,EACPhF,SArHYvgB,IACpBq4C,EAAer4C,EAAMwgB,OAAO5F,MAAMsiC,gBAqH1BxC,WAAY,CACViuB,eACE9pE,IAAA6b,cAACu3C,KAAc,CAACpqC,SAAS,SACvBhpB,IAAA6b,cAACulC,KAAU,CAACr4B,MAAO,CAAE9b,MAAO,cAKpCjN,IAAA6b,cAACgG,KAAM,CACLD,QAAQ,YACR3U,MAAM,UACN6U,QAAUiO,GAAMy6C,GAAe,IAE9BzyD,KAAKkB,EAAE,4BAEVjZ,IAAA6b,cAACgG,KAAM,CACLD,QAAQ,YACR3U,MAAM,UACN6U,QApIqB8oD,KAC7B9B,EAAqB,MACrB1uB,GAAoB,KAoIXriC,KAAKkB,EAAE,yBAGXjZ,IAAA6b,cAACgvD,WAAO,CAAC9hD,MAAO,CAAE+hD,eAAe,QAASC,UAAU,IAAIhhC,SAAU,eAAgBlxB,KAAM7O,EAASoY,IAAKxU,IAAO,CAAQjI,KAAMiI,EAAQjI,KAAMiH,OAAQgB,EAAQhB,OAAQhH,MAAOgI,EAAQhI,UAC/K5F,IAAA6b,cAACgG,KAAM,CAACD,QAAQ,YAAY3U,MAAM,WAAU,wBAOhDjN,IAAA6b,cAACivB,KAAK,CACJtpB,UAAWR,EAAQ0oB,UACnB9nB,QAAQ,WACRwV,SArFgBrH,IACpB,IAAKsE,GAAWrZ,EAAS,OACzB,MAAM,UAAEqc,EAAS,aAAE0T,EAAY,aAAEC,GAAiBjb,EAAEqF,cAChD2V,GAAgB1T,EAAY,KAAO2T,GANvCvkB,EAAe6U,GAAcA,EAAY,KA0FrCt7B,IAAA6b,cAACm0B,KAAK,CAAC1kB,KAAK,SACVtrB,IAAA6b,cAACo0B,KAAS,KACRjwC,IAAA6b,cAACq0B,KAAQ,KACPlwC,IAAA6b,cAACs0B,KAAS,CAACvlB,QAAQ,aACnB5qB,IAAA6b,cAACs0B,KAAS,KAAEp4B,KAAKkB,EAAE,wBACnBjZ,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACdr4B,KAAKkB,EAAE,4BAEVjZ,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACdr4B,KAAKkB,EAAE,yBAEVjZ,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACdr4B,KAAKkB,EAAE,6BAIdjZ,IAAA6b,cAACw0B,KAAS,KACRrwC,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACG5e,EAASoY,IAAKxU,GACb5N,IAAA6b,cAACq0B,KAAQ,CAACtyB,IAAKhQ,EAAQjD,IACrB3K,IAAA6b,cAACs0B,KAAS,CAACpnB,MAAO,CAAE+I,aAAc,IAC/B9xB,IAAA6b,cAACyd,KAAM,CAAC9I,IAAK5iB,EAAQwsB,iBAExBp6B,IAAA6b,cAACs0B,KAAS,KAAEviC,EAAQjI,MACpB3F,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAAUxiC,EAAQhB,QACnC5M,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAAUxiC,EAAQhI,OACnC5F,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACfpwC,IAAA6b,cAAC+G,IAAU,CACT0I,KAAK,QACLxJ,QAASA,KACPsoD,EAAiBx8D,GACjBkyC,GAAsB,KAGxB9/C,IAAA6b,cAACqM,KAAY,OAEfloB,IAAA6b,cAAC+G,IAAU,CACT0I,KAAK,QACLxJ,QAASA,KAAMkpD,OA3JTtyB,EA2J0B9qC,EAAQjD,GA1J1Dm+D,EAAqBpwB,QACrB0B,GAAoB,GAFI1B,QA6JN14C,IAAA6b,cAACiH,KAAQ,OAEX9iB,IAAA6b,cAACoD,GAAG,CACFC,KAAMpO,EAAKxD,QACX6R,QAAQ,8BACRvY,IAAKA,IACH5G,IAAA6b,cAAC+G,IAAU,CACT0I,KAAK,QACLxJ,QAAUiO,IACRy6C,GAAe,GACfF,EAAmB18D,KAGrB5N,IAAA6b,cAACo9B,KAAiB,YAO7Bj+B,GAAWhb,IAAA6b,cAAC25C,GAAgB,CAACr8B,QAAM,EAACs8B,QAAS,U,WC/R7CwV,OA/EKtvD,IAAoD,IAAnD,SAAE+F,EAAQ,aAAEwpD,EAAY,YAAE/7C,EAAW,KAAEvgB,GAAM+M,EACjE,MAAOwvD,EAAeC,GAAoBlwD,mBAASgwD,GA4DnD,OACClrE,IAAA6b,cAAC0S,KAAM,CACNF,QAASc,EACTX,kBAAgB,sBAChB5f,KAAMA,GAEN5O,IAAA6b,cAACwvD,KAAW,CACXjrD,MAAO,OACPkrD,SAAS,OACTr+D,MAAOk+D,EACPI,OA/DY,CACd,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WAcE7pD,SArEkBzU,IACpBm+D,EAAiBn+D,EAAMu+D,KACvBr8C,KAoEEs8C,iBAAkBx+D,GAASyU,EAASzU,EAAMu+D,S,gEChE9C,MAAM5rD,GAAYC,YAAYnG,IAAK,CACjCoG,KAAM,CACJM,MAAO,OAEP,CAAC1G,EAAMggB,YAAYC,KAAK,OAAQ,CAC9BoI,UAAW,SAGfvd,OAAQ,CACNhE,YAAa9G,EAAMuoB,QAAQ,IAE7B3hB,MAAO,CACLK,UAAWjH,EAAMuoB,QAAQ,GACzB5hB,aAAc3G,EAAMuoB,QAAQ,IAE9BypC,UAAW,CACT/qD,UAAWjH,EAAMuoB,QAAQ,GACzB5hB,aAAc3G,EAAMuoB,QAAQ,OAIzB,SAAS0pC,GAAkBhwD,GAAuC,IAAtC,QAAEwf,EAAO,QAAErvB,EAAO,cAAE8/D,GAAejwD,EACpE,MAAMqF,EAAUpB,MACTisD,EAAcC,GAAmB5wD,oBAAU,GAE5C6wD,EAAgB1pD,GAAUhH,UAC9BywD,EAAgBzpD,GAChB,MAAM64B,EAASpvC,EAAQuW,GAEvB,QAAe5I,IAAXyhC,QAAsCzhC,IAAdyhC,EAAOvwC,GACjC,IACE,MAAM,KAAEkO,SAAee,GAAI2C,QAAQ,CACjC4G,IAAK,iBACLC,OAAQ,MACRhiB,OAAQ,CAAE+5B,UAAS6wC,SAAU9wB,EAAOvwC,MAEhCshE,EAAapzD,EAAKuJ,IAAK84B,IACpB,IACFA,EACHt/B,SAAU,GACVswD,SAAS,KAGbhxB,EAAOt/B,SAAWqwD,EAClBL,IACA,MAAO77C,GACPxX,GAAWwX,KAKX8zB,EAAaxoC,UACjB,IACE,GAAI6/B,EAAOvwC,SACHiP,GAAI2C,QAAQ,CAChB4G,IAAI,kBAADjiB,OAAoBg6C,EAAOvwC,IAC9ByY,OAAQ,MACRvK,KAAMqiC,QAEH,CACL,MAAM,KAAEriC,SAAee,GAAI2C,QAAQ,CACjC4G,IAAI,iBACJC,OAAQ,OACRvK,KAAMqiC,IAERA,EAAOvwC,GAAKkO,EAAKlO,GAEnBuwC,EAAOgxB,SAAU,EACjBN,IACA,MAAO77C,GACPxX,GAAWwX,KAITo8C,EAAiB9pD,IACrBvW,EAAQuW,GAAO6pD,SAAWpgE,EAAQuW,GAAO6pD,QACzCN,KAiCIQ,EAAe/pD,IACnB,MAAM64B,EAASpvC,EAAQuW,GACvB,OAAI64B,EAAOgxB,QAEPlsE,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACE5oB,IAAA6b,cAAC4F,KAAS,CACR1F,MAAOm/B,EAAO51C,MACdoc,SAAWvgB,GAjBWkrE,EAAClrE,EAAOkhB,KACtCvW,EAAQuW,GAAO/c,MAAQnE,EAAMwgB,OAAO5F,MACpC6vD,KAe6BS,CAAwBlrE,EAAOkhB,GACpDiJ,KAAK,QACL9J,UAAWR,EAAQV,MACnB7R,YAAY,6BAEbysC,EAAOgxB,SACNlsE,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACE5oB,IAAA6b,cAAC+G,IAAU,CACT3V,MAAM,UACN2U,QAAQ,WACR0J,KAAK,QACL9J,UAAWR,EAAQwD,OACnB1C,QAASA,IAAM+hC,EAAW3I,IAE1Bl7C,IAAA6b,cAACywD,KAAQ,OAEXtsE,IAAA6b,cAAC+G,IAAU,CACThB,QAAQ,WACR3U,MAAM,YACNqe,KAAK,QACL9J,UAAWR,EAAQwD,OACnB1C,QAASA,IA1DIzG,WACzB,MAAM6/B,EAASpvC,EAAQuW,GACvB,QAAe5I,IAAXyhC,QAAsCzhC,IAAdyhC,EAAOvwC,GACjC,UACQiP,GAAI2C,QAAQ,CAChB4G,IAAI,kBAADjiB,OAAoBg6C,EAAOvwC,IAC9ByY,OAAQ,WAEV,MAAO2M,GACPxX,GAAWwX,GAGfjkB,EAAQlK,OAAOygB,EAAO,GACtBvW,EAAQ+Y,QAAQxJ,MAAO6/B,EAAQqxB,KAC7BrxB,EAAOA,OAASqxB,EAAQ,QAClB1oB,EAAW3I,KAEnB0wB,KAyC2BY,CAAmBnqD,IAElCriB,IAAA6b,cAACo9B,KAAiB,SAQ5Bj5C,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACE5oB,IAAA6b,cAAC8O,IAAU,KACS,KAAjBuwB,EAAO51C,MAAe41C,EAAO51C,MAAQ,4BACtCtF,IAAA6b,cAAC+G,IAAU,CACThB,QAAQ,WACR0J,KAAK,QACL9J,UAAWR,EAAQwD,OACnB1C,QAASA,IAAMqqD,EAAc9pD,IAE7BriB,IAAA6b,cAACiH,KAAQ,UAOb2pD,EAAiBpqD,IACrB,MAAM64B,EAASpvC,EAAQuW,GACvB,OAAI64B,EAAOgxB,QAEPlsE,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACE5oB,IAAA6b,cAAC4F,KAAS,CACRsH,MAAO,CAAE3I,MAAO,QAChB4jC,WAAS,EACTjoC,MAAOm/B,EAAOnxC,QACd2X,SAAWvgB,GApEaurE,EAACvrE,EAAOkhB,KACxCvW,EAAQuW,GAAOtY,QAAU5I,EAAMwgB,OAAO5F,MACtC6vD,KAkE6Bc,CAA0BvrE,EAAOkhB,GACtDiJ,KAAK,QACL9J,UAAWR,EAAQV,MACnB7R,YAAY,mCAMlBzO,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACE5oB,IAAA6b,cAAC8O,IAAU,CAAC7I,QAASA,IAAMqqD,EAAc9pD,IACtC64B,EAAOnxC,WAoBV4iE,EAAaA,CAACzxB,EAAQ74B,IAExBriB,IAAA6b,cAACosD,KAAI,CAACrqD,IAAKyE,GACTriB,IAAA6b,cAACqsD,KAAS,CAACn/C,MAAO,CAAEoR,OAAQ,WAAarY,QAASiqD,EAAa1pD,IAC5D+pD,EAAY/pD,IAEfriB,IAAA6b,cAAC+wD,KAAW,KACTH,EAAcpqD,QAEA5I,IAAdyhC,EAAOvwC,IACN3K,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACE5oB,IAAA6b,cAACgG,KAAM,CACL5U,MAAM,UACNqe,KAAK,QACLxJ,QAASA,IA5BEO,KACvB,MAAMwqD,EAAe/gE,EAAQuW,GAAOzG,SAAS7Z,OAAS,EACtD+J,EAAQuW,GAAOzG,SAASpa,KAAK,CAC3B8D,MAAO,GACPyE,QAAS,GACTmiE,SAAS,EACThxB,OAAQ2xB,EACR1xC,UACA6wC,SAAUlgE,EAAQuW,GAAO1X,GACzBiR,SAAU,KAEZgwD,KAiB2BkB,CAAgBzqD,GAC/ByT,UAAW91B,IAAA6b,cAACkxD,KAAO,MACnBnrD,QAAQ,WACRJ,UAAWR,EAAQ0qD,WACpB,cAKL1rE,IAAA6b,cAAC8vD,GAAkB,CACjBxwC,QAASA,EACTrvB,QAASovC,EAAOt/B,SAChBgwD,cAAeA,MAoBzB,OAXI5rE,IAAA6b,cAACmsD,KAAO,CACNj/C,MAAO,CAAE1I,aAAc,EAAG2R,cAAe,GACzCg7C,WAAS,EACTvI,WAAYoH,EACZoB,YAAY,YAEXnhE,EAAQsW,IAAI,CAAC84B,EAAQ74B,IAAUsqD,EAAWzxB,EAAQ74B,KAQpD,SAAS6qD,GAAYthD,GAAe,IAAd,QAAEuP,GAASvP,EACtC,MAAM5K,EAAUpB,MACT9T,EAASytC,GAAcr+B,mBAAS,IAEvCE,oBAAU,KACR,GAAI+f,EAAS,CACU9f,WACnB,IACE,MAAM,KAAExC,SAAee,GAAI2C,QAAQ,CACjC4G,IAAK,iBACLC,OAAQ,MACRhiB,OAAQ,CAAE+5B,UAAS6wC,UAAW,KAE1BC,EAAapzD,EAAKuJ,IAAK84B,IACpB,IACFA,EACHt/B,SAAU,GACVswD,SAAS,KAGb3yB,EAAW0yB,GACX,MAAOl8C,GACPxX,GAAWwX,KAGfo9C,KAGD,IAEH,MAYMvB,EAAgBA,KACpBryB,EAAW,IAAIztC,KAgBjB,OACE9L,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQlB,MACtB9f,IAAA6b,cAAA,WACA7b,IAAA6b,cAAC8O,IAAU,KAAC,eAEV3qB,IAAA6b,cAACgG,KAAM,CACL5U,MAAM,UACNqe,KAAK,QACLxJ,QArBUsrD,KAChB,MAAMC,EAAY,CAChB/nE,MAAO,GACPyE,QAAS,GACTmiE,SAAS,EACThxB,OAAQpvC,EAAQ/J,OAAS,EACzBo5B,UACA6wC,SAAU,KACVpwD,SAAU,IAEZ29B,EAAW,IAAIztC,EAASuhE,KAYlBv3C,UAAW91B,IAAA6b,cAACkxD,KAAO,MACnBhkD,MAAO,CAAEmC,WAAY,IACrBtJ,QAAQ,YACT,cAzCe0rD,MACpB,GAAIxhE,EAAQ/J,OAAS,EACnB,OACE/B,IAAA6b,cAAC8vD,GAAkB,CACjBxwC,QAASA,EACTywC,cAAeA,EACf9/D,QAASA,KAuCZwhE,IChTP,MAAM1tD,GAAYC,YAAYnG,IAAK,CACjCoG,KAAM,CACJC,QAAS,OACT0Q,SAAU,QAEZwY,UAAW,CACTzoB,YAAa9G,EAAMuoB,QAAQ,GAC3B5P,KAAM,GAGR2U,WAAY,CACVhe,SAAU,YAGZ8B,eAAgB,CACd7d,MAAO8d,KAAM,KACb/B,SAAU,WACVgC,IAAK,MACLC,KAAM,MACNtK,WAAY,GACZuK,YAAa,IAEf+b,YAAa,CACX/mB,OAAQxG,EAAMuoB,QAAQ,GACtB3R,SAAU,KAEZi9C,cAAe,CACbntD,MAAO,GACPM,OAAQ,OAIN8sD,GAAcrmC,OAAaC,MAAM,CACrCzhC,KAAMwhC,OACHxB,IAAI,EAAG,cACPC,IAAI,GAAI,aACRyB,SAAS,YACZp6B,MAAOk6B,OAAaxB,IAAI,EAAG,cAAcC,IAAI,EAAG,aAAayB,WAC7D59B,gBAAiB09B,SA0YJsmC,OAvYI9xD,IAAiC,IAAhC,KAAE/M,EAAI,QAAEyf,EAAO,QAAE8M,GAASxf,EAC5C,MAAMqF,EAAUpB,KAEV2nB,EAAe,CACnB5hC,KAAM,GACNsH,MAAO,GACPxD,gBAAiB,GACjBL,kBAAmB,GACnB+D,WAAY,GACZC,cAAe,GACfi0B,SAAU,KAGLqsC,EAAsBC,GAA2BzyD,oBAAS,IAC1D1O,EAAOohE,GAAY1yD,mBAASqsB,IAC5BoX,EAAKe,GAAUxkC,mBAAS,IACxB0mD,EAAkBC,GAAuB3mD,oBAAS,GACnD2yD,EAAcr5C,oBACbxrB,EAAc8kE,GAAmB5yD,mBAAS,KAE1C5U,EAAWwzD,GAAgB5+C,mBAAS,CACzC,CAAE6+C,QAAS,gBAAiBC,UAAW,SAAUC,UAAW,QAASC,QAAS,SAC9E,CAAEH,QAAS,iBAAeC,UAAW,UAAWC,UAAW,QAASC,QAAS,SAC7E,CAAEH,QAAS,eAAgBC,UAAW,YAAaC,UAAW,QAASC,QAAS,SAChF,CAAEH,QAAS,eAAgBC,UAAW,WAAYC,UAAW,QAASC,QAAS,SAC/E,CAAEH,QAAS,cAAeC,UAAW,SAAUC,UAAW,QAASC,QAAS,SAC5E,CAAEH,QAAS,YAAUC,UAAW,WAAYC,UAAW,QAASC,QAAS,SACzE,CAAEH,QAAS,UAAWC,UAAW,SAAUC,UAAW,QAASC,QAAS,YAEnE9D,EAAgBC,GAAqBn7C,mBAAS,OAC9C3O,EAAS+pD,GAAcp7C,mBAAS,IAEvCE,oBAAU,KACR,WACE,IACE,MAAM,KAAEvC,SAAee,GAAI0B,IAAI,WAC/Bg7C,EAAWz9C,EAAKtM,SAChB,MAAOiM,GACPD,GAAWC,KALf,IAQC,IAEH4C,oBAAU,KACRxB,GAAI0B,IAAI,aAAaq/B,KAAK/uB,IAAe,IAAd,KAAE/S,GAAM+S,EACjC,GAAI5pB,MAAMyb,QAAQ5E,GAAO,CACvB,MAAMylD,EAAezlD,EAAK8E,KAAMua,GAAgB,iBAAVA,EAAEta,KACpC0gD,GACFuD,EAA2C,UAAvBvD,EAAaviD,WAItC,IAEHX,oBAAU,KACR,WACE,IACE,MAAM,KAAEvC,SAAee,GAAI0B,IAAI,qBAE/BwyD,EAAgBj1D,EAAKk1D,mBACrB,MAAOv1D,GACPD,GAAWC,KANf,IASC,IAEH4C,oBAAU,KACR,WACE,GAAK+f,EACL,IACE,MAAM,KAAEtiB,SAAee,GAAI0B,IAAI,UAADpa,OAAWi6B,IACzCyyC,EAAUtyC,IACD,IAAKA,KAAcziB,KAE5BA,EAAKwoB,SAAWg1B,EAAkBx9C,EAAKwoB,UAAYg1B,EAAkB,MAErEyD,EAAajhD,EAAKvS,WAClB,MAAOkS,GACPD,GAAWC,KAXf,GAeO,KACLo1D,EAAS,CACPjoE,KAAM,GACNsH,MAAO,GACPxD,gBAAiB,GACjBL,kBAAmB,GACnB+D,WAAY,GACZC,cAAe,OAGlB,CAAC+tB,EAASvsB,IAEb,MAAMugB,EAAcA,KAClBd,IACAu/C,EAASrmC,IA2BLkvB,EAAsB1mC,IAC1BsmC,EAAkBtmC,EAAEpO,OAAO5F,QAG7B,OACE/b,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQlB,MACtB9f,IAAA6b,cAAC0S,KAAM,CACLmD,SAAS,KACTb,WAAW,EACXjiB,KAAMA,EACNyf,QAASc,EACTgN,OAAO,SAEPn8B,IAAA6b,cAAC4S,KAAW,KACF,GAAAvtB,OAAPi6B,EACMpjB,KAAKkB,EAAE,yBACPlB,KAAKkB,EAAE,0BAEhBjZ,IAAA6b,cAACglC,KAAI,CACH9kC,MAAO4iC,EACPoC,eAAe,UACfC,UAAU,UACVt/B,SAAUA,CAACg0C,EAAGhY,IAAMgC,EAAOhC,GAC3BlZ,aAAW,yBAEXxkC,IAAA6b,cAAColC,KAAG,CAACnvC,MAAM,kBACV8vD,GAAoB5hE,IAAA6b,cAAColC,KAAG,CAACnvC,MAAM,gCAEzB,IAAR6sC,GACC3+C,IAAA6b,cAACivB,KAAK,KACJ9qC,IAAA6b,cAACisB,KAAM,CACLC,cAAev7B,EACfw7B,oBAAoB,EACpBC,iBAAkBulC,GAClBtlC,SAAUA,CAACC,EAAQ1/B,KACjB7E,WAAW,KA3DDyX,WACtB,IACM8f,QACIvhB,GAAIqnB,IAAI,UAAD//B,OAAWi6B,GAAW,IAC9BgN,EAAQ7hC,YAAW+6B,SAAU+0B,GAAkC,aAG9Dx8C,GAAIoD,KAAK,SAAU,IACpBmrB,EAAQ7hC,YAAW+6B,SAAU+0B,GAAkC,OAGtEp9C,IAAMxT,QAAQ,4BACd2pB,IACA,MAAO3W,GACPD,GAAWC,KA8CCw1D,CAAgB7lC,GAChB1/B,EAAQ4/B,eAAc,IACrB,OAGJ0Q,IAAA,IAAC,QAAEzQ,EAAO,OAAEC,EAAM,aAAEC,EAAY,OAAEL,GAAQ4Q,EAAA,OACzC/4C,IAAA6b,cAAC4sB,KAAI,KACHzoC,IAAA6b,cAAC6S,KAAa,CAACC,UAAQ,GACrB3uB,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,wBACd2vB,WAAS,EACTjjC,KAAK,OACLmT,MAAOwvB,EAAQ3iC,MAAQkvB,QAAQ0T,EAAO5iC,MACtCkjC,WAAYP,EAAQ3iC,MAAQ4iC,EAAO5iC,KACnCic,QAAQ,WACR1B,OAAO,QACPsB,UAAWR,EAAQioB,YAErBjpC,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,yBACdtT,KAAK,QACLgF,GAAG,QACHsjE,QAASA,KACPN,GAAwB,GACxBE,EAAY94C,QAAQqP,SAEtBtrB,MAAOwvB,EAAQr7B,OAAS4nB,QAAQ0T,EAAOt7B,OACvC47B,WAAYP,EAAQr7B,OAASs7B,EAAOt7B,MACpC4uC,WAAY,CACViuB,eACE9pE,IAAA6b,cAACu3C,KAAc,CAACpqC,SAAS,SACvBhpB,IAAA6b,cAAA,OACEkN,MAAO,CAAEnI,gBAAiBunB,EAAOl7B,OACjCuU,UAAWR,EAAQusD,iBAIzBzxB,aACE97C,IAAA6b,cAAC+G,IAAU,CACT0I,KAAK,QACLre,MAAM,UACN6U,QAASA,IAAM6rD,GAAwB,IAEvC3tE,IAAA6b,cAACqyD,KAAQ,QAIftsD,QAAQ,WACR1B,OAAO,QACPsB,UAAWR,EAAQioB,YAErBjpC,IAAA6b,cAACovD,GAAW,CACVr8D,KAAM8+D,EACNv+C,YAAaA,IAAMw+C,GAAwB,GAC3CjsD,SAAWzU,IACTk7B,EAAOl7B,MAAQA,EACf2gE,EAAS,KACA,IAAKzlC,EAAQl7B,cAI1BjN,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,8BACdtT,KAAK,aACLiF,KAAK,aACLkO,MAAOwvB,EAAQn7B,YAAc0nB,QAAQ0T,EAAOp7B,YAC5C07B,WAAYP,EAAQn7B,YAAco7B,EAAOp7B,WACzCyU,QAAQ,WACR1B,OAAO,QACPsB,UAAWR,EAAQmtD,aAErBnuE,IAAA6b,cAAA,WACE7b,IAAA6b,cAACwqB,KAAW,CACVzkB,QAAQ,WACR1B,OAAO,QACPsB,UAAWR,EAAQqlB,YACnBxV,WAAS,GAET7wB,IAAA6b,cAACyqB,KAAU,CAAC37B,GAAG,iCACZoN,KAAKkB,EAAE,kCAEVjZ,IAAA6b,cAAC6sB,KAAK,CACJC,GAAInC,KACJ10B,MAAOiG,KAAKkB,EAAE,iCACdtT,KAAK,gBACLgF,GAAG,gBACH8D,YAAasJ,KAAKkB,EAAE,iCACpB6vB,QAAQ,gCACR/sB,MAAOosB,EAAO/6B,eAAiB,IAE/BpN,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,IAAM,UACtB/S,EAAaoZ,IAAKgsD,GACjBpuE,IAAA6b,cAACiU,IAAQ,CAAClS,IAAKwwD,EAAYzjE,GAAIoR,MAAOqyD,EAAYzjE,IAC/CyjE,EAAYzoE,SAMrB3F,IAAA6b,cAACwqB,KAAW,CACVnmB,OAAO,QACP0B,QAAQ,WACRiP,WAAS,GAET7wB,IAAA6b,cAACyqB,KAAU,KACRvuB,KAAKkB,EAAE,8BAEVjZ,IAAA6b,cAAC2qB,KAAM,CACLsC,QAAQ,6BACRn+B,GAAG,uBACHhF,KAAK,WACLoW,MAAOq6C,GAAkB,GACzB10C,SAAU+0C,EACV3kD,MAAOiG,KAAKkB,EAAE,6BACd4X,WAAS,EACT6V,UAAW,CACTjX,aAAc,CACZC,SAAU,SACVC,WAAY,QAEdC,gBAAiB,CACfF,SAAU,MACVC,WAAY,QAEdH,mBAAoB,OAGrBjjB,EAAQ6V,IAAK9Y,GACZtJ,IAAA6b,cAACiU,IAAQ,CACPlS,IAAKtU,EAAOqB,GACZoR,MAAOzS,EAAOqB,IAEbrB,EAAO3D,UAMlB3F,IAAA6b,cAAA,OAAKkN,MAAO,CAAEpI,UAAW,IACvB3gB,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,mCACdrO,KAAK,kBACLo5C,WAAS,EACT1C,SAAUusB,EACV9pB,KAAM,EACNlzB,WAAS,EACTlrB,KAAK,kBACLmT,MACEwvB,EAAQ7+B,iBACRorB,QAAQ0T,EAAO9+B,iBAEjBo/B,WACEP,EAAQ7+B,iBAAmB8+B,EAAO9+B,gBAEpCmY,QAAQ,WACR1B,OAAO,UAER0hD,GACC5hE,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,qCACdrO,KAAK,oBACLo5C,WAAS,EACT1C,SAAUusB,EACV9pB,KAAM,EACNlzB,WAAS,EACTlrB,KAAK,oBACLmT,MACEwvB,EAAQl/B,mBACRyrB,QAAQ0T,EAAOn/B,mBAEjBy/B,WACEP,EAAQl/B,mBAAqBm/B,EAAOn/B,kBAEtCwY,QAAQ,WACR1B,OAAO,WAIblgB,IAAA6b,cAACqxD,GAAY,CAAC/xC,QAASA,KAEzBn7B,IAAA6b,cAAC+S,KAAa,KACZ5uB,IAAA6b,cAACgG,KAAM,CACLC,QAASqN,EACTliB,MAAM,YACNzG,SAAUgiC,EACV5mB,QAAQ,YAEP7J,KAAKkB,EAAE,8BAEVjZ,IAAA6b,cAACgG,KAAM,CACLjX,KAAK,SACLqC,MAAM,UACNzG,SAAUgiC,EACV5mB,QAAQ,YACRJ,UAAWR,EAAQgmB,YAEX,GAAA9lC,OAAPi6B,EACMpjB,KAAKkB,EAAE,6BACPlB,KAAKkB,EAAE,6BACbuvB,GACCxoC,IAAA6b,cAACwP,KAAgB,CACfC,KAAM,GACN9J,UAAWR,EAAQ8J,uBAU5B,IAAR6zB,GACC3+C,IAAA6b,cAACivB,KAAK,CAAC/hB,MAAO,CAAE6B,QAAS,KACvB5qB,IAAA6b,cAAC+9C,GAAa,CACZ5+C,SAAS,EACTktB,SAvQgB7sB,UAC1BrC,IAAMxT,QAAQ,sDACds0D,EAAa3xB,GACbuX,EAAO,IAqQG3X,cAAezhC,EACfuzD,gBAAgB,kBC/a9B,MAAMj6C,GAAYC,YAAYnG,IAAK,CACjCgwB,UAAW,CACTrX,KAAM,EACNzH,QAASlR,EAAMuoB,QAAQ,GACvB5Q,UAAW,YACR3X,EAAM4X,iBAEXikC,gBAAiB,CACfx1C,QAAS,OACTE,WAAY,SACZ0T,eAAgB,aAIdzZ,GAAUA,CAACC,EAAOC,KACtB,GAAoB,gBAAhBA,EAAOxP,KAAwB,CACjC,MAAMqF,EAASmK,EAAOC,QAChBg0D,EAAY,GAWlB,OATAp+D,EAAO4U,QAASrY,IACd,MAAM8hE,EAAan0D,EAAMzY,UAAW05B,GAAMA,EAAEzwB,KAAO6B,EAAM7B,KACrC,IAAhB2jE,EACFn0D,EAAMm0D,GAAc9hE,EAEpB6hE,EAAU7sE,KAAKgL,KAIZ,IAAI2N,KAAUk0D,GAGvB,GAAoB,kBAAhBj0D,EAAOxP,KAA0B,CACnC,MAAM4B,EAAQ4N,EAAOC,QACfi0D,EAAan0D,EAAMzY,UAAWqjB,GAAMA,EAAEpa,KAAO6B,EAAM7B,IAEzD,OAAoB,IAAhB2jE,GACFn0D,EAAMm0D,GAAc9hE,EACb,IAAI2N,IAEJ,CAAC3N,KAAU2N,GAItB,GAAoB,iBAAhBC,EAAOxP,KAAyB,CAClC,MAAMuwB,EAAU/gB,EAAOC,QACjBi0D,EAAan0D,EAAMzY,UAAW05B,GAAMA,EAAEzwB,KAAOwwB,GAInD,OAHoB,IAAhBmzC,GACFn0D,EAAMvY,OAAO0sE,EAAY,GAEpB,IAAIn0D,GAGb,GAAoB,UAAhBC,EAAOxP,KACT,MAAO,IA6MI2jE,OAzMAA,KACb,MAAMvtD,EAAUpB,MAET3P,EAAQ6K,GAAYC,qBAAWb,GAAS,KACxCc,EAASC,GAAcC,oBAAS,IAEhCszD,EAAgBC,GAAqBvzD,oBAAS,IAC9Cy+B,EAAeC,GAAoB1+B,mBAAS,OAC5Cg9C,EAAkBC,GAAuBj9C,oBAAS,GAEnD7a,EAAgB8a,qBAAWlW,GAEjCmW,oBAAU,KACR,WACEH,GAAW,GACX,IACE,MAAM,KAAEpC,SAAee,GAAI0B,IAAI,UAC/BR,EAAS,CAAElQ,KAAM,cAAeyP,QAASxB,IAEzCoC,GAAW,GACX,MAAOzC,GACPD,GAAWC,GACXyC,GAAW,KATf,IAYC,IAEHG,oBAAU,KACR,MAAMxY,EAAYG,aAAaC,QAAQ,aACjC8B,EAASzE,EAAcsC,UAAUC,GAYvC,OAVAkC,EAAOnE,GAAG,WAADO,OAAY0B,EAAS,UAAWiW,IACnB,WAAhBA,EAAKuB,QAAuC,WAAhBvB,EAAKuB,QACnCU,EAAS,CAAElQ,KAAM,gBAAiByP,QAASxB,EAAKrM,QAG9B,WAAhBqM,EAAKuB,QACPU,EAAS,CAAElQ,KAAM,eAAgByP,QAASxB,EAAKsiB,YAI5C,KACLr2B,EAAOzC,eAER,CAAChC,IAgCJ,OACEL,IAAA6b,cAACs5C,GAAa,KACZn1D,IAAA6b,cAACuS,GAAiB,CAChB9oB,MACEq0C,GAAa,GAAAz4C,OACV6W,KAAKkB,EAAE,wCAAuC,KAAA/X,OAC/Cy4C,EAAch0C,KAAI,KAGtBiJ,KAAMspD,EACN7pC,QAzB+BqgD,KACnCvW,GAAoB,GACpBve,EAAiB,OAwBbtrB,UAAWA,IArBSjT,WACxB,UACQzB,GAAIlT,OAAO,UAADxF,OAAWi6B,IAC3BniB,IAAMxT,QAAQuS,KAAKkB,EAAE,gCACrB,MAAOT,GACPD,GAAWC,GAEbohC,EAAiB,OAcI+0B,CAAkBh1B,EAAchvC,KAEhDoN,KAAKkB,EAAE,2CAEVjZ,IAAA6b,cAAC4xD,GAAU,CACT7+D,KAAM4/D,EACNngD,QA1CwBugD,KAC5BH,GAAkB,GAClB70B,EAAiB,OAyCbze,QAAsB,OAAbwe,QAAa,IAAbA,OAAa,EAAbA,EAAehvC,KAE1B3K,IAAA6b,cAACw5C,GAAU,KACTr1D,IAAA6b,cAAC61B,GAAK,KAAE35B,KAAKkB,EAAE,iBACfjZ,IAAA6b,cAACy5C,GAAwB,KACvBt1D,IAAA6b,cAACgG,KAAM,CACLD,QAAQ,YACR3U,MAAM,UACN6U,QAxDmB+sD,KAC3BJ,GAAkB,GAClB70B,EAAiB,QAwDR7hC,KAAKkB,EAAE,yBAIdjZ,IAAA6b,cAACivB,KAAK,CAACtpB,UAAWR,EAAQ0oB,UAAW9nB,QAAQ,YAC3C5hB,IAAA6b,cAACm0B,KAAK,CAAC1kB,KAAK,SACVtrB,IAAA6b,cAACo0B,KAAS,KACRjwC,IAAA6b,cAACq0B,KAAQ,KACflwC,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACNr4B,KAAKkB,EAAE,oBAEVjZ,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACdr4B,KAAKkB,EAAE,sBAEVjZ,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACdr4B,KAAKkB,EAAE,uBAEVjZ,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACdr4B,KAAKkB,EAAE,4BAEVjZ,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACdr4B,KAAKkB,EAAE,0BAEVjZ,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACdr4B,KAAKkB,EAAE,2BAIdjZ,IAAA6b,cAACw0B,KAAS,KACRrwC,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACG3Y,EAAOmS,IAAK5V,GACXxM,IAAA6b,cAACq0B,KAAQ,CAACtyB,IAAKpR,EAAM7B,IACjC3K,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAAU5jC,EAAM7B,IACnB3K,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAAU5jC,EAAM7G,MACjC3F,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACfpwC,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQu0C,iBACtBv1D,IAAA6b,cAAA,QACEkN,MAAO,CACLnI,gBAAiBpU,EAAMS,MACvBmT,MAAO,GACPM,OAAQ,GACRmR,UAAW,cAKnB7xB,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACfpwC,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQu0C,iBACtBv1D,IAAA6b,cAAC8O,IAAU,CACT5B,MAAO,CAAE3I,MAAO,IAAKgwB,MAAO,UAC5BnX,QAAM,EACNrX,QAAQ,SAEPpV,EAAMW,cAIbnN,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACfpwC,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQu0C,iBACtBv1D,IAAA6b,cAAC8O,IAAU,CACT5B,MAAO,CAAE3I,MAAO,IAAKgwB,MAAO,UAC5BnX,QAAM,EACNrX,QAAQ,SAEPpV,EAAM/C,mBAIbzJ,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACfpwC,IAAA6b,cAAC+G,IAAU,CACT0I,KAAK,QACLxJ,QAASA,IAvHJtV,KACvBotC,EAAiBptC,GACjBiiE,GAAkB,IAqHeK,CAAgBtiE,IAE/BxM,IAAA6b,cAAC29C,KAAI,OAGPx5D,IAAA6b,cAAC+G,IAAU,CACT0I,KAAK,QACLxJ,QAASA,KACP83B,EAAiBptC,GACjB2rD,GAAoB,KAGtBn4D,IAAA6b,cAACozC,KAAa,UAKrBj0C,GAAWhb,IAAA6b,cAAC25C,GAAgB,CAACC,QAAS,U,WCxPrD,MAAM71C,GAAYC,YAAWnG,IAAK,CACjCoG,KAAM,CACLC,QAAS,OACT0Q,SAAU,QAEXsW,cAAe,CACdhnB,QAAS,OACT,yBAA0B,CACzBS,YAAa9G,EAAMuoB,QAAQ,KAI7B+E,WAAY,CACXhe,SAAU,YAGX8B,eAAgB,CACf7d,MAAO8d,KAAM,KACb/B,SAAU,WACVgC,IAAK,MACLC,KAAM,MACNtK,WAAY,GACZuK,YAAa,IAEd+b,YAAa,CACZ/mB,OAAQxG,EAAMuoB,QAAQ,GACtB3R,SAAU,KAEXi9C,cAAe,CACdntD,MAAO,GACPM,OAAQ,OAIJquD,GAAY5nC,OAAaC,MAAM,CACpCzhC,KAAMwhC,OACJxB,IAAI,EAAG,wBACP0B,SAAS,oBAyMG2nC,OAtMErzD,IAAuC,IAAtC,KAAE/M,EAAI,QAAEyf,EAAO,MAAE4gD,EAAK,OAAElrE,GAAQ4X,EACjD,MAAMqF,EAAUpB,MACV,KAAE9O,GAASqK,qBAAWyD,KACrB8uD,EAAsBC,GAA2BzyD,oBAAS,GAE3DqsB,EAAe,CACpB5hC,KAAM,GACNsH,MAAO,GACPiiE,OAAQ,IAGFtzC,EAAKiD,GAAU3jB,mBAASqsB,IACvB2nC,EAAQC,GAAaj0D,mBAAS,GAEtCE,oBAAU,KACT,IACC,WACC,IAAK6zD,EAAO,OAEZ,MAAM,KAAEp2D,SAAee,GAAI0B,IAAI,SAADpa,OAAU+tE,IACxCE,EAAUt2D,EAAKq2D,QACfrwC,EAAOvD,IACC,IAAKA,KAAcziB,MAN5B,GASC,MAAOL,GACRD,GAAWC,KAEV,CAACy2D,EAAOrgE,IAEX,MAAMugB,EAAcA,KACnB0P,EAAO0I,GACPomC,GAAwB,GACxBt/C,KAGK+gD,EAAsBr/C,IAC3Bo/C,EAAWp/C,EAAEpO,OAAOw7B,QAAU,EAAI,IAqBnC,OACCn9C,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQlB,MACvB9f,IAAA6b,cAAC0S,KAAM,CACN3f,KAAMA,EACNyf,QAASc,EACTuC,SAAS,KACTb,WAAS,EACTsL,OAAO,SAEPn8B,IAAA6b,cAAC4S,KAAW,CAAC9jB,GAAG,qBACR,GAAAzJ,OAAL+tE,EAAWl3D,KAAKkB,EAAE,uBAA8BlB,KAAKkB,EAAE,wBAE1DjZ,IAAA6b,cAACisB,KAAM,CACNC,cAAenM,EACfoM,oBAAoB,EACpBC,iBAAkB8mC,GAClB7mC,SAAUA,CAACC,EAAQ1/B,KAClB7E,WAAW,KAnCMyX,WACrB,MAAMg0D,EAAU,IAAKlnC,EAAQrlC,OAAQgO,EAAKnG,GAAIukE,UAC9C,IACKD,QACGr1D,GAAIqnB,IAAI,SAAD//B,OAAU+tE,GAASI,SAE1Bz1D,GAAIoD,KAAK,QAASqyD,GAEzBr2D,IAAMxT,QAAQuS,KAAKkB,EAAE,qBACA,mBAAVlV,GACVA,IAEA,MAAOyU,GACRD,GAAWC,GAEZ2W,KAqBKmgD,CAAcnnC,GACd1/B,EAAQ4/B,eAAc,IACpB,OAGHzc,IAAA,IAAC,QAAE0c,EAAO,OAAEC,EAAM,aAAEC,EAAY,OAAEL,GAAQvc,EAAA,OAC1C5rB,IAAA6b,cAAC4sB,KAAI,KACJzoC,IAAA6b,cAAC6S,KAAa,CAACC,UAAQ,GACtB3uB,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQ+lB,eACvB/mC,IAAA6b,cAAC6sB,KAAK,CACLC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,sBACdtT,KAAK,OACLmT,MAAOwvB,EAAQ3iC,MAAQkvB,QAAQ0T,EAAO5iC,MACtCkjC,WAAYP,EAAQ3iC,MAAQ4iC,EAAO5iC,KACnCic,QAAQ,WACR1B,OAAO,QACPwB,SAAWqO,GAAM8O,EAAOxV,IAAI,IAAUA,EAAM1jB,KAAMoqB,EAAEpO,OAAO5F,SAC3D8U,WAAS,KAGX7wB,IAAA6b,cAAA,WACA7b,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQ+lB,eACvB/mC,IAAA6b,cAAC6sB,KAAK,CACLC,GAAIlnB,KACJoP,WAAS,EACT/e,MAAOiG,KAAKkB,EAAE,uBACdtT,KAAK,QACLgF,GAAG,QACHmO,MAAOwvB,EAAQr7B,OAAS4nB,QAAQ0T,EAAOt7B,OACvC47B,WAAYP,EAAQr7B,OAASs7B,EAAOt7B,MACpC4uC,WAAY,CACXiuB,eACC9pE,IAAA6b,cAACu3C,KAAc,CAACpqC,SAAS,SACxBhpB,IAAA6b,cAAA,OACCkN,MAAO,CAAEnI,gBAAiBunB,EAAOl7B,OACjCuU,UAAWR,EAAQusD,iBAItBzxB,aACC97C,IAAA6b,cAAC+G,IAAU,CACV0I,KAAK,QACLre,MAAM,UACN6U,QAASA,IAAM6rD,GAAyBD,IAExC1tE,IAAA6b,cAACqyD,KAAQ,QAIZtsD,QAAQ,WACR1B,OAAO,YAGU,UAAjBpP,EAAKxD,SAAwC,eAAjBwD,EAAKxD,UACXtN,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACxB5oB,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQ+lB,eACjB/mC,IAAA6b,cAAC2lC,KAAgB,CACdE,QACE1hD,IAAA6b,cAACqhC,KAAQ,CACPC,QAAoB,IAAX+xB,EACTxtD,SAAU0tD,EACTrzD,MAAOmzD,EACPjiE,MAAM,YAGX6E,MAAM,SACN2vC,eAAe,WAGpBzhD,IAAA6b,cAAA,YAGJ6xD,GACA1tE,IAAA6b,cAAA,WACC7b,IAAA6b,cAAC0zD,KAAQ,CACRC,cAAc,EACdC,aAAa,EACb1mD,MAAO,CAAE7I,OAAQ,eACjBnE,MAAO6f,EAAI3uB,MACXyU,SAAUogC,IACTjjB,EAAOxV,IAAI,IAAUA,EAAMpc,MAAM,IAAD/L,OAAM4gD,EAAI0pB,aAM/CxrE,IAAA6b,cAAC+S,KAAa,KACb5uB,IAAA6b,cAACgG,KAAM,CACNC,QAASqN,EACTliB,MAAM,YACNzG,SAAUgiC,EACV5mB,QAAQ,YAEP7J,KAAKkB,EAAE,4BAETjZ,IAAA6b,cAACgG,KAAM,CACNjX,KAAK,SACLqC,MAAM,UACNzG,SAAUgiC,EACV5mB,QAAQ,YACRJ,UAAWR,EAAQgmB,YAEb,GAAA9lC,OAAL+tE,EACKl3D,KAAKkB,EAAE,2BACPlB,KAAKkB,EAAE,2BACZuvB,GACAxoC,IAAA6b,cAACwP,KAAgB,CAChBC,KAAM,GACN9J,UAAWR,EAAQ8J,yBCvN9B,MAAM5Q,GAAUA,CAACC,EAAOC,KACtB,GAAoB,cAAhBA,EAAOxP,KAAsB,CAC/B,MAAMsF,EAAOkK,EAAOC,QACdq1D,EAAU,GAWhB,OATAx/D,EAAK2U,QAAS+W,IACZ,MAAM+zC,EAAWx1D,EAAMzY,UAAW8Y,GAAMA,EAAE7P,KAAOixB,EAAIjxB,KACnC,IAAdglE,EACFx1D,EAAMw1D,GAAY/zC,EAElB8zC,EAAQluE,KAAKo6B,KAIV,IAAIzhB,KAAUu1D,GAGvB,GAAoB,gBAAhBt1D,EAAOxP,KAAwB,CACjC,MAAMgxB,EAAMxhB,EAAOC,QACbs1D,EAAWx1D,EAAMzY,UAAW8Y,GAAMA,EAAE7P,KAAOixB,EAAIjxB,IAErD,OAAkB,IAAdglE,GACFx1D,EAAMw1D,GAAY/zC,EACX,IAAIzhB,IAEJ,CAACyhB,KAAQzhB,GAIpB,GAAoB,eAAhBC,EAAOxP,KAAuB,CAChC,MAAMqkE,EAAQ70D,EAAOC,QAEfs1D,EAAWx1D,EAAMzY,UAAW8Y,GAAMA,EAAE7P,KAAOskE,GAIjD,OAHkB,IAAdU,GACFx1D,EAAMvY,OAAO+tE,EAAU,GAElB,IAAIx1D,GAGb,GAAoB,UAAhBC,EAAOxP,KACT,MAAO,IAILgV,GAAYC,YAAYnG,IAAK,CACjCgwB,UAAW,CACTrX,KAAM,EACNzH,QAASlR,EAAMuoB,QAAQ,GACvB5Q,UAAW,YACR3X,EAAM4X,oBAsNEs+C,OAlNFA,KACX,MAAM5uD,EAAUpB,MAEV,KAAE9O,GAASqK,qBAAWyD,KAErB5D,EAASC,GAAcC,oBAAS,IAChCsL,EAAYC,GAAiBvL,mBAAS,IACtCmZ,EAASC,GAAcpZ,oBAAS,IAChC20D,EAAaC,GAAkB50D,mBAAS,OACxC60D,EAAaC,GAAkB90D,mBAAS,OACxCg9C,EAAkBC,GAAuBj9C,oBAAS,IAClDwL,EAAa8yB,GAAkBt+B,mBAAS,KACxChL,EAAM4K,GAAYC,qBAAWb,GAAS,KACtC+1D,EAAcC,GAAmBh1D,oBAAS,GAE3Ci1D,EAAY1X,sBAAYp9C,UAC5B,IACE,MAAM,KAAExC,SAAee,GAAI0B,IAAI,SAAU,CACvCla,OAAQ,CAAEslB,cAAaF,gBAEzB1L,EAAS,CAAElQ,KAAM,YAAayP,QAASxB,EAAK3I,OAC5CokB,EAAWzb,EAAKwb,SAChBpZ,GAAW,GACX,MAAOzC,GACPD,GAAWC,KAEZ,CAACkO,EAAaF,IAEXnmB,EAAgB8a,qBAAWlW,GAEjCmW,oBAAU,KACRN,EAAS,CAAElQ,KAAM,UACjB6b,EAAc,IACb,CAACC,IAEJtL,oBAAU,KACRH,GAAW,GACX,MAAMuM,EAAkB5jB,WAAW,KACjCusE,KACC,KACH,MAAO,IAAMzoD,aAAaF,IACzB,CAACd,EAAaF,EAAY2pD,IAE7B/0D,oBAAU,KACR,MAAMtW,EAASzE,EAAcsC,UAAUmO,EAAKlO,WAY5C,OAVAkC,EAAOnE,GAAG,OAASkY,IACG,WAAhBA,EAAKuB,QAAuC,WAAhBvB,EAAKuB,QACnCU,EAAS,CAAElQ,KAAM,cAAeyP,QAASxB,EAAK3I,OAG5B,WAAhB2I,EAAKuB,QACPU,EAAS,CAAElQ,KAAM,cAAeyP,SAAUxB,EAAKo2D,UAI5C,KACLnqE,EAAOzC,eAER,CAAChC,EAAeyQ,IAiDrB,OACI9Q,IAAA6b,cAACs5C,GAAa,KACZn1D,IAAA6b,cAACuS,GAAiB,CAChB9oB,MAAOyqE,GAAW,GAAA7uE,OAAO6W,KAAKkB,EAAE,uCAChCrK,KAAMspD,EACN7pC,QAAS8pC,EACT7pC,UAAWA,IAlCOjT,WACtB,UACQzB,GAAIlT,OAAO,SAADxF,OAAU+tE,IAC1Bj2D,IAAMxT,QAAQuS,KAAKkB,EAAE,wBACrB,MAAOT,GACPD,GAAWC,GAEbw3D,EAAe,MACfx2B,EAAe,IACf/yB,EAAc,GAEd3L,EAAS,CAAElQ,KAAM,UACjB6b,EAAc,SACR0pD,KAqBeC,CAAgBL,EAAYplE,KAE5CoN,KAAKkB,EAAE,yCAEVjZ,IAAA6b,cAACmzD,GAAQ,CACPpgE,KAAMqhE,EACN5hD,QAtDsBgiD,KAC1BP,EAAe,MACfI,GAAgB,IAqDZnsE,OAAQosE,EACR3hD,kBAAgB,oBAChBygD,MAAOY,GAAeA,EAAYllE,KAEpC3K,IAAA6b,cAACw5C,GAAU,KACTr1D,IAAA6b,cAAC61B,GAAK,KAAE35B,KAAKkB,EAAE,eACfjZ,IAAA6b,cAACy5C,GAAwB,KACvBt1D,IAAA6b,cAAC4F,KAAS,CACRhT,YAAasJ,KAAKkB,EAAE,8BACpBrO,KAAK,SACLmR,MAAO2K,EACPhF,SA7DYvgB,IACpBq4C,EAAer4C,EAAMwgB,OAAO5F,MAAMsiC,gBA6D1BxC,WAAY,CACViuB,eACE9pE,IAAA6b,cAACu3C,KAAc,CAACpqC,SAAS,SACvBhpB,IAAA6b,cAACulC,KAAU,CAACr4B,MAAO,CAAE9b,MAAO,cAKpCjN,IAAA6b,cAACgG,KAAM,CACLD,QAAQ,YACR3U,MAAM,UACN6U,QAnFiBwuD,KACzBR,EAAe,MACfI,GAAgB,KAmFPn4D,KAAKkB,EAAE,uBAIdjZ,IAAA6b,cAACivB,KAAK,CACJtpB,UAAWR,EAAQ0oB,UACnB9nB,QAAQ,WACRwV,SArDgBrH,IACpB,IAAKsE,GAAWrZ,EAAS,OACzB,MAAM,UAAEqc,EAAS,aAAE0T,EAAY,aAAEC,GAAiBjb,EAAEqF,cAChD2V,GAAgB1T,EAAY,KAAO2T,GANvCvkB,EAAe6U,GAAcA,EAAY,KA0DrCt7B,IAAA6b,cAACm0B,KAAK,CAAC1kB,KAAK,SACVtrB,IAAA6b,cAACo0B,KAAS,KACRjwC,IAAA6b,cAACq0B,KAAQ,KACPlwC,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAAUr4B,KAAKkB,EAAE,oBAClCjZ,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACdr4B,KAAKkB,EAAE,uBAEVjZ,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACdr4B,KAAKkB,EAAE,yBAIdjZ,IAAA6b,cAACw0B,KAAS,KACRrwC,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACG1Y,EAAKkS,IAAKwZ,GACT57B,IAAA6b,cAACq0B,KAAQ,CAACtyB,IAAKge,EAAIjxB,IACjB3K,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACfpwC,IAAA6b,cAACirB,KAAI,CACHllB,QAAQ,WACRmH,MAAO,CACLnI,gBAAiBgb,EAAI3uB,MACrB6wC,WAAY,mBACZ7wC,MAAO,SAET6E,MAAO8pB,EAAIj2B,KACX2lB,KAAK,WAGTtrB,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAAUxU,EAAIygB,cAC/Br8C,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACfpwC,IAAA6b,cAAC+G,IAAU,CAAC0I,KAAK,QAAQxJ,QAASA,IA9G7B8Z,KACrBk0C,EAAel0C,GACfs0C,GAAgB,IA4GwCK,CAAc30C,IACpD57B,IAAA6b,cAACiH,KAAQ,OAGX9iB,IAAA6b,cAAC+G,IAAU,CACT0I,KAAK,QACLxJ,QAAUiO,IACRooC,GAAoB,GACpB6X,EAAep0C,KAGjB57B,IAAA6b,cAACo9B,KAAiB,UAKzBj+B,GAAWhb,IAAA6b,cAAC25C,GAAgB,CAACC,QAAS,UCxRrD,MAAM71C,GAAYC,YAAYnG,IAAK,CACjCgwB,UAAW,CACTrX,KAAM,EACNzH,QAASlR,EAAMuoB,QAAQ,GACvBjQ,cAAe,KAEjBw+C,WAAY,CACV7vD,UAAWjH,EAAMuoB,QAAQ,IAE3BwuC,cAAe,CACb7lD,QAASlR,EAAMuoB,QAAQ,IAEzByuC,cAAe,CACbh/C,SAAU,KAEZqpC,UAAW,CACT7xC,UAAW,YAsTAynD,OAlTKA,KAClB,MAAM3vD,EAAUpB,KACV3D,EAAUC,wBAET00D,GAAwB11D,mBAAS,CAAE9X,MAAO,GAAIwJ,OAAQ,GAAIe,KAAM,MAChEkjE,GAAyB31D,mBAAS,CAAE9X,MAAO,GAAIwJ,OAAQ,GAAIs9C,OAAQ,MACnEiE,EAAM2iB,GAAW51D,mBAAS,KAE3B,eAAEsI,GAAmBP,KAE3B7H,oBAAU,MACRC,iBACE,MAAMzY,EAAYG,aAAaC,QAAQ,oBACbwgB,OAAe/J,EAAW7W,IACnCoE,KAAKsgB,iBACpBtO,IAAMF,MAAM,oGACZlV,WAAW,KACTqY,EAAQza,KAAK,MACZ,MAGP+lB,IAEC,IAmMH,OACEvnB,IAAA6b,cAACivB,KAAK,CACJtpB,UAAWR,EAAQ0oB,UACnB3gB,MAAO,CAACmC,WAAY,OAEpBtJ,QAAQ,YAER5hB,IAAA6b,cAAC8O,IAAU,CAAC/I,QAAQ,MAAK,8CAGzB5hB,IAAA6b,cAAC8O,IAAU,CAAC/I,QAAQ,KAAK3U,MAAM,UAAUuU,UAAWR,EAAQyvD,eAAe,uBAG3EzwE,IAAA6b,cAAC8O,IAAU,CAACjG,UAAU,OACpB1kB,IAAA6b,cAAA,UACE7b,IAAA6b,cAAA,UAAI,sBACJ7b,IAAA6b,cAAA,UAAI,wBAGR7b,IAAA6b,cAAC8O,IAAU,CAAC/I,QAAQ,KAAK3U,MAAM,UAAUuU,UAAWR,EAAQyvD,eAAe,oBAG3EzwE,IAAA6b,cAAC8O,IAAU,CAACnJ,UAAWR,EAAQyvD,cAAe/rD,UAAU,OACtD1kB,IAAA6b,cAAA,SAAG,iCAA2B7b,IAAA6b,cAAA,WAC9B7b,IAAA6b,cAAA,UACE7b,IAAA6b,cAAA,UAAI,4HAA0G7b,IAAA6b,cAAA,WAAM,mIACpH7b,IAAA6b,cAAA,UAAI,kGAEF7b,IAAA6b,cAAA,UACE7b,IAAA6b,cAAA,UAAI,wBACJ7b,IAAA6b,cAAA,UAAI,OACJ7b,IAAA6b,cAAA,UAAI,iBAKZ7b,IAAA6b,cAAC8O,IAAU,CAAC/I,QAAQ,KAAK3U,MAAM,UAAUuU,UAAWR,EAAQyvD,eAAe,yBAG3EzwE,IAAA6b,cAACupB,KAAI,CAACC,WAAS,GACbrlC,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GAAI4R,GAAI,GACrBp3C,IAAA6b,cAAC8O,IAAU,CAACnJ,UAAWR,EAAQyvD,cAAe/rD,UAAU,OACtD1kB,IAAA6b,cAAA,SAAG,gGACH7b,IAAA6b,cAAA,SAAG,cAAc,IA3OlB5X,qDA2OkC,IAACjE,IAAA6b,cAAA,WAClC7b,IAAA6b,cAAA,SAAG,eAAY,SAAM7b,IAAA6b,cAAA,WACrB7b,IAAA6b,cAAA,SAAG,aAAa,mEAAgE7b,IAAA6b,cAAA,WAChF7b,IAAA6b,cAAA,SAAG,UAAU,IAAE,0DAGnB7b,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GAAI4R,GAAI,GACrBp3C,IAAA6b,cAAC8O,IAAU,CAACnJ,UAAWR,EAAQyvD,eAC7BzwE,IAAA6b,cAAA,SAAG,mBArMT7b,IAAA6b,cAACisB,KAAM,CACLC,cAAe6oC,EACf5oC,oBAAoB,EACpBE,SAAUA,CAACC,EAAQ1/B,KACjB7E,WAAWyX,eA/CWA,WAC5B,MAAM,OAAEzO,EAAM,KAAEe,GAASw6B,EACnBtvB,EAAO,CAAEjM,SAAQe,QACvB,UACQkM,KAAM0C,QAAQ,CAClB4G,IARGlf,qDASHmf,OAAQ,OACRvK,OACA4D,QAAS,CACP,eAAgB,mBAChB,cAAgB,UAADvb,OAAYinC,EAAO/kC,UAGtC4V,IAAMxT,QAAQ,gCACd,MAAOgT,GACPD,GAAWC,KAiCCu4D,CAAsB5oC,GAC5B1/B,EAAQ4/B,eAAc,GACtB5/B,EAAQ+yD,aACP,MAELh6C,UAAWR,EAAQyvD,eAElB90D,IAAA,IAAC,aAAE6sB,GAAc7sB,EAAA,OAChB3b,IAAA6b,cAAC4sB,KAAI,CAACjnB,UAAWR,EAAQ0vD,eACvB1wE,IAAA6b,cAACupB,KAAI,CAACC,WAAS,EAACpD,QAAS,GACvBjiC,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GAAI6R,GAAI,GACrBr3C,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,iCACdtT,KAAK,QACLijC,WAAS,EACThnB,QAAQ,WACR1B,OAAO,QACP2Q,WAAS,EACTrP,UAAWR,EAAQioB,UACnB5B,UAAQ,KAGZrnC,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GAAI6R,GAAI,GACrBr3C,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,kCACdtT,KAAK,SACLijC,WAAS,EACThnB,QAAQ,WACR1B,OAAO,QACP2Q,WAAS,EACTrP,UAAWR,EAAQioB,UACnB5B,UAAQ,KAGZrnC,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,IACbxlC,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,gCACdtT,KAAK,OACLijC,WAAS,EACThnB,QAAQ,WACR1B,OAAO,QACP2Q,WAAS,EACTrP,UAAWR,EAAQioB,UACnB5B,UAAQ,KAGZrnC,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GAAIhkB,UAAWR,EAAQ+5C,WACpC/6D,IAAA6b,cAACgG,KAAM,CACLjX,KAAK,SACLqC,MAAM,UACN2U,QAAQ,YACRJ,UAAWR,EAAQgmB,YAElBwB,EACCxoC,IAAA6b,cAACwP,KAAgB,CACfC,KAAM,GACN9J,UAAWR,EAAQ8J,iBAEnB,iBAwIhB9qB,IAAA6b,cAAC8O,IAAU,CAAC/I,QAAQ,KAAK3U,MAAM,UAAUuU,UAAWR,EAAQyvD,eAAe,yBAG3EzwE,IAAA6b,cAACupB,KAAI,CAACC,WAAS,GACbrlC,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GAAI4R,GAAI,GACrBp3C,IAAA6b,cAAC8O,IAAU,CAACnJ,UAAWR,EAAQyvD,cAAe/rD,UAAU,OACtD1kB,IAAA6b,cAAA,SAAG,gGACH7b,IAAA6b,cAAA,SAAG,cAAc,IA/PlB5X,qDA+PkC,IAACjE,IAAA6b,cAAA,WAClC7b,IAAA6b,cAAA,SAAG,eAAY,SAAM7b,IAAA6b,cAAA,WACrB7b,IAAA6b,cAAA,SAAG,aAAa,sEAAmE7b,IAAA6b,cAAA,WACnF7b,IAAA6b,cAAA,SAAG,cAAc,IAAC7b,IAAA6b,cAAA,WAClB7b,IAAA6b,cAAA,UACE7b,IAAA6b,cAAA,UACE7b,IAAA6b,cAAA,SAAG,YAAY,kBAEjB7b,IAAA6b,cAAA,UACE7b,IAAA6b,cAAA,SAAG,YAAY,eAKvB7b,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GAAI4R,GAAI,GACrBp3C,IAAA6b,cAAC8O,IAAU,CAACnJ,UAAWR,EAAQyvD,eAC7BzwE,IAAA6b,cAAA,SAAG,mBAnJT7b,IAAA6b,cAACisB,KAAM,CACLC,cAAe8oC,EACf7oC,oBAAoB,EACpBE,SAAUA,CAACC,EAAQ1/B,KACjB7E,WAAWyX,eA1GYA,WAC7B,IACE,MAAM21D,EAAY7iB,EAAK,GACjBt1C,EAAO,IAAIsyC,SACjBtyC,EAAKwyC,OAAO,SAAUljB,EAAOv7B,QAC7BiM,EAAKwyC,OAAO,OAAQ2lB,EAAUrrE,MAC9BkT,EAAKwyC,OAAO,SAAU2lB,SAChBn3D,KAAM0C,QAAQ,CAClB4G,IA9BGlf,qDA+BHmf,OAAQ,OACRvK,OACA4D,QAAS,CACP,eAAgB,sBAChB,cAAgB,UAADvb,OAAYinC,EAAO/kC,UAGtC4V,IAAMxT,QAAQ,gCACd,MAAOgT,GACPD,GAAWC,KAyFCy4D,CAAuB9oC,GAC7B1/B,EAAQ4/B,eAAc,GACtB5/B,EAAQ+yD,YACRlkC,SAASC,eAAe,UAAU7mB,MAAQ,KAC1C4mB,SAASC,eAAe,UAAUxb,MAAQ,MACzC,MAELyF,UAAWR,EAAQyvD,eAElB7kD,IAAA,IAAC,aAAE4c,GAAc5c,EAAA,OAChB5rB,IAAA6b,cAAC4sB,KAAI,CAACjnB,UAAWR,EAAQ0vD,eACvB1wE,IAAA6b,cAACupB,KAAI,CAACC,WAAS,EAACpD,QAAS,GACvBjiC,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GAAI6R,GAAI,GACrBr3C,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,kCACdtT,KAAK,QACLijC,WAAS,EACThnB,QAAQ,WACR1B,OAAO,QACP2Q,WAAS,EACTrP,UAAWR,EAAQioB,UACnB5B,UAAQ,KAGZrnC,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GAAI6R,GAAI,GACrBr3C,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,mCACdtT,KAAK,SACLijC,WAAS,EACThnB,QAAQ,WACR1B,OAAO,QACP2Q,WAAS,EACTrP,UAAWR,EAAQioB,UACnB5B,UAAQ,KAGZrnC,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,IACbxlC,IAAA6b,cAAA,SAAOjR,KAAK,OAAOjF,KAAK,SAASgF,GAAG,SAAS08B,UAAQ,EAAC3lB,SAAWqO,GAAM+gD,EAAQ/gD,EAAEpO,OAAOjR,UAE1F1Q,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GAAIhkB,UAAWR,EAAQ+5C,WACpC/6D,IAAA6b,cAACgG,KAAM,CACLjX,KAAK,SACLqC,MAAM,UACN2U,QAAQ,YACRJ,UAAWR,EAAQgmB,YAElBwB,EACCxoC,IAAA6b,cAACwP,KAAgB,CACfC,KAAM,GACN9J,UAAWR,EAAQ8J,iBAEnB,mB,WCzOtB,MAAMlL,GAAYC,YAAWnG,IAAK,CAChCw3D,mBAAoB,CAClB7/C,UAAW,OACX0Q,UAAW,uBAEb2H,UAAW,CACTtpB,MAAO,OACPL,QAAS,OACToxD,oBAAqB,uCACrBC,IAAK13D,EAAMuoB,QAAQ,GACnBrX,QAASlR,EAAMuoB,QAAQ,GACvB5hB,aAAc3G,EAAMuoB,QAAQ,IAE9BovC,UAAW,CACTroD,SAAU,WACV5I,MAAO,OACP4Q,UAAW,QACXpG,QAASlR,EAAMuoB,QAAQ,GACvBhQ,UAAWvY,EAAM43D,QAAQ,GACzBzwD,aAAcnH,EAAMuoB,QAAQ,GAC5B9H,OAAQ,UACRpa,QAAS,OACTC,cAAe,SACf2T,eAAgB,gBAChBjC,SAAU,SAEZ6/C,WAAY,CACVh3C,WAAY,kCACZ,UAAW,CACToD,UAAW,cACX1L,UAAU,UACVhlB,MAAOyM,EAAM8f,QAAQhX,QAAQqpB,OAGjC2lC,eAAgB,CACdpxD,MAAO,OACPM,OAAQ,oBACRqM,UAAW,QACXlM,aAAa,GAAD3f,OAAKwY,EAAMuoB,QAAQ,GAAE,OAAA/gC,OAAMwY,EAAMuoB,QAAQ,GAAE,WAEzDwvC,WAAY,CACV9wD,UAAWjH,EAAMuoB,QAAQ,GACzB5P,KAAM,GAERq/C,iBAAkB,CAChB3vC,UAAW,QACXhR,SAAU,UAEZ4gD,WAAY,CACV5xD,QAAS,OACTE,WAAY,SACZ0T,eAAgB,UAElBi+C,kBAAmB,CACjBC,QAAS,OACTzxD,MAAO,MACPsR,SAAU,KACVogD,YAAa,OACb9oD,SAAU,WACVpI,gBAAiB,QACjBC,aAAcnH,EAAMuoB,QAAQ,GAC5BlR,SAAU,aAqGCghD,OAjGDA,KACZ,MAAM/wD,EAAUpB,MACToI,EAASq0C,GAAcnhD,mBAAS,KACjC,KAAE4F,GAAS88C,MACVoU,EAAeC,GAAoB/2D,mBAAS,MAEnDE,oBAAU,MACRC,iBACE,MAAMhL,QAAcyQ,IACpBu7C,EAAWhsD,GAEbkX,IAEC,IAEH,MAIM2qD,EAAkBA,KACtBD,EAAiB,OAGbE,EAAmB1Z,sBAAat3D,IAClB,WAAdA,EAAMyc,KACRs0D,KAED,IAEH92D,oBAAU,KACRkc,SAAS86C,iBAAiB,UAAWD,GAC9B,KACL76C,SAAS+6C,oBAAoB,UAAWF,KAEzC,CAACA,IAiDJ,OACEnyE,IAAA6b,cAACs5C,GAAa,KACZn1D,IAAA6b,cAACw5C,GAAU,KACTr1D,IAAA6b,cAAC61B,GAAK,KAAE35B,KAAKkB,EAAE,eAAe,KAAG+O,EAAQjmB,OAAO,KAChD/B,IAAA6b,cAACy5C,GAAwB,OAE3Bt1D,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQ0oB,WA5BxB1pC,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACE5oB,IAAA6b,cAAA,OAAK2F,UAAS,GAAAtgB,OAAK8f,EAAQ0oB,UAAS,KAAAxoC,OAAI8f,EAAQkwD,qBAC7ClpD,EAAQjmB,OAASimB,EAAQ5F,IAAI,CAACwoB,EAAQhtB,IACrC5d,IAAA6b,cAACivB,KAAK,CAACltB,IAAKA,EAAK4D,UAAS,GAAAtgB,OAAK8f,EAAQqwD,UAAS,KAAAnwE,OAAI8f,EAAQuwD,YAAczvD,QAASA,KAAMwwD,OAjD3E5U,EAiD0F9yB,EAAO8yB,WAhDvHuU,EAAiBvU,GADKA,QAkDZ19D,IAAA6b,cAAA,OACE2U,IAAG,8BAAAtvB,OAAgC0pC,EAAO8yB,MAAK,kBAC/CvvC,IAAI,YACJ3M,UAAWR,EAAQwwD,iBAErBxxE,IAAA6b,cAAC8O,IAAU,CAAC/I,QAAQ,SAASJ,UAAWR,EAAQywD,YAC7C7mC,EAAOtlC,OAEVtF,IAAA6b,cAAC8O,IAAU,CAAC/I,QAAQ,UAAUJ,UAAWR,EAAQ0wD,kBAC9C9mC,EAAOxa,eAGT,QAvCTpwB,IAAA6b,cAAC02D,KAAK,CACJ3jE,KAAMimB,QAAQm9C,GACd3jD,QAAS6jD,EACT1wD,UAAWR,EAAQ2wD,YAEnB3xE,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQ4wD,mBACrBI,GACChyE,IAAA6b,cAAA,UACEkN,MAAO,CAAE3I,MAAO,OAAQM,OAAQ,OAAQsI,SAAU,WAAYgC,IAAK,EAAGC,KAAM,GAC5EuF,IAAG,iCAAAtvB,OAAmC8wE,GACtC1sE,MAAM,uBACNktE,YAAY,IACZC,MAAM,2FACNC,iBAAe,Q,sBCxG7B,MAAM9yD,GAAYC,YAAYnG,IAAK,CACjCoG,KAAM,CACJC,QAAS,OACT0Q,SAAU,QAEZsW,cAAe,CACbhnB,QAAS,OACT,yBAA0B,CACxBS,YAAa9G,EAAMuoB,QAAQ,KAI/B+E,WAAY,CACVhe,SAAU,YAGZ8B,eAAgB,CACd7d,MAAO8d,KAAM,KACb/B,SAAU,WACVgC,IAAK,MACLC,KAAM,MACNtK,WAAY,GACZuK,YAAa,IAEf+b,YAAa,CACX/mB,OAAQxG,EAAMuoB,QAAQ,GACtB3R,SAAU,QAIRqiD,GAAoBxrC,OAAaC,MAAM,CAC3CzhC,KAAMwhC,OACHxB,IAAI,EAAG,cACPC,IAAI,GAAI,aACRyB,SAAS,cA6HCurC,OA1HUj3D,IAAuC,IAAtC,KAAE/M,EAAI,QAAEyf,EAAO,cAAEwkD,GAAel3D,EACxD,MAAMqF,EAAUpB,KAEV2nB,EAAe,CACnB5hC,KAAM,KAGDgN,EAAamgE,GAAkB53D,mBAASqsB,GAE/CnsB,oBAAU,KACiBC,WACvB,GAAKw3D,EACL,IACE,MAAM,KAAEh6D,SAAee,GAAI0B,IAAI,kBAADpa,OAAmB2xE,IACjDC,EAAgBx3C,IACP,IAAKA,KAAcziB,KAE5B,MAAOL,GACPD,GAAWC,KAIfu6D,IACC,CAACF,EAAejkE,IAEnB,MAAMugB,EAAcA,KAClBd,IACAykD,EAAevrC,IAkBjB,OACEvnC,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQlB,MACtB9f,IAAA6b,cAAC0S,KAAM,CACL3f,KAAMA,EACNyf,QAASc,EACTuC,SAAS,KACTb,WAAS,EACTsL,OAAO,SAEPn8B,IAAA6b,cAAC4S,KAAW,CAAC9jB,GAAG,qBACA,GAAAzJ,OAAb2xE,EACM96D,KAAKkB,EAAE,4BACPlB,KAAKkB,EAAE,6BAEhBjZ,IAAA6b,cAACisB,KAAM,CACLC,cAAep1B,EACfq1B,oBAAoB,EACpBC,iBAAkB0qC,GAClBzqC,SAAUA,CAACC,EAAQ1/B,KACjB7E,WAAW,KAlCSyX,WAC5B,MAAM23D,EAAkB,IAAK7qC,GAC7B,IACM0qC,QACIj5D,GAAIqnB,IAAI,kBAAD//B,OAAmB2xE,GAAiBG,SAE3Cp5D,GAAIoD,KAAK,iBAAkBg2D,GAEnCh6D,IAAMxT,QAAQuS,KAAKkB,EAAE,uBACrB,MAAOT,GACPD,GAAWC,GAEb2W,KAuBU8jD,CAAsB9qC,GACtB1/B,EAAQ4/B,eAAc,IACrB,OAGJzc,IAAA,IAAC,QAAE0c,EAAO,OAAEC,EAAM,aAAEC,GAAc5c,EAAA,OACjC5rB,IAAA6b,cAAC4sB,KAAI,KACHzoC,IAAA6b,cAAC6S,KAAa,CAACC,UAAQ,GACrB3uB,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQ+lB,eACtB/mC,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,4BACd2vB,WAAS,EACTjjC,KAAK,OACLmT,MAAOwvB,EAAQ3iC,MAAQkvB,QAAQ0T,EAAO5iC,MACtCkjC,WAAYP,EAAQ3iC,MAAQ4iC,EAAO5iC,KACnCic,QAAQ,WACR1B,OAAO,QACP2Q,WAAS,MAIf7wB,IAAA6b,cAAC+S,KAAa,KACZ5uB,IAAA6b,cAACgG,KAAM,CACLC,QAASqN,EACTliB,MAAM,YACNzG,SAAUgiC,EACV5mB,QAAQ,YAEP7J,KAAKkB,EAAE,+BAEVjZ,IAAA6b,cAACgG,KAAM,CACLjX,KAAK,SACLqC,MAAM,UACNzG,SAAUgiC,EACV5mB,QAAQ,YACRJ,UAAWR,EAAQgmB,YAEL,GAAA9lC,OAAb2xE,EACM96D,KAAKkB,EAAE,8BACPlB,KAAKkB,EAAE,8BACbuvB,GACCxoC,IAAA6b,cAACwP,KAAgB,CACfC,KAAM,GACN9J,UAAWR,EAAQ8J,yB,qBCjIzC,MAAM5Q,GAAUA,CAACC,EAAOC,KACtB,GAAoB,sBAAhBA,EAAOxP,KAA8B,CACvC,MAAM0H,EAAe8H,EAAOC,QACtB64D,EAAkB,GAWxB,OATA5gE,EAAauS,QAASlS,IACpB,MAAMwgE,EAAmBh5D,EAAMzY,UAAWqjB,GAAMA,EAAEpa,KAAOgI,EAAYhI,KAC3C,IAAtBwoE,EACFh5D,EAAMg5D,GAAoBxgE,EAE1BugE,EAAgB1xE,KAAKmR,KAIlB,IAAIwH,KAAU+4D,GAGvB,GAAoB,uBAAhB94D,EAAOxP,KAA+B,CACxC,MAAM+H,EAAcyH,EAAOC,QACrB84D,EAAmBh5D,EAAMzY,UAAWqjB,GAAMA,EAAEpa,KAAOgI,EAAYhI,IAErE,OAA0B,IAAtBwoE,GACFh5D,EAAMg5D,GAAoBxgE,EACnB,IAAIwH,IAEJ,CAACxH,KAAgBwH,GAI5B,GAAoB,uBAAhBC,EAAOxP,KAA+B,CACxC,MAAMioE,EAAgBz4D,EAAOC,QAEvB84D,EAAmBh5D,EAAMzY,UAAWqjB,GAAMA,EAAEpa,KAAOkoE,GAIzD,OAH0B,IAAtBM,GACFh5D,EAAMvY,OAAOuxE,EAAkB,GAE1B,IAAIh5D,GAGb,GAAoB,UAAhBC,EAAOxP,KACT,MAAO,IAILgV,GAAYC,YAAYnG,IAAK,CACjCgwB,UAAW,CACTrX,KAAM,EACNzH,QAASlR,EAAMuoB,QAAQ,GACvB5Q,UAAW,YACR3X,EAAM4X,oBA8OE8hD,OA1OMA,KACnB,MAAMpyD,EAAUpB,KACV3D,EAAUC,wBAETlB,EAASC,GAAcC,oBAAS,IAChCsL,EAAYC,GAAiBvL,mBAAS,IACtCmZ,EAASC,GAAcpZ,oBAAS,IAChCm4D,EAAqBC,GAA0Bp4D,mBAAS,OACxDq4D,EAAqBC,GAA0Bt4D,mBAAS,OACxDu4D,EAAsBC,GAA2Bx4D,oBAAS,IAC1Dg9C,EAAkBC,GAAuBj9C,oBAAS,IAClDwL,EAAa8yB,GAAkBt+B,mBAAS,KACxC5I,EAAcwI,GAAYC,qBAAWb,GAAS,IAE/C7Z,EAAgB8a,qBAAWlW,GAEjCmW,oBAAU,KACRN,EAAS,CAAElQ,KAAM,UACjB6b,EAAc,IACb,CAACC,IAEJtL,oBAAU,KACRH,GAAW,GACX,MAAMuM,EAAkB5jB,WAAW,KACPyX,WACxB,IACE,MAAM,KAAExC,SAAee,GAAI0B,IAAI,kBAAmB,CAChDla,OAAQ,CAAEslB,cAAaF,gBAEzB1L,EAAS,CAAElQ,KAAM,oBAAqByP,QAASxB,EAAKmP,UACpDsM,EAAWzb,EAAKwb,SAChBpZ,GAAW,GACX,MAAOzC,GACPD,GAAWC,KAGfm7D,IACC,KACH,MAAO,IAAMjsD,aAAaF,IACzB,CAACd,EAAaF,IAEjBpL,oBAAU,KACR,MAAMxY,EAAYG,aAAaC,QAAQ,aACjC8B,EAASzE,EAAcsC,UAAUC,GAYvC,OAVAkC,EAAOnE,GAAG,WAADO,OAAY0B,EAAS,gBAAiBiW,IACzB,WAAhBA,EAAKuB,QAAuC,WAAhBvB,EAAKuB,QACnCU,EAAS,CAAElQ,KAAM,qBAAsByP,QAASxB,EAAK+xB,SAGnC,WAAhB/xB,EAAKuB,QACPU,EAAS,CAAElQ,KAAM,qBAAsByP,SAAUxB,EAAKlO,OAInD,KACL7F,EAAOzC,eAER,CAAChC,IAiDJ,OACEL,IAAA6b,cAACs5C,GAAa,KACZn1D,IAAA6b,cAACuS,GAAiB,CAChB9oB,MACEiuE,GAAmB,GAAAryE,OAChB6W,KAAKkB,EAAE,8CAA6C,KAAA/X,OACrDqyE,EAAoB5tE,KAAI,KAG5BiJ,KAAMspD,EACN7pC,QAAS8pC,EACT7pC,UAAWA,IAvCejT,WAC9B,UACQzB,GAAIlT,OAAO,kBAADxF,OAAmB2xE,IACnC75D,IAAMxT,QAAQuS,KAAKkB,EAAE,gCACrB,MAAOT,GACPD,GAAWC,GAEbg7D,EAAuB,MACvBh6B,EAAe,IACf/yB,EAAc,IA8BOmtD,CAAwBL,EAAoB5oE,KAE5DoN,KAAKkB,EAAE,iDAEVjZ,IAAA6b,cAACg4D,GAAiB,CAChBjlE,KAAM6kE,EACNplD,QA3D8BylD,KAClCR,EAAuB,MACvBI,GAAwB,IA0DpBllD,kBAAgB,oBAChBqkD,cAAeQ,GAAuBA,EAAoB1oE,KAE5D3K,IAAA6b,cAACw5C,GAAU,KACTr1D,IAAA6b,cAACupB,KAAI,CAACrc,MAAO,CAAE3I,MAAO,SAAWilB,WAAS,GACxCrlC,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI4R,GAAI,EAAG9R,MAAI,GACvBtlC,IAAA6b,cAAC61B,GAAK,KAAE35B,KAAKkB,EAAE,wBAEjBjZ,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI4R,GAAI,EAAG9R,MAAI,GACvBtlC,IAAA6b,cAACupB,KAAI,CAACnD,QAAS,EAAGoD,WAAS,GACzBrlC,IAAA6b,cAACupB,KAAI,CAACI,GAAI,EAAG4R,GAAI,EAAG9R,MAAI,GACtBtlC,IAAA6b,cAAC4F,KAAS,CACRoP,WAAS,EACTpiB,YAAasJ,KAAKkB,EAAE,8BACpBrO,KAAK,SACLmR,MAAO2K,EACPhF,SAvEMvgB,IACpBq4C,EAAer4C,EAAMwgB,OAAO5F,MAAMsiC,gBAuEpBxC,WAAY,CACViuB,eACE9pE,IAAA6b,cAACu3C,KAAc,CAACpqC,SAAS,SACvBhpB,IAAA6b,cAACulC,KAAU,CAACr4B,MAAO,CAAE9b,MAAO,eAMtCjN,IAAA6b,cAACupB,KAAI,CAACI,GAAI,EAAG4R,GAAI,EAAG9R,MAAI,GACtBtlC,IAAA6b,cAACgG,KAAM,CACLgP,WAAS,EACTjP,QAAQ,YACR3U,MAAM,UACN6U,QAhGmBiyD,KACjCT,EAAuB,MACvBI,GAAwB,KAgGT37D,KAAKkB,EAAE,kCAOpBjZ,IAAA6b,cAACivB,KAAK,CACJtpB,UAAWR,EAAQ0oB,UACnB9nB,QAAQ,WACRwV,SAzEgBrH,IACpB,IAAKsE,GAAWrZ,EAAS,OACzB,MAAM,UAAEqc,EAAS,aAAE0T,EAAY,aAAEC,GAAiBjb,EAAEqF,cAChD2V,GAAgB1T,EAAY,KAAO2T,GANvCvkB,EAAe6U,GAAcA,EAAY,KA8ErCt7B,IAAA6b,cAACm0B,KAAK,CAAC1kB,KAAK,SACVtrB,IAAA6b,cAACo0B,KAAS,KACRjwC,IAAA6b,cAACq0B,KAAQ,KACPlwC,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACdr4B,KAAKkB,EAAE,4BAEVjZ,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACdr4B,KAAKkB,EAAE,gCAEVjZ,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACdr4B,KAAKkB,EAAE,iCAIdjZ,IAAA6b,cAACw0B,KAAS,KACRrwC,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACGtW,EAAa8P,IAAKzP,GACjB3S,IAAA6b,cAACq0B,KAAQ,CAACtyB,IAAKjL,EAAYhI,IACzB3K,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAAUz9B,EAAYhN,MACvC3F,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACdz9B,EAAYqhE,eAAiB,GAEhCh0E,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACfpwC,IAAA6b,cAAA,KAAGma,KAAMi+C,KAAiBC,SAAS,iBACjCl0E,IAAA6b,cAAC+G,IAAU,CAAC0I,KAAK,QAAQhmB,MAAM,2BAC7BtF,IAAA6b,cAACs4D,KAAY,QAIjBn0E,IAAA6b,cAAC+G,IAAU,CACT0I,KAAK,QACLxJ,QAASA,KAAMsyD,OAlGbzpE,EAkG0BgI,EAAYhI,QAjG1DsR,EAAQza,KAAK,kBAADN,OAAmByJ,EAAE,cADbA,QAoGF3K,IAAA6b,cAACiO,KAAU,OAGb9pB,IAAA6b,cAAC+G,IAAU,CACT0I,KAAK,QACLxJ,QAASA,IAtIEnP,KAC7B2gE,EAAuB3gE,GACvB+gE,GAAwB,IAoISW,CAAsB1hE,IAErC3S,IAAA6b,cAACiH,KAAQ,OAGX9iB,IAAA6b,cAAC+G,IAAU,CACT0I,KAAK,QACLxJ,QAAUiO,IACRooC,GAAoB,GACpBqb,EAAuB7gE,KAGzB3S,IAAA6b,cAACo9B,KAAiB,UAKzBj+B,GAAWhb,IAAA6b,cAAC25C,GAAgB,CAACC,QAAS,U,sBCpSrD,MAAM71C,GAAYC,YAAYnG,IAAK,CACjCoG,KAAM,CACJC,QAAS,OACT0Q,SAAU,QAEZwY,UAAW,CACTzoB,YAAa9G,EAAMuoB,QAAQ,GAC3B5P,KAAM,GAGRkmB,UAAW,CACTx4B,QAAS,OACT4T,eAAgB,SAChB1T,WAAY,UAGd+mB,WAAY,CACVhe,SAAU,YAGZ8B,eAAgB,CACd7d,MAAO8d,KAAM,KACb/B,SAAU,WACVgC,IAAK,MACLC,KAAM,MACNtK,WAAY,GACZuK,YAAa,OAIXstB,GAAgBrR,OAAaC,MAAM,CACvCzhC,KAAMwhC,OACHxB,IAAI,EAAG,cACPC,IAAI,GAAI,aACRyB,SAAS,YACZz6B,OAAQu6B,OAAaxB,IAAI,EAAG,cAAcC,IAAI,GAAI,aAClDhgC,MAAOuhC,OAAavhC,MAAM,mBAqLb0uE,OAlLc34D,IAMtB,IANuB,KAC5B/M,EAAI,QACJyf,EAAO,UACPqqB,EAAS,cACT3Q,EAAa,OACb4Q,GACDh9B,EACC,MAAMqF,EAAUpB,KACVyf,EAAY7K,kBAAO,IAGvB1jB,MAAM,UAAElO,IACNuY,qBAAWyD,KACT,cAAEi0D,GAAkBzzC,sBAEpBmI,EAAe,CACnB5hC,KAAM,GACNiH,OAAQ,GACRhH,MAAO,KAGFgI,EAASqtB,GAAc/f,mBAASqsB,GAEvCnsB,oBAAU,IACD,KACLikB,EAAUtK,SAAU,GAErB,IAEH3Z,oBAAU,KACaC,WAOnB,GANI0sB,GACF9M,EAAYK,IACH,IAAKA,KAAcyM,KAIzB2Q,EAEL,IACE,MAAM,KAAE7/B,SAAee,GAAI0B,IAAI,uBAADpa,OAAwBw3C,IAClDrZ,EAAUtK,SACZkG,EAAWpiB,GAEb,MAAOL,GACPD,GAAWC,KAIfogC,IACC,CAACF,EAAW9pC,EAAMm5B,IAErB,MAAM5Y,EAAcA,KAClBd,IACA4M,EAAWsM,IA6Bb,OACEvnC,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQlB,MACtB9f,IAAA6b,cAAC0S,KAAM,CAAC3f,KAAMA,EAAMyf,QAASc,EAAauC,SAAS,KAAKyK,OAAO,SAC7Dn8B,IAAA6b,cAAC4S,KAAW,CAAC9jB,GAAG,qBACJ,GAAAzJ,OAATw3C,EACM3gC,KAAKkB,EAAE,2BACPlB,KAAKkB,EAAE,4BAEhBjZ,IAAA6b,cAACisB,KAAM,CACLC,cAAen6B,EACfo6B,oBAAoB,EACpBC,iBAAkBuQ,GAClBtQ,SAAUA,CAACC,EAAQ1/B,KACjB7E,WAAW,KAvCKyX,WACxB,IACE,GAAIq9B,QACI9+B,GAAIqnB,IAAI,uBAAD//B,OAAwBw3C,GAAa,IAC7CvQ,EACHvlC,YACAiwE,kBAEF1jD,QACK,CACL,MAAM,KAAEtW,SAAee,GAAIoD,KAAK,sBAAuB,IAClDmrB,EACHvlC,YACAiwE,kBAEEl6B,GACFA,EAAO9/B,GAETsW,IAEFnW,IAAMxT,QAAQuS,KAAKkB,EAAE,yBACrB,MAAOT,GACPD,GAAWC,KAkBHqgC,CAAkB1Q,GAClB1/B,EAAQ4/B,eAAc,IACrB,OAGJzc,IAAA,IAAC,OAAEuc,EAAM,OAAEI,EAAM,QAAED,EAAO,aAAEE,GAAc5c,EAAA,OACzC5rB,IAAA6b,cAAC4sB,KAAI,KACHzoC,IAAA6b,cAAC6S,KAAa,CAACC,UAAQ,GACrB3uB,IAAA6b,cAAC8O,IAAU,CAAC/I,QAAQ,YAAY8O,cAAY,GACzC3Y,KAAKkB,EAAE,+BAEVjZ,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,0BACdtT,KAAK,OACLijC,WAAS,EACT9vB,MAAOwvB,EAAQ3iC,MAAQkvB,QAAQ0T,EAAO5iC,MACtCkjC,WAAYP,EAAQ3iC,MAAQ4iC,EAAO5iC,KACnCic,QAAQ,WACR1B,OAAO,QACPsB,UAAWR,EAAQioB,YAErBjpC,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,4BACdtT,KAAK,SACLmT,MAAOwvB,EAAQ17B,QAAUioB,QAAQ0T,EAAO37B,QACxCi8B,WAAYP,EAAQ17B,QAAU27B,EAAO37B,OACrC6B,YAAY,gBACZmT,QAAQ,WACR1B,OAAO,UAETlgB,IAAA6b,cAAA,WACE7b,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,2BACdtT,KAAK,QACLmT,MAAOwvB,EAAQ1iC,OAASivB,QAAQ0T,EAAO3iC,OACvCijC,WAAYP,EAAQ1iC,OAAS2iC,EAAO3iC,MACpC6I,YAAY,gBACZoiB,WAAS,EACT3Q,OAAO,QACP0B,QAAQ,eAId5hB,IAAA6b,cAAC+S,KAAa,KACZ5uB,IAAA6b,cAACgG,KAAM,CACLC,QAASqN,EACTliB,MAAM,YACNzG,SAAUgiC,EACV5mB,QAAQ,YAEP7J,KAAKkB,EAAE,gCAEVjZ,IAAA6b,cAACgG,KAAM,CACLjX,KAAK,SACLqC,MAAM,UACNzG,SAAUgiC,EACV5mB,QAAQ,YACRJ,UAAWR,EAAQgmB,YAET,GAAA9lC,OAATw3C,EACM3gC,KAAKkB,EAAE,+BACPlB,KAAKkB,EAAE,+BACbuvB,GACCxoC,IAAA6b,cAACwP,KAAgB,CACfC,KAAM,GACN9J,UAAWR,EAAQ8J,yBC7K1BypD,OArDSA,KA4Cf,CACLC,SAlBen5D,UACf,MAAM,KAAExC,SAAee,GAAI2C,QAAQ,CACjC4G,IAAI,kBAADjiB,OAAoByJ,GACvByY,OAAQ,QAEV,OAAOvK,GAcPlS,KA7CW0U,UACX,MAAQxC,KAAMwK,SAAuBzJ,GAAI2C,QAAQ,CAC/C4G,IAAK,iBACLC,OAAQ,OACRvK,SAEF,OAAOwK,GAwCPrQ,OArCaqI,UACb,MAAQxC,KAAMwK,SAAuBzJ,GAAI2C,QAAQ,CAC/C4G,IAAI,kBAADjiB,OAAoB2X,EAAKlO,IAC5ByY,OAAQ,MACRvK,SAEF,OAAOwK,GAgCPkiC,aA7BmBlqC,UACnB,MAAM,KAAExC,SAAee,GAAI2C,QAAQ,CACjC4G,IAAI,kBAADjiB,OAAoByJ,GACvByY,OAAQ,WAEV,OAAOvK,GAyBPiI,KAdWzF,UACX,MAAM,KAAExC,SAAee,GAAI2C,QAAQ,CACjC4G,IAAK,sBACLC,OAAQ,MACRhiB,WAEF,OAAOyX,KCIX,MAAMqB,GAAUA,CAACC,EAAOC,KACtB,GAAoB,kBAAhBA,EAAOxP,KAA0B,CACnC,MAAMZ,EAAWoQ,EAAOC,QAClB2vD,EAAc,GAWpB,OATAhgE,EAAS6a,QAASjX,IAChB,MAAMq8D,EAAe9vD,EAAMzY,UAAWC,GAAMA,EAAEgJ,KAAOiD,EAAQjD,KACvC,IAAlBs/D,EACF9vD,EAAM8vD,GAAgBr8D,EAEtBo8D,EAAYxoE,KAAKoM,KAId,IAAIuM,KAAU6vD,GAGvB,GAAoB,oBAAhB5vD,EAAOxP,KAA4B,CACrC,MAAMgD,EAAUwM,EAAOC,QACjB4vD,EAAe9vD,EAAMzY,UAAWC,GAAMA,EAAEgJ,KAAOiD,EAAQjD,IAE7D,OAAsB,IAAlBs/D,GACF9vD,EAAM8vD,GAAgBr8D,EACf,IAAIuM,IAEJ,CAACvM,KAAYuM,GAIxB,GAAoB,mBAAhBC,EAAOxP,KAA2B,CACpC,MAAM8tC,EAAYt+B,EAAOC,QAEnB4vD,EAAe9vD,EAAMzY,UAAWC,GAAMA,EAAEgJ,KAAO+tC,GAIrD,OAHsB,IAAlBuxB,GACF9vD,EAAMvY,OAAOqoE,EAAc,GAEtB,IAAI9vD,GAGb,GAAoB,UAAhBC,EAAOxP,KACT,MAAO,IAILgV,GAAYC,YAAYnG,IAAK,CACjCgwB,UAAW,CACTrX,KAAM,EACNzH,QAASlR,EAAMuoB,QAAQ,GACvB5Q,UAAW,YACR3X,EAAM4X,oBAoVEmjD,OAhVUA,KACvB,MAAMzzD,EAAUpB,MAEV,KAAE9O,GAASqK,qBAAWyD,KACtB,cAAEi0D,GAAkBzzC,sBACpBnjB,EAAUC,wBAETlB,EAASC,GAAcC,oBAAS,IAChCsL,EAAYC,GAAiBvL,mBAAS,IACtCwL,EAAa8yB,GAAkBt+B,mBAAS,KACxClR,EAAU8Q,GAAYC,qBAAWb,GAAS,KAC1C2uD,EAAmBC,GAAwB5tD,mBAAS,OACpDw5D,EAA0BC,GAC/Bz5D,oBAAS,IACJmvD,EAAiBC,GAAsBpvD,mBAAS,OAChDqvD,EAAaC,GAAkBtvD,oBAAS,IACxCmZ,EAASC,GAAcpZ,oBAAS,IAChCvI,EAAamgE,GAAkB53D,mBAAS,IACzC05D,EAAgBpgD,iBAAO,OAErBggD,SAAUK,GAAoBN,KAEhCl0E,EAAgB8a,qBAAWlW,GAEjCmW,oBAAU,KACRy5D,EAAgBhC,GAAel4B,KAAM9hC,IACnCi6D,EAAej6D,MAGhB,CAACg6D,IAEJz3D,oBAAU,KACRN,EAAS,CAAElQ,KAAM,UACjB6b,EAAc,IACb,CAACC,IAEJtL,oBAAU,KACRH,GAAW,GACX,MAAMuM,EAAkB5jB,WAAW,KACXyX,WACpB,IACE,MAAM,KAAExC,SAAee,GAAI0B,IAAI,qBAAsB,CACnDla,OAAQ,CAAEslB,cAAaF,aAAYqsD,mBAErC/3D,EAAS,CAAElQ,KAAM,gBAAiByP,QAASxB,EAAK7O,WAChDsqB,EAAWzb,EAAKwb,SAChBpZ,GAAW,GACX,MAAOzC,GACPD,GAAWC,KAGf44B,IACC,KACH,MAAO,IAAM1pB,aAAaF,IACzB,CAACd,EAAaF,EAAYqsD,IAE7Bz3D,oBAAU,KACR,MAAMxY,EAAYG,aAAaC,QAAQ,aACjC8B,EAASzE,EAAcsC,UAAUC,GAyBvC,OAvBAkC,EAAOnE,GAAG,WAADO,OAAY0B,EAAS,oBAAqBiW,IAC7B,WAAhBA,EAAKuB,QAAuC,WAAhBvB,EAAKuB,QACnCU,EAAS,CAAElQ,KAAM,kBAAmByP,QAASxB,EAAK+xB,SAGhC,WAAhB/xB,EAAKuB,QACPU,EAAS,CAAElQ,KAAM,iBAAkByP,SAAUxB,EAAKlO,KAGhC,WAAhBkO,EAAKuB,QACPU,EAAS,CAAElQ,KAAM,gBAAiByP,QAASxB,EAAKmP,YAIpDljB,EAAOnE,GAAG,WAADO,OACI0B,EAAS,qBAAA1B,OAAoB2xE,GACvCh6D,IACqB,WAAhBA,EAAKuB,QACPU,EAAS,CAAElQ,KAAM,gBAAiByP,QAASxB,EAAKmP,YAK/C,KACLljB,EAAOzC,eAER,CAACwwE,EAAexyE,IA+DnB,OACEL,IAAA6b,cAACs5C,GAAa,CAAC3zC,UAAWR,EAAQi0C,eAChCj1D,IAAA6b,cAACy4D,GAAoB,CACnB1lE,KAAM8lE,EACNrmD,QAxDkCymD,KACtChM,EAAqB,MACrB6L,GAA4B,IAuDxBnmD,kBAAgB,oBAChBkqB,UAAWmwB,IAEb7oE,IAAA6b,cAACuS,GAAiB,CAChB9oB,MACE+kE,EAAe,GAAAnpE,OACR6W,KAAKkB,EAAE,kDAAiD,KAAA/X,OACzDmpE,EAAgB1kE,KAAI,QAAAzE,OAEnB6W,KAAKkB,EAAE,oDAEhBrK,KAAM27D,EACNl8C,QAASm8C,EACTl8C,UAAWA,IACT+7C,EA7DoBhvD,WAC1B,UACQzB,GAAIlT,OAAO,uBAADxF,OAAwBw3C,IACxC1/B,IAAMxT,QAAQuS,KAAKkB,EAAE,4BACrB,MAAOT,GACPD,GAAWC,GAEb8xD,EAAmB,MACnB9wB,EAAe,IACf/yB,EAAc,IAqDJgkD,CAAoBJ,EAAgB1/D,IAlDnB0Q,WAC3B,IACE,MAAM6vC,EAAW,IAAIC,SACrBD,EAASG,OAAO,OAAQupB,EAAc7/C,QAAQrkB,MAAM,UAC9CkJ,GAAI2C,QAAQ,CAChB4G,IAAI,iBAADjiB,OAAmB2xE,EAAa,WACnCzvD,OAAQ,OACRvK,KAAMqyC,IAER,MAAO1yC,GACPD,GAAWC,KAyCHu8D,IAGL1K,EAAe,GAAAnpE,OACX6W,KAAKkB,EAAE,qDAEVjZ,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACG7Q,KAAKkB,EAAE,oDACRjZ,IAAA6b,cAAA,KAAGma,KAAMi+C,KAAiBC,SAAS,iBAAgB,+CAMzDl0E,IAAA6b,cAACw5C,GAAU,KACTr1D,IAAA6b,cAACupB,KAAI,CAACrc,MAAO,CAAE3I,MAAO,SAAWilB,WAAS,GACxCrlC,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI4R,GAAI,EAAG9R,MAAI,GACvBtlC,IAAA6b,cAAC61B,GAAK,KAAE/+B,EAAYhN,OAEtB3F,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI4R,GAAI,EAAG9R,MAAI,GACvBtlC,IAAA6b,cAACupB,KAAI,CAACnD,QAAS,EAAGoD,WAAS,GACzBrlC,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI4R,GAAI,EAAG9R,MAAI,GACvBtlC,IAAA6b,cAAC4F,KAAS,CACRoP,WAAS,EACTpiB,YAAasJ,KAAKkB,EAAE,sCACpBrO,KAAK,SACLmR,MAAO2K,EACPhF,SA7GMvgB,IACpBq4C,EAAer4C,EAAMwgB,OAAO5F,MAAMsiC,gBA6GpBxC,WAAY,CACViuB,eACE9pE,IAAA6b,cAACu3C,KAAc,CAACpqC,SAAS,SACvBhpB,IAAA6b,cAACulC,KAAU,CAACr4B,MAAO,CAAE9b,MAAO,eAMtCjN,IAAA6b,cAACupB,KAAI,CAACI,GAAI,EAAG4R,GAAI,EAAG9R,MAAI,GACtBtlC,IAAA6b,cAACgG,KAAM,CACLgP,WAAS,EACTjP,QAAQ,YACR3U,MAAM,UACN6U,QAnESkzD,KACvB/4D,EAAQza,KAAK,oBAoEEuW,KAAKkB,EAAE,oCAGZjZ,IAAA6b,cAACupB,KAAI,CAACI,GAAI,EAAG4R,GAAI,EAAG9R,MAAI,GACtBtlC,IAAA6b,cAACgG,KAAM,CACLgP,WAAS,EACTjP,QAAQ,YACR3U,MAAM,UACN6U,QAASA,KACP8yD,EAAc7/C,QAAQhZ,MAAQ,KAC9B64D,EAAc7/C,QAAQm6B,UAGvBn3C,KAAKkB,EAAE,qCAGZjZ,IAAA6b,cAACupB,KAAI,CAACI,GAAI,EAAG4R,GAAI,EAAG9R,MAAI,GACtBtlC,IAAA6b,cAACgG,KAAM,CACLgP,WAAS,EACTjP,QAAQ,YACR3U,MAAM,UACN6U,QA/IuBmzD,KACrCnM,EAAqB,MACrB6L,GAA4B,KA+Ib58D,KAAKkB,EAAE,sCAOpBjZ,IAAA6b,cAACivB,KAAK,CACJtpB,UAAWR,EAAQ0oB,UACnB9nB,QAAQ,WACRwV,SA9GgBrH,IACpB,IAAKsE,GAAWrZ,EAAS,OACzB,MAAM,UAAEqc,EAAS,aAAE0T,EAAY,aAAEC,GAAiBjb,EAAEqF,cAChD2V,GAAgB1T,EAAY,KAAO2T,GANvCvkB,EAAe6U,GAAcA,EAAY,KAmHrCt7B,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACE5oB,IAAA6b,cAAA,SACEkN,MAAO,CAAEhJ,QAAS,QAClBpV,GAAG,SACHhF,KAAK,OACLiF,KAAK,OACL+E,OAAO,aACP+R,SAAUA,KACR8oD,GAAe,IAEjBpmD,IAAKwwD,KAGT50E,IAAA6b,cAACm0B,KAAK,CAAC1kB,KAAK,SACVtrB,IAAA6b,cAACo0B,KAAS,KACRjwC,IAAA6b,cAACq0B,KAAQ,KACPlwC,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,SAASrnB,MAAO,CAAE3I,MAAO,OAAQ,KAGlDpgB,IAAA6b,cAACs0B,KAAS,KAAEp4B,KAAKkB,EAAE,gCACnBjZ,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACdr4B,KAAKkB,EAAE,kCAEVjZ,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACdr4B,KAAKkB,EAAE,iCAEVjZ,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACdr4B,KAAKkB,EAAE,qCAIdjZ,IAAA6b,cAACw0B,KAAS,KACRrwC,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACG5e,EAASoY,IAAKxU,GACb5N,IAAA6b,cAACq0B,KAAQ,CAACtyB,IAAKhQ,EAAQjD,IACrB3K,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,SAASrnB,MAAO,CAAE3I,MAAO,OACxCpgB,IAAA6b,cAAC+G,IAAU,KACRhV,EAAQsnE,gBACPl1E,IAAA6b,cAAC80B,KAAe,CACdwkC,YAAY,qBACZC,UAAU,UAGZp1E,IAAA6b,cAACw5D,KAAS,CACRF,YAAY,uBACZC,UAAU,WAKlBp1E,IAAA6b,cAACs0B,KAAS,KAAEviC,EAAQjI,MACpB3F,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAAUxiC,EAAQhB,QACnC5M,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAAUxiC,EAAQhI,OACnC5F,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACfpwC,IAAA6b,cAAC+G,IAAU,CACT0I,KAAK,QACLxJ,QAASA,KAAMkpD,OA3MTtyB,EA2M0B9qC,EAAQjD,GA1M1Dm+D,EAAqBpwB,QACrBi8B,GAA4B,GAFJj8B,QA6MN14C,IAAA6b,cAACiH,KAAQ,OAEX9iB,IAAA6b,cAACoD,GAAG,CACFC,KAAMpO,EAAKxD,QACX6R,QAAQ,8BACRvY,IAAKA,IACH5G,IAAA6b,cAAC+G,IAAU,CACT0I,KAAK,QACLxJ,QAASA,KACP0oD,GAAe,GACfF,EAAmB18D,KAGrB5N,IAAA6b,cAACo9B,KAAiB,YAO7Bj+B,GAAWhb,IAAA6b,cAAC25C,GAAgB,CAACC,QAAS,UCxYrD,MAAM6f,GAAOC,EAAQ,MAEf31D,GAAYC,YAAYnG,IAAK,CAC/BoG,KAAM,CACFC,QAAS,OACT0Q,SAAU,QAEdsW,cAAe,CACXhnB,QAAS,OACT,yBAA0B,CACtBS,YAAa9G,EAAMuoB,QAAQ,KAInC+E,WAAY,CACRhe,SAAU,YAGd8B,eAAgB,CACZ7d,MAAO8d,KAAM,KACb/B,SAAU,WACVgC,IAAK,MACLC,KAAM,MACNtK,WAAY,GACZuK,YAAa,IAEjB+b,YAAa,CACT/mB,OAAQxG,EAAMuoB,QAAQ,GACtB3R,SAAU,KAEdi9C,cAAe,CACXntD,MAAO,GACPM,OAAQ,OAIV80D,GAAsBruC,OAAaC,MAAM,CAC3C31B,UAAW01B,OAAaE,SAAS,oBAmQtBouC,OA/PY95D,IAAiD,IAAhD,KAAE/M,EAAI,QAAEyf,EAAO,gBAAEqnD,EAAe,OAAE3xE,GAAQ4X,EAClE,MAAMqF,EAAUpB,MACV,KAAE9O,GAASqK,qBAAWyD,KACtB,QAAEtR,GAAYwD,EACdk9C,EAAkBx5B,mBAElB+S,EAAe,CACjB91B,UAAW,GACX1H,QAAS,GACT2H,OAAO,EACPpJ,QAAQ,IAGL+mB,EAAkBC,GAAuBpU,oBAAS,IAClDy6D,EAAeC,GAAoB16D,mBAASqsB,IAC5CsmB,EAAYC,GAAiB5yC,mBAAS,MACvC6yC,EAAiBv5B,iBAAO,MAE9BpZ,oBAAU,KACN,IACI,WACI,IAAKs6D,EAAiB,OAEtB,MAAM,KAAE78D,SAAee,GAAI0B,IAAI,mBAADpa,OAAoBw0E,IAElDE,EAAkBt6C,IACP,IAAKA,KAAcziB,MANlC,GASF,MAAOL,GACLD,GAAWC,KAEhB,CAACk9D,EAAiB9mE,IAErB,MAAMugB,EAAcA,KAChBymD,EAAiBruC,GACjBumB,EAAc,MACdz/B,KA+EJ,OACIruB,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQlB,MACpB9f,IAAA6b,cAACuS,GAAiB,CACd9oB,MAAOyS,KAAKkB,EAAE,+CACdrK,KAAMygB,EACNhB,QAASA,IAAMiB,GAAoB,GACnChB,UAtCQjT,UACZwyC,IACAC,EAAc,MACdC,EAAeh5B,QAAQhZ,MAAQ,MAG/B45D,EAAcphE,kBACRqF,GAAIlT,OAAO,mBAADxF,OAAoBy0E,EAAchrE,GAAE,kBACpDirE,EAAkBvsD,IAAI,IACfA,EACH9U,UAAW,QAEfyE,IAAMxT,QAAQuS,KAAKkB,EAAE,iCACA,mBAAVlV,GAEPA,OAyBCgU,KAAKkB,EAAE,kDAEZjZ,IAAA6b,cAAC0S,KAAM,CACH3f,KAAMA,EACNyf,QAASc,EACTuC,SAAS,KACTb,WAAS,EACTsL,OAAO,SAEPn8B,IAAA6b,cAAC4S,KAAW,CAAC9jB,GAAG,qBACI,GAAAzJ,OAAfw0E,EACQ39D,KAAKkB,EAAE,6BACPlB,KAAKkB,EAAE,8BAEpBjZ,IAAA6b,cAAA,OAAKkN,MAAO,CAAEhJ,QAAS,SACnB/f,IAAA6b,cAAA,SACIjR,KAAK,OACLwZ,IAAK2pC,EACLrsC,SAAWqO,GAtGDA,KAE1B,MAAMo+B,EAAOC,gBAAKr+B,EAAEpO,OAAOjR,OACvBy9C,GACAL,EAAcK,IAkGeE,CAAqBt+B,MAG9C/vB,IAAA6b,cAACisB,KAAM,CACHC,cAAe4tC,EACf3tC,oBAAoB,EACpBC,iBAAkButC,GAClBttC,SAAUA,CAACC,EAAQ1/B,KACf7E,WAAW,KAtGCyX,WAE5B,MAAMw6D,EAAoB,IAAK1tC,EAAQ2tC,SAAS,EAAMvhE,UAAWs5C,EAAalqB,OAAOkqB,EAAWloD,MAAMomB,QAAQ,KAAM,KAAOoc,EAAO5zB,UAAY+gE,GAAKS,SAAS5tC,EAAO5zB,WAAWwX,QAAQ,KAAM,KAAO,MAEnM,IACI,GAAI2pD,GAEA,SADM97D,GAAIqnB,IAAI,mBAAD//B,OAAoBw0E,GAAmBG,GAClC,MAAdhoB,EAAoB,CACpB,MAAM3C,EAAW,IAAIC,SACrBD,EAASG,OAAO,WAAY,gBAC5BH,EAASG,OAAO,OAAQwC,SAClBj0C,GAAIoD,KAAK,mBAAD9b,OACSw0E,EAAe,iBAClCxqB,QAGL,CACH,MAAM,KAAEryC,SAAee,GAAIoD,KAAK,kBAAmB64D,GACnD,GAAkB,MAAdhoB,EAAoB,CACpB,MAAM3C,EAAW,IAAIC,SACrBD,EAASG,OAAO,WAAY,gBAC5BH,EAASG,OAAO,OAAQwC,SAClBj0C,GAAIoD,KAAK,mBAAD9b,OAAoB2X,EAAKlO,GAAE,iBAAiBugD,IAGlElyC,IAAMxT,QAAQuS,KAAKkB,EAAE,iCACA,mBAAVlV,GAEPA,IAEN,MAAOyU,GACLD,GAAWC,GAEf2W,KAsEoB6mD,CAAwB7tC,GACxB1/B,EAAQ4/B,eAAc,IACvB,OAGNzc,IAAA,IAAC,QAAE0c,EAAO,OAAEC,EAAM,aAAEC,EAAY,cAAEgmB,EAAa,OAAErmB,GAAQvc,EAAA,OACtD5rB,IAAA6b,cAAC4sB,KAAI,KACDzoC,IAAA6b,cAAC6S,KAAa,CAACC,UAAQ,GACnB3uB,IAAA6b,cAACupB,KAAI,CAACnD,QAAS,EAAGoD,WAAS,GACvBrlC,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAIF,MAAI,GACdtlC,IAAA6b,cAAC6sB,KAAK,CACFC,GAAIlnB,KACJmnB,WAAS,EACT92B,MAAOiG,KAAKkB,EAAE,kCACdtT,KAAK,YACLmT,MAAOwvB,EAAQ72B,WAAaojB,QAAQ0T,EAAO92B,WAC3Co3B,WAAYP,EAAQ72B,WAAa82B,EAAO92B,UACxCmQ,QAAQ,WACR1B,OAAO,QACP2Q,WAAS,KAGjB7wB,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAIF,MAAI,GACdtlC,IAAA6b,cAAC6sB,KAAK,CACFC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,gCACdtT,KAAK,UACL27C,SAAU0M,EACVl1C,MAAOwvB,EAAQv+B,SAAW8qB,QAAQ0T,EAAOx+B,SACzC8+B,WAAYP,EAAQv+B,SAAWw+B,EAAOx+B,QACtC6X,QAAQ,WACR1B,OAAO,QACP8jC,WAAW,EACXD,KAAM,EACNlzB,WAAS,KAIjB7wB,IAAA6b,cAACupB,KAAI,CAACE,MAAI,GACNtlC,IAAA6b,cAACqxC,GAAsB,CACnB1mD,SAAUgiC,EACV1mB,QAAS/F,GAxFvBV,OAAO+xC,EAAQqB,KACrC,MAAMniC,EAAK0hC,EAAgBj5B,QACrB25B,EAAgBpiC,EAAGvQ,MAAM5Z,UAAU,EAAGmqB,EAAGqiC,gBACzCC,EAAiBtiC,EAAGvQ,MAAM5Z,UAAUmqB,EAAGuiC,cACvCC,EAAexiC,EAAGqiC,eAAiBvB,EAAOrrD,OAEhD0sD,EAAa,UAAU,GAADvtD,OAAKwtD,GAAaxtD,OAAGksD,GAAMlsD,OAAG0tD,UAE9C,IAAIlyC,QAAQihC,GAAK/5C,WAAW+5C,EAAG,MACrCqQ,EAAgBj5B,QAAQg6B,kBAAkBD,EAAcA,IA+EFE,CAAkBjzC,EAAOyyC,OAGjDmnB,EAAcphE,WAAas5C,IACzB7tD,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAIF,MAAI,GACdtlC,IAAA6b,cAACgG,KAAM,CAACiU,UAAW91B,IAAA6b,cAACksC,KAAc,OAC7B8F,EAAaA,EAAWloD,KAAOgwE,EAAc/jE,WAElD5R,IAAA6b,cAAC+G,IAAU,CACPd,QAASA,IAAMwN,GAAoB,GACnCriB,MAAM,aAENjN,IAAA6b,cAACo9B,KAAiB,CAAChsC,MAAM,kBAM7CjN,IAAA6b,cAAC+S,KAAa,MACRi/B,IAAe8nB,EAAcphE,WAC3BvU,IAAA6b,cAACgG,KAAM,CACH5U,MAAM,UACN6U,QAASA,IAAMisC,EAAeh5B,QAAQm6B,QACtC1oD,SAAUgiC,EACV5mB,QAAQ,YAEP7J,KAAKkB,EAAE,iCAGhBjZ,IAAA6b,cAACgG,KAAM,CACHC,QAASqN,EACTliB,MAAM,YACNzG,SAAUgiC,EACV5mB,QAAQ,YAEP7J,KAAKkB,EAAE,iCAEZjZ,IAAA6b,cAACgG,KAAM,CACHjX,KAAK,SACLqC,MAAM,UACNzG,SAAUgiC,EACV5mB,QAAQ,YACRJ,UAAWR,EAAQgmB,YAEH,GAAA9lC,OAAfw0E,EACQ39D,KAAKkB,EAAE,8BACPlB,KAAKkB,EAAE,8BACfuvB,GACGxoC,IAAA6b,cAACwP,KAAgB,CACbC,KAAM,GACN9J,UAAWR,EAAQ8J,yBC1R/D,MAAM5Q,GAAUA,CAACC,EAAOC,KACtB,GAAoB,uBAAhBA,EAAOxP,KAA+B,CAIxC,MAAMqrE,EAAgB77D,EAAOC,QACvB67D,EAAmB,GAgBzB,OAbIz4D,mBAAQw4D,IACVA,EAAcpxD,QAAS8wD,IACrB,MAAMQ,EAAqBh8D,EAAMzY,UAC9BqjB,GAAMA,EAAEpa,KAAOgrE,EAAchrE,KAEJ,IAAxBwrE,EACFh8D,EAAMg8D,GAAsBR,EAE5BO,EAAiB10E,KAAKm0E,KAKrB,IAAIx7D,KAAU+7D,GAGvB,GAAoB,yBAAhB97D,EAAOxP,KAAiC,CAC1C,MAAM+qE,EAAgBv7D,EAAOC,QACvB87D,EAAqBh8D,EAAMzY,UAAWqjB,GAAMA,EAAEpa,KAAOgrE,EAAchrE,IAEzE,OAA4B,IAAxBwrE,GACFh8D,EAAMg8D,GAAsBR,EACrB,IAAIx7D,IAEJ,CAACw7D,KAAkBx7D,GAI9B,GAAoB,wBAAhBC,EAAOxP,KAAgC,CACzC,MAAM8qE,EAAkBt7D,EAAOC,QAEzB87D,EAAqBh8D,EAAMzY,UAAWqjB,GAAMA,EAAEpa,KAAO+qE,GAI3D,OAH4B,IAAxBS,GACFh8D,EAAMvY,OAAOu0E,EAAoB,GAE5B,IAAIh8D,GAGb,GAAoB,UAAhBC,EAAOxP,KACT,MAAO,IAILgV,GAAYC,YAAYnG,IAAK,CACjCgwB,UAAW,CACTrX,KAAM,EACNzH,QAASlR,EAAMuoB,QAAQ,GACvB5Q,UAAW,YACR3X,EAAM4X,oBAyOE8kD,OArOQA,KACrB,MAAMp1D,EAAUpB,MAET5E,EAASC,GAAcC,oBAAS,IAChCsL,EAAYC,GAAiBvL,mBAAS,IACtCmZ,EAASC,GAAcpZ,oBAAS,IAChCm7D,EAAuBC,GAA4Bp7D,mBAAS,OAC5Dq7D,EAAuBC,GAA4Bt7D,mBAAS,OAC5Du7D,EAAwBC,GAA6Bx7D,oBAAS,IAC9Dg9C,EAAkBC,GAAuBj9C,oBAAS,IAClDwL,EAAa8yB,GAAkBt+B,mBAAS,KACxCy7D,EAAgB77D,GAAYC,qBAAWb,GAAS,KACjD,KAAEpJ,GAASqK,qBAAWyD,KACtB,QAAEtR,GAAYwD,EAEdzQ,EAAgB8a,qBAAWlW,GAEjCmW,oBAAU,KACRN,EAAS,CAAElQ,KAAM,UACjB6b,EAAc,IACb,CAACC,IAEJtL,oBAAU,KACRH,GAAW,GACX,MAAMuM,EAAkB5jB,WAAW,KACjCgzE,KACC,KACH,MAAO,IAAMlvD,aAAaF,IAEzB,CAACd,EAAaF,IAEjBpL,oBAAU,KACR,MAAMxY,EAAYkO,EAAKlO,UACjBkC,EAASzE,EAAcsC,UAAUC,GAUvC,OARAkC,EAAOnE,GAAG,UAADO,OAAW0B,EAAS,kBAAmBiW,IAC1B,WAAhBA,EAAKuB,QAAuC,WAAhBvB,EAAKuB,QACnCU,EAAS,CAAElQ,KAAM,uBAAwByP,QAASxB,EAAK+xB,SAErC,WAAhB/xB,EAAKuB,QACPU,EAAS,CAAElQ,KAAM,sBAAuByP,SAAUxB,EAAKlO,OAGpD,KACL7F,EAAOzC,eAER,CAAChC,EAAeyQ,EAAKlO,YAExB,MAAMg0E,EAAsBv7D,UAC1B,IACoBvK,EAAKlO,UAAvB,MAEM,KAAEiW,SAAee,GAAI0B,IAAI,kBAAmB,CAChDla,OAAQ,CAAEslB,cAAaF,aAAY1jB,OAAQgO,EAAKnG,MAGlDmQ,EAAS,CAAElQ,KAAM,qBAAsByP,QAASxB,EAAKmP,UACrDsM,EAAWzb,EAAKwb,SAChBpZ,GAAW,GACX,MAAOzC,GACPD,GAAWC,KAqDf,OACExY,IAAA6b,cAACs5C,GAAa,KACZn1D,IAAA6b,cAACuS,GAAiB,CAChB9oB,MAAOixE,GAAqB,GAAAr1E,OAAO6W,KAAKkB,EAAE,+CAA8C,KAAA/X,OAAIq1E,EAAsB9kE,UAAS,KAC3H7C,KAAMspD,EACN7pC,QAAS8pC,EACT7pC,UAAWA,IAjCiBjT,WAChC,UACQzB,GAAIlT,OAAO,mBAADxF,OAAoBw0E,IACpC18D,IAAMxT,QAAQuS,KAAKkB,EAAE,kCACrB,MAAOT,GACPD,GAAWC,GAEbg+D,EAAyB,MACzBh9B,EAAe,IACf/yB,EAAc,GACdmwD,IACA97D,EAAS,CAAElQ,KAAM,WAsBIisE,CAA0BN,EAAsB5rE,KAEhEoN,KAAKkB,EAAE,kDAEVjZ,IAAA6b,cAAC45D,GAAkB,CACjBqB,gBAAiBA,KACfrwD,EAAc,GACdmwD,KAEFhoE,KAAM6nE,EACNpoD,QA5DgC0oD,KACpCT,EAAyB,MACzBI,GAA0B,GAE1BE,KAyDIpoD,kBAAgB,oBAChBknD,gBAAiBW,GAAyBA,EAAsB1rE,KAElE3K,IAAA6b,cAACw5C,GAAU,KACTr1D,IAAA6b,cAACupB,KAAI,CAACrc,MAAO,CAAE3I,MAAO,SAAWilB,WAAS,GACxCrlC,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI4R,GAAI,EAAG9R,MAAI,GACvBtlC,IAAA6b,cAAC61B,GAAK,KAAE35B,KAAKkB,EAAE,yBAEjBjZ,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI4R,GAAI,EAAG9R,MAAI,GACvBtlC,IAAA6b,cAACupB,KAAI,CAACnD,QAAS,EAAGoD,WAAS,GACzBrlC,IAAA6b,cAACupB,KAAI,CAACI,GAAI,EAAG4R,GAAI,EAAG9R,MAAI,GACtBtlC,IAAA6b,cAAC4F,KAAS,CACRoP,WAAS,EACTpiB,YAAasJ,KAAKkB,EAAE,mCACpBrO,KAAK,SACLmR,MAAO2K,EACPhF,SAtEMvgB,IACpBq4C,EAAer4C,EAAMwgB,OAAO5F,MAAMsiC,gBAsEpBxC,WAAY,CACViuB,eACE9pE,IAAA6b,cAACu3C,KAAc,CAACpqC,SAAS,SACvBhpB,IAAA6b,cAACulC,KAAU,CAACr4B,MAAO,CAAE9b,MAAO,eAMtCjN,IAAA6b,cAACupB,KAAI,CAACI,GAAI,EAAG4R,GAAI,EAAG9R,MAAI,GACtBtlC,IAAA6b,cAACgG,KAAM,CACLgP,WAAS,EACTjP,QAAQ,YACRE,QAhGqBk1D,KACnCV,EAAyB,MACzBI,GAA0B,IA+FZzpE,MAAM,WAEL8K,KAAKkB,EAAE,mCAOpBjZ,IAAA6b,cAACivB,KAAK,CACJtpB,UAAWR,EAAQ0oB,UACnB9nB,QAAQ,WACRwV,SApEgBrH,IACpB,IAAKsE,GAAWrZ,EAAS,OACzB,MAAM,UAAEqc,EAAS,aAAE0T,EAAY,aAAEC,GAAiBjb,EAAEqF,cAChD2V,GAAgB1T,EAAY,KAAO2T,GANvCvkB,EAAe6U,GAAcA,EAAY,KAyErCt7B,IAAA6b,cAACm0B,KAAK,CAAC1kB,KAAK,SACVtrB,IAAA6b,cAACo0B,KAAS,KACRjwC,IAAA6b,cAACq0B,KAAQ,KACPlwC,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACdr4B,KAAKkB,EAAE,kCAGVjZ,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACdr4B,KAAKkB,EAAE,kCAEVjZ,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACdr4B,KAAKkB,EAAE,kCAIdjZ,IAAA6b,cAACw0B,KAAS,KACRrwC,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACG+tD,EAAev0D,IAAKuzD,IAAa,IAAAsB,EAAA,OAChCj3E,IAAA6b,cAACq0B,KAAQ,CAACtyB,IAAK+3D,EAAchrE,IAC3B3K,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAAUulC,EAAclkE,WAEzCzR,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACS,QADD6mC,EACtBtB,EAAc/jE,iBAAS,IAAAqlE,IAAIl/D,KAAKkB,EAAE,+BAErCjZ,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACfpwC,IAAA6b,cAAC+G,IAAU,CACT0I,KAAK,QACLxJ,QAASA,IA1HI6zD,KAE/BW,EAAyBX,GACzBe,GAA0B,IAuHOQ,CAAwBvB,IAEvC31E,IAAA6b,cAACiH,KAAQ,OAIX9iB,IAAA6b,cAAC+G,IAAU,CACT0I,KAAK,QACLxJ,QAAUiO,IACRooC,GAAoB,GACpBqe,EAAyBb,KAG3B31E,IAAA6b,cAACo9B,KAAiB,WAKzBj+B,GAAWhb,IAAA6b,cAAC25C,GAAgB,CAACC,QAAS,U,sBCpTrD,MAAM71C,GAAYC,YAAWnG,IAAK,CAChCoG,KAAM,CACJC,QAAS,OACTE,WAAY,SACZ2K,QAASlR,EAAMuoB,QAAQ,IAEzBzd,OAAQ,CACNgY,WAAY,UACZsN,OAAQ,OACRlf,QAAS,OACT3d,MAAO,QACP4d,WAAY,OACZhK,aAAc,UAuKHs2D,OAlKAA,KACb,MAAMn2D,EAAUpB,KACV3D,EAAUC,wBAEThM,EAAMotC,GAAWpiC,mBAAS,KAC1Bk8D,EAAYC,GAAiBn8D,oBAAS,IACtCo8D,EAAuBC,GAA4Br8D,oBAAS,GAiBnEE,oBAAU,KAdQC,WAChB,IACE,MACMm8D,SADiB59D,GAAI0B,IAAI,iBACFzC,KAAK4+D,OAAS,GAE3Cn6B,EAAQk6B,SAGF31C,EAAa61C,GACnB,MAAO5+D,GACP/X,QAAQqB,IAAI0W,KAKdq3D,IACC,IAEH,MAAOhiB,EAAM2iB,GAAW51D,mBAAS,CAC/By8D,MAAO,MAIFjpE,EAASkzB,GAAc1mB,mBAAS,KACjC,KAAEpK,GAASqK,qBAAWyD,KACtB,QAAEtR,EAAO,OAAE2C,GAAWa,EACtB4mE,EAAa5mE,EAAKb,OAAOmS,IAAI5V,GAASA,EAAMorE,UAAUz8C,SAEtD0G,EAAexmB,UACnB,IAEE,MAAM,KAAExC,SAAee,GAAI0B,IAAI,iBAAkB,CAC/Cla,OAAQ,CACNsgC,SAAUr+B,KAAK6Z,UAAUw6D,GACzBG,OAAO,KAGXj2C,EAAW/oB,EAAKnK,SAChB,MAAO8J,GACPzX,QAAQqB,IAAIoW,GACZopB,EAAW,MA+ETk2C,EAAmBjrD,IAEvB5Q,EAAQza,KAAK,YAAcqrB,IAG7BzR,oBAAU,KA/EYs8D,KACpB,MAAMj7B,EAAkB/tC,EAAQoZ,OAAOoM,GAAiC,IAAvBA,EAAOhkB,KAAKnO,QAEvD41E,EAAQ,CACZ,CACEhtE,GAAI,QACJrF,MAAOyS,KAAKkB,EAAE,aACdnH,MAAO,IACPimE,MAAOt7B,EAAgBr6B,IAAI8R,IAAM,CAC/BvpB,GAAIupB,EAAOvpB,GAAGqtE,WACdlmE,MAAO,gBAAeoiB,EAAOvpB,GAAGqtE,WAChC5nD,YACIpwB,IAAA6b,cAAA,WACE7b,IAAA6b,cAAA,SACGqY,EAAOtmB,QAAQhB,OAChB5M,IAAA6b,cAAA,WACCqY,EAAO2M,aAEV7gC,IAAA6b,cAAA,UACE2F,UAAWR,EAAQwD,OACnB1C,QAASA,KACPg2D,EAAgB5jD,EAAOrH,QACtB,eAKXvnB,MAAO4uB,EAAOtmB,QAAQjI,KACtB4T,WAAW,EACXyc,KAAM,YAAc9B,EAAOrH,YAG5B3c,EAAKkS,IAAIwZ,IACV,MAAM6gB,EAAkB/tC,EAAQoZ,OAAOoM,GACtBA,EAAOhkB,KAAKkS,IAAIwZ,GAAOA,EAAIjxB,IAC5B4U,SAASqc,EAAIjxB,KAG7B,MAAO,CACLA,GAAIixB,EAAIjxB,GAAGqtE,WACX1yE,MAAOs2B,EAAIj2B,KACXmM,MAAO8pB,EAAIjxB,GAAGqtE,WACdD,MAAOt7B,EAAgBr6B,IAAI8R,IAAM,CAC/BvpB,GAAIupB,EAAOvpB,GAAGqtE,WACdlmE,MAAO,gBAAeoiB,EAAOvpB,GAAGqtE,WAChC5nD,YACEpwB,IAAA6b,cAAA,WACE7b,IAAA6b,cAAA,SACGqY,EAAOtmB,QAAQhB,OAChB5M,IAAA6b,cAAA,WACCqY,EAAO2M,aAEV7gC,IAAA6b,cAAA,UACE2F,UAAWR,EAAQwD,OACnB1C,QAASA,KAEPg2D,EAAgB5jD,EAAOrH,QACtB,eAKTvnB,MAAO4uB,EAAOtmB,QAAQjI,KACtB4T,WAAW,EACXyc,KAAM,YAAc9B,EAAOrH,QAE7B9D,MAAO,CAAEnI,gBAAiBgb,EAAI3uB,MAAOA,MAAO,aAKlD6jE,EAAQ,CAAE6G,WASVM,IACD,CAAC/nE,EAAMxB,EAAS0oE,IAejB,OACEp3E,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQlB,MACtB9f,IAAA6b,cAACq8D,KAAK,CACVr/D,KAAMs1C,EACNgqB,sBAjBuB98D,MAAO+8D,EAAQC,EAAcC,KAClD,UAEY1+D,GAAIlT,OAAO,gBAADxF,OAAiBo3E,IACnCt/D,IAAMxT,QAAQ,8BACNoU,GAAIqnB,IAAI,gBAAD//B,OAAiBo3E,EAAY,KAAAp3E,OAAIm3E,IAChDr/D,IAAMxT,QAAQ,sCAEhB,MAAOgT,GACPzX,QAAQqB,IAAIoW,KAShBuQ,MAAO,CAACnI,gBAAiB,iCClJZ23D,OA7BD58D,IAA2D,IAAxD+I,UAAW8zD,EAAS,UAAEC,GAAY,KAAUrtD,GAAMzP,EAClE,MAAM,OAAEQ,EAAM,QAAEnB,GAAYG,qBAAWyD,IAEvC,OAAKzC,GAAUs8D,EAEbz4E,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACE5N,GAAWhb,IAAA6b,cAACutB,GAAe,MAC5BppC,IAAA6b,cAAC68D,WAAQ,CAAC30D,GAAI,CAAEue,SAAU,SAAUnoB,MAAO,CAAE2wC,KAAM1/B,EAAKtnB,cAKvDqY,IAAWs8D,EAEbz4E,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACE5N,GAAWhb,IAAA6b,cAACutB,GAAe,MAC5BppC,IAAA6b,cAAC68D,WAAQ,CAAC30D,GAAI,CAAEue,SAAU,IAAKnoB,MAAO,CAAE2wC,KAAM1/B,EAAKtnB,aAAgB,KAMrE9D,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACE5N,GAAWhb,IAAA6b,cAACutB,GAAe,MAC5BppC,IAAA6b,cAAC88D,QAAWr0D,OAAAC,OAAA,GAAK6G,EAAI,CAAE1G,UAAW8zD,O,kCCMrC,MAAMI,GAAkB,CACtB3vD,SAAU,OACV8H,SAAU,SACVa,WAAY,SACZinD,aAAc,YAGVC,GAAYC,aAAgBl7D,KAClC,IAAIm7D,GAAkB,CACpB5mE,KAAM,OACN6mE,KAAM,OACN93E,MAAO,SACP+3E,OAAQ,WACRC,KAAM,SACNC,UAAW,eACXC,IAAK,MACLjjC,MAAO,SACPkjC,SAAU,WACVC,KAAM,aACNC,UAAW,QACXC,SAAU,YACVC,MAAO,OACPC,OAAQ,SACRC,gBAAiB,2CACjBC,SAAU,SAAkBzlC,GAC1B,MAAO,IAAMA,EAAQ,UAIzB,MAAMl6B,GAAUA,CAACC,EAAOC,KACtB,GAAoB,mBAAhBA,EAAOxP,KACT,MAAO,IAAIuP,KAAUC,EAAOC,SAG9B,GAAoB,qBAAhBD,EAAOxP,KAA6B,CACtC,MAAM6K,EAAW2E,EAAOC,QAClBy/D,EAAgB3/D,EAAMzY,UAAW8Y,GAAMA,EAAE7P,KAAO8K,EAAS9K,IAE/D,OAAuB,IAAnBmvE,GACF3/D,EAAM2/D,GAAiBrkE,EAChB,IAAI0E,IAEJ,CAAC1E,KAAa0E,GAIzB,GAAoB,oBAAhBC,EAAOxP,KAA4B,CACrC,MAAM4iD,EAAapzC,EAAOC,QAC1B,OAAOF,EAAM2N,OAAQtN,GAAMA,EAAE7P,KAAO6iD,GAGtC,MAAoB,UAAhBpzC,EAAOxP,KACF,GAGFuP,GAGHyF,GAAYC,YAAYnG,IAAK,CACjCgwB,UAAW,CACTrX,KAAM,EACNzH,QAASlR,EAAMuoB,QAAQ,GACvB5Q,UAAW,YACR3X,EAAM4X,oBAgOEyoD,OA5NGA,KAChB,MAAM/4D,EAAUpB,MAGV,KAAE9O,IAFQoL,uBAECf,qBAAWyD,MAErB5D,EAASC,GAAcC,oBAAS,IAChCsL,EAAYC,GAAiBvL,mBAAS,IACtCmZ,EAASC,GAAcpZ,oBAAS,IAChC8+D,EAAkBC,GAAuB/+D,mBAAS,OAClDg/D,EAAkBC,GAAuBj/D,mBAAS,OAClDg9C,EAAkBC,GAAuBj9C,oBAAS,IAClDwL,EAAa8yB,GAAkBt+B,mBAAS,KACxC5U,EAAWwU,GAAYC,qBAAWb,GAAS,KAC3Co1C,EAAmBC,GAAwBr0C,oBAAS,IACpDw9B,EAAW8W,GAAgBt0C,oBAvFfk/D,EAuFqC,aAtFnC,IAAIC,gBAAgBx2E,OAAOC,SAASgL,QACrCwM,IAAI8+D,KAF1B,IAAqBA,EA0FnB,MAAME,EAAiB7hB,sBAAYp9C,UACjC,IACE,MAAM,KAAExC,SAAee,GAAI0B,IAAI,cAAe,CAC5Cla,OAAQ,CAAEslB,cAAaF,gBAGzB1L,EAAS,CAAElQ,KAAM,iBAAkByP,QAASxB,EAAKvS,YACjDguB,EAAWzb,EAAKwb,SAChBpZ,GAAW,GACX,MAAOzC,GACPD,GAAWC,KAEZ,CAACkO,EAAaF,IAEX+zD,EAAuC9hB,sBAAY,KACnD/f,GACFiX,KAED,CAACjX,IAEEr4C,EAAgB8a,qBAAWlW,GAEjCmW,oBAAU,KACRN,EAAS,CAAElQ,KAAM,UACjB6b,EAAc,IACb,CAACC,IAEJtL,oBAAU,KACRH,GAAW,GACX,MAAMuM,EAAkB5jB,WAAW,KACjC02E,KACC,KACH,MAAO,IAAM5yD,aAAaF,IACzB,CACDd,EACAF,EACAkyB,EACA4hC,EACAC,IAGFn/D,oBAAU,KACRm/D,IACA,MAAMz1E,EAASzE,EAAcsC,UAAUmO,EAAKlO,WAY5C,OAVAkC,EAAOnE,GAAG,UAADO,OAAW4P,EAAKlO,UAAS,aAAciW,IAC1B,WAAhBA,EAAKuB,QAAuC,WAAhBvB,EAAKuB,QACnCU,EAAS,CAAElQ,KAAM,mBAAoByP,QAASxB,EAAKpD,WAGjC,WAAhBoD,EAAKuB,QACPU,EAAS,CAAElQ,KAAM,kBAAmByP,SAAUxB,EAAK20C,eAIhD,KACL1oD,EAAOzC,eAER,CAACk4E,EAAsCl6E,EAAeyQ,IAEzD,MAIM6+C,EAA0BA,KAC9BsqB,EAAoB,MACpB1qB,GAAqB,IAiBjBirB,EAAuBn/D,UAC3B,UACQzB,GAAIlT,OAAO,cAADxF,OAAessD,IAC/Bx0C,IAAMxT,QAAQuS,KAAKkB,EAAE,6BACrB,MAAOT,GACPD,GAAWC,GAEb2hE,EAAoB,MACpB3gC,EAAe,IACf/yB,EAAc,GAEd3L,EAAS,CAAElQ,KAAM,UACjB6b,EAAc,SACR6zD,KAsBR,OACEt6E,IAAA6b,cAACs5C,GAAa,KACZn1D,IAAA6b,cAACuS,GAAiB,CAChB9oB,MACE40E,GAAgB,GAAAh5E,OACb6W,KAAKkB,EAAE,4CAEZrK,KAAMspD,EACN7pC,QAASA,IAAM8pC,GAAoB,GACnC7pC,UAAWA,IAAMksD,EAAqBN,EAAiBvvE,KAEtDoN,KAAKkB,EAAE,8CAEVjZ,IAAA6b,cAAC0xC,GAAa,CACZ3+C,KAAM0gD,EACNjhC,QAhE2BwhC,KAC/BoqB,EAAoB,MACpB1qB,GAAqB,IA+DjBxrD,OAAQu2E,EACR9rD,kBAAgB,oBAChBg/B,WAAYwsB,GAAoBA,EAAiBrvE,GACjD+tC,UAAWA,EACX+U,aA9EeA,KACnB+B,EAAa,OA+EXxvD,IAAA6b,cAACw5C,GAAU,KACTr1D,IAAA6b,cAAC61B,GAAK,KAAE35B,KAAKkB,EAAE,mBAAmB,KAAG3S,EAAUvE,OAAO,KACtD/B,IAAA6b,cAACy5C,GAAwB,KACvBt1D,IAAA6b,cAAC4F,KAAS,CACRhT,YAAasJ,KAAKkB,EAAE,8BACpBrO,KAAK,SACLmR,MAAO2K,EACPhF,SAzEYvgB,IACpBq4C,EAAer4C,EAAMwgB,OAAO5F,MAAMsiC,gBAyE1BxC,WAAY,CACViuB,eACE9pE,IAAA6b,cAACu3C,KAAc,CAACpqC,SAAS,SACvBhpB,IAAA6b,cAACulC,KAAU,CAACr4B,MAAO,CAAE9b,MAAO,cAKpCjN,IAAA6b,cAACgG,KAAM,CACLD,QAAQ,YACR3U,MAAM,UACN6U,QAAS6tC,GAER53C,KAAKkB,EAAE,4BAIdjZ,IAAA6b,cAACivB,KAAK,CAACtpB,UAAWR,EAAQ0oB,UAAW9nB,QAAQ,WAAWwV,SA9DtCrH,IACpB,IAAKsE,GAAWrZ,EAAS,OACzB,MAAM,UAAEqc,EAAS,aAAE0T,EAAY,aAAEC,GAAiBjb,EAAEqF,cAChD2V,GAAgB1T,EAAY,KAAO2T,GANvCvkB,EAAe6U,GAAcA,EAAY,KAkErCt7B,IAAA6b,cAAC4+D,KAAQ,CACPv1E,SAAU8zE,GACV0B,QAAS,CACTC,iBAAkB,YAClBC,cAAe,QAEf9B,UAAWA,GACX+B,OAAQv0E,EAAU8b,IAAK3M,IAAQ,CAC7BnQ,MACEtF,IAAA6b,cAAA,OAAK2F,UAAU,mBACbxhB,IAAA6b,cAAA,OAAKkN,MAAO6vD,IAAkBnjE,EAAS7H,QAAQjI,MAC/C3F,IAAA6b,cAACo9B,KAAiB,CAChBn3B,QAASA,IAAM04D,EAAqB/kE,EAAS9K,IAC7C6W,UAAU,gBAEZxhB,IAAA6b,cAACiH,KAAQ,CACPhB,QAASA,KAxGGrM,KAC1BwkE,EAAoBxkE,GACpB85C,GAAqB,IAuGLurB,CAAmBrlE,GACnB85C,GAAqB,IAEvB/tC,UAAU,eAIhBmqC,MAAO,IAAIjoD,KAAK+R,EAAS5H,QACzBktE,IAAK,IAAIr3E,KAAK+R,EAAS5H,WAEzBmtE,cAAc,QACdC,YAAY,MACZlyD,MAAO,CAAErI,OAAQ,U,kECtR3B,MAAMd,GAAYC,YAAYnG,IAAK,CACjCoG,KAAM,CACJC,QAAS,OACT0Q,SAAU,OACV7P,gBAAiB,QAGnBs6D,OAAQ,CACNt6D,gBAAiBlH,EAAM8f,QAAQ2hD,aAGjClyC,UAAW,CACTzoB,YAAa9G,EAAMuoB,QAAQ,GAC3B5P,KAAM,GAGRkmB,UAAW,CACTx4B,QAAS,OACT4T,eAAgB,SAChB1T,WAAY,UAGd+mB,WAAY,CACVhe,SAAU,YAGZ8B,eAAgB,CACd7d,MAAO8d,KAAM,KACb/B,SAAU,WACVgC,IAAK,MACLC,KAAM,MACNtK,WAAY,GACZuK,YAAa,OAIXkwD,GAAiBj0C,OAAaC,MAAM,CACxCzhC,KAAMwhC,OACHxB,IAAI,EAAG,cACPC,IAAI,GAAI,aACRyB,SAAS,cAorBCg0C,OAjrBO1/D,IAOf,IAPgB,KACrB/M,EAAI,QACJyf,EAAO,WACPitD,EAAU,cACVvzC,EAAa,OACb4Q,EAAM,gBACNm+B,GACDn7D,EACC,MAAMqF,EAAUpB,KACVyf,EAAY7K,kBAAO,IACnB,KAAE1jB,GAASqK,qBAAWyD,KACtB,UAAEhc,GAAckO,GACfq9C,EAAM2iB,GAAW51D,mBAAS,MAE3BqsB,EAAe,CACnB5hC,KAAM,GACNuN,SAAU,GACVC,SAAU,GACVC,SAAU,GACVC,SAAU,GACVC,SAAU,GACVC,qBAAsB,GACtBC,qBAAsB,GACtBC,qBAAsB,GACtBC,qBAAsB,GACtBC,qBAAsB,GACtBrL,OAAQ,UACRwK,cAAc,EACdF,YAAa,GACb4I,WAAY,GACZq3D,cAAe,GACf0I,UAAW,UACX34E,cAGK44E,EAAUC,GAAevgE,mBAASqsB,IAClC0S,EAAWC,GAAgBh/B,mBAAS,KACpC5I,EAAcopE,GAAmBxgE,mBAAS,KAC1CygE,EAAYC,GAAiB1gE,mBAAS,IACtC2yC,EAAYC,GAAiB5yC,mBAAS,OACtCmU,EAAkBC,GAAuBpU,oBAAS,IAClD2gE,EAAkBC,GAAuB5gE,oBAAS,GACnD6yC,EAAiBv5B,iBAAO,OACvBunD,EAAUC,GAAe9gE,mBAAS,IAEzCE,oBAAU,IACD,KACLikB,EAAUtK,SAAU,GAErB,IAEH3Z,oBAAU,KACR,WACE,IACE,MAAM,KAAEvC,SAAee,GAAI0B,IAAI,UAAW,CACxCla,OAAQ,CAAEwB,eAGZkuE,EAAQj4D,EAAKnI,OACb,MAAO8H,GACPD,GAAWC,KARf,IAWC,IAEH4C,oBAAU,KACR,GAAIikB,EAAUtK,QAAS,CA6BrB,GA5BIgT,GACF0zC,EAAangD,IACJ,IAAKA,KAAcyM,KAI9BnuB,GACG0B,IAAI,sBAAuB,CAAEla,OAAQ,CAAEwB,eACvC+3C,KAAK/uB,IAAA,IAAC,KAAE/S,GAAM+S,EAAA,OAAK8vD,EAAgB7iE,KAEtCe,GACG0B,IAAI,YAAa,CAAEla,OAAQ,CAAEwB,YAAW8F,QAAS,KACjDiyC,KAAK5B,IAAA,IAAC,KAAElgC,GAAMkgC,EAAA,OAAKmB,EAAarhC,KAEnCe,GAAI0B,IAAI,QAAS,CAAEla,OAAQ,CAAEwB,eAC1B+3C,KAAK6f,IAAe,IAAd,KAAE3hD,GAAM2hD,EACb,MAEMyhB,EAFcpjE,EAAK3I,KAEakS,IAAKwZ,IAAG,CAC5CjxB,GAAIixB,EAAIjxB,GACRhF,KAAMi2B,EAAIj2B,QAEZq2E,EAAYC,KAEbC,MAAOpjE,IACN/X,QAAQ+X,MAAM,yBAA0BA,MAGvCwiE,EAAY,OAEjB1hE,GAAI0B,IAAI,cAADpa,OAAeo6E,IAAc3gC,KAAKwhC,IAAe,IAAd,KAAEtjE,GAAMsjE,EAChDV,EAAapyD,IACX,IAAI+yD,EAAmB93D,OAAOC,OAAO,GAAI8E,GAUzC,OARA/E,OAAO+3D,QAAQxjE,GAAMgM,QAAQy3D,IAAmB,IAAjB1+D,EAAK7B,GAAMugE,EAEtCF,EAAiBx+D,GADP,gBAARA,GAAmC,KAAV7B,GAA0B,OAAVA,EACnB8B,IAAO9B,GAAOkC,OAAO,oBAEX,OAAVlC,EAAiB,GAAKA,IAI3CqgE,QAIZ,CAACd,EAAY1sE,EAAMm5B,EAAenlC,IAErCwY,oBAAU,KACR,MAAMzX,EAAMka,MACNjL,EAAciL,IAAO29D,EAAS5oE,aAC9B2pE,GACHC,OAAOC,MAAM7pE,EAAYsL,KAAKva,KAASiP,EAAYsL,KAAKva,EAAK,QAAU,EACpE+4E,EACgB,YAApBlB,EAASlzE,QACY,eAApBkzE,EAASlzE,QAA2Bi0E,EAEvCT,EAAoBY,IACnB,CAAClB,EAASlzE,OAAQkzE,EAAS5oE,cAE9B,MAAMuc,EAAcA,KAClBd,IACAotD,EAAYl0C,IA+DRo1C,EAAsBC,GAExB58E,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJ9W,GAAIiyE,EACJj3E,KAAMi3E,EACN/rD,WAAS,EACTkzB,KAAM,EACNjyC,MAAOiG,KAAKkB,EAAE,yBAAD/X,OAA0B07E,IACvCnuE,YAAasJ,KAAKkB,EAAE,4CACpB+qC,WAAW,EACXpiC,QAAQ,WACRinB,WAAW,6FACXriC,UAAWq1E,GAAwC,cAApBL,EAASlzE,SAKxCu0E,EAAkCD,GAEpC58E,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJ9W,GAAIiyE,EACJj3E,KAAMi3E,EACN/rD,WAAS,EACTkzB,KAAM,EACNjyC,MAAOiG,KAAKkB,EAAE,yBAAD/X,OAA0B07E,IACvCnuE,YAAasJ,KAAKkB,EAAE,4CACpB+qC,WAAW,EACXpiC,QAAQ,WACRpb,UAAWq1E,GAAwC,cAApBL,EAASlzE,SA2B9C,OACEtI,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQlB,MACtB9f,IAAA6b,cAACuS,GAAiB,CAChB9oB,MAAOyS,KAAKkB,EAAE,2CACdrK,KAAMygB,EACNhB,QAASA,IAAMiB,GAAoB,GACnChB,UA5EcjT,UACdwyC,IACFC,EAAc,MACdC,EAAeh5B,QAAQhZ,MAAQ,MAG7By/D,EAASjnE,kBACLqF,GAAIlT,OAAO,cAADxF,OAAes6E,EAAS7wE,GAAE,kBAC1C8wE,EAAapyD,IAAI,IAAWA,EAAM9U,UAAW,KAAM3C,UAAW,QAC9DoH,IAAMxT,QAAQuS,KAAKkB,EAAE,gCAqElBlB,KAAKkB,EAAE,8CAEVjZ,IAAA6b,cAAC0S,KAAM,CACL3f,KAAMA,EACNyf,QAASc,EACT0B,WAAS,EACTa,SAAS,KACTyK,OAAO,SAEPn8B,IAAA6b,cAAC4S,KAAW,CAAC9jB,GAAG,qBACbkxE,EACC77E,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACa,GAAA1nB,OAAVo6E,EACMvjE,KAAKkB,EAAE,2BACPlB,KAAKkB,EAAE,0BAGhBjZ,IAAA6b,cAAA7b,IAAA4oB,SAAA,QAAA1nB,OAAM6W,KAAKkB,EAAE,gCAGjBjZ,IAAA6b,cAAA,OAAKkN,MAAO,CAAEhJ,QAAS,SACrB/f,IAAA6b,cAAA,SACEjR,KAAK,OACLwZ,IAAK2pC,EACLrsC,SAAWqO,GArJSA,KAC5B,MAAMo+B,EAAOC,gBAAKr+B,EAAEpO,OAAOjR,OACvBy9C,GACFL,EAAcK,IAkJSE,CAAqBt+B,MAG1C/vB,IAAA6b,cAACisB,KAAM,CACLC,cAAeyzC,EACfxzC,oBAAoB,EACpBC,iBAAkBmzC,GAClBlzC,SAAUA,CAACC,EAAQ1/B,KACjB7E,WAAW,KAtJMyX,WACzB,IACE,MAAMyhE,EAAa,GASnB,GARAx4D,OAAO+3D,QAAQl0C,GAAQtjB,QAAQk4D,IAAmB,IAAjBn/D,EAAK7B,GAAMghE,EAExCD,EAAWl/D,GADD,gBAARA,GAAmC,KAAV7B,GAA0B,OAAVA,EACzB8B,IAAO9B,GAAOkC,OAAO,uBAEX,KAAVlC,EAAe,KAAOA,IAIxCu/D,EAAY,CAGd,SAFM1hE,GAAIqnB,IAAI,cAAD//B,OAAeo6E,GAAcwB,GAExB,MAAdjvB,EAAoB,CACtB,MAAM3C,EAAW,IAAIC,SACrBD,EAASG,OAAO,OAAQwC,SAClBj0C,GAAIoD,KAAK,cAAD9b,OAAeo6E,EAAU,iBAAiBpwB,GAE1D/7B,QACK,CACL,MAAM,KAAEtW,SAAee,GAAIoD,KAAK,aAAc8/D,GAE9C,GAAkB,MAAdjvB,EAAoB,CACtB,MAAM3C,EAAW,IAAIC,SACrBD,EAASG,OAAO,OAAQwC,SAClBj0C,GAAIoD,KAAK,cAAD9b,OAAe2X,EAAKlO,GAAE,iBAAiBugD,GAEnDvS,GACFA,EAAO9/B,GAETsW,IAEFnW,IAAMxT,QAAQuS,KAAKkB,EAAE,6BACrB,MAAOT,GACPzX,QAAQqB,IAAIoW,GACZD,GAAWC,KAmHHwkE,CAAmB70C,GACnB1/B,EAAQ4/B,eAAc,IACrB,OAGJ40C,IAAA,IAAC,OAAE90C,EAAM,OAAEI,EAAM,QAAED,EAAO,aAAEE,GAAcy0C,EAAA,OACzCj9E,IAAA6b,cAAC4sB,KAAI,KACHzoC,IAAA6b,cAAC6S,KAAa,CAACC,UAAQ,GACrB3uB,IAAA6b,cAACupB,KAAI,CAACnD,QAAS,EAAGoD,WAAS,GACzBrlC,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI6R,GAAI,EAAG/R,MAAI,GACvBtlC,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,8BACdtT,KAAK,OACLmT,MAAOwvB,EAAQ3iC,MAAQkvB,QAAQ0T,EAAO5iC,MACtCkjC,WAAYP,EAAQ3iC,MAAQ4iC,EAAO5iC,KACnCic,QAAQ,WACR1B,OAAO,QACP2Q,WAAS,EACTrP,UAAWR,EAAQioB,UACnBziC,UAAWq1E,KAGf77E,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI6R,GAAI,EAAG/R,MAAI,GACvBtlC,IAAA6b,cAACwqB,KAAW,CACVzkB,QAAQ,WACR1B,OAAO,QACP2Q,WAAS,EACTrP,UAAWR,EAAQimB,aAEnBjnC,IAAA6b,cAACyqB,KAAU,CAAC37B,GAAG,gCACZoN,KAAKkB,EAAE,uCAEVjZ,IAAA6b,cAAC6sB,KAAK,CACJC,GAAInC,KACJ10B,MAAOiG,KAAKkB,EAAE,sCACdxK,YAAasJ,KAAKkB,EAChB,sCAEF6vB,QAAQ,+BACRn+B,GAAG,eACHhF,KAAK,eACLmT,MACEwvB,EAAQx1B,cAAgB+hB,QAAQ0T,EAAOz1B,cAEzCtM,UAAWq1E,GAEX77E,IAAA6b,cAACiU,IAAQ,CAAC/T,OAAO,GAAO,gBACxB/b,IAAA6b,cAACiU,IAAQ,CAAC/T,OAAO,GAAM,iBAI7B/b,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI6R,GAAI,EAAG/R,MAAI,GACvBtlC,IAAA6b,cAACwqB,KAAW,CACVzkB,QAAQ,WACR1B,OAAO,QACP2Q,WAAS,EACTrP,UAAWR,EAAQimB,aAEnBjnC,IAAA6b,cAACyqB,KAAU,CAAC37B,GAAG,+BACZoN,KAAKkB,EAAE,sCAEVjZ,IAAA6b,cAAC6sB,KAAK,CACJC,GAAInC,KACJ10B,MAAOiG,KAAKkB,EAAE,qCACdxK,YAAasJ,KAAKkB,EAChB,qCAEF6vB,QAAQ,8BACRn+B,GAAG,gBACHhF,KAAK,gBACLmT,MACEwvB,EAAQuqC,eAAiBh+C,QAAQ0T,EAAOsqC,eAE1CrsE,UAAWq1E,GAEX77E,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAM,IAAG,WAClBzJ,GACCA,EAAa8P,IAAKzP,GAChB3S,IAAA6b,cAACiU,IAAQ,CACPlS,IAAKjL,EAAYhI,GACjBoR,MAAOpJ,EAAYhI,IAElBgI,EAAYhN,UAMzB3F,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI6R,GAAI,EAAG/R,MAAI,GACvBtlC,IAAA6b,cAACwqB,KAAW,CACVzkB,QAAQ,WACR1B,OAAO,QACP2Q,WAAS,EACTrP,UAAWR,EAAQimB,aAEnBjnC,IAAA6b,cAACyqB,KAAU,CAAC37B,GAAG,2BACZoN,KAAKkB,EAAE,kCAEVjZ,IAAA6b,cAAC6sB,KAAK,CACJC,GAAInC,KACJ10B,MAAOiG,KAAKkB,EAAE,iCACdxK,YAAasJ,KAAKkB,EAAE,iCACpB6vB,QAAQ,0BACRn+B,GAAG,YACHhF,KAAK,YACLmT,MAAOwvB,EAAQizC,WAAa1mD,QAAQ0T,EAAOgzC,WAC3C/0E,UAAWq1E,GAEX77E,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAM,IAAG,WAClB/Z,MAAMyb,QAAQs+D,IACbA,EAAS35D,IAAKvO,GACZ7T,IAAA6b,cAACiU,IAAQ,CAAClS,IAAK/J,EAAQlJ,GAAIoR,MAAOlI,EAAQlJ,IACvCkJ,EAAQlO,UAMrB3F,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI6R,GAAI,EAAG/R,MAAI,GACvBtlC,IAAA6b,cAACwqB,KAAW,CACVzkB,QAAQ,WACR1B,OAAO,QACP2Q,WAAS,EACTrP,UAAWR,EAAQimB,aAEnBjnC,IAAA6b,cAACyqB,KAAU,CAAC37B,GAAG,4BACZoN,KAAKkB,EAAE,mCAEVjZ,IAAA6b,cAAC6sB,KAAK,CACJC,GAAInC,KACJ10B,MAAOiG,KAAKkB,EAAE,kCACdxK,YAAasJ,KAAKkB,EAAE,kCACpB6vB,QAAQ,2BACRn+B,GAAG,aACHhF,KAAK,aACLmT,MAAOwvB,EAAQ9sB,YAAcqZ,QAAQ0T,EAAO/sB,YAC5ChV,UAAWq1E,GAEX77E,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAM,IAAG,WAClBk+B,GACCA,EAAU73B,IAAK3X,GACbzK,IAAA6b,cAACiU,IAAQ,CAAClS,IAAKnT,EAASE,GAAIoR,MAAOtR,EAASE,IACzCF,EAAS9E,UAMtB3F,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI6R,GAAI,EAAG/R,MAAI,GACvBtlC,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,qCACdtT,KAAK,cACLmT,MAAOwvB,EAAQ11B,aAAeiiB,QAAQ0T,EAAO31B,aAC7Ci2B,WAAYP,EAAQ11B,aAAe21B,EAAO31B,YAC1CgP,QAAQ,WACR1B,OAAO,QACPtV,KAAK,iBACLytC,gBAAiB,CACf9R,QAAQ,GAEV1V,WAAS,EACTrP,UAAWR,EAAQioB,UACnBziC,UAAWq1E,KAGf77E,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI6R,GAAI,EAAG/R,MAAI,GACzBtlC,IAAA6b,cAACwqB,KAAW,CACRzkB,QAAQ,WACR1B,OAAO,QACPsB,UAAWR,EAAQqlB,YACnBxV,WAAS,GAET7wB,IAAA6b,cAACyqB,KAAU,CAAC37B,GAAG,8BAA8BoN,KAAKkB,EAAE,mCACpDjZ,IAAA6b,cAAC6sB,KAAK,CACJC,GAAInC,KACJ10B,MAAOiG,KAAKkB,EAAE,kCACdtT,KAAK,aACLgF,GAAG,aACH8D,YAAasJ,KAAKkB,EAAE,kCACpB6vB,QAAQ,6BACR/sB,MAAOosB,EAAO+0C,YAAc,IAE5Bl9E,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,IAAM,UACtBoyC,EAAK/rC,IAAI+6D,GACRn9E,IAAA6b,cAACiU,IAAQ,CAAClS,IAAKu/D,EAAExyE,GAAIoR,MAAOohE,EAAExyE,IAC3BwyE,EAAEx3E,UAMb3F,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAIF,MAAI,GAChBtlC,IAAA6b,cAACglC,KAAI,CACH9kC,MAAO4/D,EACP56B,eAAe,UACfC,UAAU,UACVx/B,UAAWR,EAAQk6D,OACnBx5D,SAAUA,CAACqO,EAAG2tB,IAAMk+B,EAAcl+B,GAClC97B,QAAQ,YACRw7D,UAAQ,EACRr0D,MAAO,CACLlI,aAAc,IAGhB7gB,IAAA6b,cAAColC,KAAG,CAACnvC,MAAM,SAASuQ,MAAO,IAC3BriB,IAAA6b,cAAColC,KAAG,CAACnvC,MAAM,SAASuQ,MAAO,IAC3BriB,IAAA6b,cAAColC,KAAG,CAACnvC,MAAM,SAASuQ,MAAO,IAC3BriB,IAAA6b,cAAColC,KAAG,CAACnvC,MAAM,SAASuQ,MAAO,IAC3BriB,IAAA6b,cAAColC,KAAG,CAACnvC,MAAM,SAASuQ,MAAO,KAE7BriB,IAAA6b,cAAC6f,KAAG,CAAC3S,MAAO,CAAEgJ,WAAY,GAAI+X,OAAQ,SACpB,IAAf6xC,GACC37E,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACGuf,EAAOr1B,aACN9S,IAAA6b,cAACupB,KAAI,CAACnD,QAAS,EAAGoD,WAAS,GACzBrlC,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI6R,GAAI,EAAG/R,MAAI,GACvBtlC,IAAA6b,cAAA7b,IAAA4oB,SAAA,KAAG+zD,EAAmB,cAExB38E,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI6R,GAAI,EAAG/R,MAAI,GACvBtlC,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACGi0D,EACC,2BAMR78E,IAAA6b,cAAA7b,IAAA4oB,SAAA,KAAG+zD,EAAmB,cAIZ,IAAfhB,GACC37E,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACGuf,EAAOr1B,aACN9S,IAAA6b,cAACupB,KAAI,CAACnD,QAAS,EAAGoD,WAAS,GACzBrlC,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI6R,GAAI,EAAG/R,MAAI,GACvBtlC,IAAA6b,cAAA7b,IAAA4oB,SAAA,KAAG+zD,EAAmB,cAExB38E,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI6R,GAAI,EAAG/R,MAAI,GACvBtlC,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACGi0D,EACC,2BAMR78E,IAAA6b,cAAA7b,IAAA4oB,SAAA,KAAG+zD,EAAmB,cAIZ,IAAfhB,GACC37E,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACGuf,EAAOr1B,aACN9S,IAAA6b,cAACupB,KAAI,CAACnD,QAAS,EAAGoD,WAAS,GACzBrlC,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI6R,GAAI,EAAG/R,MAAI,GACvBtlC,IAAA6b,cAAA7b,IAAA4oB,SAAA,KAAG+zD,EAAmB,cAExB38E,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI6R,GAAI,EAAG/R,MAAI,GACvBtlC,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACGi0D,EACC,2BAMR78E,IAAA6b,cAAA7b,IAAA4oB,SAAA,KAAG+zD,EAAmB,cAIZ,IAAfhB,GACC37E,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACGuf,EAAOr1B,aACN9S,IAAA6b,cAACupB,KAAI,CAACnD,QAAS,EAAGoD,WAAS,GACzBrlC,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI6R,GAAI,EAAG/R,MAAI,GACvBtlC,IAAA6b,cAAA7b,IAAA4oB,SAAA,KAAG+zD,EAAmB,cAExB38E,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI6R,GAAI,EAAG/R,MAAI,GACvBtlC,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACGi0D,EACC,2BAMR78E,IAAA6b,cAAA7b,IAAA4oB,SAAA,KAAG+zD,EAAmB,cAIZ,IAAfhB,GACC37E,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACGuf,EAAOr1B,aACN9S,IAAA6b,cAACupB,KAAI,CAACnD,QAAS,EAAGoD,WAAS,GACzBrlC,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI6R,GAAI,EAAG/R,MAAI,GACvBtlC,IAAA6b,cAAA7b,IAAA4oB,SAAA,KAAG+zD,EAAmB,cAExB38E,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI6R,GAAI,EAAG/R,MAAI,GACvBtlC,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACGi0D,EACC,2BAMR78E,IAAA6b,cAAA7b,IAAA4oB,SAAA,KAAG+zD,EAAmB,iBAM9BnB,EAASjnE,WAAas5C,IACtB7tD,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAIF,MAAI,GAChBtlC,IAAA6b,cAACgG,KAAM,CAACiU,UAAW91B,IAAA6b,cAACksC,KAAc,OACjB,MAAd8F,EACGA,EAAWloD,KACX61E,EAAS5pE,WAEdiqE,GACC77E,IAAA6b,cAAC+G,IAAU,CACTd,QAASA,IAAMwN,GAAoB,GACnCriB,MAAM,aAENjN,IAAA6b,cAACo9B,KAAiB,UAO9Bj5C,IAAA6b,cAAC+S,KAAa,KACS,cAApB4sD,EAASlzE,QACRtI,IAAA6b,cAACgG,KAAM,CACL5U,MAAM,UACN6U,QAASA,IAtYHzG,WACtB,UACQzB,GAAIoD,KAAK,cAAD9b,OAAes6E,EAAS7wE,GAAE,aACxCqO,IAAMxT,QAAQuS,KAAKkB,EAAE,6BACrBwiE,EAAapyD,IAAI,IAAWA,EAAM/gB,OAAQ,kBAC1CwuE,IACA,MAAOt+D,GACPQ,IAAMF,MAAMN,EAAIzO,WA+XaszE,GACfz7D,QAAQ,YAEP7J,KAAKkB,EAAE,qCAGS,iBAApBuiE,EAASlzE,QACRtI,IAAA6b,cAACgG,KAAM,CACL5U,MAAM,UACN6U,QAASA,IA1ZJzG,WACrB,UACQzB,GAAIoD,KAAK,cAAD9b,OAAes6E,EAAS7wE,GAAE,YACxCqO,IAAMxT,QAAQuS,KAAKkB,EAAE,4BACrBwiE,EAAapyD,IAAI,IAAWA,EAAM/gB,OAAQ,eAC1CwuE,IACA,MAAOt+D,GACPQ,IAAMF,MAAMN,EAAIzO,WAmZauzE,GACf17D,QAAQ,YAEP7J,KAAKkB,EAAE,qCAGV40C,IAAe2tB,EAASjnE,WAAasnE,GACrC77E,IAAA6b,cAACgG,KAAM,CACL5U,MAAM,UACN6U,QAASA,IAAMisC,EAAeh5B,QAAQm6B,QACtC1oD,SAAUgiC,EACV5mB,QAAQ,YAEP7J,KAAKkB,EAAE,oCAGZjZ,IAAA6b,cAACgG,KAAM,CACLC,QAASqN,EACTliB,MAAM,YACNzG,SAAUgiC,EACV5mB,QAAQ,YAEP7J,KAAKkB,EAAE,oCAER4iE,GAAwC,cAApBL,EAASlzE,SAC7BtI,IAAA6b,cAACgG,KAAM,CACLjX,KAAK,SACLqC,MAAM,UACNzG,SAAUgiC,EACV5mB,QAAQ,YACRJ,UAAWR,EAAQgmB,YAER,GAAA9lC,OAAVo6E,EACMvjE,KAAKkB,EAAE,iCACPlB,KAAKkB,EAAE,iCACbuvB,GACCxoC,IAAA6b,cAACwP,KAAgB,CACfC,KAAM,GACN9J,UAAWR,EAAQ8J,yBC1sB3C,MAAM5Q,GAAUA,CAACC,EAAOC,KACtB,GAAoB,mBAAhBA,EAAOxP,KAA2B,CACpC,MAAMvE,EAAY+T,EAAOC,QACnBkjE,EAAe,GAarB,OAXI9/D,mBAAQpX,IACVA,EAAUwe,QAAS22D,IACjB,MAAMgC,EAAgBrjE,EAAMzY,UAAWqjB,GAAMA,EAAEpa,KAAO6wE,EAAS7wE,KACxC,IAAnB6yE,EACFrjE,EAAMqjE,GAAiBhC,EAEvB+B,EAAa/7E,KAAKg6E,KAKjB,IAAIrhE,KAAUojE,GAGvB,GAAoB,qBAAhBnjE,EAAOxP,KAA6B,CACtC,MAAM4wE,EAAWphE,EAAOC,QAClBmjE,EAAgBrjE,EAAMzY,UAAWqjB,GAAMA,EAAEpa,KAAO6wE,EAAS7wE,IAE/D,OAAuB,IAAnB6yE,GACFrjE,EAAMqjE,GAAiBhC,EAChB,IAAIrhE,IAEJ,CAACqhE,KAAarhE,GAIzB,GAAoB,oBAAhBC,EAAOxP,KAA4B,CACrC,MAAM0wE,EAAalhE,EAAOC,QAEpBmjE,EAAgBrjE,EAAMzY,UAAWqjB,GAAMA,EAAEpa,KAAO2wE,GAItD,OAHuB,IAAnBkC,GACFrjE,EAAMvY,OAAO47E,EAAe,GAEvB,IAAIrjE,GAGb,GAAoB,UAAhBC,EAAOxP,KACT,MAAO,IAILgV,GAAYC,YAAYnG,IAAK,CACjCgwB,UAAW,CACTrX,KAAM,EACNzH,QAASlR,EAAMuoB,QAAQ,GACvB5Q,UAAW,YACR3X,EAAM4X,oBA2UEmsD,OAvUGA,KAChB,MAAMz8D,EAAUpB,KAEV3D,EAAUC,wBAETlB,EAASC,GAAcC,oBAAS,IAChCsL,EAAYC,GAAiBvL,mBAAS,IACtCmZ,EAASC,GAAcpZ,oBAAS,IAChCwiE,EAAkBC,GAAuBziE,mBAAS,OAClD0iE,EAAkBC,GAAuB3iE,mBAAS,OAClD4iE,EAAmBC,GAAwB7iE,oBAAS,IACpDg9C,EAAkBC,GAAuBj9C,oBAAS,IAClDwL,EAAa8yB,GAAkBt+B,mBAAS,KACxC7U,EAAWyU,GAAYC,qBAAWb,GAAS,KAE5C,iBAAEmxB,GAAqBJ,KAEvB5qC,EAAgB8a,qBAAWlW,GAEjCmW,oBAAU,KACRN,EAAS,CAAElQ,KAAM,UACjB6b,EAAc,IACb,CAACC,IAEJtL,oBAAU,KACRH,GAAW,GACX,MAAMuM,EAAkB5jB,WAAW,KACjCo6E,KACC,KACH,MAAO,IAAMt2D,aAAaF,IAEzB,CAACd,EAAaF,IAEjBpL,oBAAU,KACR,MAAMxY,EAAYG,aAAaC,QAAQ,aACjC8B,EAASzE,EAAcsC,UAAUC,GAUvC,OARAkC,EAAOnE,GAAG,WAADO,OAAY0B,EAAS,aAAciW,IACtB,WAAhBA,EAAKuB,QAAuC,WAAhBvB,EAAKuB,QACnCU,EAAS,CAAElQ,KAAM,mBAAoByP,QAASxB,EAAK+xB,SAEjC,WAAhB/xB,EAAKuB,QACPU,EAAS,CAAElQ,KAAM,kBAAmByP,SAAUxB,EAAKlO,OAGhD,KACL7F,EAAOzC,eAER,CAAChC,IAEJ,MAAM29E,EAAiB3iE,UACrB,IACE,MAAM,KAAExC,SAAee,GAAI0B,IAAI,cAAe,CAC5Cla,OAAQ,CAAEslB,cAAaF,gBAEzB1L,EAAS,CAAElQ,KAAM,iBAAkByP,QAASxB,EAAKmP,UACjDsM,EAAWzb,EAAKwb,SAChBpZ,GAAW,GACX,MAAOzC,GACPD,GAAWC,KAsFf,OACExY,IAAA6b,cAACs5C,GAAa,KACZn1D,IAAA6b,cAACuS,GAAiB,CAChB9oB,MACEs4E,GAAgB,GAAA18E,OACb6W,KAAKkB,EAAE,2CAA0C,KAAA/X,OAClD08E,EAAiBj4E,KAAI,KAGzBiJ,KAAMspD,EACN7pC,QAAS8pC,EACT7pC,UAAWA,IA1EYjT,WAC3B,UACQzB,GAAIlT,OAAO,cAADxF,OAAeo6E,IAC/BtiE,IAAMxT,QAAQuS,KAAKkB,EAAE,6BACrB,MAAOT,GACPD,GAAWC,GAEbqlE,EAAoB,MACpBrkC,EAAe,IACf/yB,EAAc,IAiEOw3D,CAAqBL,EAAiBjzE,KAEtDoN,KAAKkB,EAAE,8CAEVjZ,IAAA6b,cAACw/D,GAAa,CACZvE,gBAAiBA,KACfrwD,EAAc,GACdu3D,KAEFpvE,KAAMkvE,EACNzvD,QAlG2B6vD,KAC/BP,EAAoB,MACpBI,GAAqB,IAiGjBvvD,kBAAgB,oBAChB8sD,WAAYoC,GAAoBA,EAAiB/yE,KAEnD3K,IAAA6b,cAACw5C,GAAU,KACTr1D,IAAA6b,cAACupB,KAAI,CAACrc,MAAO,CAAE3I,MAAO,SAAWilB,WAAS,GACxCrlC,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI4R,GAAI,EAAG9R,MAAI,GACvBtlC,IAAA6b,cAAC61B,GAAK,KAAE35B,KAAKkB,EAAE,qBAEjBjZ,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI4R,GAAI,EAAG9R,MAAI,GACvBtlC,IAAA6b,cAACupB,KAAI,CAACnD,QAAS,EAAGoD,WAAS,GACzBrlC,IAAA6b,cAACupB,KAAI,CAACI,GAAI,EAAG4R,GAAI,EAAG9R,MAAI,GACtBtlC,IAAA6b,cAAC4F,KAAS,CACRoP,WAAS,EACTpiB,YAAasJ,KAAKkB,EAAE,+BACpBrO,KAAK,SACLmR,MAAO2K,EACPhF,SA9GMvgB,IACpBq4C,EAAer4C,EAAMwgB,OAAO5F,MAAMsiC,gBA8GpBxC,WAAY,CACViuB,eACE9pE,IAAA6b,cAACu3C,KAAc,CAACpqC,SAAS,SACvBhpB,IAAA6b,cAACulC,KAAU,CAACr4B,MAAO,CAAE9b,MAAO,eAMtCjN,IAAA6b,cAACupB,KAAI,CAACI,GAAI,EAAG4R,GAAI,EAAG9R,MAAI,GACtBtlC,IAAA6b,cAACgG,KAAM,CACLgP,WAAS,EACTjP,QAAQ,YACRE,QAtIgBq8D,KAC9BR,EAAoB,MACpBI,GAAqB,IAqIP9wE,MAAM,WAEL8K,KAAKkB,EAAE,+BAOpBjZ,IAAA6b,cAACivB,KAAK,CACJtpB,UAAWR,EAAQ0oB,UACnB9nB,QAAQ,WACRwV,SAhHgBrH,IACpB,IAAKsE,GAAWrZ,EAAS,OACzB,MAAM,UAAEqc,EAAS,aAAE0T,EAAY,aAAEC,GAAiBjb,EAAEqF,cAChD2V,GAAgB1T,EAAY,KAAO2T,GANvCvkB,EAAe6U,GAAcA,EAAY,KAqHrCt7B,IAAA6b,cAACm0B,KAAK,CAAC1kB,KAAK,SACVtrB,IAAA6b,cAACo0B,KAAS,KACRjwC,IAAA6b,cAACq0B,KAAQ,KACPlwC,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACdr4B,KAAKkB,EAAE,yBAEVjZ,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACdr4B,KAAKkB,EAAE,2BAEVjZ,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACdr4B,KAAKkB,EAAE,gCAEVjZ,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACdr4B,KAAKkB,EAAE,6BAEVjZ,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACdr4B,KAAKkB,EAAE,gCAEVjZ,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACdr4B,KAAKkB,EAAE,gCAEVjZ,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACdr4B,KAAKkB,EAAE,iCAEVjZ,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACdr4B,KAAKkB,EAAE,8BAIdjZ,IAAA6b,cAACw0B,KAAS,KACRrwC,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACGviB,EAAU+b,IAAKo5D,GACdx7E,IAAA6b,cAACq0B,KAAQ,CAACtyB,IAAK49D,EAAS7wE,IACtB3K,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAAUorC,EAAS71E,MACpC3F,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UA5IX0R,KACpB,OAAQA,GACN,IAAK,UACH,MAAO,UACT,IAAK,aACH,MAAO,aACT,IAAK,eACH,MAAO,eACT,IAAK,YACH,MAAO,YACT,IAAK,aACH,MAAO,aACT,QACE,OAAOA,IAgIMs8B,CAAa5C,EAASlzE,SAEzBtI,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACdorC,EAAS3I,cACN2I,EAAS7oE,YAAYhN,KACrB,mBAEN3F,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACdorC,EAAShgE,WACNggE,EAAS/wE,SAAS9E,KAClB,mBAEN3F,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACdorC,EAAS5oE,YACNy4B,EAAiBmwC,EAAS5oE,aAC1B,mBAEN5S,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACdorC,EAAS3oE,YACNw4B,EAAiBmwC,EAAS3oE,aAC1B,uBAEN7S,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACdorC,EAAS1oE,aAAe,aAAe,gBAE1C9S,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACM,iBAApBorC,EAASlzE,QACRtI,IAAA6b,cAAC+G,IAAU,CACTd,QAASA,IAxJRzG,WACrB,UACQzB,GAAIoD,KAAK,cAAD9b,OAAes6E,EAAS7wE,GAAE,YACxCqO,IAAMxT,QAAQuS,KAAKkB,EAAE,4BACrBwN,EAAc,GACdu3D,IACA,MAAOxlE,GACPQ,IAAMF,MAAMN,EAAIzO,WAiJiBuzE,CAAe9B,GAC9Bl2E,MAAM,iBACNgmB,KAAK,SAELtrB,IAAA6b,cAACwiE,KAAsB,OAGN,cAApB7C,EAASlzE,QACRtI,IAAA6b,cAAC+G,IAAU,CACTd,QAASA,IAtJPzG,WACtB,UACQzB,GAAIoD,KAAK,cAAD9b,OAAes6E,EAAS7wE,GAAE,aACxCqO,IAAMxT,QAAQuS,KAAKkB,EAAE,6BACrBwN,EAAc,GACdu3D,IACA,MAAOxlE,GACPQ,IAAMF,MAAMN,EAAIzO,WA+IiBszE,CAAgB7B,GAC/Bl2E,MAAM,iBACNgmB,KAAK,SAELtrB,IAAA6b,cAACyiE,KAAqB,OAG1Bt+E,IAAA6b,cAAC+G,IAAU,CACTd,QAASA,IACP7F,EAAQza,KAAK,aAADN,OAAcs6E,EAAS7wE,GAAE,YAEvC2gB,KAAK,SAELtrB,IAAA6b,cAAC0iE,KAAe,OAElBv+E,IAAA6b,cAAC+G,IAAU,CACT0I,KAAK,QACLxJ,QAASA,IAhOD05D,KAC1BmC,EAAoBnC,GACpBuC,GAAqB,IA8NYS,CAAmBhD,IAElCx7E,IAAA6b,cAACiH,KAAQ,OAGX9iB,IAAA6b,cAAC+G,IAAU,CACT0I,KAAK,QACLxJ,QAAUiO,IACRooC,GAAoB,GACpB0lB,EAAoBrC,KAGtBx7E,IAAA6b,cAACo9B,KAAiB,UAKzBj+B,GAAWhb,IAAA6b,cAAC25C,GAAgB,CAACC,QAAS,UC/XrD,MAAM71C,GAAYC,YAAYnG,IAAK,CACjCgwB,UAAW,CACTrX,KAAM,EACNzH,QAASlR,EAAMuoB,QAAQ,GACvB5Q,UAAW,YACR3X,EAAM4X,iBAEXypC,UAAW,CACT7xC,UAAW,SAEbu1D,mBAAoB,CAClB7zD,QAASlR,EAAMuoB,QAAQ,OAIrBy8C,GAAkB,CACtBC,gBAAiB,GACjBC,oBAAqB,GACrBC,gBAAiB,GACjBC,UAAW,IA+QEC,OA5QSA,KACtB,MAAM/9D,EAAUpB,MAETxP,EAAUuxD,GAAezmD,mBAASwjE,KAClCM,EAAmBC,GAAwB/jE,oBAAS,IACpDmU,EAAkBC,GAAuBpU,oBAAS,IAClDgkE,EAAaC,GAAkBjkE,mBAAS,OACxCkkE,EAAUC,GAAenkE,mBAAS,CAAE0C,IAAK,GAAI7B,MAAO,KAE3DX,oBAAU,KACRxB,GAAI0B,IAAI,sBAAsBq/B,KAAKh/B,IAAe,IAAd,KAAE9C,GAAM8C,EAC1C,MAAM2jE,EAAe,GACjBt9E,MAAMyb,QAAQ5E,IAASA,EAAK9W,OAAS,IACvC8W,EAAKgM,QAASygB,IACZg6C,EAAa99E,KAAK,CAAC8jC,EAAK1nB,IAAKva,KAAKC,MAAMgiC,EAAKvpB,WAE/C4lD,EAAYr9C,OAAOi7D,YAAYD,QAGlC,IAEH,MAAME,EAA0BzvD,IAC9B,GAAuB,OAAnBA,EAAEpO,OAAO5F,MAAgB,CAC3B,MAAM0jE,EAAc,GACpBA,EAAY1vD,EAAEpO,OAAOhc,MAAQoqB,EAAEpO,OAAO5F,MACtCsjE,EAAah2D,IAAI,IAAWA,KAASo2D,OAInCC,EAA0B3vD,IAC9B,MAAM0vD,EAAc,GACpBA,EAAY1vD,EAAEpO,OAAOhc,MAAQoqB,EAAEpO,OAAO5F,MACtC4lD,EAAat4C,IAAI,IAAWA,KAASo2D,MA4BvC,OACEz/E,IAAA6b,cAACs5C,GAAa,KACZn1D,IAAA6b,cAACuS,GAAiB,CAChB9oB,MAAOyS,KAAKkB,EAAE,2CACdrK,KAAMygB,EACNhB,QAASA,IAAMiB,GAAoB,GACnChB,UAjBiBqxD,KACrB,MAAMC,EAAUxvE,EAAS0uE,UAAUh3D,OAAQ41B,GAAMA,EAAE9/B,MAAQshE,GAC3Dvd,EAAat4C,IAAI,IAAWA,EAAMy1D,UAAWc,KAC7CT,EAAe,QAgBVpnE,KAAKkB,EAAE,8CAEVjZ,IAAA6b,cAACw5C,GAAU,KACTr1D,IAAA6b,cAACupB,KAAI,CAACrc,MAAO,CAAE3I,MAAO,SAAWilB,WAAS,GACxCrlC,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAIF,MAAI,GAChBtlC,IAAA6b,cAAC61B,GAAK,KAAE35B,KAAKkB,EAAE,6BAIrBjZ,IAAA6b,cAACivB,KAAK,CAACtpB,UAAWR,EAAQ0oB,UAAW9nB,QAAQ,YAC3C5hB,IAAA6b,cAAC6f,KAAG,CAACla,UAAWR,EAAQy9D,oBACtBz+E,IAAA6b,cAACupB,KAAI,CAACnD,QAAS,EAAGoD,WAAS,GACzBrlC,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAIF,MAAI,GAChBtlC,IAAA6b,cAAC8O,IAAU,CAACjG,UAAW,MAAM,eAE/B1kB,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI6R,GAAI,EAAG/R,MAAI,GACvBtlC,IAAA6b,cAACwqB,KAAW,CACVzkB,QAAQ,WACRJ,UAAWR,EAAQimB,YACnBpW,WAAS,GAET7wB,IAAA6b,cAACyqB,KAAU,CAAC37B,GAAG,yBAAwB,qCAGvC3K,IAAA6b,cAAC2qB,KAAM,CACL7gC,KAAK,kBACLgF,GAAG,kBACHm+B,QAAQ,wBACRh3B,MAAM,oCACNiK,MAAO3L,EAASuuE,gBAChBj9D,SAAWqO,GAAM2vD,EAAuB3vD,IAExC/vB,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,GAAG,iBACpB/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,GAAG,cACpB/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,IAAI,eACrB/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,IAAI,eACrB/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,IAAI,kBAI3B/b,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI6R,GAAI,EAAG/R,MAAI,GACvBtlC,IAAA6b,cAACwqB,KAAW,CACVzkB,QAAQ,WACRJ,UAAWR,EAAQimB,YACnBpW,WAAS,GAET7wB,IAAA6b,cAACyqB,KAAU,CAAC37B,GAAG,6BAA4B,2BAG3C3K,IAAA6b,cAAC2qB,KAAM,CACL7gC,KAAK,sBACLgF,GAAG,sBACHm+B,QAAQ,4BACRh3B,MAAM,0BACNiK,MAAO3L,EAASwuE,oBAChBl9D,SAAWqO,GAAM2vD,EAAuB3vD,IAExC/vB,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,GAAG,mBACpB/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,GAAG,aACpB/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,GAAG,cACpB/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,IAAI,eACrB/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,IAAI,eACrB/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,IAAI,eACrB/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,IAAI,eACrB/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,IAAI,eACrB/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,IAAI,eACrB/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,IAAI,eACrB/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,KAAK,gBACtB/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,KAAK,mBAI5B/b,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI6R,GAAI,EAAG/R,MAAI,GACvBtlC,IAAA6b,cAACwqB,KAAW,CACVzkB,QAAQ,WACRJ,UAAWR,EAAQimB,YACnBpW,WAAS,GAET7wB,IAAA6b,cAACyqB,KAAU,CAAC37B,GAAG,yBAAwB,8BAGvC3K,IAAA6b,cAAC2qB,KAAM,CACL7gC,KAAK,kBACLgF,GAAG,kBACHm+B,QAAQ,wBACRh3B,MAAM,6BACNiK,MAAO3L,EAASyuE,gBAChBn9D,SAAWqO,GAAM2vD,EAAuB3vD,IAExC/vB,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,GAAG,iBACpB/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,GAAG,aACpB/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,GAAG,cACpB/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,IAAI,eACrB/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,IAAI,eACrB/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,IAAI,eACrB/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,IAAI,eACrB/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,IAAI,eACrB/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,IAAI,eACrB/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,IAAI,eACrB/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,KAAK,gBACtB/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,KAAK,mBAI5B/b,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAIhkB,UAAWR,EAAQ+5C,UAAWz1B,MAAI,GAC9CtlC,IAAA6b,cAACgG,KAAM,CACLC,QAASA,IAAMm9D,GAAsBD,GACrC/xE,MAAM,UACN8b,MAAO,CAAEvI,YAAa,KACvB,yBAGDxgB,IAAA6b,cAACgG,KAAM,CACLC,QA9HOzG,gBACbzB,GAAIoD,KAAK,qBAAsB,CAAE5M,aACvC4I,IAAMxT,QAAQ,+BA6HFyH,MAAM,UACN2U,QAAQ,aACT,+BAIFo9D,GACCh/E,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACE5oB,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI6R,GAAI,EAAG/R,MAAI,GACvBtlC,IAAA6b,cAAC4F,KAAS,CACR3P,MAAM,SACN8P,QAAQ,WACR7F,MAAOqjE,EAASxhE,IAChBjY,KAAK,MACL+b,SAAU89D,EACV3uD,WAAS,KAGb7wB,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI6R,GAAI,EAAG/R,MAAI,GACvBtlC,IAAA6b,cAAC4F,KAAS,CACR3P,MAAM,cACN8P,QAAQ,WACR7F,MAAOqjE,EAASrjE,MAChBpW,KAAK,QACL+b,SAAU89D,EACV3uD,WAAS,KAGb7wB,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAIhkB,UAAWR,EAAQ+5C,UAAWz1B,MAAI,GAC9CtlC,IAAA6b,cAACgG,KAAM,CACLC,QAASA,IAAMm9D,GAAsBD,GACrC/xE,MAAM,UACN8b,MAAO,CAAEvI,YAAa,KACvB,UAGDxgB,IAAA6b,cAACgG,KAAM,CACLC,QAxLE+9D,KAClBle,EAAat4C,IACX,MAAMy2D,EAAkB1vE,EAAS0uE,UAAUh3D,OACxC41B,GAAMA,EAAE9/B,MAAQwhE,EAASxhE,KAEtBkhE,EAAYz1D,EAAKy1D,UAKvB,OAJ+B,IAA3BgB,EAAgB/9E,SAClB+8E,EAAUt9E,KAAK8iB,OAAOC,OAAO,GAAI66D,IACjCC,EAAY,CAAEzhE,IAAK,GAAI7B,MAAO,MAEzB,IAAKsN,EAAMy1D,gBA+KJ7xE,MAAM,UACN2U,QAAQ,aACT,eAMNxR,EAAS0uE,UAAU/8E,OAAS,GAC3B/B,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAIhkB,UAAWR,EAAQ+5C,UAAWz1B,MAAI,GAC9CtlC,IAAA6b,cAACm0B,KAAK,CAAC1kB,KAAK,SACVtrB,IAAA6b,cAACo0B,KAAS,KACRjwC,IAAA6b,cAACq0B,KAAQ,KACPlwC,IAAA6b,cAACs0B,KAAS,CAACpnB,MAAO,CAAE3I,MAAO,QAC3BpgB,IAAA6b,cAACs0B,KAAS,KAAC,UACXnwC,IAAA6b,cAACs0B,KAAS,KAAC,iBAGfnwC,IAAA6b,cAACw0B,KAAS,KACPruC,MAAMyb,QAAQrN,EAAS0uE,YACtB1uE,EAAS0uE,UAAU18D,IAAI,CAACs7B,EAAGpN,IACzBtwC,IAAA6b,cAACq0B,KAAQ,CAACtyB,IAAK0yB,GACbtwC,IAAA6b,cAACs0B,KAAS,KACRnwC,IAAA6b,cAAC+G,IAAU,CACT0I,KAAK,QACLxJ,QAASA,KACPq9D,EAAezhC,EAAE9/B,KACjB0R,GAAoB,KAGtBtvB,IAAA6b,cAACo9B,KAAiB,QAGtBj5C,IAAA6b,cAACs0B,KAAS,KAAE,IAAMuN,EAAE9/B,IAAM,KAC1B5d,IAAA6b,cAACs0B,KAAS,KAAEuN,EAAE3hC,iB,iGC1RxC,MAAM6D,GAAYC,YAAYnG,IAAK,CACjCgwB,UAAW,CACTrX,KAAM,EACNzH,QAASlR,EAAMuoB,QAAQ,GACvB5Q,UAAW,YACR3X,EAAM4X,iBAEXypC,UAAW,CACT7xC,UAAW,SAEbu1D,mBAAoB,CAClB7zD,QAASlR,EAAMuoB,QAAQ,OAgNZ89C,OA5MQA,KACrB,MAAM/+D,EAAUpB,MAEV,WAAE07D,GAAel8C,uBAEhBo8C,EAAUC,GAAevgE,mBAAS,KAClC8kE,EAAeC,GAAoB/kE,mBAAS,IAC5CglE,EAAWC,GAAgBjlE,mBAAS,IACpCklE,EAAuBC,GAA4BnlE,mBAAS,IAC5DolE,EAAWC,GAAgBrlE,mBAAS,IACpCslE,EAASC,GAAcvlE,mBAAS,IAChCF,EAASC,GAAcC,oBAAS,GACjCwlE,EAAUlsD,kBAAO,IAEjB,iBAAE6W,GAAqBJ,KAEvB5qC,EAAgB8a,qBAAWlW,GAEjCmW,oBAAU,KACJslE,EAAQ3rD,SACV4rD,IAGK,KACLD,EAAQ3rD,SAAU,IAGnB,IAEH3Z,oBAAU,KACR,GAAIslE,EAAQ3rD,SAAWvX,eAAIg+D,EAAU,YAAa,CAChD,GAAIh+D,eAAIg+D,EAAU,eAAgB,CAChC,MACMoF,EADctlE,eAAIkgE,EAAU,eACPxxE,SAAS8d,OAAQnmB,GAAMA,EAAEuzE,iBACpD+K,EAAiBW,EAAO7+E,QAG1B,GAAIyb,eAAIg+D,EAAU,YAAa,CAC7B,MAAMxxE,EAAWsR,eAAIkgE,EAAU,YACzB0E,EAAYl2E,EAAS8d,OAAQnmB,IAAOk/E,kBAAOl/E,EAAEm/E,cAC7CV,EAAwBp2E,EAAS8d,OACpCnmB,IAAOk/E,kBAAOl/E,EAAEo/E,0BAEbT,EAAYt2E,EAAS8d,OACxBnmB,IAAOk/E,kBAAOl/E,EAAEm/E,eAAiBD,kBAAOl/E,EAAEo/E,0BAE7CZ,EAAaD,EAAUn+E,QACvBs+E,EAAyBD,EAAsBr+E,QAC/Cw+E,EAAaD,EAAUv+E,QACvBo+E,EAAaD,EAAUn+E,WAG1B,CAACy5E,IAEJpgE,oBAAU,KACRqlE,EAAYP,EAAYF,EAAiB,MACxC,CAACE,EAAWF,IAEf5kE,oBAAU,KACR,MAAMxY,EAAYG,aAAaC,QAAQ,aACjC8B,EAASzE,EAAcsC,UAAUC,GAevC,OAbAkC,EAAOnE,GAAG,WAADO,OAAY0B,EAAS,aAAciW,IAEtCA,EAAK+xB,OAAOjgC,MAAQ2wE,IACtBG,EAAY5iE,EAAK+xB,QAEU,eAAvB/xB,EAAK+xB,OAAOtiC,QACd1E,WAAW,KACT+8E,KACC,QAKF,KACL77E,EAAOzC,eAGR,CAACi5E,EAAYj7E,IAEhB,MAAMsgF,EAAetlE,UACnBJ,GAAW,GACX,MAAM,KAAEpC,SAAee,GAAI0B,IAAI,cAADpa,OAAeo6E,IAC7CG,EAAY5iE,GACZoC,GAAW,IAoBb,OACEjb,IAAA6b,cAACs5C,GAAa,KACZn1D,IAAA6b,cAACw5C,GAAU,KACTr1D,IAAA6b,cAACupB,KAAI,CAACrc,MAAO,CAAE3I,MAAO,SAAWilB,WAAS,GACxCrlC,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAIF,MAAI,GAChBtlC,IAAA6b,cAAC61B,GAAK,KAAC,mBAAc8pC,EAAS71E,MAAQ,eAI5C3F,IAAA6b,cAACivB,KAAK,CAACtpB,UAAWR,EAAQ0oB,UAAW9nB,QAAQ,YAC3C5hB,IAAA6b,cAAC8O,IAAU,CAAC/I,QAAQ,KAAK8C,UAAU,MAAK,WA3BxBo9B,KACpB,OAAQA,GACN,IAAK,UACH,MAAO,UACT,IAAK,aACH,MAAO,aACT,IAAK,eACH,MAAO,eACT,IAAK,YACH,MAAO,YACT,IAAK,aACH,MAAO,aACT,QACE,OAAOA,IAeIs8B,CAAa5C,EAASlzE,QAAQ,IAAE43E,EAAU,OAAKF,GAE1DhgF,IAAA6b,cAACupB,KAAI,CAACnD,QAAS,EAAGoD,WAAS,GACzBrlC,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAIF,MAAI,GAChBtlC,IAAA6b,cAACmlE,KAAc,CACbp/D,QAAQ,cACRmH,MAAO,CAAErI,OAAQ,GAAIG,aAAc,EAAGX,OAAQ,UAC9CnE,MAAOykE,KAGXxgF,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI6R,GAAI,EAAG/R,MAAI,GACvBtlC,IAAA6b,cAACszB,GAAW,CACVrrB,KAAM9jB,IAAA6b,cAAColE,KAAS,CAACh4D,SAAS,YAC1B3jB,MAAM,sBACNyW,MAAOikE,EACPhlE,QAASA,KAGZwgE,EAAS1oE,cACR9S,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACE5oB,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI6R,GAAI,EAAG/R,MAAI,GACvBtlC,IAAA6b,cAACszB,GAAW,CACVrrB,KAAM9jB,IAAA6b,cAACqlE,KAAQ,CAACj4D,SAAS,YACzB3jB,MAAM,iCACNyW,MAAOqkE,EACPplE,QAASA,KAGbhb,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI6R,GAAI,EAAG/R,MAAI,GACvBtlC,IAAA6b,cAACszB,GAAW,CACVrrB,KAAM9jB,IAAA6b,cAACslE,KAAW,CAACl4D,SAAS,YAC5B3jB,MAAM,qBACNyW,MAAOukE,EACPtlE,QAASA,MAKjBhb,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI6R,GAAI,EAAG/R,MAAI,GACvBtlC,IAAA6b,cAACszB,GAAW,CACVrrB,KAAM9jB,IAAA6b,cAAC80B,KAAe,CAAC1nB,SAAS,YAChC3jB,MAAM,YACNyW,MAAOmkE,EACPllE,QAASA,KAGZwgE,EAAShgE,YACRxb,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI6R,GAAI,EAAG/R,MAAI,GACvBtlC,IAAA6b,cAACszB,GAAW,CACVrrB,KAAM9jB,IAAA6b,cAACqM,KAAY,CAACe,SAAS,YAC7B3jB,MAAM,aACNyW,MAAOy/D,EAAS/wE,SAAS9E,KACzBqV,QAASA,KAIdwgE,EAAS3I,eACR7yE,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI6R,GAAI,EAAG/R,MAAI,GACvBtlC,IAAA6b,cAACszB,GAAW,CACVrrB,KAAM9jB,IAAA6b,cAACulE,KAAW,CAACn4D,SAAS,YAC5B3jB,MAAM,oBACNyW,MAAOy/D,EAAS7oE,YAAYhN,KAC5BqV,QAASA,KAIfhb,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI6R,GAAI,EAAG/R,MAAI,GACvBtlC,IAAA6b,cAACszB,GAAW,CACVrrB,KAAM9jB,IAAA6b,cAACwlE,KAAY,CAACp4D,SAAS,YAC7B3jB,MAAM,cACNyW,MAAOsvB,EAAiBmwC,EAAS5oE,aACjCoI,QAASA,KAGbhb,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI6R,GAAI,EAAG/R,MAAI,GACvBtlC,IAAA6b,cAACszB,GAAW,CACVrrB,KAAM9jB,IAAA6b,cAACyN,KAAkB,CAACL,SAAS,YACnC3jB,MAAM,eACNyW,MAAOsvB,EAAiBmwC,EAAS3oE,aACjCmI,QAASA,SC3MvB,MAAM4E,GAAYC,YAAYnG,IAAK,CACjCoG,KAAM,CACJC,QAAS,OACT0Q,SAAU,QAEZsW,cAAe,CACbhnB,QAAS,OACT,yBAA0B,CACxBS,YAAa9G,EAAMuoB,QAAQ,KAI/B+E,WAAY,CACVhe,SAAU,YAGZ8B,eAAgB,CACd7d,MAAO8d,KAAM,KACb/B,SAAU,WACVgC,IAAK,MACLC,KAAM,MACNtK,WAAY,GACZuK,YAAa,IAEf+b,YAAa,CACX/mB,OAAQxG,EAAMuoB,QAAQ,GACtB3R,SAAU,KAEZi9C,cAAe,CACbntD,MAAO,GACPM,OAAQ,OAIN4gE,GAAqBn6C,OAAaC,MAAM,CAC5C9hC,MAAO6hC,OAAaE,SAAS,kBAC7B/yB,KAAM6yB,OAAaE,SAAS,oBA4Qfk6C,OAzQW5lE,IAAgD,IAA/C,KAAE/M,EAAI,QAAEyf,EAAO,eAAEic,EAAc,OAAEvmC,GAAQ4X,EAClE,MAAMqF,EAAUpB,KAEV2nB,EAAe,CACnBjiC,MAAO,GACPgP,KAAM,GACND,SAAU,EACV/L,QAAQ,IAGH+mB,EAAkBC,GAAuBpU,oBAAS,IAClD0uB,EAAcY,GAAmBtvB,mBAASqsB,IAC1CsmB,EAAYC,GAAiB5yC,mBAAS,MACvC6yC,EAAiBv5B,iBAAO,MAE9BpZ,oBAAU,KACR,IACE,WACE,IAAKkvB,EAAgB,OAErB,MAAM,KAAEzxB,SAAee,GAAI0B,IAAI,kBAADpa,OAAmBopC,IACjDE,EAAiBlP,IACR,IAAKA,KAAcziB,MAL9B,GAQA,MAAOL,GACPD,GAAWC,KAEZ,CAAC8xB,EAAgB17B,IAEpB,MAAMugB,EAAcA,KAClBqb,EAAgBjD,GAChBumB,EAAc,MACdz/B,KA4DF,OACEruB,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQlB,MACtB9f,IAAA6b,cAACuS,GAAiB,CAChB9oB,MAAOyS,KAAKkB,EAAE,+CACdrK,KAAMygB,EACNhB,QAASA,IAAMiB,GAAoB,GACnChB,UAzBcjT,UACdwyC,IACFC,EAAc,MACdC,EAAeh5B,QAAQhZ,MAAQ,MAG7B6tB,EAAar1B,kBACTqF,GAAIlT,OAAO,kBAADxF,OAAmB0oC,EAAaj/B,GAAE,kBAClD6/B,EAAiBnhB,IAAI,IAChBA,EACH9U,UAAW,QAEbyE,IAAMxT,QAAQuS,KAAKkB,EAAE,iCACA,mBAAVlV,GACTA,OAaCgU,KAAKkB,EAAE,kDAEVjZ,IAAA6b,cAAC0S,KAAM,CACL3f,KAAMA,EACNyf,QAASc,EACTuC,SAAS,KACTb,WAAS,EACTsL,OAAO,SAEPn8B,IAAA6b,cAAC4S,KAAW,CAAC9jB,GAAG,qBACC,GAAAzJ,OAAdopC,EACMvyB,KAAKkB,EAAE,6BACPlB,KAAKkB,EAAE,8BAEhBjZ,IAAA6b,cAAA,OAAKkN,MAAO,CAAEhJ,QAAS,SACrB/f,IAAA6b,cAAA,SACEjR,KAAK,OACL+E,OAAO,kBACPyU,IAAK2pC,EACLrsC,SAAWqO,GApFSA,KAC5B,MAAMo+B,EAAOC,gBAAKr+B,EAAEpO,OAAOjR,OACvBy9C,GACFL,EAAcK,IAiFSE,CAAqBt+B,MAG1C/vB,IAAA6b,cAACisB,KAAM,CACLC,cAAe6B,EACf5B,oBAAoB,EACpBC,iBAAkBq5C,GAClBp5C,SAAUA,CAACC,EAAQ1/B,KACjB7E,WAAW,KArFUyX,WAC7B,MAAMmmE,EAAmB,IAAKr5C,GAC9B,IACE,GAAImC,GAEF,SADM1wB,GAAIqnB,IAAI,kBAAD//B,OAAmBopC,GAAkBk3C,GAChC,MAAd3zB,EAAoB,CACtB,MAAM3C,EAAW,IAAIC,SACrBD,EAASG,OAAO,OAAQwC,SAClBj0C,GAAIoD,KAAK,kBAAD9b,OACMopC,EAAc,iBAChC4gB,QAGC,CACL,MAAM,KAAEryC,SAAee,GAAIoD,KAAK,iBAAkBwkE,GAClD,GAAkB,MAAd3zB,EAAoB,CACtB,MAAM3C,EAAW,IAAIC,SACrBD,EAASG,OAAO,OAAQwC,SAClBj0C,GAAIoD,KAAK,kBAAD9b,OAAmB2X,EAAKlO,GAAE,iBAAiBugD,IAG7DlyC,IAAMxT,QAAQuS,KAAKkB,EAAE,iCACA,mBAAVlV,GACTA,IAEF,MAAOyU,GACPD,GAAWC,GAEb2W,KA0DUsyD,CAAuBt5C,GACvB1/B,EAAQ4/B,eAAc,IACrB,OAGJzc,IAAA,IAAC,QAAE0c,EAAO,OAAEC,EAAM,aAAEC,EAAY,OAAEL,GAAQvc,EAAA,OACzC5rB,IAAA6b,cAAC4sB,KAAI,KACHzoC,IAAA6b,cAAC6S,KAAa,CAACC,UAAQ,GACrB3uB,IAAA6b,cAACupB,KAAI,CAACnD,QAAS,EAAGoD,WAAS,GACzBrlC,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAIF,MAAI,GAChBtlC,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,mCACdtT,KAAK,QACLmT,MAAOwvB,EAAQhjC,OAASuvB,QAAQ0T,EAAOjjC,OACvCujC,WAAYP,EAAQhjC,OAASijC,EAAOjjC,MACpCsc,QAAQ,WACR1B,OAAO,QACP2Q,WAAS,KAGb7wB,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAIF,MAAI,GAChBtlC,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,kCACdtT,KAAK,OACLmT,MAAOwvB,EAAQh0B,MAAQugB,QAAQ0T,EAAOj0B,MACtCu0B,WAAYP,EAAQh0B,MAAQi0B,EAAOj0B,KACnCsN,QAAQ,WACR1B,OAAO,QACP8jC,WAAW,EACXD,KAAM,EACNlzB,WAAS,KAGb7wB,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAIF,MAAI,GAChBtlC,IAAA6b,cAACwqB,KAAW,CAACzkB,QAAQ,WAAW1B,OAAO,QAAQ2Q,WAAS,GACtD7wB,IAAA6b,cAACyqB,KAAU,CAAC37B,GAAG,0BACZoN,KAAKkB,EAAE,qCAEVjZ,IAAA6b,cAAC6sB,KAAK,CACJC,GAAInC,KACJ10B,MAAOiG,KAAKkB,EAAE,oCACdxK,YAAasJ,KAAKkB,EAAE,oCACpB6vB,QAAQ,yBACRn+B,GAAG,SACHhF,KAAK,SACLmT,MAAOwvB,EAAQhgC,QAAUusB,QAAQ0T,EAAOjgC,SAExCtI,IAAA6b,cAACiU,IAAQ,CAAC/T,OAAO,GAAM,SACvB/b,IAAA6b,cAACiU,IAAQ,CAAC/T,OAAO,GAAO,cAI9B/b,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAIF,MAAI,GAChBtlC,IAAA6b,cAACwqB,KAAW,CAACzkB,QAAQ,WAAW1B,OAAO,QAAQ2Q,WAAS,GACtD7wB,IAAA6b,cAACyqB,KAAU,CAAC37B,GAAG,4BACZoN,KAAKkB,EAAE,uCAEVjZ,IAAA6b,cAAC6sB,KAAK,CACJC,GAAInC,KACJ10B,MAAOiG,KAAKkB,EAAE,sCACdxK,YAAasJ,KAAKkB,EAChB,sCAEF6vB,QAAQ,2BACRn+B,GAAG,WACHhF,KAAK,WACLmT,MAAOwvB,EAAQj0B,UAAYwgB,QAAQ0T,EAAOl0B,WAE1CrU,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,GAAG,QACpB/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,GAAG,YACpB/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAO,GAAG,aAIxB6tB,EAAar1B,WAAas5C,IAC1B7tD,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAIF,MAAI,GAChBtlC,IAAA6b,cAACgG,KAAM,CAACiU,UAAW91B,IAAA6b,cAACksC,KAAc,OAC/B8F,EAAaA,EAAWloD,KAAOikC,EAAah4B,WAE/C5R,IAAA6b,cAAC+G,IAAU,CACTd,QAASA,IAAMwN,GAAoB,GACnCriB,MAAM,aAENjN,IAAA6b,cAACo9B,KAAiB,UAM5Bj5C,IAAA6b,cAAC+S,KAAa,MACVi/B,IAAejkB,EAAar1B,WAC5BvU,IAAA6b,cAACgG,KAAM,CACL5U,MAAM,UACN6U,QAASA,IAAMisC,EAAeh5B,QAAQm6B,QACtC1oD,SAAUgiC,EACV5mB,QAAQ,YAEP7J,KAAKkB,EAAE,wCAGZjZ,IAAA6b,cAACgG,KAAM,CACLC,QAASqN,EACTliB,MAAM,YACNzG,SAAUgiC,EACV5mB,QAAQ,YAEP7J,KAAKkB,EAAE,wCAEVjZ,IAAA6b,cAACgG,KAAM,CACLjX,KAAK,SACLqC,MAAM,UACNzG,SAAUgiC,EACV5mB,QAAQ,YACRJ,UAAWR,EAAQgmB,YAEJ,GAAA9lC,OAAdopC,EACMvyB,KAAKkB,EAAE,oCACPlB,KAAKkB,EAAE,sCACbuvB,GACCxoC,IAAA6b,cAACwP,KAAgB,CACfC,KAAM,GACN9J,UAAWR,EAAQ8J,yBCjSzC,MAAM5Q,GAAUA,CAACC,EAAOC,KACtB,GAAoB,uBAAhBA,EAAOxP,KAA+B,CACxC,MAAMsJ,EAAgBkG,EAAOC,QACvB+vB,EAAmB,GAezB,OAbI3sB,mBAAQvJ,IACVA,EAAc2Q,QAAS+kB,IACrB,MAAMS,EAAoBlwB,EAAMzY,UAC7BqjB,GAAMA,EAAEpa,KAAOi/B,EAAaj/B,KAEJ,IAAvB0/B,EACFlwB,EAAMkwB,GAAqBT,EAE3BQ,EAAiB5oC,KAAKooC,KAKrB,IAAIzvB,KAAUiwB,GAGvB,GAAoB,yBAAhBhwB,EAAOxP,KAAiC,CAC1C,MAAMg/B,EAAexvB,EAAOC,QACtBgwB,EAAoBlwB,EAAMzY,UAAWqjB,GAAMA,EAAEpa,KAAOi/B,EAAaj/B,IAEvE,OAA2B,IAAvB0/B,GACFlwB,EAAMkwB,GAAqBT,EACpB,IAAIzvB,IAEJ,CAACyvB,KAAiBzvB,GAI7B,GAAoB,wBAAhBC,EAAOxP,KAAgC,CACzC,MAAM0/B,EAAiBlwB,EAAOC,QAExBgwB,EAAoBlwB,EAAMzY,UAAWqjB,GAAMA,EAAEpa,KAAO2/B,GAI1D,OAH2B,IAAvBD,GACFlwB,EAAMvY,OAAOyoC,EAAmB,GAE3B,IAAIlwB,GAGb,GAAoB,UAAhBC,EAAOxP,KACT,MAAO,IAILgV,GAAYC,YAAYnG,IAAK,CACjCgwB,UAAW,CACTrX,KAAM,EAENzH,QAASlR,EAAMkR,QACfyG,UAAW,YACR3X,EAAM4X,oBA4QEowD,OAxQOA,KACpB,MAAM1gE,EAAUpB,KACV3D,EAAUC,wBAEV,KAAEpL,GAASqK,qBAAWyD,KAErB5D,EAASC,GAAcC,oBAAS,IAChCsL,EAAYC,GAAiBvL,mBAAS,IACtCmZ,EAASC,GAAcpZ,oBAAS,IAChCymE,EAAsBC,GAA2B1mE,mBAAS,OAC1D2mE,EAAsBC,GAA2B5mE,mBAAS,OAC1D6mE,EAAuBC,GAA4B9mE,oBAAS,IAC5Dg9C,EAAkBC,GAAuBj9C,oBAAS,IAClDwL,EAAa8yB,GAAkBt+B,mBAAS,KACxChH,EAAe4G,GAAYC,qBAAWb,GAAS,IAEhD7Z,EAAgB8a,qBAAWlW,GAGjCmW,oBAAU,MACRC,iBACOvK,EAAKkZ,QACRhR,IAAMF,MAAM,oGACZlV,WAAW,KACTqY,EAAQza,KAAK,MACZ,MAGP+lB,IAEC,IAEHnM,oBAAU,KACRN,EAAS,CAAElQ,KAAM,UACjB6b,EAAc,IACb,CAACC,IAEJtL,oBAAU,KACRH,GAAW,GACX,MAAMuM,EAAkB5jB,WAAW,KACjC+mC,KACC,KACH,MAAO,IAAMjjB,aAAaF,IAEzB,CAACd,EAAaF,IAEjBpL,oBAAU,KACR,MAAMxY,EAAYkO,EAAKlO,UACjBkC,EAASzE,EAAcsC,UAAUC,GAUvC,OARAkC,EAAOnE,GAAG,uBAAyBkY,IACb,WAAhBA,EAAKuB,QAAuC,WAAhBvB,EAAKuB,QACnCU,EAAS,CAAElQ,KAAM,uBAAwByP,QAASxB,EAAK+xB,SAErC,WAAhB/xB,EAAKuB,QACPU,EAAS,CAAElQ,KAAM,sBAAuByP,SAAUxB,EAAKlO,OAGpD,KACL7F,EAAOzC,eAER,CAAChC,EAAeyQ,EAAKlO,YAExB,MAAM+nC,EAAqBtvB,UACzB,IACE,MAAM,KAAExC,SAAee,GAAI0B,IAAI,kBAAmB,CAChDla,OAAQ,CAAEslB,cAAaF,gBAEzB1L,EAAS,CAAElQ,KAAM,qBAAsByP,QAASxB,EAAKmP,UACrDsM,EAAWzb,EAAKwb,SAChBpZ,GAAW,GACX,MAAOzC,GACPD,GAAWC,KA+Df,OACExY,IAAA6b,cAACs5C,GAAa,KACZn1D,IAAA6b,cAACuS,GAAiB,CAChB9oB,MACEu8E,GAAoB,GAAA3gF,OACjB6W,KAAKkB,EAAE,+CAA8C,KAAA/X,OAAI2gF,EAAqBl8E,KAAI,KAGvFiJ,KAAMspD,EACN7pC,QAAS8pC,EACT7pC,UAAWA,IAlDgBjT,WAC/B,IACMuuB,EAAah4B,iBACXgI,GAAIlT,OAAO,kBAADxF,OAAmB0oC,EAAaj/B,GAAE,wBAE5CiP,GAAIlT,OAAO,kBAADxF,OAAmB0oC,EAAaj/B,KAEhDqO,IAAMxT,QAAQuS,KAAKkB,EAAE,iCACrB,MAAOT,GACPD,GAAWC,GAEbspE,EAAwB,MACxBtoC,EAAe,IACf/yB,EAAc,IAqCOw7D,CAAyBJ,IAEzC9pE,KAAKkB,EAAE,kDAEVjZ,IAAA6b,cAAC0lE,GAAiB,CAChBzK,gBAAiBA,KACfrwD,EAAc,GACdkkB,KAEF/7B,KAAMmzE,EACN1zD,QA1E+B6zD,KACnCN,EAAwB,MACxBI,GAAyB,IAyErBxzD,kBAAgB,oBAChB8b,eAAgBq3C,GAAwBA,EAAqBh3E,KAE/D3K,IAAA6b,cAACw5C,GAAU,KACTr1D,IAAA6b,cAACupB,KAAI,CAACrc,MAAO,CAAE3I,MAAO,SAAWilB,WAAS,GACxCrlC,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI4R,GAAI,EAAG9R,MAAI,GACvBtlC,IAAA6b,cAAC61B,GAAK,KAAE35B,KAAKkB,EAAE,uBAAuB,KAAG/E,EAAcnS,OAAO,MAEhE/B,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI4R,GAAI,EAAG9R,MAAI,GACvBtlC,IAAA6b,cAACupB,KAAI,CAACnD,QAAS,EAAGoD,WAAS,GACzBrlC,IAAA6b,cAACupB,KAAI,CAACI,GAAI,EAAG4R,GAAI,EAAG9R,MAAI,GACtBtlC,IAAA6b,cAAC4F,KAAS,CACRoP,WAAS,EACTpiB,YAAasJ,KAAKkB,EAAE,mCACpBrO,KAAK,SACLmR,MAAO2K,EACPhF,SAtFMvgB,IACpBq4C,EAAer4C,EAAMwgB,OAAO5F,MAAMsiC,gBAsFpBxC,WAAY,CACViuB,eACE9pE,IAAA6b,cAACu3C,KAAc,CAACpqC,SAAS,SACvBhpB,IAAA6b,cAACulC,KAAU,CAACr4B,MAAO,CAAE9b,MAAO,eAMtCjN,IAAA6b,cAACupB,KAAI,CAACI,GAAI,EAAG4R,GAAI,EAAG9R,MAAI,GACtBtlC,IAAA6b,cAACgG,KAAM,CACLgP,WAAS,EACTjP,QAAQ,YACRE,QA9GoBqgE,KAClCP,EAAwB,MACxBI,GAAyB,IA6GX/0E,MAAM,WAEL8K,KAAKkB,EAAE,mCAOpBjZ,IAAA6b,cAACivB,KAAK,CACJtpB,UAAWR,EAAQ0oB,UACnB9nB,QAAQ,WACRwV,SApFgBrH,IACpB,IAAKsE,GAAWrZ,EAAS,OACzB,MAAM,UAAEqc,EAAS,aAAE0T,EAAY,aAAEC,GAAiBjb,EAAEqF,cAChD2V,GAAgB1T,EAAY,KAAO2T,GANvCvkB,EAAe6U,GAAcA,EAAY,KAyFrCt7B,IAAA6b,cAACm0B,KAAK,CAAC1kB,KAAK,SACVtrB,IAAA6b,cAACo0B,KAAS,KACRjwC,IAAA6b,cAACq0B,KAAQ,KACPlwC,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACdr4B,KAAKkB,EAAE,8BAEVjZ,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACdr4B,KAAKkB,EAAE,iCAEVjZ,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACdr4B,KAAKkB,EAAE,kCAEVjZ,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACdr4B,KAAKkB,EAAE,+BAEVjZ,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACdr4B,KAAKkB,EAAE,kCAIdjZ,IAAA6b,cAACw0B,KAAS,KACRrwC,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACG1U,EAAckO,IAAKwnB,IAAY,IAAAw4C,EApGjBtgC,EAoGiB,OAC9B9hD,IAAA6b,cAACq0B,KAAQ,CAACtyB,IAAKgsB,EAAaj/B,IAC1B3K,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAAUxG,EAAatkC,OACxCtF,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAtGnB,KADa0R,EAwGUlY,EAAav1B,UAtGvC,OAEG,IAARytC,EACK,WAEG,IAARA,EACK,aADT,GAmGc9hD,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACQ,QADAgyC,EACtBx4C,EAAah4B,iBAAS,IAAAwwE,IAAIrqE,KAAKkB,EAAE,+BAEpCjZ,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACdxG,EAAathC,OAASyP,KAAKkB,EAAE,wBAA0BlB,KAAKkB,EAAE,2BAEjEjZ,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACfpwC,IAAA6b,cAAC+G,IAAU,CACT0I,KAAK,QACLxJ,QAASA,IApJG8nB,KAC9Bg4C,EAAwBh4C,GACxBo4C,GAAyB,IAkJQK,CAAuBz4C,IAEtC5pC,IAAA6b,cAACiH,KAAQ,OAGX9iB,IAAA6b,cAAC+G,IAAU,CACT0I,KAAK,QACLxJ,QAAUiO,IACRooC,GAAoB,GACpB2pB,EAAwBl4C,KAG1B5pC,IAAA6b,cAACo9B,KAAiB,WAKzBj+B,GAAWhb,IAAA6b,cAAC25C,GAAgB,CAACC,QAAS,UCvUrD,MAAM71C,GAAYC,YAAYnG,IAAK,CACjCu7C,cAAe,CACbl1C,QAAS,OACTC,cAAe,SACfgJ,SAAU,WACVqJ,KAAM,EACN3R,OAAQ,oBACRqQ,SAAU,SACVlQ,aAAc,EACdD,gBAAiBlH,EAAM8f,QAAQ8oD,SAEjCC,SAAU,CACRxiE,QAAS,OACTC,cAAe,SACfgJ,SAAU,WACVqJ,KAAM,EACNhB,UAAW,YACR3X,EAAM4X,iBAEX00C,SAAU,CACR7rC,OAAQ,cAIG,SAASqoD,GAAQ7mE,GAO5B,IAP6B,MAC/BnL,EAAK,iBACLiyE,EAAgB,iBAChBC,EAAgB,eAChBC,EAAc,SACdC,EAAQ,QACR5nE,GACDW,EACC,MAAMqF,EAAUpB,KACV3D,EAAUC,wBACV,KAAEpL,GAASqK,qBAAWyD,KACtB,iBAAEysB,GAAqBJ,MAEtB3jC,EAAmB6wD,GAAuBj9C,oBAAS,IACnD2nE,EAAcC,GAAmB5nE,mBAAS,KAE3C,GAAEvQ,GAAOy0B,sBAETuM,EAAetwB,UACnB,GAAIylB,EAAe9yB,GAAQ,EACzB,UACQ4L,GAAIoD,KAAK,UAAD9b,OAAW8M,EAAKrD,GAAE,SAAS,CAAE7H,OAAQgO,EAAKnG,KACxD,MAAO6N,IAGP7N,IAAOqD,EAAK6e,OACd5Q,EAAQza,KAAK,UAADN,OAAW8M,EAAK6e,OAC5B41D,EAAiBz0E,KAQf8yB,EAAkB9yB,GACFA,EAAK7H,MAAMwX,KAAMoH,GAAMA,EAAEjiB,SAAWgO,EAAKnG,IAC1Ckd,QAGfk7D,EAAkB/0E,IACtB,MAAMg1E,EAAWh1E,EAAK1I,MAChBuiB,EAAUiZ,EAAe9yB,GAC/B,OACEhO,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACGo6D,EACAn7D,EAAU,GACT7nB,IAAA6b,cAACirB,KAAI,CACHxb,KAAK,QACLvC,MAAO,CAAEmC,WAAY,GACrBpZ,MAAO+V,EACP5a,MAAM,gBAOVg2E,EAAoBj1E,GACI,KAArBA,EAAK6yB,YAAkB,GAAA3/B,OACvBmqC,EAAiBr9B,EAAKyM,WAAU,MAAAvZ,OAAK8M,EAAK6yB,aAC7C,GAGAqiD,EAAgBl1E,IACb,CACLssB,WAAYtsB,EAAK6e,OAASliB,EAAK,oBAAsB,KACrDiW,gBAAiB5S,EAAK6e,OAASliB,EAAK,yBAA2B,OAInE,OACE3K,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACE5oB,IAAA6b,cAACuS,GAAiB,CAChB9oB,MAAO,mBACPsJ,KAAMtH,EACN+mB,QAAS8pC,EACT7pC,UA9CeouC,KACnBgmB,EAAiBG,KA8Cd,yDAGD7iF,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQi0C,eACtBj1D,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQuhE,UACtBviF,IAAA6b,cAACsG,IAAI,KACFngB,MAAMyb,QAAQjN,IACbA,EAAMzO,OAAS,GACfyO,EAAM4R,IAAI,CAACpU,EAAM4P,IACf5d,IAAA6b,cAACyG,IAAQ,CACPR,QAASA,IAAM6pB,EAAa39B,GAC5B4P,IAAKA,EACL4D,UAAWR,EAAQglD,SACnBj9C,MAAOm6D,EAAal1E,GACpBwW,QAAM,GAENxkB,IAAA6b,cAAC0G,IAAY,CACXC,QAASugE,EAAe/0E,GACxByU,UAAWwgE,EAAiBj1E,KAE7BA,EAAKm1E,UAAYryE,EAAKnG,IACrB3K,IAAA6b,cAAC8G,KAAuB,KACtB3iB,IAAA6b,cAAC+G,IAAU,CACTd,QAASA,KACP6pB,EAAa39B,GAAM2sC,KAAK,KACtBgoC,EAAe30E,MAGnBqgC,KAAK,MACL7J,aAAW,SACXlZ,KAAK,QACLvC,MAAO,CAAEvI,YAAa,IAEtBxgB,IAAA6b,cAACiH,KAAQ,OAEX9iB,IAAA6b,cAAC+G,IAAU,CACTd,QAASA,KACPghE,EAAgB90E,GAChBmqD,GAAoB,IAEtB9pB,KAAK,MACL7J,aAAW,SACXlZ,KAAK,SAELtrB,IAAA6b,cAACmH,KAAU,c,eCrJnC,MAAMpD,GAAYC,YAAYnG,IAAK,CACjCu7C,cAAe,CACbl1C,QAAS,OACTC,cAAe,SACfgJ,SAAU,WACVqJ,KAAM,EACNtB,SAAU,SACVlQ,aAAc,EACdH,OAAQ,OACR4Z,WAAY,iCAEd8oD,YAAa,CACXp6D,SAAU,WACVqI,UAAW,OACX3Q,OAAQ,UACLhH,EAAM4X,gBACT1Q,gBAAiBlH,EAAM8f,QAAQ6pD,UAEjCC,UAAW,CACTt6D,SAAU,WACVtI,OAAQ,QAEVJ,MAAO,CACLsK,QAAS,QAEX24D,WAAY,CACVrjE,OAAQxG,EAAMuoB,QAAQ,IAExBuhD,QAAS,CACP54D,QAAS,gBACT1K,OAAQ,OACR8I,SAAU,WACVpI,gBAAiB,OACjB8Q,SAAU,IACV7Q,aAAc,GACdqM,uBAAwB,EACxB4c,OAAQ,iCAEV25C,SAAU,CACR74D,QAAS,gBACT1K,OAAQ,sBACR8I,SAAU,WACVpI,gBAAiB,QACjBsI,UAAW,QACXwI,SAAU,IACV7Q,aAAc,GACdsM,wBAAyB,EACzB2c,OAAQ,oCAIG,SAAS45C,GAAY/nE,GAQhC,IARiC,KACnC3N,EAAI,SACJ9I,EAAQ,kBACR06B,EAAiB,eACjB+jD,EAAc,kBACdC,EAAiB,SACjBhB,EAAQ,QACR5nE,GACDW,EACC,MAAMqF,EAAUpB,MACV,KAAE9O,GAASqK,qBAAWyD,KACtB,iBAAEysB,GAAqBJ,KACvB44C,EAAUrvD,oBAETsvD,EAAgBC,GAAqB7oE,mBAAS,IAE/C8Z,EAAiBA,KACjB6uD,EAAQ9uD,SACV8uD,EAAQ9uD,QAAQG,eAAe,KAYnC9Z,oBAAU,KACR,GATsBpN,KACtB,QAAayL,IAATzL,EAAoB,CAEtB,OADoBA,EAAK7H,MAAMwX,KAAMoH,GAAMA,EAAEjiB,SAAWgO,EAAKnG,IAC1Ckd,QAAU,EAE/B,OAAO,GAIHiZ,CAAe9yB,GAAQ,EACzB,IACE4L,GAAIoD,KAAK,UAAD9b,OAAW8M,EAAKrD,GAAE,SAAS,CAAE7H,OAAQgO,EAAKnG,KAClD,MAAO6N,IAEXorE,EAAkB7uD,QAAUC,GAE3B,IAUH,OACEh1B,IAAA6b,cAACivB,KAAK,CAACtpB,UAAWR,EAAQi0C,eACxBj1D,IAAA6b,cAAA,OAAKub,SAVarH,IACpB,MAAM,UAAEsH,GAActH,EAAEqF,cACnBwtD,EAASvuD,UAAWrZ,GACrBqc,EAAY,KACdssD,KAM6BniE,UAAWR,EAAQoiE,aAC7CphF,MAAMyb,QAAQvY,IACbA,EAASkd,IAAI,CAACkjB,EAAM1nB,IACd0nB,EAAKoG,WAAa56B,EAAKnG,GAEvB3K,IAAA6b,cAAC6f,KAAG,CAAC9d,IAAKA,EAAK4D,UAAWR,EAAQyiE,UAChCzjF,IAAA6b,cAAC8O,IAAU,CAAC/I,QAAQ,aACjB0jB,EAAK0+C,OAAOr+E,MAEd2/B,EAAKv7B,QACN/J,IAAA6b,cAAC8O,IAAU,CAAC/I,QAAQ,UAAU7B,QAAQ,SACnCsrB,EAAiB/F,EAAKpjB,aAM3BliB,IAAA6b,cAAC6f,KAAG,CAAC9d,IAAKA,EAAK4D,UAAWR,EAAQwiE,SAChCxjF,IAAA6b,cAAC8O,IAAU,CAAC/I,QAAQ,aACjB0jB,EAAK0+C,OAAOr+E,MAEd2/B,EAAKv7B,QACN/J,IAAA6b,cAAC8O,IAAU,CAAC/I,QAAQ,UAAU7B,QAAQ,SACnCsrB,EAAiB/F,EAAKpjB,cAMnCliB,IAAA6b,cAAA,OAAKuI,IAAKy/D,KAEZ7jF,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQsiE,WACtBtjF,IAAA6b,cAACwqB,KAAW,CAACzkB,QAAQ,WAAWiP,WAAS,GACvC7wB,IAAA6b,cAACooE,KAAK,CACJjgC,WAAS,EACTjoC,MAAO+nE,EACPI,QAAUn0D,IACM,UAAVA,EAAEnS,KAA6C,KAA1BkmE,EAAe9hE,SACtC4d,EAAkBkkD,GAClBC,EAAkB,MAGtBriE,SAAWqO,GAAMg0D,EAAkBh0D,EAAEpO,OAAO5F,OAC5CyF,UAAWR,EAAQV,MACnBw7B,aACE97C,IAAA6b,cAACu3C,KAAc,CAACpqC,SAAS,OACvBhpB,IAAA6b,cAAC+G,IAAU,CACTd,QAASA,KACuB,KAA1BgiE,EAAe9hE,SACjB4d,EAAkBkkD,GAClBC,EAAkB,MAGtBviE,UAAWR,EAAQuiE,YAEnBvjF,IAAA6b,cAAC0sC,KAAQ,aClJ3B,MAAM3oC,GAAYC,YAAYnG,IAAK,CACjCu7C,cAAe,CACbl1C,QAAS,OACTC,cAAe,SACfgJ,SAAU,WACVqJ,KAAM,EACNzH,QAASlR,EAAMuoB,QAAQ,GACvBvhB,OAAO,oBACP2Q,UAAW,SACXyY,OAAQ,iCAEVq6C,cAAe,CACb9xD,KAAM,EACN3R,OAAQ,OACRopB,OAAQ,gCACRlpB,gBAAiBlH,EAAM8f,QAAQuS,MAEjCq4C,SAAU,CACR1jE,OAAQ,QAEV2jE,YAAa,CACX3jE,OAAQ,MACRN,MAAO,QAETkkE,aAAc,CACZp7D,UAAW,QACX0B,QAAS,OAIN,SAAS25D,GAAS5oE,GAMrB,IANsB,KACxB/M,EAAI,KACJZ,EAAI,KACJpD,EAAI,YACJukB,EAAW,kBACXq1D,GACD7oE,EACC,MAAOxV,EAAO83C,GAAY/iC,mBAAS,KAC5B5V,EAAOm/E,GAAYvpE,mBAAS,IAEnCE,oBAAU,KAGR,GAFAqpE,EAAS,IACTxmC,EAAS,IACI,SAATrzC,EAAiB,CACnB,MAAMuzC,EAAWnwC,EAAK7H,MAAMic,IAAK2C,IAAC,CAChCpa,GAAIoa,EAAEjU,KAAKnG,GACXhF,KAAMof,EAAEjU,KAAKnL,QAEfs4C,EAASE,GACTsmC,EAASz2E,EAAK1I,SAEf,CAAC0I,EAAMY,EAAMhE,IA8BhB,OACE5K,IAAA6b,cAAC0S,KAAM,CACL3f,KAAMA,EACNyf,QAASc,EACTX,kBAAgB,qBAChBqb,mBAAiB,4BAEjB7pC,IAAA6b,cAAC4S,KAAW,CAAC9jB,GAAG,sBAAqB,YACrC3K,IAAA6b,cAAC6S,KAAa,KACZ1uB,IAAA6b,cAACupB,KAAI,CAACnD,QAAS,EAAGoD,WAAS,GACzBrlC,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAIzc,MAAO,CAAE6B,QAAS,IAAM0a,MAAI,GACxCtlC,IAAA6b,cAAC4F,KAAS,CACR3P,MAAM,YACNrD,YAAY,YACZsN,MAAOzW,EACPoc,SAAWqO,GAAM00D,EAAS10D,EAAEpO,OAAO5F,OACnC6F,QAAQ,WACR0J,KAAK,QACLuF,WAAS,KAGb7wB,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAIF,MAAI,GAChBtlC,IAAA6b,cAACkiC,GAAW,CACVV,WAAal3C,GAAU83C,EAAS93C,GAChC63C,aAAc73C,OAKtBnG,IAAA6b,cAAC+S,KAAa,KACZ5uB,IAAA6b,cAACgG,KAAM,CAACC,QAASqN,EAAaliB,MAAM,WAAU,UAG9CjN,IAAA6b,cAACgG,KAAM,CAACC,QA7DKzG,UACjB,IACE,IAAK/V,EAEH,YADAo/E,MAAM,gDAIR,IAAKv+E,GAA0B,IAAjBA,EAAMpE,OAElB,YADA2iF,MAAM,kDAIR,GAAa,SAAT95E,QACIgP,GAAIqnB,IAAI,UAAD//B,OAAW8M,EAAKrD,IAAM,CACjCxE,QACAb,cAEG,CACL,MAAM,KAAEuT,SAAee,GAAIoD,KAAK,SAAU,CACxC7W,QACAb,UAEFk/E,EAAkB3rE,GAEpBsW,IACA,MAAO3W,MAoCwBvL,MAAM,UAAU2U,QAAQ,aAAY,YAwT1DooC,uBAhTf,SAAcnmC,GACZ,MAAM7C,EAAUpB,MACV,KAAE9O,GAASqK,qBAAWyD,IACtB3C,EAAUC,wBAETyoE,EAAYC,GAAiB1pE,oBAAS,IACtC2pE,EAAYC,GAAiB5pE,mBAAS,QACtC6pE,EAAaC,GAAkB9pE,mBAAS,KACxC1K,EAAOy0E,GAAY/pE,mBAAS,KAC5BgqE,EAAeC,GAAoBjqE,mBAAS,CAAEmZ,SAAS,KACvDnvB,EAAUkgF,GAAelqE,mBAAS,KAClCmqE,EAAkBC,GAAuBpqE,mBAAS,CAAEmZ,SAAS,KAC7DkxD,EAAcC,GAAmBtqE,mBAAS,IAC1CF,EAASC,GAAcC,oBAAS,IAChCyjC,EAAKe,GAAUxkC,mBAAS,GACzBmkB,EAAY7K,kBAAO,GACnBovD,EAAoBpvD,oBACpB,GAAE7pB,GAAOy0B,sBAET/+B,EAAgB8a,qBAAWlW,GAEjCmW,oBAAU,IACD,KACLikB,EAAUtK,SAAU,GAErB,IAEH3Z,oBAAU,KACJikB,EAAUtK,SACZ0wD,IAAY9qC,KAAM9hC,IAChB,MAAM,QAAEmP,GAAYnP,EACpB,GAAImP,EAAQjmB,OAAS,IACnBkjF,EAASj9D,GACTm9D,EAAiBtsE,GAEblO,GAAMqd,EAAQjmB,QAAQ,CACxB,MAAMiM,EAAOga,EAAQrK,KAAMggC,GAAMA,EAAE9wB,OAASliB,GAC5C+6E,EAAW13E,OAMlB,IAEHoN,oBAAU,KACJquC,oBAASs7B,IAAgBvnE,eAAIunE,EAAa,OAC5CY,EAAaZ,EAAYp6E,IAAIgwC,KAAK,KACS,oBAA9BipC,EAAkB7uD,SAC3BnxB,WAAW,KACTggF,EAAkB7uD,WACjB,QAKR,CAACgwD,IAEJ3pE,oBAAU,KACR,MAAMxY,EAAYG,aAAaC,QAAQ,aACjC8B,EAASzE,EAAcsC,UAAUC,GA+DvC,OA7DAkC,EAAOnE,GAAG,WAADO,OAAY0B,EAAS,eAAA1B,OAAc4P,EAAKnG,IAAOkO,IAItD,GAHoB,WAAhBA,EAAKuB,QACP6qE,EAAU57D,GAAS,CAACxQ,EAAK+xB,UAAWvhB,IAElB,WAAhBxQ,EAAKuB,OAAqB,CAC5B,MAAMwrE,EAAep1E,EAAM4R,IAAKpU,GAC1BA,EAAKrD,KAAOkO,EAAK+xB,OAAOjgC,IAC1Bq6E,EAAensE,EAAK+xB,QACb,IACF/xB,EAAK+xB,SAGL58B,GAETi3E,EAASW,MAIb9gF,EAAOnE,GAAG,WAADO,OAAY0B,EAAS,SAAUiW,IACtC,GAAoB,WAAhBA,EAAKuB,OAAqB,CAC5B,MAAMyrE,EAAgBr1E,EAAMsX,OAAQnmB,GAAMA,EAAEgJ,MAAQkO,EAAKlO,IACzDs6E,EAASY,GACTT,EAAY,IACZI,EAAgB,GAChBF,EAAoB,CAAEjxD,SAAS,IAC/B2wD,EAAe,IACf/oE,EAAQza,KAAK,aAIbioD,oBAASs7B,IAAgBvnE,eAAIunE,EAAa,OAC5CjgF,EAAOnE,GAAG,WAADO,OAAY0B,EAAS,UAAA1B,OAAS6jF,EAAYp6E,IAAOkO,IACxD,GAAoB,gBAAhBA,EAAKuB,OAA0B,CACjCgrE,EAAa/7D,GAAS,IAAIA,EAAMxQ,EAAKkb,aACrC,MAAM6xD,EAAep1E,EAAM4R,IAAKpU,GAC1BA,EAAKrD,KAAOkO,EAAKkb,WAAW/O,OACvB,IACFnM,EAAK7K,MAGLA,GAETi3E,EAASW,GACThC,EAAkB7uD,UAGpB,GAAoB,WAAhBlc,EAAKuB,OAAqB,CAC5B,MAAMwrE,EAAep1E,EAAM4R,IAAKpU,GAC1BA,EAAKrD,KAAOkO,EAAK7K,KAAKrD,GACjB,IACFkO,EAAK7K,MAGLA,GAETi3E,EAASW,GACThC,EAAkB7uD,aAKjB,KACLjwB,EAAOzC,eAGR,CAAC0iF,EAAa1kF,IAEjB,MAAMqlF,EAAc13E,IAClB,IACEo3E,EAAY,IACZI,EAAgB,GAChBR,EAAeh3E,GACf0xC,EAAO,GACP,MAAOlnC,MAGLstE,EAAczqE,UAClBJ,GAAW,GACX,UACQrB,GAAIoD,KAAK,UAAD9b,OAAW6jF,EAAYp6E,GAAE,aAAa,CAClDZ,QAAS+5E,IAEX,MAAOtrE,IACTyC,GAAW,IAGP8qE,EAAa1qE,UACjB,UACQzB,GAAIlT,OAAO,UAADxF,OAAW8M,EAAKrD,KAChC,MAAO6N,MAGLmtE,EAAetqE,UACnBJ,GAAW,GACX,IACE,MAAM,KAAEpC,SAAee,GAAI0B,IAAI,UAADpa,OAClB8jB,EAAM,yBAAA9jB,OAAwBqkF,IAE1CC,EAAiBn8D,GAASA,EAAO,GACjCi8D,EAAoBzsE,GACpBusE,EAAa/7D,GAAS,IAAIxQ,EAAKmP,WAAYqB,IAC3C,MAAO7Q,IACTyC,GAAW,IAGP+qE,EAAmB3qE,UAClBL,GACH2qE,EAAaZ,EAAYp6E,KAIvB86E,EAAYpqE,UAChB,IACE,MAAM,KAAExC,SAAee,GAAI0B,IAAI,UAC/B,OAAOzC,EACP,MAAOL,GACPzX,QAAQqB,IAAIoW,KAwGhB,OACExY,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACE5oB,IAAA6b,cAAC0oE,GAAS,CACR35E,KAAMi6E,EACNj2E,KAAM+1E,EACN32E,KAAM+2E,EACNP,kBAAoB3rE,IAClBusE,EAAY,IACZI,EAAgB,GAChBR,EAAensE,GACf6mC,EAAO,GACPzjC,EAAQza,KAAK,UAADN,OAAW2X,EAAKgU,QAE9BsC,YAAaA,IAAMy1D,GAAc,KAEnC5kF,IAAA6b,cAACivB,KAAK,CAACtpB,UAAWR,EAAQi0C,eACvBvN,aAAU,KAAM7jC,EAAMzD,OAlHzBpgB,IAAA6b,cAACupB,KAAI,CAAC5jB,UAAWR,EAAQmjE,cAAe9+C,WAAS,GAC/CrlC,IAAA6b,cAACupB,KAAI,CAAC5jB,UAAWR,EAAQojE,SAAU/sC,GAAI,EAAG/R,MAAI,GAE1CtlC,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQsjE,cACtBtkF,IAAA6b,cAACgG,KAAM,CACLC,QAASA,KACPgjE,EAAc,OACdF,GAAc,IAEhB33E,MAAM,UACN2U,QAAQ,aACT,SAKL5hB,IAAA6b,cAAC2mE,GAAQ,CACPhyE,MAAOA,EACPoyE,SAAUsC,EACVlqE,QAASA,EACTynE,iBAAmBz0E,GAAS03E,EAAW13E,GACvC00E,iBAAmB10E,GAAS+3E,EAAW/3E,GACvC20E,eAAgBA,KACdmC,EAAc,QACdF,GAAc,OAIpB5kF,IAAA6b,cAACupB,KAAI,CAAC5jB,UAAWR,EAAQojE,SAAU/sC,GAAI,EAAG/R,MAAI,GAC3CmkB,oBAASs7B,IAAgBvnE,eAAIunE,EAAa,OACzC/kF,IAAA6b,cAAC6nE,GAAY,CACX11E,KAAM+2E,EACNnB,kBAAmBA,EACnBhB,SAAUyC,EACVngF,SAAUA,EACV8V,QAASA,EACT4kB,kBAAmBkmD,EACnBnC,eAAgBqC,MAUxBhmF,IAAA6b,cAACupB,KAAI,CAAC5jB,UAAWR,EAAQmjE,cAAe9+C,WAAS,GAC/CrlC,IAAA6b,cAACupB,KAAI,CAACiS,GAAI,GAAI/R,MAAI,GAChBtlC,IAAA6b,cAACglC,KAAI,CACH9kC,MAAO4iC,EACPoC,eAAe,UACfC,UAAU,UACVt/B,SAAUA,CAACqO,EAAG2tB,IAAMgC,EAAOhC,GAC3BlZ,aAAW,yBAEXxkC,IAAA6b,cAAColC,KAAG,CAACnvC,MAAM,UACX9R,IAAA6b,cAAColC,KAAG,CAACnvC,MAAM,gBAGN,IAAR6sC,GACC3+C,IAAA6b,cAACupB,KAAI,CAAC5jB,UAAWR,EAAQqjE,YAAahtC,GAAI,GAAI/R,MAAI,GAChDtlC,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQsjE,cACtBtkF,IAAA6b,cAACgG,KAAM,CACLC,QAASA,IAAM8iE,GAAc,GAC7B33E,MAAM,UACN2U,QAAQ,aACT,SAIH5hB,IAAA6b,cAAC2mE,GAAQ,CACPhyE,MAAOA,EACPoyE,SAAUsC,EACVlqE,QAASA,EACTynE,iBAAmBz0E,GAAS03E,EAAW13E,GACvC00E,iBAAmB10E,GAAS+3E,EAAW/3E,MAIpC,IAAR2wC,GACC3+C,IAAA6b,cAACupB,KAAI,CAAC5jB,UAAWR,EAAQqjE,YAAahtC,GAAI,GAAI/R,MAAI,GAC/CmkB,oBAASs7B,IAAgBvnE,eAAIunE,EAAa,OACzC/kF,IAAA6b,cAAC6nE,GAAY,CACXE,kBAAmBA,EACnBhB,SAAUyC,EACVngF,SAAUA,EACV8V,QAASA,EACT4kB,kBAAmBkmD,EACnBnC,eAAgBqC,WCxZhC,MAAMpmE,GAAYC,YAAYnG,IAAK,CACjCgwB,UAAW,CACTrX,KAAM,EACNzH,QAASlR,EAAMuoB,QAAQ,GACvB5Q,UAAW,YACR3X,EAAM4X,oBAIP20D,GAAe7zE,IACnB,MAAMzO,EAAM,IAAID,KACVwiF,EAAO,IAAIxiF,KAAK0O,GAChB8L,EAAOM,KAAK2nE,IAAIxiF,EAAIynD,UAAY86B,EAAK96B,WAG3C,OAFa5sC,KAAK4nE,KAAKloE,EAAI,QA8GdgsD,OAzGEA,KAAO,IAADp9B,EAAAC,EACrB,MAAM/rB,EAAUpB,MACV,KAAE9O,GAASqK,qBAAWyD,KAErB5D,GAAYE,oBAAS,IACrB,CAAEuL,GAAiBvL,mBAAS,IAC5B2tD,EAAmBC,GAAwB5tD,mBAAS,OACpDi/B,EAAkBC,GAAuBl/B,oBAAS,IAClDmZ,GAAYnZ,oBAAS,GAyB5B,OACElb,IAAA6b,cAACs5C,GAAa,CAAC3zC,UAAWR,EAAQi0C,eAChCj1D,IAAA6b,cAACutD,GAAiB,CAChBx6D,KAAMurC,EACN9rB,QArB0B+sB,KAC9B0tB,EAAqB,MACrB1uB,GAAoB,IAoBhB5rB,kBAAgB,oBAChBkqB,UAAWmwB,IAGb7oE,IAAA6b,cAACw5C,GAAU,KACTr1D,IAAA6b,cAAC61B,GAAK,KAAC,eAET1xC,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GAAI4R,GAAI,GACrBp3C,IAAA6b,cAACivB,KAAK,CACJtpB,UAAWR,EAAQ0oB,UACnB9nB,QAAQ,WACRwV,SAxBcrH,IACpB,IAAKsE,GAAWrZ,EAAS,OACzB,MAAM,UAAEqc,EAAS,aAAE0T,EAAY,aAAEC,GAAiBjb,EAAEqF,cAChD2V,GAAgB1T,EAAY,KAAO2T,GANvCvkB,EAAe6U,GAAcA,EAAY,KA8BnCt7B,IAAA6b,cAAA,WACE7b,IAAA6b,cAAC4F,KAAS,CACR9W,GAAG,sBACHmH,MAAM,sBACN69B,aAAY,sCAAAzuC,OAAqC+kF,GAAgB,OAAJn1E,QAAI,IAAJA,GAAa,QAATg8B,EAAJh8B,EAAMyB,eAAO,IAAAu6B,OAAT,EAAJA,EAAeu5C,iBAAgB,UAC5Fx1D,WAAS,EACT3Q,OAAO,SACPm4B,gBAAiB,CACf9R,QAAQ,GAEVsV,WAAY,CACVjM,UAAU,GAEZhuB,QAAQ,cAKZ5hB,IAAA6b,cAAA,WACE7b,IAAA6b,cAAC4F,KAAS,CACR9W,GAAG,sBACHmH,MAAM,uBACN69B,aAAkB,OAAJ7+B,QAAI,IAAJA,GAAa,QAATi8B,EAAJj8B,EAAMyB,eAAO,IAAAw6B,OAAT,EAAJA,EAAennC,MAC7BirB,WAAS,EACT3Q,OAAO,SACPm4B,gBAAiB,CACf9R,QAAQ,GAEVsV,WAAY,CACVjM,UAAU,GAEZhuB,QAAQ,cAKZ5hB,IAAA6b,cAAA,WACE7b,IAAA6b,cAACgG,KAAM,CACLD,QAAQ,YACR3U,MAAM,UACN6U,QAjFmB8oD,KAC7B9B,EAAqB,MACrB1uB,GAAoB,IAgFVvpB,WAAS,GACV,sBC1Fb,MAAMjR,GAAYC,YAAWnG,IAAK,CAC9BoG,KAAM,CACFC,QAAS,OACT0Q,SAAU,OACV2gD,IAAK,GAETrqC,cAAe,CACXhnB,QAAS,OACT,yBAA0B,CACtBS,YAAa9G,EAAMuoB,QAAQ,KAGnCgH,UAAW,CACPzoB,YAAa9G,EAAMuoB,QAAQ,GAC3B5P,KAAM,GAGVkmB,UAAW,CACPx4B,QAAS,OACT4T,eAAgB,SAChB1T,WAAY,UAGhB+mB,WAAY,CACRhe,SAAU,YAGd8B,eAAgB,CACZ7d,MAAO8d,KAAM,KACb/B,SAAU,WACVgC,IAAK,MACLC,KAAM,MACNtK,WAAY,GACZuK,YAAa,IAEjB+b,YAAa,CACT/mB,OAAQxG,EAAMuoB,QAAQ,GACtB3R,SAAU,KAEdi9C,cAAe,CACXntD,MAAO,GACPM,OAAQ,OAIV4lE,GAAiBn/C,OAAaC,MAAM,CACtCzhC,KAAMwhC,OACDxB,IAAI,EAAG,oBACP0B,SAAS,kBACdt9B,QAASo9B,OACJE,SAAS,oBAsQHk/C,OAnQI5qE,IAA4C,IAA3C,KAAE/M,EAAI,QAAEyf,EAAO,WAAE6uD,EAAU,OAAEn5E,GAAQ4X,EACrD,MAAMqF,EAAUpB,MACV,KAAE9O,GAASqK,qBAAWyD,KACpBlO,EAAO81E,GAAatrE,mBAAS,KAC9BurE,EAAmBC,GAAwBxrE,mBAAS,IAGrDqsB,EAAe,CACjB5hC,KAAM,GACNoE,QAAS,GACT+B,QAAS,CAAC,CAAEnG,KAAM,GAAI2vE,KAAK,GAAIhgD,UAAU,OAGtCxhB,EAAU6yE,GAAezrE,mBAASqsB,GAEzCnsB,oBAAU,KACN,IACI,WACI,IAAK8hE,EAAY,OAEjB,MAAM,KAAErkE,SAAee,GAAI0B,IAAI,UAADpa,OAAWg8E,IACzCyJ,EAAY9tE,IAJhB,GAMF,MAAOL,GACLD,GAAWC,KAEhB,CAAC0kE,EAAYtuE,IAEhB,MAAMugB,EAAcA,KAChBw3D,EAAYp/C,GACZi/C,EAAS,IACTn4D,KAmDJ,OACIruB,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQlB,MACpB9f,IAAA6b,cAAC0S,KAAM,CACH3f,KAAMA,EACNyf,QAASc,EACTuC,SAAS,KACTb,WAAS,EACTsL,OAAO,SACPn8B,IAAA6b,cAAC4S,KAAW,CAAC9jB,GAAG,qBACA,GAAAzJ,OAAVg8E,EAAgBnlE,KAAKkB,EAAE,wBAA+BlB,KAAKkB,EAAE,yBAEnEjZ,IAAA6b,cAACisB,KAAM,CACHC,cAAej0B,EACfk0B,oBAAoB,EACpBC,iBAAkBq+C,GAClBp+C,SAAUA,CAACC,EAAQ1/B,KACf7E,WAAW,KAhEJyX,WAEvB,MAAMurE,EAAcvrE,MAAOvP,EAAS+6E,EAAcl8E,KAC1C,MAAMugD,EAAW,IAAIC,SACrBD,EAASG,OAAO,SAAU1gD,GAC1BugD,EAASG,OAAO,WAAY,YAC5Bw7B,EAAahiE,QAAQ,CAACiiE,EAAYzkE,KAC1BykE,EAAW34B,OACXjD,EAASG,OAAO,QAASy7B,EAAW34B,MACpCjD,EAASG,OAAO,YAAay7B,EAAW34B,KAAKvjD,MAC7CsgD,EAASG,OAAO,OAAQv/C,EAAQuW,GAAO1c,MACvCulD,EAASG,OAAO,KAAMv/C,EAAQuW,GAAO1X,OAI/C,IACE,MAAM,KAAEkO,SAAee,GAAIoD,KAAK,qBAAD9b,OAAsByJ,GAAMugD,GAE3D,OADAs7B,EAAS,IACF3tE,EACP,MAAOL,GACPD,GAAWC,GAEf,OAAO,MAGLuuE,EAAW,IAAK5+C,EAAQrlC,OAAQgO,EAAKnG,IAE3C,IACI,GAAIuyE,EAAY,CACZ,MAAM,KAAErkE,SAAee,GAAIqnB,IAAI,UAAD//B,OAAWg8E,GAAc6J,GACnDluE,EAAK/M,QAAQ/J,OAAS,GAEtB6kF,EAAY/tE,EAAK/M,QAASq8B,EAAOr8B,QAASoxE,OAC3C,CACH,MAAM,KAAErkE,SAAee,GAAIoD,KAAK,SAAU+pE,GACtCluE,EAAK/M,QAAQ/J,OAAS,GACtB6kF,EAAY/tE,EAAK/M,QAASq8B,EAAOr8B,QAAS+M,EAAKlO,IAEvDqO,IAAMxT,QAAQuS,KAAKkB,EAAE,sBACA,mBAAVlV,GACPA,IAEN,MAAOyU,GACLD,GAAWC,GAEf2W,KAoBoB63D,CAAmB7+C,GACnB1/B,EAAQ4/B,eAAc,IACvB,OAGNzc,IAAA,IAAC,QAAE0c,EAAO,OAAEC,EAAM,aAAEC,EAAY,OAAEL,GAAQvc,EAAA,OACvC5rB,IAAA6b,cAAC4sB,KAAI,KACDzoC,IAAA6b,cAAC6S,KAAa,CAACC,UAAQ,GACnB3uB,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQ+lB,eACpB/mC,IAAA6b,cAAC6sB,KAAK,CACFC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,uBACdtT,KAAK,OACLmT,MAAOwvB,EAAQ3iC,MAAQkvB,QAAQ0T,EAAO5iC,MACtCkjC,WAAYP,EAAQ3iC,MAAQ4iC,EAAO5iC,KACnCic,QAAQ,WACR1B,OAAO,QACP2Q,WAAS,KAGjB7wB,IAAA6b,cAAA,WACA7b,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQ+lB,eACpB/mC,IAAA6b,cAAC6sB,KAAK,CACFC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,0BACdrO,KAAK,UACLo5C,WAAS,EACTijC,QAAS,EACTp2D,WAAS,EACTlrB,KAAK,UACLmT,MACIwvB,EAAQv+B,SAAW8qB,QAAQ0T,EAAOx+B,SAEtC8+B,WACIP,EAAQv+B,SAAWw+B,EAAOx+B,QAE9B6X,QAAQ,WACR1B,OAAO,WAGflgB,IAAA6b,cAAC8O,IAAU,CACP5B,MAAO,CAAE1I,aAAc,EAAGM,UAAW,IACrCiB,QAAQ,aAEP7J,KAAKkB,EAAE,+BAGZjZ,IAAA6b,cAACi9B,KAAU,CAACnzC,KAAK,WACZozC,IAAA,IAAC,KAAEv3C,EAAI,OAAE+hB,GAAQw1B,EAAA,OACd/4C,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACKuf,EAAOr8B,SACJq8B,EAAOr8B,QAAQ/J,OAAS,GACxBomC,EAAOr8B,QAAQsW,IAAI,CAAC42B,EAAM32B,IACtBriB,IAAA6b,cAAA,OACI2F,UAAWR,EAAQu3B,UACnB36B,IAAG,GAAA1c,OAAKmhB,EAAK,UAEbriB,IAAA6b,cAACupB,KAAI,CAACC,WAAS,EAAEpD,QAAS,GACtBjiC,IAAA6b,cAACupB,KAAI,CAACI,GAAI,EAAG6R,GAAI,GAAI/R,MAAI,GACrBtlC,IAAA6b,cAAC6sB,KAAK,CACFC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,4BACdtT,KAAI,WAAAzE,OAAamhB,EAAK,UACtBT,QAAQ,WACR1B,OAAO,QACP8jC,WAAS,EACTnzB,WAAS,EACTo2D,QAAS,EACTzlE,UAAWR,EAAQioB,aAG3BjpC,IAAA6b,cAACupB,KAAI,CAACI,GAAI,EAAG6R,GAAI,EAAG/R,MAAI,EAACvc,MAAO,CAAEhJ,QAAS,OAAQE,WAAY,SAAU0T,eAAgB,aACrF3zB,IAAA6b,cAAA,SACIjR,KAAK,OACL8W,SAAWqO,IACP,MAAMm3D,EAAen3D,EAAEpO,OAAOjR,MAAM,GAC9By2E,EAAiB,IAAIh/C,EAAOr8B,SAClCq7E,EAAe9kE,GAAO8rC,KAAO+4B,EAE7BV,EAAS,UAAWW,GAGpB,MAAMC,EAAmB,IAAIX,GAC7BW,EAAiB/kE,GAAS6kE,EAAeA,EAAavhF,KAAO,GAC7D+gF,EAAqBU,IAEzBr+D,MAAO,CAAEhJ,QAAS,QAClBpa,KAAI,WAAAzE,OAAamhB,EAAK,UACtB1X,GAAE,eAAAzJ,OAAiBmhB,KAEvBriB,IAAA6b,cAAA,SAAOisC,QAAO,eAAA5mD,OAAiBmhB,IAC3BriB,IAAA6b,cAAC+G,IAAU,CAAC8B,UAAU,QAClB1kB,IAAA6b,cAACksC,KAAc,QAGvB/nD,IAAA6b,cAAC+G,IAAU,CACP0I,KAAK,QACLxJ,QAASA,IAAMyB,EAAOlB,IAEtBriB,IAAA6b,cAACo9B,KAAiB,QAG1Bj5C,IAAA6b,cAACupB,KAAI,CAACI,GAAI,GAAI6R,GAAI,GAAI/R,MAAI,GACrB0T,EAAKs8B,KAAMt8B,EAAKs8B,KAAOmR,EAAkBpkE,OAM9DriB,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQu3B,WACpBv4C,IAAA6b,cAACgG,KAAM,CACHkH,MAAO,CAAEsJ,KAAM,EAAG1R,UAAW,GAC7BiB,QAAQ,WACR3U,MAAM,UACN6U,QAASA,KAAOtgB,EAAK,CAAEmE,KAAM,GAAI2vE,KAAM,KACvCoR,EAAqB,IAAID,EAAmB,OAC9C,KAAAvlF,OAEQ6W,KAAKkB,EAAE,wCAOrCjZ,IAAA6b,cAAC+S,KAAa,KACV5uB,IAAA6b,cAACgG,KAAM,CACHC,QAASqN,EACTliB,MAAM,YACNzG,SAAUgiC,EACV5mB,QAAQ,YAEP7J,KAAKkB,EAAE,6BAEZjZ,IAAA6b,cAACgG,KAAM,CACHjX,KAAK,SACLqC,MAAM,UACNzG,SAAUgiC,EACV5mB,QAAQ,YACRJ,UAAWR,EAAQgmB,YAER,GAAA9lC,OAAVg8E,EACQnlE,KAAKkB,EAAE,4BACPlB,KAAKkB,EAAE,4BACfuvB,GACGxoC,IAAA6b,cAACwP,KAAgB,CACbC,KAAM,GACN9J,UAAWR,EAAQ8J,yBCzS/D,MAAM5Q,GAAUA,CAACC,EAAOC,KACpB,GAAoB,eAAhBA,EAAOxP,KAAuB,CAC9B,MAAM8F,EAAQ0J,EAAOC,QACfgtE,EAAW,GAWjB,OATA32E,EAAMmU,QAAS/Q,IACX,MAAMwzE,EAAgBntE,EAAMzY,UAAW8Y,GAAMA,EAAE7P,KAAOmJ,EAASnJ,KACxC,IAAnB28E,EACAntE,EAAMmtE,GAAiBxzE,EAEvBuzE,EAAS7lF,KAAKsS,KAIf,IAAIqG,KAAUktE,GAGzB,GAAoB,iBAAhBjtE,EAAOxP,KAAyB,CAChC,MAAMkJ,EAAWsG,EAAOC,QAClBitE,EAAgBntE,EAAMzY,UAAW8Y,GAAMA,EAAE7P,KAAOmJ,EAASnJ,IAE/D,OAAuB,IAAnB28E,GACAntE,EAAMmtE,GAAiBxzE,EAChB,IAAIqG,IAEJ,CAACrG,KAAaqG,GAI7B,GAAoB,eAAhBC,EAAOxP,KAAuB,CAC9B,MAAMsyE,EAAa9iE,EAAOC,QAEpBitE,EAAgBntE,EAAMzY,UAAW8Y,GAAMA,EAAE7P,KAAOuyE,GAItD,OAHuB,IAAnBoK,GACAntE,EAAMvY,OAAO0lF,EAAe,GAEzB,IAAIntE,GAGf,GAAoB,UAAhBC,EAAOxP,KACP,MAAO,IAITgV,GAAYC,YAAYnG,IAAK,CAC/BgwB,UAAW,CACPrX,KAAM,EACNzH,QAASlR,EAAMuoB,QAAQ,GACvB5Q,UAAW,YACR3X,EAAM4X,oBAyMFi2D,OArMGA,KACd,MAAMvmE,EAAUpB,MAEV,KAAE9O,GAASqK,qBAAWyD,KAErB5D,EAASC,GAAcC,oBAAS,IAChCsL,EAAYC,GAAiBvL,mBAAS,IACtCmZ,EAASC,GAAcpZ,oBAAS,IAChCssE,EAAkBC,GAAuBvsE,mBAAS,OAClDwsE,EAAkBC,GAAuBzsE,mBAAS,OAClDg9C,EAAkBC,GAAuBj9C,oBAAS,IAClDwL,EAAa8yB,GAAkBt+B,mBAAS,KACxCxK,EAAOoK,GAAYC,qBAAWb,GAAS,KACvC0tE,EAAmBC,GAAwB3sE,oBAAS,GAErD4sE,EAAiBrvB,sBAAYp9C,UAC/B,IACI,MAAM,KAAExC,SAAee,GAAI0B,IAAI,UAAW,CACtCla,OAAQ,CAAEslB,cAAaF,gBAE3B1L,EAAS,CAAElQ,KAAM,aAAcyP,QAASxB,EAAKnI,QAC7C4jB,EAAWzb,EAAKwb,SAChBpZ,GAAW,GACb,MAAOzC,GACLD,GAAWC,KAEhB,CAACkO,EAAaF,IAEXnmB,EAAgB8a,qBAAWlW,GAEjCmW,oBAAU,KACNN,EAAS,CAAElQ,KAAM,UACjB6b,EAAc,IACf,CAACC,IAEJtL,oBAAU,KACNH,GAAW,GACX,MAAMuM,EAAkB5jB,WAAW,KAC/BkkF,KACD,KACH,MAAO,IAAMpgE,aAAaF,IAC3B,CAACd,EAAaF,EAAYshE,IAE7B1sE,oBAAU,KACN,MAAMtW,EAASzE,EAAcsC,UAAUmO,EAAKlO,WAY5C,OAVAkC,EAAOnE,GAAG,WAADO,OAAY4P,EAAKlO,UAAS,SAAUiW,IACrB,WAAhBA,EAAKuB,QAAuC,WAAhBvB,EAAKuB,QACjCU,EAAS,CAAElQ,KAAM,eAAgByP,QAASxB,EAAKnI,QAG/B,WAAhBmI,EAAKuB,QACLU,EAAS,CAAElQ,KAAM,cAAeyP,SAAUxB,EAAKkvE,WAIhD,KACHjjF,EAAOzC,eAEZ,CAAChC,EAAeyQ,IAiDnB,OACI9Q,IAAA6b,cAACs5C,GAAa,KACVn1D,IAAA6b,cAACuS,GAAiB,CACd9oB,MAAOoiF,GAAgB,GAAAxmF,OAAO6W,KAAKkB,EAAE,wCACrCrK,KAAMspD,EACN7pC,QAAS8pC,EACT7pC,UAAWA,IAlCMjT,WACzB,UACUzB,GAAIlT,OAAO,UAADxF,OAAWg8E,IAC3BlkE,IAAMxT,QAAQuS,KAAKkB,EAAE,yBACvB,MAAOT,GACLD,GAAWC,GAEfmvE,EAAoB,MACpBnuC,EAAe,IACf/yB,EAAc,GAEd3L,EAAS,CAAElQ,KAAM,UACjB6b,EAAc,SACRqhE,KAqBmBE,CAAqBN,EAAiB/8E,KAEtDoN,KAAKkB,EAAE,0CAEZjZ,IAAA6b,cAACosE,GAAS,CACNr5E,KAAMg5E,EACNv5D,QAtDqB65D,KAC7BT,EAAoB,MACpBI,GAAqB,IAqDb9jF,OAAQ+jF,EACRt5D,kBAAgB,oBAChB0uD,WAAYsK,GAAoBA,EAAiB78E,KAErD3K,IAAA6b,cAACw5C,GAAU,KACPr1D,IAAA6b,cAAC61B,GAAK,KAAE35B,KAAKkB,EAAE,eAAe,KAAGvI,EAAM3O,OAAO,KAC9C/B,IAAA6b,cAACy5C,GAAwB,KACrBt1D,IAAA6b,cAAC4F,KAAS,CACNhT,YAAasJ,KAAKkB,EAAE,8BACpBrO,KAAK,SACLmR,MAAO2K,EACPhF,SA7DEvgB,IAClBq4C,EAAer4C,EAAMwgB,OAAO5F,MAAMsiC,gBA6DlBxC,WAAY,CACRiuB,eACI9pE,IAAA6b,cAACu3C,KAAc,CAACpqC,SAAS,SACrBhpB,IAAA6b,cAACulC,KAAU,CAACr4B,MAAO,CAAE9b,MAAO,cAK5CjN,IAAA6b,cAACgG,KAAM,CACHD,QAAQ,YACR3U,MAAM,UACN6U,QAnFYqmE,KAC5BV,EAAoB,MACpBI,GAAqB,KAmFJ9vE,KAAKkB,EAAE,wBAIpBjZ,IAAA6b,cAACivB,KAAK,CACFtpB,UAAWR,EAAQ0oB,UACnB9nB,QAAQ,WACRwV,SArDUrH,IAClB,IAAKsE,GAAWrZ,EAAS,OACzB,MAAM,UAAEqc,EAAS,aAAE0T,EAAY,aAAEC,GAAiBjb,EAAEqF,cAChD2V,GAAgB1T,EAAY,KAAO2T,GANvCvkB,EAAe6U,GAAcA,EAAY,KA0DjCt7B,IAAA6b,cAACm0B,KAAK,CAAC1kB,KAAK,SACRtrB,IAAA6b,cAACo0B,KAAS,KACNjwC,IAAA6b,cAACq0B,KAAQ,KACLlwC,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAAUr4B,KAAKkB,EAAE,qBAClCjZ,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACZr4B,KAAKkB,EAAE,0BAIpBjZ,IAAA6b,cAACw0B,KAAS,KACNrwC,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACKlY,EAAM0R,IAAKtO,GACR9T,IAAA6b,cAACq0B,KAAQ,CAACtyB,IAAK9J,EAASnJ,IACpB3K,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACZt8B,EAASnO,MAEd3F,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACbpwC,IAAA6b,cAAC+G,IAAU,CAAC0I,KAAK,QAAQxJ,QAASA,IAjG1ChO,KACxB2zE,EAAoB3zE,GACpB+zE,GAAqB,IA+FmDO,CAAmBt0E,IACvD9T,IAAA6b,cAACiH,KAAQ,OAGb9iB,IAAA6b,cAAC+G,IAAU,CACP0I,KAAK,QACLxJ,QAAUiO,IACNooC,GAAoB,GACpBwvB,EAAoB7zE,KAGxB9T,IAAA6b,cAACo9B,KAAiB,UAKjCj+B,GAAWhb,IAAA6b,cAAC25C,GAAgB,CAACC,QAAS,U,sBC7QnE,MAAM71C,GAAYC,YAAWnG,IAAK,CAC9ButB,YAAa,CACT/mB,OAAQxG,EAAMuoB,QAAQ,GACtB3R,SAAU,QAmDH+3D,OA/CWA,KACtB,MAAMrnE,EAAUpB,MACT3P,EAAQk2B,GAAajrB,mBAAS,IAarC,OAXAE,oBAAU,KACN,WACI,IACI,MAAM,KAAEvC,SAAee,GAAI0B,IAAI,UAC/B6qB,EAAUttB,GACZ,MAAOL,GACLD,GAAW,wBAADrX,OAAyBsX,MAL3C,IAQD,IAGCxY,IAAA6b,cAAA,OAAKkN,MAAO,CAAEpI,UAAW,IACrB3gB,IAAA6b,cAACwqB,KAAW,CACRzkB,QAAQ,WACRJ,UAAWR,EAAQqlB,YACnBnmB,OAAO,QACP2Q,WAAS,GAET7wB,IAAA6b,cAAA,WACI7b,IAAA6b,cAAC8O,IAAU,KACN5S,KAAKkB,EAAE,2BAEZjZ,IAAA6b,cAAC6sB,KAAK,CACFC,GAAInC,KACJ10B,MAAOiG,KAAKkB,EAAE,0BACdtT,KAAK,UACLmjC,QAAQ,wBACRn+B,GAAG,kBACHkmB,WAAS,GAER5gB,EAAOmS,IAAI5V,GACRxM,IAAA6b,cAACiU,IAAQ,CAAClS,IAAKpR,EAAM7B,GAAIoR,MAAOvP,EAAM7B,IACjC6B,EAAM7G,YC/BvC,MAAMia,GAAYC,YAAWnG,IAAK,CAC9BoG,KAAM,CACFC,QAAS,OACT0Q,SAAU,QAEdsW,cAAe,CACXhnB,QAAS,OACT,yBAA0B,CACtBS,YAAa9G,EAAMuoB,QAAQ,KAInC+E,WAAY,CACRhe,SAAU,YAGd8B,eAAgB,CACZ7d,MAAO8d,KAAM,KACb/B,SAAU,WACVgC,IAAK,MACLC,KAAM,MACNtK,WAAY,GACZuK,YAAa,IAEjB+b,YAAa,CACT/mB,OAAQxG,EAAMuoB,QAAQ,GACtB3R,SAAU,KAEdi9C,cAAe,CACXntD,MAAO,GACPM,OAAQ,OAIKymB,OAAaC,MAAM,CACpCzhC,KAAMwhC,OAAaxB,IAAI,EAAG,gBAAgBC,IAAI,IAAK,gBAAgByB,SAAS,kBAC5E/9B,OAAQ69B,OAAaxB,IAAI,GAAI,gBAAgB0B,SAAS,0DACtDr7B,MAAOm7B,OAAaE,SAAS,2BAC7Bp7B,WAAYk7B,OAAaE,SAAS,2CAClCn7B,YAAai7B,OAAaE,SAAS,yBACnCl7B,OAAQg7B,OAAaE,SAAS,qBAC9BlM,QAASgM,OAAaE,SAAS,kBAC/Bj7B,aAAc+6B,OAAaE,SAAS,gDA2SzBihD,OAxSK3sE,IAAkC,IAAjC,KAAE/M,EAAI,QAAEyf,EAAO,SAAEgT,GAAU1lB,EAC5C,MAAMqF,EAAUpB,MACT2oE,EAAeC,GAAoBttE,mBAAS,UAC5CutE,EAAYC,GAAiBxtE,oBAAS,GAEvCytE,EAAqBA,KACvBD,GAAeD,IAGblhD,EAAe,CACjB5hC,KAAM,GACN2D,OAAQ,GACR0C,MAAO,QACPK,SAAU,GACVC,YAAa,GACbs8E,UAAW,IACX18E,YAAa,EACb28E,OAAQ,GACR1tD,QAAS,KACT2tD,YAAa,KAGVx/E,EAAQy/E,GAAa7tE,mBAASqsB,GAErCnsB,oBAAU,KACcC,WAChB,GAAKgmB,EAIL,IACI,MAAM,KAAExoB,SAAee,GAAI0B,IAAI,WAADpa,OAAYmgC,IAC1C0nD,EAAUztD,IACC,IAAKA,KAAcziB,KAE9B2vE,EAAiB3vE,EAAK7M,OACxB,MAAOwM,GACLD,GAAWC,QAVXuwE,EAAUxhD,IAclByhD,IACD,CAAC3nD,EAAUzyB,IAEd,MAAMugB,EAAcA,KAChB45D,EAAUxhD,GACVihD,EAAiB,SACjBn6D,KAGE46D,EAAqBl5D,IACvBy4D,EAAiBz4D,EAAEpO,OAAO5F,QAsB9B,OACI/b,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQlB,MACpB9f,IAAA6b,cAAC0S,KAAM,CACH3f,KAAMA,EACNyf,QAASc,EACTuC,SAAS,KACTyK,OAAO,QACPtL,WAAS,GAET7wB,IAAA6b,cAAC4S,KAAW,CAAC9jB,GAAG,qBACH,GAAAzJ,OAARmgC,EACQtpB,KAAKkB,EAAE,0BACPlB,KAAKkB,EAAE,2BAEpBjZ,IAAA6b,cAACisB,KAAM,CACHC,cAAez+B,EACf0+B,oBAAoB,EACpBE,SAAUA,CAACC,EAAQ1/B,KACf7E,WAAW,KArCNyX,WACrB,MAAM6tE,EAAa,IAAK/gD,EAAQn8B,MAAOu8E,GACvC,GAAKpgD,EAAOhN,QAAZ,CAIA,IACQkG,QACMznB,GAAIqnB,IAAI,WAAD//B,OAAYmgC,GAAY6nD,SAE/BtvE,GAAIoD,KAAK,UAAWksE,GAE9BlwE,IAAMxT,QAAQuS,KAAKkB,EAAE,wBACvB,MAAOT,GACLD,GAAWC,GAEf2W,SAbI5W,GAAW,oBAmCK4wE,CAAiBhhD,GACjB1/B,EAAQ4/B,eAAc,IACvB,OAGNzc,IAAA,IAAC,QAAE0c,EAAO,OAAEC,EAAM,aAAEC,EAAY,OAAEL,GAAQvc,EAAA,OACvC5rB,IAAA6b,cAAC4sB,KAAI,CAAC1f,MAAO,CAAE3I,MAAO,SAClBpgB,IAAA6b,cAAC6S,KAAa,CAACC,UAAQ,GACnB3uB,IAAA6b,cAAC6sB,KAAK,CACFC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,yBACdtT,KAAK,OACLmT,MAAOwvB,EAAQ3iC,MAAQkvB,QAAQ0T,EAAO5iC,MACtCkjC,WAAYP,EAAQ3iC,MAAQ4iC,EAAO5iC,KACnCic,QAAQ,WACR1B,OAAO,QACP2Q,WAAS,IAEb7wB,IAAA6b,cAACwqB,KAAW,CAACxV,WAAS,EAAC3Q,OAAO,QAAQ0B,QAAQ,YAC1C5hB,IAAA6b,cAAC6sB,KAAK,CACFC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,2BACdtT,KAAK,SACLiF,KAAM69E,EAAa,OAAS,WAC5B3vE,MAAOwvB,EAAQugD,QAAUh0D,QAAQ0T,EAAOsgD,QACxChgD,WAAYP,EAAQugD,QAAUtgD,EAAOsgD,OACrCjnE,QAAQ,WACR1B,OAAO,QACP2Q,WAAS,EACTgrB,WAAY,CACRC,aACI97C,IAAA6b,cAACu3C,KAAc,CAACpqC,SAAS,OACrBhpB,IAAA6b,cAAC+G,IAAU,CAACd,QAAS6mE,GAChBF,EAAazoF,IAAA6b,cAACutE,KAAa,MAAMppF,IAAA6b,cAACwtE,KAAU,YAOrErpF,IAAA6b,cAAC6sB,KAAK,CACFC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,2BACdtT,KAAK,SACLmT,MAAOwvB,EAAQh/B,QAAUurB,QAAQ0T,EAAOj/B,QACxCu/B,WAAYP,EAAQh/B,QAAUi/B,EAAOj/B,OACrCsY,QAAQ,WACR1B,OAAO,QACP2Q,WAAS,EACTkzB,KAAM,GACNC,WAAW,IAEfhkD,IAAA6b,cAACwsE,GAAiB,MAClBroF,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQ+lB,eACpB/mC,IAAA6b,cAACwqB,KAAW,CAACxV,WAAS,EAAC3Q,OAAO,QAAQ0B,QAAQ,YAC9C5hB,IAAA6b,cAACyqB,KAAU,KAAEvuB,KAAKkB,EAAE,2BAChBjZ,IAAA6b,cAAC2qB,KAAM,CACH77B,GAAG,cACH87B,WAAY,GACZ9gC,KAAK,QACLoW,MAAOwsE,EACP7mE,SAAUunE,EACV/iD,UAAU,GAEVlmC,IAAA6b,cAACiU,IAAQ,CAAClS,IAAK,QAAS7B,MAAO,SAAS,SAGxC/b,IAAA6b,cAACiU,IAAQ,CAAClS,IAAK,wBAAyB7B,MAAO,yBAAyB,YAGxE/b,IAAA6b,cAACiU,IAAQ,CAAClS,IAAK,sBAAuB7B,MAAO,uBAAuB,cAGpE/b,IAAA6b,cAACiU,IAAQ,CAAClS,IAAK,qBAAsB7B,MAAO,sBAAsB,UAGlE/b,IAAA6b,cAACiU,IAAQ,CAAClS,IAAK,qBAAsB7B,MAAO,sBAAsB,UAGlE/b,IAAA6b,cAACiU,IAAQ,CAAClS,IAAK,mBAAoB7B,MAAO,oBAAoB,QAG9D/b,IAAA6b,cAACiU,IAAQ,CAAClS,IAAK,oBAAqB7B,MAAO,qBAAqB,YAGhE/b,IAAA6b,cAACiU,IAAQ,CAAClS,IAAK,uBAAwB7B,MAAO,wBAAwB,YAGtE/b,IAAA6b,cAACiU,IAAQ,CAAClS,IAAK,uBAAwB7B,MAAO,wBAAwB,YAGtE/b,IAAA6b,cAACiU,IAAQ,CAAClS,IAAK,oBAAqB7B,MAAO,qBAAqB,SAGhE/b,IAAA6b,cAACiU,IAAQ,CAAClS,IAAK,oBAAqB7B,MAAO,qBAAqB,SAGhE/b,IAAA6b,cAACiU,IAAQ,CAAClS,IAAK,sBAAuB7B,MAAO,uBAAuB,cAGpE/b,IAAA6b,cAACiU,IAAQ,CAAClS,IAAK,sBAAuB7B,MAAO,uBAAuB,WAGpE/b,IAAA6b,cAACiU,IAAQ,CAAClS,IAAK,sBAAuB7B,MAAO,uBAAuB,WAGpE/b,IAAA6b,cAACiU,IAAQ,CAAClS,IAAK,sBAAuB7B,MAAO,uBAAuB,cAGpE/b,IAAA6b,cAACiU,IAAQ,CAAClS,IAAK,mBAAoB7B,MAAO,oBAAoB,UAKtE/b,IAAA6b,cAAC6sB,KAAK,CACFC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,6BACdtT,KAAK,WACLmT,MAAOwvB,EAAQj8B,UAAYwoB,QAAQ0T,EAAOl8B,UAC1Cw8B,WAAYP,EAAQj8B,UAAYk8B,EAAOl8B,SACvCuV,QAAQ,WACR1B,OAAO,QACP2Q,WAAS,IAEb7wB,IAAA6b,cAAC6sB,KAAK,CACFC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,gCACdtT,KAAK,cACLmT,MAAOwvB,EAAQh8B,aAAeuoB,QAAQ0T,EAAOj8B,aAC7Cu8B,WAAYP,EAAQh8B,aAAei8B,EAAOj8B,YAC1CsV,QAAQ,WACR1B,OAAO,QACP2Q,WAAS,KAIjB7wB,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQ+lB,eACpB/mC,IAAA6b,cAAC6sB,KAAK,CACFC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,gCACdtT,KAAK,cACLmT,MAAOwvB,EAAQp8B,aAAe2oB,QAAQ0T,EAAOr8B,aAC7C28B,WAAYP,EAAQp8B,aAAeq8B,EAAOr8B,YAC1C0V,QAAQ,WACR1B,OAAO,QACP2Q,WAAS,IAEb7wB,IAAA6b,cAAC6sB,KAAK,CACFC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,+BACdtT,KAAK,YACLmT,MAAOwvB,EAAQsgD,WAAa/zD,QAAQ0T,EAAOqgD,WAC3C//C,WAAYP,EAAQsgD,WAAargD,EAAOqgD,UACxChnE,QAAQ,WACR1B,OAAO,QACP2Q,WAAS,IAEb7wB,IAAA6b,cAAC6sB,KAAK,CACFC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,iCACdtT,KAAK,cACLmT,MAAOwvB,EAAQwgD,aAAej0D,QAAQ0T,EAAOugD,aAC7CjgD,WAAYP,EAAQwgD,aAAevgD,EAAOugD,YAC1ClnE,QAAQ,WACR1B,OAAO,QACP2Q,WAAS,MAIrB7wB,IAAA6b,cAAC+S,KAAa,KACV5uB,IAAA6b,cAACgG,KAAM,CACHC,QAASqN,EACTliB,MAAM,YACNzG,SAAUgiC,EACV5mB,QAAQ,YAEP7J,KAAKkB,EAAE,+BAEZjZ,IAAA6b,cAACgG,KAAM,CACHjX,KAAK,SACLqC,MAAM,UACNzG,SAAUgiC,EACV5mB,QAAQ,YACRJ,UAAWR,EAAQgmB,YAEV,GAAA9lC,OAARmgC,EACQtpB,KAAKkB,EAAE,8BACPlB,KAAKkB,EAAE,8BACfuvB,GACGxoC,IAAA6b,cAACwP,KAAgB,CACbC,KAAM,GACN9J,UAAWR,EAAQ8J,yB,UC/T/D,MAAMlL,GAAYC,YAAYnG,IAAK,CACjCgwB,UAAW,CACTrX,KAAM,EACNzH,QAASlR,EAAMuoB,QAAQ,GACvB5Q,UAAW,YACR3X,EAAM4X,iBAEXikC,gBAAiB,CACfx1C,QAAS,OACTE,WAAY,SACZ0T,eAAgB,UAGlB21D,OAAQ,CACN1oE,gBAAiB,UACjBgK,QAASlR,EAAMuoB,QAAQ,GACvB5hB,aAAc3G,EAAMuoB,QAAQ,OAI1B/nB,GAAUA,CAACC,EAAOC,KACtB,GAAoB,iBAAhBA,EAAOxP,KAAyB,CAClC,MAAM2B,EAAU6N,EAAOC,QACjBkvE,EAAa,GAWnB,OATAh9E,EAAQsY,QAASvb,IACf,MAAMkgF,EAAcrvE,EAAMzY,UAAW+nF,GAAMA,EAAE9+E,KAAOrB,EAAOqB,KACtC,IAAjB6+E,EACFrvE,EAAMqvE,GAAelgF,EAErBigF,EAAW/nF,KAAK8H,KAIb,IAAI6Q,KAAUovE,GAGvB,GAAoB,mBAAhBnvE,EAAOxP,KAA2B,CACpC,MAAMtB,EAAS8Q,EAAOC,QAChBmvE,EAAcrvE,EAAMzY,UAAW+nF,GAAMA,EAAE9+E,KAAOrB,EAAOqB,IAE3D,OAAqB,IAAjB6+E,GACFrvE,EAAMqvE,GAAelgF,EACd,IAAI6Q,IAEJ,CAAC7Q,KAAW6Q,GAIvB,GAAoB,kBAAhBC,EAAOxP,KAA0B,CACnC,MAAMy2B,EAAWjnB,EAAOC,QAClBmvE,EAAcrvE,EAAMzY,UAAW+nF,GAAMA,EAAE9+E,KAAO02B,GAIpD,OAHqB,IAAjBmoD,GACFrvE,EAAMvY,OAAO4nF,EAAa,GAErB,IAAIrvE,GAGb,GAAoB,UAAhBC,EAAOxP,KACT,MAAO,IAwLI8+E,OApLCA,KACd,MAAM1oE,EAAUpB,MAETrT,EAASuO,GAAYC,qBAAWb,GAAS,KACzCc,EAASC,GAAcC,oBAAS,IAEhCyuE,EAAiBC,GAAsB1uE,oBAAS,IAChDk7C,EAAgBC,GAAqBn7C,mBAAS,OAC9Cg9C,EAAkBC,GAAuBj9C,oBAAS,IACnD,KAAEpK,GAASqK,qBAAWyD,KACtB,eAAE4E,GAAmBP,KACrBhH,EAAUC,wBACVtZ,EAAYkO,EAAKlO,UAEjBvC,EAAgB8a,qBAAWlW,GAEjCmW,oBAAU,MACRC,wBAC4BmI,OAAe/J,EAAW7W,IACnCoE,KAAKkgB,YACpBlO,IAAMF,MAAM,oGACZlV,WAAW,KACTqY,EAAQza,KAAK,MACZ,MAGP+lB,IAEC,IAEHnM,oBAAU,KACR,WACEH,GAAW,GACX,IACE,MAAM,KAAEpC,SAAee,GAAI0B,IAAI,WAC/BR,EAAS,CAAElQ,KAAM,eAAgByP,QAASxB,EAAKtM,UAE/C0O,GAAW,GACX,MAAOzC,GACPD,GAAWC,GACXyC,GAAW,KATf,IAYC,IAEHG,oBAAU,KACR,MAAMtW,EAASzE,EAAcsC,UAAUC,GAYvC,OAVAkC,EAAOnE,GAAG,WAADO,OAAY0B,EAAS,WAAYiW,IACpB,WAAhBA,EAAKuB,QAAuC,WAAhBvB,EAAKuB,QACnCU,EAAS,CAAElQ,KAAM,iBAAkByP,QAASxB,EAAKvP,SAG/B,WAAhBuP,EAAKuB,QACPU,EAAS,CAAElQ,KAAM,gBAAiByP,QAASxB,EAAKwoB,aAI7C,KACLv8B,EAAOzC,eAER,CAACO,EAAWvC,IAgCf,OACEL,IAAA6b,cAACs5C,GAAa,KAGZn1D,IAAA6b,cAACuS,GAAiB,CAChB9oB,MACE8wD,GAAc,GAAAl1D,OACX6W,KAAKkB,EAAE,yCAAwC,KAAA/X,OAAIk1D,EAAezwD,KAAI,KAG3EiJ,KAAMspD,EACN7pC,QA1B+BqgD,KACnCvW,GAAoB,GACpB9B,EAAkB,OAyBd/nC,UAAWA,IAtBUjT,WACzB,IACE,MAAM,KAAExC,SAAee,GAAIlT,OAAO,WAADxF,OAAYmgC,IAC7CroB,IAAMggC,KAAKjhC,KAAKkB,EAAEJ,EAAK9O,UACvB,MAAOyO,GACPD,GAAWC,GAEb69C,EAAkB,OAeGwzB,CAAmBzzB,EAAezrD,KAElDoN,KAAKkB,EAAE,4CAEVjZ,IAAA6b,cAACysE,GAAW,CACV15E,KAAM+6E,EACNt7D,QA3CyBy7D,KAC7BF,GAAmB,GACnBvzB,EAAkB,OA0Cdh1B,SAAwB,OAAd+0B,QAAc,IAAdA,OAAc,EAAdA,EAAgBzrD,KAE5B3K,IAAA6b,cAACw5C,GAAU,KACTr1D,IAAA6b,cAAC61B,GAAK,KAAE35B,KAAKkB,EAAE,kBACfjZ,IAAA6b,cAACy5C,GAAwB,KACvBt1D,IAAA6b,cAACgG,KAAM,CACLD,QAAQ,YACR3U,MAAM,UACN6U,QAzDoBioE,KAC5BH,GAAmB,GACnBvzB,EAAkB,QAyDTt+C,KAAKkB,EAAE,0BAIdjZ,IAAA6b,cAACivB,KAAK,CAACtpB,UAAWR,EAAQ0oB,UAAW9nB,QAAQ,YAC3C5hB,IAAA6b,cAACm0B,KAAK,CAAC1kB,KAAK,SACVtrB,IAAA6b,cAACo0B,KAAS,KACRjwC,IAAA6b,cAACq0B,KAAQ,KACPlwC,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,QACdr4B,KAAKkB,EAAE,uBAEVjZ,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,QACdr4B,KAAKkB,EAAE,wBAEVjZ,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,QACdr4B,KAAKkB,EAAE,6BAEVjZ,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACdr4B,KAAKkB,EAAE,4BAIdjZ,IAAA6b,cAACw0B,KAAS,KACRrwC,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACGrc,EAAQ6V,IAAK9Y,GACZtJ,IAAA6b,cAACq0B,KAAQ,CAACtyB,IAAKtU,EAAOqB,IACpB3K,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,QAAQ9mC,EAAO3D,MAChC3F,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,QAAQ9mC,EAAOkD,MAAM7G,MACtC3F,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,QAAQ9mC,EAAOs/E,WAChC5oF,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACfpwC,IAAA6b,cAAC+G,IAAU,CACT0I,KAAK,QACLxJ,QAASA,IAjFHxY,KACxB+sD,EAAkB/sD,GAClBsgF,GAAmB,IA+EcI,CAAiB1gF,IAEhCtJ,IAAA6b,cAAC29C,KAAI,OAGPx5D,IAAA6b,cAAC+G,IAAU,CACT0I,KAAK,QACLxJ,QAASA,KACPu0C,EAAkB/sD,GAClB6uD,GAAoB,KAGtBn4D,IAAA6b,cAACozC,KAAa,UAKrBj0C,GAAWhb,IAAA6b,cAAC25C,GAAgB,CAACC,QAAS,U,wFC7OrD,MAAM71C,GAAYC,YAAYnG,IAAK,CACjCoG,KAAM,CACJC,QAAS,OACT0Q,SAAU,OACV2gD,IAAK,GAEPnoC,UAAW,CACTzoB,YAAa9G,EAAMuoB,QAAQ,GAC3B5P,KAAM,GAGR2U,WAAY,CACVhe,SAAU,YAGZ8B,eAAgB,CACd7d,MAAO8d,KAAM,KACb/B,SAAU,WACVgC,IAAK,MACLC,KAAM,MACNtK,WAAY,GACZuK,YAAa,IAEf++D,QAAS,CACPlqE,QAAS,OACTS,YAAa,OACb0K,WAAY,IAEdqiD,cAAe,CACbntD,MAAO,GACPM,OAAQ,OAINwpE,GAAmB/iD,OAAaC,MAAM,CAC1CzhC,KAAMwhC,OACHxB,IAAI,EAAG,cACPC,IAAI,GAAI,aACRyB,SAAS,cAobC8iD,OAzaUxuE,IAAuC,IAAtC,KAAE/M,EAAI,QAAEyf,EAAO,cAAEjhB,GAAeuO,EACxD,MAAMqF,EAAUpB,KAEV2nB,EAAe,CACnB38B,KAAM,UACNjF,KAAM,GACNkF,YAAa,GACbE,YAAa,GACbD,SAAU,GACVE,OAAQ,GACRO,oBAAqB,IACrBL,eAAgB,EAChBC,qBAAsB,GACtBC,sBAAuB,GACvBC,sBAAuB,GACvBJ,YAAa,GACbK,sBAAuB,KAIlB8iE,EAAagc,GAAkBlvE,mBAASqsB,GAE/CnsB,oBAAU,KACR,WACE,GAAKhO,EACL,IACE,MAAM,KAAEyL,SAAee,GAAI0B,IAAI,qBAADpa,OAAsBkM,IACpDg9E,EAAgB9uD,IACP,IAAKA,KAAcziB,KAE5B,MAAOL,GACPD,GAAWC,KARf,GAYO,KACL4xE,EAAe,CACbx/E,KAAM,aACNjF,KAAM,GACNkF,YAAa,GACbE,YAAa,GACbD,SAAU,GACVE,OAAQ,GACRO,oBAAqB,QAIxB,CAAC6B,EAAewB,IAEnB,MAAMugB,EAAcA,KAClBd,IACA+7D,EAAe7iD,IAmCjB,OACEvnC,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQlB,MACtB9f,IAAA6b,cAAC0S,KAAM,CAAC3f,KAAMA,EAAMyf,QAASc,EAAa0B,WAAS,EAACa,SAAS,KAAKyK,OAAO,SACvEn8B,IAAA6b,cAAC4S,KAAW,KACI,GAAAvtB,OAAbkM,EACM2K,KAAKkB,EAAE,oCACPlB,KAAKkB,EAAE,qCAEhBjZ,IAAA6b,cAACisB,KAAM,CACLC,cAAeqmC,EACfpmC,oBAAoB,EACpBC,iBAAkBiiD,GAClBhiD,SAAUA,CAACC,EAAQ1/B,EAAStH,KAC1ByC,WAAW,KA7BQyX,WAC3B,IACsB,QAAhB8sB,EAAOv9B,MAAkC,YAAhBu9B,EAAOv9B,MAAsC,YAAhBu9B,EAAOv9B,OAAoBu9B,EAAOt9B,YAAcs9B,EAAOxiC,MAC7GyH,SACIwM,GAAIqnB,IAAI,qBAAD//B,OAAsBkM,GAAiB+6B,GACpDnvB,IAAMxT,QAAQuS,KAAKkB,EAAE,uDAEfW,GAAIoD,KAAK,oBAAqBmrB,GACpCnvB,IAAMxT,QAAQuS,KAAKkB,EAAE,+CAEvBkW,IACA,MAAO3W,GACPD,GAAWC,KAkBH6xE,CAAqBliD,GACrB1/B,EAAQ4/B,eAAc,IACrB,OAGJzc,IAAA,IAAC,QAAE0c,EAAO,OAAEC,EAAM,aAAEC,EAAY,OAAEL,GAAQvc,EAAA,OACzC5rB,IAAA6b,cAAC4sB,KAAI,KACHzoC,IAAA6b,cAACivB,KAAK,CAAChS,QAAM,EAACtX,UAAWR,EAAQ0oB,UAAW4N,UAAW,GACrDt3C,IAAA6b,cAAC6S,KAAa,CAACC,UAAQ,GACrB3uB,IAAA6b,cAACupB,KAAI,CAACC,WAAS,EAACpD,QAAS,GACvBjiC,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GAAI6R,GAAI,EAAGizC,GAAI,GAC5BtqF,IAAA6b,cAACwqB,KAAW,CACVzkB,QAAQ,WACRJ,UAAWR,EAAQimB,YACnB/mB,OAAO,QACP2Q,WAAS,GAET7wB,IAAA6b,cAACyqB,KAAU,CAAC37B,GAAG,8BACZoN,KAAKkB,EAAE,oCAGVjZ,IAAA6b,cAAC6sB,KAAK,CACJC,GAAInC,KACJ10B,MAAOiG,KAAKkB,EAAE,mCACdtT,KAAK,OACLmjC,QAAQ,0BACRhwB,MAAOwvB,EAAQ19B,MAAQiqB,QAAQ0T,EAAO39B,MACtC2/E,WAAYjiD,EAAQ19B,MAAQ29B,EAAO39B,KACnCD,GAAG,OACH08B,UAAQ,GAERrnC,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAM,cAAa,cAC7B/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAM,OAAM,OACtB/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAM,WAAU,YAC1B/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAM,WAAU,cAIf,eAAhBosB,EAAOv9B,MACN5K,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACE5oB,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GAAI6R,GAAI,EAAGizC,GAAI,GAC5BtqF,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,mCACd2vB,WAAS,EACTjjC,KAAK,OACLkrB,WAAS,EACT/X,MAAOwvB,EAAQ3iC,MAAQkvB,QAAQ0T,EAAO5iC,MACtC4kF,WAAYjiD,EAAQ3iC,MAAQ4iC,EAAO5iC,KACnCic,QAAQ,WACR1B,OAAO,QACPsB,UAAWR,EAAQioB,aAGvBjpC,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GAAI6R,GAAI,EAAGizC,GAAI,GAC5BtqF,IAAA6b,cAACwqB,KAAW,CACVzkB,QAAQ,WACRJ,UAAWR,EAAQimB,YACnB/mB,OAAO,QACP2Q,WAAS,GAET7wB,IAAA6b,cAACyqB,KAAU,CAAC37B,GAAG,kCACZoN,KAAKkB,EAAE,wCAGVjZ,IAAA6b,cAAC6sB,KAAK,CACJC,GAAInC,KACJ10B,MAAOiG,KAAKkB,EAAE,uCACdtT,KAAK,WACLmjC,QAAQ,0BACRjY,WAAS,EACT/X,MAAOwvB,EAAQx9B,UAAY+pB,QAAQ0T,EAAOz9B,UAC1Cy/E,WAAYjiD,EAAQx9B,UAAYy9B,EAAOz9B,SACvCH,GAAG,qBACH08B,UAAQ,GAERrnC,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAM,SAAQ,aACxB/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAM,MAAK,aACrB/b,IAAA6b,cAACiU,IAAQ,CAAC/T,MAAM,MAAK,iBAI3B/b,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GAAI6R,GAAI,EAAGizC,GAAI,GAC5BtqF,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,0CACdtT,KAAK,cACLmT,MAAOwvB,EAAQz9B,aAAegqB,QAAQ0T,EAAO19B,aAC7C0/E,WAAYjiD,EAAQz9B,aAAe09B,EAAO19B,YAC1CgmB,WAAS,EACTjP,QAAQ,WACR1B,OAAO,WAGXlgB,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GAAI6R,GAAI,GAAIizC,GAAI,IAC7BtqF,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,0CACdrO,KAAK,cACLo5C,WAAS,EAET+F,QAAS,EACTk9B,QAAS,EACTp2D,WAAS,EACTlrB,KAAK,cACLmT,MAAOwvB,EAAQv9B,aAAe8pB,QAAQ0T,EAAOx9B,aAC7Cw/E,WAAYjiD,EAAQv9B,aAAew9B,EAAOx9B,YAC1C6W,QAAQ,WACR1B,OAAO,aAMG,QAAhBioB,EAAOv9B,MAAkC,YAAhBu9B,EAAOv9B,OAChC5K,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACE5oB,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GAAI6R,GAAI,EAAGizC,GAAI,GAC5BtqF,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,mCACd2vB,WAAS,EACTvB,UAAQ,EACR1hC,KAAK,OACLmT,MAAOwvB,EAAQ3iC,MAAQkvB,QAAQ0T,EAAO5iC,MACtC4kF,WAAYjiD,EAAQ3iC,MAAQ4iC,EAAO5iC,KACnCic,QAAQ,WACR1B,OAAO,QACP2Q,WAAS,EACTrP,UAAWR,EAAQioB,aAGvBjpC,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GAAI6R,GAAI,GAAIizC,GAAI,IAC7BtqF,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,qCACdtT,KAAK,SACLmT,MAAOwvB,EAAQt9B,QAAU6pB,QAAQ0T,EAAOv9B,QACxCu/E,WAAYjiD,EAAQt9B,QAAUu9B,EAAOv9B,OACrC4W,QAAQ,WACR1B,OAAO,QACPmnB,UAAQ,EACRxW,WAAS,EACTrP,UAAWR,EAAQioB,cAKT,YAAhBd,EAAOv9B,MACP5K,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACE5oB,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GAAI6R,GAAI,EAAGizC,GAAI,GAC5BtqF,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,mCACd2vB,WAAS,EACTjjC,KAAK,OACLmT,MAAOwvB,EAAQ3iC,MAAQkvB,QAAQ0T,EAAO5iC,MACtC4kF,WAAYjiD,EAAQ3iC,MAAQ4iC,EAAO5iC,KACnCic,QAAQ,WACR1B,OAAO,QACPmnB,UAAQ,EACRxW,WAAS,EACTrP,UAAWR,EAAQioB,aAGvBjpC,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GAAI6R,GAAI,GAAIizC,GAAI,IAC7BtqF,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,qCACdtT,KAAK,SACLmT,MAAOwvB,EAAQt9B,QAAU6pB,QAAQ0T,EAAOv9B,QACxCu/E,WAAYjiD,EAAQt9B,QAAUu9B,EAAOv9B,OACrC4W,QAAQ,WACR1B,OAAO,QACPmnB,UAAQ,EACRxW,WAAS,EACTrP,UAAWR,EAAQioB,aAGvBjpC,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GAAI6R,GAAI,EAAGizC,GAAI,GAC5BtqF,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,0CACdtT,KAAK,cACLmT,MAAOwvB,EAAQr9B,aAAe4pB,QAAQ0T,EAAOt9B,aAC7Cs/E,WAAYjiD,EAAQr9B,aAAes9B,EAAOt9B,YAC1Co8B,UAAQ,EACRzlB,QAAQ,WACR1B,OAAO,QACP2Q,WAAS,EACTrP,UAAWR,EAAQioB,aAGvBjpC,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GAAI6R,GAAI,EAAGizC,GAAI,GAC5BtqF,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,6CACdtT,KAAK,iBACLmT,MAAOwvB,EAAQp9B,gBAAkB2pB,QAAQ0T,EAAOr9B,gBAChDq/E,WAAYjiD,EAAQp9B,gBAAkBq9B,EAAOr9B,eAC7C0W,QAAQ,WACR1B,OAAO,QACP2Q,WAAS,EACTrP,UAAWR,EAAQioB,aAGvBjpC,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GAAI6R,GAAI,EAAGizC,GAAI,GAC5BtqF,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,kDACdtT,KAAK,sBACLmT,MAAOwvB,EAAQ/8B,qBAAuBspB,QAAQ0T,EAAOh9B,qBACrDg/E,WAAYjiD,EAAQ/8B,qBAAuBg9B,EAAOh9B,oBAClDqW,QAAQ,WACR1B,OAAO,QACP2Q,WAAS,EACTrP,UAAWR,EAAQioB,aAGvBjpC,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GAAI6R,GAAI,EAAGizC,GAAI,GAC5BtqF,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,mDACdtT,KAAK,uBACLmT,MAAOwvB,EAAQn9B,sBAAwB0pB,QAAQ0T,EAAOp9B,sBACtDo/E,WAAYjiD,EAAQn9B,sBAAwBo9B,EAAOp9B,qBACnDyW,QAAQ,WACR1B,OAAO,QACP2Q,WAAS,EACTrP,UAAWR,EAAQioB,aAGvBjpC,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GAAI6R,GAAI,EAAGizC,GAAI,GAC5BtqF,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,oDACdtT,KAAK,wBACLmT,MAAOwvB,EAAQl9B,uBAAyBypB,QAAQ0T,EAAOn9B,uBACvDm/E,WAAYjiD,EAAQl9B,uBAAyBm9B,EAAOn9B,sBACpDwW,QAAQ,WACR1B,OAAO,QACP2Q,WAAS,EACTrP,UAAWR,EAAQioB,aAGvBjpC,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GAAI6R,GAAI,EAAGizC,GAAI,GAC5BtqF,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,oDACdtT,KAAK,wBACLmT,MAAOwvB,EAAQh9B,uBAAyBupB,QAAQ0T,EAAOj9B,uBACvDi/E,WAAYjiD,EAAQh9B,uBAAyBi9B,EAAOj9B,sBACpDsW,QAAQ,WACR1B,OAAO,QACP2Q,WAAS,EACTrP,UAAWR,EAAQioB,aAGvBjpC,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,GAAI6R,GAAI,GAAIizC,GAAI,IAC7BtqF,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJ3P,MAAOiG,KAAKkB,EAAE,oDACdtT,KAAK,wBACLmT,MAAOwvB,EAAQj9B,uBAAyBwpB,QAAQ0T,EAAOl9B,uBACvDk/E,WAAYjiD,EAAQj9B,uBAAyBk9B,EAAOl9B,sBACpDuW,QAAQ,WACR1B,OAAO,QACP2Q,WAAS,EACTrP,UAAWR,EAAQioB,iBAUjCjpC,IAAA6b,cAAC+S,KAAa,KACK,eAAhBuZ,EAAOv9B,MACN5K,IAAA6b,cAACgG,KACC,CACAC,QAAUiO,GAvUF1U,OAAOla,EAAOgnC,KACtC,IACE,MAAM,YAAEt9B,EAAW,YAAEE,EAAW,SAAED,GAAaq9B,QAEzCvuB,GAAIoD,KAAK,gCAAiC,CAC9CnS,cACAE,cACAD,aAGFkO,IAAMxT,QAAQuS,KAAKkB,EAAE,+CACrB,MAAOT,GACPD,GAAWC,KA2TmBgyE,CAAkBz6D,EAAGoY,GACrCl7B,MAAM,UACNzG,SAAUgiC,EACV7iC,KAAK,cACLic,QAAQ,WACRJ,UAAWR,EAAQipE,SAElBlyE,KAAKkB,EAAE,uCAGZjZ,IAAA6b,cAACgG,KAAM,CACLC,QAASqN,EACTliB,MAAM,YACNzG,SAAUgiC,EACV5mB,QAAQ,YAEP7J,KAAKkB,EAAE,yCAEVjZ,IAAA6b,cAACgG,KAAM,CACLjX,KAAK,SACLqC,MAAM,UACNzG,SAAUgiC,EACV5mB,QAAQ,YACRJ,UAAWR,EAAQgmB,YAEL,GAAA9lC,OAAbkM,EACM2K,KAAKkB,EAAE,wCACPlB,KAAKkB,EAAE,wCACbuvB,GACCxoC,IAAA6b,cAACwP,KAAgB,CACfC,KAAM,GACN9J,UAAWR,EAAQ8J,yBC5bzC,MAAM5Q,GAAUA,CAACC,EAAOC,KACtB,GAAoB,sBAAhBA,EAAOxP,KAA8B,CACvC,MAAM+F,EAAmByJ,EAAOC,QAC1BowE,EAAkB,GAWxB,OATA95E,EAAiBkU,QAASupD,IACxB,MAAMsc,EAAmBvwE,EAAMzY,UAAWqjB,GAAMA,EAAEpa,KAAOyjE,EAAYzjE,KAC3C,IAAtB+/E,EACFvwE,EAAMuwE,GAAoBtc,EAE1Bqc,EAAgBjpF,KAAK4sE,KAIlB,IAAIj0D,KAAUswE,GAGvB,GAAoB,wBAAhBrwE,EAAOxP,KAAgC,CACzC,MAAM+F,EAAmByJ,EAAOC,QAC1BqwE,EAAmBvwE,EAAMzY,UAAWqjB,GAAMA,EAAEpa,KAAOgG,EAAiBhG,IAE1E,OAA0B,IAAtB+/E,GACFvwE,EAAMuwE,GAAoB/5E,EACnB,IAAIwJ,IAEJ,CAACxJ,KAAqBwJ,GAIjC,GAAoB,uBAAhBC,EAAOxP,KAA+B,CACxC,MAAMwC,EAAgBgN,EAAOC,QAEvBqwE,EAAmBvwE,EAAMzY,UAAWqjB,GAAMA,EAAEpa,KAAOyC,GAIzD,OAH0B,IAAtBs9E,GACFvwE,EAAMvY,OAAO8oF,EAAkB,GAE1B,IAAIvwE,GAGb,GAAoB,UAAhBC,EAAOxP,KACT,MAAO,IAILgV,GAAYC,YAAYnG,IAAK,CACjCgwB,UAAW,CACTrX,KAAM,EACNzH,QAASlR,EAAMuoB,QAAQ,GACvB/hB,OAAQxG,EAAMuoB,QAAQ,GACtB5Q,UAAW,YACR3X,EAAM4X,iBAEX6H,OAAQ,CACN/Y,MAAO,QACPM,OAAQ,OACRG,aAAc,MAoOHspE,OAhOUA,KACvB,MAAMnpE,EAAUpB,MAET5E,EAASC,GAAcC,oBAAS,IAChCsL,EAAYC,GAAiBvL,mBAAS,IACtCmZ,EAASC,GAAcpZ,oBAAS,IAChCyvE,EAAqBC,GAA0B1vE,mBAAS,OACxDwuD,EAAcC,GAAmBzuD,mBAAS,OAC1CiyB,EAAeC,GAAoBlyB,oBAAS,IAC5Cg9C,EAAkBC,GAAuBj9C,oBAAS,IAClDwL,EAAa8yB,GAAkBt+B,mBAAS,KACxCvK,EAAkBmK,GAAYC,qBAAWb,GAAS,KACnD,KAAEpJ,GAASqK,qBAAWyD,KACtB,eAAE4E,GAAmBP,KACrBrgB,EAAYkO,EAAKlO,UACjBqZ,EAAUC,wBAEV7b,EAAgB8a,qBAAWlW,GAEjCmW,oBAAU,MACRC,wBAC4BmI,OAAe/J,EAAW7W,IACnCoE,KAAKmgB,kBACpBnO,IAAMF,MAAM,oGACZlV,WAAW,KACTqY,EAAQza,KAAK,MACZ,MAGP+lB,IAEC,IAEHnM,oBAAU,KACRN,EAAS,CAAElQ,KAAM,UACjB6b,EAAc,IACb,CAACC,IAEJtL,oBAAU,KACRH,GAAW,GACX,MAAMuM,EAAkB5jB,WAAW,KACPyX,WACxB,IACE,MAAM,KAAExC,SAAee,GAAI0B,IAAI,qBAAsB,CACnDla,OAAQ,CAAEslB,cAAaF,gBAEzB1L,EAAS,CAAElQ,KAAM,oBAAqByP,QAASxB,EAAKk1D,oBACpDz5C,EAAWzb,EAAKwb,SAChBpZ,GAAW,GACX,MAAOzC,GACPD,GAAWC,KAGfqyE,IACC,KACH,MAAO,IAAMnjE,aAAaF,IACzB,CAACd,EAAaF,IAEjBpL,oBAAU,KACR,MAAMxY,EAAYG,aAAaC,QAAQ,aACjC8B,EAASzE,EAAcsC,UAAUC,GAYvC,OAVAkC,EAAOnE,GAAG,WAADO,OAAY0B,EAAS,qBAAsBiW,IAC9B,WAAhBA,EAAKuB,QAAuC,WAAhBvB,EAAKuB,QACnCU,EAAS,CAAElQ,KAAM,sBAAuByP,QAASxB,EAAKlI,mBAGpC,WAAhBkI,EAAKuB,QACPU,EAAS,CAAElQ,KAAM,qBAAsByP,SAAUxB,EAAKzL,kBAInD,KACLtI,EAAOzC,eAER,CAAChC,IA6CJ,OACEL,IAAA6b,cAACs5C,GAAa,KACZn1D,IAAA6b,cAACuS,GAAiB,CAChB9oB,MACEokE,GAAY,GAAAxoE,OACT6W,KAAKkB,EAAE,kDAAiD,KAAA/X,OAAIwoE,EAAa/jE,KAAI,KAGlFiJ,KAAMspD,EACN7pC,QAAS8pC,EACT7pC,UAAWA,IAlCejT,WAC9B,UACQzB,GAAIlT,OAAO,qBAADxF,OAAsBkM,IACtC4L,IAAMxT,QAAQuS,KAAKkB,EAAE,oCACrB,MAAOT,GACPD,GAAWC,GAEbmxD,EAAgB,MAChBnwB,EAAe,IACf/yB,EAAc,IAyBOqkE,CAAwBphB,EAAa/+D,KAErDoN,KAAKkB,EAAE,qDAEVjZ,IAAA6b,cAACkvE,GAAgB,CACfn8E,KAAMu+B,EACN9e,QAtD8B28D,KAClCJ,EAAuB,MACvBx9C,GAAiB,IAqDb5e,kBAAgB,oBAChBphB,cAAeu9E,GAAuBA,EAAoBhgF,KAE5D3K,IAAA6b,cAACw5C,GAAU,KACTr1D,IAAA6b,cAAC61B,GAAK,KAAE35B,KAAKkB,EAAE,0BAA0B,KAAGtI,EAAiB5O,OAAO,KACpE/B,IAAA6b,cAACy5C,GAAwB,KACvBt1D,IAAA6b,cAAC4F,KAAS,CACRhT,YAAasJ,KAAKkB,EAAE,sCACpBrO,KAAK,SACLmR,MAAO2K,EACPhF,SA5DYvgB,IACpBq4C,EAAer4C,EAAMwgB,OAAO5F,MAAMsiC,gBA4D1BxC,WAAY,CACViuB,eACE9pE,IAAA6b,cAACu3C,KAAc,CAACpqC,SAAS,SACvBhpB,IAAA6b,cAACulC,KAAU,CAACn0C,MAAM,kBAK1BjN,IAAA6b,cAACgG,KAAM,CACLD,QAAQ,YACR3U,MAAM,UACN6U,QAlFkBgtB,KAC1B87C,EAAuB,MACvBx9C,GAAiB,KAkFRr1B,KAAKkB,EAAE,mCAIdjZ,IAAA6b,cAACivB,KAAK,CACJtpB,UAAWR,EAAQ0oB,UACnB9nB,QAAQ,WACRwV,SAxDgBrH,IACpB,IAAKsE,GAAWrZ,EAAS,OACzB,MAAM,UAAEqc,EAAS,aAAE0T,EAAY,aAAEC,GAAiBjb,EAAEqF,cAChD2V,GAAgB1T,EAAY,KAAO2T,GANvCvkB,EAAe6U,GAAcA,EAAY,KA6DrCt7B,IAAA6b,cAACm0B,KAAK,CAAC1kB,KAAK,SACVtrB,IAAA6b,cAACo0B,KAAS,KACRjwC,IAAA6b,cAACq0B,KAAQ,KACPlwC,IAAA6b,cAACs0B,KAAS,CAACvlB,QAAQ,aACnB5qB,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAAUr4B,KAAKkB,EAAE,8BAClCjZ,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAAUr4B,KAAKkB,EAAE,kCAGtCjZ,IAAA6b,cAACw0B,KAAS,KACRrwC,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACGjY,EAAiByR,IAAKgsD,GACrBpuE,IAAA6b,cAACq0B,KAAQ,CAACtyB,IAAKwwD,EAAYzjE,IACzB3K,IAAA6b,cAACs0B,KAAS,KACc,eAArBi+B,EAAYxjE,MAA0B5K,IAAA6b,cAACyd,KAAM,CAC5C9I,IAAKy6D,KAAYzpE,UAAWR,EAAQmY,SAChB,QAArBi1C,EAAYxjE,MAAmB5K,IAAA6b,cAACyd,KAAM,CACrC9I,IAAK06D,KAAK1pE,UAAWR,EAAQmY,SACT,YAArBi1C,EAAYxjE,MAAuB5K,IAAA6b,cAACyd,KAAM,CACzC9I,IAAK26D,KAAU3pE,UAAWR,EAAQmY,SACd,YAArBi1C,EAAYxjE,MAAuB5K,IAAA6b,cAACyd,KAAM,CACzC9I,IAAK46D,KAAS5pE,UAAWR,EAAQmY,UAGrCn5B,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAAUg+B,EAAYzjE,IACvC3K,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UAAUg+B,EAAYzoE,MACvC3F,IAAA6b,cAACs0B,KAAS,CAACC,MAAM,UACfpwC,IAAA6b,cAAC+G,IAAU,CACT0I,KAAK,QACLxJ,QAASA,IA3GEnR,KAC7Bi6E,EAAuBj6E,GACvBy8B,GAAiB,IAyGgBi+C,CAAsBjd,IAErCpuE,IAAA6b,cAAC29C,KAAI,CAACvsD,MAAM,eAGdjN,IAAA6b,cAAC+G,IAAU,CACT0I,KAAK,QACLxJ,QAAUiO,IACRooC,GAAoB,GACpBwR,EAAgByE,KAGlBpuE,IAAA6b,cAACozC,KAAa,CAAChiD,MAAM,kBAK5B+N,GAAWhb,IAAA6b,cAAC25C,GAAgB,CAACC,QAAS,U,2CCrSrD,MAAM71C,GAAYC,YAAYnG,IAAK,CACjCoG,KAAM,CACJM,MAAO,QACPM,OAAQ,QACR8b,WAAY,QACZwN,iBAAkB,YAClBC,eAAgB,YAChBC,mBAAoB,SACpBnqB,QAAS,OACTC,cAAe,SACfC,WAAY,SACZ0T,eAAgB,SAChBzK,UAAW,UAEb2b,MAAO,CACLjkB,gBAAiB,QACjBb,QAAS,OACTC,cAAe,SACfC,WAAY,SACZ2K,QAAS,YACT/J,aAAc,UAEhBsY,OAAQ,CACNjZ,OAAQxG,EAAMuoB,QAAQ,GACtBrhB,gBAAiBlH,EAAM8f,QAAQ/W,UAAUopB,MAE3CnmC,KAAM,CACJ0a,MAAO,OACPO,UAAWjH,EAAMuoB,QAAQ,IAE3Bl8B,OAAQ,CACNma,OAAQxG,EAAMuoB,QAAQ,EAAG,EAAG,IAE9B4yB,QAAS,CACP5nD,MAAO,YAILq+E,GAAgB,wCAiSPC,OA/RQA,KACrB,MAAMvqE,EAAUpB,KACV3D,EAAUC,uBAChB,IAAItZ,EAAY,KAChB,MAAO4oF,EAAsBC,GAA2BvwE,oBAAS,IAC1DwwE,EAAyBC,GAA8BzwE,oBAAS,IAChE0wE,EAAcC,GAAmB3wE,oBAAS,IAC1C4wE,EAAqBC,GAA0B7wE,oBAAS,IACxDpC,EAAOkzE,GAAY9wE,mBAAS,IAE7B+wE,EAA2BA,KAC/BJ,GAAiBD,IAGbM,EAAkCA,KACtCH,GAAwBD,IAYpB1qF,EAAS+qF,KAAG7oF,MAAMO,OAAOC,SAASgL,aACf2K,IAArBrY,EAAOwB,YACTA,EAAYxB,EAAOwB,WAGrB,MAEOkO,GAAQoK,mBAFM,CAAEtV,MAAO,KA4CxBwmF,GAzCUvuE,MAASlW,IAAI,EAAG,OAAOsW,SAyCFytE,GAC/BxkD,EAAaC,OAAaC,MAAM,CACpCxhC,MAAOuhC,OAAavhC,MAAM,iBAAiByhC,SAAS,YACpDglD,YAAaD,EACTjlD,OACGE,SAAS,wBACTqrB,QACC44B,GACA,mHAEJnkD,OACJmlD,gBAAiBnlD,OAAaolD,KAAK,cAAe,CAChDC,GAAKH,GAAgBD,GAAgCC,EACrD1xC,KAAMxT,OACHslD,MAAM,CAACtlD,KAAQ,eAAgB,MAAO,iCACtCE,SAAS,wBACZqlD,UAAWvlD,WAIf,OACEnnC,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQlB,MACtB9f,IAAA6b,cAACs7B,KAAS,CAACzyB,UAAU,OAAOgN,SAAS,MACnC1xB,IAAA6b,cAACg4C,IAAW,MACZ7zD,IAAA6b,cAAA,OAAK2F,UAAWR,EAAQ6jB,OACtB7kC,IAAA6b,cAAA,WACE7b,IAAA6b,cAAA,OACEkN,MAAO,CAAE7I,OAAQ,SAAUQ,OAAQ,OAAQN,MAAO,QAClDoQ,IAAKoc,KACLze,IAAI,WAGRnuB,IAAA6b,cAAC8O,IAAU,CAACjG,UAAU,KAAK9C,QAAQ,MAChC7J,KAAKkB,EAAE,oBAEVjZ,IAAA6b,cAACisB,KAAM,CACLC,cAAe,CACbniC,MAAO,GACPxC,MAAO,GACPipF,YAAa,GACbC,gBAAiB,IAEnBtkD,oBAAoB,EACpBC,iBAAkBf,EAClBgB,SAAUA,CAACC,EAAQ1/B,KACjB7E,WAAW,KACL8nF,EAlEUrwE,WAC1B,MAAMzV,EAAQuiC,EAAOviC,MACfxC,EAAQ+kC,EAAO/kC,MACfipF,EAAclkD,EAAOkkD,YAG3B,GAAIA,IAFoBlkD,EAAOmkD,gBAG7B,UACQ1yE,GAAIoD,KAAK,GAAD9b,OACT+C,mCAAiC,oBAAA/C,OAAmB0E,EAAK,KAAA1E,OAAIkC,EAAK,KAAAlC,OAAImrF,IAE3EL,EAAS,IACThzE,IAAMxT,QAAQuS,KAAKkB,EAAE,kCACrBgD,EAAQza,KAAK,UACb,MAAOgX,GACPzX,QAAQqB,IAAIoW,KAoDFm0E,CAAoBxkD,GAtFd9sB,WACtB,MAAMzV,EAAQuiC,EAAOviC,MACrB,IACE,MAAMgT,QAAiBgB,GAAIoD,KAAK,GAAD9b,OAC1B+C,mCAAiC,oBAAA/C,OAAmB0E,IAEzD7E,QAAQqB,IAAI,gBAAiBwW,EAASC,MAET,MAAzBD,EAASC,KAAKvQ,OAChB0Q,IAAMF,MAAM,2BAEZE,IAAMxT,QAAQuS,KAAKkB,EAAE,+BAEvB,MAAOT,GACPzX,QAAQqB,IAAI,aAAcoW,GAC1BD,GAAWC,KAyEGo0E,CAAgBzkD,GAElB1/B,EAAQ4/B,eAAc,GA5GlCojD,GAAyBD,GAEvBG,GADEH,IA6GS,OAGJ7vE,IAAA,IAAC,QAAE2sB,EAAO,OAAEC,EAAM,aAAEC,GAAc7sB,EAAA,OACjC3b,IAAA6b,cAAC4sB,KAAI,CAACjnB,UAAWR,EAAQtb,MACvB1F,IAAA6b,cAACupB,KAAI,CAACC,WAAS,EAACpD,QAAS,GACvBjiC,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,IACbxlC,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJG,QAAQ,WACRiP,WAAS,EACTlmB,GAAG,QACHmH,MAAOiG,KAAKkB,EAAE,qBACdtT,KAAK,QACLmT,MAAOwvB,EAAQ1iC,OAASivB,QAAQ0T,EAAO3iC,OACvCijC,WAAYP,EAAQ1iC,OAAS2iC,EAAO3iC,MACpCwuD,aAAa,QACb/sB,UAAQ,KAGXmkD,GACCxrF,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACE5oB,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,IACbxlC,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJG,QAAQ,WACRiP,WAAS,EACTlmB,GAAG,QACHmH,MAAM,iCACNnM,KAAK,QACLmT,MAAOwvB,EAAQllC,OAASyxB,QAAQ0T,EAAOnlC,OACvCylC,WAAYP,EAAQllC,OAASmlC,EAAOnlC,MACpCgxD,aAAa,MACb/sB,UAAQ,KAGZrnC,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,IACbxlC,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJG,QAAQ,WACRiP,WAAS,EACTjmB,KAAMghF,EAAe,OAAS,WAC9BjhF,GAAG,cACHmH,MAAM,aACNnM,KAAK,cACLmT,MACEwvB,EAAQ+jD,aACRx3D,QAAQ0T,EAAO8jD,aAEjBxjD,WACEP,EAAQ+jD,aAAe9jD,EAAO8jD,YAEhCj4B,aAAa,MACb/sB,UAAQ,EACRwU,WAAY,CACVC,aACE97C,IAAA6b,cAACu3C,KAAc,CAACpqC,SAAS,OACvBhpB,IAAA6b,cAAC+G,IAAU,CACTd,QAASmqE,GAERL,EACC5rF,IAAA6b,cAAC0kB,KAAc,MAEfvgC,IAAA6b,cAACgxE,KAAiB,YAQhC7sF,IAAA6b,cAACupB,KAAI,CAACE,MAAI,EAACE,GAAI,IACbxlC,IAAA6b,cAAC6sB,KAAK,CACJC,GAAIlnB,KACJG,QAAQ,WACRiP,WAAS,EACTjmB,KAAMkhF,EAAsB,OAAS,WACrCnhF,GAAG,kBACHmH,MAAM,mBACNnM,KAAK,kBACLmT,MACEwvB,EAAQgkD,iBACRz3D,QAAQ0T,EAAO+jD,iBAEjBzjD,WACEP,EAAQgkD,iBACR/jD,EAAO+jD,gBAETl4B,aAAa,MACb/sB,UAAQ,EACRwU,WAAY,CACVC,aACE97C,IAAA6b,cAACu3C,KAAc,CAACpqC,SAAS,OACvBhpB,IAAA6b,cAAC+G,IAAU,CACTd,QAASoqE,GAERJ,EACC9rF,IAAA6b,cAAC0kB,KAAc,MAEfvgC,IAAA6b,cAACgxE,KAAiB,cAWrCnB,EACC1rF,IAAA6b,cAACgG,KAAM,CACLjX,KAAK,SACLimB,WAAS,EACTjP,QAAQ,YACR3U,MAAM,UACNuU,UAAWR,EAAQjb,QACpB,mBAID/F,IAAA6b,cAACgG,KAAM,CACLjX,KAAK,SACLimB,WAAS,EACTjP,QAAQ,YACR3U,MAAM,UACNuU,UAAWR,EAAQjb,QACpB,gBAIH/F,IAAA6b,cAACupB,KAAI,CAACC,WAAS,EAAC1R,eAAe,YAC7B3zB,IAAA6b,cAACupB,KAAI,CAACE,MAAI,GACRtlC,IAAA6b,cAACkpC,KAAI,CACH/uB,KAAK,IACLpU,QAAQ,QACR8C,UAAWL,IACXN,GAAG,WAEFhM,KAAKkB,EAAE,yCAIbH,GACC9Y,IAAA6b,cAAC8O,IAAU,CAAC/I,QAAQ,QAAQ3U,MAAM,SAC/B6L,OAOb9Y,IAAA6b,cAAC6f,KAAG,CAAC+4B,GAAI,OCvKFq4B,OA9IAA,KACb,MAAOtnE,EAAeC,GAAoBvK,oBAAS,GASnD,OAPAE,oBAAU,UAEM3B,IADA1W,aAAaC,QAAQ,UAEjCyiB,GAAiB,IAElB,IAGDzlB,IAAA6b,cAACkxE,IAAa,KACZ/sF,IAAA6b,cAACgD,GAAY,KACX7e,IAAA6b,cAAC4Q,GAAsB,KACrBzsB,IAAA6b,cAAC8lC,SAAM,KACL3hD,IAAA6b,cAAC08D,GAAK,CAACyU,OAAK,EAAC1X,KAAK,SAAS5wD,UAAWowC,KACtC90D,IAAA6b,cAAC08D,GAAK,CAACyU,OAAK,EAAC1X,KAAK,UAAU5wD,UAAWuoE,KAChDjtF,IAAA6b,cAAC08D,GAAK,CAACyU,OAAK,EAAC1X,KAAK,aAAa5wD,UAAW6mE,KAEjCvrF,IAAA6b,cAACH,GAAiB,KAChB1b,IAAA6b,cAACgxB,GAAc,KACb7sC,IAAA6b,cAAC08D,GAAK,CAACyU,OAAK,EAAC1X,KAAK,IAAI5wD,UAAW4wB,GAAWmjC,WAAS,IACrDz4E,IAAA6b,cAAC08D,GAAK,CACJyU,OAAK,EACL1X,KAAK,sBACL5wD,UAAWwoE,GACXzU,WAAS,IAEXz4E,IAAA6b,cAAC08D,GAAK,CACJyU,OAAK,EACL1X,KAAK,eACL5wD,UAAWizC,GACX8gB,WAAS,IAEXz4E,IAAA6b,cAAC08D,GAAK,CACJyU,OAAK,EACL1X,KAAK,kBACL5wD,UAAWyoE,GACX1U,WAAS,IAEXz4E,IAAA6b,cAAC08D,GAAK,CACJyU,OAAK,EACL1X,KAAK,YACL5wD,UAAW3D,GACX03D,WAAS,IAEXz4E,IAAA6b,cAAC08D,GAAK,CACJyU,OAAK,EACL1X,KAAK,aACL5wD,UAAWq1D,GACXtB,WAAS,IAEXz4E,IAAA6b,cAAC08D,GAAK,CAACyU,OAAK,EAAC1X,KAAK,QAAQ5wD,UAAWkrD,GAAM6I,WAAS,IACpDz4E,IAAA6b,cAAC08D,GAAK,CAACyU,OAAK,EAAC1X,KAAK,YAAY5wD,UAAWwlD,GAAUuO,WAAS,IAC5Dz4E,IAAA6b,cAAC08D,GAAK,CAACyU,OAAK,EAAC1X,KAAK,SAAS5wD,UAAWqtD,GAAO0G,WAAS,IACtDz4E,IAAA6b,cAAC08D,GAAK,CAACyU,OAAK,EAAC1X,KAAK,SAAS5wD,UAAW+kD,GAAOgP,WAAS,IACtDz4E,IAAA6b,cAAC08D,GAAK,CAACyU,OAAK,EAAC1X,KAAK,SAAS5wD,UAAW0oE,GAAO3U,WAAS,IACtDz4E,IAAA6b,cAAC08D,GAAK,CAACyU,OAAK,EAAC1X,KAAK,WAAW5wD,UAAWglE,GAASjR,WAAS,IAC1Dz4E,IAAA6b,cAAC08D,GAAK,CAACyU,OAAK,EAAC1X,KAAK,qBAAqB5wD,UAAWylE,GAAkB1R,WAAS,IAE7Ez4E,IAAA6b,cAAC08D,GAAK,CACJyU,OAAK,EACL1X,KAAK,gBACL5wD,UAAWisD,GACX8H,WAAS,IAEXz4E,IAAA6b,cAAC08D,GAAK,CACJyU,OAAK,EACL1X,KAAK,YACL5wD,UAAW68C,GACXkX,WAAS,IAEfz4E,IAAA6b,cAAC08D,GAAK,CACAyU,OAAK,EACL1X,KAAK,UACL5wD,UAAWyyD,GACXsB,WAAS,IAEXz4E,IAAA6b,cAAC08D,GAAK,CACJyU,OAAK,EACL1X,KAAK,cACL5wD,UAAW2oE,GACX5U,WAAS,IAEXz4E,IAAA6b,cAAC08D,GAAK,CAACyU,OAAK,EAAC1X,KAAK,UAAU5wD,UAAW6pD,GAAQkK,WAAS,IACxDz4E,IAAA6b,cAAC08D,GAAK,CACJyU,OAAK,EACL1X,KAAK,iBACL5wD,UAAW4oE,GACX7U,WAAS,IAEXz4E,IAAA6b,cAAC08D,GAAK,CACJyU,OAAK,EACL1X,KAAK,gBACL5wD,UAAW6oE,GACX9U,WAAS,IAEXz4E,IAAA6b,cAAC08D,GAAK,CAACyU,OAAK,EAAC1X,KAAK,cAAc5wD,UAAW8oE,GAAM/U,WAAS,IACzDjzD,GACCxlB,IAAA6b,cAAA7b,IAAA4oB,SAAA,KACE5oB,IAAA6b,cAAC08D,GAAK,CACJyU,OAAK,EACL1X,KAAK,iBACL5wD,UAAW0uD,GACXqF,WAAS,IAEXz4E,IAAA6b,cAAC08D,GAAK,CACJyU,OAAK,EACL1X,KAAK,yCACL5wD,UAAW+vD,GACXgE,WAAS,IAEXz4E,IAAA6b,cAAC08D,GAAK,CACJyU,OAAK,EACL1X,KAAK,aACL5wD,UAAW+4D,GACXhF,WAAS,IAEXz4E,IAAA6b,cAAC08D,GAAK,CACJyU,OAAK,EACL1X,KAAK,+BACL5wD,UAAWq7D,GACXtH,WAAS,IAEXz4E,IAAA6b,cAAC08D,GAAK,CACJyU,OAAK,EACL1X,KAAK,oBACL5wD,UAAWq6D,GACXtG,WAAS,QAOrBz4E,IAAA6b,cAAC4xE,IAAc,CAACt0E,UAAW,UClKrC,MAAMu0E,GAAc,IAAIC,cAsGTC,OApGHA,KACR,MAAO9vE,EAAQ+vE,GAAa3yE,qBAEtB4yE,EAAkBlgD,YAAc,gCAChCmgD,EAAiBlqF,OAAOd,aAAaC,QAAQ,mBAC5CkuB,EAAM88D,GAAW9yE,mBAAS6yE,IAAkCD,EAAkB,OAAS,UAExFpgD,EAAY1tC,IAAMikB,QACpB,MACI/jB,gBAAiBA,KACb8tF,EAASC,GAA2B,UAAbA,EAAuB,OAAS,YAG/D,IAGEv0E,EAAQw2C,YACV,CACI5+B,gBAAiB,CACb,uBAAwB,CACpBlR,MAAO,MACPM,OAAQ,OAEZ,6BAA8B,CAC1BuR,UAAW,mCACXrR,gBAAiB,YAGzB0rB,oBAAqB,CACjB,uBAAwB,CACpBlsB,MAAO,OAEX,6BAA8B,CAC1BQ,gBAA0B,UAATsQ,EAAmB,UAAY,YAGxDsI,QAAS,CACL5uB,KAAMsmB,EACN1O,QAAS,CAAEqpB,KAAe,UAAT3a,EAAmB,UAAY,WAChDg9D,YAAsB,UAATh9D,EAAmB,UAAY,UAC5Ci9D,cAAwB,UAATj9D,EAAmB,UAAY,UAC9C6a,KAAM,CAAEF,KAAe,UAAT3a,EAAmB,UAAY,WAC7Ck9D,MAAO,CAAEviD,KAAe,UAAT3a,EAAmB,UAAY,WAC9CuI,oBAA8B,UAATvI,EAAmB,OAAS,OACjD4tB,kBAA4B,UAAT5tB,EAAmB,UAAY,OAC9DplB,QAAkB,UAATolB,EAAmB,UAAY,OACxC+sC,SAAmB,UAAT/sC,EAAmB,UAAY,OAC7B0a,gBAA0B,UAAT1a,EAAmB,UAAY,OAC5Dy0B,SAAmB,UAATz0B,EAAmB,OAAS,OACtC20B,cAAwB,UAAT30B,EAAmB,OAAS,OAC3C60B,YAAsB,UAAT70B,EAAmB,OAAS,OACzCizB,cAAwB,UAATjzB,EAAmB,OAAS,OAC3Chd,cAAwB,UAATgd,EAAmB,UAAY,OAC9ClrB,MAAgB,UAATkrB,EAAmB,OAAS,UACnCm9D,qBAA+B,UAATn9D,EAAmB,OAAS,OAClDmyD,SAAmB,UAATnyD,EAAmB,OAAS,OACtCoxD,QAAkB,UAATpxD,EAAmB,UAAY,OACxCo9D,YAAsB,UAATp9D,EAAmB,UAAY,OAChCkjB,MAAgB,UAATljB,EAAmB,OAAS,OACnCq9D,aAAuB,UAATr9D,EAAmB,OAAS,UAC1Cs9D,gBAA0B,UAATt9D,EAAmB,UAAY,OAChD8a,cAAwB,UAAT9a,EAAmB,wDAA0D,OACxG0jB,UAAoB,UAAT1jB,EAAmB,OAAS,OACvCiqD,YAAsB,UAATjqD,EAAmB,UAAY,OAC5Cu9D,WAAqB,UAATv9D,EAAmB,UAAY,WAEnCA,QAEJpT,GAmBJ,OAhBA1C,oBAAU,KACN,MAAMszE,EAAa3rF,aAAaC,QAAQ,cAIlB,SAFlB0rF,EAAWvsF,UAAU,EAAG,GAAKusF,EAAWvsF,UAAU,EAAG,IAGrD0rF,EAAUc,SAEf,IAEHvzE,oBAAU,KACNvX,OAAOd,aAAaka,QAAQ,iBAAkBiU,IAC/C,CAACA,IAKAlxB,IAAA6b,cAAC9b,EAAiB+b,SAAQ,CAACC,MAAO,CAAE2xB,cAChC1tC,IAAA6b,cAACy0C,IAAa,CAAC52C,MAAOA,GAClB1Z,IAAA6b,cAAC+yE,sBAAmB,CAACC,OAAQnB,IAC3B1tF,IAAA6b,cAAC5W,EAAc6W,SAAQ,CAACC,MAAOxZ,GAC3BvC,IAAA6b,cAACixE,GAAM,WCrG7BgC,IAAS30B,OACRn6D,IAAA6b,cAACg4C,IAAW,KACX7zD,IAAA6b,cAAC+xE,GAAG,OAELt2D,SAASC,eAAe,U,oBCVzB13B,EAAOC,QAAU,IAA0B,kC,4FCA3CD,EAAOC,QAAU,IAA0B,uC,0CCA3CD,EAAOC,QAAU,IAA0B,2C,oBCA3CD,EAAOC,QAAU,IAA0B,gD,oBCA3CD,EAAOC,QAAU,IAA0B,mC,oBCA3CD,EAAOC,QAAU,IAA0B,0C","file":"static/js/main.9f8fddb8.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/n8n.5c788b8d.png\";","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/webhook.e5374d73.png\";","module.exports = \"data:image/jpeg;base64,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\"","import React from \"react\";\r\n\r\nconst ColorModeContext = React.createContext({ toggleColorMode: () => {} });\r\n\r\nexport default ColorModeContext;","import { createContext } from \"react\";\r\nimport openSocket from \"socket.io-client\";\r\nimport jwt from \"jsonwebtoken\";\r\n\r\nclass ManagedSocket {\r\n  constructor(socketManager) {\r\n    this.socketManager = socketManager;\r\n    this.rawSocket = socketManager.currentSocket;\r\n    this.callbacks = [];\r\n    this.joins = [];\r\n\r\n    this.rawSocket.on(\"connect\", () => {\r\n      if (!this.rawSocket.recovered) {\r\n        const refreshJoinsOnReady = () => {\r\n          for (const j of this.joins) {\r\n            console.debug(\"refreshing join\", j);\r\n            this.rawSocket.emit(`join${j.event}`, ...j.params);\r\n          }\r\n          this.rawSocket.off(\"ready\", refreshJoinsOnReady);\r\n        };\r\n        for (const j of this.callbacks) {\r\n          this.rawSocket.off(j.event, j.callback);\r\n          this.rawSocket.on(j.event, j.callback);\r\n        }\r\n        \r\n        this.rawSocket.on(\"ready\", refreshJoinsOnReady);\r\n      }\r\n    });\r\n  }\r\n  \r\n  on(event, callback) {\r\n    if (event === \"ready\" || event === \"connect\") {\r\n      return this.socketManager.onReady(callback);\r\n    }\r\n    this.callbacks.push({event, callback});\r\n    return this.rawSocket.on(event, callback);\r\n  }\r\n  \r\n  off(event, callback) {\r\n    const i = this.callbacks.findIndex((c) => c.event === event && c.callback === callback);\r\n    this.callbacks.splice(i, 1);\r\n    return this.rawSocket.off(event, callback);\r\n  }\r\n  \r\n  emit(event, ...params) {\r\n    if (event.startsWith(\"join\")) {\r\n      this.joins.push({ event: event.substring(4), params });\r\n      console.log(\"Joining\", { event: event.substring(4), params});\r\n    }\r\n    return this.rawSocket.emit(event, ...params);\r\n  }\r\n  \r\n  disconnect() {\r\n    for (const j of this.joins) {\r\n      this.rawSocket.emit(`leave${j.event}`, ...j.params);\r\n    }\r\n    this.joins = [];\r\n    for (const c of this.callbacks) {\r\n      this.rawSocket.off(c.event, c.callback);\r\n    }\r\n    this.callbacks = [];\r\n  }\r\n}\r\n\r\nclass DummySocket {\r\n  on(..._) {}\r\n  off(..._) {}\r\n  emit(..._) {}\r\n  disconnect() {}\r\n}\r\n\r\nconst SocketManager = {\r\n  currentCompanyId: -1,\r\n  currentUserId: -1,\r\n  currentSocket: null,\r\n  socketReady: false,\r\n\r\n  getSocket: function(companyId) {\r\n    let userId = null;\r\n    if (localStorage.getItem(\"userId\")) {\r\n      userId = localStorage.getItem(\"userId\");\r\n    }\r\n\r\n    if (!companyId && !this.currentSocket) {\r\n      return new DummySocket();\r\n    }\r\n\r\n    if (companyId && typeof companyId !== \"string\") {\r\n      companyId = `${companyId}`;\r\n    }\r\n\r\n    if (companyId !== this.currentCompanyId || userId !== this.currentUserId) {\r\n      if (this.currentSocket) {\r\n        console.warn(\"closing old socket - company or user changed\");\r\n        this.currentSocket.removeAllListeners();\r\n        this.currentSocket.disconnect();\r\n        this.currentSocket = null;\r\n      }\r\n\r\n      let token = JSON.parse(localStorage.getItem(\"token\"));\r\n      const { exp } = jwt.decode(token) ?? {};\r\n\r\n      if ( Date.now() >= exp*1000) {\r\n        console.warn(\"Expired token, reload after refresh\");\r\n        setTimeout(() => {\r\n          window.location.reload();\r\n        },1000);\r\n        return new DummySocket();\r\n      }\r\n\r\n      this.currentCompanyId = companyId;\r\n      this.currentUserId = userId;\r\n      \r\n      if (!token) {\r\n        return new DummySocket();\r\n      }\r\n      \r\n      this.currentSocket = openSocket(process.env.REACT_APP_BACKEND_URL, {\r\n        transports: [\"websocket\"],\r\n        pingTimeout: 18000,\r\n        pingInterval: 18000,\r\n        query: { token },\r\n      });\r\n      \r\n      this.currentSocket.on(\"disconnect\", (reason) => {\r\n        console.warn(`socket disconnected because: ${reason}`);\r\n        if (reason.startsWith(\"io \")) {\r\n          console.warn(\"tryng to reconnect\", this.currentSocket);\r\n          \r\n          const { exp } = jwt.decode(token);\r\n          if ( Date.now()-180 >= exp*1000) {\r\n            console.warn(\"Expired token, reloading app\");\r\n            window.location.reload();\r\n            return;\r\n          }\r\n\r\n          this.currentSocket.connect();\r\n        }        \r\n      });\r\n      \r\n      this.currentSocket.on(\"connect\", (...params) => {\r\n        console.warn(\"socket connected\", params);\r\n      })\r\n      \r\n      this.currentSocket.onAny((event, ...args) => {\r\n        console.debug(\"Event: \", { socket: this.currentSocket, event, args });\r\n      });\r\n      \r\n      this.onReady(() => {\r\n        this.socketReady = true;\r\n      });\r\n\r\n    }\r\n    \r\n    return new ManagedSocket(this);\r\n  },\r\n  \r\n  onReady: function( callbackReady ) {\r\n    if (this.socketReady) {\r\n      callbackReady();\r\n      return\r\n    }\r\n    \r\n    this.currentSocket.once(\"ready\", () => {\r\n      callbackReady();\r\n    });\r\n  },\r\n\r\n};\r\n\r\nconst SocketContext = createContext()\r\n\r\nexport { SocketContext, SocketManager };\r\n","const messages = {\r\n  pt: {\r\n    translations: {\r\n      signup: {\r\n        title: \"Cadastre-se\",\r\n        toasts: {\r\n          success: \"Usuário criado com sucesso! Faça seu login!!!.\",\r\n          fail: \"Erro ao criar usuário. Verifique os dados informados.\",\r\n        },\r\n        form: {\r\n          name: \"Nome\",\r\n          email: \"Email\",\r\n          password: \"Senha\",\r\n        },\r\n        buttons: {\r\n          submit: \"Cadastrar\",\r\n          login: \"Já tem uma conta? Entre!\",\r\n        },\r\n      },\r\n      login: {\r\n        title: \"Login\",\r\n        form: {\r\n          email: \"Email\",\r\n          password: \"Senha\",\r\n        },\r\n        buttons: {\r\n          submit: \"Entrar\",\r\n          register: \"Registre-se, agora mesmo!\",\r\n        },\r\n      },\r\n      plans: {\r\n        form: {\r\n          name: \"Nome\",\r\n          users: \"Usuários\",\r\n          connections: \"Conexões\",\r\n          campaigns: \"Campanhas\",\r\n          schedules: \"Agendamentos\",\r\n          enabled: \"Habilitadas\",\r\n          disabled: \"Desabilitadas\",\r\n          clear: \"Cancelar\",\r\n          delete: \"Excluir\",\r\n          save: \"Salvar\",\r\n          yes: \"Sim\",\r\n          no: \"Não\",\r\n          money: \"R$\",\r\n        },\r\n      },\r\n      companies: {\r\n        title: \"Cadastrar Empresa\",\r\n        form: {\r\n          name: \"Nome da Empresa\",\r\n          plan: \"Plano\",\r\n          token: \"Token\",\r\n          submit: \"Cadastrar\",\r\n          success: \"Empresa criada com sucesso!\",\r\n        },\r\n      },\r\n      auth: {\r\n        toasts: {\r\n          success: \"Login efetuado com sucesso!\",\r\n        },\r\n        token: \"Token\",\r\n      },\r\n      dashboard: {\r\n        charts: {\r\n          perDay: {\r\n            title: \"Atendimentos hoje: \",\r\n          },\r\n        },\r\n      },\r\n      connections: {\r\n        title: \"Conexões\",\r\n        toasts: {\r\n          deleted: \"Conexão com o WhatsApp excluída com sucesso!\",\r\n        },\r\n        confirmationModal: {\r\n          deleteTitle: \"Deletar\",\r\n          deleteMessage: \"Você tem certeza? Essa ação não pode ser revertida.\",\r\n          disconnectTitle: \"Desconectar\",\r\n          disconnectMessage:\r\n            \"Tem certeza? Você precisará ler o QR Code novamente.\",\r\n        },\r\n        buttons: {\r\n          add: \"Adicionar WhatsApp\",\r\n          disconnect: \"desconectar\",\r\n          tryAgain: \"Tentar novamente\",\r\n          qrcode: \"QR CODE\",\r\n          newQr: \"Novo QR CODE\",\r\n          connecting: \"Conectando\",\r\n        },\r\n        toolTips: {\r\n          disconnected: {\r\n            title: \"Falha ao iniciar sessão do WhatsApp\",\r\n            content:\r\n              \"Certifique-se de que seu celular esteja conectado à internet e tente novamente, ou solicite um novo QR Code\",\r\n          },\r\n          qrcode: {\r\n            title: \"Esperando leitura do QR Code\",\r\n            content:\r\n              \"Clique no botão 'QR CODE' e leia o QR Code com o seu celular para iniciar a sessão\",\r\n          },\r\n          connected: {\r\n            title: \"Conexão estabelecida!\",\r\n          },\r\n          timeout: {\r\n            title: \"A conexão com o celular foi perdida\",\r\n            content:\r\n              \"Certifique-se de que seu celular esteja conectado à internet e o WhatsApp esteja aberto, ou clique no botão 'Desconectar' para obter um novo QR Code\",\r\n          },\r\n        },\r\n        table: {\r\n          name: \"Nome\",\r\n          status: \"Status\",\r\n          lastUpdate: \"Última atualização\",\r\n          default: \"Padrão\",\r\n          actions: \"Ações\",\r\n          session: \"Sessão\",\r\n        },\r\n      },\r\n      whatsappModal: {\r\n        title: {\r\n          add: \"Adicionar WhatsApp\",\r\n          edit: \"Editar WhatsApp\",\r\n        },\r\n        tabs: {\r\n          general: \"Geral\",\r\n          messages: \"Mensagens\",\r\n          assessments: \"Avaliações\",\r\n          integrations: \"Integrações\",\r\n          schedules: \"Horário de expediente\",\r\n        },\r\n        form: {\r\n          name: \"Nome\",\r\n          default: \"Padrão\",\r\n          sendIdQueue: \"Fila\",\r\n          timeSendQueue: \"Redirecionar para fila em X minutos\",\r\n          queueRedirection: \"Redirecionamento de Fila\",\r\n          outOfHoursMessage: \"Mensagem de fora de expediente\",\r\n          queueRedirectionDesc:\r\n            \"Selecione uma fila para os contatos que não possuem fila serem redirecionados\",\r\n          prompt: \"Prompt\",\r\n          //maxUseBotQueues: \"Enviar bot x vezes\",\r\n          //timeUseBotQueues: \"Intervalo em minutos entre envio de bot\",\r\n          expiresTicket: \"Encerrar chats abertos após x minutos\",\r\n          expiresInactiveMessage: \"Mensagem de encerramento por inatividade\",\r\n          greetingMessage: \"Mensagem de saudação\",\r\n          complationMessage: \"Mensagem de conclusão\",\r\n          sendIdQueue: \"Fila\",\r\n        },\r\n        buttons: {\r\n          okAdd: \"Adicionar\",\r\n          okEdit: \"Salvar\",\r\n          cancel: \"Cancelar\",\r\n        },\r\n        success: \"WhatsApp salvo com sucesso.\",\r\n      },\r\n      qrCode: {\r\n        message: \"Leia o QrCode para iniciar a sessão\",\r\n      },\r\n      contacts: {\r\n        title: \"Contatos\",\r\n        toasts: {\r\n          deleted: \"Contato excluído com sucesso!\",\r\n          deletedAll: \"Todos contatos excluídos com sucesso!\",\r\n        },\r\n        searchPlaceholder: \"Pesquisar...\",\r\n        confirmationModal: {\r\n          deleteTitle: \"Deletar \",\r\n          deleteAllTitle: \"Deletar Todos\",\r\n          importTitle: \"Importar contatos\",\r\n          deleteMessage:\r\n            \"Tem certeza que deseja deletar este contato? Todos os tickets relacionados serão perdidos.\",\r\n          deleteAllMessage:\r\n            \"Tem certeza que deseja deletar todos os contatos? Todos os tickets relacionados serão perdidos.\",\r\n          importMessage: \"Deseja importar todos os contatos do telefone?\",\r\n        },\r\n        buttons: {\r\n          import: \"Importar Contatos\",\r\n          add: \"Adicionar Contato\",\r\n          export: \"Exportar Contatos\",\r\n          delete: \"Excluir Todos Contatos\",\r\n        },\r\n        table: {\r\n          name: \"Nome\",\r\n          whatsapp: \"WhatsApp\",\r\n          email: \"Email\",\r\n          actions: \"Ações\",\r\n        },\r\n      },\r\n      queueIntegrationModal: {\r\n        title: {\r\n          add: \"Adicionar projeto\",\r\n          edit: \"Editar projeto\",\r\n        },\r\n        form: {\r\n          id: \"ID\",\r\n          type: \"Tipo\",\r\n          name: \"Nome\",\r\n          projectName: \"Nome do Projeto\",\r\n          language: \"Linguagem\",\r\n          jsonContent: \"JsonContent\",\r\n          urlN8N: \"URL\",\r\n          typebotSlug: \"Typebot - Slug\",\r\n          typebotExpires: \"Tempo em minutos para expirar uma conversa\",\r\n          typebotKeywordFinish: \"Palavra para finalizar o ticket\",\r\n          typebotKeywordRestart: \"Palavra para reiniciar o fluxo\",\r\n          typebotRestartMessage: \"Mensagem ao reiniciar a conversa\",\r\n          typebotUnknownMessage: \"Mensagem de opção inválida\",\r\n          typebotDelayMessage: \"Intervalo (ms) entre mensagens\",\r\n        },\r\n        buttons: {\r\n          okAdd: \"Adicionar\",\r\n          okEdit: \"Salvar\",\r\n          cancel: \"Cancelar\",\r\n          test: \"Testar Bot\",\r\n        },\r\n        messages: {\r\n          testSuccess: \"Integração testada com sucesso!\",\r\n          addSuccess: \"Integração adicionada com sucesso.\",\r\n          editSuccess: \"Integração editada com sucesso.\",\r\n        },\r\n      },\r\n      sideMenu: {\r\n        name: \"Menu Lateral Inicial\",\r\n        note: \"Se habilitado, o menu lateral irá iniciar fechado\",\r\n        options: {\r\n          enabled: \"Aberto\",\r\n          disabled: \"Fechado\",\r\n        },\r\n      },\r\n      promptModal: {\r\n        form: {\r\n          name: \"Nome\",\r\n          prompt: \"Prompt\",\r\n          voice: \"Voz\",\r\n          max_tokens: \"Máximo de Tokens na resposta\",\r\n          temperature: \"Temperatura\",\r\n          apikey: \"API Key\",\r\n          max_messages: \"Máximo de mensagens no Histórico\",\r\n          voiceKey: \"Chave da API de Voz\",\r\n          voiceRegion: \"Região de Voz\",\r\n        },\r\n        success: \"Prompt salvo com sucesso!\",\r\n        title: {\r\n          add: \"Adicionar Prompt\",\r\n          edit: \"Editar Prompt\",\r\n        },\r\n        buttons: {\r\n          okAdd: \"Adicionar\",\r\n          okEdit: \"Salvar\",\r\n          cancel: \"Cancelar\",\r\n        },\r\n      },\r\n      prompts: {\r\n        title: \"Prompts\",\r\n        table: {\r\n          name: \"Nome\",\r\n          queue: \"Setor/Fila\",\r\n          max_tokens: \"Máximo Tokens Resposta\",\r\n          actions: \"Ações\",\r\n        },\r\n        confirmationModal: {\r\n          deleteTitle: \"Excluir\",\r\n          deleteMessage: \"Você tem certeza? Essa ação não pode ser revertida!\",\r\n        },\r\n        buttons: {\r\n          add: \"Adicionar Prompt\",\r\n        },\r\n      },\r\n      contactModal: {\r\n        title: {\r\n          add: \"Adicionar contato\",\r\n          edit: \"Editar contato\",\r\n        },\r\n        form: {\r\n          mainInfo: \"Dados do contato\",\r\n          extraInfo: \"Informações adicionais\",\r\n          name: \"Nome\",\r\n          number: \"Número do Whatsapp\",\r\n          email: \"Email\",\r\n          extraName: \"Nome do campo\",\r\n          extraValue: \"Valor\",\r\n          whatsapp: \"Conexão Origem: \",\r\n        },\r\n        buttons: {\r\n          addExtraInfo: \"Adicionar informação\",\r\n          okAdd: \"Adicionar\",\r\n          okEdit: \"Salvar\",\r\n          cancel: \"Cancelar\",\r\n        },\r\n        success: \"Contato salvo com sucesso.\",\r\n      },\r\n      queueModal: {\r\n        title: {\r\n          add: \"Adicionar fila\",\r\n          edit: \"Editar fila\",\r\n        },\r\n        form: {\r\n          name: \"Nome\",\r\n          color: \"Cor\",\r\n          greetingMessage: \"Mensagem de saudação\",\r\n          complationMessage: \"Mensagem de conclusão\",\r\n          outOfHoursMessage: \"Mensagem de fora de expediente\",\r\n          ratingMessage: \"Mensagem de avaliação\",\r\n          token: \"Token\",\r\n          orderQueue: \"Ordem da fila (Bot)\",\r\n          integrationId: \"Integração\",\r\n        },\r\n        buttons: {\r\n          okAdd: \"Adicionar\",\r\n          okEdit: \"Salvar\",\r\n          cancel: \"Cancelar\",\r\n        },\r\n      },\r\n      userModal: {\r\n        title: {\r\n          add: \"Adicionar usuário\",\r\n          edit: \"Editar usuário\",\r\n        },\r\n        form: {\r\n          name: \"Nome\",\r\n          email: \"Email\",\r\n          password: \"Senha\",\r\n          profile: \"Perfil\",\r\n          whatsapp: \"Conexão Padrão\",\r\n\r\n          allTicket: \"Ticket Sem Fila [Invisível]\",\r\n          allTicketEnabled: \"Habilitado\",\r\n          allTicketDesabled: \"Desabilitado\",\r\n        },\r\n        buttons: {\r\n          okAdd: \"Adicionar\",\r\n          okEdit: \"Salvar\",\r\n          cancel: \"Cancelar\",\r\n        },\r\n        success: \"Usuário salvo com sucesso.\",\r\n      },\r\n      scheduleModal: {\r\n        title: {\r\n          add: \"Novo Agendamento\",\r\n          edit: \"Editar Agendamento\",\r\n        },\r\n        form: {\r\n          body: \"Mensagem\",\r\n          contact: \"Contato\",\r\n          sendAt: \"Data de Agendamento\",\r\n          sentAt: \"Data de Envio\",\r\n        },\r\n        buttons: {\r\n          okAdd: \"Adicionar\",\r\n          okEdit: \"Salvar\",\r\n          cancel: \"Cancelar\",\r\n        },\r\n        success: \"Agendamento salvo com sucesso.\",\r\n      },\r\n      tagModal: {\r\n        title: {\r\n          add: \"Nova Tag\",\r\n          edit: \"Editar Tag\",\r\n        },\r\n        form: {\r\n          name: \"Nome\",\r\n          color: \"Cor\",\r\n        },\r\n        buttons: {\r\n          okAdd: \"Adicionar\",\r\n          okEdit: \"Salvar\",\r\n          cancel: \"Cancelar\",\r\n        },\r\n        success: \"Tag salvo com sucesso.\",\r\n      },\r\n      chat: {\r\n        noTicketMessage: \"Selecione um ticket para começar a conversar.\",\r\n      },\r\n      uploads: {\r\n        titles: {\r\n          titleUploadMsgDragDrop: \"ARRASTE E SOLTE ARQUIVOS NO CAMPO ABAIXO\",\r\n          titleFileList: \"Lista de arquivo(s)\",\r\n        },\r\n      },\r\n      ticketsManager: {\r\n        buttons: {\r\n          newTicket: \"Novo\",\r\n        },\r\n      },\r\n      ticketsQueueSelect: {\r\n        placeholder: \"Filas\",\r\n      },\r\n      tickets: {\r\n        toasts: {\r\n          deleted: \"O atendimento que você estava foi deletado.\",\r\n        },\r\n        notification: {\r\n          message: \"Mensagem de\",\r\n        },\r\n        tabs: {\r\n          open: { title: \"Abertas\" },\r\n          closed: { title: \"Resolvidos\" },\r\n          search: { title: \"Busca\" },\r\n        },\r\n        search: {\r\n          placeholder: \"Buscar atendimento e mensagens\",\r\n        },\r\n        buttons: {\r\n          showAll: \"Todos\",\r\n        },\r\n      },\r\n      transferTicketModal: {\r\n        title: \"Transferir Ticket\",\r\n        fieldLabel: \"Digite para buscar usuários\",\r\n        fieldQueueLabel: \"Transferir para fila\",\r\n        fieldQueuePlaceholder: \"Selecione uma fila\",\r\n        noOptions: \"Nenhum usuário encontrado com esse nome\",\r\n        buttons: {\r\n          ok: \"Transferir\",\r\n          cancel: \"Cancelar\",\r\n        },\r\n      },\r\n      ticketsList: {\r\n        pendingHeader: \"Aguardando\",\r\n        assignedHeader: \"Atendendo\",\r\n        noTicketsTitle: \"Nada aqui!\",\r\n        noTicketsMessage:\r\n          \"Nenhum atendimento encontrado com esse status ou termo pesquisado\",\r\n        buttons: {\r\n          accept: \"Aceitar\",\r\n          closed: \"Finalizar\",\r\n          reopen: \"Reabrir\",\r\n        },\r\n      },\r\n      newTicketModal: {\r\n        title: \"Criar Ticket\",\r\n        fieldLabel: \"Digite para pesquisar o contato\",\r\n        add: \"Adicionar\",\r\n        buttons: {\r\n          ok: \"Salvar\",\r\n          cancel: \"Cancelar\",\r\n        },\r\n      },\r\n      mainDrawer: {\r\n        listItems: {\r\n          dashboard: \"Dashboard\",\r\n          connections: \"Conexões\",\r\n          tickets: \"Atendimentos\",\r\n          quickMessages: \"Respostas Rápidas\",\r\n          contacts: \"Contatos\",\r\n          queues: \"Filas & Chatbot\",\r\n          tags: \"Tags\",\r\n          administration: \"Administração\",\r\n          users: \"Usuários\",\r\n          settings: \"Configurações\",\r\n          helps: \"Ajuda\",\r\n          messagesAPI: \"API\",\r\n          schedules: \"Agendamentos\",\r\n          campaigns: \"Campanhas\",\r\n          annoucements: \"Informativos\",\r\n          chats: \"Chat Interno\",\r\n          financeiro: \"Financeiro\",\r\n          files: \"Lista de arquivos\",\r\n          prompts: \"Open.Ai\",\r\n          queueIntegration: \"Integrações\",\r\n        },\r\n        appBar: {\r\n          notRegister: \"Sem notificações\",\r\n          user: {\r\n            profile: \"Perfil\",\r\n            logout: \"Sair\",\r\n          },\r\n        },\r\n      },\r\n      queueIntegration: {\r\n        title: \"Integrações\",\r\n        table: {\r\n          id: \"ID\",\r\n          type: \"Tipo\",\r\n          name: \"Nome\",\r\n          projectName: \"Nome do Projeto\",\r\n          language: \"Linguagem\",\r\n          lastUpdate: \"Ultima atualização\",\r\n          actions: \"Ações\",\r\n        },\r\n        buttons: {\r\n          add: \"Adicionar Projeto\",\r\n        },\r\n        searchPlaceholder: \"Pesquisar...\",\r\n        confirmationModal: {\r\n          deleteTitle: \"Excluir\",\r\n          deleteMessage:\r\n            \"Você tem certeza? Essa ação não pode ser revertida! e será removida das filas e conexões vinculadas\",\r\n        },\r\n      },\r\n      files: {\r\n        title: \"Lista de arquivos\",\r\n        table: {\r\n          name: \"Nome\",\r\n          contacts: \"Contatos\",\r\n          actions: \"Ação\",\r\n        },\r\n        toasts: {\r\n          deleted: \"Lista excluída com sucesso!\",\r\n          deletedAll: \"Todas as listas foram excluídas com sucesso!\",\r\n        },\r\n        buttons: {\r\n          add: \"Adicionar\",\r\n          deleteAll: \"Deletar Todos\",\r\n        },\r\n        confirmationModal: {\r\n          deleteTitle: \"Deletar\",\r\n          deleteAllTitle: \"Deletar Todos\",\r\n          deleteMessage: \"Tem certeza que deseja deletar esta lista?\",\r\n          deleteAllMessage: \"Tem certeza que deseja deletar todas as listas?\",\r\n        },\r\n      },\r\n      messagesAPI: {\r\n        title: \"API\",\r\n        textMessage: {\r\n          number: \"Número\",\r\n          body: \"Mensagem\",\r\n          token: \"Token cadastrado\",\r\n        },\r\n        mediaMessage: {\r\n          number: \"Número\",\r\n          body: \"Nome do arquivo\",\r\n          media: \"Arquivo\",\r\n          token: \"Token cadastrado\",\r\n        },\r\n      },\r\n      notifications: {\r\n        noTickets: \"Nenhuma notificação.\",\r\n      },\r\n      quickMessages: {\r\n        title: \"Respostas Rápidas\",\r\n        searchPlaceholder: \"Pesquisar...\",\r\n        noAttachment: \"Sem anexo\",\r\n        confirmationModal: {\r\n          deleteTitle: \"Exclusão\",\r\n          deleteMessage: \"Esta ação é irreversível! Deseja prosseguir?\",\r\n        },\r\n        buttons: {\r\n          add: \"Adicionar\",\r\n          attach: \"Anexar Arquivo\",\r\n          cancel: \"Cancelar\",\r\n          edit: \"Editar\",\r\n        },\r\n        toasts: {\r\n          success: \"Atalho adicionado com sucesso!\",\r\n          deleted: \"Atalho removido com sucesso!\",\r\n        },\r\n        dialog: {\r\n          title: \"Mensagem Rápida\",\r\n          shortcode: \"Atalho\",\r\n          message: \"Resposta\",\r\n          save: \"Salvar\",\r\n          cancel: \"Cancelar\",\r\n          geral: \"Permitir editar\",\r\n          add: \"Adicionar\",\r\n          edit: \"Editar\",\r\n          visao: \"Permitir visão\",\r\n        },\r\n        table: {\r\n          shortcode: \"Atalho\",\r\n          message: \"Mensagem\",\r\n          actions: \"Ações\",\r\n          mediaName: \"Nome do Arquivo\",\r\n          status: \"Status\",\r\n        },\r\n      },\r\n      messageVariablesPicker: {\r\n        label: \"Variavéis disponíveis\",\r\n        vars: {\r\n          contactFirstName: \"Primeiro Nome\",\r\n          contactName: \"Nome\",\r\n          greeting: \"Saudação\",\r\n          protocolNumber: \"Protocolo\",\r\n          date: \"Data\",\r\n          hour: \"Hora\",\r\n        },\r\n      },\r\n      contactLists: {\r\n        title: \"Listas de Contatos\",\r\n        table: {\r\n          name: \"Nome\",\r\n          contacts: \"Contatos\",\r\n          actions: \"Ações\",\r\n        },\r\n        buttons: {\r\n          add: \"Nova Lista\",\r\n        },\r\n        dialog: {\r\n          name: \"Nome\",\r\n          company: \"Empresa\",\r\n          okEdit: \"Editar\",\r\n          okAdd: \"Adicionar\",\r\n          add: \"Adicionar\",\r\n          edit: \"Editar\",\r\n          cancel: \"Cancelar\",\r\n        },\r\n        confirmationModal: {\r\n          deleteTitle: \"Excluir\",\r\n          deleteMessage: \"Esta ação não pode ser revertida.\",\r\n        },\r\n        toasts: {\r\n          deleted: \"Registro excluído\",\r\n        },\r\n      },\r\n      contactListItems: {\r\n        title: \"Contatos\",\r\n        searchPlaceholder: \"Pesquisa\",\r\n        buttons: {\r\n          add: \"Novo\",\r\n          lists: \"Listas\",\r\n          import: \"Importar\",\r\n        },\r\n        dialog: {\r\n          name: \"Nome\",\r\n          number: \"Número\",\r\n          whatsapp: \"Whatsapp\",\r\n          email: \"E-mail\",\r\n          okEdit: \"Editar\",\r\n          okAdd: \"Adicionar\",\r\n          add: \"Adicionar\",\r\n          edit: \"Editar\",\r\n          cancel: \"Cancelar\",\r\n        },\r\n        table: {\r\n          name: \"Nome\",\r\n          number: \"Número\",\r\n          whatsapp: \"Whatsapp\",\r\n          email: \"E-mail\",\r\n          actions: \"Ações\",\r\n        },\r\n        confirmationModal: {\r\n          deleteTitle: \"Excluir\",\r\n          deleteMessage: \"Esta ação não pode ser revertida.\",\r\n          importMessage: \"Deseja importar os contatos desta planilha? \",\r\n          importTitlte: \"Importar\",\r\n        },\r\n        toasts: {\r\n          deleted: \"Registro excluído\",\r\n        },\r\n      },\r\n      campaigns: {\r\n        title: \"Campanhas\",\r\n        searchPlaceholder: \"Pesquisa\",\r\n        buttons: {\r\n          add: \"Nova Campanha\",\r\n          contactLists: \"Listas de Contatos\",\r\n        },\r\n        table: {\r\n          name: \"Nome\",\r\n          whatsapp: \"Conexão\",\r\n          contactList: \"Lista de Contatos\",\r\n          status: \"Status\",\r\n          scheduledAt: \"Agendamento\",\r\n          completedAt: \"Concluída\",\r\n          confirmation: \"Confirmação\",\r\n          actions: \"Ações\",\r\n        },\r\n        dialog: {\r\n          new: \"Nova Campanha\",\r\n          update: \"Editar Campanha\",\r\n          readonly: \"Apenas Visualização\",\r\n          form: {\r\n            name: \"Nome\",\r\n            message1: \"Mensagem 1\",\r\n            message2: \"Mensagem 2\",\r\n            message3: \"Mensagem 3\",\r\n            message4: \"Mensagem 4\",\r\n            message5: \"Mensagem 5\",\r\n            confirmationMessage1: \"Mensagem de Confirmação 1\",\r\n            confirmationMessage2: \"Mensagem de Confirmação 2\",\r\n            confirmationMessage3: \"Mensagem de Confirmação 3\",\r\n            confirmationMessage4: \"Mensagem de Confirmação 4\",\r\n            confirmationMessage5: \"Mensagem de Confirmação 5\",\r\n            messagePlaceholder: \"Conteúdo da mensagem\",\r\n            whatsapp: \"Conexão\",\r\n            status: \"Status\",\r\n            scheduledAt: \"Agendamento\",\r\n            confirmation: \"Confirmação\",\r\n            contactList: \"Lista de Contato\",\r\n            tagList: \"Lista de Tags\",\r\n            fileList: \"Lista de Arquivos\",\r\n          },\r\n          buttons: {\r\n            add: \"Adicionar\",\r\n            edit: \"Atualizar\",\r\n            okadd: \"Ok\",\r\n            cancel: \"Cancelar Disparos\",\r\n            restart: \"Reiniciar Disparos\",\r\n            close: \"Fechar\",\r\n            attach: \"Anexar Arquivo\",\r\n          },\r\n        },\r\n        confirmationModal: {\r\n          deleteTitle: \"Excluir\",\r\n          deleteMessage: \"Esta ação não pode ser revertida.\",\r\n        },\r\n        toasts: {\r\n          success: \"Operação realizada com sucesso\",\r\n          cancel: \"Campanha cancelada\",\r\n          restart: \"Campanha reiniciada\",\r\n          deleted: \"Registro excluído\",\r\n        },\r\n      },\r\n      announcements: {\r\n        active: \"Ativo\",\r\n        inactive: \"Inativo\",\r\n        title: \"Informativos\",\r\n        searchPlaceholder: \"Pesquisa\",\r\n        buttons: {\r\n          add: \"Novo Informativo\",\r\n          contactLists: \"Listas de Informativos\",\r\n        },\r\n        table: {\r\n          priority: \"Prioridade\",\r\n          title: \"Title\",\r\n          text: \"Texto\",\r\n          mediaName: \"Arquivo\",\r\n          status: \"Status\",\r\n          actions: \"Ações\",\r\n        },\r\n        dialog: {\r\n          edit: \"Edição de Informativo\",\r\n          add: \"Novo Informativo\",\r\n          update: \"Editar Informativo\",\r\n          readonly: \"Apenas Visualização\",\r\n          form: {\r\n            priority: \"Prioridade\",\r\n            title: \"Title\",\r\n            text: \"Texto\",\r\n            mediaPath: \"Arquivo\",\r\n            status: \"Status\",\r\n          },\r\n          buttons: {\r\n            add: \"Adicionar\",\r\n            edit: \"Atualizar\",\r\n            okadd: \"Ok\",\r\n            cancel: \"Cancelar\",\r\n            close: \"Fechar\",\r\n            attach: \"Anexar Arquivo\",\r\n          },\r\n        },\r\n        confirmationModal: {\r\n          deleteTitle: \"Excluir\",\r\n          deleteMessage: \"Esta ação não pode ser revertida.\",\r\n        },\r\n        toasts: {\r\n          success: \"Operação realizada com sucesso\",\r\n          deleted: \"Registro excluído\",\r\n        },\r\n      },\r\n      campaignsConfig: {\r\n        title: \"Configurações de Campanhas\",\r\n      },\r\n      queues: {\r\n        title: \"Filas & Chatbot\",\r\n        table: {\r\n          id: \"ID\",\r\n          name: \"Nome\",\r\n          color: \"Cor\",\r\n          greeting: \"Mensagem de saudação\",\r\n          actions: \"Ações\",\r\n          orderQueue: \"Ordenação da fila (bot)\",\r\n        },\r\n        buttons: {\r\n          add: \"Adicionar fila\",\r\n        },\r\n        confirmationModal: {\r\n          deleteTitle: \"Excluir\",\r\n          deleteMessage:\r\n            \"Você tem certeza? Essa ação não pode ser revertida! Os atendimentos dessa fila continuarão existindo, mas não terão mais nenhuma fila atribuída.\",\r\n        },\r\n      },\r\n      queueSelect: {\r\n        inputLabel: \"Filas\",\r\n      },\r\n      users: {\r\n        title: \"Usuários\",\r\n        table: {\r\n          id: \"ID\",\r\n          name: \"Nome\",\r\n          email: \"Email\",\r\n          profile: \"Perfil\",\r\n          actions: \"Ações\",\r\n        },\r\n        buttons: {\r\n          add: \"Adicionar usuário\",\r\n        },\r\n        toasts: {\r\n          deleted: \"Usuário excluído com sucesso.\",\r\n        },\r\n        confirmationModal: {\r\n          deleteTitle: \"Excluir\",\r\n          deleteMessage:\r\n            \"Todos os dados do usuário serão perdidos. Os atendimento abertos deste usuário serão movidos para a fila.\",\r\n        },\r\n      },\r\n      helps: {\r\n        title: \"Central de Ajuda\",\r\n      },\r\n      schedules: {\r\n        title: \"Agendamentos\",\r\n        confirmationModal: {\r\n          deleteTitle: \"Você tem certeza que quer excluir este Agendamento?\",\r\n          deleteMessage: \"Esta ação não pode ser revertida.\",\r\n        },\r\n        table: {\r\n          contact: \"Contato\",\r\n          body: \"Mensagem\",\r\n          sendAt: \"Data de Agendamento\",\r\n          sentAt: \"Data de Envio\",\r\n          status: \"Status\",\r\n          actions: \"Ações\",\r\n        },\r\n        buttons: {\r\n          add: \"Novo Agendamento\",\r\n        },\r\n        toasts: {\r\n          deleted: \"Agendamento excluído com sucesso.\",\r\n        },\r\n      },\r\n      tags: {\r\n        title: \"Tags\",\r\n        confirmationModal: {\r\n          deleteTitle: \"Você tem certeza que quer excluir esta Tag?\",\r\n          deleteMessage: \"Esta ação não pode ser revertida.\",\r\n          deleteAllMessage: \"Tem certeza que deseja deletar todas as Tags?\",\r\n          deleteAllTitle: \"Deletar Todos\",\r\n        },\r\n        table: {\r\n          name: \"Nome\",\r\n          color: \"Cor\",\r\n          tickets: \"Registros Tagdos\",\r\n          actions: \"Ações\",\r\n        },\r\n        buttons: {\r\n          add: \"Nova Tag\",\r\n          deleteAll: \"Deletar Todas\",\r\n        },\r\n        toasts: {\r\n          deletedAll: \"Todas Tags excluídas com sucesso!\",\r\n          deleted: \"Tag excluído com sucesso.\",\r\n        },\r\n      },\r\n      settings: {\r\n        success: \"Configurações salvas com sucesso.\",\r\n        title: \"Configurações\",\r\n        settings: {\r\n          userCreation: {\r\n            name: \"Criação de usuário\",\r\n            options: {\r\n              enabled: \"Ativado\",\r\n              disabled: \"Desativado\",\r\n            },\r\n          },\r\n        },\r\n      },\r\n      messagesList: {\r\n        header: {\r\n          assignedTo: \"Atribuído à:\",\r\n          buttons: {\r\n            return: \"Retornar\",\r\n            resolve: \"Resolver\",\r\n            reopen: \"Reabrir\",\r\n            accept: \"Aceitar\",\r\n          },\r\n        },\r\n      },\r\n      messagesInput: {\r\n        placeholderOpen: \"Digite uma mensagem\",\r\n        placeholderClosed:\r\n          \"Reabra ou aceite esse ticket para enviar uma mensagem.\",\r\n        signMessage: \"Assinar\",\r\n      },\r\n      contactDrawer: {\r\n        header: \"Dados do contato\",\r\n        buttons: {\r\n          edit: \"Editar contato\",\r\n        },\r\n        extraInfo: \"Outras informações\",\r\n      },\r\n      fileModal: {\r\n        title: {\r\n          add: \"Adicionar lista de arquivos\",\r\n          edit: \"Editar lista de arquivos\",\r\n        },\r\n        buttons: {\r\n          okAdd: \"Salvar\",\r\n          okEdit: \"Editar\",\r\n          cancel: \"Cancelar\",\r\n          fileOptions: \"Adicionar arquivo\",\r\n        },\r\n        form: {\r\n          name: \"Nome da lista de arquivos\",\r\n          message: \"Detalhes da lista\",\r\n          fileOptions: \"Lista de arquivos\",\r\n          extraName: \"Mensagem para enviar com arquivo\",\r\n          extraValue: \"Valor da opção\",\r\n        },\r\n        success: \"Lista de arquivos salva com sucesso!\",\r\n      },\r\n      ticketOptionsMenu: {\r\n        schedule: \"Agendamento\",\r\n        delete: \"Deletar\",\r\n        transfer: \"Transferir\",\r\n        registerAppointment: \"Observações do Contato\",\r\n        appointmentsModal: {\r\n          title: \"Observações do Contato\",\r\n          textarea: \"Observação\",\r\n          placeholder: \"Insira aqui a informação que deseja registrar\",\r\n        },\r\n        confirmationModal: {\r\n          title: \"Deletar o ticket\",\r\n          titleFrom: \"do contato \",\r\n          message:\r\n            \"Atenção! Todas as mensagens relacionadas ao ticket serão perdidas.\",\r\n        },\r\n        buttons: {\r\n          delete: \"Excluir\",\r\n          cancel: \"Cancelar\",\r\n        },\r\n      },\r\n      confirmationModal: {\r\n        buttons: {\r\n          confirm: \"Ok\",\r\n          cancel: \"Cancelar\",\r\n        },\r\n      },\r\n      messageOptionsMenu: {\r\n        delete: \"Deletar\",\r\n        reply: \"Responder\",\r\n        confirmationModal: {\r\n          title: \"Apagar mensagem?\",\r\n          message: \"Esta ação não pode ser revertida.\",\r\n        },\r\n      },\r\n      backendErrors: {\r\n        ERR_NO_OTHER_WHATSAPP: \"Deve haver pelo menos um WhatsApp padrão.\",\r\n        ERR_NO_DEF_WAPP_FOUND:\r\n          \"Nenhum WhatsApp padrão encontrado. Verifique a página de conexões.\",\r\n        ERR_WAPP_NOT_INITIALIZED:\r\n          \"Esta sessão do WhatsApp não foi inicializada. Verifique a página de conexões.\",\r\n        ERR_WAPP_CHECK_CONTACT:\r\n          \"Não foi possível verificar o contato do WhatsApp. Verifique a página de conexões\",\r\n        ERR_WAPP_INVALID_CONTACT: \"Este não é um número de Whatsapp válido.\",\r\n        ERR_WAPP_DOWNLOAD_MEDIA:\r\n          \"Não foi possível baixar mídia do WhatsApp. Verifique a página de conexões.\",\r\n        ERR_INVALID_CREDENTIALS:\r\n          \"Erro de autenticação. Por favor, tente novamente.\",\r\n        ERR_SENDING_WAPP_MSG:\r\n          \"Erro ao enviar mensagem do WhatsApp. Verifique a página de conexões.\",\r\n        ERR_DELETE_WAPP_MSG: \"Não foi possível excluir a mensagem do WhatsApp.\",\r\n        ERR_OTHER_OPEN_TICKET: \"Já existe um tíquete aberto para este contato.\",\r\n        ERR_SESSION_EXPIRED: \"Sessão expirada. Por favor entre.\",\r\n        ERR_USER_CREATION_DISABLED:\r\n          \"A criação do usuário foi desabilitada pelo administrador.\",\r\n        ERR_NO_PERMISSION: \"Você não tem permissão para acessar este recurso.\",\r\n        ERR_DUPLICATED_CONTACT: \"Já existe um contato com este número.\",\r\n        ERR_NO_SETTING_FOUND: \"Nenhuma configuração encontrada com este ID.\",\r\n        ERR_NO_CONTACT_FOUND: \"Nenhum contato encontrado com este ID.\",\r\n        ERR_NO_TICKET_FOUND: \"Nenhum tíquete encontrado com este ID.\",\r\n        ERR_NO_USER_FOUND: \"Nenhum usuário encontrado com este ID.\",\r\n        ERR_NO_WAPP_FOUND: \"Nenhum WhatsApp encontrado com este ID.\",\r\n        ERR_CREATING_MESSAGE: \"Erro ao criar mensagem no banco de dados.\",\r\n        ERR_CREATING_TICKET: \"Erro ao criar tíquete no banco de dados.\",\r\n        ERR_FETCH_WAPP_MSG:\r\n          \"Erro ao buscar a mensagem no WhtasApp, talvez ela seja muito antiga.\",\r\n        ERR_QUEUE_COLOR_ALREADY_EXISTS:\r\n          \"Esta cor já está em uso, escolha outra.\",\r\n        ERR_WAPP_GREETING_REQUIRED:\r\n          \"A mensagem de saudação é obrigatório quando há mais de uma fila.\",\r\n        ERR_COMPANY_NAME_ALREADY_EXISTS:\r\n          \"Já existe uma empresa cadastrada com este nome.\",\r\n        ERR_USER_EMAIL_ALREADY_EXISTS:\r\n          \"Já existe um usuário cadastrado com este email.\",\r\n      },\r\n    },\r\n  },\r\n};\r\n\r\nexport { messages };\r\n","import { messages as portugueseMessages } from \"./pt\";\r\nimport { messages as englishMessages } from \"./en\";\r\nimport { messages as spanishMessages } from \"./es\";\r\n\r\nconst messages = {\r\n\t...portugueseMessages,\r\n\t...englishMessages,\r\n\t...spanishMessages,\r\n};\r\n\r\nexport { messages };\r\n","const messages = {\r\n\ten: {\r\n\t\ttranslations: {\r\n\t\t\tsignup: {\r\n\t\t\t\ttitle: \"Sign up\",\r\n\t\t\t\ttoasts: {\r\n\t\t\t\t\tsuccess: \"User created successfully! Please login!\",\r\n\t\t\t\t\tfail: \"Error creating user. Check the reported data.\",\r\n\t\t\t\t},\r\n\t\t\t\tform: {\r\n\t\t\t\t\tname: \"Name\",\r\n\t\t\t\t\temail: \"Email\",\r\n\t\t\t\t\tpassword: \"Password\",\r\n\t\t\t\t},\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\tsubmit: \"Register\",\r\n\t\t\t\t\tlogin: \"Already have an account? Log in!\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tlogin: {\r\n\t\t\t\ttitle: \"Login\",\r\n\t\t\t\tform: {\r\n\t\t\t\t\temail: \"Email\",\r\n\t\t\t\t\tpassword: \"Password\",\r\n\t\t\t\t},\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\tsubmit: \"Enter\",\r\n\t\t\t\t\tregister: \"Don't have an account? Register!\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tauth: {\r\n\t\t\t\ttoasts: {\r\n\t\t\t\t\tsuccess: \"Login successfully!\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tdashboard: {\r\n\t\t\t\tcharts: {\r\n\t\t\t\t\tperDay: {\r\n\t\t\t\t\t\ttitle: \"Tickets today: \",\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tconnections: {\r\n\t\t\t\ttitle: \"Connections\",\r\n\t\t\t\ttoasts: {\r\n\t\t\t\t\tdeleted: \"WhatsApp connection deleted sucessfully!\",\r\n\t\t\t\t},\r\n\t\t\t\tconfirmationModal: {\r\n\t\t\t\t\tdeleteTitle: \"Delete\",\r\n\t\t\t\t\tdeleteMessage: \"Are you sure? It cannot be reverted.\",\r\n\t\t\t\t\tdisconnectTitle: \"Disconnect\",\r\n\t\t\t\t\tdisconnectMessage: \"Are you sure? You'll need to read QR Code again.\",\r\n\t\t\t\t},\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\tadd: \"Add WhatsApp\",\r\n\t\t\t\t\tdisconnect: \"Disconnect\",\r\n\t\t\t\t\ttryAgain: \"Try Again\",\r\n\t\t\t\t\tqrcode: \"QR CODE\",\r\n\t\t\t\t\tnewQr: \"New QR CODE\",\r\n\t\t\t\t\tconnecting: \"Connectiing\",\r\n\t\t\t\t},\r\n\t\t\t\ttoolTips: {\r\n\t\t\t\t\tdisconnected: {\r\n\t\t\t\t\t\ttitle: \"Failed to start WhatsApp session\",\r\n\t\t\t\t\t\tcontent:\r\n\t\t\t\t\t\t\t\"Make sure your cell phone is connected to the internet and try again, or request a new QR Code\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tqrcode: {\r\n\t\t\t\t\t\ttitle: \"Waiting for QR Code read\",\r\n\t\t\t\t\t\tcontent:\r\n\t\t\t\t\t\t\t\"Click on 'QR CODE' button and read the QR Code with your cell phone to start session\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tconnected: {\r\n\t\t\t\t\t\ttitle: \"Connection established\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttimeout: {\r\n\t\t\t\t\t\ttitle: \"Connection with cell phone has been lost\",\r\n\t\t\t\t\t\tcontent:\r\n\t\t\t\t\t\t\t\"Make sure your cell phone is connected to the internet and WhatsApp is open, or click on 'Disconnect' button to get a new QRcode\",\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\ttable: {\r\n\t\t\t\t\tname: \"Name\",\r\n\t\t\t\t\tstatus: \"Status\",\r\n\t\t\t\t\tlastUpdate: \"Last Update\",\r\n\t\t\t\t\tdefault: \"Default\",\r\n\t\t\t\t\tactions: \"Actions\",\r\n\t\t\t\t\tsession: \"Session\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\twhatsappModal: {\r\n\t\t\t\ttitle: {\r\n\t\t\t\t\tadd: \"Add WhatsApp\",\r\n\t\t\t\t\tedit: \"Edit WhatsApp\",\r\n\t\t\t\t},\r\n\t\t\t\tform: {\r\n\t\t\t\t\tname: \"Name\",\r\n\t\t\t\t\tdefault: \"Default\",\r\n\t\t\t\t},\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\tokAdd: \"Add\",\r\n\t\t\t\t\tokEdit: \"Save\",\r\n\t\t\t\t\tcancel: \"Cancel\",\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: \"WhatsApp saved successfully.\",\r\n\t\t\t},\r\n\t\t\tqrCode: {\r\n\t\t\t\tmessage: \"Read QrCode to start the session\",\r\n\t\t\t},\r\n\t\t\tcontacts: {\r\n\t\t\t\ttitle: \"Contacts\",\r\n\t\t\t\ttoasts: {\r\n\t\t\t\t\tdeleted: \"Contact deleted sucessfully!\",\r\n\t\t\t\t},\r\n\t\t\t\tsearchPlaceholder: \"Search ...\",\r\n\t\t\t\tconfirmationModal: {\r\n\t\t\t\t\tdeleteTitle: \"Delete\",\r\n\t\t\t\t\timportTitlte: \"Import contacts\",\r\n\t\t\t\t\tdeleteMessage:\r\n\t\t\t\t\t\t\"Are you sure you want to delete this contact? All related tickets will be lost.\",\r\n\t\t\t\t\timportMessage: \"Do you want to import all contacts from the phone?\",\r\n\t\t\t\t},\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\timport: \"Import Contacts\",\r\n\t\t\t\t\tadd: \"Add Contact\",\r\n\t\t\t\t},\r\n\t\t\t\ttable: {\r\n\t\t\t\t\tname: \"Name\",\r\n\t\t\t\t\twhatsapp: \"WhatsApp\",\r\n\t\t\t\t\temail: \"Email\",\r\n\t\t\t\t\tactions: \"Actions\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tcontactModal: {\r\n\t\t\t\ttitle: {\r\n\t\t\t\t\tadd: \"Add contact\",\r\n\t\t\t\t\tedit: \"Edit contact\",\r\n\t\t\t\t},\r\n\t\t\t\tform: {\r\n\t\t\t\t\tmainInfo: \"Contact details\",\r\n\t\t\t\t\textraInfo: \"Additional information\",\r\n\t\t\t\t\tname: \"Name\",\r\n\t\t\t\t\tnumber: \"Whatsapp number\",\r\n\t\t\t\t\temail: \"Email\",\r\n\t\t\t\t\textraName: \"Field name\",\r\n\t\t\t\t\textraValue: \"Value\",\r\n\t\t\t\t},\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\taddExtraInfo: \"Add information\",\r\n\t\t\t\t\tokAdd: \"Add\",\r\n\t\t\t\t\tokEdit: \"Save\",\r\n\t\t\t\t\tcancel: \"Cancel\",\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: \"Contact saved successfully.\",\r\n\t\t\t},\r\n\t\t\tqueueModal: {\r\n\t\t\t\ttitle: {\r\n\t\t\t\t\tadd: \"Add queue\",\r\n\t\t\t\t\tedit: \"Edit queue\",\r\n\t\t\t\t},\r\n\t\t\t\tform: {\r\n\t\t\t\t\tname: \"Name\",\r\n\t\t\t\t\tcolor: \"Color\",\r\n\t\t\t\t\tgreetingMessage: \"Greeting Message\",\r\n\t\t\t\t},\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\tokAdd: \"Add\",\r\n\t\t\t\t\tokEdit: \"Save\",\r\n\t\t\t\t\tcancel: \"Cancel\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tuserModal: {\r\n\t\t\t\ttitle: {\r\n\t\t\t\t\tadd: \"Add user\",\r\n\t\t\t\t\tedit: \"Edit user\",\r\n\t\t\t\t},\r\n\t\t\t\tform: {\r\n\t\t\t\t\tname: \"Name\",\r\n\t\t\t\t\temail: \"Email\",\r\n\t\t\t\t\tpassword: \"Password\",\r\n\t\t\t\t\tprofile: \"Profile\",\r\n\t\t\t\t},\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\tokAdd: \"Add\",\r\n\t\t\t\t\tokEdit: \"Save\",\r\n\t\t\t\t\tcancel: \"Cancel\",\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: \"User saved successfully.\",\r\n\t\t\t},\r\n\t\t\tchat: {\r\n\t\t\t\tnoTicketMessage: \"Select a ticket to start chatting.\",\r\n\t\t\t},\r\n\t\t\tticketsManager: {\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\tnewTicket: \"New\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tticketsQueueSelect: {\r\n\t\t\t\tplaceholder: \"Queues\",\r\n\t\t\t},\r\n\t\t\ttickets: {\r\n\t\t\t\ttoasts: {\r\n\t\t\t\t\tdeleted: \"The ticket you were on has been deleted.\",\r\n\t\t\t\t},\r\n\t\t\t\tnotification: {\r\n\t\t\t\t\tmessage: \"Message from\",\r\n\t\t\t\t},\r\n\t\t\t\ttabs: {\r\n\t\t\t\t\topen: { title: \"Inbox\" },\r\n\t\t\t\t\tclosed: { title: \"Resolved\" },\r\n\t\t\t\t\tsearch: { title: \"Search\" },\r\n\t\t\t\t},\r\n\t\t\t\tsearch: {\r\n\t\t\t\t\tplaceholder: \"Search tickets and messages.\",\r\n\t\t\t\t},\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\tshowAll: \"All\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\ttransferTicketModal: {\r\n\t\t\t\ttitle: \"Transfer Ticket\",\r\n\t\t\t\tfieldLabel: \"Type to search for users\",\r\n\t\t\t\tnoOptions: \"No user found with this name\",\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\tok: \"Transfer\",\r\n\t\t\t\t\tcancel: \"Cancel\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tticketsList: {\r\n\t\t\t\tpendingHeader: \"Queue\",\r\n\t\t\t\tassignedHeader: \"Working on\",\r\n\t\t\t\tnoTicketsTitle: \"Nothing here!\",\r\n\t\t\t\tnoTicketsMessage: \"No tickets found with this status or search term.\",\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\taccept: \"Accept\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tnewTicketModal: {\r\n\t\t\t\ttitle: \"Create Ticket\",\r\n\t\t\t\tfieldLabel: \"Type to search for a contact\",\r\n\t\t\t\tadd: \"Add\",\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\tok: \"Save\",\r\n\t\t\t\t\tcancel: \"Cancel\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tmainDrawer: {\r\n\t\t\t\tlistItems: {\r\n\t\t\t\t\tdashboard: \"Dashboard\",\r\n\t\t\t\t\tconnections: \"Connections\",\r\n\t\t\t\t\ttickets: \"Tickets\",\r\n\t\t\t\t\tcontacts: \"Contacts\",\r\n\t\t\t\t\tqueues: \"Queues\",\r\n\t\t\t\t\tadministration: \"Administration\",\r\n\t\t\t\t\tusers: \"Users\",\r\n\t\t\t\t\tsettings: \"Settings\",\r\n\t\t\t\t},\r\n\t\t\t\tappBar: {\r\n\t\t\t\t\tuser: {\r\n\t\t\t\t\t\tprofile: \"Profile\",\r\n\t\t\t\t\t\tlogout: \"Logout\",\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tnotifications: {\r\n\t\t\t\tnoTickets: \"No notifications.\",\r\n\t\t\t},\r\n\t\t\tqueues: {\r\n\t\t\t\ttitle: \"Queues\",\r\n\t\t\t\ttable: {\r\n\t\t\t\t\tname: \"Name\",\r\n\t\t\t\t\tcolor: \"Color\",\r\n\t\t\t\t\tgreeting: \"Greeting message\",\r\n\t\t\t\t\tactions: \"Actions\",\r\n\t\t\t\t},\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\tadd: \"Add queue\",\r\n\t\t\t\t},\r\n\t\t\t\tconfirmationModal: {\r\n\t\t\t\t\tdeleteTitle: \"Delete\",\r\n\t\t\t\t\tdeleteMessage:\r\n\t\t\t\t\t\t\"Are you sure? It cannot be reverted! Tickets in this queue will still exist, but will not have any queues assigned.\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tqueueSelect: {\r\n\t\t\t\tinputLabel: \"Queues\",\r\n\t\t\t},\r\n\t\t\tusers: {\r\n\t\t\t\ttitle: \"Users\",\r\n\t\t\t\ttable: {\r\n\t\t\t\t\tname: \"Name\",\r\n\t\t\t\t\temail: \"Email\",\r\n\t\t\t\t\tprofile: \"Profile\",\r\n\t\t\t\t\tactions: \"Actions\",\r\n\t\t\t\t},\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\tadd: \"Add user\",\r\n\t\t\t\t},\r\n\t\t\t\ttoasts: {\r\n\t\t\t\t\tdeleted: \"User deleted sucessfully.\",\r\n\t\t\t\t},\r\n\t\t\t\tconfirmationModal: {\r\n\t\t\t\t\tdeleteTitle: \"Delete\",\r\n\t\t\t\t\tdeleteMessage:\r\n\t\t\t\t\t\t\"All user data will be lost. Users' open tickets will be moved to queue.\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tsettings: {\r\n\t\t\t\tsuccess: \"Settings saved successfully.\",\r\n\t\t\t\ttitle: \"Settings\",\r\n\t\t\t\tsettings: {\r\n\t\t\t\t\tuserCreation: {\r\n\t\t\t\t\t\tname: \"User creation\",\r\n\t\t\t\t\t\toptions: {\r\n\t\t\t\t\t\t\tenabled: \"Enabled\",\r\n\t\t\t\t\t\t\tdisabled: \"Disabled\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tmessagesList: {\r\n\t\t\t\theader: {\r\n\t\t\t\t\tassignedTo: \"Assigned to:\",\r\n\t\t\t\t\tbuttons: {\r\n\t\t\t\t\t\treturn: \"Return\",\r\n\t\t\t\t\t\tresolve: \"Resolve\",\r\n\t\t\t\t\t\treopen: \"Reopen\",\r\n\t\t\t\t\t\taccept: \"Accept\",\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tmessagesInput: {\r\n\t\t\t\tplaceholderOpen: \"Type a message\",\r\n\t\t\t\tplaceholderClosed: \"Reopen or accept this ticket to send a message.\",\r\n\t\t\t\tsignMessage: \"Sign\",\r\n\t\t\t},\r\n\t\t\tcontactDrawer: {\r\n\t\t\t\theader: \"Contact details\",\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\tedit: \"Edit contact\",\r\n\t\t\t\t},\r\n\t\t\t\textraInfo: \"Other information\",\r\n\t\t\t},\r\n\t\t\tticketOptionsMenu: {\r\n\t\t\t\tdelete: \"Delete\",\r\n\t\t\t\ttransfer: \"Transfer\",\r\n\t\t\t\tconfirmationModal: {\r\n\t\t\t\t\ttitle: \"Delete ticket #\",\r\n\t\t\t\t\ttitleFrom: \"from contact \",\r\n\t\t\t\t\tmessage: \"Attention! All ticket's related messages will be lost.\",\r\n\t\t\t\t},\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\tdelete: \"Delete\",\r\n\t\t\t\t\tcancel: \"Cancel\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tconfirmationModal: {\r\n\t\t\t\tbuttons: {\r\n\t\t\t\t\tconfirm: \"Ok\",\r\n\t\t\t\t\tcancel: \"Cancel\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tmessageOptionsMenu: {\r\n\t\t\t\tdelete: \"Delete\",\r\n\t\t\t\treply: \"Reply\",\r\n\t\t\t\tconfirmationModal: {\r\n\t\t\t\t\ttitle: \"Delete message?\",\r\n\t\t\t\t\tmessage: \"This action cannot be reverted.\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tbackendErrors: {\r\n\t\t\t\tERR_NO_OTHER_WHATSAPP:\r\n\t\t\t\t\t\"There must be at lest one default WhatsApp connection.\",\r\n\t\t\t\tERR_NO_DEF_WAPP_FOUND:\r\n\t\t\t\t\t\"No default WhatsApp found. Check connections page.\",\r\n\t\t\t\tERR_WAPP_NOT_INITIALIZED:\r\n\t\t\t\t\t\"This WhatsApp session is not initialized. Check connections page.\",\r\n\t\t\t\tERR_WAPP_CHECK_CONTACT:\r\n\t\t\t\t\t\"Could not check WhatsApp contact. Check connections page.\",\r\n\t\t\t\tERR_WAPP_INVALID_CONTACT: \"This is not a valid whatsapp number.\",\r\n\t\t\t\tERR_WAPP_DOWNLOAD_MEDIA:\r\n\t\t\t\t\t\"Could not download media from WhatsApp. Check connections page.\",\r\n\t\t\t\tERR_INVALID_CREDENTIALS: \"Authentication error. Please try again.\",\r\n\t\t\t\tERR_SENDING_WAPP_MSG:\r\n\t\t\t\t\t\"Error sending WhatsApp message. Check connections page.\",\r\n\t\t\t\tERR_DELETE_WAPP_MSG: \"Couldn't delete message from WhatsApp.\",\r\n\t\t\t\tERR_OTHER_OPEN_TICKET:\r\n\t\t\t\t\t\"There's already an open ticket for this contact.\",\r\n\t\t\t\tERR_SESSION_EXPIRED: \"Session expired. Please login.\",\r\n\t\t\t\tERR_USER_CREATION_DISABLED:\r\n\t\t\t\t\t\"User creation was disabled by administrator.\",\r\n\t\t\t\tERR_NO_PERMISSION: \"You don't have permission to access this resource.\",\r\n\t\t\t\tERR_DUPLICATED_CONTACT: \"A contact with this number already exists.\",\r\n\t\t\t\tERR_NO_SETTING_FOUND: \"No setting found with this ID.\",\r\n\t\t\t\tERR_NO_CONTACT_FOUND: \"No contact found with this ID.\",\r\n\t\t\t\tERR_NO_TICKET_FOUND: \"No ticket found with this ID.\",\r\n\t\t\t\tERR_NO_USER_FOUND: \"No user found with this ID.\",\r\n\t\t\t\tERR_NO_WAPP_FOUND: \"No WhatsApp found with this ID.\",\r\n\t\t\t\tERR_CREATING_MESSAGE: \"Error while creating message on database.\",\r\n\t\t\t\tERR_CREATING_TICKET: \"Error while creating ticket on database.\",\r\n\t\t\t\tERR_FETCH_WAPP_MSG:\r\n\t\t\t\t\t\"Error fetching the message in WhtasApp, maybe it is too old.\",\r\n\t\t\t\tERR_QUEUE_COLOR_ALREADY_EXISTS:\r\n\t\t\t\t\t\"This color is already in use, pick another one.\",\r\n\t\t\t\tERR_WAPP_GREETING_REQUIRED:\r\n\t\t\t\t\t\"Greeting message is required if there is more than one queue.\",\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n};\r\n\r\nexport { messages };\r\n","const messages = {\r\n  es: {\r\n    translations: {\r\n      signup: {\r\n        title: \"Registrarse\",\r\n        toasts: {\r\n          success: \"¡Usuario creado exitosamente! ¡Inicie sesión!\",\r\n          fail: \"Error al crear usuario. Verifique los datos ingresados.\",\r\n        },\r\n        form: {\r\n          name: \"Nombre\",\r\n          email: \"Correo electrónico\",\r\n          password: \"Contraseña\",\r\n        },\r\n        buttons: {\r\n          submit: \"Registrarse\",\r\n          login: \"¿Ya tienes una cuenta? ¡Inicia sesión!\",\r\n        },\r\n      },\r\n      login: {\r\n        title: \"Iniciar sesión\",\r\n        form: {\r\n          email: \"Correo electrónico\",\r\n          password: \"Contraseña\",\r\n        },\r\n        buttons: {\r\n          submit: \"Iniciar sesión\",\r\n          register: \" ¡Crea tu cuenta en solo unos clics!\",\r\n        },\r\n      },\r\n      plans: {\r\n        form: {\r\n          name: \"Nombre\",\r\n          users: \"Usuarios\",\r\n          connections: \"Conexiones\",\r\n          campaigns: \"Campañas\",\r\n          schedules: \"Programaciones\",\r\n          enabled: \"Habilitadas\",\r\n          disabled: \"Deshabilitadas\",\r\n          clear: \"Cancelar\",\r\n          delete: \"Eliminar\",\r\n          save: \"Guardar\",\r\n          yes: \"Sí\",\r\n          no: \"No\",\r\n          money: \"R$\",\r\n        },\r\n      },\r\n      companies: {\r\n        title: \"Registrar Empresa\",\r\n        form: {\r\n          name: \"Nombre de la Empresa\",\r\n          plan: \"Plan\",\r\n          token: \"Token\",\r\n          submit: \"Registrar\",\r\n          success: \"¡Empresa creada exitosamente!\",\r\n        },\r\n      },\r\n      auth: {\r\n        toasts: {\r\n          success: \"¡Inicio de sesión exitoso!\",\r\n        },\r\n        token: \"Token\",\r\n      },\r\n      dashboard: {\r\n        charts: {\r\n          perDay: {\r\n            title: \"Atenciones de hoy: \",\r\n          },\r\n        },\r\n      },\r\n      connections: {\r\n        title: \"Conexiones\",\r\n        toasts: {\r\n          deleted: \"¡Conexión con WhatsApp eliminada exitosamente!\",\r\n        },\r\n        confirmationModal: {\r\n          deleteTitle: \"Eliminar\",\r\n          deleteMessage: \"¿Estás seguro? Esta acción no se puede deshacer.\",\r\n          disconnectTitle: \"Desconectar\",\r\n          disconnectMessage:\r\n            \"¿Estás seguro? Deberás volver a leer el código QR.\",\r\n        },\r\n        buttons: {\r\n          add: \"Agregar WhatsApp\",\r\n          disconnect: \"desconectar\",\r\n          tryAgain: \"Intentar de nuevo\",\r\n          qrcode: \"CÓDIGO QR\",\r\n          newQr: \"Nuevo CÓDIGO QR\",\r\n          connecting: \"Conectando\",\r\n        },\r\n        toolTips: {\r\n          disconnected: {\r\n            title: \"Error al iniciar sesión en WhatsApp\",\r\n            content:\r\n              \"Asegúrate de que tu teléfono esté conectado a internet e inténtalo nuevamente, o solicita un nuevo código QR\",\r\n          },\r\n          qrcode: {\r\n            title: \"Esperando lectura del código QR\",\r\n            content:\r\n              \"Haz clic en el botón 'CÓDIGO QR' y lee el código QR con tu teléfono para iniciar sesión\",\r\n          },\r\n          connected: {\r\n            title: \"¡Conexión establecida!\",\r\n          },\r\n          timeout: {\r\n            title: \"Se perdió la conexión con el teléfono\",\r\n            content:\r\n              \"Asegúrate de que tu teléfono esté conectado a internet y WhatsApp esté abierto, o haz clic en el botón 'Desconectar' para obtener un nuevo código QR\",\r\n          },\r\n        },\r\n\t\ttable: {\r\n  name: \"Nombre\",\r\n  status: \"Estado\",\r\n  lastUpdate: \"Última actualización\",\r\n  default: \"Predeterminado\",\r\n  actions: \"Acciones\",\r\n  session: \"Sesión\",\r\n},\r\nwhatsappModal: {\r\n  title: {\r\n    add: \"Agregar WhatsApp\",\r\n    edit: \"Editar WhatsApp\",\r\n  },\r\n  tabs: {\r\n    general: \"General\",\r\n    messages: \"Mensajes\",\r\n    assessments: \"Evaluaciones\",\r\n    integrations: \"Integraciones\",\r\n    schedules: \"Horario de expediente\",\r\n  },\r\n  form: {\r\n    name: \"Nombre\",\r\n    default: \"Predeterminado\",\r\n    sendIdQueue: \"Fila\",\r\n    timeSendQueue: \"Redireccionar a cola en X minutos\",\r\n    queueRedirection: \"Redirección de cola\",\r\n    outOfHoursMessage: \"Mensaje de fuera de expediente\",\r\n    queueRedirectionDesc: \"Seleccione una fila para redirigir los contactos que no tienen cola\",\r\n    prompt: \"Prompt\",\r\n    expiresTicket: \"Cerrar chats abiertos después de X minutos\",\r\n    expiresInactiveMessage: \"Mensaje de cierre por inactividad\",\r\n    greetingMessage: \"Mensaje de saludo\",\r\n    complationMessage: \"Mensaje de conclusión\",\r\n    sendIdQueue: \"Fila\",\r\n  },\r\n  buttons: {\r\n    okAdd: \"Agregar\",\r\n    okEdit: \"Guardar\",\r\n    cancel: \"Cancelar\",\r\n  },\r\n  success: \"WhatsApp guardado con éxito.\",\r\n},\r\nqrCode: {\r\n  message: \"Lea el código QR para iniciar sesión\",\r\n},\r\ncontacts: {\r\n  title: \"Contactos\",\r\n  toasts: {\r\n    deleted: \"Contacto eliminado con éxito!\",\r\n    deletedAll: \"Todos los contactos eliminados con éxito!\",\r\n  },\r\n  searchPlaceholder: \"Buscar...\",\r\n  confirmationModal: {\r\n    deleteTitle: \"Eliminar \",\r\n    deleteAllTitle: \"Eliminar Todos\",\r\n    importTitle: \"Importar contactos\",\r\n    deleteMessage: \"¿Seguro que desea eliminar este contacto? Se perderán todos los tickets relacionados.\",\r\n    deleteAllMessage: \"¿Seguro que desea eliminar todos los contactos? Se perderán todos los tickets relacionados.\",\r\n    importMessage: \"¿Desea importar todos los contactos del teléfono?\",\r\n  },\r\n  buttons: {\r\n    import: \"Importar Contactos\",\r\n    add: \"Agregar Contacto\",\r\n    export: \"Exportar Contactos\",\r\n    delete: \"Eliminar Todos Contactos\",\r\n  },\r\n  table: {\r\n    name: \"Nombre\",\r\n    whatsapp: \"WhatsApp\",\r\n    email: \"Correo electrónico\",\r\n    actions: \"Acciones\",\r\n  },\r\n},\r\nqueueIntegrationModal: {\r\n  title: {\r\n    add: \"Agregar proyecto\",\r\n    edit: \"Editar proyecto\",\r\n  },\r\n  form: {\r\n    id: \"ID\",\r\n    type: \"Tipo\",\r\n    name: \"Nombre\",\r\n    projectName: \"Nombre del Proyecto\",\r\n    language: \"Lenguaje\",\r\n    jsonContent: \"JsonContent\",\r\n    urlN8N: \"URL\",\r\n    typebotSlug: \"Typebot - Slug\",\r\n    typebotExpires: \"Tiempo en minutos para expirar una conversación\",\r\n    typebotKeywordFinish: \"Palabra para finalizar el ticket\",\r\n    typebotKeywordRestart: \"Palabra para reiniciar el flujo\",\r\n    typebotRestartMessage: \"Mensaje al reiniciar la conversación\",\r\n    typebotUnknownMessage: \"Mensaje de opción inválida\",\r\n    typebotDelayMessage: \"Intervalo (ms) entre mensajes\",\r\n  },\r\n  buttons: {\r\n    okAdd: \"Agregar\",\r\n    okEdit: \"Guardar\",\r\n    cancel: \"Cancelar\",\r\n    test: \"Probar Bot\",\r\n  },\r\n  messages: {\r\n    testSuccess: \"Integración probada con éxito!\",\r\n    addSuccess: \"Integración agregada con éxito.\",\r\n    editSuccess: \"Integración editada con éxito.\",\r\n  },\r\n},\r\nsideMenu: {\r\n  name: \"Menú Lateral Inicial\",\r\n  note: \"Si está habilitado, el menú lateral se iniciará cerrado\",\r\n  options: {\r\n    enabled: \"Abierto\",\r\n    disabled: \"Cerrado\",\r\n  },\r\n},\r\npromptModal: {\r\n  form: {\r\n    name: \"Nombre\",\r\n    prompt: \"Prompt\",\r\n    voice: \"Voz\",\r\n    max_tokens: \"Máximo de Tokens en la respuesta\",\r\n    temperature: \"Temperatura\",\r\n    apikey: \"API Key\",\r\n    max_messages: \"Máximo de mensajes en el Historial\",\r\n    voiceKey: \"Clave de la API de Voz\",\r\n    voiceRegion: \"Región de Voz\",\r\n  },\r\n  success: \"Prompt guardado con éxito!\",\r\n  title: {\r\n    add: \"Agregar Prompt\",\r\n    edit: \"Editar Prompt\",\r\n  },\r\n  buttons: {\r\n    okAdd: \"Agregar\",\r\n    okEdit: \"Guardar\",\r\n    cancel: \"Cancelar\",\r\n  },\r\n},\r\nprompts: {\r\n  title: \"Prompts\",\r\n  table: {\r\n    name: \"Nombre\",\r\n    queue: \"Sector/Cola\",\r\n    max_tokens: \"Máximo Tokens Respuesta\",\r\n    actions: \"Acciones\",\r\n  },\r\n  confirmationModal: {\r\n    deleteTitle: \"Eliminar\",\r\n    deleteMessage: \"¿Está seguro? ¡Esta acción no se puede deshacer!\",\r\n  },\r\n  buttons: {\r\n    add: \"Agregar Prompt\",\r\n  },\r\n},\r\ncontactModal: {\r\n  title: {\r\n    add: \"Agregar contacto\",\r\n    edit: \"Editar contacto\",\r\n  },\r\n  form: {\r\n    mainInfo: \"Datos del contacto\",\r\n    extraInfo: \"Información adicional\",\r\n    name: \"Nombre\",\r\n    number: \"Número de Whatsapp\",\r\n    email: \"Email\",\r\n    extraName: \"Nombre del campo\",\r\n    extraValue: \"Valor\",\r\n    whatsapp: \"Conexión Origen: \"\r\n  },\r\n  buttons: {\r\n    addExtraInfo: \"Agregar información\",\r\n    okAdd: \"Agregar\",\r\n    okEdit: \"Guardar\",\r\n    cancel: \"Cancelar\",\r\n  },\r\n  success: \"Contacto guardado con éxito.\",\r\n},\r\nqueueModal: {\r\n  title: {\r\n    add: \"Agregar cola\",\r\n    edit: \"Editar cola\",\r\n  },\r\n  form: {\r\n    name: \"Nombre\",\r\n    color: \"Color\",\r\n    greetingMessage: \"Mensaje de saludo\",\r\n    complationMessage: \"Mensaje de conclusión\",\r\n    outOfHoursMessage: \"Mensaje de fuera de horario\",\r\n    ratingMessage: \"Mensaje de evaluación\",\r\n    token: \"Token\",\r\n    orderQueue: \"Orden de la cola (Bot)\",\r\n    integrationId: \"Integración\",\r\n  },\r\n  buttons: {\r\n    okAdd: \"Agregar\",\r\n    okEdit: \"Guardar\",\r\n    cancel: \"Cancelar\",\r\n  },\r\n},\r\nuserModal: {\r\n  title: {\r\n    add: \"Agregar usuario\",\r\n    edit: \"Editar usuario\",\r\n  },\r\n  form: {\r\n    name: \"Nombre\",\r\n    email: \"Email\",\r\n    password: \"Contraseña\",\r\n    profile: \"Perfil\",\r\n    whatsapp: \"Conexión Predeterminada\",\r\n\r\n    allTicket: \"Ticket Sin Cola [Invisible]\",\r\n    allTicketEnabled: \"Habilitado\",\r\n    allTicketDesabled: \"Deshabilitado\",\r\n  },\r\n  buttons: {\r\n    okAdd: \"Agregar\",\r\n    okEdit: \"Guardar\",\r\n    cancel: \"Cancelar\",\r\n  },\r\n  success: \"Usuario guardado con éxito.\",\r\n},\r\nscheduleModal: {\r\n  title: {\r\n    add: \"Nuevo Agendamiento\",\r\n    edit: \"Editar Agendamiento\",\r\n  },\r\n  form: {\r\n    body: \"Mensaje\",\r\n    contact: \"Contacto\",\r\n    sendAt: \"Fecha de Agendamiento\",\r\n    sentAt: \"Fecha de Envío\",\r\n  },\r\n  buttons: {\r\n    okAdd: \"Agregar\",\r\n    okEdit: \"Guardar\",\r\n    cancel: \"Cancelar\",\r\n  },\r\n  success: \"Agendamiento guardado con éxito.\",\r\n},\r\ntagModal: {\r\n  title: {\r\n    add: \"Nueva Etiqueta\",\r\n    edit: \"Editar Etiqueta\",\r\n  },\r\n  form: {\r\n    name: \"Nombre\",\r\n    color: \"Color\",\r\n  },\r\n  buttons: {\r\n    okAdd: \"Agregar\",\r\n    okEdit: \"Guardar\",\r\n    cancel: \"Cancelar\",\r\n  },\r\n  success: \"Etiqueta guardada con éxito.\",\r\n},\r\nchat: {\r\n  noTicketMessage: \"Seleccione un ticket para comenzar a conversar.\",\r\n},\r\nuploads: {\r\n  titles: {\r\n    titleUploadMsgDragDrop: \"ARRASTRE Y SUELTE ARCHIVOS EN EL CAMPO ABAJO\",\r\n    titleFileList: \"Lista de archivo(s)\"\r\n  },\r\n},\r\nticketsManager: {\r\n  buttons: {\r\n    newTicket: \"Nuevo\",\r\n  },\r\n},\r\nticketsQueueSelect: {\r\n  placeholder: \"Colas\",\r\n},\r\ntickets: {\r\n  toasts: {\r\n    deleted: \"La atención en la que estaba ha sido eliminada.\",\r\n  },\r\n  notification: {\r\n    message: \"Mensaje de\",\r\n  },\r\n  tabs: {\r\n    open: { title: \"Abiertas\" },\r\n    closed: { title: \"Resueltos\" },\r\n    search: { title: \"Búsqueda\" },\r\n  },\r\n  search: {\r\n    placeholder: \"Buscar atención y mensajes\",\r\n  },\r\n  buttons: {\r\n    showAll: \"Todos\",\r\n  },\r\n},\r\ntransferTicketModal: {\r\n    title: \"Transferir Ticket\",\r\n    fieldLabel: \"Escribe para buscar usuarios\",\r\n    fieldQueueLabel: \"Transferir a cola\",\r\n    fieldQueuePlaceholder: \"Seleccione una cola\",\r\n    noOptions: \"No se encontraron usuarios con ese nombre\",\r\n    buttons: {\r\n      ok: \"Transferir\",\r\n      cancel: \"Cancelar\",\r\n    },\r\n  },\r\n  ticketsList: {\r\n    pendingHeader: \"Pendiente\",\r\n    assignedHeader: \"Atendiendo\",\r\n    noTicketsTitle: \"¡Nada aquí!\",\r\n    noTicketsMessage:\r\n      \"No se encontraron tickets con este estado o término de búsqueda\",\r\n    buttons: {\r\n      accept: \"Aceptar\",\r\n      closed: \"Finalizar\",\r\n      reopen: \"Reabrir\"\r\n    },\r\n  },\r\n  newTicketModal: {\r\n    title: \"Crear Ticket\",\r\n    fieldLabel: \"Escribe para buscar el contacto\",\r\n    add: \"Agregar\",\r\n    buttons: {\r\n      ok: \"Guardar\",\r\n      cancel: \"Cancelar\",\r\n    },\r\n  },\r\n  mainDrawer: {\r\n    listItems: {\r\n      dashboard: \"Tablero\",\r\n      connections: \"Conexiones\",\r\n      tickets: \"Tickets\",\r\n      quickMessages: \"Respuestas Rápidas\",\r\n      contacts: \"Contactos\",\r\n      queues: \"Colas y Chatbot\",\r\n      tags: \"Etiquetas\",\r\n      administration: \"Administración\",\r\n      users: \"Usuarios\",\r\n      settings: \"Configuraciones\",\r\n      helps: \"Ayuda\",\r\n      messagesAPI: \"API\",\r\n      schedules: \"Agendamientos\",\r\n      campaigns: \"Campañas\",\r\n      annoucements: \"Anuncios\",\r\n      chats: \"Chat Interno\",\r\n      financeiro: \"Financiero\",\r\n      files: \"Lista de archivos\",\r\n      prompts: \"Open.Ai\",\r\n      queueIntegration: \"Integraciones\",\r\n    },\r\n    appBar: {\r\n      notRegister:\"Sin notificaciones\",\r\n      user: {\r\n        profile: \"Perfil\",\r\n        logout: \"Salir\",\r\n      },\r\n    },\r\n  },\r\n  queueIntegration: {\r\n    title: \"Integraciones\",\r\n    table: {\r\n      id: \"ID\",\r\n      type: \"Tipo\",\r\n      name: \"Nombre\",\r\n      projectName: \"Nombre del Proyecto\",\r\n      language: \"Idioma\",\r\n      lastUpdate: \"Última actualización\",\r\n      actions: \"Acciones\",\r\n    },\r\n    buttons: {\r\n      add: \"Agregar Proyecto\",\r\n    },\r\n    searchPlaceholder: \"Buscar...\",\r\n    confirmationModal: {\r\n      deleteTitle: \"Eliminar\",\r\n      deleteMessage:\r\n        \"¿Estás seguro? ¡Esta acción no se puede deshacer! y se eliminará de las colas y conexiones vinculadas\",\r\n    },\r\n  },\r\n  files: {\r\n    title: \"Lista de archivos\",\r\n    table: {\r\n      name: \"Nombre\",\r\n      contacts: \"Contactos\",\r\n      actions: \"Acción\",\r\n    },\r\n    toasts: {\r\n      deleted: \"¡Lista eliminada correctamente!\",\r\n      deletedAll: \"¡Todas las listas se han eliminado correctamente!\",\r\n    },\r\n    buttons: {\r\n      add: \"Agregar\",\r\n      deleteAll: \"Eliminar Todos\",\r\n    },\r\n    confirmationModal: {\r\n      deleteTitle: \"Eliminar\",\r\n      deleteAllTitle: \"Eliminar Todos\",\r\n      deleteMessage: \"¿Estás seguro de que deseas eliminar esta lista?\",\r\n      deleteAllMessage: \"¿Estás seguro de que deseas eliminar todas las listas?\",\r\n    },\r\n  },\r\n  messagesAPI: {\r\n    title: \"API\",\r\n    textMessage: {\r\n      number: \"Número\",\r\n      body: \"Mensaje\",\r\n      token: \"Token registrado\",\r\n    },\r\n    mediaMessage: {\r\n      number: \"Número\",\r\n      body: \"Nombre del archivo\",\r\n      media: \"Archivo\",\r\n      token: \"Token registrado\",\r\n    },\r\n  },\r\n  notifications: {\r\n    noTickets: \"No hay notificaciones.\",\r\n  },\r\n  quickMessages: {\r\n    title: \"Respuestas Rápidas\",\r\n    searchPlaceholder: \"Buscar...\",\r\n    noAttachment: \"Sin adjunto\",\r\n    confirmationModal: {\r\n      deleteTitle: \"Eliminación\",\r\n      deleteMessage: \"¡Esta acción es irreversible! ¿Quieres continuar?\",\r\n    },\r\n    buttons: {\r\n      add: \"Agregar\",\r\n      attach: \"Adjuntar Archivo\",\r\n      cancel: \"Cancelar\",\r\n      edit: \"Editar\",\r\n    },\r\n    toasts: {\r\n      success: \"¡Atajo agregado correctamente!\",\r\n      deleted: \"¡Atajo eliminado correctamente!\",\r\n    },\r\n    dialog: {\r\n      title: \"Mensaje Rápido\",\r\n      shortcode: \"Atajo\",\r\n      message: \"Respuesta\",\r\n      save: \"Guardar\",\r\n      cancel: \"Cancelar\",\r\n      geral: \"Permitir editar\",\r\n      add: \"Agregar\",\r\n      edit: \"Editar\",\r\n      visao: \"Permitir vista\",\r\n    },\r\n    table: {\r\n      shortcode: \"Atajo\",\r\n      message: \"Mensaje\",\r\n      actions: \"Acciones\",\r\n      mediaName: \"Nombre del Archivo\",\r\n      status: \"Estado\",\r\n    },\r\n  },\r\n  messageVariablesPicker: {\r\n    label: \"Variables disponibles\",\r\n    vars: {\r\n      contactFirstName: \"Primer Nombre\",\r\n      contactName: \"Nombre\",\r\n      greeting: \"Saludo\",\r\n      protocolNumber: \"Protocolo\",\r\n      date: \"Fecha\",\r\n      hour: \"Hora\",\r\n    },\r\n  },\r\n  contactLists: {\r\n    title: \"Listas de Contactos\",\r\n    table: {\r\n      name: \"Nombre\",\r\n      contacts: \"Contactos\",\r\n      actions: \"Acciones\",\r\n    },\r\n    buttons: {\r\n      add: \"Nueva Lista\",\r\n    },\r\n    dialog: {\r\n      name: \"Nombre\",\r\n      company: \"Empresa\",\r\n      okEdit: \"Editar\",\r\n      okAdd: \"Agregar\",\r\n      add: \"Agregar\",\r\n      edit: \"Editar\",\r\n      cancel: \"Cancelar\",\r\n    },\r\n    confirmationModal: {\r\n      deleteTitle: \"Eliminar\",\r\n      deleteMessage: \"Esta acción no se puede deshacer.\",\r\n    },\r\n    toasts: {\r\n      deleted: \"Registro eliminado\",\r\n    },\r\n  },\r\n  contactListItems: {\r\n    title: \"Contactos\",\r\n    searchPlaceholder: \"Búsqueda\",\r\n    buttons: {\r\n      add: \"Nuevo\",\r\n      lists: \"Listas\",\r\n      import: \"Importar\",\r\n    },\r\n    dialog: {\r\n      name: \"Nombre\",\r\n      number: \"Número\",\r\n      whatsapp: \"Whatsapp\",\r\n      email: \"Correo electrónico\",\r\n      okEdit: \"Editar\",\r\n      okAdd: \"Agregar\",\r\n      add: \"Agregar\",\r\n      edit: \"Editar\",\r\n      cancel: \"Cancelar\",\r\n    },\r\n    table: {\r\n      name: \"Nombre\",\r\n      number: \"Número\",\r\n      whatsapp: \"Whatsapp\",\r\n      email: \"Correo electrónico\",\r\n      actions: \"Acciones\",\r\n    },\r\n    confirmationModal: {\r\n      deleteTitle: \"Eliminar\",\r\n      deleteMessage: \"Esta acción no se puede deshacer.\",\r\n      importMessage: \"¿Desea importar los contactos de esta hoja de cálculo?\",\r\n      importTitlte: \"Importar\",\r\n    },\r\n    toasts: {\r\n      deleted: \"Registro eliminado\",\r\n    },\r\n  },\r\n  campaigns: {\r\n    title: \"Campañas\",\r\n    searchPlaceholder: \"Búsqueda\",\r\n    buttons: {\r\n      add: \"Nueva Campaña\",\r\n      contactLists: \"Listas de Contactos\",\r\n    },\r\n    table: {\r\n      name: \"Nombre\",\r\n      whatsapp: \"Conexión\",\r\n      contactList: \"Lista de Contactos\",\r\n      status: \"Estado\",\r\n      scheduledAt: \"Programada\",\r\n      completedAt: \"Completada\",\r\n      confirmation: \"Confirmación\",\r\n      actions: \"Acciones\",\r\n    },\r\n    dialog: {\r\n      new: \"Nueva Campaña\",\r\n      update: \"Editar Campaña\",\r\n      readonly: \"Solo Lectura\",\r\n      form: {\r\n        name: \"Nombre\",\r\n        message1: \"Mensaje 1\",\r\n        message2: \"Mensaje 2\",\r\n        message3: \"Mensaje 3\",\r\n        message4: \"Mensaje 4\",\r\n        message5: \"Mensaje 5\",\r\n        confirmationMessage1: \"Mensaje de Confirmación 1\",\r\n        confirmationMessage2: \"Mensaje de Confirmación 2\",\r\n        confirmationMessage3: \"Mensaje de Confirmación 3\",\r\n        confirmationMessage4: \"Mensaje de Confirmación 4\",\r\n        confirmationMessage5: \"Mensaje de Confirmación 5\",\r\n        messagePlaceholder: \"Contenido del mensaje\",\r\n        whatsapp: \"Conexión\",\r\n        status: \"Estado\",\r\n        scheduledAt: \"Programada\",\r\n        confirmation: \"Confirmación\",\r\n        contactList: \"Lista de Contacto\",\r\n        tagList: \"Lista de Etiquetas\",\r\n        fileList: \"Lista de Archivos\"\r\n      },\r\n      buttons: {\r\n        add: \"Agregar\",\r\n        edit: \"Actualizar\",\r\n        okadd: \"Ok\",\r\n        cancel: \"Cancelar\",\r\n        restart: \"Reiniciar Campañas\",\r\n        close: \"Cerrar\",\r\n        attach: \"Adjuntar Archivo\",\r\n      },\r\n    },\r\n    confirmationModal: {\r\n      deleteTitle: \"Eliminar\",\r\n      deleteMessage: \"Esta acción no se puede deshacer.\",\r\n    },\r\n    toasts: {\r\n      success: \"Operación realizada correctamente\",\r\n      cancel: \"Campaña cancelada\",\r\n      restart: \"Campañas reiniciadas\",\r\n      deleted: \"Registro eliminado\",\r\n    },\r\n  },\r\n  announcements: {\r\n    active: 'Activo',\r\n    inactive: 'Inactivo',\r\n    title: \"Informativos\",\r\n    searchPlaceholder: \"Búsqueda\",\r\n    buttons: {\r\n      add: \"Nuevo Informativo\",\r\n      contactLists: \"Listas de Informativos\",\r\n    },\r\n    table: {\r\n      priority: \"Prioridad\",\r\n      title: \"Título\",\r\n      text: \"Texto\",\r\n      mediaName: \"Archivo\",\r\n      status: \"Estado\",\r\n      actions: \"Acciones\",\r\n    },\r\n    dialog: {\r\n      edit: \"Editar Informativo\",\r\n      add: \"Nuevo Informativo\",\r\n      update: \"Editar Informativo\",\r\n      readonly: \"Solo Lectura\",\r\n      form: {\r\n        priority: \"Prioridad\",\r\n        title: \"Título\",\r\n        text: \"Texto\",\r\n        mediaPath: \"Archivo\",\r\n        status: \"Estado\",\r\n      },\r\n      buttons: {\r\n        add: \"Agregar\",\r\n        edit: \"Actualizar\",\r\n        okadd: \"Ok\",\r\n        cancel: \"Cancelar\",\r\n        close: \"Cerrar\",\r\n        attach: \"Adjuntar Archivo\",\r\n      },\r\n    },\r\n    confirmationModal: {\r\n      deleteTitle: \"Eliminar\",\r\n      deleteMessage: \"Esta acción no se puede deshacer.\",\r\n    },\r\n    toasts: {\r\n      success: \"Operación realizada correctamente\",\r\n      deleted: \"Registro eliminado\",\r\n    },\r\n  },\r\n  campaignsConfig: {\r\n    title: \"Configuraciones de Campañas\",\r\n  },\r\n  queues: {\r\n    title: \"Colas y Chatbot\",\r\n    table: {\r\n      id:\"ID\",\r\n      name: \"Nombre\",\r\n      color: \"Color\",\r\n      greeting: \"Mensaje de bienvenida\",\r\n      actions: \"Acciones\",\r\n      orderQueue: \"Orden de la cola (bot)\",\r\n    },\r\n    buttons: {\r\n      add: \"Agregar cola\",\r\n    },\r\n    confirmationModal: {\r\n      deleteTitle: \"Eliminar\",\r\n      deleteMessage:\r\n        \"¿Estás seguro? ¡Esta acción no se puede deshacer! Los tickets de esta cola seguirán existiendo pero ya no tendrán ninguna cola asignada.\",\r\n    },\r\n  },\r\n  queueSelect: {\r\n    inputLabel: \"Colas\",\r\n  },\r\n  users: {\r\n    title: \"Usuarios\",\r\n    table: {\r\n\t  id: \"ID\",\r\n      name: \"Nombre\",\r\n      email: \"Email\",\r\n      profile: \"Perfil\",\r\n      actions: \"Acciones\",\r\n    },\r\n    buttons: {\r\n      add: \"Agregar usuario\",\r\n    },\r\n    toasts: {\r\n      deleted: \"Usuario eliminado correctamente.\",\r\n    },\r\n    confirmationModal: {\r\n      deleteTitle: \"Eliminar\",\r\n      deleteMessage:\r\n        \"Todos los datos del usuario se perderán. Los tickets abiertos de este usuario se moverán a la cola.\",\r\n    },\r\n  },\r\n  helps: {\r\n    title: \"Centro de Ayuda\",\r\n  },\r\n  schedules: {\r\n    title: \"Agendamientos\",\r\n    confirmationModal: {\r\n      deleteTitle: \"¿Estás seguro que quieres eliminar este Agendamiento?\",\r\n      deleteMessage: \"Esta acción no se puede deshacer.\",\r\n    },\r\n    table: {\r\n      contact: \"Contacto\",\r\n      body: \"Mensaje\",\r\n      sendAt: \"Fecha de Agendamiento\",\r\n      sentAt: \"Fecha de Envío\",\r\n      status: \"Estado\",\r\n      actions: \"Acciones\",\r\n    },\r\n    buttons: {\r\n      add: \"Nuevo Agendamiento\",\r\n    },\r\n    toasts: {\r\n      deleted: \"Agendamiento eliminado correctamente.\",\r\n    },\r\n  },\r\n  tags: {\r\n    title: \"Etiquetas\",\r\n    confirmationModal: {\r\n      deleteTitle: \"¿Estás seguro que quieres eliminar esta Etiqueta?\",\r\n      deleteMessage: \"Esta acción no se puede deshacer.\",\r\n\t  deleteAllMessage: \"¿Estás seguro que quieres eliminar todas las Etiquetas?\",\r\n\t  deleteAllTitle: \"Eliminar Todas\",\r\n    },\r\n    table: {\r\n      name: \"Nombre\",\r\n      color: \"Color\",\r\n      tickets: \"Tickets Etiquetados\",\r\n      actions: \"Acciones\",\r\n    },\r\n    buttons: {\r\n      add: \"Nueva Etiqueta\",\r\n\t  deleteAll: \"Eliminar Todas\",\r\n    },\r\n    toasts: {\r\n\t  deletedAll: \"¡Todas las Etiquetas se han eliminado correctamente!\",\r\n      deleted: \"Etiqueta eliminada correctamente.\",\r\n    },\r\n  },\r\n  settings: {\r\n    success: \"Configuraciones guardadas correctamente.\",\r\n    title: \"Configuraciones\",\r\n    settings: {\r\n      userCreation: {\r\n        name: \"Creación de usuario\",\r\n        options: {\r\n          enabled: \"Habilitado\",\r\n          disabled: \"Deshabilitado\",\r\n        },\r\n      },\r\n    },\r\n  },\r\n  messagesList: {\r\n    header: {\r\n      assignedTo: \"Asignado a:\",\r\n      buttons: {\r\n        return: \"Volver\",\r\n        resolve: \"Resolver\",\r\n        reopen: \"Reabrir\",\r\n        accept: \"Aceptar\",\r\n      },\r\n    },\r\n  },\r\n  messagesInput: {\r\n    placeholderOpen: \"Escribe un mensaje\",\r\n    placeholderClosed:\r\n      \"Reabra o acepte este ticket para enviar un mensaje.\",\r\n    signMessage: \"Firmar\",\r\n  },\r\n  contactDrawer: {\r\n    header: \"Datos del contacto\",\r\n    buttons: {\r\n      edit: \"Editar contacto\",\r\n    },\r\n    extraInfo: \"Información adicional\",\r\n  },\r\n  fileModal: {\r\n    title: {\r\n      add: \"Agregar lista de archivos\",\r\n      edit: \"Editar lista de archivos\",\r\n    },\r\n    buttons: {\r\n      okAdd: \"Guardar\",\r\n      okEdit: \"Editar\",\r\n      cancel: \"Cancelar\",\r\n      fileOptions: \"Agregar archivo\",\r\n    },\r\n    form: {\r\n      name: \"Nombre de la lista de archivos\",\r\n      message: \"Detalles de la lista\",\r\n      fileOptions: \"Lista de archivos\",\r\n      extraName: \"Mensaje para enviar con archivo\",\r\n      extraValue: \"Valor de la opción\",\r\n    },\r\n    success: \"Lista de archivos guardada correctamente!\",\r\n  },\r\n  ticketOptionsMenu: {\r\n    schedule: \"Programación\",\r\n    delete: \"Eliminar\",\r\n    transfer: \"Transferir\",\r\n    registerAppointment: \"Observaciones del Contacto\",\r\n    appointmentsModal: {\r\n      title: \"Observaciones del Contacto\",\r\n      textarea: \"Observación\",\r\n      placeholder: \"Inserta aquí la información que deseas registrar\",\r\n    },\r\n    confirmationModal: {\r\n      title: \"Eliminar el ticket\",\r\n\t  titleFrom: \"del contacto \",\r\n      message:\r\n        \"¡Atención! Todos los mensajes relacionados con el ticket se perderán.\",\r\n    },\r\n    buttons: {\r\n      delete: \"Eliminar\",\r\n      cancel: \"Cancelar\",\r\n    },\r\n  },\r\n  confirmationModal: {\r\n    buttons: {\r\n      confirm: \"Ok\",\r\n      cancel: \"Cancelar\",\r\n    },\r\n  },\r\n  messageOptionsMenu: {\r\n    delete: \"Eliminar\",\r\n    reply: \"Responder\",\r\n    confirmationModal: {\r\n      title: \"¿Eliminar mensaje?\",\r\n      message: \"Esta acción no se puede deshacer.\",\r\n    },\r\n  },\r\n  backendErrors: {\r\n    ERR_NO_OTHER_WHATSAPP: \"Debe haber al menos un WhatsApp predeterminado.\",\r\n    ERR_NO_DEF_WAPP_FOUND:\r\n      \"No se encontró ningún WhatsApp predeterminado. Comprueba la página de conexiones.\",\r\n    ERR_WAPP_NOT_INITIALIZED:\r\n      \"Esta sesión de WhatsApp no se ha inicializado. Comprueba la página de conexiones.\",\r\n    ERR_WAPP_CHECK_CONTACT:\r\n      \"No se pudo verificar el contacto de WhatsApp. Comprueba la página de conexiones\",\r\n    ERR_WAPP_INVALID_CONTACT: \"Este no es un número de WhatsApp válido.\",\r\n    ERR_WAPP_DOWNLOAD_MEDIA:\r\n      \"No se pudo descargar medios de WhatsApp. Comprueba la página de conexiones.\",\r\n    ERR_INVALID_CREDENTIALS:\r\n      \"Error de autenticación. Por favor, inténtalo de nuevo.\",\r\n    ERR_SENDING_WAPP_MSG:\r\n      \"Error al enviar mensaje de WhatsApp. Comprueba la página de conexiones.\",\r\n    ERR_DELETE_WAPP_MSG: \"No se pudo eliminar el mensaje de WhatsApp.\",\r\n    ERR_OTHER_OPEN_TICKET: \"Ya hay un ticket abierto para este contacto.\",\r\n    ERR_SESSION_EXPIRED: \"Sesión expirada. Por favor, inicia sesión.\",\r\n    ERR_USER_CREATION_DISABLED:\r\n      \"La creación de usuarios ha sido deshabilitada por el administrador.\",\r\n    ERR_NO_PERMISSION: \"No tienes permiso para acceder a este recurso.\",\r\n    ERR_DUPLICATED_CONTACT: \"Ya existe un contacto con este número.\",\r\n    ERR_NO_SETTING_FOUND: \"No se encontró ninguna configuración con esta ID.\",\r\n    ERR_NO_CONTACT_FOUND: \"No se encontró ningún contacto con esta ID.\",\r\n    ERR_NO_TICKET_FOUND: \"No se encontró ningún ticket con esta ID.\",\r\n    ERR_NO_USER_FOUND: \"No se encontró ningún usuario con esta ID.\",\r\n    ERR_NO_WAPP_FOUND: \"No se encontró ningún WhatsApp con esta ID.\",\r\n    ERR_CREATING_MESSAGE: \"Error al crear mensaje en la base de datos.\",\r\n    ERR_CREATING_TICKET: \"Error al crear ticket en la base de datos.\",\r\n    ERR_FETCH_WAPP_MSG:\r\n      \"Error al obtener mensaje de WhatsApp, puede que sea muy antiguo.\",\r\n    ERR_QUEUE_COLOR_ALREADY_EXISTS:\r\n      \"Este color ya está en uso, elige otro.\",\r\n    ERR_WAPP_GREETING_REQUIRED:\r\n      \"El saludo es obligatorio cuando hay más de una cola.\",\r\n      },\r\n    },\r\n  },\r\n },\r\n};\r\n\r\nexport { messages };\r\n","import i18n from \"i18next\";\r\nimport LanguageDetector from \"i18next-browser-languagedetector\";\r\n\r\nimport { messages } from \"./languages\";\r\n\r\ni18n.use(LanguageDetector).init({\r\n\tdebug: false,\r\n\tdefaultNS: [\"translations\"],\r\n\tfallbackLng: \"pt\",\r\n\tns: [\"translations\"],\r\n\tresources: messages,\r\n});\r\n\r\nexport { i18n };\r\n","import { toast } from \"react-toastify\";\r\nimport { i18n } from \"../translate/i18n\";\r\nimport { isString } from 'lodash';\r\n\r\nconst toastError = err => {\r\n    const errorMsg = err.response?.data?.error;\r\n\tif (errorMsg) {\r\n\t\tif (i18n.exists(`backendErrors.${errorMsg}`)) {\r\n\t\t\ttoast.error(i18n.t(`backendErrors.${errorMsg}`), {\r\n\t\t\t\ttoastId: errorMsg,\r\n\t\t\t\tautoClose: 2000,\r\n\t\t\t\thideProgressBar: false,\r\n\t\t\t\tcloseOnClick: true,\r\n\t\t\t\tpauseOnHover: false,\r\n\t\t\t\tdraggable: true,\r\n\t\t\t\tprogress: undefined,\r\n\t\t\t\ttheme: \"light\",\r\n\t\t\t});\r\n\t\t\treturn\r\n\t\t} else {\r\n\t\t\ttoast.error(errorMsg, {\r\n\t\t\t\ttoastId: errorMsg,\r\n\t\t\t\tautoClose: 2000,\r\n\t\t\t\thideProgressBar: false,\r\n\t\t\t\tcloseOnClick: true,\r\n\t\t\t\tpauseOnHover: false,\r\n\t\t\t\tdraggable: true,\r\n\t\t\t\tprogress: undefined,\r\n\t\t\t\ttheme: \"light\",\r\n\t\t\t});\r\n\t\t\treturn\r\n\t\t}\r\n\t} if (isString(err)) {\r\n\t\ttoast.error(err);\r\n\t\treturn\r\n\t} else {\r\n\t\ttoast.error(\"An error occurred!\");\r\n\t\treturn\r\n\t}\r\n};\r\n\r\nexport default toastError;\r\n","import axios from \"axios\";\r\n\r\nconst api = axios.create({\r\n\tbaseURL: process.env.REACT_APP_BACKEND_URL,\r\n\twithCredentials: true,\r\n});\r\n\r\nexport const openApi = axios.create({\r\n\tbaseURL: process.env.REACT_APP_BACKEND_URL\r\n});\r\n\r\nexport default api;\r\n","import { useState, useEffect, useReducer, useContext } from \"react\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nimport api from \"../../services/api\";\r\nimport { SocketContext } from \"../../context/Socket/SocketContext\";\r\n\r\nconst reducer = (state, action) => {\r\n  if (action.type === \"LOAD_WHATSAPPS\") {\r\n    const whatsApps = action.payload;\r\n\r\n    return [...whatsApps];\r\n  }\r\n\r\n  if (action.type === \"UPDATE_WHATSAPPS\") {\r\n    const whatsApp = action.payload;\r\n    const whatsAppIndex = state.findIndex((s) => s.id === whatsApp.id);\r\n\r\n    if (whatsAppIndex !== -1) {\r\n      state[whatsAppIndex] = whatsApp;\r\n      return [...state];\r\n    } else {\r\n      return [whatsApp, ...state];\r\n    }\r\n  }\r\n\r\n  if (action.type === \"UPDATE_SESSION\") {\r\n    const whatsApp = action.payload;\r\n    const whatsAppIndex = state.findIndex((s) => s.id === whatsApp.id);\r\n\r\n    if (whatsAppIndex !== -1) {\r\n      state[whatsAppIndex].status = whatsApp.status;\r\n      state[whatsAppIndex].updatedAt = whatsApp.updatedAt;\r\n      state[whatsAppIndex].qrcode = whatsApp.qrcode;\r\n      state[whatsAppIndex].retries = whatsApp.retries;\r\n      return [...state];\r\n    } else {\r\n      return [...state];\r\n    }\r\n  }\r\n\r\n  if (action.type === \"DELETE_WHATSAPPS\") {\r\n    const whatsAppId = action.payload;\r\n\r\n    const whatsAppIndex = state.findIndex((s) => s.id === whatsAppId);\r\n    if (whatsAppIndex !== -1) {\r\n      state.splice(whatsAppIndex, 1);\r\n    }\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"RESET\") {\r\n    return [];\r\n  }\r\n};\r\n\r\nconst useWhatsApps = () => {\r\n  const [whatsApps, dispatch] = useReducer(reducer, []);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const socketManager = useContext(SocketContext);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const fetchSession = async () => {\r\n      try {\r\n        const { data } = await api.get(\"/whatsapp/?session=0\");\r\n        dispatch({ type: \"LOAD_WHATSAPPS\", payload: data });\r\n        setLoading(false);\r\n      } catch (err) {\r\n        setLoading(false);\r\n        toastError(err);\r\n      }\r\n    };\r\n    fetchSession();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const companyId = localStorage.getItem(\"companyId\");\r\n    const socket = socketManager.getSocket(companyId);\r\n\r\n    socket.on(`company-${companyId}-whatsapp`, (data) => {\r\n      if (data.action === \"update\") {\r\n        dispatch({ type: \"UPDATE_WHATSAPPS\", payload: data.whatsapp });\r\n      }\r\n    });\r\n\r\n    socket.on(`company-${companyId}-whatsapp`, (data) => {\r\n      if (data.action === \"delete\") {\r\n        dispatch({ type: \"DELETE_WHATSAPPS\", payload: data.whatsappId });\r\n      }\r\n    });\r\n\r\n    socket.on(`company-${companyId}-whatsappSession`, (data) => {\r\n      if (data.action === \"update\") {\r\n        dispatch({ type: \"UPDATE_SESSION\", payload: data.session });\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, [socketManager]);\r\n\r\n  return { whatsApps, loading };\r\n};\r\n\r\nexport default useWhatsApps;\r\n","import React, { createContext } from \"react\";\r\n\r\nimport useWhatsApps from \"../../hooks/useWhatsApps\";\r\n\r\nconst WhatsAppsContext = createContext();\r\n\r\nconst WhatsAppsProvider = ({ children }) => {\r\n\tconst { loading, whatsApps } = useWhatsApps();\r\n\r\n\treturn (\r\n\t\t<WhatsAppsContext.Provider value={{ whatsApps, loading }}>\r\n\t\t\t{children}\r\n\t\t</WhatsAppsContext.Provider>\r\n\t);\r\n};\r\n\r\nexport { WhatsAppsContext, WhatsAppsProvider };\r\n","import { useState, useEffect, useContext } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { has, isArray } from \"lodash\";\r\n\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport api from \"../../services/api\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { SocketContext } from \"../../context/Socket/SocketContext\";\r\nimport moment from \"moment\";\r\nconst useAuth = () => {\r\n  const history = useHistory();\r\n  const [isAuth, setIsAuth] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n  const [user, setUser] = useState({});\r\n\r\n  api.interceptors.request.use(\r\n    (config) => {\r\n      const token = localStorage.getItem(\"token\");\r\n      if (token) {\r\n        config.headers[\"Authorization\"] = `Bearer ${JSON.parse(token)}`;\r\n        setIsAuth(true);\r\n      }\r\n      return config;\r\n    },\r\n    (error) => {\r\n      Promise.reject(error);\r\n    }\r\n  );\r\n\r\n  api.interceptors.response.use(\r\n    (response) => {\r\n      return response;\r\n    },\r\n    async (error) => {\r\n      const originalRequest = error.config;\r\n      if (error?.response?.status === 403 && !originalRequest._retry) {\r\n        originalRequest._retry = true;\r\n\r\n        const { data } = await api.post(\"/auth/refresh_token\");\r\n        if (data) {\r\n          localStorage.setItem(\"token\", JSON.stringify(data.token));\r\n          api.defaults.headers.Authorization = `Bearer ${data.token}`;\r\n        }\r\n        return api(originalRequest);\r\n      }\r\n      if (error?.response?.status === 401) {\r\n        localStorage.removeItem(\"token\");\r\n        localStorage.removeItem(\"companyId\");\r\n        api.defaults.headers.Authorization = undefined;\r\n        setIsAuth(false);\r\n      }\r\n      return Promise.reject(error);\r\n    }\r\n  );\r\n\r\n  const socketManager = useContext(SocketContext);\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem(\"token\");\r\n    (async () => {\r\n      if (token) {\r\n        try {\r\n          const { data } = await api.post(\"/auth/refresh_token\");\r\n          api.defaults.headers.Authorization = `Bearer ${data.token}`;\r\n          setIsAuth(true);\r\n          setUser(data.user);\r\n        } catch (err) {\r\n          toastError(err);\r\n        }\r\n      }\r\n      setLoading(false);\r\n    })();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const companyId = localStorage.getItem(\"companyId\");\r\n    if (companyId) {\r\n   \r\n      const socket = socketManager.getSocket(companyId);\r\n\r\n      socket.on(`company-${companyId}-user`, (data) => {\r\n        if (data.action === \"update\" && data.user.id === user.id) {\r\n          setUser(data.user);\r\n        }\r\n      });\r\n    \r\n    \r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }\r\n  }, [socketManager, user]);\r\n\r\n  const handleLogin = async (userData) => {\r\n    setLoading(true);\r\n\r\n    try {\r\n      const { data } = await api.post(\"/auth/login\", userData);\r\n      const {\r\n        user: { companyId, id, company },\r\n      } = data;\r\n\r\n      if (has(company, \"settings\") && isArray(company.settings)) {\r\n        const setting = company.settings.find(\r\n          (s) => s.key === \"campaignsEnabled\"\r\n        );\r\n        if (setting && setting.value === \"true\") {\r\n          localStorage.setItem(\"cshow\", null); //regra pra exibir campanhas\r\n        }\r\n      }\r\n\r\n      moment.locale('pt-br');\r\n      const dueDate = data.user.company.dueDate;\r\n      const hoje = moment(moment()).format(\"DD/MM/yyyy\");\r\n      const vencimento = moment(dueDate).format(\"DD/MM/yyyy\");\r\n\r\n      var diff = moment(dueDate).diff(moment(moment()).format());\r\n\r\n      var before = moment(moment().format()).isBefore(dueDate);\r\n      var dias = moment.duration(diff).asDays();\r\n\r\n      if (before === true) {\r\n        localStorage.setItem(\"token\", JSON.stringify(data.token));\r\n        localStorage.setItem(\"companyId\", companyId);\r\n        localStorage.setItem(\"userId\", id);\r\n        localStorage.setItem(\"companyDueDate\", vencimento);\r\n        api.defaults.headers.Authorization = `Bearer ${data.token}`;\r\n        setUser(data.user);\r\n        setIsAuth(true);\r\n        toast.success(i18n.t(\"auth.toasts.success\"));\r\n        if (Math.round(dias) < 5) {\r\n          toast.warn(`Sua assinatura vence em ${Math.round(dias)} ${Math.round(dias) === 1 ? 'dia' : 'dias'} `);\r\n        }\r\n        history.push(\"/tickets\");\r\n        setLoading(false);\r\n      } else {\r\n        toastError(`Opss! Sua assinatura venceu ${vencimento}.\r\nEntre em contato com o Suporte para mais informações! `);\r\n        setLoading(false);\r\n      }\r\n\r\n      //quebra linha \r\n    } catch (err) {\r\n      toastError(err);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    setLoading(true);\r\n\r\n    try {\r\n      await api.delete(\"/auth/logout\");\r\n      setIsAuth(false);\r\n      setUser({});\r\n      localStorage.removeItem(\"token\");\r\n      localStorage.removeItem(\"companyId\");\r\n      localStorage.removeItem(\"userId\");\r\n      localStorage.removeItem(\"cshow\");\r\n      api.defaults.headers.Authorization = undefined;\r\n      setLoading(false);\r\n      history.push(\"/login\");\r\n    } catch (err) {\r\n      toastError(err);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getCurrentUserInfo = async () => {\r\n    try {\r\n      const { data } = await api.get(\"/auth/me\");\r\n      return data;\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  };\r\n\r\n  return {\r\n    isAuth,\r\n    user,\r\n    loading,\r\n    handleLogin,\r\n    handleLogout,\r\n    getCurrentUserInfo,\r\n  };\r\n};\r\n\r\nexport default useAuth;\r\n","import React, { createContext } from \"react\";\r\n\r\nimport useAuth from \"../../hooks/useAuth.js\";\r\n\r\nconst AuthContext = createContext();\r\n\r\nconst AuthProvider = ({ children }) => {\r\n\tconst { loading, user, isAuth, handleLogin, handleLogout } = useAuth();\r\n\r\n\treturn (\r\n\t\t<AuthContext.Provider\r\n\t\t\tvalue={{ loading, user, isAuth, handleLogin, handleLogout }}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</AuthContext.Provider>\r\n\t);\r\n};\r\n\r\nexport { AuthContext, AuthProvider };\r\n","const rules = {\r\n\tuser: {\r\n\t\tstatic: [],\r\n\t},\r\n\r\n\tadmin: {\r\n\t\tstatic: [\r\n\t\t\t\"dashboard:view\",\r\n\t\t\t\"drawer-admin-items:view\",\r\n\t\t\t\"tickets-manager:showall\",\r\n\t\t\t\"user-modal:editProfile\",\r\n\t\t\t\"user-modal:editQueues\",\r\n\t\t\t\"ticket-options:deleteTicket\",\r\n\t\t\t\"contacts-page:deleteContact\",\r\n\t\t\t\"connections-page:actionButtons\",\r\n\t\t\t\"connections-page:addConnection\",\r\n\t\t\t\"connections-page:editOrDeleteConnection\"\r\n\t\t],\r\n\t},\r\n};\r\n\r\nexport default rules;\r\n","import rules from \"../../rules\";\r\n\r\nconst check = (role, action, data) => {\r\n\tconst permissions = rules[role];\r\n\tif (!permissions) {\r\n\t\t// role is not present in the rules\r\n\t\treturn false;\r\n\t}\r\n\r\n\tconst staticPermissions = permissions.static;\r\n\r\n\tif (staticPermissions && staticPermissions.includes(action)) {\r\n\t\t// static rule not provided for action\r\n\t\treturn true;\r\n\t}\r\n\r\n\tconst dynamicPermissions = permissions.dynamic;\r\n\r\n\tif (dynamicPermissions) {\r\n\t\tconst permissionCondition = dynamicPermissions[action];\r\n\t\tif (!permissionCondition) {\r\n\t\t\t// dynamic rule not provided for action\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn permissionCondition(data);\r\n\t}\r\n\treturn false;\r\n};\r\n\r\nconst Can = ({ role, perform, data, yes, no }) =>\r\n\tcheck(role, perform, data) ? yes() : no();\r\n\r\nCan.defaultProps = {\r\n\tyes: () => null,\r\n\tno: () => null,\r\n};\r\n\r\nexport { Can };\r\n","import React, { useState, useEffect } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n    margin: '2rem'\r\n  },\r\n  inputContainer: {\r\n    display: 'flex',\r\n    width: '100%',\r\n    marginBottom: '1rem'\r\n  },\r\n  input: {\r\n    flexGrow: 1,\r\n    marginRight: '1rem'\r\n  },\r\n  listContainer: {\r\n    width: '100%',\r\n    height: '100%',\r\n    marginTop: '1rem',\r\n    backgroundColor: '#f5f5f5',\r\n    borderRadius: '5px',\r\n  },\r\n  list: {\r\n    marginBottom: '5px'\r\n  }\r\n});\r\n\r\nconst ToDoList = () => {\r\n  const classes = useStyles();\r\n\r\n  const [task, setTask] = useState('');\r\n  const [tasks, setTasks] = useState([]);\r\n  const [editIndex, setEditIndex] = useState(-1);\r\n\r\n  useEffect(() => {\r\n    const savedTasks = localStorage.getItem('tasks');\r\n    if (savedTasks) {\r\n      setTasks(JSON.parse(savedTasks));\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem('tasks', JSON.stringify(tasks));\r\n  }, [tasks]);\r\n\r\n  const handleTaskChange = (event) => {\r\n    setTask(event.target.value);\r\n  };\r\n\r\n  const handleAddTask = () => {\r\n    if (!task.trim()) {\r\n      // Impede que o usuário crie uma tarefa sem texto\r\n      return;\r\n    }\r\n\r\n    const now = new Date();\r\n    if (editIndex >= 0) {\r\n      // Editar tarefa existente\r\n      const newTasks = [...tasks];\r\n      newTasks[editIndex] = {text: task, updatedAt: now, createdAt: newTasks[editIndex].createdAt};\r\n      setTasks(newTasks);\r\n      setTask('');\r\n      setEditIndex(-1);\r\n    } else {\r\n      // Adicionar nova tarefa\r\n      setTasks([...tasks, {text: task, createdAt: now, updatedAt: now}]);\r\n      setTask('');\r\n    }\r\n  };\r\n\r\n  const handleEditTask = (index) => {\r\n    setTask(tasks[index].text);\r\n    setEditIndex(index);\r\n  };\r\n\r\n  const handleDeleteTask = (index) => {\r\n    const newTasks = [...tasks];\r\n    newTasks.splice(index, 1);\r\n    setTasks(newTasks);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <div className={classes.inputContainer}>\r\n        <TextField\r\n          className={classes.input}\r\n          label=\"Nova tarefa\"\r\n          value={task}\r\n          onChange={handleTaskChange}\r\n          variant=\"outlined\"\r\n        />\r\n        <Button variant=\"contained\" color=\"primary\" onClick={handleAddTask}>\r\n          {editIndex >= 0 ? 'Salvar' : 'Adicionar'}\r\n        </Button>\r\n      </div>\r\n      <div className={classes.listContainer}>\r\n        <List>\r\n          {tasks.map((task, index) => (\r\n            <ListItem key={index} className={classes.list}>\r\n              <ListItemText primary={task.text} secondary={task.updatedAt.toLocaleString()} />\r\n              <ListItemSecondaryAction>\r\n                <IconButton onClick={() => handleEditTask(index)}>\r\n                  <EditIcon />\r\n                </IconButton>\r\n                <IconButton onClick={() => handleDeleteTask(index)}>\r\n                  <DeleteIcon />\r\n                </IconButton>\r\n              </ListItemSecondaryAction>\r\n            </ListItem>\r\n          ))}\r\n        </List>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\nexport default ToDoList;\r\n","import api, { openApi } from \"../../services/api\";\r\n\r\nconst usePlans = () => {\r\n\r\n    const getPlanList = async (params) => {\r\n        const { data } = await openApi.request({\r\n            url: '/plans/list',\r\n            method: 'GET',\r\n            params\r\n        });\r\n        return data;\r\n    }\r\n\r\n    const list = async (params) => {\r\n        const { data } = await api.request({\r\n            url: '/plans/all',\r\n            method: 'GET',\r\n            params\r\n        });\r\n        return data;\r\n    }\r\n\r\n    const finder = async (id) => {\r\n        const { data } = await api.request({\r\n            url: `/plans/${id}`,\r\n            method: 'GET'\r\n        });\r\n        return data;\r\n    }\r\n\r\n    const save = async (data) => {\r\n        const { data: responseData } = await api.request({\r\n            url: '/plans',\r\n            method: 'POST',\r\n            data\r\n        });\r\n        return responseData;\r\n    }\r\n\r\n    const update = async (data) => {\r\n        const { data: responseData } = await api.request({\r\n            url: `/plans/${data.id}`,\r\n            method: 'PUT',\r\n            data\r\n        });\r\n        return responseData;\r\n    }\r\n\r\n    const remove = async (id) => {\r\n        const { data } = await api.request({\r\n            url: `/plans/${id}`,\r\n            method: 'DELETE'\r\n        });\r\n        return data;\r\n    }\r\n\r\n    const getPlanCompany = async (params, id) => {\r\n        const { data } = await api.request({\r\n            url: `/companies/listPlan/${id}`,\r\n            method: 'GET',\r\n            params\r\n        });\r\n        return data;\r\n    }\r\n\r\n    return {\r\n        getPlanList,\r\n        list,\r\n        save,\r\n        update,\r\n        finder,\r\n        remove,\r\n        getPlanCompany\r\n    }\r\n}\r\n\r\nexport default usePlans;","import api from \"../../services/api\";\r\n\r\nconst useVersion = () => {\r\n\r\n    const getVersion = async () => {\r\n        const { data } = await api.request({\r\n            url: '/version',\r\n            method: 'GET',\r\n        });\r\n        return data;\r\n    }\r\n\r\n    return {\r\n        getVersion\r\n    }\r\n}\r\n\r\nexport default useVersion;\r\n\r\n\r\n\r\n","import React, { useContext, useEffect, useReducer, useState } from \"react\";\r\nimport { Link as RouterLink, useHistory } from \"react-router-dom\";\r\n\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport ListSubheader from \"@material-ui/core/ListSubheader\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport { Badge, Collapse, List } from \"@material-ui/core\";\r\nimport DashboardOutlinedIcon from \"@material-ui/icons/DashboardOutlined\";\r\nimport WhatsAppIcon from \"@material-ui/icons/WhatsApp\";\r\nimport SyncAltIcon from \"@material-ui/icons/SyncAlt\";\r\nimport SettingsOutlinedIcon from \"@material-ui/icons/SettingsOutlined\";\r\nimport PeopleAltOutlinedIcon from \"@material-ui/icons/PeopleAltOutlined\";\r\nimport ContactPhoneOutlinedIcon from \"@material-ui/icons/ContactPhoneOutlined\";\r\nimport AccountTreeOutlinedIcon from \"@material-ui/icons/AccountTreeOutlined\";\r\nimport FlashOnIcon from \"@material-ui/icons/FlashOn\";\r\nimport HelpOutlineIcon from \"@material-ui/icons/HelpOutline\";\r\nimport CodeRoundedIcon from \"@material-ui/icons/CodeRounded\";\r\nimport EventIcon from \"@material-ui/icons/Event\";\r\nimport LocalOfferIcon from \"@material-ui/icons/LocalOffer\";\r\nimport EventAvailableIcon from \"@material-ui/icons/EventAvailable\";\r\nimport ExpandLessIcon from \"@material-ui/icons/ExpandLess\";\r\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\r\nimport PeopleIcon from \"@material-ui/icons/People\";\r\nimport ListIcon from \"@material-ui/icons/ListAlt\";\r\nimport AnnouncementIcon from \"@material-ui/icons/Announcement\";\r\nimport ForumIcon from \"@material-ui/icons/Forum\";\r\nimport LocalAtmIcon from '@material-ui/icons/LocalAtm';\r\nimport RotateRight from \"@material-ui/icons/RotateRight\";\r\nimport { i18n } from \"../translate/i18n\";\r\nimport { WhatsAppsContext } from \"../context/WhatsApp/WhatsAppsContext\";\r\nimport { AuthContext } from \"../context/Auth/AuthContext\";\r\nimport LoyaltyRoundedIcon from '@material-ui/icons/LoyaltyRounded';\r\nimport { Can } from \"../components/Can\";\r\nimport { SocketContext } from \"../context/Socket/SocketContext\";\r\nimport { isArray } from \"lodash\";\r\nimport TableChartIcon from '@material-ui/icons/TableChart';\r\nimport api from \"../services/api\";\r\nimport BorderColorIcon from '@material-ui/icons/BorderColor';\r\nimport ToDoList from \"../pages/ToDoList/\";\r\nimport toastError from \"../errors/toastError\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { AllInclusive, AttachFile, BlurCircular, DeviceHubOutlined, Schedule } from '@material-ui/icons';\r\nimport usePlans from \"../hooks/usePlans\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport useVersion from \"../hooks/useVersion\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  ListSubheader: {\r\n    height: 26,\r\n    marginTop: \"-15px\",\r\n    marginBottom: \"-10px\",\r\n  },\r\n}));\r\n\r\n\r\nfunction ListItemLink(props) {\r\n  const { icon, primary, to, className } = props;\r\n\r\n  const renderLink = React.useMemo(\r\n    () =>\r\n      React.forwardRef((itemProps, ref) => (\r\n        <RouterLink to={to} ref={ref} {...itemProps} />\r\n      )),\r\n    [to]\r\n  );\r\n\r\n  return (\r\n    <li>\r\n      <ListItem button dense component={renderLink} className={className}>\r\n        {icon ? <ListItemIcon>{icon}</ListItemIcon> : null}\r\n        <ListItemText primary={primary} />\r\n      </ListItem>\r\n    </li>\r\n  );\r\n}\r\n\r\nconst reducer = (state, action) => {\r\n  if (action.type === \"LOAD_CHATS\") {\r\n    const chats = action.payload;\r\n    const newChats = [];\r\n\r\n    if (isArray(chats)) {\r\n      chats.forEach((chat) => {\r\n        const chatIndex = state.findIndex((u) => u.id === chat.id);\r\n        if (chatIndex !== -1) {\r\n          state[chatIndex] = chat;\r\n        } else {\r\n          newChats.push(chat);\r\n        }\r\n      });\r\n    }\r\n\r\n    return [...state, ...newChats];\r\n  }\r\n\r\n  if (action.type === \"UPDATE_CHATS\") {\r\n    const chat = action.payload;\r\n    const chatIndex = state.findIndex((u) => u.id === chat.id);\r\n\r\n    if (chatIndex !== -1) {\r\n      state[chatIndex] = chat;\r\n      return [...state];\r\n    } else {\r\n      return [chat, ...state];\r\n    }\r\n  }\r\n\r\n  if (action.type === \"DELETE_CHAT\") {\r\n    const chatId = action.payload;\r\n\r\n    const chatIndex = state.findIndex((u) => u.id === chatId);\r\n    if (chatIndex !== -1) {\r\n      state.splice(chatIndex, 1);\r\n    }\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"RESET\") {\r\n    return [];\r\n  }\r\n\r\n  if (action.type === \"CHANGE_CHAT\") {\r\n    const changedChats = state.map((chat) => {\r\n      if (chat.id === action.payload.chat.id) {\r\n        return action.payload.chat;\r\n      }\r\n      return chat;\r\n    });\r\n    return changedChats;\r\n  }\r\n};\r\n\r\nconst MainListItems = (props) => {\r\n  const classes = useStyles();\r\n  const { drawerClose, collapsed } = props;\r\n  const { whatsApps } = useContext(WhatsAppsContext);\r\n  const { user, handleLogout } = useContext(AuthContext);\r\n  const [connectionWarning, setConnectionWarning] = useState(false);\r\n  const [openCampaignSubmenu, setOpenCampaignSubmenu] = useState(false);\r\n  const [showCampaigns, setShowCampaigns] = useState(false);\r\n  const [showKanban, setShowKanban] = useState(false);\r\n  const [showOpenAi, setShowOpenAi] = useState(false);\r\n  const [showIntegrations, setShowIntegrations] = useState(false); const history = useHistory();\r\n  const [showSchedules, setShowSchedules] = useState(false);\r\n  const [showInternalChat, setShowInternalChat] = useState(false);\r\n  const [showExternalApi, setShowExternalApi] = useState(false);\r\n\r\n\r\n  const [invisible, setInvisible] = useState(true);\r\n  const [pageNumber, setPageNumber] = useState(1);\r\n  const [searchParam] = useState(\"\");\r\n  const [chats, dispatch] = useReducer(reducer, []);\r\n  const { getPlanCompany } = usePlans();\r\n  \r\n  const [version, setVersion] = useState(false);\r\n  \r\n  \r\n  const { getVersion } = useVersion();\r\n\r\n  const socketManager = useContext(SocketContext);\r\n\r\n  useEffect(() => {\r\n    async function fetchVersion() {\r\n      const _version = await getVersion();\r\n      setVersion(_version.version);\r\n    }\r\n    fetchVersion();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n \r\n\r\n  useEffect(() => {\r\n    dispatch({ type: \"RESET\" });\r\n    setPageNumber(1);\r\n  }, [searchParam]);\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      const companyId = user.companyId;\r\n      const planConfigs = await getPlanCompany(undefined, companyId);\r\n\r\n      setShowCampaigns(planConfigs.plan.useCampaigns);\r\n      setShowKanban(planConfigs.plan.useKanban);\r\n      setShowOpenAi(planConfigs.plan.useOpenAi);\r\n      setShowIntegrations(planConfigs.plan.useIntegrations);\r\n      setShowSchedules(planConfigs.plan.useSchedules);\r\n      setShowInternalChat(planConfigs.plan.useInternalChat);\r\n      setShowExternalApi(planConfigs.plan.useExternalApi);\r\n    }\r\n    fetchData();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    const delayDebounceFn = setTimeout(() => {\r\n      fetchChats();\r\n    }, 500);\r\n    return () => clearTimeout(delayDebounceFn);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [searchParam, pageNumber]);\r\n\r\n  useEffect(() => {\r\n    const companyId = localStorage.getItem(\"companyId\");\r\n    const socket = socketManager.getSocket(companyId);\r\n\r\n    socket.on(`company-${companyId}-chat`, (data) => {\r\n      if (data.action === \"new-message\") {\r\n        dispatch({ type: \"CHANGE_CHAT\", payload: data });\r\n      }\r\n      if (data.action === \"update\") {\r\n        dispatch({ type: \"CHANGE_CHAT\", payload: data });\r\n      }\r\n    });\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, [socketManager]);\r\n\r\n  useEffect(() => {\r\n    let unreadsCount = 0;\r\n    if (chats.length > 0) {\r\n      for (let chat of chats) {\r\n        for (let chatUser of chat.users) {\r\n          if (chatUser.userId === user.id) {\r\n            unreadsCount += chatUser.unreads;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    if (unreadsCount > 0) {\r\n      setInvisible(false);\r\n    } else {\r\n      setInvisible(true);\r\n    }\r\n  }, [chats, user.id]);\r\n\r\n  useEffect(() => {\r\n    if (localStorage.getItem(\"cshow\")) {\r\n      setShowCampaigns(true);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const delayDebounceFn = setTimeout(() => {\r\n      if (whatsApps.length > 0) {\r\n        const offlineWhats = whatsApps.filter((whats) => {\r\n          return (\r\n            whats.status === \"qrcode\" ||\r\n            whats.status === \"PAIRING\" ||\r\n            whats.status === \"DISCONNECTED\" ||\r\n            whats.status === \"TIMEOUT\" ||\r\n            whats.status === \"OPENING\"\r\n          );\r\n        });\r\n        if (offlineWhats.length > 0) {\r\n          setConnectionWarning(true);\r\n        } else {\r\n          setConnectionWarning(false);\r\n        }\r\n      }\r\n    }, 2000);\r\n    return () => clearTimeout(delayDebounceFn);\r\n  }, [whatsApps]);\r\n\r\n  const fetchChats = async () => {\r\n    try {\r\n      const { data } = await api.get(\"/chats/\", {\r\n        params: { searchParam, pageNumber },\r\n      });\r\n      dispatch({ type: \"LOAD_CHATS\", payload: data.records });\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  };\r\n\r\n  const handleClickLogout = () => {\r\n    //handleCloseMenu();\r\n    handleLogout();\r\n  };\r\n\r\n  return (\r\n    <div onClick={drawerClose}>\r\n      <Can\r\n        role={user.profile}\r\n        perform=\"dashboard:view\"\r\n        yes={() => (\r\n          <ListItemLink\r\n            to=\"/\"\r\n            primary=\"Dashboard\"\r\n            icon={<DashboardOutlinedIcon />}\r\n          />\r\n        )}\r\n      />\r\n\r\n      <ListItemLink\r\n        to=\"/tickets\"\r\n        primary={i18n.t(\"mainDrawer.listItems.tickets\")}\r\n        icon={<WhatsAppIcon />}\r\n      />\r\n\t  \r\n\t{showKanban && (  \r\n\t  <ListItemLink\r\n        to=\"/kanban\"\r\n        primary={i18n.t(\"Kanban\")}\r\n        icon={<TableChartIcon />}\r\n      />\r\n\t  )}\r\n\r\n\r\n      <ListItemLink\r\n        to=\"/quick-messages\"\r\n        primary={i18n.t(\"mainDrawer.listItems.quickMessages\")}\r\n        icon={<FlashOnIcon />}\r\n      />\r\n\t  \r\n\t  <ListItemLink\r\n        to=\"/todolist\"\r\n        primary={i18n.t(\"Tarefas\")}\r\n        icon={<BorderColorIcon />}\r\n      />\r\n\r\n      <ListItemLink\r\n        to=\"/contacts\"\r\n        primary={i18n.t(\"mainDrawer.listItems.contacts\")}\r\n        icon={<ContactPhoneOutlinedIcon />}\r\n      />\r\n\r\n      <ListItemLink\r\n        to=\"/schedules\"\r\n        primary={i18n.t(\"mainDrawer.listItems.schedules\")}\r\n        icon={<EventIcon />}\r\n      />\r\n\r\n      <ListItemLink\r\n        to=\"/tags\"\r\n        primary={i18n.t(\"mainDrawer.listItems.tags\")}\r\n        icon={<LocalOfferIcon />}\r\n      />\r\n\r\n      <ListItemLink\r\n        to=\"/chats\"\r\n        primary={i18n.t(\"mainDrawer.listItems.chats\")}\r\n        icon={\r\n          <Badge color=\"secondary\" variant=\"dot\" invisible={invisible}>\r\n            <ForumIcon />\r\n          </Badge>\r\n        }\r\n      />\r\n\r\n      <ListItemLink\r\n        to=\"/helps\"\r\n        primary={i18n.t(\"mainDrawer.listItems.helps\")}\r\n        icon={<HelpOutlineIcon />}\r\n      />\r\n\r\n      <Can\r\n        role={user.profile}\r\n        perform=\"drawer-admin-items:view\"\r\n        yes={() => (\r\n          <>\r\n            <Divider />\r\n            <ListSubheader\r\n              hidden={collapsed}\r\n              style={{\r\n                position: \"relative\",\r\n                fontSize: \"17px\",\r\n                textAlign: \"left\",\r\n                paddingLeft: 20\r\n              }}\r\n              inset\r\n              color=\"inherit\">\r\n              {i18n.t(\"mainDrawer.listItems.administration\")}\r\n            </ListSubheader>\r\n\t\t\t\r\n            {showCampaigns && (\r\n              <>\r\n                <ListItem\r\n                  button\r\n                  onClick={() => setOpenCampaignSubmenu((prev) => !prev)}\r\n                >\r\n                  <ListItemIcon>\r\n                    <EventAvailableIcon />\r\n                  </ListItemIcon>\r\n                  <ListItemText\r\n                    primary={i18n.t(\"mainDrawer.listItems.campaigns\")}\r\n                  />\r\n                  {openCampaignSubmenu ? (\r\n                    <ExpandLessIcon />\r\n                  ) : (\r\n                    <ExpandMoreIcon />\r\n                  )}\r\n                </ListItem>\r\n                <Collapse\r\n                  style={{ paddingLeft: 15 }}\r\n                  in={openCampaignSubmenu}\r\n                  timeout=\"auto\"\r\n                  unmountOnExit\r\n                >\r\n                  <List component=\"div\" disablePadding>\r\n                    <ListItem onClick={() => history.push(\"/campaigns\")} button>\r\n                      <ListItemIcon>\r\n                        <ListIcon />\r\n                      </ListItemIcon>\r\n                      <ListItemText primary=\"Listagem\" />\r\n                    </ListItem>\r\n                    <ListItem\r\n                      onClick={() => history.push(\"/contact-lists\")}\r\n                      button\r\n                    >\r\n                      <ListItemIcon>\r\n                        <PeopleIcon />\r\n                      </ListItemIcon>\r\n                      <ListItemText primary=\"Listas de Contatos\" />\r\n                    </ListItem>\r\n                    <ListItem\r\n                      onClick={() => history.push(\"/campaigns-config\")}\r\n                      button\r\n                    >\r\n                      <ListItemIcon>\r\n                        <SettingsOutlinedIcon />\r\n                      </ListItemIcon>\r\n                      <ListItemText primary=\"Configurações\" />\r\n                    </ListItem>\r\n                  </List>\r\n                </Collapse>\r\n              </>\r\n            )}\r\n            {user.super && (\r\n              <ListItemLink\r\n                to=\"/announcements\"\r\n                primary={i18n.t(\"mainDrawer.listItems.annoucements\")}\r\n                icon={<AnnouncementIcon />}\r\n              />\r\n            )}\r\n            {showOpenAi && (\r\n              <ListItemLink\r\n                to=\"/prompts\"\r\n                primary={i18n.t(\"mainDrawer.listItems.prompts\")}\r\n                icon={<AllInclusive />}\r\n              />\r\n            )}\r\n\r\n            {showIntegrations && (\r\n              <ListItemLink\r\n                to=\"/queue-integration\"\r\n                primary={i18n.t(\"mainDrawer.listItems.queueIntegration\")}\r\n                icon={<DeviceHubOutlined />}\r\n              />\r\n            )}\r\n            <ListItemLink\r\n              to=\"/connections\"\r\n              primary={i18n.t(\"mainDrawer.listItems.connections\")}\r\n              icon={\r\n                <Badge badgeContent={connectionWarning ? \"!\" : 0} color=\"error\">\r\n                  <SyncAltIcon />\r\n                </Badge>\r\n              }\r\n            />\r\n            <ListItemLink\r\n              to=\"/files\"\r\n              primary={i18n.t(\"mainDrawer.listItems.files\")}\r\n              icon={<AttachFile />}\r\n            />\r\n            <ListItemLink\r\n              to=\"/queues\"\r\n              primary={i18n.t(\"mainDrawer.listItems.queues\")}\r\n              icon={<AccountTreeOutlinedIcon />}\r\n            />\r\n            <ListItemLink\r\n              to=\"/users\"\r\n              primary={i18n.t(\"mainDrawer.listItems.users\")}\r\n              icon={<PeopleAltOutlinedIcon />}\r\n            />\r\n            {showExternalApi && (\r\n              <>\r\n                <ListItemLink\r\n                  to=\"/messages-api\"\r\n                  primary={i18n.t(\"mainDrawer.listItems.messagesAPI\")}\r\n                  icon={<CodeRoundedIcon />}\r\n                />\r\n              </>\r\n            )}\r\n            <ListItemLink\r\n              to=\"/financeiro\"\r\n              primary={i18n.t(\"mainDrawer.listItems.financeiro\")}\r\n              icon={<LocalAtmIcon />}\r\n            />\r\n\r\n            <ListItemLink\r\n              to=\"/settings\"\r\n              primary={i18n.t(\"mainDrawer.listItems.settings\")}\r\n              icon={<SettingsOutlinedIcon />}\r\n            />\r\n\t\t\t\r\n\t\t\t\r\n            {!collapsed && <React.Fragment>\r\n              <Divider />\r\n              {/* \r\n              // IMAGEM NO MENU\r\n              <Hidden only={['sm', 'xs']}>\r\n                <img style={{ width: \"100%\", padding: \"10px\" }} src={logo} alt=\"image\" />            \r\n              </Hidden> \r\n              */}\r\n              <Typography style={{ fontSize: \"12px\", padding: \"10px\", textAlign: \"right\", fontWeight: \"bold\" }}>\r\n                {`6.0.0`}\r\n\r\n              </Typography>\r\n            </React.Fragment>\r\n            }\r\n\t\t\t\r\n          </>\r\n        )}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MainListItems;\r\n","import React from \"react\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { green } from \"@material-ui/core/colors\";\r\nimport { CircularProgress, Button } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tbutton: {\r\n\t\tposition: \"relative\",\r\n\t},\r\n\r\n\tbuttonProgress: {\r\n\t\tcolor: green[500],\r\n\t\tposition: \"absolute\",\r\n\t\ttop: \"50%\",\r\n\t\tleft: \"50%\",\r\n\t\tmarginTop: -12,\r\n\t\tmarginLeft: -12,\r\n\t},\r\n}));\r\n\r\nconst ButtonWithSpinner = ({ loading, children, ...rest }) => {\r\n\tconst classes = useStyles();\r\n\r\n\treturn (\r\n\t\t<Button className={classes.button} disabled={loading} {...rest}>\r\n\t\t\t{children}\r\n\t\t\t{loading && (\r\n\t\t\t\t<CircularProgress size={24} className={classes.buttonProgress} />\r\n\t\t\t)}\r\n\t\t</Button>\r\n\t);\r\n};\r\n\r\nexport default ButtonWithSpinner;\r\n","import React from \"react\";\r\nimport Markdown from \"markdown-to-jsx\";\r\n\r\nconst elements = [\r\n\t\"a\",\r\n\t\"abbr\",\r\n\t\"address\",\r\n\t\"area\",\r\n\t\"article\",\r\n\t\"aside\",\r\n\t\"audio\",\r\n\t\"b\",\r\n\t\"base\",\r\n\t\"bdi\",\r\n\t\"bdo\",\r\n\t\"big\",\r\n\t\"blockquote\",\r\n\t\"body\",\r\n\t\"br\",\r\n\t\"button\",\r\n\t\"canvas\",\r\n\t\"caption\",\r\n\t\"cite\",\r\n\t\"code\",\r\n\t\"col\",\r\n\t\"colgroup\",\r\n\t\"data\",\r\n\t\"datalist\",\r\n\t\"dd\",\r\n\t\"del\",\r\n\t\"details\",\r\n\t\"dfn\",\r\n\t\"dialog\",\r\n\t\"div\",\r\n\t\"dl\",\r\n\t\"dt\",\r\n\t\"em\",\r\n\t\"embed\",\r\n\t\"fieldset\",\r\n\t\"figcaption\",\r\n\t\"figure\",\r\n\t\"footer\",\r\n\t\"form\",\r\n\t\"h1\",\r\n\t\"h2\",\r\n\t\"h3\",\r\n\t\"h4\",\r\n\t\"h5\",\r\n\t\"h6\",\r\n\t\"head\",\r\n\t\"header\",\r\n\t\"hgroup\",\r\n\t\"hr\",\r\n\t\"html\",\r\n\t\"i\",\r\n\t\"iframe\",\r\n\t\"img\",\r\n\t\"input\",\r\n\t\"ins\",\r\n\t\"kbd\",\r\n\t\"keygen\",\r\n\t\"label\",\r\n\t\"legend\",\r\n\t\"li\",\r\n\t\"link\",\r\n\t\"main\",\r\n\t\"map\",\r\n\t\"mark\",\r\n\t\"marquee\",\r\n\t\"menu\",\r\n\t\"menuitem\",\r\n\t\"meta\",\r\n\t\"meter\",\r\n\t\"nav\",\r\n\t\"noscript\",\r\n\t\"object\",\r\n\t\"ol\",\r\n\t\"optgroup\",\r\n\t\"option\",\r\n\t\"output\",\r\n\t\"p\",\r\n\t\"param\",\r\n\t\"picture\",\r\n\t\"pre\",\r\n\t\"progress\",\r\n\t\"q\",\r\n\t\"rp\",\r\n\t\"rt\",\r\n\t\"ruby\",\r\n\t\"s\",\r\n\t\"samp\",\r\n\t\"script\",\r\n\t\"section\",\r\n\t\"select\",\r\n\t\"small\",\r\n\t\"source\",\r\n\t\"span\",\r\n\t\"strong\",\r\n\t\"style\",\r\n\t\"sub\",\r\n\t\"summary\",\r\n\t\"sup\",\r\n\t\"table\",\r\n\t\"tbody\",\r\n\t\"td\",\r\n\t\"textarea\",\r\n\t\"tfoot\",\r\n\t\"th\",\r\n\t\"thead\",\r\n\t\"time\",\r\n\t\"title\",\r\n\t\"tr\",\r\n\t\"track\",\r\n\t\"u\",\r\n\t\"ul\",\r\n\t\"var\",\r\n\t\"video\",\r\n\t\"wbr\",\r\n\r\n\t// SVG\r\n\t\"circle\",\r\n\t\"clipPath\",\r\n\t\"defs\",\r\n\t\"ellipse\",\r\n\t\"foreignObject\",\r\n\t\"g\",\r\n\t\"image\",\r\n\t\"line\",\r\n\t\"linearGradient\",\r\n\t\"marker\",\r\n\t\"mask\",\r\n\t\"path\",\r\n\t\"pattern\",\r\n\t\"polygon\",\r\n\t\"polyline\",\r\n\t\"radialGradient\",\r\n\t\"rect\",\r\n\t\"stop\",\r\n\t\"svg\",\r\n\t\"text\",\r\n\t\"tspan\",\r\n];\r\n\r\nconst allowedElements = [\"a\", \"b\", \"strong\", \"em\", \"u\", \"code\", \"del\"];\r\n\r\nconst CustomLink = ({ children, ...props }) => (\r\n\t<a {...props} target=\"_blank\" rel=\"noopener noreferrer\">\r\n\t\t{children}\r\n\t</a>\r\n);\r\n\r\nconst MarkdownWrapper = ({ children }) => {\r\n\tconst boldRegex = /\\*(.*?)\\*/g;\r\n\tconst tildaRegex = /~(.*?)~/g;\r\n\r\n\tif (children && boldRegex.test(children)) {\r\n\t\tchildren = children.replace(boldRegex, \"**$1**\");\r\n\t}\r\n\tif (children && tildaRegex.test(children)) {\r\n\t\tchildren = children.replace(tildaRegex, \"~~$1~~\");\r\n\t}\r\n\r\n\tconst options = React.useMemo(() => {\r\n\t\tconst markdownOptions = {\r\n\t\t\tdisableParsingRawHTML: true,\r\n\t\t\tforceInline: true,\r\n\t\t\toverrides: {\r\n\t\t\t\ta: { component: CustomLink },\r\n\t\t\t},\r\n\t\t};\r\n\r\n\t\telements.forEach(element => {\r\n\t\t\tif (!allowedElements.includes(element)) {\r\n\t\t\t\tmarkdownOptions.overrides[element] = el => el.children || null;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn markdownOptions;\r\n\t}, []);\r\n\r\n\tif (!children) return null;\r\n\r\n\treturn <Markdown options={options}>{children}</Markdown>;\r\n};\r\n\r\nexport default MarkdownWrapper;\r\n","import React, { useState, useEffect, createContext } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst TicketsContext = createContext();\r\n\r\nconst TicketsContextProvider = ({ children }) => {\r\n\tconst [currentTicket, setCurrentTicket] = useState({ id: null, code: null });\r\n    const history = useHistory();\r\n\r\n    useEffect(() => {\r\n        if (currentTicket.id !== null) {\r\n            history.push(`/tickets/${currentTicket.uuid}`);\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [currentTicket])\r\n\r\n\treturn (\r\n\t\t<TicketsContext.Provider\r\n\t\t\tvalue={{ currentTicket, setCurrentTicket }}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</TicketsContext.Provider>\r\n\t);\r\n};\r\n\r\nexport { TicketsContext, TicketsContextProvider };\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport ModalImage from \"react-modal-image\";\r\nimport api from \"../../services/api\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tmessageMedia: {\r\n\t\tobjectFit: \"cover\",\r\n\t\twidth: 250,\r\n\t\theight: 200,\r\n\t\tborderTopLeftRadius: 8,\r\n\t\tborderTopRightRadius: 8,\r\n\t\tborderBottomLeftRadius: 8,\r\n\t\tborderBottomRightRadius: 8,\r\n\t},\r\n}));\r\n\r\nconst ModalImageCors = ({ imageUrl }) => {\r\n\tconst classes = useStyles();\r\n\tconst [fetching, setFetching] = useState(true);\r\n\tconst [blobUrl, setBlobUrl] = useState(\"\");\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!imageUrl) return;\r\n\t\tconst fetchImage = async () => {\r\n\t\t\tconst { data, headers } = await api.get(imageUrl, {\r\n\t\t\t\tresponseType: \"blob\",\r\n\t\t\t});\r\n\t\t\tconst url = window.URL.createObjectURL(\r\n\t\t\t\tnew Blob([data], { type: headers[\"content-type\"] })\r\n\t\t\t);\r\n\t\t\tsetBlobUrl(url);\r\n\t\t\tsetFetching(false);\r\n\t\t};\r\n\t\tfetchImage();\r\n\t}, [imageUrl]);\r\n\r\n\treturn (\r\n\t\t<ModalImage\r\n\t\t\tclassName={classes.messageMedia}\r\n\t\t\tsmallSrcSet={fetching ? imageUrl : blobUrl}\r\n\t\t\tmedium={fetching ? imageUrl : blobUrl}\r\n\t\t\tlarge={fetching ? imageUrl : blobUrl}\r\n\t\t\talt=\"image\"\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nexport default ModalImageCors;\r\n","import React from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nconst ConfirmationModal = ({ title, children, open, onClose, onConfirm }) => {\r\n\treturn (\r\n\t\t<Dialog\r\n\t\t\topen={open}\r\n\t\t\tonClose={() => onClose(false)}\r\n\t\t\taria-labelledby=\"confirm-dialog\"\r\n\t\t>\r\n\t\t\t<DialogTitle id=\"confirm-dialog\">{title}</DialogTitle>\r\n\t\t\t<DialogContent dividers>\r\n\t\t\t\t<Typography>{children}</Typography>\r\n\t\t\t</DialogContent>\r\n\t\t\t<DialogActions>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tonClick={() => onClose(false)}\r\n\t\t\t\t\tcolor=\"default\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{i18n.t(\"confirmationModal.buttons.cancel\")}\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tonClose(false);\r\n\t\t\t\t\t\tonConfirm();\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{i18n.t(\"confirmationModal.buttons.confirm\")}\r\n\t\t\t\t</Button>\r\n\t\t\t</DialogActions>\r\n\t\t</Dialog>\r\n\t);\r\n};\r\n\r\nexport default ConfirmationModal;\r\n","import React, { useState, createContext } from \"react\";\r\n\r\nconst ReplyMessageContext = createContext();\r\n\r\nconst ReplyMessageProvider = ({ children }) => {\r\n\tconst [replyingMessage, setReplyingMessage] = useState(null);\r\n\r\n\treturn (\r\n\t\t<ReplyMessageContext.Provider\r\n\t\t\tvalue={{ replyingMessage, setReplyingMessage }}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</ReplyMessageContext.Provider>\r\n\t);\r\n};\r\n\r\nexport { ReplyMessageContext, ReplyMessageProvider };\r\n","import React, { useState, useContext } from \"react\";\r\n\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport api from \"../../services/api\";\r\nimport ConfirmationModal from \"../ConfirmationModal\";\r\nimport { Menu } from \"@material-ui/core\";\r\nimport { ReplyMessageContext } from \"../../context/ReplyingMessage/ReplyingMessageContext\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nconst MessageOptionsMenu = ({ message, menuOpen, handleClose, anchorEl }) => {\r\n\tconst { setReplyingMessage } = useContext(ReplyMessageContext);\r\n\tconst [confirmationOpen, setConfirmationOpen] = useState(false);\r\n\r\n\tconst handleDeleteMessage = async () => {\r\n\t\ttry {\r\n\t\t\tawait api.delete(`/messages/${message.id}`);\r\n\t\t} catch (err) {\r\n\t\t\ttoastError(err);\r\n\t\t}\r\n\t};\r\n\r\n\tconst hanldeReplyMessage = () => {\r\n\t\tsetReplyingMessage(message);\r\n\t\thandleClose();\r\n\t};\r\n\r\n\tconst handleOpenConfirmationModal = e => {\r\n\t\tsetConfirmationOpen(true);\r\n\t\thandleClose();\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<ConfirmationModal\r\n\t\t\t\ttitle={i18n.t(\"messageOptionsMenu.confirmationModal.title\")}\r\n\t\t\t\topen={confirmationOpen}\r\n\t\t\t\tonClose={setConfirmationOpen}\r\n\t\t\t\tonConfirm={handleDeleteMessage}\r\n\t\t\t>\r\n\t\t\t\t{i18n.t(\"messageOptionsMenu.confirmationModal.message\")}\r\n\t\t\t</ConfirmationModal>\r\n\t\t\t<Menu\r\n\t\t\t\tanchorEl={anchorEl}\r\n\t\t\t\tgetContentAnchorEl={null}\r\n\t\t\t\tanchorOrigin={{\r\n\t\t\t\t\tvertical: \"bottom\",\r\n\t\t\t\t\thorizontal: \"right\",\r\n\t\t\t\t}}\r\n\t\t\t\ttransformOrigin={{\r\n\t\t\t\t\tvertical: \"top\",\r\n\t\t\t\t\thorizontal: \"right\",\r\n\t\t\t\t}}\r\n\t\t\t\topen={menuOpen}\r\n\t\t\t\tonClose={handleClose}\r\n\t\t\t>\r\n\t\t\t\t{message.fromMe && (\r\n\t\t\t\t\t<MenuItem onClick={handleOpenConfirmationModal}>\r\n\t\t\t\t\t\t{i18n.t(\"messageOptionsMenu.delete\")}\r\n\t\t\t\t\t</MenuItem>\r\n\t\t\t\t)}\r\n\t\t\t\t<MenuItem onClick={hanldeReplyMessage}>\r\n\t\t\t\t\t{i18n.t(\"messageOptionsMenu.reply\")}\r\n\t\t\t\t</MenuItem>\r\n\t\t\t</Menu>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default MessageOptionsMenu;\r\n","import React, { useEffect } from 'react';\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nimport { Button, Divider, Typography} from \"@material-ui/core\";\r\n\r\nconst LocationPreview = ({ image, link, description }) => {\r\n    useEffect(() => {}, [image, link, description]);\r\n\r\n    const handleLocation = async() => {\r\n        try {\r\n            window.open(link);\r\n        } catch (err) {\r\n            toastError(err);\r\n        }\r\n    }\r\n\r\n    return (\r\n\t\t<>\r\n\t\t\t<div style={{\r\n\t\t\t\tminWidth: \"250px\",\r\n\t\t\t}}>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div style={{ float: \"left\" }}>\r\n\t\t\t\t\t\t<img src={image} alt=\"loc\" onClick={handleLocation} style={{ width: \"100px\" }} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{ description && (\r\n\t\t\t\t\t<div style={{ display: \"flex\", flexWrap: \"wrap\" }}>\r\n\t\t\t\t\t\t<Typography style={{ marginTop: \"12px\", marginLeft: \"15px\", marginRight: \"15px\", float: \"left\" }} variant=\"subtitle1\" color=\"primary\" gutterBottom>\r\n\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: description.replace('\\\\n', '<br />') }}></div>\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t<div style={{ display: \"block\", content: \"\", clear: \"both\" }}></div>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<Divider />\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\tonClick={handleLocation}\r\n\t\t\t\t\t\t\tdisabled={!link}\r\n\t\t\t\t\t\t>Visualizar</Button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n\r\n};\r\n\r\nexport default LocationPreview;","import React, { useState, useEffect, useReducer, useRef, useContext } from \"react\";\r\n\r\nimport { isSameDay, parseISO, format } from \"date-fns\";\r\nimport clsx from \"clsx\";\r\n\r\nimport { green } from \"@material-ui/core/colors\";\r\nimport {\r\n  Button,\r\n  CircularProgress,\r\n  Divider,\r\n  IconButton,\r\n  makeStyles,\r\n} from \"@material-ui/core\";\r\n\r\nimport {\r\n  AccessTime,\r\n  Block,\r\n  Done,\r\n  DoneAll,\r\n  ExpandMore,\r\n  GetApp,\r\n} from \"@material-ui/icons\";\r\n\r\nimport MarkdownWrapper from \"../MarkdownWrapper\";\r\nimport ModalImageCors from \"../ModalImageCors\";\r\nimport MessageOptionsMenu from \"../MessageOptionsMenu\";\r\nimport whatsBackground from \"../../assets/wa-background.png\";\r\nimport LocationPreview from \"../LocationPreview\";\r\n\r\nimport whatsBackgroundDark from \"../../assets/wa-background-dark.png\"; //DARK MODE PLW DESIGN//\r\n\r\nimport api from \"../../services/api\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { SocketContext } from \"../../context/Socket/SocketContext\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  messagesListWrapper: {\r\n    overflow: \"hidden\",\r\n    position: \"relative\",\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    flexGrow: 1,\r\n    width: \"100%\",\r\n    minWidth: 300,\r\n    minHeight: 200,\r\n  },\r\n\r\n  messagesList: {\r\n    backgroundImage: theme.mode === 'light' ? `url(${whatsBackground})` : `url(${whatsBackgroundDark})`, //DARK MODE PLW DESIGN//\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    flexGrow: 1,\r\n    padding: \"20px 20px 20px 20px\",\r\n    overflowY: \"scroll\",\r\n    ...theme.scrollbarStyles,\r\n  },\r\n\r\n  circleLoading: {\r\n    color: green[500],\r\n    position: \"absolute\",\r\n    opacity: \"70%\",\r\n    top: 0,\r\n    left: \"50%\",\r\n    marginTop: 12,\r\n  },\r\n\r\n  messageLeft: {\r\n    marginRight: 20,\r\n    marginTop: 2,\r\n    minWidth: 100,\r\n    maxWidth: 600,\r\n    height: \"auto\",\r\n    display: \"block\",\r\n    position: \"relative\",\r\n    \"&:hover #messageActionsButton\": {\r\n      display: \"flex\",\r\n      position: \"absolute\",\r\n      top: 0,\r\n      right: 0,\r\n    },\r\n\r\n    whiteSpace: \"pre-wrap\",\r\n    backgroundColor: \"#ffffff\",\r\n    color: \"#303030\",\r\n    alignSelf: \"flex-start\",\r\n    borderTopLeftRadius: 0,\r\n    borderTopRightRadius: 8,\r\n    borderBottomLeftRadius: 8,\r\n    borderBottomRightRadius: 8,\r\n    paddingLeft: 5,\r\n    paddingRight: 5,\r\n    paddingTop: 5,\r\n    paddingBottom: 0,\r\n    boxShadow: \"0 1px 1px #b3b3b3\",\r\n  },\r\n\r\n  quotedContainerLeft: {\r\n    margin: \"-3px -80px 6px -6px\",\r\n    overflow: \"hidden\",\r\n    backgroundColor: \"#f0f0f0\",\r\n    borderRadius: \"7.5px\",\r\n    display: \"flex\",\r\n    position: \"relative\",\r\n  },\r\n\r\n  quotedMsg: {\r\n    padding: 10,\r\n    maxWidth: 300,\r\n    height: \"auto\",\r\n    display: \"block\",\r\n    whiteSpace: \"pre-wrap\",\r\n    overflow: \"hidden\",\r\n  },\r\n\r\n  quotedSideColorLeft: {\r\n    flex: \"none\",\r\n    width: \"4px\",\r\n    backgroundColor: \"#6bcbef\",\r\n  },\r\n\r\n  messageRight: {\r\n    marginLeft: 20,\r\n    marginTop: 2,\r\n    minWidth: 100,\r\n    maxWidth: 600,\r\n    height: \"auto\",\r\n    display: \"block\",\r\n    position: \"relative\",\r\n    \"&:hover #messageActionsButton\": {\r\n      display: \"flex\",\r\n      position: \"absolute\",\r\n      top: 0,\r\n      right: 0,\r\n    },\r\n\r\n    whiteSpace: \"pre-wrap\",\r\n    backgroundColor: \"#dcf8c6\",\r\n    color: \"#303030\",\r\n    alignSelf: \"flex-end\",\r\n    borderTopLeftRadius: 8,\r\n    borderTopRightRadius: 8,\r\n    borderBottomLeftRadius: 8,\r\n    borderBottomRightRadius: 0,\r\n    paddingLeft: 5,\r\n    paddingRight: 5,\r\n    paddingTop: 5,\r\n    paddingBottom: 0,\r\n    boxShadow: \"0 1px 1px #b3b3b3\",\r\n  },\r\n\r\n  quotedContainerRight: {\r\n    margin: \"-3px -80px 6px -6px\",\r\n    overflowY: \"hidden\",\r\n    backgroundColor: \"#cfe9ba\",\r\n    borderRadius: \"7.5px\",\r\n    display: \"flex\",\r\n    position: \"relative\",\r\n  },\r\n\r\n  quotedMsgRight: {\r\n    padding: 10,\r\n    maxWidth: 300,\r\n    height: \"auto\",\r\n    whiteSpace: \"pre-wrap\",\r\n  },\r\n\r\n  quotedSideColorRight: {\r\n    flex: \"none\",\r\n    width: \"4px\",\r\n    backgroundColor: \"#35cd96\",\r\n  },\r\n\r\n  messageActionsButton: {\r\n    display: \"none\",\r\n    position: \"relative\",\r\n    color: \"#999\",\r\n    zIndex: 1,\r\n    backgroundColor: \"inherit\",\r\n    opacity: \"90%\",\r\n    \"&:hover, &.Mui-focusVisible\": { backgroundColor: \"inherit\" },\r\n  },\r\n\r\n  messageContactName: {\r\n    display: \"flex\",\r\n    color: \"#6bcbef\",\r\n    fontWeight: 500,\r\n  },\r\n\r\n  textContentItem: {\r\n    overflowWrap: \"break-word\",\r\n    padding: \"3px 80px 6px 6px\",\r\n  },\r\n  \r\n  textContentItemEdited: {\r\n    overflowWrap: \"break-word\",\r\n    padding: \"3px 120px 6px 6px\",\r\n  },\r\n\r\n  textContentItemDeleted: {\r\n    fontStyle: \"italic\",\r\n    color: \"rgba(0, 0, 0, 0.36)\",\r\n    overflowWrap: \"break-word\",\r\n    padding: \"3px 80px 6px 6px\",\r\n  },\r\n\r\n  messageMedia: {\r\n    objectFit: \"cover\",\r\n    width: 250,\r\n    height: 200,\r\n    borderTopLeftRadius: 8,\r\n    borderTopRightRadius: 8,\r\n    borderBottomLeftRadius: 8,\r\n    borderBottomRightRadius: 8,\r\n  },\r\n\r\n  timestamp: {\r\n    fontSize: 11,\r\n    position: \"absolute\",\r\n    bottom: 0,\r\n    right: 5,\r\n    color: \"#999\",\r\n  },\r\n\r\n  dailyTimestamp: {\r\n    alignItems: \"center\",\r\n    textAlign: \"center\",\r\n    alignSelf: \"center\",\r\n    width: \"110px\",\r\n    backgroundColor: \"#e1f3fb\",\r\n    margin: \"10px\",\r\n    borderRadius: \"10px\",\r\n    boxShadow: \"0 1px 1px #b3b3b3\",\r\n  },\r\n\r\n  dailyTimestampText: {\r\n    color: \"#808888\",\r\n    padding: 8,\r\n    alignSelf: \"center\",\r\n    marginLeft: \"0px\",\r\n  },\r\n\r\n  ackIcons: {\r\n    fontSize: 18,\r\n    verticalAlign: \"middle\",\r\n    marginLeft: 4,\r\n  },\r\n\r\n  deletedIcon: {\r\n    fontSize: 18,\r\n    verticalAlign: \"middle\",\r\n    marginRight: 4,\r\n  },\r\n\r\n  ackDoneAllIcon: {\r\n    color: green[500],\r\n    fontSize: 18,\r\n    verticalAlign: \"middle\",\r\n    marginLeft: 4,\r\n  },\r\n\r\n  downloadMedia: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    backgroundColor: \"inherit\",\r\n    padding: 10,\r\n  },\r\n}));\r\n\r\nconst reducer = (state, action) => {\r\n  if (action.type === \"LOAD_MESSAGES\") {\r\n    const messages = action.payload;\r\n    const newMessages = [];\r\n\r\n    messages.forEach((message) => {\r\n      const messageIndex = state.findIndex((m) => m.id === message.id);\r\n      if (messageIndex !== -1) {\r\n        state[messageIndex] = message;\r\n      } else {\r\n        newMessages.push(message);\r\n      }\r\n    });\r\n\r\n    return [...newMessages, ...state];\r\n  }\r\n\r\n  if (action.type === \"ADD_MESSAGE\") {\r\n    const newMessage = action.payload;\r\n    const messageIndex = state.findIndex((m) => m.id === newMessage.id);\r\n\r\n    if (messageIndex !== -1) {\r\n      state[messageIndex] = newMessage;\r\n    } else {\r\n      state.push(newMessage);\r\n    }\r\n\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"UPDATE_MESSAGE\") {\r\n    const messageToUpdate = action.payload;\r\n    const messageIndex = state.findIndex((m) => m.id === messageToUpdate.id);\r\n\r\n    if (messageIndex !== -1) {\r\n      state[messageIndex] = messageToUpdate;\r\n    }\r\n\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"RESET\") {\r\n    return [];\r\n  }\r\n};\r\n\r\nconst MessagesList = ({ ticket, ticketId, isGroup }) => {\r\n  const classes = useStyles();\r\n\r\n  const [messagesList, dispatch] = useReducer(reducer, []);\r\n  const [pageNumber, setPageNumber] = useState(1);\r\n  const [hasMore, setHasMore] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const lastMessageRef = useRef();\r\n\r\n  const [selectedMessage, setSelectedMessage] = useState({});\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  const messageOptionsMenuOpen = Boolean(anchorEl);\r\n  const currentTicketId = useRef(ticketId);\r\n\r\n  const socketManager = useContext(SocketContext);\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: \"RESET\" });\r\n    setPageNumber(1);\r\n\r\n    currentTicketId.current = ticketId;\r\n  }, [ticketId]);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const delayDebounceFn = setTimeout(() => {\r\n      const fetchMessages = async () => {\r\n        if (ticketId === undefined) return;\r\n        try {\r\n          const { data } = await api.get(\"/messages/\" + ticketId, {\r\n            params: { pageNumber },\r\n          });\r\n\r\n          if (currentTicketId.current === ticketId) {\r\n            dispatch({ type: \"LOAD_MESSAGES\", payload: data.messages });\r\n            setHasMore(data.hasMore);\r\n            setLoading(false);\r\n          }\r\n\r\n          if (pageNumber === 1 && data.messages.length > 1) {\r\n            scrollToBottom();\r\n          }\r\n        } catch (err) {\r\n          setLoading(false);\r\n          toastError(err);\r\n        }\r\n      };\r\n      fetchMessages();\r\n    }, 500);\r\n    return () => {\r\n      clearTimeout(delayDebounceFn);\r\n    };\r\n  }, [pageNumber, ticketId]);\r\n\r\n  useEffect(() => {\r\n    const companyId = localStorage.getItem(\"companyId\");\r\n    const socket = socketManager.getSocket(companyId);\r\n\r\n    socket.on(\"ready\", () => socket.emit(\"joinChatBox\", `${ticket.id}`));\r\n\r\n    socket.on(`company-${companyId}-appMessage`, (data) => {\r\n      if (data.action === \"create\" && data.message.ticketId === currentTicketId.current) {\r\n        dispatch({ type: \"ADD_MESSAGE\", payload: data.message });\r\n        scrollToBottom();\r\n      }\r\n\r\n      if (data.action === \"update\" && data.message.ticketId === currentTicketId.current) {\r\n        dispatch({ type: \"UPDATE_MESSAGE\", payload: data.message });\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, [ticketId, ticket, socketManager]);\r\n\r\n  const loadMore = () => {\r\n    setPageNumber((prevPageNumber) => prevPageNumber + 1);\r\n  };\r\n\r\n  const scrollToBottom = () => {\r\n    if (lastMessageRef.current) {\r\n      lastMessageRef.current.scrollIntoView({});\r\n    }\r\n  };\r\n\r\n  const handleScroll = (e) => {\r\n    if (!hasMore) return;\r\n    const { scrollTop } = e.currentTarget;\r\n\r\n    if (scrollTop === 0) {\r\n      document.getElementById(\"messagesList\").scrollTop = 1;\r\n    }\r\n\r\n    if (loading) {\r\n      return;\r\n    }\r\n\r\n    if (scrollTop < 50) {\r\n      loadMore();\r\n    }\r\n  };\r\n\r\n  const handleOpenMessageOptionsMenu = (e, message) => {\r\n    setAnchorEl(e.currentTarget);\r\n    setSelectedMessage(message);\r\n  };\r\n\r\n  const handleCloseMessageOptionsMenu = (e) => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const checkMessageMedia = (message) => {\r\n    if (message.mediaType === \"locationMessage\" && message.body.split('|').length >= 2) {\r\n      let locationParts = message.body.split('|')\r\n      let imageLocation = locationParts[0]\r\n      let linkLocation = locationParts[1]\r\n\r\n      let descriptionLocation = null\r\n\r\n      if (locationParts.length > 2)\r\n        descriptionLocation = message.body.split('|')[2]\r\n\r\n      return <LocationPreview image={imageLocation} link={linkLocation} description={descriptionLocation} />\r\n    }\r\n    /* else if (message.mediaType === \"vcard\") {\r\n      let array = message.body.split(\"\\n\");\r\n      let obj = [];\r\n      let contact = \"\";\r\n      for (let index = 0; index < array.length; index++) {\r\n        const v = array[index];\r\n        let values = v.split(\":\");\r\n        for (let ind = 0; ind < values.length; ind++) {\r\n          if (values[ind].indexOf(\"+\") !== -1) {\r\n            obj.push({ number: values[ind] });\r\n          }\r\n          if (values[ind].indexOf(\"FN\") !== -1) {\r\n            contact = values[ind + 1];\r\n          }\r\n        }\r\n      }\r\n      return <VcardPreview contact={contact} numbers={obj[0].number} />\r\n    } */\r\n    /*else if (message.mediaType === \"multi_vcard\") {\r\n      console.log(\"multi_vcard\")\r\n      console.log(message)\r\n    \t\r\n      if(message.body !== null && message.body !== \"\") {\r\n        let newBody = JSON.parse(message.body)\r\n        return (\r\n          <>\r\n            {\r\n            newBody.map(v => (\r\n              <VcardPreview contact={v.name} numbers={v.number} />\r\n            ))\r\n            }\r\n          </>\r\n        )\r\n      } else return (<></>)\r\n    }*/\r\n    else if (message.mediaType === \"image\") {\r\n      return <ModalImageCors imageUrl={message.mediaUrl} />;\r\n    } else if (message.mediaType === \"audio\") {\r\n      return (\r\n        <audio controls>\r\n          <source src={message.mediaUrl} type=\"audio/ogg\"></source>\r\n        </audio>\r\n      );\r\n    } else if (message.mediaType === \"video\") {\r\n      return (\r\n        <video\r\n          className={classes.messageMedia}\r\n          src={message.mediaUrl}\r\n          controls\r\n        />\r\n      );\r\n    } else {\r\n      return (\r\n        <>\r\n          <div className={classes.downloadMedia}>\r\n            <Button\r\n              startIcon={<GetApp />}\r\n              color=\"primary\"\r\n              variant=\"outlined\"\r\n              target=\"_blank\"\r\n              href={message.mediaUrl}\r\n            >\r\n              Download\r\n            </Button>\r\n          </div>\r\n          <Divider />\r\n        </>\r\n      );\r\n    }\r\n  };\r\n\r\n  const renderMessageAck = (message) => {\r\n    if (message.ack === 1) {\r\n      return <AccessTime fontSize=\"small\" className={classes.ackIcons} />;\r\n    }\r\n    if (message.ack === 2) {\r\n      return <Done fontSize=\"small\" className={classes.ackIcons} />;\r\n    }\r\n    if (message.ack === 3) {\r\n      return <DoneAll fontSize=\"small\" className={classes.ackIcons} />;\r\n    }\r\n    if (message.ack === 4 || message.ack === 5) {\r\n      return <DoneAll fontSize=\"small\" className={classes.ackDoneAllIcon} />;\r\n    }\r\n  };\r\n\r\n  const renderDailyTimestamps = (message, index) => {\r\n    if (index === 0) {\r\n      return (\r\n        <span\r\n          className={classes.dailyTimestamp}\r\n          key={`timestamp-${message.id}`}\r\n        >\r\n          <div className={classes.dailyTimestampText}>\r\n            {format(parseISO(messagesList[index].createdAt), \"dd/MM/yyyy\")}\r\n          </div>\r\n        </span>\r\n      );\r\n    }\r\n    if (index < messagesList.length - 1) {\r\n      let messageDay = parseISO(messagesList[index].createdAt);\r\n      let previousMessageDay = parseISO(messagesList[index - 1].createdAt);\r\n\r\n      if (!isSameDay(messageDay, previousMessageDay)) {\r\n        return (\r\n          <span\r\n            className={classes.dailyTimestamp}\r\n            key={`timestamp-${message.id}`}\r\n          >\r\n            <div className={classes.dailyTimestampText}>\r\n              {format(parseISO(messagesList[index].createdAt), \"dd/MM/yyyy\")}\r\n            </div>\r\n          </span>\r\n        );\r\n      }\r\n    }\r\n    if (index === messagesList.length - 1) {\r\n      return (\r\n        <div\r\n          key={`ref-${message.createdAt}`}\r\n          ref={lastMessageRef}\r\n          style={{ float: \"left\", clear: \"both\" }}\r\n        />\r\n      );\r\n    }\r\n  };\r\n\r\n  const renderNumberTicket = (message, index) => {\r\n    if (index < messagesList.length && index > 0) {\r\n\r\n      let messageTicket = message.ticketId;\r\n      let connectionName = message.ticket?.whatsapp?.name;\r\n      let previousMessageTicket = messagesList[index - 1].ticketId;\r\n\r\n      if (messageTicket !== previousMessageTicket) {\r\n        return (\r\n          <center>\r\n            <div className={classes.ticketNunberClosed}>\r\n              Conversa encerrada: {format(parseISO(messagesList[index - 1].createdAt), \"dd/MM/yyyy HH:mm:ss\")}\r\n            </div>\r\n\r\n            <div className={classes.ticketNunberOpen}>\r\n              Conversa iniciada: {format(parseISO(message.createdAt), \"dd/MM/yyyy HH:mm:ss\")}\r\n            </div>\r\n          </center>\r\n        );\r\n      }\r\n    }\r\n  };\r\n\r\n  const renderMessageDivider = (message, index) => {\r\n    if (index < messagesList.length && index > 0) {\r\n      let messageUser = messagesList[index].fromMe;\r\n      let previousMessageUser = messagesList[index - 1].fromMe;\r\n\r\n      if (messageUser !== previousMessageUser) {\r\n        return (\r\n          <span style={{ marginTop: 16 }} key={`divider-${message.id}`}></span>\r\n        );\r\n      }\r\n    }\r\n  };\r\n\r\n  const renderQuotedMessage = (message) => {\r\n    return (\r\n      <div\r\n        className={clsx(classes.quotedContainerLeft, {\r\n          [classes.quotedContainerRight]: message.fromMe,\r\n        })}\r\n      >\r\n        <span\r\n          className={clsx(classes.quotedSideColorLeft, {\r\n            [classes.quotedSideColorRight]: message.quotedMsg?.fromMe,\r\n          })}\r\n        ></span>\r\n        <div className={classes.quotedMsg}>\r\n          {!message.quotedMsg?.fromMe && (\r\n            <span className={classes.messageContactName}>\r\n              {message.quotedMsg?.contact?.name}\r\n            </span>\r\n          )}\r\n\r\n          {message.quotedMsg.mediaType === \"audio\"\r\n            && (\r\n              <div className={classes.downloadMedia}>\r\n                <audio controls>\r\n                  <source src={message.quotedMsg.mediaUrl} type=\"audio/ogg\"></source>\r\n                </audio>\r\n              </div>\r\n            )\r\n          }\r\n          {message.quotedMsg.mediaType === \"video\"\r\n            && (\r\n              <video\r\n                className={classes.messageMedia}\r\n                src={message.quotedMsg.mediaUrl}\r\n                controls\r\n              />\r\n            )\r\n          }\r\n          {message.quotedMsg.mediaType === \"application\"\r\n            && (\r\n              <div className={classes.downloadMedia}>\r\n                <Button\r\n                  startIcon={<GetApp />}\r\n                  color=\"primary\"\r\n                  variant=\"outlined\"\r\n                  target=\"_blank\"\r\n                  href={message.quotedMsg.mediaUrl}\r\n                >\r\n                  Download\r\n                </Button>\r\n              </div>\r\n            )\r\n          }\r\n\r\n          {message.quotedMsg.mediaType === \"image\"\r\n            && (\r\n              <ModalImageCors imageUrl={message.quotedMsg.mediaUrl} />)\r\n            || message.quotedMsg?.body}\r\n\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const renderMessages = () => {\r\n    if (messagesList.length > 0) {\r\n      const viewMessagesList = messagesList.map((message, index) => {\r\n\r\n        if (message.mediaType === \"call_log\") {\r\n          return (\r\n            <React.Fragment key={message.id}>\r\n              {renderDailyTimestamps(message, index)}\r\n              {renderNumberTicket(message, index)}\r\n              {renderMessageDivider(message, index)}\r\n              <div className={classes.messageCenter}>\r\n                <IconButton\r\n                  variant=\"contained\"\r\n                  size=\"small\"\r\n                  id=\"messageActionsButton\"\r\n                  disabled={message.isDeleted}\r\n                  className={classes.messageActionsButton}\r\n                  onClick={(e) => handleOpenMessageOptionsMenu(e, message)}\r\n                >\r\n                  <ExpandMore />\r\n                </IconButton>\r\n                {isGroup && (\r\n                  <span className={classes.messageContactName}>\r\n                    {message.contact?.name}\r\n                  </span>\r\n                )}\r\n                <div>\r\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 17\" width=\"20\" height=\"17\">\r\n                    <path fill=\"#df3333\" d=\"M18.2 12.1c-1.5-1.8-5-2.7-8.2-2.7s-6.7 1-8.2 2.7c-.7.8-.3 2.3.2 2.8.2.2.3.3.5.3 1.4 0 3.6-.7 3.6-.7.5-.2.8-.5.8-1v-1.3c.7-1.2 5.4-1.2 6.4-.1l.1.1v1.3c0 .2.1.4.2.6.1.2.3.3.5.4 0 0 2.2.7 3.6.7.2 0 1.4-2 .5-3.1zM5.4 3.2l4.7 4.6 5.8-5.7-.9-.8L10.1 6 6.4 2.3h2.5V1H4.1v4.8h1.3V3.2z\"></path>\r\n                  </svg> <span>Chamada de voz/vídeo perdida às {format(parseISO(message.createdAt), \"HH:mm\")}</span>\r\n                </div>\r\n              </div>\r\n            </React.Fragment>\r\n          );\r\n        }\r\n\r\n        if (!message.fromMe) {\r\n          return (\r\n            <React.Fragment key={message.id}>\r\n              {renderDailyTimestamps(message, index)}\r\n              {renderNumberTicket(message, index)}\r\n              {renderMessageDivider(message, index)}\r\n              <div className={classes.messageLeft}>\r\n                <IconButton\r\n                  variant=\"contained\"\r\n                  size=\"small\"\r\n                  id=\"messageActionsButton\"\r\n                  disabled={message.isDeleted}\r\n                  className={classes.messageActionsButton}\r\n                  onClick={(e) => handleOpenMessageOptionsMenu(e, message)}\r\n                >\r\n                  <ExpandMore />\r\n                </IconButton>\r\n                {isGroup && (\r\n                  <span className={classes.messageContactName}>\r\n                    {message.contact?.name}\r\n                  </span>\r\n                )}\r\n\r\n                {/* aviso de mensagem apagado pelo contato */}\r\n                {message.isDeleted && (\r\n                  <div>\r\n                    <span className={\"message-deleted\"}\r\n                    >Essa mensagem foi apagada pelo contato &nbsp;\r\n                      <Block\r\n                        color=\"error\"\r\n                        fontSize=\"small\"\r\n                        className={classes.deletedIcon}\r\n                      />\r\n                    </span>\r\n                  </div>\r\n                )}\r\n\r\n                {(message.mediaUrl || message.mediaType === \"locationMessage\" || message.mediaType === \"vcard\"\r\n                  //|| message.mediaType === \"multi_vcard\" \r\n                ) && checkMessageMedia(message)}\r\n                <div className={classes.textContentItem}>\r\n                  {message.quotedMsg && renderQuotedMessage(message)}\r\n                  <MarkdownWrapper>{message.mediaType === \"locationMessage\" ? null : message.body}</MarkdownWrapper>\r\n                  <span className={classes.timestamp}>\r\n\t\t\t\t    {message.isEdited && <span>Editada </span>}\r\n                    {format(parseISO(message.createdAt), \"HH:mm\")}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </React.Fragment>\r\n          );\r\n        } else {\r\n          return (\r\n            <React.Fragment key={message.id}>\r\n              {renderDailyTimestamps(message, index)}\r\n              {renderNumberTicket(message, index)}\r\n              {renderMessageDivider(message, index)}\r\n              <div className={classes.messageRight}>\r\n                <IconButton\r\n                  variant=\"contained\"\r\n                  size=\"small\"\r\n                  id=\"messageActionsButton\"\r\n                  disabled={message.isDeleted}\r\n                  className={classes.messageActionsButton}\r\n                  onClick={(e) => handleOpenMessageOptionsMenu(e, message)}\r\n                >\r\n                  <ExpandMore />\r\n                </IconButton>\r\n                {(message.mediaUrl || message.mediaType === \"locationMessage\" || message.mediaType === \"vcard\"\r\n                  //|| message.mediaType === \"multi_vcard\" \r\n                ) && checkMessageMedia(message)}\r\n                <div\r\n                  className={clsx(classes.textContentItem, {\r\n                    [classes.textContentItemDeleted]: message.isDeleted,\r\n\t\t\t\t\t[classes.textContentItemEdited]: message.isEdited,\r\n                  })}\r\n                >\r\n                  {message.isDeleted && (\r\n                    <Block\r\n                      color=\"disabled\"\r\n                      fontSize=\"small\"\r\n                      className={classes.deletedIcon}\r\n                    />\r\n                  )}\r\n                  {message.quotedMsg && renderQuotedMessage(message)}\r\n                  <MarkdownWrapper>{message.body}</MarkdownWrapper>\r\n                  <span className={classes.timestamp}>\r\n\t\t\t\t    {message.isEdited && <span>Editada </span>}\r\n                    {format(parseISO(message.createdAt), \"HH:mm\")}\r\n                    {renderMessageAck(message)}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </React.Fragment>\r\n          );\r\n        }\r\n      });\r\n      return viewMessagesList;\r\n    } else {\r\n      return <div>Diga olá para seu novo contato!</div>;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={classes.messagesListWrapper}>\r\n      <MessageOptionsMenu\r\n        message={selectedMessage}\r\n        anchorEl={anchorEl}\r\n        menuOpen={messageOptionsMenuOpen}\r\n        handleClose={handleCloseMessageOptionsMenu}\r\n      />\r\n      <div\r\n        id=\"messagesList\"\r\n        className={classes.messagesList}\r\n        onScroll={handleScroll}\r\n      >\r\n        {messagesList.length > 0 ? renderMessages() : []}\r\n      </div>\r\n      {loading && (\r\n        <div>\r\n          <CircularProgress className={classes.circleLoading} />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MessagesList;\r\n","import React from \"react\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Avatar, Card, CardHeader } from \"@material-ui/core\";\r\nimport Skeleton from \"@material-ui/lab/Skeleton\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tticketHeader: {\r\n\t\tdisplay: \"flex\",\r\n\t\tbackgroundColor: \"#eee\",\r\n\t\tflex: \"none\",\r\n\t\tborderBottom: \"1px solid rgba(0, 0, 0, 0.12)\",\r\n\t},\r\n}));\r\n\r\nconst TicketHeaderSkeleton = () => {\r\n\tconst classes = useStyles();\r\n\r\n\treturn (\r\n\t\t<Card square className={classes.ticketHeader}>\r\n\t\t\t<CardHeader\r\n\t\t\t\ttitleTypographyProps={{ noWrap: true }}\r\n\t\t\t\tsubheaderTypographyProps={{ noWrap: true }}\r\n\t\t\t\tavatar={\r\n\t\t\t\t\t<Skeleton animation=\"wave\" variant=\"circle\">\r\n\t\t\t\t\t\t<Avatar alt=\"contact_image\" />\r\n\t\t\t\t\t</Skeleton>\r\n\t\t\t\t}\r\n\t\t\t\ttitle={<Skeleton animation=\"wave\" width={80} />}\r\n\t\t\t\tsubheader={<Skeleton animation=\"wave\" width={140} />}\r\n\t\t\t/>\r\n\t\t</Card>\r\n\t);\r\n};\r\n\r\nexport default TicketHeaderSkeleton;\r\n","import React from \"react\";\r\n\r\nimport { Card } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport TicketHeaderSkeleton from \"../TicketHeaderSkeleton\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tticketHeader: {\r\n\t\tdisplay: \"flex\",\r\n\t\tbackgroundColor: theme.palette.tabHeaderBackground,\r\n\t\tflex: \"none\",\r\n\t\tborderBottom: \"1px solid rgba(0, 0, 0, 0.12)\",\r\n\t\t[theme.breakpoints.down(\"sm\")]: {\r\n\t\t\tflexWrap: \"wrap\"\r\n\t\t}\r\n\t},\r\n}));\r\n\r\n\r\nconst TicketHeader = ({ loading, children }) => {\r\n\tconst classes = useStyles();\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{loading ? (\r\n\t\t\t\t<TicketHeaderSkeleton />\r\n\t\t\t) : (\r\n\t\t\t\t<Card square className={classes.ticketHeader}>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</Card>\r\n\t\t\t)}\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default TicketHeader;\r\n","import React, { useState, useEffect } from \"react\";\r\n\r\nimport { Avatar, CardHeader } from \"@material-ui/core\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nconst TicketInfo = ({ contact, ticket, onClick }) => {\r\n\tconst { user } = ticket\r\n\tconst [userName, setUserName] = useState('')\r\n\tconst [contactName, setContactName] = useState('')\r\n\r\n\tuseEffect(() => {\r\n\t\tif (contact) {\r\n\t\t\tsetContactName(contact.name);\r\n\t\t\tif(document.body.offsetWidth < 600) {\r\n\t\t\t\tif (contact.name.length > 10) {\r\n\t\t\t\t\tconst truncadName = contact.name.substring(0, 10) + '...';\r\n\t\t\t\t\tsetContactName(truncadName);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (user && contact) {\r\n\t\t\tsetUserName(`${i18n.t(\"messagesList.header.assignedTo\")} ${user.name}`);\r\n\r\n\t\t\tif(document.body.offsetWidth < 600) {\r\n\t\t\t\tsetUserName(`${user.name}`);\r\n\t\t\t}\r\n\t\t}\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, [])\r\n\r\n\treturn (\r\n\t\t<CardHeader\r\n\t\t\tonClick={onClick}\r\n\t\t\tstyle={{ cursor: \"pointer\" }}\r\n\t\t\ttitleTypographyProps={{ noWrap: true }}\r\n\t\t\tsubheaderTypographyProps={{ noWrap: true }}\r\n\t\t\tavatar={<Avatar src={contact.profilePicUrl} alt=\"contact_image\" />}\r\n\t\t\ttitle={`${contactName} #${ticket.id}`}\r\n\t\t\tsubheader={ticket.user && `${userName}`}\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nexport default TicketInfo;\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\n\r\nimport { toast } from \"react-toastify\";\r\nimport api from \"../../services/api\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nimport {\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  makeStyles,\r\n} from \"@material-ui/core\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport MessagesList from \"../MessagesList\";\r\nimport { ReplyMessageProvider } from \"../../context/ReplyingMessage/ReplyingMessageContext\";\r\nimport TicketHeader from \"../TicketHeader\";\r\nimport TicketInfo from \"../TicketInfo\";\r\nimport { SocketContext } from \"../../context/Socket/SocketContext\";\r\n\r\nconst drawerWidth = 320;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    height: \"100%\",\r\n    position: \"relative\",\r\n    overflow: \"hidden\",\r\n  },\r\n\r\n  mainWrapper: {\r\n    flex: 1,\r\n    height: \"100%\",\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    overflow: \"hidden\",\r\n    borderTopLeftRadius: 0,\r\n    borderBottomLeftRadius: 0,\r\n    borderLeft: \"0\",\r\n    marginRight: -drawerWidth,\r\n    transition: theme.transitions.create(\"margin\", {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n  },\r\n\r\n  mainWrapperShift: {\r\n    borderTopRightRadius: 0,\r\n    borderBottomRightRadius: 0,\r\n    transition: theme.transitions.create(\"margin\", {\r\n      easing: theme.transitions.easing.easeOut,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n    marginRight: 0,\r\n  },\r\n}));\r\n\r\nexport default function TicketMessagesDialog({ open, handleClose, ticketId }) {\r\n  const history = useHistory();\r\n  const classes = useStyles();\r\n\r\n  const { user } = useContext(AuthContext);\r\n\r\n  const [, setDrawerOpen] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n  const [contact, setContact] = useState({});\r\n  const [ticket, setTicket] = useState({});\r\n\r\n  const socketManager = useContext(SocketContext);\r\n\r\n  useEffect(() => {\r\n    let delayDebounceFn = null;\r\n    if (open) {\r\n      setLoading(true);\r\n      delayDebounceFn = setTimeout(() => {\r\n        const fetchTicket = async () => {\r\n          try {\r\n            const { data } = await api.get(\"/tickets/\" + ticketId);\r\n            const { queueId } = data;\r\n            const { queues, profile } = user;\r\n\r\n            const queueAllowed = queues.find((q) => q.id === queueId);\r\n            if (queueAllowed === undefined && profile !== \"admin\") {\r\n              toast.error(\"Acesso não permitido\");\r\n              history.push(\"/tickets\");\r\n              return;\r\n            }\r\n\r\n            setContact(data.contact);\r\n            setTicket(data);\r\n            setLoading(false);\r\n          } catch (err) {\r\n            setLoading(false);\r\n            toastError(err);\r\n          }\r\n        };\r\n        fetchTicket();\r\n      }, 500);\r\n    }\r\n    return () => {\r\n      if (delayDebounceFn !== null) {\r\n        clearTimeout(delayDebounceFn);\r\n      }\r\n    };\r\n  }, [ticketId, user, history, open]);\r\n\r\n  useEffect(() => {\r\n    const companyId = localStorage.getItem(\"companyId\");\r\n    let socket = null;\r\n\r\n    if (open) {\r\n      const socket = socketManager.getSocket(companyId);\r\n      socket.on(\"ready\", () => socket.emit(\"joinChatBox\", `${ticket.id}`));\r\n\r\n      socket.on(`company-${companyId}-ticket`, (data) => {\r\n        if (data.action === \"update\" && data.ticket.id === ticket.id) {\r\n          setTicket(data.ticket);\r\n        }\r\n\r\n        if (data.action === \"delete\" && data.ticketId === ticket.id) {\r\n          // toast.success(\"Ticket deleted sucessfully.\");\r\n          history.push(\"/tickets\");\r\n        }\r\n      });\r\n\r\n      socket.on(`company-${companyId}-contact`, (data) => {\r\n        if (data.action === \"update\") {\r\n          setContact((prevState) => {\r\n            if (prevState.id === data.contact?.id) {\r\n              return { ...prevState, ...data.contact };\r\n            }\r\n            return prevState;\r\n          });\r\n        }\r\n      });\r\n    }\r\n\r\n    return () => {\r\n      if (socket !== null) {\r\n        socket.disconnect();\r\n      }\r\n    };\r\n  }, [ticketId, ticket, history, open, socketManager]);\r\n\r\n  const handleDrawerOpen = () => {\r\n    setDrawerOpen(true);\r\n  };\r\n\r\n  const renderTicketInfo = () => {\r\n    if (ticket.user !== undefined) {\r\n      return (\r\n        <TicketInfo\r\n          contact={contact}\r\n          ticket={ticket}\r\n          onClick={handleDrawerOpen}\r\n        />\r\n      );\r\n    }\r\n  };\r\n\r\n  const renderMessagesList = () => {\r\n    return (\r\n      <Box className={classes.root}>\r\n        <MessagesList\r\n          ticket={ticket}\r\n          ticketId={ticket.id}\r\n          isGroup={ticket.isGroup}\r\n        ></MessagesList>\r\n      </Box>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Dialog maxWidth=\"md\" onClose={handleClose} open={open}>\r\n      <TicketHeader loading={loading}>{renderTicketInfo()}</TicketHeader>\r\n      <ReplyMessageProvider>{renderMessagesList()}</ReplyMessageProvider>\r\n      <DialogActions>\r\n        <Button onClick={handleClose} color=\"primary\">\r\n          Fechar\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n}\r\n","function getRGB(c) {\r\n  return parseInt(c, 16) || c\r\n}\r\n\r\nfunction getsRGB(c) {\r\n  return getRGB(c) / 255 <= 0.03928\r\n    ? getRGB(c) / 255 / 12.92\r\n    : Math.pow((getRGB(c) / 255 + 0.055) / 1.055, 2.4)\r\n}\r\n\r\nfunction getLuminance(hexColor) {\r\n  return (\r\n    0.2126 * getsRGB(hexColor.substr(1, 2)) +\r\n    0.7152 * getsRGB(hexColor.substr(3, 2)) +\r\n    0.0722 * getsRGB(hexColor.substr(-2))\r\n  )\r\n}\r\n\r\nfunction getContrast(f, b) {\r\n  const L1 = getLuminance(f)\r\n  const L2 = getLuminance(b)\r\n  return (Math.max(L1, L2) + 0.05) / (Math.min(L1, L2) + 0.05)\r\n}\r\n\r\nfunction getTextColor(bgColor) {\r\n  const whiteContrast = getContrast(bgColor, '#ffffff')\r\n  const blackContrast = getContrast(bgColor, '#000000')\r\n\r\n  return whiteContrast > blackContrast ? '#ffffff' : '#000000'\r\n}\r\n\r\nconst contrastColor = (color) => {\r\n    return getTextColor(color);\r\n}\r\n\r\nexport default contrastColor;","import { makeStyles } from \"@material-ui/styles\";\r\nimport React from \"react\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    tag: {\r\n        padding: \"1px 5px\",\r\n        borderRadius: \"3px\",\r\n        fontSize: \"0.8em\",\r\n        fontWeight: \"bold\",\r\n        color: \"#FFF\",\r\n        marginRight: \"5px\",\r\n        whiteSpace: \"nowrap\"\r\n    }\r\n}));\r\n\r\nconst ContactTag = ({ tag }) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <div className={classes.tag} style={{ backgroundColor: tag.color, marginTop: \"2px\" }}>\r\n            {tag.name.toUpperCase()}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ContactTag;","import React, { useEffect, useState } from \"react\";\r\nimport {\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n  List,\r\n  ListItem,\r\n} from \"@material-ui/core\";\r\nimport api from \"../../services/api\";\r\n\r\nconst TicketAbstractDialog = ({ ticketId, open, handleClose }) => {\r\n\r\n  const [abstract, setAbstract] = useState([]);\r\n\r\n  useEffect(async () => {\r\n    if (open) {\r\n      const res = await api.get(`/tickets/${ticketId}/abstract`);\r\n      setAbstract(res.data);\r\n    }\r\n  }, [open]);\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={handleClose}\r\n      maxWidth=\"sm\"\r\n      fullWidth\r\n      scroll=\"paper\"\r\n    >\r\n      <DialogTitle>Resumo</DialogTitle>\r\n      <DialogContent>\r\n        <List>\r\n          {abstract.map((value, index) => (\r\n            <ListItem key={index} style={{display: \"flex\", flexDirection: \"column\", alignItems: \"flex-start\" }}>\r\n              <span><strong>Pergunta {index+1}:&nbsp;</strong>{value.question}</span>\r\n              <span><strong>Resposta {index+1}:&nbsp;</strong>{value.answer}</span>\r\n            </ListItem>\r\n          ))}\r\n        </List>\r\n        {abstract.length === 0 && (<span>Nada para ver por aqui ainda</span>)}\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={handleClose} color=\"primary\">\r\n          Fechar\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default TicketAbstractDialog;\r\n","import React, { useState, useEffect, useRef, useContext } from \"react\";\r\n\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport { parseISO, format, isSameDay } from \"date-fns\";\r\nimport clsx from \"clsx\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { green, grey, red, blue } from \"@material-ui/core/colors\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\r\nimport ListItemSecondaryAction from \"@material-ui/core/ListItemSecondaryAction\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport Badge from \"@material-ui/core/Badge\";\r\nimport Box from \"@material-ui/core/Box\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nimport api from \"../../services/api\";\r\nimport ButtonWithSpinner from \"../ButtonWithSpinner\";\r\nimport MarkdownWrapper from \"../MarkdownWrapper\";\r\nimport { Tooltip } from \"@material-ui/core\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport { TicketsContext } from \"../../context/Tickets/TicketsContext\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\n\r\nimport RoomIcon from '@material-ui/icons/Room';\r\nimport WhatsAppIcon from \"@material-ui/icons/WhatsApp\";\r\nimport AndroidIcon from \"@material-ui/icons/Android\";\r\nimport VisibilityIcon from \"@material-ui/icons/Visibility\";\r\nimport TicketMessagesDialog from \"../TicketMessagesDialog\";\r\nimport DoneIcon from '@material-ui/icons/Done';\r\nimport ClearOutlinedIcon from '@material-ui/icons/ClearOutlined';\r\nimport contrastColor from \"../../helpers/contrastColor\";\r\nimport ContactTag from \"../ContactTag\";\r\nimport TicketAbstractDialog from \"../TicketAbstractDialog\";\r\nimport { DescriptionOutlined } from \"@material-ui/icons\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  ticket: {\r\n    position: \"relative\",\r\n  },\r\n\r\n  pendingTicket: {\r\n    cursor: \"unset\",\r\n  },\r\n  queueTag: {\r\n    background: \"#FCFCFC\",\r\n    color: \"#000\",\r\n    marginRight: 1,\r\n    padding: 1,\r\n    fontWeight: 'bold',\r\n    paddingLeft: 5,\r\n    paddingRight: 5,\r\n    borderRadius: 3,\r\n    fontSize: \"0.8em\",\r\n    whiteSpace: \"nowrap\"\r\n  },\r\n  noTicketsDiv: {\r\n    display: \"flex\",\r\n    height: \"100px\",\r\n    margin: 40,\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n  newMessagesCount: {\r\n    position: \"absolute\",\r\n    alignSelf: \"center\",\r\n    marginRight: 8,\r\n    marginLeft: \"auto\",\r\n    top: \"10px\",\r\n    left: \"20px\",\r\n    borderRadius: 0,\r\n  },\r\n  noTicketsText: {\r\n    textAlign: \"center\",\r\n    color: \"rgb(104, 121, 146)\",\r\n    fontSize: \"14px\",\r\n    lineHeight: \"1.4\",\r\n  },\r\n  connectionTag: {\r\n    background: \"green\",\r\n    color: \"#FFF\",\r\n    marginRight: 1,\r\n    padding: 1,\r\n    fontWeight: 'bold',\r\n    paddingLeft: 5,\r\n    paddingRight: 5,\r\n    borderRadius: 3,\r\n    fontSize: \"0.8em\",\r\n    whiteSpace: \"nowrap\"\r\n  },\r\n  noTicketsTitle: {\r\n    textAlign: \"center\",\r\n    fontSize: \"16px\",\r\n    fontWeight: \"600\",\r\n    margin: \"0px\",\r\n  },\r\n\r\n  contactNameWrapper: {\r\n    display: \"flex\",\r\n    justifyContent: \"space-between\",\r\n    marginLeft: \"5px\",\r\n  },\r\n\r\n  lastMessageTime: {\r\n    justifySelf: \"flex-end\",\r\n    textAlign: \"right\",\r\n    position: \"relative\",\r\n    top: -21\r\n  },\r\n\r\n  closedBadge: {\r\n    alignSelf: \"center\",\r\n    justifySelf: \"flex-end\",\r\n    marginRight: 32,\r\n    marginLeft: \"auto\",\r\n  },\r\n\r\n  contactLastMessage: {\r\n    paddingRight: \"0%\",\r\n    marginLeft: \"5px\",\r\n  },\r\n\r\n\r\n  badgeStyle: {\r\n    color: \"white\",\r\n    backgroundColor: green[500],\r\n  },\r\n\r\n  acceptButton: {\r\n    position: \"absolute\",\r\n    right: \"108px\",\r\n  },\r\n\r\n\r\n  acceptButton: {\r\n    position: \"absolute\",\r\n    left: \"50%\",\r\n  },\r\n\r\n\r\n  ticketQueueColor: {\r\n    flex: \"none\",\r\n    width: \"8px\",\r\n    height: \"100%\",\r\n    position: \"absolute\",\r\n    top: \"0%\",\r\n    left: \"0%\",\r\n  },\r\n\r\n  ticketInfo: {\r\n    position: \"relative\",\r\n    top: -13\r\n  },\r\n  secondaryContentSecond: {\r\n    display: 'flex',\r\n    // marginTop: 5,\r\n    //marginLeft: \"5px\",\r\n    alignItems: \"flex-start\",\r\n    flexWrap: \"wrap\",\r\n    flexDirection: \"row\",\r\n    alignContent: \"flex-start\",\r\n  },\r\n  ticketInfo1: {\r\n    position: \"relative\",\r\n    top: 13,\r\n    right: 0\r\n  },\r\n  Radiusdot: {\r\n    \"& .MuiBadge-badge\": {\r\n      borderRadius: 2,\r\n      position: \"inherit\",\r\n      height: 16,\r\n      margin: 2,\r\n      padding: 3\r\n    },\r\n    \"& .MuiBadge-anchorOriginTopRightRectangle\": {\r\n      transform: \"scale(1) translate(0%, -40%)\",\r\n    },\r\n\r\n  }\r\n}));\r\n  {/*PLW DESIGN INSERIDO O dentro do const handleChangeTab*/}\r\n  const TicketListItemCustom = ({ ticket }) => {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  const [loading, setLoading] = useState(false);\r\n  const [ticketUser, setTicketUser] = useState(null);\r\n  const [ticketQueueName, setTicketQueueName] = useState(null);\r\n  const [ticketQueueColor, setTicketQueueColor] = useState(null);\r\n  const [tag, setTag] = useState([]);\r\n  const [whatsAppName, setWhatsAppName] = useState(null);\r\n\r\n  const [openTicketMessageDialog, setOpenTicketMessageDialog] = useState(false);\r\n  const [openTicketAbstractDialog, setOpenTicketAbstractDialog] = useState(false);\r\n  const { ticketId } = useParams();\r\n  const isMounted = useRef(true);\r\n  const { setCurrentTicket } = useContext(TicketsContext);\r\n  const { user } = useContext(AuthContext);\r\n  const { profile } = user;\r\n\r\n  useEffect(() => {\r\n    if (ticket.userId && ticket.user) {\r\n      setTicketUser(ticket.user?.name?.toUpperCase());\r\n    }\r\n    setTicketQueueName(ticket.queue?.name?.toUpperCase());\r\n    setTicketQueueColor(ticket.queue?.color);\r\n\r\n    if (ticket.whatsappId && ticket.whatsapp) {\r\n      setWhatsAppName(ticket.whatsapp.name?.toUpperCase());\r\n    }\r\n\r\n    setTag(ticket?.tags);\r\n\r\n    return () => {\r\n      isMounted.current = false;\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  {/*CÓDIGO NOVO SAUDAÇÃO*/}\r\n  const handleCloseTicket = async (id) => {\r\n    setTag(ticket?.tags);\r\n    setLoading(true);\r\n    try {\r\n      await api.put(`/tickets/${id}`, {\r\n        status: \"closed\",\r\n        userId: user?.id,\r\n        queueId: ticket?.queue?.id,\r\n        useIntegration: false,\r\n        promptId: null,\r\n        integrationId: null\r\n      });\r\n    } catch (err) {\r\n      setLoading(false);\r\n      toastError(err);\r\n    }\r\n    if (isMounted.current) {\r\n      setLoading(false);\r\n    }\r\n    history.push(`/tickets/`);\r\n  };\r\n\r\n  const handleReopenTicket = async (id) => {\r\n    setLoading(true);\r\n    try {\r\n      await api.put(`/tickets/${id}`, {\r\n        status: \"open\",\r\n        userId: user?.id,\r\n        queueId: ticket?.queue?.id\r\n      });\r\n    } catch (err) {\r\n      setLoading(false);\r\n      toastError(err);\r\n    }\r\n    if (isMounted.current) {\r\n      setLoading(false);\r\n    }\r\n    history.push(`/tickets/${ticket.uuid}`);\r\n  };\r\n\r\n    const handleAcepptTicket = async (id) => {\r\n        setLoading(true);\r\n        try {\r\n            await api.put(`/tickets/${id}`, {\r\n                status: \"open\",\r\n                userId: user?.id,\r\n            });\r\n            \r\n            let settingIndex;\r\n\r\n            try {\r\n                const { data } = await api.get(\"/settings/\");\r\n                \r\n                settingIndex = data.filter((s) => s.key === \"sendGreetingAccepted\");\r\n                \r\n            } catch (err) {\r\n                toastError(err);\r\n                   \r\n            }\r\n            \r\n            if (settingIndex[0].value === \"enabled\" && !ticket.isGroup) {\r\n                handleSendMessage(ticket.id);\r\n                \r\n            }\r\n\r\n        } catch (err) {\r\n            setLoading(false);\r\n            \r\n            toastError(err);\r\n        }\r\n        if (isMounted.current) {\r\n            setLoading(false);\r\n        }\r\n\r\n        // handleChangeTab(null, \"tickets\");\r\n        // handleChangeTab(null, \"open\");\r\n        history.push(`/tickets/${ticket.uuid}`);\r\n    };\r\n\t\r\n\t    const handleSendMessage = async (id) => {\r\n        \r\n        const msg = `{{ms}} *{{name}}*, meu nome é *${user?.name}* e agora vou prosseguir com seu atendimento!`;\r\n        const message = {\r\n            read: 1,\r\n            fromMe: true,\r\n            mediaUrl: \"\",\r\n            body: `*Mensagem Automática:*\\n${msg.trim()}`,\r\n        };\r\n        try {\r\n            await api.post(`/messages/${id}`, message);\r\n        } catch (err) {\r\n            toastError(err);\r\n            \r\n        }\r\n    };\r\n\t{/*CÓDIGO NOVO SAUDAÇÃO*/}\r\n\r\n  const handleSelectTicket = (ticket) => {\r\n    const code = uuidv4();\r\n    const { id, uuid } = ticket;\r\n    setCurrentTicket({ id, uuid, code });\r\n  };\r\n\r\n\r\n  const renderTicketInfo = () => {\r\n    if (ticketUser) {\r\n\r\n      return (\r\n        <>\r\n          {ticket.chatbot && (\r\n            <Tooltip title=\"Chatbot\">\r\n              <AndroidIcon\r\n                fontSize=\"small\"\r\n                style={{ color: grey[700], marginRight: 5 }}\r\n              />\r\n            </Tooltip>\r\n          )}\r\n\r\n          {/* </span> */}\r\n        </>\r\n      );\r\n    } else {\r\n      return (\r\n        <>\r\n          {ticket.chatbot && (\r\n            <Tooltip title=\"Chatbot\">\r\n              <AndroidIcon\r\n                fontSize=\"small\"\r\n                style={{ color: grey[700], marginRight: 5 }}\r\n              />\r\n            </Tooltip>\r\n          )}\r\n        </>\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <React.Fragment key={ticket.id}>\r\n      <TicketAbstractDialog\r\n        open={openTicketAbstractDialog}\r\n        handleClose={() => setOpenTicketAbstractDialog(false)}\r\n        ticketId={ticket.id}\r\n      ></TicketAbstractDialog>\r\n      <TicketMessagesDialog\r\n        open={openTicketMessageDialog}\r\n        handleClose={() => setOpenTicketMessageDialog(false)}\r\n        ticketId={ticket.id}\r\n      ></TicketMessagesDialog>\r\n      <ListItem dense button\r\n        onClick={(e) => {\r\n          if (ticket.status === \"pending\") return;\r\n          handleSelectTicket(ticket);\r\n        }}\r\n        selected={ticketId && +ticketId === ticket.id}\r\n        className={clsx(classes.ticket, {\r\n          [classes.pendingTicket]: ticket.status === \"pending\",\r\n        })}\r\n      >\r\n        <Tooltip arrow placement=\"right\" title={ticket.queue?.name?.toUpperCase() || \"SEM FILA\"} >\r\n          <span style={{ backgroundColor: ticket.queue?.color || \"#7C7C7C\" }} className={classes.ticketQueueColor}></span>\r\n        </Tooltip>\r\n        <ListItemAvatar>\r\n          {ticket.status !== \"pending\" ?\r\n            <Avatar\r\n              style={{\r\n                marginTop: \"-20px\",\r\n                marginLeft: \"-3px\",\r\n                width: \"55px\",\r\n                height: \"55px\",\r\n                borderRadius: \"10%\",\r\n              }}\r\n              src={ticket?.contact?.profilePicUrl}\r\n            />\r\n            :\r\n            <Avatar\r\n              style={{\r\n                marginTop: \"-30px\",\r\n                marginLeft: \"0px\",\r\n                width: \"50px\",\r\n                height: \"50px\",\r\n                borderRadius: \"10%\",\r\n              }}\r\n              src={ticket?.contact?.profilePicUrl}\r\n            />\r\n          }\r\n        </ListItemAvatar>\r\n        <ListItemText\r\n          disableTypography\r\n\r\n          primary={\r\n            <span className={classes.contactNameWrapper}>\r\n              <Typography\r\n                noWrap\r\n                component=\"span\"\r\n                variant=\"body2\"\r\n                color=\"textPrimary\"\r\n              >\r\n                {ticket.contact.name}\r\n                {profile === \"admin\" && (\r\n                  <Tooltip title=\"Espiar Conversa\">\r\n                    <VisibilityIcon\r\n                      onClick={() => setOpenTicketMessageDialog(true)}\r\n                      fontSize=\"small\"\r\n                      style={{\r\n                        color: blue[700],\r\n                        cursor: \"pointer\",\r\n                        marginLeft: 10,\r\n                        verticalAlign: \"middle\"\r\n                      }}\r\n                    />\r\n                  </Tooltip>\r\n                )}\r\n                {ticket.status != \"closed\" &&(\r\n                  <Tooltip title=\"Visualizar resumo\">\r\n                    <DescriptionOutlined\r\n                      onClick={() => setOpenTicketAbstractDialog(true)}\r\n                      fontSize=\"small\"\r\n                      style={{\r\n                        color: blue[700],\r\n                        cursor: \"pointer\",\r\n                        marginLeft: 10,\r\n                        verticalAlign: \"middle\"\r\n                      }}\r\n                    />\r\n                  </Tooltip>\r\n                )}\r\n              </Typography>\r\n              <ListItemSecondaryAction>\r\n                <Box className={classes.ticketInfo1}>{renderTicketInfo()}</Box>\r\n              </ListItemSecondaryAction>\r\n            </span>\r\n\r\n          }\r\n          secondary={\r\n            <span className={classes.contactNameWrapper}>\r\n\r\n              <Typography\r\n                className={classes.contactLastMessage}\r\n                noWrap\r\n                component=\"span\"\r\n                variant=\"body2\"\r\n                color=\"textSecondary\"\r\n              > {ticket.lastMessage.includes('data:image/png;base64') ? <MarkdownWrapper> Localização</MarkdownWrapper> : <MarkdownWrapper>{ticket.lastMessage}</MarkdownWrapper>}\r\n                <span className={classes.secondaryContentSecond} >\r\n                  {ticket?.whatsapp?.name ? <Badge className={classes.connectionTag}>{ticket?.whatsapp?.name?.toUpperCase()}</Badge> : <br></br>}\r\n                  {ticketUser ? <Badge style={{ backgroundColor: \"#000000\" }} className={classes.connectionTag}>{ticketUser}</Badge> : <br></br>}\r\n                  <Badge style={{ backgroundColor: ticket.queue?.color || \"#7c7c7c\" }} className={classes.connectionTag}>{ticket.queue?.name?.toUpperCase() || \"SEM FILA\"}</Badge>\r\n                </span>\r\n                <span style={{ paddingTop: \"2px\" }} className={classes.secondaryContentSecond} >\r\n                  {tag?.map((tag) => {\r\n                    return (\r\n                      <ContactTag tag={tag} key={`ticket-contact-tag-${ticket.id}-${tag.id}`} />\r\n                    );\r\n                  })}\r\n                </span>\r\n              </Typography>\r\n\r\n              <Badge\r\n                className={classes.newMessagesCount}\r\n                badgeContent={ticket.unreadMessages}\r\n                classes={{\r\n                  badge: classes.badgeStyle,\r\n                }}\r\n              />\r\n            </span>\r\n          }\r\n\r\n        />\r\n        <ListItemSecondaryAction>\r\n          {ticket.lastMessage && (\r\n            <>\r\n\r\n              <Typography\r\n                className={classes.lastMessageTime}\r\n                component=\"span\"\r\n                variant=\"body2\"\r\n                color=\"textSecondary\"\r\n              >\r\n\r\n                {isSameDay(parseISO(ticket.updatedAt), new Date()) ? (\r\n                  <>{format(parseISO(ticket.updatedAt), \"HH:mm\")}</>\r\n                ) : (\r\n                  <>{format(parseISO(ticket.updatedAt), \"dd/MM/yyyy\")}</>\r\n                )}\r\n              </Typography>\r\n\r\n              <br />\r\n\r\n            </>\r\n          )}\r\n\r\n        </ListItemSecondaryAction>\r\n        <span className={classes.secondaryContentSecond} >\r\n          {ticket.status === \"pending\" && (\r\n            <ButtonWithSpinner\r\n              //color=\"primary\"\r\n              style={{ backgroundColor: 'green', color: 'white', padding: '0px', bottom: '17px', borderRadius: '0px', left: '8px', fontSize: '0.6rem' }}\r\n              variant=\"contained\"\r\n              className={classes.acceptButton}\r\n              size=\"small\"\r\n              loading={loading}\r\n\t\t\t  //PLW DESIGN INSERIDO O handleChangeTab\r\n              onClick={e => handleAcepptTicket(ticket.id)}\r\n            >\r\n              {i18n.t(\"ticketsList.buttons.accept\")}\r\n            </ButtonWithSpinner>\r\n\r\n          )}\r\n          {(ticket.status !== \"closed\") && (\r\n            <ButtonWithSpinner\r\n              //color=\"primary\"\r\n              style={{ backgroundColor: 'red', color: 'white', padding: '0px', bottom: '0px', borderRadius: '0px', left: '8px', fontSize: '0.6rem' }}\r\n              variant=\"contained\"\r\n              className={classes.acceptButton}\r\n              size=\"small\"\r\n              loading={loading}\r\n              onClick={e => handleCloseTicket(ticket.id)}\r\n            >\r\n              {i18n.t(\"ticketsList.buttons.closed\")}\r\n            </ButtonWithSpinner>\r\n\r\n          )}\r\n          {(ticket.status === \"closed\") && (\r\n            <ButtonWithSpinner\r\n              //color=\"primary\"\r\n              style={{ backgroundColor: 'red', color: 'white', padding: '0px', bottom: '0px', borderRadius: '0px', left: '8px', fontSize: '0.6rem' }}\r\n              variant=\"contained\"\r\n              className={classes.acceptButton}\r\n              size=\"small\"\r\n              loading={loading}\r\n              onClick={e => handleReopenTicket(ticket.id)}\r\n            >\r\n              {i18n.t(\"ticketsList.buttons.reopen\")}\r\n            </ButtonWithSpinner>\r\n\r\n          )}\r\n        </span>\r\n      </ListItem>\r\n\r\n      <Divider variant=\"inset\" component=\"li\" />\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default TicketListItemCustom;","import { useState, useEffect } from \"react\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nimport api from \"../../services/api\";\r\n\r\nconst useTickets = ({\r\n  searchParam,\r\n  tags,\r\n  users,\r\n  pageNumber,\r\n  status,\r\n  date,\r\n  updatedAt,\r\n  showAll,\r\n  queueIds,\r\n  withUnreadMessages,\r\n}) => {\r\n  const [loading, setLoading] = useState(true);\r\n  const [hasMore, setHasMore] = useState(false);\r\n  const [tickets, setTickets] = useState([]);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const delayDebounceFn = setTimeout(() => {\r\n      const fetchTickets = async () => {\r\n        try {\r\n          const { data } = await api.get(\"/tickets\", {\r\n            params: {\r\n              searchParam,\r\n              pageNumber,\r\n              tags,\r\n              users,\r\n              status,\r\n              date,\r\n              updatedAt,\r\n              showAll,\r\n              queueIds,\r\n              withUnreadMessages,\r\n            },\r\n          });\r\n          setTickets(data.tickets);\r\n          setHasMore(data.hasMore);\r\n          setLoading(false);\r\n        } catch (err) {\r\n          setLoading(false);\r\n          toastError(err);\r\n        }\r\n      };\r\n      fetchTickets();\r\n    }, 500);\r\n    return () => clearTimeout(delayDebounceFn);\r\n  }, [\r\n    searchParam,\r\n    tags,\r\n    users,\r\n    pageNumber,\r\n    status,\r\n    date,\r\n    updatedAt,\r\n    showAll,\r\n    queueIds,\r\n    withUnreadMessages,\r\n  ]);\r\n\r\n  return { tickets, loading, hasMore };\r\n};\r\n\r\nexport default useTickets;\r\n","import React, { useState, useRef, useEffect, useContext } from \"react\";\r\n\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { format } from \"date-fns\";\r\nimport { SocketContext } from \"../../context/Socket/SocketContext\";\r\n\r\nimport useSound from \"use-sound\";\r\n\r\nimport Popover from \"@material-ui/core/Popover\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport List from \"@material-ui/core/List\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Badge from \"@material-ui/core/Badge\";\r\nimport ChatIcon from \"@material-ui/icons/Chat\";\r\n\r\nimport TicketListItem from \"../TicketListItemCustom\";\r\nimport useTickets from \"../../hooks/useTickets\";\r\nimport alertSound from \"../../assets/sound.mp3\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\ttabContainer: {\r\n\t\toverflowY: \"auto\",\r\n\t\tmaxHeight: 350,\r\n\t\t...theme.scrollbarStyles,\r\n\t},\r\n\tpopoverPaper: {\r\n\t\twidth: \"100%\",\r\n\t\tmaxWidth: 350,\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tmarginRight: theme.spacing(1),\r\n\t\t[theme.breakpoints.down(\"sm\")]: {\r\n\t\t\tmaxWidth: 270,\r\n\t\t},\r\n\t},\r\n\tnoShadow: {\r\n\t\tboxShadow: \"none !important\",\r\n\t},\r\n}));\r\n\r\nconst NotificationsPopOver = (volume) => {\r\n\tconst classes = useStyles();\r\n\r\n\tconst history = useHistory();\r\n\tconst { user } = useContext(AuthContext);\r\n\tconst ticketIdUrl = +history.location.pathname.split(\"/\")[2];\r\n\tconst ticketIdRef = useRef(ticketIdUrl);\r\n\tconst anchorEl = useRef();\r\n\tconst [isOpen, setIsOpen] = useState(false);\r\n\tconst [notifications, setNotifications] = useState([]);\r\n\r\n\tconst [showPendingTickets, setShowPendingTickets] = useState(false);\r\n\r\n\tconst [, setDesktopNotifications] = useState([]);\r\n\r\n\tconst { tickets } = useTickets({ withUnreadMessages: \"true\" });\r\n\r\n\tconst [play] = useSound(alertSound, volume);\r\n\tconst soundAlertRef = useRef();\r\n\r\n\tconst historyRef = useRef(history);\r\n\r\n  const socketManager = useContext(SocketContext);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst fetchSettings = async () => {\r\n\t\t\ttry {\r\n\r\n\t\t\t\tif (user.allTicket === \"enable\") {\r\n\t\t\t\t\tsetShowPendingTickets(true);\r\n\t\t\t\t}\r\n\t\t\t} catch (err) {\r\n\t\t\t  \ttoastError(err);\r\n\t\t\t}\r\n\t\t}\r\n\t  \r\n\t\tfetchSettings();\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tsoundAlertRef.current = play;\r\n\r\n\t\tif (!(\"Notification\" in window)) {\r\n\t\t\tconsole.log(\"This browser doesn't support notifications\");\r\n\t\t} else {\r\n\t\t\tNotification.requestPermission();\r\n\t\t}\r\n\t}, [play]);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst processNotifications = () => {\r\n\t\t\tif (showPendingTickets) {\r\n\t\t\t\tsetNotifications(tickets);\r\n\t\t\t} else {\r\n\t\t\t\tconst newNotifications = tickets.filter(ticket => ticket.status !== \"pending\");\r\n\r\n\t\t\t\tsetNotifications(newNotifications);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tprocessNotifications();\r\n\t}, [tickets]);\r\n\r\n\tuseEffect(() => {\r\n\t\tticketIdRef.current = ticketIdUrl;\r\n\t}, [ticketIdUrl]);\r\n\r\n\tuseEffect(() => {\r\n    const socket = socketManager.getSocket(user.companyId);\r\n\r\n\t\tsocket.on(\"ready\", () => socket.emit(\"joinNotification\"));\r\n\r\n\t\tsocket.on(`company-${user.companyId}-ticket`, data => {\r\n\t\t\tif (data.action === \"updateUnread\" || data.action === \"delete\") {\r\n\t\t\t\tsetNotifications(prevState => {\r\n\t\t\t\t\tconst ticketIndex = prevState.findIndex(t => t.id === data.ticketId);\r\n\t\t\t\t\tif (ticketIndex !== -1) {\r\n\t\t\t\t\t\tprevState.splice(ticketIndex, 1);\r\n\t\t\t\t\t\treturn [...prevState];\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn prevState;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tsetDesktopNotifications(prevState => {\r\n\t\t\t\t\tconst notfiticationIndex = prevState.findIndex(\r\n\t\t\t\t\t\tn => n.tag === String(data.ticketId)\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (notfiticationIndex !== -1) {\r\n\t\t\t\t\t\tprevState[notfiticationIndex].close();\r\n\t\t\t\t\t\tprevState.splice(notfiticationIndex, 1);\r\n\t\t\t\t\t\treturn [...prevState];\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn prevState;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tsocket.on(`company-${user.companyId}-appMessage`, data => {\r\n\t\t\tif (\r\n\t\t\t\tdata.action === \"create\" && !data.message.fromMe && \r\n\t\t\t\t(data.ticket.status !== \"pending\" ) &&\r\n\t\t\t\t(!data.message.read || data.ticket.status === \"pending\") &&\r\n\t\t\t\t(data.ticket.userId === user?.id || !data.ticket.userId) &&\r\n\t\t\t\t(user?.queues?.some(queue => (queue.id === data.ticket.queueId)) || !data.ticket.queueId)\r\n\t\t\t) {\r\n\t\t\t\tsetNotifications(prevState => {\r\n\t\t\t\t\tconst ticketIndex = prevState.findIndex(t => t.id === data.ticket.id);\r\n\t\t\t\t\tif (ticketIndex !== -1) {\r\n\t\t\t\t\t\tprevState[ticketIndex] = data.ticket;\r\n\t\t\t\t\t\treturn [...prevState];\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn [data.ticket, ...prevState];\r\n\t\t\t\t});\r\n\r\n\t\t\t\tconst shouldNotNotificate =\r\n\t\t\t\t\t(data.message.ticketId === ticketIdRef.current &&\r\n\t\t\t\t\t\tdocument.visibilityState === \"visible\") ||\r\n\t\t\t\t\t(data.ticket.userId && data.ticket.userId !== user?.id) ||\r\n\t\t\t\t\tdata.ticket.isGroup;\r\n\r\n\t\t\t\tif (shouldNotNotificate) return;\r\n\r\n\t\t\t\thandleNotifications(data);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn () => {\r\n\t\t\tsocket.disconnect();\r\n\t\t};\r\n\t}, [user, showPendingTickets, socketManager]);\r\n\r\n\tconst handleNotifications = data => {\r\n\t\tconst { message, contact, ticket } = data;\r\n\r\n\t\tconst options = {\r\n\t\t\tbody: `${message.body} - ${format(new Date(), \"HH:mm\")}`,\r\n\t\t\ticon: contact.urlPicture,\r\n\t\t\ttag: ticket.id,\r\n\t\t\trenotify: true,\r\n\t\t};\r\n\r\n\t\tconst notification = new Notification(\r\n\t\t\t`${i18n.t(\"tickets.notification.message\")} ${contact.name}`,\r\n\t\t\toptions\r\n\t\t);\r\n\r\n\t\tnotification.onclick = e => {\r\n\t\t\te.preventDefault();\r\n\t\t\twindow.focus();\r\n\t\t\thistoryRef.current.push(`/tickets/${ticket.uuid}`);\r\n\t\t\t// handleChangeTab(null, ticket.isGroup? \"group\" : \"open\");\r\n\t\t};\r\n\r\n\t\tsetDesktopNotifications(prevState => {\r\n\t\t\tconst notfiticationIndex = prevState.findIndex(\r\n\t\t\t\tn => n.tag === notification.tag\r\n\t\t\t);\r\n\t\t\tif (notfiticationIndex !== -1) {\r\n\t\t\t\tprevState[notfiticationIndex] = notification;\r\n\t\t\t\treturn [...prevState];\r\n\t\t\t}\r\n\t\t\treturn [notification, ...prevState];\r\n\t\t});\r\n\r\n\t\tsoundAlertRef.current();\r\n\t};\r\n\r\n\tconst handleClick = () => {\r\n\t\tsetIsOpen(prevState => !prevState);\r\n\t};\r\n\r\n\tconst handleClickAway = () => {\r\n\t\tsetIsOpen(false);\r\n\t};\r\n\r\n\tconst NotificationTicket = ({ children }) => {\r\n\t\treturn <div onClick={handleClickAway}>{children}</div>;\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<IconButton\r\n\t\t\t\tonClick={handleClick}\r\n\t\t\t\tref={anchorEl}\r\n\t\t\t\taria-label=\"Open Notifications\"\r\n\t\t\t\tcolor=\"inherit\"\r\n\t\t\t\tstyle={{color:\"white\"}}\r\n\t\t\t>\r\n\t\t\t\t<Badge overlap=\"rectangular\" badgeContent={notifications.length} color=\"secondary\">\r\n\t\t\t\t\t<ChatIcon />\r\n\t\t\t\t</Badge>\r\n\t\t\t</IconButton>\r\n\t\t\t<Popover\r\n\t\t\t\tdisableScrollLock\r\n\t\t\t\topen={isOpen}\r\n\t\t\t\tanchorEl={anchorEl.current}\r\n\t\t\t\tanchorOrigin={{\r\n\t\t\t\t\tvertical: \"bottom\",\r\n\t\t\t\t\thorizontal: \"right\",\r\n\t\t\t\t}}\r\n\t\t\t\ttransformOrigin={{\r\n\t\t\t\t\tvertical: \"top\",\r\n\t\t\t\t\thorizontal: \"right\",\r\n\t\t\t\t}}\r\n\t\t\t\tclasses={{ paper: classes.popoverPaper }}\r\n\t\t\t\tonClose={handleClickAway}\r\n\t\t\t>\r\n\t\t\t\t<List dense className={classes.tabContainer}>\r\n\t\t\t\t\t{notifications.length === 0 ? (\r\n\t\t\t\t\t\t<ListItem>\r\n\t\t\t\t\t\t\t<ListItemText>{i18n.t(\"notifications.noTickets\")}</ListItemText>\r\n\t\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\tnotifications.map(ticket => (\r\n\t\t\t\t\t\t\t<NotificationTicket key={ticket.id}>\r\n\t\t\t\t\t\t\t\t<TicketListItem ticket={ticket} />\r\n\t\t\t\t\t\t\t</NotificationTicket>\r\n\t\t\t\t\t\t))\r\n\t\t\t\t\t)}\r\n\t\t\t\t</List>\r\n\t\t\t</Popover>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default NotificationsPopOver;","import React, { useState, useRef } from \"react\";\r\n\r\nimport Popover from \"@material-ui/core/Popover\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport List from \"@material-ui/core/List\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport VolumeUpIcon from \"@material-ui/icons/VolumeUp\";\r\nimport VolumeDownIcon from \"@material-ui/icons/VolumeDown\";\r\n\r\nimport { Grid, Slider } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    tabContainer: {\r\n        padding: theme.spacing(2),\r\n    },\r\n    popoverPaper: {\r\n        width: \"100%\",\r\n        maxWidth: 350,\r\n        marginLeft: theme.spacing(2),\r\n        marginRight: theme.spacing(1),\r\n        [theme.breakpoints.down(\"sm\")]: {\r\n            maxWidth: 270,\r\n        },\r\n    },\r\n    noShadow: {\r\n        boxShadow: \"none !important\",\r\n    },\r\n    icons: {\r\n        color: \"#fff\",\r\n    },\r\n    customBadge: {\r\n        backgroundColor: \"#f44336\",\r\n        color: \"#fff\",\r\n    },\r\n}));\r\n\r\nconst NotificationsVolume = ({ volume, setVolume }) => {\r\n    const classes = useStyles();\r\n\r\n    const anchorEl = useRef();\r\n    const [isOpen, setIsOpen] = useState(false);\r\n\r\n    const handleClick = () => {\r\n        setIsOpen((prevState) => !prevState);\r\n    };\r\n\r\n    const handleClickAway = () => {\r\n        setIsOpen(false);\r\n    };\r\n\r\n    const handleVolumeChange = (value) => {\r\n        setVolume(value);\r\n        localStorage.setItem(\"volume\", value);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <IconButton\r\n                className={classes.icons}\r\n                onClick={handleClick}\r\n                ref={anchorEl}\r\n                aria-label=\"Open Notifications\"\r\n                // color=\"inherit\"\r\n                // color=\"secondary\"\r\n            >\r\n                <VolumeUpIcon color=\"inherit\" />\r\n            </IconButton>\r\n            <Popover\r\n                disableScrollLock\r\n                open={isOpen}\r\n                anchorEl={anchorEl.current}\r\n                anchorOrigin={{\r\n                    vertical: \"bottom\",\r\n                    horizontal: \"right\",\r\n                }}\r\n                transformOrigin={{\r\n                    vertical: \"top\",\r\n                    horizontal: \"right\",\r\n                }}\r\n                classes={{ paper: classes.popoverPaper }}\r\n                onClose={handleClickAway}\r\n            >\r\n                <List dense className={classes.tabContainer}>\r\n                    <Grid container spacing={2}>\r\n                        <Grid item>\r\n                            <VolumeDownIcon />\r\n                        </Grid>\r\n                        <Grid item xs>\r\n                            <Slider\r\n                                value={volume}\r\n                                aria-labelledby=\"continuous-slider\"\r\n                                step={0.1}\r\n                                min={0}\r\n                                max={1}\r\n                                onChange={(e, value) =>\r\n                                    handleVolumeChange(value)\r\n                                }\r\n                            />\r\n                        </Grid>\r\n                        <Grid item>\r\n                            <VolumeUpIcon />\r\n                        </Grid>\r\n                    </Grid>\r\n                </List>\r\n            </Popover>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default NotificationsVolume;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport Chip from \"@material-ui/core/Chip\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport api from \"../../services/api\";\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tchips: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexWrap: \"wrap\",\r\n\t},\r\n\tchip: {\r\n\t\tmargin: 2,\r\n\t},\r\n}));\r\n\r\nconst QueueSelect = ({ selectedQueueIds, onChange, multiple = true, title = i18n.t(\"queueSelect.inputLabel\") }) => {\r\n\tconst classes = useStyles();\r\n\tconst [queues, setQueues] = useState([]);\r\n\r\n\tuseEffect(() => {\r\n\r\n\t\tfetchQueues();\r\n\r\n\t}, []);\r\n\r\n\tconst fetchQueues = async () => {\r\n\t\ttry {\r\n\t\t\tconst { data } = await api.get(\"/queue\");\r\n\t\t\tsetQueues(data);\r\n\t\t} catch (err) {\r\n\t\t\ttoastError(err);\r\n\t\t}\r\n\t}\r\n\r\n\tconst handleChange = e => {\r\n\t\tonChange(e.target.value);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div >\r\n\t\t\t<FormControl fullWidth margin=\"dense\" variant=\"outlined\">\r\n\t\t\t\t<InputLabel shrink={selectedQueueIds ? true : false} >{title}</InputLabel>\r\n\t\t\t\t<Select\r\n\t\t\t\t\tlabel={title}\r\n\t\t\t\t\tmultiple={multiple}\r\n\t\t\t\t\tlabelWidth={60}\r\n\t\t\t\t\tvalue={selectedQueueIds}\r\n\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\tMenuProps={{\r\n\t\t\t\t\t\tanchorOrigin: {\r\n\t\t\t\t\t\t\tvertical: \"bottom\",\r\n\t\t\t\t\t\t\thorizontal: \"left\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\ttransformOrigin: {\r\n\t\t\t\t\t\t\tvertical: \"top\",\r\n\t\t\t\t\t\t\thorizontal: \"left\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tgetContentAnchorEl: null,\r\n\t\t\t\t\t}}\r\n\r\n\t\t\t\t\trenderValue={selected => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div className={classes.chips}>\r\n\t\t\t\t\t\t\t\t{selected?.length > 0 && multiple ? (\r\n\t\t\t\t\t\t\t\t\tselected.map(id => {\r\n\t\t\t\t\t\t\t\t\t\tconst queue = queues.find(q => q.id === id);\r\n\t\t\t\t\t\t\t\t\t\treturn queue ? (\r\n\t\t\t\t\t\t\t\t\t\t\t<Chip\r\n\t\t\t\t\t\t\t\t\t\t\t\tkey={id}\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ backgroundColor: queue.color }}\r\n\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tlabel={queue.name}\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.chip}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t) : null;\r\n\t\t\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t\t\t) :\r\n\t\t\t\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t\t\t\t<Chip\r\n\t\t\t\t\t\t\t\t\t\t\tkey={selected}\r\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ backgroundColor: queues.find(q => q.id === selected)?.color }}\r\n\t\t\t\t\t\t\t\t\t\t\tlabel={queues.find(q => q.id === selected)?.name}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.chip}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{!multiple && <MenuItem value={null}>Nenhum</MenuItem>}\r\n\t\t\t\t\t{queues.map(queue => (\r\n\t\t\t\t\t\t<MenuItem key={queue.id} value={queue.id}>\r\n\t\t\t\t\t\t\t{queue.name}\r\n\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</Select>\r\n\t\t\t</FormControl>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default QueueSelect;\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\n\r\nimport * as Yup from \"yup\";\r\nimport { Formik, Form, Field } from \"formik\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { green } from \"@material-ui/core/colors\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nimport api from \"../../services/api\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport QueueSelect from \"../QueueSelect\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport { Can } from \"../Can\";\r\nimport useWhatsApps from \"../../hooks/useWhatsApps\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\troot: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexWrap: \"wrap\",\r\n\t},\r\n\tmultFieldLine: {\r\n\t\tdisplay: \"flex\",\r\n\t\t\"& > *:not(:last-child)\": {\r\n\t\t\tmarginRight: theme.spacing(1),\r\n\t\t},\r\n\t},\r\n\r\n\tbtnWrapper: {\r\n\t\tposition: \"relative\",\r\n\t},\r\n\r\n\tbuttonProgress: {\r\n\t\tcolor: green[500],\r\n\t\tposition: \"absolute\",\r\n\t\ttop: \"50%\",\r\n\t\tleft: \"50%\",\r\n\t\tmarginTop: -12,\r\n\t\tmarginLeft: -12,\r\n\t},\r\n\tformControl: {\r\n\t\tmargin: theme.spacing(1),\r\n\t\tminWidth: 120,\r\n\t},\r\n}));\r\n\r\nconst UserSchema = Yup.object().shape({\r\n\tname: Yup.string()\r\n\t\t.min(2, \"Too Short!\")\r\n\t\t.max(50, \"Too Long!\")\r\n\t\t.required(\"Required\"),\r\n\tpassword: Yup.string().min(5, \"Too Short!\").max(50, \"Too Long!\"),\r\n\temail: Yup.string().email(\"Invalid email\").required(\"Required\"),\r\n});\r\n\r\nconst UserModal = ({ open, onClose, userId }) => {\r\n\tconst classes = useStyles();\r\n\r\n\tconst initialState = {\r\n\t\tname: \"\",\r\n\t\temail: \"\",\r\n\t\tpassword: \"\",\r\n\t\tprofile: \"user\",\r\n\t\tallTicket: \"desabled\"\r\n\t};\r\n\r\n\tconst { user: loggedInUser } = useContext(AuthContext);\r\n\r\n\tconst [user, setUser] = useState(initialState);\r\n\tconst [selectedQueueIds, setSelectedQueueIds] = useState([]);\r\n\tconst [whatsappId, setWhatsappId] = useState(false);\r\n\tconst { loading, whatsApps } = useWhatsApps();\r\n\r\n\tuseEffect(() => {\r\n\t\tconst fetchUser = async () => {\r\n\t\t\tif (!userId) return;\r\n\t\t\ttry {\r\n\t\t\t\tconst { data } = await api.get(`/users/${userId}`);\r\n\t\t\t\tsetUser(prevState => {\r\n\t\t\t\t\treturn { ...prevState, ...data };\r\n\t\t\t\t});\r\n\t\t\t\tconst userQueueIds = data.queues?.map(queue => queue.id);\r\n\t\t\t\tsetSelectedQueueIds(userQueueIds);\r\n\t\t\t\tsetWhatsappId(data.whatsappId ? data.whatsappId : '');\r\n\t\t\t} catch (err) {\r\n\t\t\t\ttoastError(err);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tfetchUser();\r\n\t}, [userId, open]);\r\n\r\n\tconst handleClose = () => {\r\n\t\tonClose();\r\n\t\tsetUser(initialState);\r\n\t};\r\n\r\n\tconst handleSaveUser = async values => {\r\n\t\tconst userData = { ...values, whatsappId, queueIds: selectedQueueIds, allTicket: values.allTicket };\r\n\t\ttry {\r\n\t\t\tif (userId) {\r\n\t\t\t\tawait api.put(`/users/${userId}`, userData);\r\n\t\t\t} else {\r\n\t\t\t\tawait api.post(\"/users\", userData);\r\n\t\t\t}\r\n\t\t\ttoast.success(i18n.t(\"userModal.success\"));\r\n\t\t} catch (err) {\r\n\t\t\ttoastError(err);\r\n\t\t}\r\n\t\thandleClose();\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<Dialog\r\n\t\t\t\topen={open}\r\n\t\t\t\tonClose={handleClose}\r\n\t\t\t\tmaxWidth=\"xs\"\r\n\t\t\t\tfullWidth\r\n\t\t\t\tscroll=\"paper\"\r\n\t\t\t>\r\n\t\t\t\t<DialogTitle id=\"form-dialog-title\">\r\n\t\t\t\t\t{userId\r\n\t\t\t\t\t\t? `${i18n.t(\"userModal.title.edit\")}`\r\n\t\t\t\t\t\t: `${i18n.t(\"userModal.title.add\")}`}\r\n\t\t\t\t</DialogTitle>\r\n\t\t\t\t<Formik\r\n\t\t\t\t\tinitialValues={user}\r\n\t\t\t\t\tenableReinitialize={true}\r\n\t\t\t\t\tvalidationSchema={UserSchema}\r\n\t\t\t\t\tonSubmit={(values, actions) => {\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\thandleSaveUser(values);\r\n\t\t\t\t\t\t\tactions.setSubmitting(false);\r\n\t\t\t\t\t\t}, 400);\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{({ touched, errors, isSubmitting }) => (\r\n\t\t\t\t\t\t<Form>\r\n\t\t\t\t\t\t\t<DialogContent dividers>\r\n\t\t\t\t\t\t\t\t<div className={classes.multFieldLine}>\r\n\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"userModal.form.name\")}\r\n\t\t\t\t\t\t\t\t\t\tautoFocus\r\n\t\t\t\t\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\t\t\t\t\terror={touched.name && Boolean(errors.name)}\r\n\t\t\t\t\t\t\t\t\t\thelperText={touched.name && errors.name}\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"userModal.form.password\")}\r\n\t\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\t\t\t\terror={touched.password && Boolean(errors.password)}\r\n\t\t\t\t\t\t\t\t\t\thelperText={touched.password && errors.password}\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className={classes.multFieldLine}>\r\n\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"userModal.form.email\")}\r\n\t\t\t\t\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\t\t\t\t\terror={touched.email && Boolean(errors.email)}\r\n\t\t\t\t\t\t\t\t\t\thelperText={touched.email && errors.email}\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\tclassName={classes.formControl}\r\n\t\t\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<Can\r\n\t\t\t\t\t\t\t\t\t\t\trole={loggedInUser.profile}\r\n\t\t\t\t\t\t\t\t\t\t\tperform=\"user-modal:editProfile\"\r\n\t\t\t\t\t\t\t\t\t\t\tyes={() => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<InputLabel id=\"profile-selection-input-label\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{i18n.t(\"userModal.form.profile\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</InputLabel>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tas={Select}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"userModal.form.profile\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"profile\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabelId=\"profile-selection-label\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"profile-selection\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<MenuItem value=\"admin\">Admin</MenuItem>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<MenuItem value=\"user\">User</MenuItem>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Field>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<Can\r\n\t\t\t\t\t\t\t\t\trole={loggedInUser.profile}\r\n\t\t\t\t\t\t\t\t\tperform=\"user-modal:editQueues\"\r\n\t\t\t\t\t\t\t\t\tyes={() => (\r\n\t\t\t\t\t\t\t\t\t\t<QueueSelect\r\n\t\t\t\t\t\t\t\t\t\t\tselectedQueueIds={selectedQueueIds}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={values => setSelectedQueueIds(values)}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<Can\r\n\t\t\t\t\t\t\t\t\trole={loggedInUser.profile}\r\n\t\t\t\t\t\t\t\t\tperform=\"user-modal:editProfile\"\r\n\t\t\t\t\t\t\t\t\tyes={() => (\r\n\t\t\t\t\t\t\t\t\t\t<FormControl variant=\"outlined\" margin=\"dense\" className={classes.maxWidth} fullWidth>\r\n\t\t\t\t\t\t\t\t\t\t\t<InputLabel>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{i18n.t(\"userModal.form.whatsapp\")}\r\n\t\t\t\t\t\t\t\t\t\t\t</InputLabel>\r\n\t\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\t\tas={Select}\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={whatsappId}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => setWhatsappId(e.target.value)}\r\n\t\t\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"userModal.form.whatsapp\")}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<MenuItem value={''}>&nbsp;</MenuItem>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{whatsApps.map((whatsapp) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<MenuItem key={whatsapp.id} value={whatsapp.id}>{whatsapp.name}</MenuItem>\r\n\t\t\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t\t\t</Field>\r\n\t\t\t\t\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t<div className={classes.divider}>\r\n\t\t\t\t\t\t\t\t\t<span className={classes.dividerText}>Liberações</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t<Can\r\n\t\t\t\t\t\t\t\t\trole={loggedInUser.profile}\r\n\t\t\t\t\t\t\t\t\tperform=\"user-modal:editProfile\"\r\n\t\t\t\t\t\t\t\t\tyes={() => (!loading &&\r\n\t\t\t\t\t\t\t\t\t\t<div className={classes.textField}>\r\n\t\t\t\t\t\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.maxWidth}\r\n\t\t\t\t\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<InputLabel id=\"profile-selection-input-label\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{i18n.t(\"userModal.form.allTicket\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</InputLabel>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tas={Select}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"allTicket.form.viewTags\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"allTicket\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabelId=\"allTicket-selection-label\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"allTicket-selection\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<MenuItem value=\"enabled\">{i18n.t(\"userModal.form.allTicketEnabled\")}</MenuItem>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<MenuItem value=\"desabled\">{i18n.t(\"userModal.form.allTicketDesabled\")}</MenuItem>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Field>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t</DialogContent>\r\n\t\t\t\t\t\t\t<DialogActions>\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tonClick={handleClose}\r\n\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\t\t\tdisabled={isSubmitting}\r\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{i18n.t(\"userModal.buttons.cancel\")}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\tdisabled={isSubmitting}\r\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\t\tclassName={classes.btnWrapper}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{userId\r\n\t\t\t\t\t\t\t\t\t\t? `${i18n.t(\"userModal.buttons.okEdit\")}`\r\n\t\t\t\t\t\t\t\t\t\t: `${i18n.t(\"userModal.buttons.okAdd\")}`}\r\n\t\t\t\t\t\t\t\t\t{isSubmitting && (\r\n\t\t\t\t\t\t\t\t\t\t<CircularProgress\r\n\t\t\t\t\t\t\t\t\t\t\tsize={24}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.buttonProgress}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</DialogActions>\r\n\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Formik>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default UserModal;\r\n","import React from \"react\";\r\n\r\nimport Backdrop from \"@material-ui/core/Backdrop\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tbackdrop: {\r\n\t\tzIndex: theme.zIndex.drawer + 1,\r\n\t\tcolor: \"#fff\",\r\n\t},\r\n}));\r\n\r\nconst BackdropLoading = () => {\r\n\tconst classes = useStyles();\r\n\treturn (\r\n\t\t<Backdrop className={classes.backdrop} open={true}>\r\n\t\t\t<CircularProgress color=\"inherit\" />\r\n\t\t</Backdrop>\r\n\t);\r\n};\r\n\r\nexport default BackdropLoading;\r\n","import React, { useState } from \"react\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { CssBaseline, IconButton } from \"@material-ui/core\";\r\nimport Brightness4Icon from \"@material-ui/icons/Brightness4\";\r\nimport Brightness7Icon from \"@material-ui/icons/Brightness7\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    icons: {\r\n        color: \"#fff\",\r\n    },\r\n    switch: {\r\n        color: \"#fff\",\r\n    },\r\n    visible: {\r\n        display: \"none\",\r\n    },\r\n    btnHeader: {\r\n        color: \"#fff\",\r\n    },\r\n}));\r\n\r\nconst DarkMode = (props) => {\r\n    const classes = useStyles();\r\n\r\n    const [theme, setTheme] = useState(\"light\");\r\n\r\n    const themeToggle = () => {\r\n        theme === \"light\" ? setTheme(\"dark\") : setTheme(\"light\");\r\n    };\r\n\r\n    const handleClick = () => {\r\n        props.themeToggle();\r\n        themeToggle();\r\n    };\r\n\r\n    return (\r\n        <>\r\n            {theme === \"light\" ? (\r\n                <>\r\n                    <CssBaseline />\r\n                    <IconButton\r\n                        className={classes.icons}\r\n                        onClick={handleClick}\r\n                        // ref={anchorEl}\r\n                        aria-label=\"Dark Mode\"\r\n                        color=\"inherit\"\r\n                    >\r\n                        <Brightness4Icon />\r\n                    </IconButton>\r\n                </>\r\n            ) : (\r\n                <>\r\n                    <CssBaseline />\r\n                    <IconButton\r\n                        className={classes.icons}\r\n                        onClick={handleClick}\r\n                        // ref={anchorEl}\r\n                        aria-label=\"Dark Mode\"\r\n                        color=\"inherit\"\r\n                    >\r\n                        <Brightness7Icon />\r\n                    </IconButton>\r\n                </>\r\n            )}\r\n        </>\r\n    );\r\n};\r\n\r\nexport default DarkMode;\r\n","import React, { useEffect, useReducer, useState, useContext } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport Popover from \"@material-ui/core/Popover\";\r\nimport AnnouncementIcon from \"@material-ui/icons/Announcement\";\r\nimport Notifications from \"@material-ui/icons/Notifications\"\r\n\r\nimport {\r\n  Avatar,\r\n  Badge,\r\n  IconButton,\r\n  List,\r\n  ListItem,\r\n  ListItemAvatar,\r\n  ListItemText,\r\n  Dialog,\r\n  Paper,\r\n  Typography,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Button,\r\n  DialogContentText,\r\n} from \"@material-ui/core\";\r\nimport api from \"../../services/api\";\r\nimport { isArray } from \"lodash\";\r\nimport moment from \"moment\";\r\nimport { SocketContext } from \"../../context/Socket/SocketContext\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainPaper: {\r\n    flex: 1,\r\n    maxHeight: 3000,\r\n    maxWidth: 5000,\r\n    padding: theme.spacing(1),\r\n    overflowY: \"scroll\",\r\n    ...theme.scrollbarStyles,\r\n  },\r\n}));\r\n\r\nfunction AnnouncementDialog({ announcement, open, handleClose }) {\r\n  const getMediaPath = (filename) => {\r\n    return `${process.env.REACT_APP_BACKEND_URL}/public/${filename}`;\r\n  };\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={() => handleClose()}\r\n      aria-labelledby=\"alert-dialog-title\"\r\n      aria-describedby=\"alert-dialog-description\"\r\n    >\r\n      <DialogTitle id=\"alert-dialog-title\">{announcement.title}</DialogTitle>\r\n      <DialogContent>\r\n        {announcement.mediaPath && (\r\n          <div\r\n            style={{\r\n              border: \"1px solid #f1f1f1\",\r\n              margin: \"0 auto 20px\",\r\n              textAlign: \"center\",\r\n              width: \"400px\",\r\n              height: 300,\r\n              backgroundImage: `url(${getMediaPath(announcement.mediaPath)})`,\r\n              backgroundRepeat: \"no-repeat\",\r\n              backgroundSize: \"contain\",\r\n              backgroundPosition: \"center\",\r\n            }}\r\n          ></div>\r\n        )}\r\n        <DialogContentText id=\"alert-dialog-description\">\r\n          {announcement.text}\r\n        </DialogContentText>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={() => handleClose()} color=\"primary\" autoFocus>\r\n          Fechar\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nconst reducer = (state, action) => {\r\n  if (action.type === \"LOAD_ANNOUNCEMENTS\") {\r\n    const announcements = action.payload;\r\n    const newAnnouncements = [];\r\n\r\n    if (isArray(announcements)) {\r\n      announcements.forEach((announcement) => {\r\n        const announcementIndex = state.findIndex(\r\n          (u) => u.id === announcement.id\r\n        );\r\n        if (announcementIndex !== -1) {\r\n          state[announcementIndex] = announcement;\r\n        } else {\r\n          newAnnouncements.push(announcement);\r\n        }\r\n      });\r\n    }\r\n\r\n    return [...state, ...newAnnouncements];\r\n  }\r\n\r\n  if (action.type === \"UPDATE_ANNOUNCEMENTS\") {\r\n    const announcement = action.payload;\r\n    const announcementIndex = state.findIndex((u) => u.id === announcement.id);\r\n\r\n    if (announcementIndex !== -1) {\r\n      state[announcementIndex] = announcement;\r\n      return [...state];\r\n    } else {\r\n      return [announcement, ...state];\r\n    }\r\n  }\r\n\r\n  if (action.type === \"DELETE_ANNOUNCEMENT\") {\r\n    const announcementId = action.payload;\r\n\r\n    const announcementIndex = state.findIndex((u) => u.id === announcementId);\r\n    if (announcementIndex !== -1) {\r\n      state.splice(announcementIndex, 1);\r\n    }\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"RESET\") {\r\n    return [];\r\n  }\r\n};\r\n\r\nexport default function AnnouncementsPopover() {\r\n  const classes = useStyles();\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  const [pageNumber, setPageNumber] = useState(1);\r\n  const [hasMore, setHasMore] = useState(false);\r\n  const [searchParam] = useState(\"\");\r\n  const [announcements, dispatch] = useReducer(reducer, []);\r\n  const [invisible, setInvisible] = useState(false);\r\n  const [announcement, setAnnouncement] = useState({});\r\n  const [showAnnouncementDialog, setShowAnnouncementDialog] = useState(false);\r\n\r\n  const socketManager = useContext(SocketContext);\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: \"RESET\" });\r\n    setPageNumber(1);\r\n  }, [searchParam]);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const delayDebounceFn = setTimeout(() => {\r\n      fetchAnnouncements();\r\n    }, 500);\r\n    return () => clearTimeout(delayDebounceFn);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [searchParam, pageNumber]);\r\n\r\n  useEffect(() => {\r\n    const companyId = localStorage.getItem(\"companyId\");\r\n    const socket = socketManager.getSocket(companyId);\r\n    \r\n    if (!socket) {\r\n      return () => {}; \r\n    }\r\n\r\n    socket.on(`company-announcement`, (data) => {\r\n      if (data.action === \"update\" || data.action === \"create\") {\r\n        dispatch({ type: \"UPDATE_ANNOUNCEMENTS\", payload: data.record });\r\n        setInvisible(false);\r\n      }\r\n      if (data.action === \"delete\") {\r\n        dispatch({ type: \"DELETE_ANNOUNCEMENT\", payload: +data.id });\r\n      }\r\n    });\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, [socketManager]);\r\n\r\n  const fetchAnnouncements = async () => {\r\n    try {\r\n      const { data } = await api.get(\"/announcements/\", {\r\n        params: { searchParam, pageNumber },\r\n      });\r\n      dispatch({ type: \"LOAD_ANNOUNCEMENTS\", payload: data.records });\r\n      setHasMore(data.hasMore);\r\n      setLoading(false);\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  };\r\n\r\n  const loadMore = () => {\r\n    setPageNumber((prevState) => prevState + 1);\r\n  };\r\n\r\n  const handleScroll = (e) => {\r\n    if (!hasMore || loading) return;\r\n    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\r\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\r\n      loadMore();\r\n    }\r\n  };\r\n\r\n  const handleClick = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n    setInvisible(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const borderPriority = (priority) => {\r\n    if (priority === 1) {\r\n      return \"4px solid #b81111\";\r\n    }\r\n    if (priority === 2) {\r\n      return \"4px solid orange\";\r\n    }\r\n    if (priority === 3) {\r\n      return \"4px solid grey\";\r\n    }\r\n  };\r\n\r\n  const getMediaPath = (filename) => {\r\n    return `${process.env.REACT_APP_BACKEND_URL}/public/${filename}`;\r\n  };\r\n\r\n  const handleShowAnnouncementDialog = (record) => {\r\n    setAnnouncement(record);\r\n    setShowAnnouncementDialog(true);\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const open = Boolean(anchorEl);\r\n  const id = open ? \"simple-popover\" : undefined;\r\n\r\n  return (\r\n    <div>\r\n      <AnnouncementDialog\r\n        announcement={announcement}\r\n        open={showAnnouncementDialog}\r\n        handleClose={() => setShowAnnouncementDialog(false)}\r\n      />\r\n      <IconButton\r\n        variant=\"contained\"\r\n        aria-describedby={id}\r\n        onClick={handleClick}\r\n        style={{ color: \"white\" }}\r\n      >\r\n        <Badge\r\n          color=\"secondary\"\r\n          variant=\"dot\"\r\n          invisible={invisible || announcements.length < 1}\r\n        >\r\n          <Notifications />\r\n        </Badge>\r\n      </IconButton>\r\n      <Popover\r\n        id={id}\r\n        open={open}\r\n        anchorEl={anchorEl}\r\n        onClose={handleClose}\r\n        anchorOrigin={{\r\n          vertical: \"bottom\",\r\n          horizontal: \"center\",\r\n        }}\r\n        transformOrigin={{\r\n          vertical: \"top\",\r\n          horizontal: \"center\",\r\n        }}\r\n      >\r\n        <Paper\r\n          variant=\"outlined\"\r\n          onScroll={handleScroll}\r\n          className={classes.mainPaper}\r\n        >\r\n          <List\r\n            component=\"nav\"\r\n            aria-label=\"main mailbox folders\"\r\n            style={{ minWidth: 300 }}\r\n          >\r\n            {isArray(announcements) &&\r\n              announcements.map((item, key) => (\r\n                <ListItem\r\n                  key={key}\r\n                  style={{\r\n                    //background: key % 2 === 0 ? \"#ededed\" : \"white\",\r\n                    border: \"1px solid #eee\",\r\n                    borderLeft: borderPriority(item.priority),\r\n                    cursor: \"pointer\",\r\n                  }}\r\n                  onClick={() => handleShowAnnouncementDialog(item)}\r\n                >\r\n                  {item.mediaPath && (\r\n                    <ListItemAvatar>\r\n                      <Avatar\r\n                        alt={item.mediaName}\r\n                        src={getMediaPath(item.mediaPath)}\r\n                      />\r\n                    </ListItemAvatar>\r\n                  )}\r\n                  <ListItemText\r\n                    primary={item.title}\r\n                    secondary={\r\n                      <>\r\n                        <Typography component=\"span\" style={{ fontSize: 12 }}>\r\n                          {moment(item.createdAt).format(\"DD/MM/YYYY\")}\r\n                        </Typography>\r\n                        <span style={{ marginTop: 5, display: \"block\" }}></span>\r\n                        <Typography component=\"span\" variant=\"body2\">\r\n                          {item.text}\r\n                        </Typography>\r\n                      </>\r\n                    }\r\n                  />\r\n                </ListItem>\r\n              ))}\r\n            {isArray(announcements) && announcements.length === 0 && (\r\n              <ListItemText primary=\"Nenhum registro\" />\r\n            )}\r\n          </List>\r\n        </Paper>\r\n      </Popover>\r\n    </div>\r\n  );\r\n}\r\n","import moment from \"moment\";\r\n\r\nexport function useDate() {\r\n  function dateToClient(strDate) {\r\n    if (moment(strDate).isValid()) {\r\n      return moment(strDate).format(\"DD/MM/YYYY\");\r\n    }\r\n    return strDate;\r\n  }\r\n\r\n  function datetimeToClient(strDate) {\r\n    if (moment(strDate).isValid()) {\r\n      return moment(strDate).format(\"DD/MM/YYYY HH:mm\");\r\n    }\r\n    return strDate;\r\n  }\r\n\r\n  function dateToDatabase(strDate) {\r\n    if (moment(strDate, \"DD/MM/YYYY\").isValid()) {\r\n      return moment(strDate).format(\"YYYY-MM-DD HH:mm:ss\");\r\n    }\r\n    return strDate;\r\n  }\r\n\r\n  return {\r\n    dateToClient,\r\n    datetimeToClient,\r\n    dateToDatabase,\r\n  };\r\n}\r\n","import React, {\r\n  useContext,\r\n  useEffect,\r\n  useReducer,\r\n  useRef,\r\n  useState,\r\n} from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport Popover from \"@material-ui/core/Popover\";\r\nimport ForumIcon from \"@material-ui/icons/Forum\";\r\nimport {\r\n  Badge,\r\n  IconButton,\r\n  List,\r\n  ListItem,\r\n  ListItemText,\r\n  Paper,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport api from \"../../services/api\";\r\nimport { isArray } from \"lodash\";\r\nimport { SocketContext } from \"../../context/Socket/SocketContext\";\r\nimport { useDate } from \"../../hooks/useDate\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\n\r\nimport notifySound from \"../../assets/chat_notify.mp3\";\r\nimport useSound from \"use-sound\";\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainPaper: {\r\n    flex: 1,\r\n    maxHeight: 300,\r\n    maxWidth: 500,\r\n    padding: theme.spacing(1),\r\n    overflowY: \"scroll\",\r\n    ...theme.scrollbarStyles,\r\n  },\r\n}));\r\n\r\nconst reducer = (state, action) => {\r\n  if (action.type === \"LOAD_CHATS\") {\r\n    const chats = action.payload;\r\n    const newChats = [];\r\n\r\n    if (isArray(chats)) {\r\n      chats.forEach((chat) => {\r\n        const chatIndex = state.findIndex((u) => u.id === chat.id);\r\n        if (chatIndex !== -1) {\r\n          state[chatIndex] = chat;\r\n        } else {\r\n          newChats.push(chat);\r\n        }\r\n      });\r\n    }\r\n\r\n    return [...state, ...newChats];\r\n  }\r\n\r\n  if (action.type === \"UPDATE_CHATS\") {\r\n    const chat = action.payload;\r\n    const chatIndex = state.findIndex((u) => u.id === chat.id);\r\n\r\n    if (chatIndex !== -1) {\r\n      state[chatIndex] = chat;\r\n      return [...state];\r\n    } else {\r\n      return [chat, ...state];\r\n    }\r\n  }\r\n\r\n  if (action.type === \"DELETE_CHAT\") {\r\n    const chatId = action.payload;\r\n\r\n    const chatIndex = state.findIndex((u) => u.id === chatId);\r\n    if (chatIndex !== -1) {\r\n      state.splice(chatIndex, 1);\r\n    }\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"RESET\") {\r\n    return [];\r\n  }\r\n\r\n  if (action.type === \"CHANGE_CHAT\") {\r\n    const changedChats = state.map((chat) => {\r\n      if (chat.id === action.payload.chat.id) {\r\n        return action.payload.chat;\r\n      }\r\n      return chat;\r\n    });\r\n    return changedChats;\r\n  }\r\n};\r\n\r\nexport default function ChatPopover() {\r\n  const classes = useStyles();\r\n\r\n  const { user } = useContext(AuthContext);\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  const [pageNumber, setPageNumber] = useState(1);\r\n  const [hasMore, setHasMore] = useState(false);\r\n  const [searchParam] = useState(\"\");\r\n  const [chats, dispatch] = useReducer(reducer, []);\r\n  const [invisible, setInvisible] = useState(true);\r\n  const { datetimeToClient } = useDate();\r\n  const [play] = useSound(notifySound);\r\n  const soundAlertRef = useRef();\r\n\r\n  const socketManager = useContext(SocketContext);\r\n\r\n  useEffect(() => {\r\n    soundAlertRef.current = play;\r\n\r\n    if (!(\"Notification\" in window)) {\r\n      console.log(\"This browser doesn't support notifications\");\r\n    } else {\r\n      Notification.requestPermission();\r\n    }\r\n  }, [play]);\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: \"RESET\" });\r\n    setPageNumber(1);\r\n  }, [searchParam]);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const delayDebounceFn = setTimeout(() => {\r\n      fetchChats();\r\n    }, 500);\r\n    return () => clearTimeout(delayDebounceFn);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [searchParam, pageNumber]);\r\n\r\n  useEffect(() => {\r\n    const companyId = localStorage.getItem(\"companyId\");\r\n    const socket = socketManager.getSocket(companyId);\r\n    if (!socket) {\r\n      return () => {}; \r\n    }\r\n    \r\n    socket.on(`company-${companyId}-chat`, (data) => {\r\n      if (data.action === \"new-message\") {\r\n        dispatch({ type: \"CHANGE_CHAT\", payload: data });\r\n        const userIds = data.newMessage.chat.users.map(userObj => userObj.userId);\r\n\r\n        if (userIds.includes(user.id) && data.newMessage.senderId !== user.id) {\r\n          soundAlertRef.current();\r\n        }\r\n      }\r\n      if (data.action === \"update\") {\r\n        dispatch({ type: \"CHANGE_CHAT\", payload: data });\r\n      }\r\n    });\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, [socketManager, user.id]);\r\n\r\n  useEffect(() => {\r\n    let unreadsCount = 0;\r\n    if (chats.length > 0) {\r\n      for (let chat of chats) {\r\n        for (let chatUser of chat.users) {\r\n          if (chatUser.userId === user.id) {\r\n            unreadsCount += chatUser.unreads;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    if (unreadsCount > 0) {\r\n      setInvisible(false);\r\n    } else {\r\n      setInvisible(true);\r\n    }\r\n  }, [chats, user.id]);\r\n\r\n  const fetchChats = async () => {\r\n    try {\r\n      const { data } = await api.get(\"/chats/\", {\r\n        params: { searchParam, pageNumber },\r\n      });\r\n      dispatch({ type: \"LOAD_CHATS\", payload: data.records });\r\n      setHasMore(data.hasMore);\r\n      setLoading(false);\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  };\r\n\r\n  const loadMore = () => {\r\n    setPageNumber((prevState) => prevState + 1);\r\n  };\r\n\r\n  const handleScroll = (e) => {\r\n    if (!hasMore || loading) return;\r\n    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\r\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\r\n      loadMore();\r\n    }\r\n  };\r\n\r\n  const handleClick = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n    setInvisible(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const goToMessages = (chat) => {\r\n    window.location.href = `/chats/${chat.uuid}`;\r\n  };\r\n\r\n  const open = Boolean(anchorEl);\r\n  const id = open ? \"simple-popover\" : undefined;\r\n\r\n  return (\r\n    <div>\r\n      <IconButton\r\n        aria-describedby={id}\r\n        variant=\"contained\"\r\n        color={invisible ? \"default\" : \"inherit\"}\r\n        onClick={handleClick}\r\n        style={{ color: \"white\" }}\r\n      >\r\n        <Badge color=\"secondary\" variant=\"dot\" invisible={invisible}>\r\n          <ForumIcon />\r\n        </Badge>\r\n      </IconButton>\r\n      <Popover\r\n        id={id}\r\n        open={open}\r\n        anchorEl={anchorEl}\r\n        onClose={handleClose}\r\n        anchorOrigin={{\r\n          vertical: \"bottom\",\r\n          horizontal: \"center\",\r\n        }}\r\n        transformOrigin={{\r\n          vertical: \"top\",\r\n          horizontal: \"center\",\r\n        }}\r\n      >\r\n        <Paper\r\n          variant=\"outlined\"\r\n          onScroll={handleScroll}\r\n          className={classes.mainPaper}\r\n        >\r\n          <List\r\n            component=\"nav\"\r\n            aria-label=\"main mailbox folders\"\r\n            style={{ minWidth: 300 }}\r\n          >\r\n            {isArray(chats) &&\r\n              chats.map((item, key) => (\r\n                <ListItem\r\n                  key={key}\r\n                  style={{\r\n                    background: key % 2 === 0 ? \"#ededed\" : \"white\",\r\n                    border: \"1px solid #eee\",\r\n                    cursor: \"pointer\",\r\n                  }}\r\n                  onClick={() => goToMessages(item)}\r\n                  button\r\n                >\r\n                  <ListItemText\r\n                    primary={item.lastMessage}\r\n                    secondary={\r\n                      <>\r\n                        <Typography component=\"span\" style={{ fontSize: 12 }}>\r\n                          {datetimeToClient(item.updatedAt)}\r\n                        </Typography>\r\n                        <span style={{ marginTop: 5, display: \"block\" }}></span>\r\n                      </>\r\n                    }\r\n                  />\r\n                </ListItem>\r\n              ))}\r\n            {isArray(chats) && chats.length === 0 && (\r\n              <ListItemText primary={i18n.t(\"mainDrawer.appBar.notRegister\")} />\r\n            )}\r\n          </List>\r\n        </Paper>\r\n      </Popover>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useContext, useEffect } from \"react\";\r\nimport clsx from \"clsx\";\r\nimport moment from \"moment\";\r\nimport {\r\n  makeStyles,\r\n  Drawer,\r\n  AppBar,\r\n  Toolbar,\r\n  List,\r\n  Typography,\r\n  Divider,\r\n  MenuItem,\r\n  IconButton,\r\n  Menu,\r\n  useTheme,\r\n  useMediaQuery,\r\n} from \"@material-ui/core\";\r\n\r\nimport MenuIcon from \"@material-ui/icons/Menu\";\r\nimport ChevronLeftIcon from \"@material-ui/icons/ChevronLeft\";\r\nimport AccountCircle from \"@material-ui/icons/AccountCircle\";\r\nimport CachedIcon from \"@material-ui/icons/Cached\";\r\n\r\nimport MainListItems from \"./MainListItems\";\r\nimport NotificationsPopOver from \"../components/NotificationsPopOver\";\r\nimport NotificationsVolume from \"../components/NotificationsVolume\";\r\nimport UserModal from \"../components/UserModal\";\r\nimport { AuthContext } from \"../context/Auth/AuthContext\";\r\nimport BackdropLoading from \"../components/BackdropLoading\";\r\nimport DarkMode from \"../components/DarkMode\";\r\nimport { i18n } from \"../translate/i18n\";\r\nimport toastError from \"../errors/toastError\";\r\nimport AnnouncementsPopover from \"../components/AnnouncementsPopover\";\r\n\r\nimport logo from \"../assets/logo.png\";\r\nimport { SocketContext } from \"../context/Socket/SocketContext\";\r\nimport ChatPopover from \"../pages/Chat/ChatPopover\";\r\n\r\nimport { useDate } from \"../hooks/useDate\";\r\n\r\nimport ColorModeContext from \"../layout/themeContext\";\r\nimport Brightness4Icon from '@material-ui/icons/Brightness4';\r\nimport Brightness7Icon from '@material-ui/icons/Brightness7';\r\n\r\nconst drawerWidth = 240;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    height: \"100vh\",\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      height: \"calc(100vh - 56px)\",\r\n    },\r\n    backgroundColor: theme.palette.fancyBackground,\r\n    '& .MuiButton-outlinedPrimary': {\r\n      color: theme.mode === 'light' ? '#FFF' : '#FFF',\r\n\t  //backgroundColor: theme.mode === 'light' ? '#682ee2' : '#682ee2',\r\n\tbackgroundColor: theme.mode === 'light' ? theme.palette.primary.main : '#1c1c1c',\r\n      //border: theme.mode === 'light' ? '1px solid rgba(0 124 102)' : '1px solid rgba(255, 255, 255, 0.5)',\r\n    },\r\n    '& .MuiTab-textColorPrimary.Mui-selected': {\r\n      color: theme.mode === 'light' ? 'Primary' : '#FFF',\r\n    }\r\n  },\r\n  avatar: {\r\n    width: \"100%\",\r\n  },\r\n  toolbar: {\r\n    paddingRight: 24, // keep right padding when drawer closed\r\n    color: theme.palette.dark.main,\r\n    background: theme.palette.barraSuperior,\r\n  },\r\n  toolbarIcon: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"space-between\",\r\n    padding: \"0 8px\",\r\n    minHeight: \"48px\",\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      height: \"48px\"\r\n    }\r\n  },\r\n  appBar: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    transition: theme.transitions.create([\"width\", \"margin\"], {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n  },\r\n  appBarShift: {\r\n    marginLeft: drawerWidth,\r\n    width: `calc(100% - ${drawerWidth}px)`,\r\n    transition: theme.transitions.create([\"width\", \"margin\"], {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      display: \"none\"\r\n    }\r\n  },\r\n  menuButton: {\r\n    marginRight: 36,\r\n  },\r\n  menuButtonHidden: {\r\n    display: \"none\",\r\n  },\r\n  title: {\r\n    flexGrow: 1,\r\n    fontSize: 14,\r\n    color: \"white\",\r\n  },\r\n  drawerPaper: {\r\n    position: \"relative\",\r\n    whiteSpace: \"nowrap\",\r\n    width: drawerWidth,\r\n    transition: theme.transitions.create(\"width\", {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      width: \"100%\"\r\n    },\r\n    ...theme.scrollbarStylesSoft\r\n  },\r\n  drawerPaperClose: {\r\n    overflowX: \"hidden\",\r\n    transition: theme.transitions.create(\"width\", {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n    width: theme.spacing(7),\r\n    [theme.breakpoints.up(\"sm\")]: {\r\n      width: theme.spacing(9),\r\n    },\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      width: \"100%\"\r\n    }\r\n  },\r\n  appBarSpacer: {\r\n    minHeight: \"48px\",\r\n  },\r\n  content: {\r\n    flex: 1,\r\n    overflow: \"auto\",\r\n\r\n  },\r\n  container: {\r\n    paddingTop: theme.spacing(4),\r\n    paddingBottom: theme.spacing(4),\r\n  },\r\n  paper: {\r\n    padding: theme.spacing(2),\r\n    display: \"flex\",\r\n    overflow: \"auto\",\r\n    flexDirection: \"column\"\r\n  },\r\n  containerWithScroll: {\r\n    flex: 1,\r\n    padding: theme.spacing(1),\r\n    overflowY: \"scroll\",\r\n    ...theme.scrollbarStyles,\r\n  },\r\n  NotificationsPopOver: {\r\n    // color: theme.barraSuperior.secondary.main,\r\n  },\r\n  logo: {\r\n    width: \"80%\",\r\n    height: \"auto\",\r\n    maxWidth: 180,\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      width: \"auto\",\r\n      height: \"80%\",\r\n      maxWidth: 180,\r\n    },\r\n    logo: theme.logo\r\n  },\r\n}));\r\n\r\nconst LoggedInLayout = ({ children, themeToggle }) => {\r\n  const classes = useStyles();\r\n  const [userModalOpen, setUserModalOpen] = useState(false);\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  const [menuOpen, setMenuOpen] = useState(false);\r\n  const { handleLogout, loading } = useContext(AuthContext);\r\n  const [drawerOpen, setDrawerOpen] = useState(false);\r\n  const [drawerVariant, setDrawerVariant] = useState(\"permanent\");\r\n  // const [dueDate, setDueDate] = useState(\"\");\r\n  const { user } = useContext(AuthContext);\r\n\r\n  const theme = useTheme();\r\n  const { colorMode } = useContext(ColorModeContext);\r\n  const greaterThenSm = useMediaQuery(theme.breakpoints.up(\"sm\"));\r\n\r\n  const [volume, setVolume] = useState(localStorage.getItem(\"volume\") || 1);\r\n\r\n  const { dateToClient } = useDate();\r\n\r\n\r\n  //################### CODIGOS DE TESTE #########################################\r\n  // useEffect(() => {\r\n  //   navigator.getBattery().then((battery) => {\r\n  //     console.log(`Battery Charging: ${battery.charging}`);\r\n  //     console.log(`Battery Level: ${battery.level * 100}%`);\r\n  //     console.log(`Charging Time: ${battery.chargingTime}`);\r\n  //     console.log(`Discharging Time: ${battery.dischargingTime}`);\r\n  //   })\r\n  // }, []);\r\n\r\n  // useEffect(() => {\r\n  //   const geoLocation = navigator.geolocation\r\n\r\n  //   geoLocation.getCurrentPosition((position) => {\r\n  //     let lat = position.coords.latitude;\r\n  //     let long = position.coords.longitude;\r\n\r\n  //     console.log('latitude: ', lat)\r\n  //     console.log('longitude: ', long)\r\n  //   })\r\n  // }, []);\r\n\r\n  // useEffect(() => {\r\n  //   const nucleos = window.navigator.hardwareConcurrency;\r\n\r\n  //   console.log('Nucleos: ', nucleos)\r\n  // }, []);\r\n\r\n  // useEffect(() => {\r\n  //   console.log('userAgent', navigator.userAgent)\r\n  //   if (\r\n  //     navigator.userAgent.match(/Android/i)\r\n  //     || navigator.userAgent.match(/webOS/i)\r\n  //     || navigator.userAgent.match(/iPhone/i)\r\n  //     || navigator.userAgent.match(/iPad/i)\r\n  //     || navigator.userAgent.match(/iPod/i)\r\n  //     || navigator.userAgent.match(/BlackBerry/i)\r\n  //     || navigator.userAgent.match(/Windows Phone/i)\r\n  //   ) {\r\n  //     console.log('é mobile ', true) //celular\r\n  //   }\r\n  //   else {\r\n  //     console.log('não é mobile: ', false) //nao é celular\r\n  //   }\r\n  // }, []);\r\n  //##############################################################################\r\n\r\n  const socketManager = useContext(SocketContext);\r\n\r\n  useEffect(() => {\r\n    if (document.body.offsetWidth > 1200) {\r\n      setDrawerOpen(true);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (document.body.offsetWidth < 600) {\r\n      setDrawerVariant(\"temporary\");\r\n    } else {\r\n      setDrawerVariant(\"permanent\");\r\n    }\r\n  }, [drawerOpen]);\r\n\r\n  useEffect(() => {\r\n    const companyId = localStorage.getItem(\"companyId\");\r\n    const userId = localStorage.getItem(\"userId\");\r\n\r\n    const socket = socketManager.getSocket(companyId);\r\n\r\n    socket.on(`company-${companyId}-auth`, (data) => {\r\n      if (data.user.id === +userId) {\r\n        toastError(\"Sua conta foi acessada em outro computador.\");\r\n        setTimeout(() => {\r\n          localStorage.clear();\r\n          window.location.reload();\r\n        }, 1000);\r\n      }\r\n    });\r\n\r\n    socket.emit(\"userStatus\");\r\n    const interval = setInterval(() => {\r\n      socket.emit(\"userStatus\");\r\n    }, 1000 * 60 * 5);\r\n\r\n    return () => {\r\n      socket.disconnect();\r\n      clearInterval(interval);\r\n    };\r\n  }, [socketManager]);\r\n\r\n  const handleMenu = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n    setMenuOpen(true);\r\n  };\r\n\r\n  const handleCloseMenu = () => {\r\n    setAnchorEl(null);\r\n    setMenuOpen(false);\r\n  };\r\n\r\n  const handleOpenUserModal = () => {\r\n    setUserModalOpen(true);\r\n    handleCloseMenu();\r\n  };\r\n\r\n  const handleClickLogout = () => {\r\n    handleCloseMenu();\r\n    handleLogout();\r\n  };\r\n\r\n  const drawerClose = () => {\r\n    if (document.body.offsetWidth < 600) {\r\n      setDrawerOpen(false);\r\n    }\r\n  };\r\n\r\n  const handleRefreshPage = () => {\r\n    window.location.reload(false);\r\n  }\r\n\r\n  const handleMenuItemClick = () => {\r\n    const { innerWidth: width } = window;\r\n    if (width <= 600) {\r\n      setDrawerOpen(false);\r\n    }\r\n  };\r\n\r\n  const toggleColorMode = () => {\r\n    colorMode.toggleColorMode();\r\n  }\r\n\r\n  if (loading) {\r\n    return <BackdropLoading />;\r\n  }\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Drawer\r\n        variant={drawerVariant}\r\n        className={drawerOpen ? classes.drawerPaper : classes.drawerPaperClose}\r\n        classes={{\r\n          paper: clsx(\r\n            classes.drawerPaper,\r\n            !drawerOpen && classes.drawerPaperClose\r\n          ),\r\n        }}\r\n        open={drawerOpen}\r\n      >\r\n        <div className={classes.toolbarIcon}>\r\n          <img src={logo} className={classes.logo} alt=\"logo\" />\r\n          <IconButton onClick={() => setDrawerOpen(!drawerOpen)}>\r\n            <ChevronLeftIcon />\r\n          </IconButton>\r\n        </div>\r\n        <Divider />\r\n        <List className={classes.containerWithScroll}>\r\n          <MainListItems drawerClose={drawerClose} collapsed={!drawerOpen} />\r\n        </List>\r\n        <Divider />\r\n      </Drawer>\r\n      <UserModal\r\n        open={userModalOpen}\r\n        onClose={() => setUserModalOpen(false)}\r\n        userId={user?.id}\r\n      />\r\n      <AppBar\r\n        position=\"absolute\"\r\n        className={clsx(classes.appBar, drawerOpen && classes.appBarShift)}\r\n        color=\"primary\"\r\n      >\r\n        <Toolbar variant=\"dense\" className={classes.toolbar}>\r\n          <IconButton\r\n            edge=\"start\"\r\n            variant=\"contained\"\r\n            aria-label=\"open drawer\"\r\n            onClick={() => setDrawerOpen(!drawerOpen)}\r\n            className={clsx(\r\n              classes.menuButton,\r\n              drawerOpen && classes.menuButtonHidden\r\n            )}\r\n          >\r\n            <MenuIcon />\r\n          </IconButton>\r\n\r\n          <Typography\r\n            component=\"h2\"\r\n            variant=\"h6\"\r\n            color=\"inherit\"\r\n            noWrap\r\n            className={classes.title}\r\n          >\r\n            {/* {greaterThenSm && user?.profile === \"admin\" && getDateAndDifDays(user?.company?.dueDate).difData < 7 ? ( */}\r\n            {greaterThenSm && user?.profile === \"admin\" && user?.company?.dueDate ? (\r\n              <>\r\n                Olá <b>{user.name}</b>, Bem vindo a <b>{user?.company?.name}</b>! (Ativo até {dateToClient(user?.company?.dueDate)})\r\n              </>\r\n            ) : (\r\n              <>\r\n                Olá  <b>{user.name}</b>, Bem vindo a <b>{user?.company?.name}</b>!\r\n              </>\r\n            )}\r\n          </Typography>\r\n\r\n          <IconButton edge=\"start\" onClick={toggleColorMode}>\r\n            {theme.mode === 'dark' ? <Brightness7Icon style={{ color: \"white\" }} /> : <Brightness4Icon style={{ color: \"white\" }} />}\r\n          </IconButton>\r\n\r\n          <NotificationsVolume\r\n            setVolume={setVolume}\r\n            volume={volume}\r\n          />\r\n\r\n          <IconButton\r\n            onClick={handleRefreshPage}\r\n            aria-label={i18n.t(\"mainDrawer.appBar.refresh\")}\r\n            color=\"inherit\"\r\n          >\r\n            <CachedIcon style={{ color: \"white\" }} />\r\n          </IconButton>\r\n\r\n          {user.id && <NotificationsPopOver volume={volume} />}\r\n\r\n          <AnnouncementsPopover />\r\n\r\n          <ChatPopover />\r\n\r\n          <div>\r\n            <IconButton\r\n              aria-label=\"account of current user\"\r\n              aria-controls=\"menu-appbar\"\r\n              aria-haspopup=\"true\"\r\n              onClick={handleMenu}\r\n              variant=\"contained\"\r\n              style={{ color: \"white\" }}\r\n            >\r\n              <AccountCircle />\r\n            </IconButton>\r\n            <Menu\r\n              id=\"menu-appbar\"\r\n              anchorEl={anchorEl}\r\n              getContentAnchorEl={null}\r\n              anchorOrigin={{\r\n                vertical: \"bottom\",\r\n                horizontal: \"right\",\r\n              }}\r\n              transformOrigin={{\r\n                vertical: \"top\",\r\n                horizontal: \"right\",\r\n              }}\r\n              open={menuOpen}\r\n              onClose={handleCloseMenu}\r\n            >\r\n              <MenuItem onClick={handleOpenUserModal}>\r\n                {i18n.t(\"mainDrawer.appBar.user.profile\")}\r\n              </MenuItem>\r\n              <MenuItem onClick={handleClickLogout}>\r\n                {i18n.t(\"mainDrawer.appBar.user.logout\")}\r\n              </MenuItem>\r\n            </Menu>\r\n          </div>\r\n        </Toolbar>\r\n      </AppBar>\r\n      <main className={classes.content}>\r\n        <div className={classes.appBarSpacer} />\r\n\r\n        {children ? children : null}\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoggedInLayout;\r\n","import React from \"react\";\r\n\r\nimport { Avatar, Card, CardHeader, Typography } from \"@material-ui/core\";\r\nimport Skeleton from \"@material-ui/lab/Skeleton\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { grey } from '@material-ui/core/colors';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tcardAvatar: {\r\n\t\tfontSize: '55px',\r\n\t\tcolor: grey[500],\r\n\t\tbackgroundColor: '#ffffff',\r\n\t\twidth: theme.spacing(7),\r\n\t\theight: theme.spacing(7)\r\n\t},\r\n\tcardTitle: {\r\n\t\tfontSize: '18px',\r\n\t\tcolor: theme.palette.text.primary\r\n\t},\r\n\tcardSubtitle: {\r\n\t\tcolor: grey[600],\r\n\t\tfontSize: '14px'\r\n\t}\r\n}));\r\n\r\nexport default function CardCounter(props) {\r\n    const { icon, title, value, loading } = props\r\n\tconst classes = useStyles();\r\n    return ( !loading ? \r\n        <Card>\r\n            <CardHeader\r\n                avatar={\r\n                    <Avatar className={classes.cardAvatar}>\r\n                        {icon}\r\n                    </Avatar>\r\n                }\r\n                title={\r\n                    <Typography variant=\"h6\" component=\"h2\" className={classes.cardTitle}>\r\n                        { title }\r\n                    </Typography>\r\n                }\r\n                subheader={\r\n                    <Typography variant=\"subtitle1\" component=\"p\" className={classes.cardSubtitle}>\r\n                        { value }\r\n                    </Typography>\r\n                }\r\n            />\r\n        </Card>\r\n        : <Skeleton variant=\"rect\" height={80} />\r\n    )\r\n    \r\n}","import React from \"react\";\r\n\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Skeleton from \"@material-ui/lab/Skeleton\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { green, red } from '@material-ui/core/colors';\r\n\r\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\r\nimport ErrorIcon from '@material-ui/icons/Error';\r\nimport moment from 'moment';\r\n\r\nimport Rating from '@material-ui/lab/Rating';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\ton: {\r\n\t\tcolor: green[600],\r\n\t\tfontSize: '20px'\r\n\t},\r\n\toff: {\r\n\t\tcolor: red[600],\r\n\t\tfontSize: '20px'\r\n\t},\r\n    pointer: {\r\n        cursor: \"pointer\"\r\n    }\r\n}));\r\n\r\nexport function RatingBox ({ rating }) {\r\n    const ratingTrunc = rating === null ? 0 : Math.trunc(rating);\r\n    return <Rating\r\n        defaultValue={ratingTrunc}\r\n        max={3}\r\n        readOnly\r\n    />\r\n}\r\n\r\nexport default function TableAttendantsStatus(props) {\r\n    const { loading, attendants } = props\r\n\tconst classes = useStyles();\r\n\r\n    function renderList () {\r\n        return attendants.map((a, k) => (\r\n            <TableRow key={k}>\r\n                <TableCell>{a.name}</TableCell>\r\n                <TableCell align=\"center\" title=\"1 - Insatisfeito, 2 - Satisfeito, 3 - Muito Satisfeito\" className={classes.pointer}>\r\n                    <RatingBox rating={a.rating} />\r\n                </TableCell>\r\n                <TableCell align=\"center\">{formatTime(a.avgSupportTime, 2)}</TableCell>\r\n                <TableCell align=\"center\">\r\n                    { a.online ?\r\n                        <CheckCircleIcon className={classes.on} />\r\n                        : <ErrorIcon className={classes.off} />\r\n                    }\r\n                </TableCell>\r\n            </TableRow>\r\n        ))\r\n    }\r\n\r\n\tfunction formatTime(minutes){\r\n\t\treturn moment().startOf('day').add(minutes, 'minutes').format('HH[h] mm[m]');\r\n\t}\r\n\r\n    return ( !loading ?\r\n        <TableContainer component={Paper}>\r\n            <Table>\r\n                <TableHead>\r\n                    <TableRow>\r\n                        <TableCell>Nome</TableCell>\r\n                        <TableCell align=\"center\">Avaliações</TableCell>\r\n                        <TableCell align=\"center\">T.M. de Atendimento</TableCell>\r\n                        <TableCell align=\"center\">Status (Atual)</TableCell>\r\n                    </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                    { renderList() }\r\n                    {/* <TableRow>\r\n                        <TableCell>Nome 4</TableCell>\r\n                        <TableCell align=\"center\">10</TableCell>\r\n                        <TableCell align=\"center\">10 minutos</TableCell>\r\n                        <TableCell align=\"center\">\r\n                            <CheckCircleIcon className={classes.off} />\r\n                        </TableCell>\r\n                    </TableRow>\r\n                    <TableRow>\r\n                        <TableCell>Nome 5</TableCell>\r\n                        <TableCell align=\"center\">10</TableCell>\r\n                        <TableCell align=\"center\">10 minutos</TableCell>\r\n                        <TableCell align=\"center\">\r\n                            <CheckCircleIcon className={classes.on} />\r\n                        </TableCell>\r\n                    </TableRow> */}\r\n                </TableBody>\r\n            </Table>\r\n        </TableContainer>\r\n        : <Skeleton variant=\"rect\" height={150} />\r\n    )\r\n}","import api from \"../../services/api\";\r\n\r\nconst useDashboard = () => {\r\n\r\n    const find = async (params) => {\r\n        const { data } = await api.request({\r\n            url: `/dashboard`,\r\n            method: 'GET',\r\n            params\r\n        });\r\n        return data;\r\n    }\r\n\r\n    return {\r\n        find\r\n    }\r\n}\r\n\r\nexport default useDashboard;","import { useState, useEffect } from \"react\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nimport api from \"../../services/api\";\r\n\r\nconst useContacts = ({ searchParam, pageNumber, date, dateStart, dateEnd }) => {\r\n    const [loading, setLoading] = useState(true);\r\n    const [hasMore, setHasMore] = useState(false);\r\n    const [contacts, setContacts] = useState([]);\r\n    const [count, setCount] = useState(0);\r\n\r\n    useEffect(() => {\r\n        setLoading(true);\r\n        const delayDebounceFn = setTimeout(() => {\r\n            const fetchContacts = async () => {\r\n                try {\r\n                    const { data } = await api.get(\"/contacts\", {\r\n                        params: {\r\n                            searchParam,\r\n                            pageNumber,\r\n                            date,\r\n                            dateStart,\r\n                            dateEnd,\r\n                        },\r\n                    });\r\n                    setContacts(data.contacts);\r\n\r\n                    setHasMore(data.hasMore);\r\n                    setCount(data.count);\r\n                    setLoading(false);\r\n                } catch (err) {\r\n                    setLoading(false);\r\n                    toastError(err);\r\n                }\r\n            };\r\n\r\n            fetchContacts();\r\n        }, 500);\r\n        return () => clearTimeout(delayDebounceFn);\r\n    }, [searchParam, pageNumber, date, dateStart, dateEnd]);\r\n\r\n    return { contacts, loading, hasMore, count };\r\n};\r\n\r\nexport default useContacts;\r\n","import { useState, useEffect } from \"react\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nimport api from \"../../services/api\";\r\n\r\nconst useMessages = ({ fromMe, dateStart, dateEnd }) => {\r\n    const [loading, setLoading] = useState(true);\r\n    const [count, setCount] = useState(0);\r\n\r\n    useEffect(() => {\r\n        setLoading(true);\r\n        const delayDebounceFn = setTimeout(() => {\r\n            const fetchMessages = async () => {\r\n                try {\r\n                    const { data } = await api.get(\"/messages-allMe\", {\r\n                        params: {\r\n                            fromMe,\r\n                            dateStart,\r\n                            dateEnd,\r\n                        },\r\n                    });\r\n                    setCount(data.count[0].count);\r\n                    setLoading(false);\r\n                } catch (err) {\r\n                    setLoading(false);\r\n                    toastError(err);\r\n                }\r\n            };\r\n\r\n            fetchMessages();\r\n        }, 500);\r\n        return () => clearTimeout(delayDebounceFn);\r\n    }, [dateStart, dateEnd]);\r\n\r\n    return { count };\r\n};\r\n\r\nexport default useMessages;\r\n","import React, { useEffect, useState } from 'react';\r\nimport {\r\n    Chart as ChartJS,\r\n    CategoryScale,\r\n    LinearScale,\r\n    BarElement,\r\n    Title,\r\n    Tooltip,\r\n    Legend,\r\n} from 'chart.js';\r\nimport { Bar } from 'react-chartjs-2';\r\nimport ChartDataLabels from 'chartjs-plugin-datalabels';\r\nimport { AdapterDateFns } from '@mui/x-date-pickers/AdapterDateFns';\r\nimport brLocale from 'date-fns/locale/pt-BR';\r\nimport { DatePicker, LocalizationProvider } from '@mui/x-date-pickers';\r\nimport { Button, Stack, TextField } from '@mui/material';\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport api from '../../services/api';\r\nimport { format } from 'date-fns';\r\nimport { toast } from 'react-toastify';\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport './button.css';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    container: {\r\n        paddingTop: theme.spacing(1),\r\n        paddingBottom: theme.padding,\r\n        paddingLeft: theme.spacing(1),\r\n        paddingRight: theme.spacing(2),\r\n    }\r\n}));\r\n\r\nChartJS.register(\r\n    CategoryScale,\r\n    LinearScale,\r\n    BarElement,\r\n    Title,\r\n    Tooltip,\r\n    Legend,\r\n    ChartDataLabels\r\n);\r\n\r\nexport const options = {\r\n    responsive: true,\r\n    plugins: {\r\n        legend: {\r\n            position: 'top',\r\n            display: false,\r\n        },\r\n        title: {\r\n            display: true,\r\n            text: 'Gráfico de Conversas',\r\n            position: 'left',\r\n        },\r\n        datalabels: {\r\n            display: true,\r\n            anchor: 'start',\r\n            offset: -30,\r\n            align: \"start\",\r\n            color: \"#fff\",\r\n            textStrokeColor: \"#000\",\r\n            textStrokeWidth: 2,\r\n            font: {\r\n                size: 20,\r\n                weight: \"bold\"\r\n\r\n            },\r\n        }\r\n    },\r\n};\r\n\r\nexport const ChatsUser = () => {\r\n    // const classes = useStyles();\r\n    const [initialDate, setInitialDate] = useState(new Date());\r\n    const [finalDate, setFinalDate] = useState(new Date());\r\n    const [ticketsData, setTicketsData] = useState({ data: [] });\r\n\r\n    const companyId = localStorage.getItem(\"companyId\");\r\n\r\n    useEffect(() => {\r\n        handleGetTicketsInformation();\r\n    }, []);\r\n\r\n    const dataCharts = {\r\n\r\n        labels: ticketsData && ticketsData?.data.length > 0 && ticketsData?.data.map((item) => item.nome),\r\n        datasets: [\r\n            {\r\n                data: ticketsData?.data.length > 0 && ticketsData?.data.map((item, index) => {\r\n                    return item.quantidade\r\n                }),\r\n                backgroundColor: '#2DDD7F',\r\n            },\r\n\r\n        ],\r\n    };\r\n\r\n    const handleGetTicketsInformation = async () => {\r\n        try {\r\n\r\n            const { data } = await api.get(`/dashboard/ticketsUsers?initialDate=${format(initialDate, 'yyyy-MM-dd')}&finalDate=${format(finalDate, 'yyyy-MM-dd')}&companyId=${companyId}`);\r\n            setTicketsData(data);\r\n        } catch (error) {\r\n            toast.error('Erro ao obter informações da conversa');\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Typography component=\"h2\" variant=\"h6\" color=\"primary\" gutterBottom>\r\n                Total de Conversas por Usuários\r\n            </Typography>\r\n\r\n            <Stack direction={'row'} spacing={2} alignItems={'center'} sx={{ my: 2, }} >\r\n\r\n                <LocalizationProvider dateAdapter={AdapterDateFns} adapterLocale={brLocale}>\r\n                    <DatePicker\r\n                        value={initialDate}\r\n                        onChange={(newValue) => { setInitialDate(newValue) }}\r\n                        label=\"Inicio\"\r\n                        renderInput={(params) => <TextField fullWidth {...params} sx={{ width: '20ch' }} />}\r\n\r\n                    />\r\n                </LocalizationProvider>\r\n\r\n                <LocalizationProvider dateAdapter={AdapterDateFns} adapterLocale={brLocale}>\r\n                    <DatePicker\r\n                        value={finalDate}\r\n                        onChange={(newValue) => { setFinalDate(newValue) }}\r\n                        label=\"Fim\"\r\n                        renderInput={(params) => <TextField fullWidth {...params} sx={{ width: '20ch' }} />}\r\n                    />\r\n                </LocalizationProvider>\r\n\r\n                <Button className=\"buttonHover\" onClick={handleGetTicketsInformation} variant='contained'>Filtrar</Button>\r\n\r\n            </Stack>\r\n            <Bar options={options} data={dataCharts} style={{ maxWidth: '100%', maxHeight: '280px', }} />\r\n        </>\r\n    );\r\n}","import React, { useEffect, useState } from 'react';\r\nimport {\r\n    Chart as ChartJS,\r\n    CategoryScale,\r\n    LinearScale,\r\n    BarElement,\r\n    Title,\r\n    Tooltip,\r\n    Legend,\r\n} from 'chart.js';\r\nimport { Bar } from 'react-chartjs-2';\r\nimport { AdapterDateFns } from '@mui/x-date-pickers/AdapterDateFns';\r\nimport brLocale from 'date-fns/locale/pt-BR';\r\nimport { DatePicker, LocalizationProvider } from '@mui/x-date-pickers';\r\nimport { Button, Stack, TextField } from '@mui/material';\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport api from '../../services/api';\r\nimport { format } from 'date-fns';\r\nimport { toast } from 'react-toastify';\r\nimport './button.css';\r\n\r\nChartJS.register(\r\n    CategoryScale,\r\n    LinearScale,\r\n    BarElement,\r\n    Title,\r\n    Tooltip,\r\n    Legend\r\n);\r\n\r\nexport const options = {\r\n    responsive: true,\r\n    plugins: {\r\n        legend: {\r\n            position: 'top',\r\n            display: false,\r\n        },\r\n        title: {\r\n            display: true,\r\n            text: 'Gráfico de Conversas',\r\n            position: 'left',\r\n        },\r\n        datalabels: {\r\n            display: true,\r\n            anchor: 'start',\r\n            offset: -30,\r\n            align: \"start\",\r\n            color: \"#fff\",\r\n            textStrokeColor: \"#000\",\r\n            textStrokeWidth: 2,\r\n            font: {\r\n                size: 20,\r\n                weight: \"bold\"\r\n\r\n            },\r\n        }\r\n    },\r\n};\r\n\r\nexport const ChartsDate = () => {\r\n\r\n    const [initialDate, setInitialDate] = useState(new Date());\r\n    const [finalDate, setFinalDate] = useState(new Date());\r\n    const [ticketsData, setTicketsData] = useState({ data: [], count: 0 });\r\n\r\n    const companyId = localStorage.getItem(\"companyId\");\r\n\r\n    useEffect(() => {\r\n        handleGetTicketsInformation();\r\n    }, []);\r\n\r\n    const dataCharts = {\r\n\r\n        labels: ticketsData && ticketsData?.data.length > 0 && ticketsData?.data.map((item) => (item.hasOwnProperty('horario') ? `Das ${item.horario}:00 as ${item.horario}:59` : item.data)),\r\n        datasets: [\r\n            {\r\n                // label: 'Dataset 1',\r\n                data: ticketsData?.data.length > 0 && ticketsData?.data.map((item, index) => {\r\n                    return item.total\r\n                }),\r\n                backgroundColor: '#2DDD7F',\r\n            },\r\n        ],\r\n    };\r\n\r\n    const handleGetTicketsInformation = async () => {\r\n        try {\r\n            const { data } = await api.get(`/dashboard/ticketsDay?initialDate=${format(initialDate, 'yyyy-MM-dd')}&finalDate=${format(finalDate, 'yyyy-MM-dd')}&companyId=${companyId}`);\r\n            setTicketsData(data);\r\n        } catch (error) {\r\n            toast.error('Erro ao buscar informações dos tickets');\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Typography component=\"h2\" variant=\"h6\" color=\"primary\" gutterBottom>\r\n                Total ({ticketsData?.count})\r\n            </Typography>\r\n\r\n            <Stack direction={'row'} spacing={2} alignItems={'center'} sx={{ my: 2, }} >\r\n\r\n                <LocalizationProvider dateAdapter={AdapterDateFns} adapterLocale={brLocale}>\r\n                    <DatePicker\r\n                        value={initialDate}\r\n                        onChange={(newValue) => { setInitialDate(newValue) }}\r\n                        label=\"Inicio\"\r\n                        renderInput={(params) => <TextField fullWidth {...params} sx={{ width: '20ch' }} />}\r\n\r\n                    />\r\n                </LocalizationProvider>\r\n\r\n                <LocalizationProvider dateAdapter={AdapterDateFns} adapterLocale={brLocale}>\r\n                    <DatePicker\r\n                        value={finalDate}\r\n                        onChange={(newValue) => { setFinalDate(newValue) }}\r\n                        label=\"Fim\"\r\n                        renderInput={(params) => <TextField fullWidth {...params} sx={{ width: '20ch' }} />}\r\n                    />\r\n                </LocalizationProvider>\r\n\r\n                <Button className=\"buttonHover\" onClick={handleGetTicketsInformation} variant='contained' >Filtrar</Button>\r\n\r\n            </Stack>\r\n            <Bar options={options} data={dataCharts} style={{ maxWidth: '100%', maxHeight: '280px', }} />\r\n        </>\r\n    );\r\n}","import React, { useContext, useState, useEffect } from \"react\";\r\n\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport FormHelperText from \"@material-ui/core/FormHelperText\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { Button } from \"@material-ui/core\";\r\n\r\nimport SpeedIcon from \"@material-ui/icons/Speed\";\r\nimport GroupIcon from \"@material-ui/icons/Group\";\r\nimport AssignmentIcon from \"@material-ui/icons/Assignment\";\r\nimport PersonIcon from \"@material-ui/icons/Person\";\r\nimport CallIcon from \"@material-ui/icons/Call\";\r\nimport RecordVoiceOverIcon from \"@material-ui/icons/RecordVoiceOver\";\r\nimport GroupAddIcon from \"@material-ui/icons/GroupAdd\";\r\nimport HourglassEmptyIcon from \"@material-ui/icons/HourglassEmpty\";\r\nimport CheckCircleIcon from \"@material-ui/icons/CheckCircle\";\r\nimport ForumIcon from \"@material-ui/icons/Forum\";\r\nimport FilterListIcon from \"@material-ui/icons/FilterList\";\r\nimport ClearIcon from \"@material-ui/icons/Clear\";\r\nimport SendIcon from '@material-ui/icons/Send';\r\nimport MessageIcon from '@material-ui/icons/Message';\r\nimport AccessAlarmIcon from '@material-ui/icons/AccessAlarm';\r\nimport TimerIcon from '@material-ui/icons/Timer';\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { grey, blue } from \"@material-ui/core/colors\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport Chart from \"./Chart\";\r\nimport ButtonWithSpinner from \"../../components/ButtonWithSpinner\";\r\n\r\nimport CardCounter from \"../../components/Dashboard/CardCounter\";\r\nimport TableAttendantsStatus from \"../../components/Dashboard/TableAttendantsStatus\";\r\nimport { isArray } from \"lodash\";\r\n\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\n\r\nimport useDashboard from \"../../hooks/useDashboard\";\r\nimport useTickets from \"../../hooks/useTickets\";\r\nimport useUsers from \"../../hooks/useUsers\";\r\nimport useContacts from \"../../hooks/useContacts\";\r\nimport useMessages from \"../../hooks/useMessages\";\r\nimport { ChatsUser } from \"./ChartsUser\"\r\n\r\nimport Filters from \"./Filters\";\r\nimport { isEmpty } from \"lodash\";\r\nimport moment from \"moment\";\r\nimport { ChartsDate } from \"./ChartsDate\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  container: {\r\n    paddingTop: theme.spacing(1),\r\n    paddingBottom: theme.padding,\r\n    paddingLeft: theme.spacing(1),\r\n    paddingRight: theme.spacing(2),\r\n  },\r\n  fixedHeightPaper: {\r\n    padding: theme.spacing(2),\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    height: 240,\r\n    overflowY: \"auto\",\r\n    ...theme.scrollbarStyles,\r\n  },\r\n  cardAvatar: {\r\n    fontSize: \"55px\",\r\n    color: grey[500],\r\n    backgroundColor: \"#ffffff\",\r\n    width: theme.spacing(7),\r\n    height: theme.spacing(7),\r\n  },\r\n  cardTitle: {\r\n    fontSize: \"18px\",\r\n    color: blue[700],\r\n  },\r\n  cardSubtitle: {\r\n    color: grey[600],\r\n    fontSize: \"14px\",\r\n  },\r\n  alignRight: {\r\n    textAlign: \"right\",\r\n  },\r\n  fullWidth: {\r\n    width: \"100%\",\r\n  },\r\n  selectContainer: {\r\n    width: \"100%\",\r\n    textAlign: \"left\",\r\n  },\r\n  iframeDashboard: {\r\n    width: \"100%\",\r\n    height: \"calc(100vh - 64px)\",\r\n    border: \"none\",\r\n  },\r\n  container: {\r\n    paddingTop: theme.spacing(4),\r\n    paddingBottom: theme.spacing(4),\r\n  },\r\n  fixedHeightPaper: {\r\n    padding: theme.spacing(2),\r\n    display: \"flex\",\r\n    overflow: \"auto\",\r\n    flexDirection: \"column\",\r\n    height: 240,\r\n  },\r\n  customFixedHeightPaper: {\r\n    padding: theme.spacing(2),\r\n    display: \"flex\",\r\n    overflow: \"auto\",\r\n    flexDirection: \"column\",\r\n    height: 120,\r\n  },\r\n  customFixedHeightPaperLg: {\r\n    padding: theme.spacing(2),\r\n    display: \"flex\",\r\n    overflow: \"auto\",\r\n    flexDirection: \"column\",\r\n    height: \"100%\",\r\n  },\r\n  card1: {\r\n    padding: theme.spacing(2),\r\n    display: \"flex\",\r\n    overflow: \"auto\",\r\n    flexDirection: \"column\",\r\n    height: \"100%\",\r\n    //backgroundColor: \"palette\",\r\n    //backgroundColor: theme.palette.primary.main,\r\n    backgroundColor: theme.palette.type === 'dark' ? theme.palette.boxticket.main : theme.palette.primary.main,\r\n    color: \"#eee\",\r\n  },\r\n  card2: {\r\n    padding: theme.spacing(2),\r\n    display: \"flex\",\r\n    overflow: \"auto\",\r\n    flexDirection: \"column\",\r\n    height: \"100%\",\r\n    //backgroundColor: \"palette\",\r\n    //backgroundColor: theme.palette.primary.main,\r\n    backgroundColor: theme.palette.type === 'dark' ? theme.palette.boxticket.main : theme.palette.primary.main,\r\n    color: \"#eee\",\r\n  },\r\n  card3: {\r\n    padding: theme.spacing(2),\r\n    display: \"flex\",\r\n    overflow: \"auto\",\r\n    flexDirection: \"column\",\r\n    height: \"100%\",\r\n  //backgroundColor: theme.palette.primary.main,\r\n    backgroundColor: theme.palette.type === 'dark' ? theme.palette.boxticket.main : theme.palette.primary.main,\r\n    color: \"#eee\",\r\n  },\r\n  card4: {\r\n    padding: theme.spacing(2),\r\n    display: \"flex\",\r\n    overflow: \"auto\",\r\n    flexDirection: \"column\",\r\n    height: \"100%\",\r\n    //backgroundColor: theme.palette.primary.main,\r\n    backgroundColor: theme.palette.type === 'dark' ? theme.palette.boxticket.main : theme.palette.primary.main,\r\n    color: \"#eee\",\r\n  },\r\n  card5: {\r\n    padding: theme.spacing(2),\r\n    display: \"flex\",\r\n    overflow: \"auto\",\r\n    flexDirection: \"column\",\r\n    height: \"100%\",\r\n    //backgroundColor: theme.palette.primary.main,\r\n    backgroundColor: theme.palette.type === 'dark' ? theme.palette.boxticket.main : theme.palette.primary.main,\r\n    color: \"#eee\",\r\n  },\r\n  card6: {\r\n    padding: theme.spacing(2),\r\n    display: \"flex\",\r\n    overflow: \"auto\",\r\n    flexDirection: \"column\",\r\n    height: \"100%\",\r\n    //backgroundColor: theme.palette.primary.main,\r\n    backgroundColor: theme.palette.type === 'dark' ? theme.palette.boxticket.main : theme.palette.primary.main,\r\n    color: \"#eee\",\r\n  },\r\n  card7: {\r\n    padding: theme.spacing(2),\r\n    display: \"flex\",\r\n    overflow: \"auto\",\r\n    flexDirection: \"column\",\r\n    height: \"100%\",\r\n    //backgroundColor: theme.palette.primary.main,\r\n    backgroundColor: theme.palette.type === 'dark' ? theme.palette.boxticket.main : theme.palette.primary.main,\r\n    color: \"#eee\",\r\n  },\r\n  card8: {\r\n    padding: theme.spacing(2),\r\n    display: \"flex\",\r\n    overflow: \"auto\",\r\n    flexDirection: \"column\",\r\n    height: \"100%\",\r\n    //backgroundColor: theme.palette.primary.main,\r\n    backgroundColor: theme.palette.type === 'dark' ? theme.palette.boxticket.main : theme.palette.primary.main,\r\n    color: \"#eee\",\r\n  },\r\n  card9: {\r\n    padding: theme.spacing(2),\r\n    display: \"flex\",\r\n    overflow: \"auto\",\r\n    flexDirection: \"column\",\r\n    height: \"100%\",\r\n    //backgroundColor: theme.palette.primary.main,\r\n    backgroundColor: theme.palette.type === 'dark' ? theme.palette.boxticket.main : theme.palette.primary.main,\r\n    color: \"#eee\",\r\n  },\r\n  fixedHeightPaper2: {\r\n    padding: theme.spacing(2),\r\n    display: \"flex\",\r\n    overflow: \"auto\",\r\n    flexDirection: \"column\",\r\n  },\r\n}));\r\n\r\nconst Dashboard = () => {\r\n  const classes = useStyles();\r\n  const [counters, setCounters] = useState({});\r\n  const [attendants, setAttendants] = useState([]);\r\n  const [period, setPeriod] = useState(0);\r\n  const [filterType, setFilterType] = useState(1);\r\n  const [dateFrom, setDateFrom] = useState(moment(\"1\", \"D\").format(\"YYYY-MM-DD\"));\r\n  const [dateTo, setDateTo] = useState(moment().format(\"YYYY-MM-DD\"));\r\n  const [loading, setLoading] = useState(false);\r\n  const { find } = useDashboard();\r\n\r\n  let newDate = new Date();\r\n  let date = newDate.getDate();\r\n  let month = newDate.getMonth() + 1;\r\n  let year = newDate.getFullYear();\r\n  let now = `${year}-${month < 10 ? `0${month}` : `${month}`}-${date < 10 ? `0${date}` : `${date}`}`;\r\n\r\n  const [showFilter, setShowFilter] = useState(false);\r\n  const [queueTicket, setQueueTicket] = useState(false);\r\n\r\n  const { user } = useContext(AuthContext);\r\n  var userQueueIds = [];\r\n\r\n  if (user.queues && user.queues.length > 0) {\r\n    userQueueIds = user.queues.map((q) => q.id);\r\n  }\r\n\r\n  useEffect(() => {\r\n    async function firstLoad() {\r\n      await fetchData();\r\n    }\r\n    setTimeout(() => {\r\n      firstLoad();\r\n    }, 1000);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n  \r\n    async function handleChangePeriod(value) {\r\n    setPeriod(value);\r\n  }\r\n\r\n  async function handleChangeFilterType(value) {\r\n    setFilterType(value);\r\n    if (value === 1) {\r\n      setPeriod(0);\r\n    } else {\r\n      setDateFrom(\"\");\r\n      setDateTo(\"\");\r\n    }\r\n  }\r\n\r\n  async function fetchData() {\r\n    setLoading(true);\r\n\r\n    let params = {};\r\n\r\n    if (period > 0) {\r\n      params = {\r\n        days: period,\r\n      };\r\n    }\r\n\r\n    if (!isEmpty(dateFrom) && moment(dateFrom).isValid()) {\r\n      params = {\r\n        ...params,\r\n        date_from: moment(dateFrom).format(\"YYYY-MM-DD\"),\r\n      };\r\n    }\r\n\r\n    if (!isEmpty(dateTo) && moment(dateTo).isValid()) {\r\n      params = {\r\n        ...params,\r\n        date_to: moment(dateTo).format(\"YYYY-MM-DD\"),\r\n      };\r\n    }\r\n\r\n    if (Object.keys(params).length === 0) {\r\n      toast.error(\"Parametrize o filtro\");\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    const data = await find(params);\r\n\r\n    setCounters(data.counters);\r\n    if (isArray(data.attendants)) {\r\n      setAttendants(data.attendants);\r\n    } else {\r\n      setAttendants([]);\r\n    }\r\n\r\n    setLoading(false);\r\n  }\r\n\r\n  function formatTime(minutes) {\r\n    return moment()\r\n      .startOf(\"day\")\r\n      .add(minutes, \"minutes\")\r\n      .format(\"HH[h] mm[m]\");\r\n  }\r\n\r\n  const GetUsers = () => {\r\n    let count;\r\n    let userOnline = 0;\r\n    attendants.forEach(user => {\r\n      if (user.online === true) {\r\n        userOnline = userOnline + 1\r\n      }\r\n    })\r\n    count = userOnline === 0 ? 0 : userOnline;\r\n    return count;\r\n  };\r\n  \r\n    const GetContacts = (all) => {\r\n    let props = {};\r\n    if (all) {\r\n      props = {};\r\n    }\r\n    const { count } = useContacts(props);\r\n    return count;\r\n  };\r\n  \r\n    function renderFilters() {\r\n    if (filterType === 1) {\r\n      return (\r\n        <>\r\n          <Grid item xs={12} sm={6} md={4}>\r\n            <TextField\r\n              label=\"Data Inicial\"\r\n              type=\"date\"\r\n              value={dateFrom}\r\n              onChange={(e) => setDateFrom(e.target.value)}\r\n              className={classes.fullWidth}\r\n              InputLabelProps={{\r\n                shrink: true,\r\n              }}\r\n            />\r\n          </Grid>\r\n          <Grid item xs={12} sm={6} md={4}>\r\n            <TextField\r\n              label=\"Data Final\"\r\n              type=\"date\"\r\n              value={dateTo}\r\n              onChange={(e) => setDateTo(e.target.value)}\r\n              className={classes.fullWidth}\r\n              InputLabelProps={{\r\n                shrink: true,\r\n              }}\r\n            />\r\n          </Grid>\r\n        </>\r\n      );\r\n    } else {\r\n      return (\r\n        <Grid item xs={12} sm={6} md={4}>\r\n          <FormControl className={classes.selectContainer}>\r\n            <InputLabel id=\"period-selector-label\">Período</InputLabel>\r\n            <Select\r\n              labelId=\"period-selector-label\"\r\n              id=\"period-selector\"\r\n              value={period}\r\n              onChange={(e) => handleChangePeriod(e.target.value)}\r\n            >\r\n              <MenuItem value={0}>Nenhum selecionado</MenuItem>\r\n              <MenuItem value={3}>Últimos 3 dias</MenuItem>\r\n              <MenuItem value={7}>Últimos 7 dias</MenuItem>\r\n              <MenuItem value={15}>Últimos 15 dias</MenuItem>\r\n              <MenuItem value={30}>Últimos 30 dias</MenuItem>\r\n              <MenuItem value={60}>Últimos 60 dias</MenuItem>\r\n              <MenuItem value={90}>Últimos 90 dias</MenuItem>\r\n            </Select>\r\n            <FormHelperText>Selecione o período desejado</FormHelperText>\r\n          </FormControl>\r\n        </Grid>\r\n      );\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Container maxWidth=\"lg\" className={classes.container}>\r\n        <Grid container spacing={3} justifyContent=\"flex-end\">\r\n\t\t\r\n\r\n          {/* EM ATENDIMENTO */}\r\n          <Grid item xs={12} sm={6} md={4}>\r\n            <Paper\r\n              className={classes.card1}\r\n              style={{ overflow: \"hidden\" }}\r\n              elevation={4}\r\n            >\r\n              <Grid container spacing={3}>\r\n                <Grid item xs={8}>\r\n                  <Typography\r\n                    component=\"h3\"\r\n                    variant=\"h6\"\r\n                    paragraph\r\n                  >\r\n                    Em Conversa\r\n                  </Typography>\r\n                  <Grid item>\r\n                    <Typography\r\n                      component=\"h1\"\r\n                      variant=\"h4\"\r\n                    >\r\n                      {counters.supportHappening}\r\n                    </Typography>\r\n                  </Grid>\r\n                </Grid>\r\n                <Grid item xs={2}>\r\n                  <CallIcon\r\n                    style={{\r\n                      fontSize: 100,\r\n                      color: \"#FFFFFF\",\r\n                    }}\r\n                  />\r\n                </Grid>\r\n              </Grid>\r\n            </Paper>\r\n          </Grid>\r\n\r\n          {/* AGUARDANDO */}\r\n          <Grid item xs={12} sm={6} md={4}>\r\n            <Paper\r\n              className={classes.card2}\r\n              style={{ overflow: \"hidden\" }}\r\n              elevation={6}\r\n            >\r\n              <Grid container spacing={3}>\r\n                <Grid item xs={8}>\r\n                  <Typography\r\n                    component=\"h3\"\r\n                    variant=\"h6\"\r\n                    paragraph\r\n                  >\r\n                    Aguardando\r\n                  </Typography>\r\n                  <Grid item>\r\n                    <Typography\r\n                      component=\"h1\"\r\n                      variant=\"h4\"\r\n                    >\r\n                      {counters.supportPending}\r\n                    </Typography>\r\n                  </Grid>\r\n                </Grid>\r\n                <Grid item xs={4}>\r\n                  <HourglassEmptyIcon\r\n                    style={{\r\n                      fontSize: 100,\r\n                      color: \"#FFFFFF\",\r\n                    }}\r\n                  />\r\n                </Grid>\r\n              </Grid>\r\n            </Paper>\r\n          </Grid>\r\n\r\n          {/* ATENDENTES ATIVOS */}\r\n\t\t\t  {/*<Grid item xs={12} sm={6} md={4}>\r\n            <Paper\r\n              className={classes.card6}\r\n              style={{ overflow: \"hidden\" }}\r\n              elevation={6}\r\n            >\r\n              <Grid container spacing={3}>\r\n                <Grid item xs={8}>\r\n                  <Typography\r\n                    component=\"h3\"\r\n                    variant=\"h6\"\r\n                    paragraph\r\n                  >\r\n                    Conversas Ativas\r\n                  </Typography>\r\n                  <Grid item>\r\n                    <Typography\r\n                      component=\"h1\"\r\n                      variant=\"h4\"\r\n                    >\r\n                      {GetUsers()}\r\n                      <span\r\n                        style={{ color: \"#805753\" }}\r\n                      >\r\n                        /{attendants.length}\r\n                      </span>\r\n                    </Typography>\r\n                  </Grid>\r\n                </Grid>\r\n                <Grid item xs={4}>\r\n                  <RecordVoiceOverIcon\r\n                    style={{\r\n                      fontSize: 100,\r\n                      color: \"#805753\",\r\n                    }}\r\n                  />\r\n                </Grid>\r\n              </Grid>\r\n            </Paper>\r\n</Grid>*/}\r\n\r\n          {/* FINALIZADOS */}\r\n          <Grid item xs={12} sm={6} md={4}>\r\n            <Paper\r\n              className={classes.card3}\r\n              style={{ overflow: \"hidden\" }}\r\n              elevation={6}\r\n            >\r\n              <Grid container spacing={3}>\r\n                <Grid item xs={8}>\r\n                  <Typography\r\n                    component=\"h3\"\r\n                    variant=\"h6\"\r\n                    paragraph\r\n                  >\r\n                    Finalizados\r\n                  </Typography>\r\n                  <Grid item>\r\n                    <Typography\r\n                      component=\"h1\"\r\n                      variant=\"h4\"\r\n                    >\r\n                      {counters.supportFinished}\r\n                    </Typography>\r\n                  </Grid>\r\n                </Grid>\r\n                <Grid item xs={4}>\r\n                  <CheckCircleIcon\r\n                    style={{\r\n                      fontSize: 100,\r\n                      color: \"#FFFFFF\",\r\n                    }}\r\n                  />\r\n                </Grid>\r\n              </Grid>\r\n            </Paper>\r\n          </Grid>\r\n\r\n          {/* NOVOS CONTATOS */}\r\n          <Grid item xs={12} sm={6} md={4}>\r\n            <Paper\r\n              className={classes.card4}\r\n              style={{ overflow: \"hidden\" }}\r\n              elevation={6}\r\n            >\r\n              <Grid container spacing={3}>\r\n                <Grid item xs={8}>\r\n                  <Typography\r\n                    component=\"h3\"\r\n                    variant=\"h6\"\r\n                    paragraph\r\n                  >\r\n                    Novos Contatos\r\n                  </Typography>\r\n                  <Grid item>\r\n                    <Typography\r\n                      component=\"h1\"\r\n                      variant=\"h4\"\r\n                    >\r\n                      {GetContacts(true)}\r\n                    </Typography>\r\n                  </Grid>\r\n                </Grid>\r\n                <Grid item xs={4}>\r\n                  <GroupAddIcon\r\n                    style={{\r\n                      fontSize: 100,\r\n                      color: \"#FFFFFF\",\r\n                    }}\r\n                  />\r\n                </Grid>\r\n              </Grid>\r\n            </Paper>\r\n          </Grid>\r\n\r\n          \r\n          {/* T.M. DE ATENDIMENTO */}\r\n          <Grid item xs={12} sm={6} md={4}>\r\n            <Paper\r\n              className={classes.card8}\r\n              style={{ overflow: \"hidden\" }}\r\n              elevation={6}\r\n            >\r\n              <Grid container spacing={3}>\r\n                <Grid item xs={8}>\r\n                  <Typography\r\n                    component=\"h3\"\r\n                    variant=\"h6\"\r\n                    paragraph\r\n                  >\r\n                    T.M. de Conversa\r\n                  </Typography>\r\n                  <Grid item>\r\n                    <Typography\r\n                      component=\"h1\"\r\n                      variant=\"h4\"\r\n                    >\r\n                      {formatTime(counters.avgSupportTime)}\r\n                    </Typography>\r\n                  </Grid>\r\n                </Grid>\r\n                <Grid item xs={4}>\r\n                  <AccessAlarmIcon\r\n                    style={{\r\n                      fontSize: 100,\r\n                      color: \"#FFFFFF\",\r\n                    }}\r\n                  />\r\n                </Grid>\r\n              </Grid>\r\n            </Paper>\r\n          </Grid>\r\n\r\n          {/* T.M. DE ESPERA */}\r\n          <Grid item xs={12} sm={6} md={4}>\r\n            <Paper\r\n              className={classes.card9}\r\n              style={{ overflow: \"hidden\" }}\r\n              elevation={6}\r\n            >\r\n              <Grid container spacing={3}>\r\n                <Grid item xs={8}>\r\n                  <Typography\r\n                    component=\"h3\"\r\n                    variant=\"h6\"\r\n                    paragraph\r\n                  >\r\n                    T.M. de Espera\r\n                  </Typography>\r\n                  <Grid item>\r\n                    <Typography\r\n                      component=\"h1\"\r\n                      variant=\"h4\"\r\n                    >\r\n                      {formatTime(counters.avgWaitTime)}\r\n                    </Typography>\r\n                  </Grid>\r\n                </Grid>\r\n                <Grid item xs={4}>\r\n                  <TimerIcon\r\n                    style={{\r\n                      fontSize: 100,\r\n                      color: \"#FFFFFF\",\r\n                    }}\r\n                  />\r\n                </Grid>\r\n              </Grid>\r\n            </Paper>\r\n          </Grid>\r\n\t\t  \r\n\t\t  {/* FILTROS */}\r\n          <Grid item xs={12} sm={6} md={4}>\r\n            <FormControl className={classes.selectContainer}>\r\n              <InputLabel id=\"period-selector-label\">Tipo de Filtro</InputLabel>\r\n              <Select\r\n                labelId=\"period-selector-label\"\r\n                value={filterType}\r\n                onChange={(e) => handleChangeFilterType(e.target.value)}\r\n              >\r\n                <MenuItem value={1}>Filtro por Data</MenuItem>\r\n                <MenuItem value={2}>Filtro por Período</MenuItem>\r\n              </Select>\r\n              <FormHelperText>Selecione o período desejado</FormHelperText>\r\n            </FormControl>\r\n          </Grid>\r\n\r\n          {renderFilters()}\r\n\r\n          {/* BOTAO FILTRAR */}\r\n          <Grid item xs={12} className={classes.alignRight}>\r\n            <ButtonWithSpinner\r\n              loading={loading}\r\n              onClick={() => fetchData()}\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n            >\r\n              Filtrar\r\n            </ButtonWithSpinner>\r\n          </Grid>\r\n\r\n          {/* USUARIOS ONLINE */}\r\n          <Grid item xs={12}>\r\n            {attendants.length ? (\r\n              <TableAttendantsStatus\r\n                attendants={attendants}\r\n                loading={loading}\r\n              />\r\n            ) : null}\r\n          </Grid>\r\n\r\n          {/* TOTAL DE ATENDIMENTOS POR USUARIO */}\r\n          <Grid item xs={12}>\r\n            <Paper className={classes.fixedHeightPaper2}>\r\n              <ChatsUser />\r\n            </Paper>\r\n          </Grid>\r\n\r\n          {/* TOTAL DE ATENDIMENTOS */}\r\n          <Grid item xs={12}>\r\n            <Paper className={classes.fixedHeightPaper2}>\r\n              <ChartsDate />\r\n            </Paper>\r\n          </Grid>\r\n\r\n        </Grid>\r\n      </Container >\r\n    </div >\r\n  );\r\n};\r\n\r\nexport default Dashboard;\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\n\r\nimport * as Yup from \"yup\";\r\nimport { Formik, FieldArray, Form, Field } from \"formik\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { green } from \"@material-ui/core/colors\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nimport api from \"../../services/api\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\troot: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexWrap: \"wrap\",\r\n\t},\r\n\ttextField: {\r\n\t\tmarginRight: theme.spacing(1),\r\n\t\tflex: 1,\r\n\t},\r\n\r\n\textraAttr: {\r\n\t\tdisplay: \"flex\",\r\n\t\tjustifyContent: \"center\",\r\n\t\talignItems: \"center\",\r\n\t},\r\n\r\n\tbtnWrapper: {\r\n\t\tposition: \"relative\",\r\n\t},\r\n\r\n\tbuttonProgress: {\r\n\t\tcolor: green[500],\r\n\t\tposition: \"absolute\",\r\n\t\ttop: \"50%\",\r\n\t\tleft: \"50%\",\r\n\t\tmarginTop: -12,\r\n\t\tmarginLeft: -12,\r\n\t},\r\n}));\r\n\r\nconst ContactSchema = Yup.object().shape({\r\n\tname: Yup.string()\r\n\t\t.min(2, \"Too Short!\")\r\n\t\t.max(50, \"Too Long!\")\r\n\t\t.required(\"Required\"),\r\n\tnumber: Yup.string().min(8, \"Too Short!\").max(50, \"Too Long!\"),\r\n\temail: Yup.string().email(\"Invalid email\"),\r\n});\r\n\r\nconst ContactModal = ({ open, onClose, contactId, initialValues, onSave }) => {\r\n\tconst classes = useStyles();\r\n\tconst isMounted = useRef(true);\r\n\r\n\tconst initialState = {\r\n\t\tname: \"\",\r\n\t\tnumber: \"\",\r\n\t\temail: \"\",\r\n\t};\r\n\r\n\tconst [contact, setContact] = useState(initialState);\r\n\r\n\tuseEffect(() => {\r\n\t\treturn () => {\r\n\t\t\tisMounted.current = false;\r\n\t\t};\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst fetchContact = async () => {\r\n\t\t\tif (initialValues) {\r\n\t\t\t\tsetContact(prevState => {\r\n\t\t\t\t\treturn { ...prevState, ...initialValues };\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif (!contactId) return;\r\n\r\n\t\t\ttry {\r\n\t\t\t\tconst { data } = await api.get(`/contacts/${contactId}`);\r\n\t\t\t\tif (isMounted.current) {\r\n\t\t\t\t\tconsole.log(data)\r\n\t\t\t\t\tsetContact(data);\r\n\t\t\t\t}\r\n\t\t\t} catch (err) {\r\n\t\t\t\ttoastError(err);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tfetchContact();\r\n\t}, [contactId, open, initialValues]);\r\n\r\n\tconst handleClose = () => {\r\n\t\tonClose();\r\n\t\tsetContact(initialState);\r\n\t};\r\n\r\n\tconst handleSaveContact = async values => {\r\n\t\ttry {\r\n\t\t\tif (contactId) {\r\n\t\t\t\tawait api.put(`/contacts/${contactId}`, values);\r\n\t\t\t\thandleClose();\r\n\t\t\t} else {\r\n\t\t\t\tconst { data } = await api.post(\"/contacts\", values);\r\n\t\t\t\tif (onSave) {\r\n\t\t\t\t\tonSave(data);\r\n\t\t\t\t}\r\n\t\t\t\thandleClose();\r\n\t\t\t}\r\n\t\t\ttoast.success(i18n.t(\"contactModal.success\"));\r\n\t\t} catch (err) {\r\n\t\t\ttoastError(err);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<Dialog open={open} onClose={handleClose} maxWidth=\"lg\" scroll=\"paper\">\r\n\t\t\t\t<DialogTitle id=\"form-dialog-title\">\r\n\t\t\t\t\t{contactId\r\n\t\t\t\t\t\t? `${i18n.t(\"contactModal.title.edit\")}`\r\n\t\t\t\t\t\t: `${i18n.t(\"contactModal.title.add\")}`}\r\n\t\t\t\t</DialogTitle>\r\n\t\t\t\t<Formik\r\n\t\t\t\t\tinitialValues={contact}\r\n\t\t\t\t\tenableReinitialize={true}\r\n\t\t\t\t\tvalidationSchema={ContactSchema}\r\n\t\t\t\t\tonSubmit={(values, actions) => {\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\thandleSaveContact(values);\r\n\t\t\t\t\t\t\tactions.setSubmitting(false);\r\n\t\t\t\t\t\t}, 400);\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{({ values, errors, touched, isSubmitting }) => (\r\n\t\t\t\t\t\t<Form>\r\n\t\t\t\t\t\t\t<DialogContent dividers>\r\n\t\t\t\t\t\t\t\t<Typography variant=\"subtitle1\" gutterBottom>\r\n\t\t\t\t\t\t\t\t\t{i18n.t(\"contactModal.form.mainInfo\")}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"contactModal.form.name\")}\r\n\t\t\t\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\t\t\t\tautoFocus\r\n\t\t\t\t\t\t\t\t\terror={touched.name && Boolean(errors.name)}\r\n\t\t\t\t\t\t\t\t\thelperText={touched.name && errors.name}\r\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\t\tclassName={classes.textField}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"contactModal.form.number\")}\r\n\t\t\t\t\t\t\t\t\tname=\"number\"\r\n\t\t\t\t\t\t\t\t\terror={touched.number && Boolean(errors.number)}\r\n\t\t\t\t\t\t\t\t\thelperText={touched.number && errors.number}\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"5541998608485\"\r\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"contactModal.form.email\")}\r\n\t\t\t\t\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\t\t\t\t\terror={touched.email && Boolean(errors.email)}\r\n\t\t\t\t\t\t\t\t\t\thelperText={touched.email && errors.email}\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Email address\"\r\n\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<Typography\r\n\t\t\t\t\t\t\t\t\tstyle={{ marginBottom: 8, marginTop: 12 }}\r\n\t\t\t\t\t\t\t\t\tvariant=\"subtitle1\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{i18n.t(\"contactModal.form.whatsapp\")} {contact?.whatsapp ? contact?.whatsapp.name : \"\"}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t<Typography\r\n\t\t\t\t\t\t\t\t\tstyle={{ marginBottom: 8, marginTop: 12 }}\r\n\t\t\t\t\t\t\t\t\tvariant=\"subtitle1\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{i18n.t(\"contactModal.form.extraInfo\")}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\r\n\t\t\t\t\t\t\t\t<FieldArray name=\"extraInfo\">\r\n\t\t\t\t\t\t\t\t\t{({ push, remove }) => (\r\n\t\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t\t{values.extraInfo &&\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalues.extraInfo.length > 0 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalues.extraInfo.map((info, index) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.extraAttr}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={`${index}-info`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"contactModal.form.extraName\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname={`extraInfo[${index}].name`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.textField}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"contactModal.form.extraValue\")}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname={`extraInfo[${index}].value`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.textField}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => remove(index)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<DeleteOutlineIcon />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t\t\t<div className={classes.extraAttr}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ flex: 1, marginTop: 8 }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => push({ name: \"\", value: \"\" })}\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{`+ ${i18n.t(\"contactModal.buttons.addExtraInfo\")}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</FieldArray>\r\n\t\t\t\t\t\t\t</DialogContent>\r\n\t\t\t\t\t\t\t<DialogActions>\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tonClick={handleClose}\r\n\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\t\t\tdisabled={isSubmitting}\r\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{i18n.t(\"contactModal.buttons.cancel\")}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\tdisabled={isSubmitting}\r\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\t\tclassName={classes.btnWrapper}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{contactId\r\n\t\t\t\t\t\t\t\t\t\t? `${i18n.t(\"contactModal.buttons.okEdit\")}`\r\n\t\t\t\t\t\t\t\t\t\t: `${i18n.t(\"contactModal.buttons.okAdd\")}`}\r\n\t\t\t\t\t\t\t\t\t{isSubmitting && (\r\n\t\t\t\t\t\t\t\t\t\t<CircularProgress\r\n\t\t\t\t\t\t\t\t\t\t\tsize={24}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.buttonProgress}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</DialogActions>\r\n\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Formik>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default ContactModal;\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\n\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\n\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Autocomplete, {\r\n\tcreateFilterOptions,\r\n} from \"@material-ui/lab/Autocomplete\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport api from \"../../services/api\";\r\nimport ButtonWithSpinner from \"../ButtonWithSpinner\";\r\nimport ContactModal from \"../ContactModal\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport {  WhatsApp } from \"@material-ui/icons\";\r\nimport { Grid, ListItemText, MenuItem, Select } from \"@material-ui/core\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { toast } from \"react-toastify\";\r\n//import ShowTicketOpen from \"../ShowTicketOpenModal\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  online: {\r\n    fontSize: 11,\r\n    color: \"#25d366\"\r\n  },\r\n  offline: {\r\n    fontSize: 11,\r\n    color: \"#e1306c\"\r\n  }\r\n}));\r\n\r\nconst filter = createFilterOptions({\r\n  trim: true,\r\n});\r\n\r\nconst NewTicketModal = ({ modalOpen, onClose, initialContact }) => {\r\n  const classes = useStyles();\r\n  const [options, setOptions] = useState([]);\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [searchParam, setSearchParam] = useState(\"\");\r\n  const [selectedContact, setSelectedContact] = useState(null);\r\n  const [selectedQueue, setSelectedQueue] = useState(\"\");\r\n  const [selectedWhatsapp, setSelectedWhatsapp] = useState(\"\");\r\n  const [newContact, setNewContact] = useState({});\r\n  const [whatsapps, setWhatsapps] = useState([]);\r\n  const [contactModalOpen, setContactModalOpen] = useState(false);\r\n  const { user } = useContext(AuthContext);\r\n  const { companyId, whatsappId } = user;\r\n\r\n  const [ openAlert, setOpenAlert ] = useState(false);\r\n\tconst [ userTicketOpen, setUserTicketOpen] = useState(\"\");\r\n\tconst [ queueTicketOpen, setQueueTicketOpen] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    if (initialContact?.id !== undefined) {\r\n      setOptions([initialContact]);\r\n      setSelectedContact(initialContact);\r\n    }\r\n  }, [initialContact]);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const delayDebounceFn = setTimeout(() => {\r\n      const fetchContacts = async () => {\r\n        api\r\n          .get(`/whatsapp`, { params: { companyId, session: 0 } })\r\n          .then(({ data }) => setWhatsapps(data));\r\n      };\r\n\r\n      if (whatsappId !== null && whatsappId!== undefined) {\r\n        setSelectedWhatsapp(whatsappId)\r\n      }\r\n\r\n      if (user.queues.length === 1) {\r\n        setSelectedQueue(user.queues[0].id)\r\n      }\r\n      fetchContacts();\r\n      setLoading(false);\r\n    }, 500);\r\n    return () => clearTimeout(delayDebounceFn);\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (!modalOpen || searchParam.length < 3) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n    setLoading(true);\r\n    const delayDebounceFn = setTimeout(() => {\r\n      const fetchContacts = async () => {\r\n        try {\r\n          const { data } = await api.get(\"contacts\", {\r\n            params: { searchParam },\r\n          });\r\n          setOptions(data.contacts);\r\n          setLoading(false);\r\n        } catch (err) {\r\n          setLoading(false);\r\n          toastError(err);\r\n        }\r\n      };\r\n      fetchContacts();\r\n    }, 500);\r\n    return () => clearTimeout(delayDebounceFn);\r\n  }, [searchParam, modalOpen]);\r\n\r\n  // const IconChannel = (channel) => {\r\n  //   switch (channel) {\r\n  //     case \"facebook\":\r\n  //       return <Facebook style={{ color: \"#3b5998\", verticalAlign: \"middle\" }} />;\r\n  //     case \"instagram\":\r\n  //       return <Instagram style={{ color: \"#e1306c\", verticalAlign: \"middle\" }} />;\r\n  //     case \"whatsapp\":\r\n  //       return <WhatsApp style={{ color: \"#25d366\", verticalAlign: \"middle\" }} />\r\n  //     default:\r\n  //       return \"error\";\r\n  //   }\r\n  // };\r\n\r\n  const handleClose = () => {\r\n    onClose();\r\n    setSearchParam(\"\");\r\n    setOpenAlert(false);\r\n    setUserTicketOpen(\"\");\r\n    setQueueTicketOpen(\"\");\r\n    setSelectedContact(null);\r\n  };\r\n\r\n  const handleCloseAlert = () => {\r\n    setOpenAlert(false);\r\n    setLoading(false);\r\n    setOpenAlert(false);\r\n    setUserTicketOpen(\"\");\r\n    setQueueTicketOpen(\"\");\r\n  };\r\n\r\n  const handleSaveTicket = async contactId => {\r\n    if (!contactId) return;\r\n    if (selectedQueue === \"\" && user.profile !== 'admin') {\r\n      toast.error(\"Selecione uma fila\");\r\n      return;\r\n    }\r\n    \r\n    setLoading(true);\r\n    try {\r\n      const queueId = selectedQueue !== \"\" ? selectedQueue : null;\r\n      const whatsappId = selectedWhatsapp !== \"\" ? selectedWhatsapp : null;\r\n      const { data: ticket } = await api.post(\"/tickets\", {\r\n        contactId: contactId,\r\n        queueId,\r\n        whatsappId,\r\n        userId: user.id,\r\n        status: \"open\",\r\n      });      \r\n\r\n      onClose(ticket);\r\n    } catch (err) {\r\n      \r\n      const ticket  = JSON.parse(err.response.data.error);\r\n\r\n      if (ticket.userId !== user?.id) {\r\n        setOpenAlert(true);\r\n        setUserTicketOpen(ticket.user.name);\r\n        setQueueTicketOpen(ticket.queue.name);\r\n      } else {\r\n        setOpenAlert(false);\r\n        setUserTicketOpen(\"\");\r\n        setQueueTicketOpen(\"\");\r\n        setLoading(false);\r\n        onClose(ticket);\r\n      }\r\n    }  \r\n    setLoading(false);\r\n  };\r\n\r\n  const handleSelectOption = (e, newValue) => {\r\n    if (newValue?.number) {\r\n      setSelectedContact(newValue);\r\n    } else if (newValue?.name) {\r\n      setNewContact({ name: newValue.name });\r\n      setContactModalOpen(true);\r\n    }\r\n  };\r\n\r\n  const handleCloseContactModal = () => {\r\n    setContactModalOpen(false);    \r\n  };\r\n\r\n  const handleAddNewContactTicket = contact => {\r\n    handleSaveTicket(contact.id);\r\n  };\r\n\r\n  const createAddContactOption = (filterOptions, params) => {\r\n    const filtered = filter(filterOptions, params);\r\n    if (params.inputValue !== \"\" && !loading && searchParam.length >= 3) {\r\n      filtered.push({\r\n        name: `${params.inputValue}`,\r\n      });\r\n    }\r\n    return filtered;\r\n  };\r\n\r\n  const renderOption = option => {\r\n    if (option.number) {\r\n      return <>\r\n        {/* {IconChannel(option.channel)} */}\r\n        <Typography component=\"span\" style={{ fontSize: 14, marginLeft: \"10px\", display: \"inline-flex\", alignItems: \"center\", lineHeight: \"2\" }}>\r\n          {option.name} - {option.number}\r\n        </Typography>\r\n      </>\r\n    } else {\r\n      return `${i18n.t(\"newTicketModal.add\")} ${option.name}`;\r\n    }\r\n  };\r\n\r\n  const renderOptionLabel = option => {\r\n    if (option.number) {\r\n      return `${option.name} - ${option.number}`;\r\n    } else {\r\n      return `${option.name}`;\r\n    }\r\n  };\r\n\r\n  const renderContactAutocomplete = () => {\r\n    if (initialContact === undefined || initialContact.id === undefined) {\r\n      return (\r\n        <Grid xs={12} item>\r\n          <Autocomplete\r\n            fullWidth\r\n            options={options}\r\n            loading={loading}\r\n            clearOnBlur\r\n            autoHighlight\r\n            freeSolo\r\n            clearOnEscape\r\n            getOptionLabel={renderOptionLabel}\r\n            renderOption={renderOption}\r\n            filterOptions={createAddContactOption}\r\n            onChange={(e, newValue) => handleSelectOption(e, newValue)}\r\n            renderInput={params => (\r\n              <TextField\r\n                {...params}\r\n                label={i18n.t(\"newTicketModal.fieldLabel\")}\r\n                variant=\"outlined\"\r\n                autoFocus\r\n                onChange={e => setSearchParam(e.target.value)}\r\n                onKeyPress={e => {\r\n                  if (loading || !selectedContact) return;\r\n                  else if (e.key === \"Enter\") {\r\n                    handleSaveTicket(selectedContact.id);\r\n                  }\r\n                }}\r\n                InputProps={{\r\n                  ...params.InputProps,\r\n                  endAdornment: (\r\n                    <React.Fragment>\r\n                      {loading ? (\r\n                        <CircularProgress color=\"inherit\" size={20} />\r\n                      ) : null}\r\n                      {params.InputProps.endAdornment}\r\n                    </React.Fragment>\r\n                  ),\r\n                }}\r\n              />\r\n            )}\r\n          />\r\n        </Grid>\r\n      )\r\n    }\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <ContactModal\r\n        open={contactModalOpen}\r\n        initialValues={newContact}\r\n        onClose={handleCloseContactModal}\r\n        onSave={handleAddNewContactTicket}\r\n      ></ContactModal>\r\n      <Dialog open={modalOpen} onClose={handleClose}>\r\n        <DialogTitle id=\"form-dialog-title\">\r\n          {i18n.t(\"newTicketModal.title\")}\r\n        </DialogTitle>\r\n        <DialogContent dividers>\r\n          <Grid style={{ width: 300 }} container spacing={2}>\r\n            {/* CONTATO */}\r\n            {renderContactAutocomplete()}\r\n            {/* FILA */}\r\n            <Grid xs={12} item>\r\n              <Select\r\n                required\r\n                fullWidth\r\n                displayEmpty\r\n                variant=\"outlined\"\r\n                value={selectedQueue}\r\n                onChange={(e) => {\r\n                  setSelectedQueue(e.target.value)\r\n                }}\r\n                MenuProps={{\r\n                  anchorOrigin: {\r\n                    vertical: \"bottom\",\r\n                    horizontal: \"left\",\r\n                  },\r\n                  transformOrigin: {\r\n                    vertical: \"top\",\r\n                    horizontal: \"left\",\r\n                  },\r\n                  getContentAnchorEl: null,\r\n                }}\r\n                renderValue={() => {\r\n                  if (selectedQueue === \"\") {\r\n                    return \"Selecione uma fila\"\r\n                  }\r\n                  const queue = user.queues.find(q => q.id === selectedQueue)\r\n                  return queue.name\r\n                }}\r\n              >\r\n                {user.queues?.length > 0 &&\r\n                  user.queues.map((queue, key) => (\r\n                    <MenuItem dense key={key} value={queue.id}>\r\n                      <ListItemText primary={queue.name} />\r\n                    </MenuItem>\r\n                  ))\r\n                }\r\n              </Select>\r\n            </Grid>\r\n            {/* CONEXAO */}\r\n            <Grid xs={12} item>\r\n              <Select\r\n                required\r\n                fullWidth\r\n                displayEmpty\r\n                variant=\"outlined\"\r\n                value={selectedWhatsapp}\r\n                onChange={(e) => {\r\n                  setSelectedWhatsapp(e.target.value)\r\n                }}\r\n                MenuProps={{\r\n                  anchorOrigin: {\r\n                    vertical: \"bottom\",\r\n                    horizontal: \"left\",\r\n                  },\r\n                  transformOrigin: {\r\n                    vertical: \"top\",\r\n                    horizontal: \"left\",\r\n                  },\r\n                  getContentAnchorEl: null,\r\n                }}\r\n                renderValue={() => {\r\n                  if (selectedWhatsapp === \"\") {\r\n                    return \"Selecione uma Conexão\"\r\n                  }\r\n                  const whatsapp = whatsapps.find(w => w.id === selectedWhatsapp)\r\n                  return whatsapp.name\r\n                }}\r\n              >\r\n                {whatsapps?.length > 0 &&\r\n                  whatsapps.map((whatsapp, key) => (\r\n                    <MenuItem dense key={key} value={whatsapp.id}>\r\n                      <ListItemText\r\n                        primary={\r\n                          <>\r\n                            {/* {IconChannel(whatsapp.channel)} */}\r\n                            <Typography component=\"span\" style={{ fontSize: 14, marginLeft: \"10px\", display: \"inline-flex\", alignItems: \"center\", lineHeight: \"2\" }}>\r\n                              {whatsapp.name} &nbsp; <p className={(whatsapp.status) === 'CONNECTED' ? classes.online : classes.offline} >({whatsapp.status})</p>\r\n                            </Typography>\r\n                          </>\r\n                        }\r\n                      />\r\n                    </MenuItem>\r\n                  ))}\r\n              </Select>\r\n            </Grid>\r\n          </Grid>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={handleClose}\r\n            color=\"secondary\"\r\n            disabled={loading}\r\n            variant=\"outlined\"\r\n          >\r\n            {i18n.t(\"newTicketModal.buttons.cancel\")}\r\n          </Button>\r\n          <ButtonWithSpinner\r\n            variant=\"contained\"\r\n            type=\"button\"\r\n            disabled={!selectedContact}\r\n            onClick={() => handleSaveTicket(selectedContact.id)}\r\n            color=\"primary\"\r\n            loading={loading}\r\n          >\r\n            {i18n.t(\"newTicketModal.buttons.ok\")}\r\n          </ButtonWithSpinner>\r\n        </DialogActions>\r\n        {/* <ShowTicketOpen\r\n          isOpen={openAlert}\r\n          handleClose={handleCloseAlert}\r\n          user={userTicketOpen}\r\n          queue={queueTicketOpen}\r\n\t\t\t  /> */}\r\n      </Dialog >\r\n    </>\r\n  );\r\n};\r\nexport default NewTicketModal;","import React from \"react\";\r\n\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport Skeleton from \"@material-ui/lab/Skeleton\";\r\n\r\nconst TicketsSkeleton = () => {\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<ListItem dense>\r\n\t\t\t\t<ListItemAvatar>\r\n\t\t\t\t\t<Skeleton animation=\"wave\" variant=\"circle\" width={40} height={40} />\r\n\t\t\t\t</ListItemAvatar>\r\n\t\t\t\t<ListItemText\r\n\t\t\t\t\tprimary={<Skeleton animation=\"wave\" height={20} width={60} />}\r\n\t\t\t\t\tsecondary={<Skeleton animation=\"wave\" height={20} width={90} />}\r\n\t\t\t\t/>\r\n\t\t\t</ListItem>\r\n\t\t\t<Divider variant=\"inset\" />\r\n\t\t\t<ListItem dense>\r\n\t\t\t\t<ListItemAvatar>\r\n\t\t\t\t\t<Skeleton animation=\"wave\" variant=\"circle\" width={40} height={40} />\r\n\t\t\t\t</ListItemAvatar>\r\n\t\t\t\t<ListItemText\r\n\t\t\t\t\tprimary={<Skeleton animation=\"wave\" height={20} width={70} />}\r\n\t\t\t\t\tsecondary={<Skeleton animation=\"wave\" height={20} width={120} />}\r\n\t\t\t\t/>\r\n\t\t\t</ListItem>\r\n\t\t\t<Divider variant=\"inset\" />\r\n\t\t\t<ListItem dense>\r\n\t\t\t\t<ListItemAvatar>\r\n\t\t\t\t\t<Skeleton animation=\"wave\" variant=\"circle\" width={40} height={40} />\r\n\t\t\t\t</ListItemAvatar>\r\n\t\t\t\t<ListItemText\r\n\t\t\t\t\tprimary={<Skeleton animation=\"wave\" height={20} width={60} />}\r\n\t\t\t\t\tsecondary={<Skeleton animation=\"wave\" height={20} width={90} />}\r\n\t\t\t\t/>\r\n\t\t\t</ListItem>\r\n\t\t\t<Divider variant=\"inset\" />\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default TicketsSkeleton;\r\n","import React, { useState, useEffect, useReducer, useContext } from \"react\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport List from \"@material-ui/core/List\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\n\r\nimport TicketListItem from \"../TicketListItemCustom\";\r\nimport TicketsListSkeleton from \"../TicketsListSkeleton\";\r\n\r\nimport useTickets from \"../../hooks/useTickets\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport { SocketContext } from \"../../context/Socket/SocketContext\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  ticketsListWrapper: {\r\n    position: \"relative\",\r\n    display: \"flex\",\r\n    height: \"100%\",\r\n    flexDirection: \"column\",\r\n    overflow: \"hidden\",\r\n    borderTopRightRadius: 0,\r\n    borderBottomRightRadius: 0,\r\n  },\r\n\r\n  ticketsList: {\r\n    flex: 1,\r\n    maxHeight: \"100%\",\r\n    overflowY: \"scroll\",\r\n    ...theme.scrollbarStyles,\r\n    borderTop: \"2px solid rgba(0, 0, 0, 0.12)\",\r\n  },\r\n\r\n  ticketsListHeader: {\r\n    color: \"rgb(67, 83, 105)\",\r\n    zIndex: 2,\r\n    backgroundColor: \"white\",\r\n    borderBottom: \"1px solid rgba(0, 0, 0, 0.12)\",\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"space-between\",\r\n  },\r\n\r\n  ticketsCount: {\r\n    fontWeight: \"normal\",\r\n    color: \"rgb(104, 121, 146)\",\r\n    marginLeft: \"8px\",\r\n    fontSize: \"14px\",\r\n  },\r\n\r\n  noTicketsText: {\r\n    textAlign: \"center\",\r\n    color: \"rgb(104, 121, 146)\",\r\n    fontSize: \"14px\",\r\n    lineHeight: \"1.4\",\r\n  },\r\n\r\n  noTicketsTitle: {\r\n    textAlign: \"center\",\r\n    fontSize: \"16px\",\r\n    fontWeight: \"600\",\r\n    margin: \"0px\",\r\n  },\r\n\r\n  noTicketsDiv: {\r\n    display: \"flex\",\r\n    height: \"100px\",\r\n    margin: 40,\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n}));\r\n\r\nconst reducer = (state, action) => {\r\n  if (action.type === \"LOAD_TICKETS\") {\r\n    const newTickets = action.payload;\r\n\r\n    newTickets.forEach((ticket) => {\r\n      const ticketIndex = state.findIndex((t) => t.id === ticket.id);\r\n      if (ticketIndex !== -1) {\r\n        state[ticketIndex] = ticket;\r\n        if (ticket.unreadMessages > 0) {\r\n          state.unshift(state.splice(ticketIndex, 1)[0]);\r\n        }\r\n      } else {\r\n        state.push(ticket);\r\n      }\r\n    });\r\n\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"RESET_UNREAD\") {\r\n    const ticketId = action.payload;\r\n\r\n    const ticketIndex = state.findIndex((t) => t.id === ticketId);\r\n    if (ticketIndex !== -1) {\r\n      state[ticketIndex].unreadMessages = 0;\r\n    }\r\n\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"UPDATE_TICKET\") {\r\n    const ticket = action.payload;\r\n\r\n    const ticketIndex = state.findIndex((t) => t.id === ticket.id);\r\n    if (ticketIndex !== -1) {\r\n      state[ticketIndex] = ticket;\r\n    } else {\r\n      state.unshift(ticket);\r\n    }\r\n\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"UPDATE_TICKET_UNREAD_MESSAGES\") {\r\n    const ticket = action.payload;\r\n\r\n    const ticketIndex = state.findIndex((t) => t.id === ticket.id);\r\n    if (ticketIndex !== -1) {\r\n      state[ticketIndex] = ticket;\r\n      state.unshift(state.splice(ticketIndex, 1)[0]);\r\n    } else {\r\n      state.unshift(ticket);\r\n    }\r\n\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"UPDATE_TICKET_CONTACT\") {\r\n    const contact = action.payload;\r\n    const ticketIndex = state.findIndex((t) => t.contactId === contact.id);\r\n    if (ticketIndex !== -1) {\r\n      state[ticketIndex].contact = contact;\r\n    }\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"DELETE_TICKET\") {\r\n    const ticketId = action.payload;\r\n    const ticketIndex = state.findIndex((t) => t.id === ticketId);\r\n    if (ticketIndex !== -1) {\r\n      state.splice(ticketIndex, 1);\r\n    }\r\n\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"RESET\") {\r\n    return [];\r\n  }\r\n};\r\n\r\nconst TicketsListCustom = (props) => {\r\n  const {\r\n    status,\r\n    searchParam,\r\n    tags,\r\n    users,\r\n    showAll,\r\n    selectedQueueIds,\r\n    updateCount,\r\n    style,\r\n  } = props;\r\n  const classes = useStyles();\r\n  const [pageNumber, setPageNumber] = useState(1);\r\n  const [ticketsList, dispatch] = useReducer(reducer, []);\r\n  const { user } = useContext(AuthContext);\r\n  const { profile, queues } = user;\r\n\r\n  const socketManager = useContext(SocketContext);\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: \"RESET\" });\r\n    setPageNumber(1);\r\n  }, [status, searchParam, dispatch, showAll, tags, users, selectedQueueIds]);\r\n\r\n  const { tickets, hasMore, loading } = useTickets({\r\n    pageNumber,\r\n    searchParam,\r\n    status,\r\n    showAll,\r\n    tags: JSON.stringify(tags),\r\n    users: JSON.stringify(users),\r\n    queueIds: JSON.stringify(selectedQueueIds),\r\n  });\r\n\r\n  useEffect(() => {\r\n    const queueIds = queues.map((q) => q.id);\r\n    const filteredTickets = tickets.filter(\r\n      (t) => queueIds.indexOf(t.queueId) > -1\r\n    );\r\n\r\n    if (profile === \"user\") {\r\n      dispatch({ type: \"LOAD_TICKETS\", payload: filteredTickets });\r\n    } else {\r\n      dispatch({ type: \"LOAD_TICKETS\", payload: tickets });\r\n    }\r\n  }, [tickets, status, searchParam, queues, profile]);\r\n\r\n  useEffect(() => {\r\n    const companyId = localStorage.getItem(\"companyId\");\r\n    const socket = socketManager.getSocket(companyId);\r\n\r\n    const shouldUpdateTicket = (ticket) =>\r\n      (!ticket.userId || ticket.userId === user?.id || showAll) &&\r\n      (!ticket.queueId || selectedQueueIds.indexOf(ticket.queueId) > -1);\r\n\r\n    const notBelongsToUserQueues = (ticket) =>\r\n      ticket.queueId && selectedQueueIds.indexOf(ticket.queueId) === -1;\r\n\r\n    socket.on(\"ready\", () => {\r\n      if (status) {\r\n        socket.emit(\"joinTickets\", status);\r\n      } else {\r\n        socket.emit(\"joinNotification\");\r\n      }\r\n    });\r\n\r\n    socket.on(`company-${companyId}-ticket`, (data) => {\r\n      \r\n      if (data.action === \"updateUnread\") {\r\n        dispatch({\r\n          type: \"RESET_UNREAD\",\r\n          payload: data.ticketId,\r\n        });\r\n      }\r\n\r\n      if (data.action === \"update\" && shouldUpdateTicket(data.ticket) && data.ticket.status === status) {\r\n        dispatch({\r\n          type: \"UPDATE_TICKET\",\r\n          payload: data.ticket,\r\n        });\r\n      }\r\n\r\n      if (data.action === \"update\" && notBelongsToUserQueues(data.ticket)) {\r\n        dispatch({ type: \"DELETE_TICKET\", payload: data.ticket.id });\r\n      }\r\n\r\n      if (data.action === \"delete\") {\r\n        dispatch({ type: \"DELETE_TICKET\", payload: data.ticketId });\r\n      }\r\n    });\r\n\r\n    socket.on(`company-${companyId}-appMessage`, (data) => {\r\n      const queueIds = queues.map((q) => q.id);\r\n      if (\r\n        profile === \"user\" &&\r\n        (queueIds.indexOf(data.ticket?.queue?.id) === -1 ||\r\n          data.ticket.queue === null)\r\n      ) {\r\n        return;\r\n      }\r\n\r\n      if (data.action === \"create\" && shouldUpdateTicket(data.ticket) && ( status === undefined || data.ticket.status === status)) {\r\n        dispatch({\r\n          type: \"UPDATE_TICKET_UNREAD_MESSAGES\",\r\n          payload: data.ticket,\r\n        });\r\n      }\r\n    });\r\n\r\n    socket.on(`company-${companyId}-contact`, (data) => {\r\n      if (data.action === \"update\") {\r\n        dispatch({\r\n          type: \"UPDATE_TICKET_CONTACT\",\r\n          payload: data.contact,\r\n        });\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, [status, showAll, user, selectedQueueIds, tags, users, profile, queues, socketManager]);\r\n\r\n  useEffect(() => {\r\n    if (typeof updateCount === \"function\") {\r\n      updateCount(ticketsList.length);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [ticketsList]);\r\n\r\n  const loadMore = () => {\r\n    setPageNumber((prevState) => prevState + 1);\r\n  };\r\n\r\n  const handleScroll = (e) => {\r\n    if (!hasMore || loading) return;\r\n\r\n    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\r\n\r\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\r\n      loadMore();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Paper className={classes.ticketsListWrapper} style={style}>\r\n      <Paper\r\n        square\r\n        name=\"closed\"\r\n        elevation={0}\r\n        className={classes.ticketsList}\r\n        onScroll={handleScroll}\r\n      >\r\n        <List style={{ paddingTop: 0 }}>\r\n          {ticketsList.length === 0 && !loading ? (\r\n            <div className={classes.noTicketsDiv}>\r\n              <span className={classes.noTicketsTitle}>\r\n                {i18n.t(\"ticketsList.noTicketsTitle\")}\r\n              </span>\r\n              <p className={classes.noTicketsText}>\r\n                {i18n.t(\"ticketsList.noTicketsMessage\")}\r\n              </p>\r\n            </div>\r\n          ) : (\r\n            <>\r\n              {ticketsList.map((ticket) => (\r\n                <TicketListItem ticket={ticket} key={ticket.id} />\r\n              ))}\r\n            </>\r\n          )}\r\n          {loading && <TicketsListSkeleton />}\r\n        </List>\r\n      </Paper>\r\n    </Paper>\r\n  );\r\n};\r\n\r\nexport default TicketsListCustom;\r\n","import React from \"react\";\r\n\r\nconst TabPanel = ({ children, value, name, ...rest }) => {\r\n\tif (value === name) {\r\n\t\treturn (\r\n\t\t\t<div\r\n\t\t\t\trole=\"tabpanel\"\r\n\t\t\t\tid={`simple-tabpanel-${name}`}\r\n\t\t\t\taria-labelledby={`simple-tab-${name}`}\r\n\t\t\t\t{...rest}\r\n\t\t\t>\r\n\t\t\t\t<>{children}</>\r\n\t\t\t</div>\r\n\t\t);\r\n\t} else return null;\r\n};\r\n\r\nexport default TabPanel;\r\n","import React from \"react\";\r\n\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport { Checkbox, ListItemText } from \"@material-ui/core\";\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nconst TicketsQueueSelect = ({\r\n\tuserQueues,\r\n\tselectedQueueIds = [],\r\n\tonChange,\r\n}) => {\r\n\tconst handleChange = e => {\r\n\t\tonChange(e.target.value);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div style={{ width: 120, marginTop: -4 }}>\r\n\t\t\t<FormControl fullWidth margin=\"dense\">\r\n\t\t\t\t<Select\r\n\t\t\t\t\tmultiple\r\n\t\t\t\t\tdisplayEmpty\r\n\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\tvalue={selectedQueueIds}\r\n\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\tMenuProps={{\r\n\t\t\t\t\t\tanchorOrigin: {\r\n\t\t\t\t\t\t\tvertical: \"bottom\",\r\n\t\t\t\t\t\t\thorizontal: \"left\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\ttransformOrigin: {\r\n\t\t\t\t\t\t\tvertical: \"top\",\r\n\t\t\t\t\t\t\thorizontal: \"left\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tgetContentAnchorEl: null,\r\n\t\t\t\t\t}}\r\n\t\t\t\t\trenderValue={() => i18n.t(\"ticketsQueueSelect.placeholder\")}\r\n\t\t\t\t>\r\n\t\t\t\t\t{userQueues?.length > 0 &&\r\n\t\t\t\t\t\tuserQueues.map(queue => (\r\n\t\t\t\t\t\t\t<MenuItem dense key={queue.id} value={queue.id}>\r\n\t\t\t\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\tcolor: queue.color,\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\tchecked={selectedQueueIds.indexOf(queue.id) > -1}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<ListItemText primary={queue.name} />\r\n\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t</Select>\r\n\t\t\t</FormControl>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default TicketsQueueSelect;\r\n","import { Box, Chip, TextField } from \"@material-ui/core\";\r\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport api from \"../../services/api\";\r\n\r\nexport function TagsFilter({ onFiltered }) {\r\n  const [tags, setTags] = useState([]);\r\n  const [selecteds, setSelecteds] = useState([]);\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      await loadTags();\r\n    }\r\n    fetchData();\r\n  }, []);\r\n\r\n  const loadTags = async () => {\r\n    try {\r\n      const { data } = await api.get(`/tags/list`);\r\n      setTags(data);\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  };\r\n\r\n  const onChange = async (value) => {\r\n    setSelecteds(value);\r\n    onFiltered(value);\r\n  };\r\n\r\n  return (\r\n    <Box style={{ padding: 10 }}>\r\n      <Autocomplete\r\n        multiple\r\n        size=\"small\"\r\n        options={tags}\r\n        value={selecteds}\r\n        onChange={(e, v, r) => onChange(v)}\r\n        getOptionLabel={(option) => option.name}\r\n        renderTags={(value, getTagProps) =>\r\n          value.map((option, index) => (\r\n            <Chip\r\n              variant=\"outlined\"\r\n              style={{\r\n                backgroundColor: option.color || \"#eee\",\r\n                textShadow: \"1px 1px 1px #000\",\r\n                color: \"white\",\r\n              }}\r\n              label={option.name}\r\n              {...getTagProps({ index })}\r\n              size=\"small\"\r\n            />\r\n          ))\r\n        }\r\n        renderInput={(params) => (\r\n          <TextField\r\n            {...params}\r\n            variant=\"outlined\"\r\n            placeholder=\"Filtro por Tags\"\r\n          />\r\n        )}\r\n      />\r\n    </Box>\r\n  );\r\n}\r\n","import { Box, Chip, TextField } from \"@material-ui/core\";\r\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport api from \"../../services/api\";\r\n\r\nexport function UsersFilter({ onFiltered, initialUsers }) {\r\n  const [users, setUsers] = useState([]);\r\n  const [selecteds, setSelecteds] = useState([]);\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      await loadUsers();\r\n    }\r\n    fetchData();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setSelecteds([]);\r\n    if (\r\n      Array.isArray(initialUsers) &&\r\n      Array.isArray(users) &&\r\n      users.length > 0\r\n    ) {\r\n      onChange(initialUsers);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [initialUsers, users]);\r\n\r\n  const loadUsers = async () => {\r\n    try {\r\n      const { data } = await api.get(`/users/list`);\r\n      const userList = data.map((u) => ({ id: u.id, name: u.name }));\r\n      setUsers(userList);\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  };\r\n\r\n  const onChange = async (value) => {\r\n    setSelecteds(value);\r\n    onFiltered(value);\r\n  };\r\n\r\n  return (\r\n    <Box style={{ padding: \"0px 10px 10px\" }}>\r\n      <Autocomplete\r\n        multiple\r\n        size=\"small\"\r\n        options={users}\r\n        value={selecteds}\r\n        onChange={(e, v, r) => onChange(v)}\r\n        getOptionLabel={(option) => option.name}\r\n        getOptionSelected={(option, value) => {\r\n          return (\r\n            option?.id === value?.id ||\r\n            option?.name.toLowerCase() === value?.name.toLowerCase()\r\n          );\r\n        }}\r\n        renderTags={(value, getUserProps) =>\r\n          value.map((option, index) => (\r\n            <Chip\r\n              variant=\"outlined\"\r\n              style={{\r\n                backgroundColor: \"#bfbfbf\",\r\n                textShadow: \"1px 1px 1px #000\",\r\n                color: \"white\",\r\n              }}\r\n              label={option.name}\r\n              {...getUserProps({ index })}\r\n              size=\"small\"\r\n            />\r\n          ))\r\n        }\r\n        renderInput={(params) => (\r\n          <TextField\r\n            {...params}\r\n            variant=\"outlined\"\r\n            placeholder=\"Filtro por Users\"\r\n          />\r\n        )}\r\n      />\r\n    </Box>\r\n  );\r\n}\r\n","import React, { useContext, useEffect, useRef, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport InputBase from \"@material-ui/core/InputBase\";\r\nimport Tabs from \"@material-ui/core/Tabs\";\r\nimport Tab from \"@material-ui/core/Tab\";\r\nimport Badge from \"@material-ui/core/Badge\";\r\nimport MoveToInboxIcon from \"@material-ui/icons/MoveToInbox\";\r\nimport CheckBoxIcon from \"@material-ui/icons/CheckBox\";\r\n\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport Switch from \"@material-ui/core/Switch\";\r\n\r\nimport NewTicketModal from \"../NewTicketModal\";\r\nimport TicketsList from \"../TicketsListCustom\";\r\nimport TabPanel from \"../TabPanel\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport { Can } from \"../Can\";\r\nimport TicketsQueueSelect from \"../TicketsQueueSelect\";\r\nimport { Button } from \"@material-ui/core\";\r\nimport { TagsFilter } from \"../TagsFilter\";\r\nimport { UsersFilter } from \"../UsersFilter\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tticketsWrapper: {\r\n\t\tposition: \"relative\",\r\n\t\tdisplay: \"flex\",\r\n\t\theight: \"100%\",\r\n\t\tflexDirection: \"column\",\r\n\t\toverflow: \"hidden\",\r\n\t\tborderTopRightRadius: 0,\r\n\t\tborderBottomRightRadius: 0,\r\n\t\tborderRadius:0,\r\n\t},\r\n\r\n\ttabsHeader: {\r\n\t\tflex: \"none\",\r\n\t\tbackgroundColor: theme.palette.tabHeaderBackground,\r\n\t},\r\n\r\n\ttabsInternal: {\r\n\t\tflex: \"none\",\r\n\t\tbackgroundColor: theme.palette.tabHeaderBackground\r\n\t},\r\n\r\n\tsettingsIcon: {\r\n\t\talignSelf: \"center\",\r\n\t\tmarginLeft: \"auto\",\r\n\t\tpadding: 8,\r\n\t},\r\n\r\n\ttab: {\r\n\t\tminWidth: 120,\r\n\t\twidth: 120,\r\n\t},\r\n\r\n\tinternalTab: {\r\n\t\tminWidth: 120,\r\n\t\twidth: 120,\r\n\t\tpadding: 5\r\n\t},\r\n\r\n\tticketOptionsBox: {\r\n\t\tdisplay: \"flex\",\r\n\t\tjustifyContent: \"space-between\",\r\n\t\talignItems: \"center\",\r\n\t\tbackground: theme.palette.optionsBackground,\r\n\t\tpadding: theme.spacing(1),\r\n\t},\r\n\r\n\tticketSearchLine: {\r\n\t\tpadding: theme.spacing(1),\r\n\t},\r\n\r\n\tserachInputWrapper: {\r\n\t\tflex: 1,\r\n\t\tbackground: theme.palette.total,\r\n\t\tdisplay: \"flex\",\r\n\t\tborderRadius: 40,\r\n\t\tpadding: 4,\r\n\t\tmarginRight: theme.spacing(1),\r\n\t},\r\n\r\n\tsearchIcon: {\r\n\t\tcolor: \"grey\",\r\n\t\tmarginLeft: 6,\r\n\t\tmarginRight: 6,\r\n\t\talignSelf: \"center\",\r\n\t},\r\n\r\n\tsearchInput: {\r\n\t\tflex: 1,\r\n\t\tborder: \"none\",\r\n\t\tborderRadius: 30,\r\n\t},\r\n\r\n\tinsiderTabPanel: {\r\n\t\theight: '100%',\r\n\t\tmarginTop: \"-72px\",\r\n\t\tpaddingTop: \"72px\"\r\n\t},\r\n\r\n\tinsiderDoubleTabPanel: {\r\n\t\tdisplay:\"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\tmarginTop: \"-72px\",\r\n\t\tpaddingTop: \"72px\",\r\n\t\theight: \"100%\"\r\n\t},\r\n\r\n\tlabelContainer: {\r\n\t\twidth: \"auto\",\r\n\t\tpadding: 0\r\n\t},\r\n\ticonLabelWrapper: {\r\n\t\tflexDirection: \"row\",\r\n\t\t'& > *:first-child': {\r\n\t\t\tmarginBottom: '3px !important',\r\n\t\t\tmarginRight: 16\r\n\t\t}\r\n\t},\r\n\tinsiderTabLabel: {\r\n\t\t[theme.breakpoints.down(1600)]: {\r\n\t\t\tdisplay:'none'\r\n\t\t}\r\n\t},\r\n\tsmallFormControl: {\r\n\t\t'& .MuiOutlinedInput-input': {\r\n\t\t\tpadding: \"12px 10px\",\r\n\t\t},\r\n\t\t'& .MuiInputLabel-outlined': {\r\n\t\t\tmarginTop: \"-6px\"\r\n\t\t}\r\n\t}\r\n}));\r\n\r\nconst TicketsManagerTabs = () => {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n\r\n  const [searchParam, setSearchParam] = useState(\"\");\r\n  const [tab, setTab] = useState(\"open\");\r\n  const [tabOpen, setTabOpen] = useState(\"open\");\r\n  const [newTicketModalOpen, setNewTicketModalOpen] = useState(false);\r\n  const [showAllTickets, setShowAllTickets] = useState(false);\r\n  const searchInputRef = useRef();\r\n  const { user } = useContext(AuthContext);\r\n  const { profile } = user;\r\n\r\n  const [openCount, setOpenCount] = useState(0);\r\n  const [pendingCount, setPendingCount] = useState(0);\r\n\r\n  const userQueueIds = user.queues.map((q) => q.id);\r\n  const [selectedQueueIds, setSelectedQueueIds] = useState(userQueueIds || []);\r\n  const [selectedTags, setSelectedTags] = useState([]);\r\n  const [selectedUsers, setSelectedUsers] = useState([]);\r\n\r\n  useEffect(() => {\r\n    if (user.profile.toUpperCase() === \"ADMIN\") {\r\n      setShowAllTickets(true);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (tab === \"search\") {\r\n      searchInputRef.current.focus();\r\n    }\r\n  }, [tab]);\r\n\r\n  let searchTimeout;\r\n\r\n  const handleSearch = (e) => {\r\n    const searchedTerm = e.target.value.toLowerCase();\r\n\r\n    clearTimeout(searchTimeout);\r\n\r\n    if (searchedTerm === \"\") {\r\n      setSearchParam(searchedTerm);\r\n      setTab(\"open\");\r\n      return;\r\n    }\r\n\r\n    searchTimeout = setTimeout(() => {\r\n      setSearchParam(searchedTerm);\r\n    }, 500);\r\n  };\r\n\r\n  const handleChangeTab = (e, newValue) => {\r\n    setTab(newValue);\r\n  };\r\n\r\n  const handleChangeTabOpen = (e, newValue) => {\r\n    setTabOpen(newValue);\r\n  };\r\n\r\n  const applyPanelStyle = (status) => {\r\n    if (tabOpen !== status) {\r\n      return { width: 0, height: 0 };\r\n    }\r\n  };\r\n\r\n  const handleCloseOrOpenTicket = (ticket) => {\r\n    setNewTicketModalOpen(false);\r\n    if (ticket !== undefined && ticket.uuid !== undefined) {\r\n      history.push(`/tickets/${ticket.uuid}`);\r\n    }\r\n  };\r\n\r\n  const handleSelectedTags = (selecteds) => {\r\n    const tags = selecteds.map((t) => t.id);\r\n    setSelectedTags(tags);\r\n  };\r\n\r\n  const handleSelectedUsers = (selecteds) => {\r\n    const users = selecteds.map((t) => t.id);\r\n    setSelectedUsers(users);\r\n  };\r\n\r\n  return (\r\n    <Paper elevation={0} variant=\"outlined\" className={classes.ticketsWrapper}>\r\n      <NewTicketModal\r\n        modalOpen={newTicketModalOpen}\r\n        onClose={(ticket) => {\r\n          \r\n          handleCloseOrOpenTicket(ticket);\r\n        }}\r\n      />\r\n      <Paper elevation={0} square className={classes.tabsHeader}>\r\n        <Tabs\r\n          value={tab}\r\n          onChange={handleChangeTab}\r\n          variant=\"fullWidth\"\r\n          indicatorColor=\"primary\"\r\n          textColor=\"primary\"\r\n          aria-label=\"icon label tabs example\"\r\n        >\r\n          <Tab\r\n            value={\"open\"}\r\n            icon={<MoveToInboxIcon />}\r\n            label={i18n.t(\"tickets.tabs.open.title\")}\r\n            classes={{ root: classes.tab }}\r\n          />\r\n          <Tab\r\n            value={\"closed\"}\r\n            icon={<CheckBoxIcon />}\r\n            label={i18n.t(\"tickets.tabs.closed.title\")}\r\n            classes={{ root: classes.tab }}\r\n          />\r\n          <Tab\r\n            value={\"search\"}\r\n            icon={<SearchIcon />}\r\n            label={i18n.t(\"tickets.tabs.search.title\")}\r\n            classes={{ root: classes.tab }}\r\n          />\r\n        </Tabs>\r\n      </Paper>\r\n      <Paper square elevation={0} className={classes.ticketOptionsBox}>\r\n        {tab === \"search\" ? (\r\n          <div className={classes.serachInputWrapper}>\r\n            <SearchIcon className={classes.searchIcon} />\r\n            <InputBase\r\n              className={classes.searchInput}\r\n              inputRef={searchInputRef}\r\n              placeholder={i18n.t(\"tickets.search.placeholder\")}\r\n              type=\"search\"\r\n              onChange={handleSearch}\r\n            />\r\n          </div>\r\n        ) : (\r\n          <>\r\n            <Button\r\n              variant=\"outlined\"\r\n              color=\"primary\"\r\n              onClick={() => setNewTicketModalOpen(true)}\r\n            >\r\n              {i18n.t(\"ticketsManager.buttons.newTicket\")}\r\n            </Button>\r\n            <Can\r\n              role={user.profile}\r\n              perform=\"tickets-manager:showall\"\r\n              yes={() => (\r\n                <FormControlLabel\r\n                  label={i18n.t(\"tickets.buttons.showAll\")}\r\n                  labelPlacement=\"start\"\r\n                  control={\r\n                    <Switch\r\n                      size=\"small\"\r\n                      checked={showAllTickets}\r\n                      onChange={() =>\r\n                        setShowAllTickets((prevState) => !prevState)\r\n                      }\r\n                      name=\"showAllTickets\"\r\n                      color=\"primary\"\r\n                    />\r\n                  }\r\n                />\r\n              )}\r\n            />\r\n          </>\r\n        )}\r\n        <TicketsQueueSelect\r\n          style={{ marginLeft: 6 }}\r\n          selectedQueueIds={selectedQueueIds}\r\n          userQueues={user?.queues}\r\n          onChange={(values) => setSelectedQueueIds(values)}\r\n        />\r\n      </Paper>\r\n      <TabPanel value={tab} name=\"open\" className={classes.ticketsWrapper}>\r\n        <Tabs\r\n          value={tabOpen}\r\n          onChange={handleChangeTabOpen}\r\n          indicatorColor=\"primary\"\r\n          textColor=\"primary\"\r\n          variant=\"fullWidth\"\r\n        >\r\n          <Tab\r\n            label={\r\n              <Badge\r\n                className={classes.badge}\r\n                badgeContent={openCount}\r\n                color=\"primary\"\r\n              >\r\n                {i18n.t(\"ticketsList.assignedHeader\")}\r\n              </Badge>\r\n            }\r\n            value={\"open\"}\r\n          />\r\n          <Tab\r\n            label={\r\n              <Badge\r\n                className={classes.badge}\r\n                badgeContent={pendingCount}\r\n                color=\"secondary\"\r\n              >\r\n                {i18n.t(\"ticketsList.pendingHeader\")}\r\n              </Badge>\r\n            }\r\n            value={\"pending\"}\r\n          />\r\n        </Tabs>\r\n        <Paper className={classes.ticketsWrapper}>\r\n          <TicketsList\r\n            status=\"open\"\r\n            showAll={showAllTickets}\r\n            selectedQueueIds={selectedQueueIds}\r\n            updateCount={(val) => setOpenCount(val)}\r\n            style={applyPanelStyle(\"open\")}\r\n          />\r\n          <TicketsList\r\n            status=\"pending\"\r\n            selectedQueueIds={selectedQueueIds}\r\n            updateCount={(val) => setPendingCount(val)}\r\n            style={applyPanelStyle(\"pending\")}\r\n          />\r\n        </Paper>\r\n      </TabPanel>\r\n      <TabPanel value={tab} name=\"closed\" className={classes.ticketsWrapper}>\r\n        <TicketsList\r\n          status=\"closed\"\r\n          showAll={true}\r\n          selectedQueueIds={selectedQueueIds}\r\n        />\r\n      </TabPanel>\r\n      <TabPanel value={tab} name=\"search\" className={classes.ticketsWrapper}>\r\n        <TagsFilter onFiltered={handleSelectedTags} />\r\n        {profile === \"admin\" && (\r\n          <UsersFilter onFiltered={handleSelectedUsers} />\r\n        )}\r\n        <TicketsList\r\n          searchParam={searchParam}\r\n          showAll={true}\r\n          tags={selectedTags}\r\n          users={selectedUsers}\r\n          selectedQueueIds={selectedQueueIds}\r\n        />\r\n      </TabPanel>\r\n    </Paper>\r\n  );\r\n};\r\n\r\nexport default TicketsManagerTabs;\r\n","import React from \"react\";\r\nimport Skeleton from \"@material-ui/lab/Skeleton\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport { Grid } from \"@material-ui/core\";\r\n\r\nconst ContactDrawerSkeleton = ({ classes }) => {\r\n\treturn (\r\n\t\t<div className={classes.content}>\r\n\t\t\t<Paper square variant=\"outlined\" className={classes.contactHeader}>\r\n\t\t\t\t<Grid container>\r\n\t\t\t\t\t<Grid item>\r\n\t\t\t\t\t\t<Skeleton\r\n\t\t\t\t\t\t\tanimation=\"wave\"\r\n\t\t\t\t\t\t\tvariant=\"circle\"\r\n\t\t\t\t\t\t\twidth={60}\r\n\t\t\t\t\t\t\theight={60}\r\n\t\t\t\t\t\t\tclassName={classes.contactAvatar}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item>\r\n\t\t\t\t\t\t<Skeleton animation=\"wave\" height={25} width={90} />\r\n\t\t\t\t\t\t<Skeleton animation=\"wave\" height={25} width={80} />\r\n\t\t\t\t\t\t<Skeleton animation=\"wave\" height={25} width={80} />\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Paper>\r\n\t\t\t<Paper square className={classes.contactDetails}>\r\n\t\t\t\t<Typography variant=\"subtitle1\">\r\n\t\t\t\t\t{i18n.t(\"contactDrawer.extraInfo\")}\r\n\t\t\t\t</Typography>\r\n\t\t\t\t<Paper square variant=\"outlined\" className={classes.contactExtraInfo}>\r\n\t\t\t\t\t<Skeleton animation=\"wave\" height={20} width={60} />\r\n\t\t\t\t\t<Skeleton animation=\"wave\" height={20} width={160} />\r\n\t\t\t\t</Paper>\r\n\t\t\t\t<Paper square variant=\"outlined\" className={classes.contactExtraInfo}>\r\n\t\t\t\t\t<Skeleton animation=\"wave\" height={20} width={60} />\r\n\t\t\t\t\t<Skeleton animation=\"wave\" height={20} width={160} />\r\n\t\t\t\t</Paper>\r\n\t\t\t\t<Paper square variant=\"outlined\" className={classes.contactExtraInfo}>\r\n\t\t\t\t\t<Skeleton animation=\"wave\" height={20} width={60} />\r\n\t\t\t\t\t<Skeleton animation=\"wave\" height={20} width={160} />\r\n\t\t\t\t</Paper>\r\n\t\t\t</Paper>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default ContactDrawerSkeleton;\r\n","import React, { useState, useEffect } from \"react\";\r\n\r\nimport * as Yup from \"yup\";\r\nimport { Formik, Form, Field } from \"formik\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { green } from \"@material-ui/core/colors\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nimport api from \"../../services/api\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { Grid } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\troot: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexWrap: \"wrap\",\r\n\t},\r\n\ttextField: {\r\n\t\tmarginRight: theme.spacing(1),\r\n\t\tflex: 1,\r\n\t},\r\n\r\n\textraAttr: {\r\n\t\tdisplay: \"flex\",\r\n\t\tjustifyContent: \"center\",\r\n\t\talignItems: \"center\",\r\n\t},\r\n\r\n\tbtnWrapper: {\r\n\t\tposition: \"relative\",\r\n\t},\r\n\r\n\tbuttonProgress: {\r\n\t\tcolor: green[500],\r\n\t\tposition: \"absolute\",\r\n\t\ttop: \"50%\",\r\n\t\tleft: \"50%\",\r\n\t\tmarginTop: -12,\r\n\t\tmarginLeft: -12,\r\n\t},\r\n\r\n    textCenter: {\r\n        backgroundColor: 'red'\r\n    }\r\n}));\r\n\r\nconst ContactSchema = Yup.object().shape({\r\n\tname: Yup.string()\r\n\t\t.min(2, \"Too Short!\")\r\n\t\t.max(50, \"Too Long!\")\r\n\t\t.required(\"Required\"),\r\n\tnumber: Yup.string().min(8, \"Too Short!\").max(50, \"Too Long!\"),\r\n\temail: Yup.string().email(\"Invalid email\"),\r\n});\r\n\r\nexport function ContactForm ({ initialContact, onSave, onCancel }) {\r\n\tconst classes = useStyles();\r\n\r\n\tconst [contact, setContact] = useState(initialContact);\r\n\r\n    useEffect(() => {\r\n        setContact(initialContact);\r\n    }, [initialContact]);\r\n\r\n\tconst handleSaveContact = async values => {\r\n\t\ttry {\r\n\t\t\tif (contact.id) {\r\n\t\t\t\tawait api.put(`/contacts/${contact.id}`, values);\r\n\t\t\t} else {\r\n\t\t\t\tconst { data } = await api.post(\"/contacts\", values);\r\n\t\t\t\tif (onSave) {\r\n\t\t\t\t\tonSave(data);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ttoast.success(i18n.t(\"contactModal.success\"));\r\n\t\t} catch (err) {\r\n\t\t\ttoastError(err);\r\n\t\t}\r\n\t};\r\n\r\n    return (\r\n        <Formik\r\n            initialValues={contact}\r\n            enableReinitialize={true}\r\n            validationSchema={ContactSchema}\r\n            onSubmit={(values, actions) => {\r\n                setTimeout(() => {\r\n                    handleSaveContact(values);\r\n                    actions.setSubmitting(false);\r\n                }, 400);\r\n            }}\r\n        >\r\n            {({ values, errors, touched, isSubmitting }) => (\r\n                <Form>\r\n                    <Grid container spacing={1}>\r\n                        {/* <Grid item xs={12}>\r\n                            <Typography variant=\"subtitle1\" gutterBottom>\r\n                                {i18n.t(\"contactModal.form.mainInfo\")}\r\n                            </Typography>\r\n                        </Grid> */}\r\n                        <Grid item xs={12}>\r\n                            <Field\r\n                                as={TextField}\r\n                                label={i18n.t(\"contactModal.form.name\")}\r\n                                name=\"name\"\r\n                                autoFocus\r\n                                error={touched.name && Boolean(errors.name)}\r\n                                helperText={touched.name && errors.name}\r\n                                variant=\"outlined\"\r\n                                margin=\"dense\"\r\n                                className={classes.textField}\r\n                                fullWidth\r\n                            />\r\n                        </Grid>\r\n                        <Grid item xs={12}>\r\n                            <Field\r\n                                as={TextField}\r\n                                label={i18n.t(\"contactModal.form.number\")}\r\n                                name=\"number\"\r\n                                error={touched.number && Boolean(errors.number)}\r\n                                helperText={touched.number && errors.number}\r\n                                placeholder=\"5513912344321\"\r\n                                variant=\"outlined\"\r\n                                margin=\"dense\"\r\n                                fullWidth\r\n                            />\r\n                        </Grid>\r\n                        <Grid item xs={12}>\r\n                            <Field\r\n                                as={TextField}\r\n                                label={i18n.t(\"contactModal.form.email\")}\r\n                                name=\"email\"\r\n                                error={touched.email && Boolean(errors.email)}\r\n                                helperText={touched.email && errors.email}\r\n                                placeholder=\"Email address\"\r\n                                fullWidth\r\n                                margin=\"dense\"\r\n                                variant=\"outlined\"\r\n                            />\r\n                        </Grid>\r\n                        <Grid item xs={12} spacing={1}>\r\n                            <Grid container spacing={1}>\r\n                                <Grid xs={6} item>\r\n                                    <Button\r\n                                        onClick={onCancel}\r\n                                        color=\"secondary\"\r\n                                        disabled={isSubmitting}\r\n                                        variant=\"outlined\"\r\n                                        fullWidth\r\n                                    >\r\n                                        {i18n.t(\"contactModal.buttons.cancel\")}\r\n                                    </Button>\r\n                                </Grid>\r\n                                <Grid classes={classes.textCenter} xs={6} item>\r\n                                    <Button\r\n                                        type=\"submit\"\r\n                                        color=\"primary\"\r\n                                        disabled={isSubmitting}\r\n                                        variant=\"contained\"\r\n                                        className={classes.btnWrapper}\r\n                                        fullWidth\r\n                                    >\r\n                                        {contact.id\r\n                                            ? `${i18n.t(\"contactModal.buttons.okEdit\")}`\r\n                                            : `${i18n.t(\"contactModal.buttons.okAdd\")}`}\r\n                                        {isSubmitting && (\r\n                                            <CircularProgress\r\n                                                size={24}\r\n                                                className={classes.buttonProgress}\r\n                                            />\r\n                                        )}\r\n                                    </Button>\r\n                                </Grid>\r\n                            </Grid>\r\n                        </Grid>\r\n                    </Grid>\r\n                </Form>\r\n            )}\r\n        </Formik>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport moment from 'moment';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    inline: {\r\n        width: '100%'\r\n    }\r\n}));\r\n\r\nexport default function ContactNotesDialogListItem (props) {\r\n    const { note, deleteItem } = props;\r\n    const classes = useStyles();\r\n\r\n    const handleDelete = (item) => {\r\n        deleteItem(item);\r\n    }\r\n\r\n    return (\r\n        <ListItem alignItems=\"flex-start\">\r\n            <ListItemAvatar>\r\n                <Avatar alt={note.user.name} src=\"/static/images/avatar/1.jpg\" />\r\n            </ListItemAvatar>\r\n            <ListItemText\r\n                primary={\r\n                    <>\r\n                        <Typography\r\n                            component=\"span\"\r\n                            variant=\"body2\"\r\n                            className={classes.inline}\r\n                            color=\"textPrimary\"\r\n                        >\r\n                            {note.note}\r\n                        </Typography>\r\n                    </>\r\n                }\r\n                secondary={\r\n                    <>\r\n                        {note.user.name}, {moment(note.createdAt).format('DD/MM/YY HH:mm')}\r\n                    </>\r\n                }\r\n            />\r\n            <ListItemSecondaryAction>\r\n                <IconButton onClick={() => handleDelete(note)} edge=\"end\" aria-label=\"delete\">\r\n                    <DeleteIcon />\r\n                </IconButton>\r\n            </ListItemSecondaryAction>\r\n        </ListItem>\r\n    )   \r\n}\r\n\r\nContactNotesDialogListItem.propTypes = {\r\n    note: PropTypes.object.isRequired,\r\n    deleteItem: PropTypes.func.isRequired\r\n}","import api from \"../../services/api\";\r\n\r\nconst useTicketNotes = () => {\r\n\r\n    const saveNote = async (data) => {\r\n        const { data: responseData } = await api.request({\r\n            url: '/ticket-notes',\r\n            method: 'POST',\r\n            data\r\n        });\r\n        return responseData;\r\n    }\r\n\r\n    const deleteNote = async (id) => {\r\n        const { data } = await api.request({\r\n            url: `/ticket-notes/${id}`,\r\n            method: 'DELETE'\r\n        });\r\n        return data;\r\n    }\r\n\r\n    const listNotes = async (params) => {\r\n        const { data } = await api.request({\r\n            url: '/ticket-notes/list',\r\n            method: 'GET',\r\n            params\r\n        });\r\n        return data;\r\n    }\r\n\r\n    return {\r\n        saveNote,\r\n        deleteNote,\r\n        listNotes\r\n    }\r\n}\r\n\r\nexport default useTicketNotes;","import React, { useState, useEffect } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport List from '@material-ui/core/List';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport * as Yup from \"yup\";\r\nimport { Formik, Form, Field } from \"formik\";\r\n\r\nimport ContactNotesDialogListItem from '../ContactNotesDialogListItem';\r\nimport ConfirmationModal from '../ConfirmationModal';\r\n\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nimport ButtonWithSpinner from '../ButtonWithSpinner';\r\n\r\nimport useTicketNotes from '../../hooks/useTicketNotes';\r\nimport { Grid } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        '& .MuiTextField-root': {\r\n            margin: theme.spacing(1),\r\n            width: '350px',\r\n        },\r\n    },\r\n    list: {\r\n        width: '100%',\r\n        maxWidth: '350px',\r\n        maxHeight: '200px',\r\n        backgroundColor: theme.palette.background.paper,\r\n        overflow: 'auto'\r\n    },\r\n    inline: {\r\n        width: '100%'\r\n    }\r\n}));\r\n\r\nconst NoteSchema = Yup.object().shape({\r\n\tnote: Yup.string()\r\n\t\t.min(2, \"Too Short!\")\r\n\t\t.required(\"Required\")\r\n});\r\nexport function ContactNotes ({ ticket }) {\r\n    const { id: ticketId, contactId } = ticket\r\n    const classes = useStyles()\r\n    const [newNote, setNewNote] = useState({ note: \"\" });\r\n    const [loading, setLoading] = useState(false)\r\n    const [showOnDeleteDialog, setShowOnDeleteDialog] = useState(false)\r\n    const [selectedNote, setSelectedNote] = useState({})\r\n    const [notes, setNotes] = useState([])\r\n    const { saveNote, deleteNote, listNotes } = useTicketNotes()\r\n\r\n    useEffect(() => {\r\n        async function openAndFetchData () {\r\n            handleResetState()\r\n            await loadNotes()\r\n        }\r\n        openAndFetchData()\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [])\r\n\r\n    const handleResetState = () => {\r\n        setNewNote({ note: \"\" })\r\n        setLoading(false)\r\n    }\r\n\r\n    const handleChangeComment = (e) => {\r\n        setNewNote({ note: e.target.value })\r\n    }\r\n\r\n    const handleSave = async values => {\r\n        setLoading(true)\r\n        try {\r\n            await saveNote({\r\n                ...values,\r\n                ticketId,\r\n                contactId\r\n            })\r\n            await loadNotes()\r\n            setNewNote({ note: '' })\r\n            toast.success('Observação adicionada com sucesso!')\r\n        } catch (e) {\r\n            toast.error(e)\r\n        }\r\n        setLoading(false)\r\n    }\r\n\r\n    const handleOpenDialogDelete = (item) => {\r\n        setSelectedNote(item)\r\n        setShowOnDeleteDialog(true)\r\n    }\r\n\r\n    const handleDelete = async () => {\r\n        setLoading(true)\r\n        try {\r\n            await deleteNote(selectedNote.id)\r\n            await loadNotes()\r\n            setSelectedNote({})\r\n            toast.success('Observação excluída com sucesso!')\r\n        } catch (e) {\r\n            toast.error(e)\r\n        }\r\n        setLoading(false)\r\n    }\r\n\r\n    const loadNotes = async () => {\r\n        setLoading(true)\r\n        try {\r\n            const notes = await listNotes({ ticketId, contactId })\r\n            setNotes(notes)\r\n        } catch (e) {\r\n            toast.error(e)\r\n        }\r\n        setLoading(false)\r\n    }\r\n\r\n    const renderNoteList = () => {\r\n        return notes.map((note) => {\r\n            return <ContactNotesDialogListItem\r\n                note={note}\r\n                key={note.id}\r\n                deleteItem={handleOpenDialogDelete}\r\n            />\r\n        })\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <ConfirmationModal\r\n                title=\"Excluir Registro\"\r\n                open={showOnDeleteDialog}\r\n                onClose={setShowOnDeleteDialog}\r\n                onConfirm={handleDelete}\r\n            >\r\n                Deseja realmente excluir este registro?\r\n            </ConfirmationModal>\r\n            <Formik\r\n                initialValues={newNote}\r\n                enableReinitialize={true}\r\n                validationSchema={NoteSchema}\r\n                onSubmit={(values, actions) => {\r\n                    setTimeout(() => {\r\n                        handleSave(values);\r\n                        actions.setSubmitting(false);\r\n                    }, 400);\r\n                }}\r\n            >\r\n\r\n                {({ touched, errors, setErrors }) => (\r\n                    <Form>\r\n                        <Grid container spacing={2}>\r\n                            <Grid xs={12} item>\r\n                                <Field\r\n                                    as={TextField}\r\n                                    name=\"note\"\r\n                                    rows={3}\r\n                                    label={i18n.t(\"ticketOptionsMenu.appointmentsModal.textarea\")}\r\n                                    placeholder={i18n.t(\"ticketOptionsMenu.appointmentsModal.placeholder\")}\r\n                                    multiline={true}\r\n                                    error={touched.note && Boolean(errors.note)}\r\n                                    helperText={touched.note && errors.note}\r\n                                    variant=\"outlined\"\r\n                                    onChange={handleChangeComment}\r\n                                    fullWidth\r\n                                />\r\n                            </Grid>\r\n                            { notes.length > 0 && (\r\n                                <Grid xs={12} item>\r\n                                    <List className={classes.list}>\r\n                                        { renderNoteList() }\r\n                                    </List>\r\n                                </Grid>\r\n                            ) }\r\n                            <Grid xs={12} item>\r\n                                <Grid container spacing={2}>\r\n                                    <Grid xs={6} item>\r\n                                        <Button\r\n                                            onClick={() => {\r\n                                                setNewNote(\"\");\r\n                                                setErrors({});\r\n                                            }}\r\n                                            color=\"primary\"\r\n                                            variant=\"outlined\"\r\n                                            fullWidth\r\n                                        >\r\n                                            Cancelar\r\n                                        </Button>\r\n                                    </Grid>\r\n                                    <Grid xs={6} item>\r\n                                        <ButtonWithSpinner loading={loading} color=\"primary\" type=\"submit\" variant=\"contained\" autoFocus fullWidth>\r\n                                            Salvar\r\n                                        </ButtonWithSpinner>\r\n                                    </Grid>\r\n                                </Grid>\r\n                            </Grid>\r\n                        </Grid>\r\n                    </Form>\r\n                )}\r\n            </Formik>\r\n        </>\r\n    );\r\n}","import React, { useEffect, useState } from \"react\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Drawer from \"@material-ui/core/Drawer\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport CreateIcon from '@material-ui/icons/Create';\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nimport ContactDrawerSkeleton from \"../ContactDrawerSkeleton\";\r\nimport MarkdownWrapper from \"../MarkdownWrapper\";\r\nimport { CardHeader } from \"@material-ui/core\";\r\nimport { ContactForm } from \"../ContactForm\";\r\nimport ContactModal from \"../ContactModal\";\r\nimport { ContactNotes } from \"../ContactNotes\";\r\n\r\nconst drawerWidth = 320;\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tdrawer: {\r\n\t\twidth: drawerWidth,\r\n\t\tflexShrink: 0,\r\n\t},\r\n\tdrawerPaper: {\r\n\t\twidth: drawerWidth,\r\n\t\tdisplay: \"flex\",\r\n\t\tborderTop: \"1px solid rgba(0, 0, 0, 0.12)\",\r\n\t\tborderRight: \"1px solid rgba(0, 0, 0, 0.12)\",\r\n\t\tborderBottom: \"1px solid rgba(0, 0, 0, 0.12)\",\r\n\t\tborderTopRightRadius: 4,\r\n\t\tborderBottomRightRadius: 4,\r\n\t},\r\n\theader: {\r\n\t\tdisplay: \"flex\",\r\n\t\tborderBottom: \"1px solid rgba(0, 0, 0, 0.12)\",\r\n\t\tbackgroundColor: theme.palette.contactdrawer, //DARK MODE PLW DESIGN//\r\n\t\talignItems: \"center\",\r\n\t\tpadding: theme.spacing(0, 1),\r\n\t\tminHeight: \"73px\",\r\n\t\tjustifyContent: \"flex-start\",\r\n\t},\r\n\tcontent: {\r\n\t\tdisplay: \"flex\",\r\n\t\tbackgroundColor: theme.palette.contactdrawer, //DARK MODE PLW DESIGN//\r\n\t\tflexDirection: \"column\",\r\n\t\tpadding: \"8px 0px 8px 8px\",\r\n\t\theight: \"100%\",\r\n\t\toverflowY: \"scroll\",\r\n\t\t...theme.scrollbarStyles,\r\n\t},\r\n\r\n\tcontactAvatar: {\r\n\t\tmargin: 15,\r\n\t\twidth: 100,\r\n\t\theight: 100,\r\n\t},\r\n\r\n\tcontactHeader: {\r\n\t\tdisplay: \"flex\",\r\n\t\tpadding: 8,\r\n\t\tflexDirection: \"column\",\r\n\t\talignItems: \"center\",\r\n\t\tjustifyContent: \"center\",\r\n\t\t\"& > *\": {\r\n\t\t\tmargin: 4,\r\n\t\t},\r\n\t},\r\n\r\n\tcontactDetails: {\r\n\t\tmarginTop: 8,\r\n\t\tpadding: 8,\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t},\r\n\tcontactExtraInfo: {\r\n\t\tmarginTop: 4,\r\n\t\tpadding: 6,\r\n\t},\r\n}));\r\n\r\nconst ContactDrawer = ({ open, handleDrawerClose, contact, ticket, loading }) => {\r\n\tconst classes = useStyles();\r\n\r\n\tconst [modalOpen, setModalOpen] = useState(false);\r\n\tconst [openForm, setOpenForm] = useState(false);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetOpenForm(false);\r\n\t}, [open, contact]);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Drawer\r\n\t\t\t\tclassName={classes.drawer}\r\n\t\t\t\tvariant=\"persistent\"\r\n\t\t\t\tanchor=\"right\"\r\n\t\t\t\topen={open}\r\n\t\t\t\tPaperProps={{ style: { position: \"absolute\" } }}\r\n\t\t\t\tBackdropProps={{ style: { position: \"absolute\" } }}\r\n\t\t\t\tModalProps={{\r\n\t\t\t\t\tcontainer: document.getElementById(\"drawer-container\"),\r\n\t\t\t\t\tstyle: { position: \"absolute\" },\r\n\t\t\t\t}}\r\n\t\t\t\tclasses={{\r\n\t\t\t\t\tpaper: classes.drawerPaper,\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<div className={classes.header}>\r\n\t\t\t\t\t<IconButton onClick={handleDrawerClose}>\r\n\t\t\t\t\t\t<CloseIcon />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t<Typography style={{ justifySelf: \"center\" }}>\r\n\t\t\t\t\t\t{i18n.t(\"contactDrawer.header\")}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t</div>\r\n\t\t\t\t{loading ? (\r\n\t\t\t\t\t<ContactDrawerSkeleton classes={classes} />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<div className={classes.content}>\r\n\t\t\t\t\t\t<Paper square variant=\"outlined\" className={classes.contactHeader}>\r\n\t\t\t\t\t\t\t<CardHeader\r\n\t\t\t\t\t\t\t\tonClick={() => {}}\r\n\t\t\t\t\t\t\t\tstyle={{ cursor: \"pointer\", width: '100%' }}\r\n\t\t\t\t\t\t\t\ttitleTypographyProps={{ noWrap: true }}\r\n\t\t\t\t\t\t\t\tsubheaderTypographyProps={{ noWrap: true }}\r\n\t\t\t\t\t\t\t\tavatar={<Avatar src={contact.profilePicUrl} alt=\"contact_image\" style={{ width: 60, height: 60 }} />}\r\n\t\t\t\t\t\t\t\ttitle={\r\n\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t<Typography onClick={() => setOpenForm(true)}>\r\n\t\t\t\t\t\t\t\t\t\t\t{contact.name}\r\n\t\t\t\t\t\t\t\t\t\t\t<CreateIcon style={{fontSize: 16, marginLeft: 5}} />\r\n\t\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tsubheader={\r\n\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t<Typography style={{fontSize: 12}}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Link href={`tel:${contact.number}`}>{contact.number}</Link>\r\n\t\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t\t\t<Typography style={{fontSize: 12}}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Link href={`mailto:${contact.email}`}>{contact.email}</Link>\r\n\t\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\tonClick={() => setModalOpen(!openForm)}\r\n\t\t\t\t\t\t\t\tstyle={{fontSize: 12}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{i18n.t(\"contactDrawer.buttons.edit\")}\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t{(contact.id && openForm) && <ContactForm initialContact={contact} onCancel={() => setOpenForm(false)} />}\r\n\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t\t<Paper square variant=\"outlined\" className={classes.contactDetails}>\r\n\t\t\t\t\t\t\t<Typography variant=\"subtitle1\" style={{marginBottom: 10}}>\r\n\t\t\t\t\t\t\t\t{i18n.t(\"ticketOptionsMenu.appointmentsModal.title\")}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<ContactNotes ticket={ticket} />\r\n\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t\t<Paper square variant=\"outlined\" className={classes.contactDetails}>\r\n\t\t\t\t\t\t\t<ContactModal\r\n\t\t\t\t\t\t\t\topen={modalOpen}\r\n\t\t\t\t\t\t\t\tonClose={() => setModalOpen(false)}\r\n\t\t\t\t\t\t\t\tcontactId={contact.id}\r\n\t\t\t\t\t\t\t></ContactModal>\r\n\t\t\t\t\t\t\t<Typography variant=\"subtitle1\">\r\n\t\t\t\t\t\t\t\t{i18n.t(\"contactDrawer.extraInfo\")}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t{contact?.extraInfo?.map(info => (\r\n\t\t\t\t\t\t\t\t<Paper\r\n\t\t\t\t\t\t\t\t\tkey={info.id}\r\n\t\t\t\t\t\t\t\t\tsquare\r\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\tclassName={classes.contactExtraInfo}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<InputLabel>{info.name}</InputLabel>\r\n\t\t\t\t\t\t\t\t\t<Typography component=\"div\" noWrap style={{ paddingTop: 2 }}>\r\n\t\t\t\t\t\t\t\t\t\t<MarkdownWrapper>{info.value}</MarkdownWrapper>\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</Drawer>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default ContactDrawer;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\ttimerBox: {\r\n\t\tdisplay: \"flex\",\r\n\t\tmarginLeft: 10,\r\n\t\tmarginRight: 10,\r\n\t\talignItems: \"center\",\r\n\t},\r\n}));\r\n\r\nconst RecordingTimer = () => {\r\n\tconst classes = useStyles();\r\n\tconst initialState = {\r\n\t\tminutes: 0,\r\n\t\tseconds: 0,\r\n\t};\r\n\tconst [timer, setTimer] = useState(initialState);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst interval = setInterval(\r\n\t\t\t() =>\r\n\t\t\t\tsetTimer(prevState => {\r\n\t\t\t\t\tif (prevState.seconds === 59) {\r\n\t\t\t\t\t\treturn { ...prevState, minutes: prevState.minutes + 1, seconds: 0 };\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn { ...prevState, seconds: prevState.seconds + 1 };\r\n\t\t\t\t}),\r\n\t\t\t1000\r\n\t\t);\r\n\t\treturn () => {\r\n\t\t\tclearInterval(interval);\r\n\t\t};\r\n\t}, []);\r\n\r\n\tconst addZero = n => {\r\n\t\treturn n < 10 ? \"0\" + n : n;\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className={classes.timerBox}>\r\n\t\t\t<span>{`${addZero(timer.minutes)}:${addZero(timer.seconds)}`}</span>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default RecordingTimer;\r\n","import api from \"../../services/api\";\r\n\r\nconst useQuickMessages = () => {\r\n\r\n    const save = async (data) => {\r\n        const { data: responseData } = await api.request({\r\n            url: '/quick-messages',\r\n            method: 'POST',\r\n            data\r\n        });\r\n        return responseData;\r\n    }\r\n\r\n    const update = async (data) => {\r\n        const { data: responseData } = await api.request({\r\n            url: `/quick-messages/${data.id}`,\r\n            method: 'PUT',\r\n            data\r\n        });\r\n        return responseData;\r\n    }\r\n\r\n    const deleteRecord = async (id) => {\r\n        const { data } = await api.request({\r\n            url: `/quick-messages/${id}`,\r\n            method: 'DELETE'\r\n        });\r\n        return data;\r\n    }\r\n\r\n    const list = async (params) => {\r\n        const { data } = await api.request({\r\n            url: '/quick-messages/list',\r\n            method: 'GET',\r\n            params\r\n        });\r\n        return data;\r\n    }\r\n\r\n    return {\r\n        save,\r\n        update,\r\n        deleteRecord,\r\n        list\r\n    }\r\n}\r\n\r\nexport default useQuickMessages;","import React, { useState, useEffect, useContext, useRef } from \"react\";\r\nimport withWidth, { isWidthUp } from \"@material-ui/core/withWidth\";\r\nimport \"emoji-mart/css/emoji-mart.css\";\r\nimport { Picker } from \"emoji-mart\";\r\nimport MicRecorder from \"mic-recorder-to-mp3\";\r\nimport clsx from \"clsx\";\r\nimport { isNil } from \"lodash\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport InputBase from \"@material-ui/core/InputBase\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport { green } from \"@material-ui/core/colors\";\r\nimport AttachFileIcon from \"@material-ui/icons/AttachFile\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport MoodIcon from \"@material-ui/icons/Mood\";\r\nimport SendIcon from \"@material-ui/icons/Send\";\r\nimport CancelIcon from \"@material-ui/icons/Cancel\";\r\nimport ClearIcon from \"@material-ui/icons/Clear\";\r\nimport MicIcon from \"@material-ui/icons/Mic\";\r\nimport CheckCircleOutlineIcon from \"@material-ui/icons/CheckCircleOutline\";\r\nimport HighlightOffIcon from \"@material-ui/icons/HighlightOff\";\r\nimport { FormControlLabel, Switch } from \"@material-ui/core\";\r\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\r\nimport { isString, isEmpty, isObject, has } from \"lodash\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport api from \"../../services/api\";\r\nimport axios from \"axios\";\r\n\r\nimport RecordingTimer from \"./RecordingTimer\";\r\nimport { ReplyMessageContext } from \"../../context/ReplyingMessage/ReplyingMessageContext\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport { useLocalStorage } from \"../../hooks/useLocalStorage\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nimport useQuickMessages from \"../../hooks/useQuickMessages\";\r\n\r\nconst Mp3Recorder = new MicRecorder({ bitRate: 128 });\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainWrapper: {\r\n    backgroundColor: theme.palette.bordabox, //DARK MODE PLW DESIGN//\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n    borderTop: \"1px solid rgba(0, 0, 0, 0.12)\",\r\n  },\r\n\r\n  newMessageBox: {\r\n    backgroundColor: theme.palette.newmessagebox, //DARK MODE PLW DESIGN//\r\n    width: \"100%\",\r\n    display: \"flex\",\r\n    padding: \"7px\",\r\n    alignItems: \"center\",\r\n  },\r\n\r\n  messageInputWrapper: {\r\n    padding: 6,\r\n    marginRight: 7,\r\n    backgroundColor: theme.palette.inputdigita, //DARK MODE PLW DESIGN//\r\n    display: \"flex\",\r\n    borderRadius: 20,\r\n    flex: 1,\r\n  },\r\n\r\n  messageInput: {\r\n    paddingLeft: 10,\r\n    flex: 1,\r\n    border: \"none\",\r\n  },\r\n\r\n  sendMessageIcons: {\r\n    color: \"grey\",\r\n  },\r\n\r\n  uploadInput: {\r\n    display: \"none\",\r\n  },\r\n\r\n  viewMediaInputWrapper: {\r\n    display: \"flex\",\r\n    padding: \"10px 13px\",\r\n    position: \"relative\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n    backgroundColor: \"#eee\",\r\n    borderTop: \"1px solid rgba(0, 0, 0, 0.12)\",\r\n  },\r\n\r\n  emojiBox: {\r\n    position: \"absolute\",\r\n    bottom: 63,\r\n    width: 40,\r\n    borderTop: \"1px solid #e8e8e8\",\r\n  },\r\n\r\n  circleLoading: {\r\n    color: green[500],\r\n    opacity: \"70%\",\r\n    position: \"absolute\",\r\n    top: \"20%\",\r\n    left: \"50%\",\r\n    marginLeft: -12,\r\n  },\r\n\r\n  audioLoading: {\r\n    color: green[500],\r\n    opacity: \"70%\",\r\n  },\r\n\r\n  recorderWrapper: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    alignContent: \"middle\",\r\n  },\r\n\r\n  cancelAudioIcon: {\r\n    color: \"red\",\r\n  },\r\n\r\n  sendAudioIcon: {\r\n    color: \"green\",\r\n  },\r\n\r\n  replyginMsgWrapper: {\r\n    display: \"flex\",\r\n    width: \"100%\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    paddingTop: 8,\r\n    paddingLeft: 73,\r\n    paddingRight: 7,\r\n  },\r\n\r\n  replyginMsgContainer: {\r\n    flex: 1,\r\n    marginRight: 5,\r\n    overflowY: \"hidden\",\r\n    backgroundColor: \"rgba(0, 0, 0, 0.05)\",\r\n    borderRadius: \"7.5px\",\r\n    display: \"flex\",\r\n    position: \"relative\",\r\n  },\r\n\r\n  replyginMsgBody: {\r\n    padding: 10,\r\n    height: \"auto\",\r\n    display: \"block\",\r\n    whiteSpace: \"pre-wrap\",\r\n    overflow: \"hidden\",\r\n  },\r\n\r\n  replyginContactMsgSideColor: {\r\n    flex: \"none\",\r\n    width: \"4px\",\r\n    backgroundColor: \"#35cd96\",\r\n  },\r\n\r\n  replyginSelfMsgSideColor: {\r\n    flex: \"none\",\r\n    width: \"4px\",\r\n    backgroundColor: \"#6bcbef\",\r\n  },\r\n\r\n  messageContactName: {\r\n    display: \"flex\",\r\n    color: \"#6bcbef\",\r\n    fontWeight: 500,\r\n  },\r\n}));\r\n\r\nconst EmojiOptions = (props) => {\r\n  const { disabled, showEmoji, setShowEmoji, handleAddEmoji } = props;\r\n  const classes = useStyles();\r\n  return (\r\n    <>\r\n      <IconButton\r\n        aria-label=\"emojiPicker\"\r\n        component=\"span\"\r\n        disabled={disabled}\r\n        onClick={(e) => setShowEmoji((prevState) => !prevState)}\r\n      >\r\n        <MoodIcon className={classes.sendMessageIcons} />\r\n      </IconButton>\r\n      {showEmoji ? (\r\n        <div className={classes.emojiBox}>\r\n          <Picker\r\n            perLine={16}\r\n            showPreview={false}\r\n            showSkinTones={false}\r\n            onSelect={handleAddEmoji}\r\n          />\r\n        </div>\r\n      ) : null}\r\n    </>\r\n  );\r\n};\r\n\r\nconst SignSwitch = (props) => {\r\n  const { width, setSignMessage, signMessage } = props;\r\n  if (isWidthUp(\"md\", width)) {\r\n    return (\r\n      <FormControlLabel\r\n        style={{ marginRight: 7, color: \"gray\" }}\r\n        label={i18n.t(\"messagesInput.signMessage\")}\r\n        labelPlacement=\"start\"\r\n        control={\r\n          <Switch\r\n            size=\"small\"\r\n            checked={signMessage}\r\n            onChange={(e) => {\r\n              setSignMessage(e.target.checked);\r\n            }}\r\n            name=\"showAllTickets\"\r\n            color=\"primary\"\r\n          />\r\n        }\r\n      />\r\n    );\r\n  }\r\n  return null;\r\n};\r\n\r\nconst FileInput = (props) => {\r\n  const { handleChangeMedias, disableOption } = props;\r\n  const classes = useStyles();\r\n  return (\r\n    <>\r\n      <input\r\n        multiple\r\n        type=\"file\"\r\n        id=\"upload-button\"\r\n        disabled={disableOption()}\r\n        className={classes.uploadInput}\r\n        onChange={handleChangeMedias}\r\n      />\r\n      <label htmlFor=\"upload-button\">\r\n        <IconButton\r\n          aria-label=\"upload\"\r\n          component=\"span\"\r\n          disabled={disableOption()}\r\n        >\r\n          <AttachFileIcon className={classes.sendMessageIcons} />\r\n        </IconButton>\r\n      </label>\r\n    </>\r\n  );\r\n};\r\n\r\nconst ActionButtons = (props) => {\r\n  const {\r\n    inputMessage,\r\n    loading,\r\n    recording,\r\n    ticketStatus,\r\n    handleSendMessage,\r\n    handleCancelAudio,\r\n    handleUploadAudio,\r\n    handleStartRecording,\r\n  } = props;\r\n  const classes = useStyles();\r\n  if (inputMessage) {\r\n    return (\r\n      <IconButton\r\n        aria-label=\"sendMessage\"\r\n        component=\"span\"\r\n        onClick={handleSendMessage}\r\n        disabled={loading}\r\n      >\r\n        <SendIcon className={classes.sendMessageIcons} />\r\n      </IconButton>\r\n    );\r\n  } else if (recording) {\r\n    return (\r\n      <div className={classes.recorderWrapper}>\r\n        <IconButton\r\n          aria-label=\"cancelRecording\"\r\n          component=\"span\"\r\n          fontSize=\"large\"\r\n          disabled={loading}\r\n          onClick={handleCancelAudio}\r\n        >\r\n          <HighlightOffIcon className={classes.cancelAudioIcon} />\r\n        </IconButton>\r\n        {loading ? (\r\n          <div>\r\n            <CircularProgress className={classes.audioLoading} />\r\n          </div>\r\n        ) : (\r\n          <RecordingTimer />\r\n        )}\r\n\r\n        <IconButton\r\n          aria-label=\"sendRecordedAudio\"\r\n          component=\"span\"\r\n          onClick={handleUploadAudio}\r\n          disabled={loading}\r\n        >\r\n          <CheckCircleOutlineIcon className={classes.sendAudioIcon} />\r\n        </IconButton>\r\n      </div>\r\n    );\r\n  } else {\r\n    return (\r\n      <IconButton\r\n        aria-label=\"showRecorder\"\r\n        component=\"span\"\r\n        disabled={loading || ticketStatus !== \"open\"}\r\n        onClick={handleStartRecording}\r\n      >\r\n        <MicIcon className={classes.sendMessageIcons} />\r\n      </IconButton>\r\n    );\r\n  }\r\n};\r\n\r\nconst CustomInput = (props) => {\r\n  const {\r\n    loading,\r\n    inputRef,\r\n    ticketStatus,\r\n    inputMessage,\r\n    setInputMessage,\r\n    handleSendMessage,\r\n    handleInputPaste,\r\n    disableOption,\r\n    handleQuickAnswersClick,\r\n  } = props;\r\n  const classes = useStyles();\r\n  const [quickMessages, setQuickMessages] = useState([]);\r\n  const [options, setOptions] = useState([]);\r\n  const [popupOpen, setPopupOpen] = useState(false);\r\n\r\n  const { user } = useContext(AuthContext);\r\n\r\n  const { list: listQuickMessages } = useQuickMessages();\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      const companyId = localStorage.getItem(\"companyId\");\r\n      const messages = await listQuickMessages({ companyId, userId: user.id });\r\n      const options = messages.map((m) => {\r\n        let truncatedMessage = m.message;\r\n        if (isString(truncatedMessage) && truncatedMessage.length > 35) {\r\n          truncatedMessage = m.message.substring(0, 35) + \"...\";\r\n        }\r\n        return {\r\n          value: m.message,\r\n          label: `/${m.shortcode} - ${truncatedMessage}`,\r\n          mediaPath: m.mediaPath,\r\n        };\r\n      });\r\n      setQuickMessages(options);\r\n    }\r\n    fetchData();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (\r\n      isString(inputMessage) &&\r\n      !isEmpty(inputMessage) &&\r\n      inputMessage.length > 1\r\n    ) {\r\n      const firstWord = inputMessage.charAt(0);\r\n      setPopupOpen(firstWord.indexOf(\"/\") > -1);\r\n\r\n      const filteredOptions = quickMessages.filter(\r\n        (m) => m.label.indexOf(inputMessage) > -1\r\n      );\r\n      setOptions(filteredOptions);\r\n    } else {\r\n      setPopupOpen(false);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [inputMessage]);\r\n\r\n  const onKeyPress = (e) => {\r\n    if (loading || e.shiftKey) return;\r\n    else if (e.key === \"Enter\") {\r\n      handleSendMessage();\r\n    }\r\n  };\r\n\r\n  const onPaste = (e) => {\r\n    if (ticketStatus === \"open\") {\r\n      handleInputPaste(e);\r\n    }\r\n  };\r\n\r\n  const renderPlaceholder = () => {\r\n    if (ticketStatus === \"open\") {\r\n      return i18n.t(\"messagesInput.placeholderOpen\");\r\n    }\r\n    return i18n.t(\"messagesInput.placeholderClosed\");\r\n  };\r\n\r\n\r\n  const setInputRef = (input) => {\r\n    if (input) {\r\n      input.focus();\r\n      inputRef.current = input;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={classes.messageInputWrapper}>\r\n      <Autocomplete\r\n        freeSolo\r\n        open={popupOpen}\r\n        id=\"grouped-demo\"\r\n        value={inputMessage}\r\n        options={options}\r\n        closeIcon={null}\r\n        getOptionLabel={(option) => {\r\n          if (isObject(option)) {\r\n            return option.label;\r\n          } else {\r\n            return option;\r\n          }\r\n        }}\r\n        onChange={(event, opt) => {\r\n         \r\n          if (isObject(opt) && has(opt, \"value\") && isNil(opt.mediaPath)) {\r\n            setInputMessage(opt.value);\r\n            setTimeout(() => {\r\n              inputRef.current.scrollTop = inputRef.current.scrollHeight;\r\n            }, 200);\r\n          } else if (isObject(opt) && has(opt, \"value\") && !isNil(opt.mediaPath)) {\r\n            handleQuickAnswersClick(opt);\r\n\r\n            setTimeout(() => {\r\n              inputRef.current.scrollTop = inputRef.current.scrollHeight;\r\n            }, 200);\r\n          }\r\n        }}\r\n        onInputChange={(event, opt, reason) => {\r\n          if (reason === \"input\") {\r\n            setInputMessage(event.target.value);\r\n          }\r\n        }}\r\n        onPaste={onPaste}\r\n        onKeyPress={onKeyPress}\r\n        style={{ width: \"100%\" }}\r\n        renderInput={(params) => {\r\n          const { InputLabelProps, InputProps, ...rest } = params;\r\n          return (\r\n            <InputBase\r\n              {...params.InputProps}\r\n              {...rest}\r\n              disabled={disableOption()}\r\n              inputRef={setInputRef}\r\n              placeholder={renderPlaceholder()}\r\n              multiline\r\n              className={classes.messageInput}\r\n              maxRows={5}\r\n            />\r\n          );\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst MessageInputCustom = (props) => {\r\n  const { ticketStatus, ticketId } = props;\r\n  const classes = useStyles();\r\n\r\n  const [medias, setMedias] = useState([]);\r\n  const [inputMessage, setInputMessage] = useState(\"\");\r\n  const [showEmoji, setShowEmoji] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [recording, setRecording] = useState(false);\r\n  const inputRef = useRef();\r\n  const { setReplyingMessage, replyingMessage } =\r\n    useContext(ReplyMessageContext);\r\n  const { user } = useContext(AuthContext);\r\n\r\n  const [signMessage, setSignMessage] = useLocalStorage(\"signOption\", true);\r\n\r\n  useEffect(() => {\r\n    inputRef.current.focus();\r\n  }, [replyingMessage]);\r\n\r\n  useEffect(() => {\r\n    inputRef.current.focus();\r\n    return () => {\r\n      setInputMessage(\"\");\r\n      setShowEmoji(false);\r\n      setMedias([]);\r\n      setReplyingMessage(null);\r\n    };\r\n  }, [ticketId, setReplyingMessage]);\r\n\r\n  // const handleChangeInput = e => {\r\n  // \tif (isObject(e) && has(e, 'value')) {\r\n  // \t\tsetInputMessage(e.value);\r\n  // \t} else {\r\n  // \t\tsetInputMessage(e.target.value)\r\n  // \t}\r\n  // };\r\n\r\n  const handleAddEmoji = (e) => {\r\n    let emoji = e.native;\r\n    setInputMessage((prevState) => prevState + emoji);\r\n  };\r\n\r\n  const handleChangeMedias = (e) => {\r\n    if (!e.target.files) {\r\n      return;\r\n    }\r\n\r\n    const selectedMedias = Array.from(e.target.files);\r\n    setMedias(selectedMedias);\r\n  };\r\n\r\n  const handleInputPaste = (e) => {\r\n    if (e.clipboardData.files[0]) {\r\n      setMedias([e.clipboardData.files[0]]);\r\n    }\r\n  };\r\n\r\n  const handleUploadQuickMessageMedia = async (blob, message) => {\r\n    setLoading(true);\r\n    try {\r\n      const extension = blob.type.split(\"/\")[1];\r\n\r\n      const formData = new FormData();\r\n      const filename = `${new Date().getTime()}.${extension}`;\r\n      formData.append(\"medias\", blob, filename);\r\n      formData.append(\"body\",  message);\r\n      formData.append(\"fromMe\", true);\r\n\r\n      await api.post(`/messages/${ticketId}`, formData);\r\n    } catch (err) {\r\n      toastError(err);\r\n      setLoading(false);\r\n    }\r\n    setLoading(false);\r\n  };\r\n  \r\n  const handleQuickAnswersClick = async (value) => {\r\n    if (value.mediaPath) {\r\n      try {\r\n        const { data } = await axios.get(value.mediaPath, {\r\n          responseType: \"blob\",\r\n        });\r\n\r\n        handleUploadQuickMessageMedia(data, value.value);\r\n        setInputMessage(\"\");\r\n        return;\r\n        //  handleChangeMedias(response)\r\n      } catch (err) {\r\n        toastError(err);\r\n      }\r\n    }\r\n\r\n    setInputMessage(\"\");\r\n    setInputMessage(value.value);\r\n  };\r\n\r\n  const handleUploadMedia = async (e) => {\r\n    setLoading(true);\r\n    e.preventDefault();\r\n\r\n    const formData = new FormData();\r\n    formData.append(\"fromMe\", true);\r\n    medias.forEach((media) => {\r\n      formData.append(\"medias\", media);\r\n      formData.append(\"body\", media.name);\r\n    });\r\n\r\n    try {\r\n      await api.post(`/messages/${ticketId}`, formData);\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n\r\n    setLoading(false);\r\n    setMedias([]);\r\n  };\r\n\r\n  const handleSendMessage = async () => {\r\n    if (inputMessage.trim() === \"\") return;\r\n    setLoading(true);\r\n\r\n    const message = {\r\n      read: 1,\r\n      fromMe: true,\r\n      mediaUrl: \"\",\r\n      body: signMessage\r\n        ? `*${user?.name}:*\\n${inputMessage.trim()}`\r\n        : inputMessage.trim(),\r\n      quotedMsg: replyingMessage,\r\n    };\r\n    try {\r\n      await api.post(`/messages/${ticketId}`, message);\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n\r\n    setInputMessage(\"\");\r\n    setShowEmoji(false);\r\n    setLoading(false);\r\n    setReplyingMessage(null);\r\n  };\r\n\r\n  const handleStartRecording = async () => {\r\n    setLoading(true);\r\n    try {\r\n      await navigator.mediaDevices.getUserMedia({ audio: true });\r\n      await Mp3Recorder.start();\r\n      setRecording(true);\r\n      setLoading(false);\r\n    } catch (err) {\r\n      toastError(err);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleUploadAudio = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const [, blob] = await Mp3Recorder.stop().getMp3();\r\n      if (blob.size < 10000) {\r\n        setLoading(false);\r\n        setRecording(false);\r\n        return;\r\n      }\r\n\r\n      const formData = new FormData();\r\n      const filename = `audio-record-site-${new Date().getTime()}.mp3`;\r\n      formData.append(\"medias\", blob, filename);\r\n      formData.append(\"body\", filename);\r\n      formData.append(\"fromMe\", true);\r\n\r\n      await api.post(`/messages/${ticketId}`, formData);\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n\r\n    setRecording(false);\r\n    setLoading(false);\r\n  };\r\n\r\n  const handleCancelAudio = async () => {\r\n    try {\r\n      await Mp3Recorder.stop().getMp3();\r\n      setRecording(false);\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  };\r\n\r\n  const disableOption = () => {\r\n    return loading || recording || ticketStatus !== \"open\";\r\n  };\r\n\r\n  const renderReplyingMessage = (message) => {\r\n    return (\r\n      <div className={classes.replyginMsgWrapper}>\r\n        <div className={classes.replyginMsgContainer}>\r\n          <span\r\n            className={clsx(classes.replyginContactMsgSideColor, {\r\n              [classes.replyginSelfMsgSideColor]: !message.fromMe,\r\n            })}\r\n          ></span>\r\n          <div className={classes.replyginMsgBody}>\r\n            {!message.fromMe && (\r\n              <span className={classes.messageContactName}>\r\n                {message.contact?.name}\r\n              </span>\r\n            )}\r\n            {message.body}\r\n          </div>\r\n        </div>\r\n        <IconButton\r\n          aria-label=\"showRecorder\"\r\n          component=\"span\"\r\n          disabled={loading || ticketStatus !== \"open\"}\r\n          onClick={() => setReplyingMessage(null)}\r\n        >\r\n          <ClearIcon className={classes.sendMessageIcons} />\r\n        </IconButton>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  if (medias.length > 0)\r\n    return (\r\n      <Paper elevation={0} square className={classes.viewMediaInputWrapper}>\r\n        <IconButton\r\n          aria-label=\"cancel-upload\"\r\n          component=\"span\"\r\n          onClick={(e) => setMedias([])}\r\n        >\r\n          <CancelIcon className={classes.sendMessageIcons} />\r\n        </IconButton>\r\n\r\n        {loading ? (\r\n          <div>\r\n            <CircularProgress className={classes.circleLoading} />\r\n          </div>\r\n        ) : (\r\n          <span>\r\n            {medias[0]?.name}\r\n            {/* <img src={media.preview} alt=\"\"></img> */}\r\n          </span>\r\n        )}\r\n        <IconButton\r\n          aria-label=\"send-upload\"\r\n          component=\"span\"\r\n          onClick={handleUploadMedia}\r\n          disabled={loading}\r\n        >\r\n          <SendIcon className={classes.sendMessageIcons} />\r\n        </IconButton>\r\n      </Paper>\r\n    );\r\n  else {\r\n    return (\r\n      <Paper square elevation={0} className={classes.mainWrapper}>\r\n        {replyingMessage && renderReplyingMessage(replyingMessage)}\r\n        <div className={classes.newMessageBox}>\r\n          <EmojiOptions\r\n            disabled={disableOption()}\r\n            handleAddEmoji={handleAddEmoji}\r\n            showEmoji={showEmoji}\r\n            setShowEmoji={setShowEmoji}\r\n          />\r\n\r\n          <FileInput\r\n            disableOption={disableOption}\r\n            handleChangeMedias={handleChangeMedias}\r\n          />\r\n\r\n          <SignSwitch\r\n            width={props.width}\r\n            setSignMessage={setSignMessage}\r\n            signMessage={signMessage}\r\n          />\r\n\r\n          <CustomInput\r\n            loading={loading}\r\n            inputRef={inputRef}\r\n            ticketStatus={ticketStatus}\r\n            inputMessage={inputMessage}\r\n            setInputMessage={setInputMessage}\r\n            // handleChangeInput={handleChangeInput}\r\n            handleSendMessage={handleSendMessage}\r\n            handleInputPaste={handleInputPaste}\r\n            disableOption={disableOption}\r\n            handleQuickAnswersClick={handleQuickAnswersClick}\r\n          />\r\n\r\n          <ActionButtons\r\n            inputMessage={inputMessage}\r\n            loading={loading}\r\n            recording={recording}\r\n            ticketStatus={ticketStatus}\r\n            handleSendMessage={handleSendMessage}\r\n            handleCancelAudio={handleCancelAudio}\r\n            handleUploadAudio={handleUploadAudio}\r\n            handleStartRecording={handleStartRecording}\r\n          />\r\n        </div>\r\n      </Paper>\r\n    );\r\n  }\r\n};\r\n\r\nexport default withWidth()(MessageInputCustom);\r\n","import { useState } from \"react\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nexport function useLocalStorage(key, initialValue) {\r\n\tconst [storedValue, setStoredValue] = useState(() => {\r\n\t\ttry {\r\n\t\t\tconst item = localStorage.getItem(key);\r\n\t\t\treturn item ? JSON.parse(item) : initialValue;\r\n\t\t} catch (error) {\r\n\t\t\ttoastError(error);\r\n\t\t\treturn initialValue;\r\n\t\t}\r\n\t});\r\n\r\n\tconst setValue = value => {\r\n\t\ttry {\r\n\t\t\tconst valueToStore =\r\n\t\t\t\tvalue instanceof Function ? value(storedValue) : value;\r\n\r\n\t\t\tsetStoredValue(valueToStore);\r\n\r\n\t\t\tlocalStorage.setItem(key, JSON.stringify(valueToStore));\r\n\t\t} catch (error) {\r\n\t\t\ttoastError(error);\r\n\t\t}\r\n\t};\r\n\r\n\treturn [storedValue, setValue];\r\n}\r\n","import api from \"../../services/api\";\r\n\r\nconst useQueues = () => {\r\n\tconst findAll = async () => {\r\n        const { data } = await api.get(\"/queue\");\r\n        return data;\r\n    }\r\n\r\n\treturn { findAll };\r\n};\r\n\r\nexport default useQueues;\r\n","import React, { useState, useEffect, useRef, useContext } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport { Grid, ListItemText, Typography, makeStyles } from \"@material-ui/core\";\r\n\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Autocomplete, {\r\n  createFilterOptions,\r\n} from \"@material-ui/lab/Autocomplete\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport api from \"../../services/api\";\r\nimport ButtonWithSpinner from \"../ButtonWithSpinner\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport useQueues from \"../../hooks/useQueues\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  maxWidth: {\r\n    width: \"100%\",\r\n  },\r\n}));\r\n\r\nconst filterOptions = createFilterOptions({\r\n  trim: true,\r\n});\r\n\r\nconst TransferTicketModalCustom = ({ modalOpen, onClose, ticketid }) => {\r\n  const history = useHistory();\r\n  const [options, setOptions] = useState([]);\r\n  const [queues, setQueues] = useState([]);\r\n  const [allQueues, setAllQueues] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [searchParam, setSearchParam] = useState(\"\");\r\n  const [selectedUser, setSelectedUser] = useState(null);\r\n  const [selectedQueue, setSelectedQueue] = useState(\"\");\r\n  const classes = useStyles();\r\n  const { findAll: findAllQueues } = useQueues();\r\n  const isMounted = useRef(true);\r\n  const [whatsapps, setWhatsapps] = useState([]);\r\n  const [selectedWhatsapp, setSelectedWhatsapp] = useState(\"\");\r\n  const { user } = useContext(AuthContext);\r\n  const { companyId, whatsappId } = user;\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      isMounted.current = false;\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const delayDebounceFn = setTimeout(() => {\r\n      const fetchContacts = async () => {\r\n        api\r\n          .get(`/whatsapp`, { params: { companyId, session: 0 } })\r\n          .then(({ data }) => setWhatsapps(data));\r\n      };\r\n\r\n      if (whatsappId !== null && whatsappId !== undefined) {\r\n        setSelectedWhatsapp(whatsappId)\r\n      }\r\n\r\n      if (user.queues.length === 1) {\r\n        setSelectedQueue(user.queues[0].id)\r\n      }\r\n      fetchContacts();\r\n      setLoading(false);\r\n    }, 500);\r\n    return () => clearTimeout(delayDebounceFn);\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (isMounted.current) {\r\n      const loadQueues = async () => {\r\n        const list = await findAllQueues();\r\n        setAllQueues(list);\r\n        setQueues(list);\r\n      };\r\n      loadQueues();\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!modalOpen || searchParam.length < 3) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n    const delayDebounceFn = setTimeout(() => {\r\n      setLoading(true);\r\n      const fetchUsers = async () => {\r\n        try {\r\n          const { data } = await api.get(\"/users/\", {\r\n            params: { searchParam },\r\n          });\r\n          setOptions(data.users);\r\n          setLoading(false);\r\n        } catch (err) {\r\n          setLoading(false);\r\n          toastError(err);\r\n        }\r\n      };\r\n\r\n      fetchUsers();\r\n    }, 500);\r\n    return () => clearTimeout(delayDebounceFn);\r\n  }, [searchParam, modalOpen]);\r\n\r\n  const handleClose = () => {\r\n    onClose();\r\n    setSearchParam(\"\");\r\n    setSelectedUser(null);\r\n  };\r\n\r\n  const handleSaveTicket = async (e) => {\r\n    e.preventDefault();\r\n    if (!ticketid) return;\r\n    if (!selectedQueue || selectedQueue === \"\") return;\r\n    setLoading(true);\r\n    try {\r\n      let data = {};\r\n\r\n      if (selectedUser) {\r\n        data.userId = selectedUser.id;\r\n      }\r\n\r\n      if (selectedQueue && selectedQueue !== null) {\r\n        data.queueId = selectedQueue;\r\n\r\n        if (!selectedUser) {\r\n          data.status = \"pending\";\r\n          data.userId = null;\r\n        }\r\n      }\r\n\r\n      if (selectedWhatsapp) {\r\n        data.whatsappId = selectedWhatsapp\r\n      }\r\n      await api.put(`/tickets/${ticketid}`, data);\r\n\r\n      history.push(`/tickets`);\r\n    } catch (err) {\r\n      setLoading(false);\r\n      toastError(err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog open={modalOpen} onClose={handleClose} maxWidth=\"lg\" scroll=\"paper\">\r\n      <form onSubmit={handleSaveTicket}>\r\n        <DialogTitle id=\"form-dialog-title\">\r\n          {i18n.t(\"transferTicketModal.title\")}\r\n        </DialogTitle>\r\n        <DialogContent dividers>\r\n          <Autocomplete\r\n            style={{ width: 300, marginBottom: 20 }}\r\n            getOptionLabel={(option) => `${option.name}`}\r\n            onChange={(e, newValue) => {\r\n              setSelectedUser(newValue);\r\n              if (newValue != null && Array.isArray(newValue.queues)) {\r\n                setQueues(newValue.queues);\r\n              } else {\r\n                setQueues(allQueues);\r\n                setSelectedQueue(\"\");\r\n              }\r\n            }}\r\n            options={options}\r\n            filterOptions={filterOptions}\r\n            freeSolo\r\n            autoHighlight\r\n            noOptionsText={i18n.t(\"transferTicketModal.noOptions\")}\r\n            loading={loading}\r\n            renderInput={(params) => (\r\n              <TextField\r\n                {...params}\r\n                label={i18n.t(\"transferTicketModal.fieldLabel\")}\r\n                variant=\"outlined\"\r\n                autoFocus\r\n                onChange={(e) => setSearchParam(e.target.value)}\r\n                InputProps={{\r\n                  ...params.InputProps,\r\n                  endAdornment: (\r\n                    <React.Fragment>\r\n                      {loading ? (\r\n                        <CircularProgress color=\"inherit\" size={20} />\r\n                      ) : null}\r\n                      {params.InputProps.endAdornment}\r\n                    </React.Fragment>\r\n                  ),\r\n                }}\r\n              />\r\n            )}\r\n          />\r\n          <FormControl variant=\"outlined\" className={classes.maxWidth}>\r\n            <InputLabel>\r\n              {i18n.t(\"transferTicketModal.fieldQueueLabel\")}\r\n            </InputLabel>\r\n            <Select\r\n              value={selectedQueue}\r\n              onChange={(e) => setSelectedQueue(e.target.value)}\r\n              label={i18n.t(\"transferTicketModal.fieldQueuePlaceholder\")}\r\n            >\r\n              {queues.map((queue) => (\r\n                <MenuItem key={queue.id} value={queue.id}>\r\n                  {queue.name}\r\n                </MenuItem>\r\n              ))}\r\n            </Select>\r\n          </FormControl>\r\n          {/* CONEXAO */}\r\n          <Grid container spacing={2} style={{marginTop: '15px'}}>\r\n            <Grid xs={12} item>\r\n              <Select\r\n                required\r\n                fullWidth\r\n                displayEmpty\r\n                variant=\"outlined\"\r\n                value={selectedWhatsapp}\r\n                onChange={(e) => {\r\n                  setSelectedWhatsapp(e.target.value)\r\n                }}\r\n                MenuProps={{\r\n                  anchorOrigin: {\r\n                    vertical: \"bottom\",\r\n                    horizontal: \"left\",\r\n                  },\r\n                  transformOrigin: {\r\n                    vertical: \"top\",\r\n                    horizontal: \"left\",\r\n                  },\r\n                  getContentAnchorEl: null,\r\n                }}\r\n                renderValue={() => {\r\n                  if (selectedWhatsapp === \"\") {\r\n                    return \"Selecione uma Conexão\"\r\n                  }\r\n                  const whatsapp = whatsapps.find(w => w.id === selectedWhatsapp)\r\n                  return whatsapp.name\r\n                }}\r\n              >\r\n                {whatsapps?.length > 0 &&\r\n                  whatsapps.map((whatsapp, key) => (\r\n                    <MenuItem dense key={key} value={whatsapp.id}>\r\n                      <ListItemText\r\n                        primary={\r\n                          <>\r\n                            {/* {IconChannel(whatsapp.channel)} */}\r\n                            <Typography component=\"span\" style={{ fontSize: 14, marginLeft: \"10px\", display: \"inline-flex\", alignItems: \"center\", lineHeight: \"2\" }}>\r\n                              {whatsapp.name} &nbsp; <p className={(whatsapp.status) === 'CONNECTED' ? classes.online : classes.offline} >({whatsapp.status})</p>\r\n                            </Typography>\r\n                          </>\r\n                        }\r\n                      />\r\n                    </MenuItem>\r\n                  ))}\r\n              </Select>\r\n            </Grid>\r\n          </Grid>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={handleClose}\r\n            color=\"secondary\"\r\n            disabled={loading}\r\n            variant=\"outlined\"\r\n          >\r\n            {i18n.t(\"transferTicketModal.buttons.cancel\")}\r\n          </Button>\r\n          <ButtonWithSpinner\r\n            variant=\"contained\"\r\n            type=\"submit\"\r\n            color=\"primary\"\r\n            loading={loading}\r\n          >\r\n            {i18n.t(\"transferTicketModal.buttons.ok\")}\r\n          </ButtonWithSpinner>\r\n        </DialogActions>\r\n      </form>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default TransferTicketModalCustom;\r\n","import React from \"react\";\r\n\r\nimport TextField from \"@material-ui/core/TextField\";\r\n\r\nconst InputComponent = ({ inputRef, ...other }) => <div {...other} />;\r\n\r\nconst OutlinedDiv = ({\r\n  InputProps,\r\n  children,\r\n  InputLabelProps,\r\n  label,\r\n  ...other\r\n}) => {\r\n  return (\r\n    <TextField\r\n      {...other}\r\n      variant=\"outlined\"\r\n      label={label}\r\n      multiline\r\n      InputLabelProps={{ shrink: true, ...InputLabelProps }}\r\n      InputProps={{\r\n        inputComponent: InputComponent,\r\n        ...InputProps\r\n      }}\r\n      inputProps={{ children: children }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default OutlinedDiv;","import React from \"react\";\r\nimport { Chip, makeStyles } from \"@material-ui/core\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport OutlinedDiv from \"../OutlinedDiv\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    chip: {\r\n        margin: theme.spacing(0.5),\r\n        cursor: \"pointer\"\r\n    }\r\n}));\r\n\r\nconst MessageVariablesPicker = ({ onClick, disabled }) => {\r\n    const classes = useStyles();\r\n\r\n    const handleClick = (e, value) => {\r\n        e.preventDefault();\r\n        if (disabled) return;\r\n        onClick(value);\r\n    };\r\n\r\n    const msgVars = [\r\n        {\r\n            name: i18n.t(\"messageVariablesPicker.vars.contactFirstName\"),\r\n            value: \"{{firstName}}\"\r\n        },\r\n        {\r\n            name: i18n.t(\"messageVariablesPicker.vars.contactName\"),\r\n            value: \"{{name}} \"\r\n        },\r\n        {\r\n            name: i18n.t(\"messageVariablesPicker.vars.greeting\"),\r\n            value: \"{{ms}} \"\r\n        },\r\n        {\r\n            name: i18n.t(\"messageVariablesPicker.vars.protocolNumber\"),\r\n            value: \"{{protocol}} \"\r\n        },\r\n        {\r\n            name: i18n.t(\"messageVariablesPicker.vars.hour\"),\r\n            value: \"{{hora}} \"\r\n        },\r\n    ];\r\n\r\n    return (\r\n        <OutlinedDiv\r\n            margin=\"dense\"\r\n            fullWidth\r\n            label={i18n.t(\"messageVariablesPicker.label\")}\r\n            disabled={disabled}\r\n        >\r\n            {msgVars.map(msgVar => (\r\n                <Chip\r\n                    key={msgVar.value}\r\n                    onMouseDown={e => handleClick(e, msgVar.value)}\r\n                    label={msgVar.name}\r\n                    size=\"small\"\r\n                    className={classes.chip}\r\n                    color=\"primary\"\r\n                />\r\n            ))}\r\n        </OutlinedDiv>\r\n    );\r\n};\r\n\r\nexport default MessageVariablesPicker;","import React, { useState, useEffect, useContext, useRef } from \"react\";\r\n\r\nimport * as Yup from \"yup\";\r\nimport { Formik, Form, Field } from \"formik\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { green } from \"@material-ui/core/colors\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nimport api from \"../../services/api\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { FormControl, Grid, IconButton } from \"@material-ui/core\";\r\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\r\nimport moment from \"moment\"\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport { isArray, capitalize } from \"lodash\";\r\nimport DeleteOutline from \"@material-ui/icons/DeleteOutline\";\r\nimport AttachFile from \"@material-ui/icons/AttachFile\";\r\nimport { head } from \"lodash\";\r\nimport ConfirmationModal from \"../ConfirmationModal\";\r\nimport MessageVariablesPicker from \"../MessageVariablesPicker\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\troot: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexWrap: \"wrap\",\r\n\t},\r\n\tmultFieldLine: {\r\n\t\tdisplay: \"flex\",\r\n\t\t\"& > *:not(:last-child)\": {\r\n\t\t\tmarginRight: theme.spacing(1),\r\n\t\t},\r\n\t},\r\n\r\n\tbtnWrapper: {\r\n\t\tposition: \"relative\",\r\n\t},\r\n\r\n\tbuttonProgress: {\r\n\t\tcolor: green[500],\r\n\t\tposition: \"absolute\",\r\n\t\ttop: \"50%\",\r\n\t\tleft: \"50%\",\r\n\t\tmarginTop: -12,\r\n\t\tmarginLeft: -12,\r\n\t},\r\n\tformControl: {\r\n\t\tmargin: theme.spacing(1),\r\n\t\tminWidth: 120,\r\n\t},\r\n}));\r\n\r\nconst ScheduleSchema = Yup.object().shape({\r\n\tbody: Yup.string()\r\n\t\t.min(5, \"Mensagem muito curta\")\r\n\t\t.required(\"Obrigatório\"),\r\n\tcontactId: Yup.number().required(\"Obrigatório\"),\r\n\tsendAt: Yup.string().required(\"Obrigatório\")\r\n});\r\n\r\nconst ScheduleModal = ({ open, onClose, scheduleId, contactId, cleanContact, reload }) => {\r\n\tconst classes = useStyles();\r\n\tconst history = useHistory();\r\n\tconst { user } = useContext(AuthContext);\r\n\r\n\tconst initialState = {\r\n\t\tbody: \"\",\r\n\t\tcontactId: \"\",\r\n\t\tsendAt: moment().add(1, 'hour').format('YYYY-MM-DDTHH:mm'),\r\n\t\tsentAt: \"\"\r\n\t};\r\n\r\n\tconst initialContact = {\r\n\t\tid: \"\",\r\n\t\tname: \"\"\r\n\t}\r\n\r\n\tconst [schedule, setSchedule] = useState(initialState);\r\n\tconst [currentContact, setCurrentContact] = useState(initialContact);\r\n\tconst [contacts, setContacts] = useState([initialContact]);\r\n\tconst [attachment, setAttachment] = useState(null);\r\n\tconst attachmentFile = useRef(null);\r\n\tconst [confirmationOpen, setConfirmationOpen] = useState(false);\r\n\tconst messageInputRef = useRef();\r\n\r\n\tuseEffect(() => {\r\n\t\tif (contactId && contacts.length) {\r\n\t\t\tconst contact = contacts.find(c => c.id === contactId);\r\n\t\t\tif (contact) {\r\n\t\t\t\tsetCurrentContact(contact);\r\n\t\t\t}\r\n\t\t}\r\n\t}, [contactId, contacts]);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst { companyId } = user;\r\n\t\tif (open) {\r\n\t\t\ttry {\r\n\t\t\t\t(async () => {\r\n\t\t\t\t\tconst { data: contactList } = await api.get('/contacts/list', { params: { companyId: companyId } });\r\n\t\t\t\t\tlet customList = contactList.map((c) => ({ id: c.id, name: c.name }));\r\n\t\t\t\t\tif (isArray(customList)) {\r\n\t\t\t\t\t\tsetContacts([{ id: \"\", name: \"\" }, ...customList]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (contactId) {\r\n\t\t\t\t\t\tsetSchedule(prevState => {\r\n\t\t\t\t\t\t\treturn { ...prevState, contactId }\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (!scheduleId) return;\r\n\r\n\t\t\t\t\tconst { data } = await api.get(`/schedules/${scheduleId}`);\r\n\t\t\t\t\tsetSchedule(prevState => {\r\n\t\t\t\t\t\treturn { ...prevState, ...data, sendAt: moment(data.sendAt).format('YYYY-MM-DDTHH:mm') };\r\n\t\t\t\t\t});\r\n\t\t\t\t\tsetCurrentContact(data.contact);\r\n\t\t\t\t})()\r\n\t\t\t} catch (err) {\r\n\t\t\t\ttoastError(err);\r\n\t\t\t}\r\n\t\t}\r\n\t}, [scheduleId, contactId, open, user]);\r\n\r\n\tconst handleClose = () => {\r\n\t\tonClose();\r\n\t\tsetAttachment(null);\r\n\t\tsetSchedule(initialState);\r\n\t};\r\n\r\n\tconst handleAttachmentFile = (e) => {\r\n\t\tconst file = head(e.target.files);\r\n\t\tif (file) {\r\n\t\t\tsetAttachment(file);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleSaveSchedule = async values => {\r\n\t\tconst scheduleData = { ...values, userId: user.id };\r\n\t\ttry {\r\n\t\t\tif (scheduleId) {\r\n\t\t\t\tawait api.put(`/schedules/${scheduleId}`, scheduleData);\r\n\t\t\t\tif (attachment != null) {\r\n\t\t\t\t\tconst formData = new FormData();\r\n\t\t\t\t\tformData.append(\"file\", attachment);\r\n\t\t\t\t\tawait api.post(\r\n\t\t\t\t\t\t`/schedules/${scheduleId}/media-upload`,\r\n\t\t\t\t\t\tformData\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tconst { data } = await api.post(\"/schedules\", scheduleData);\r\n\t\t\t\tif (attachment != null) {\r\n\t\t\t\t\tconst formData = new FormData();\r\n\t\t\t\t\tformData.append(\"file\", attachment);\r\n\t\t\t\t\tawait api.post(`/schedules/${data.id}/media-upload`, formData);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ttoast.success(i18n.t(\"scheduleModal.success\"));\r\n\t\t\tif (typeof reload == 'function') {\r\n\t\t\t\treload();\r\n\t\t\t}\r\n\t\t\tif (contactId) {\r\n\t\t\t\tif (typeof cleanContact === 'function') {\r\n\t\t\t\t\tcleanContact();\r\n\t\t\t\t\thistory.push('/schedules');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\ttoastError(err);\r\n\t\t}\r\n\t\tsetCurrentContact(initialContact);\r\n\t\tsetSchedule(initialState);\r\n\t\thandleClose();\r\n\t};\r\n\tconst handleClickMsgVar = async (msgVar, setValueFunc) => {\r\n\t\tconst el = messageInputRef.current;\r\n\t\tconst firstHalfText = el.value.substring(0, el.selectionStart);\r\n\t\tconst secondHalfText = el.value.substring(el.selectionEnd);\r\n\t\tconst newCursorPos = el.selectionStart + msgVar.length;\r\n\r\n\t\tsetValueFunc(\"body\", `${firstHalfText}${msgVar}${secondHalfText}`);\r\n\r\n\t\tawait new Promise(r => setTimeout(r, 100));\r\n\t\tmessageInputRef.current.setSelectionRange(newCursorPos, newCursorPos);\r\n\t};\r\n\r\n\tconst deleteMedia = async () => {\r\n\t\tif (attachment) {\r\n\t\t\tsetAttachment(null);\r\n\t\t\tattachmentFile.current.value = null;\r\n\t\t}\r\n\r\n\t\tif (schedule.mediaPath) {\r\n\t\t\tawait api.delete(`/schedules/${schedule.id}/media-upload`);\r\n\t\t\tsetSchedule((prev) => ({\r\n\t\t\t\t...prev,\r\n\t\t\t\tmediaPath: null,\r\n\t\t\t}));\r\n\t\t\ttoast.success(i18n.t(\"scheduleModal.toasts.deleted\"));\r\n\t\t\tif (typeof reload == \"function\") {\r\n\t\t\t\tconsole.log(reload);\r\n\t\t\t\tconsole.log(\"1\");\r\n\t\t\t\treload();\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<ConfirmationModal\r\n\t\t\t\ttitle={i18n.t(\"scheduleModal.confirmationModal.deleteTitle\")}\r\n\t\t\t\topen={confirmationOpen}\r\n\t\t\t\tonClose={() => setConfirmationOpen(false)}\r\n\t\t\t\tonConfirm={deleteMedia}\r\n\t\t\t>\r\n\t\t\t\t{i18n.t(\"scheduleModal.confirmationModal.deleteMessage\")}\r\n\t\t\t</ConfirmationModal>\r\n\t\t\t<Dialog\r\n\t\t\t\topen={open}\r\n\t\t\t\tonClose={handleClose}\r\n\t\t\t\tmaxWidth=\"xs\"\r\n\t\t\t\tfullWidth\r\n\t\t\t\tscroll=\"paper\"\r\n\t\t\t>\r\n\t\t\t\t<DialogTitle id=\"form-dialog-title\">\r\n\t\t\t\t\t{schedule.status === 'ERRO' ? 'Erro de Envio' : `Mensagem ${capitalize(schedule.status)}`}\r\n\t\t\t\t</DialogTitle>\r\n\t\t\t\t<div style={{ display: \"none\" }}>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\t\taccept=\".png,.jpg,.jpeg\"\r\n\t\t\t\t\t\tref={attachmentFile}\r\n\t\t\t\t\t\tonChange={(e) => handleAttachmentFile(e)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<Formik\r\n\t\t\t\t\tinitialValues={schedule}\r\n\t\t\t\t\tenableReinitialize={true}\r\n\t\t\t\t\tvalidationSchema={ScheduleSchema}\r\n\t\t\t\t\tonSubmit={(values, actions) => {\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\thandleSaveSchedule(values);\r\n\t\t\t\t\t\t\tactions.setSubmitting(false);\r\n\t\t\t\t\t\t}, 400);\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{({ touched, errors, isSubmitting, values, setFieldValue }) => (\r\n\t\t\t\t\t\t<Form>\r\n\t\t\t\t\t\t\t<DialogContent dividers>\r\n\t\t\t\t\t\t\t\t<div className={classes.multFieldLine}>\r\n\t\t\t\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<Autocomplete\r\n\t\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={currentContact}\r\n\t\t\t\t\t\t\t\t\t\t\toptions={contacts}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e, contact) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconst contactId = contact ? contact.id : '';\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetSchedule({ ...schedule, contactId });\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetCurrentContact(contact ? contact : initialContact);\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\tgetOptionLabel={(option) => option.name}\r\n\t\t\t\t\t\t\t\t\t\t\tgetOptionSelected={(option, value) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn value.id === option.id\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\trenderInput={(params) => <TextField {...params} variant=\"outlined\" placeholder=\"Contato\" />}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t<div className={classes.multFieldLine}>\r\n\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\t\trows={9}\r\n\t\t\t\t\t\t\t\t\t\tmultiline={true}\r\n\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"scheduleModal.form.body\")}\r\n\t\t\t\t\t\t\t\t\t\tname=\"body\"\r\n\t\t\t\t\t\t\t\t\t\tinputRef={messageInputRef}\r\n\t\t\t\t\t\t\t\t\t\terror={touched.body && Boolean(errors.body)}\r\n\t\t\t\t\t\t\t\t\t\thelperText={touched.body && errors.body}\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<Grid item>\r\n\t\t\t\t\t\t\t\t\t<MessageVariablesPicker\r\n\t\t\t\t\t\t\t\t\t\tdisabled={isSubmitting}\r\n\t\t\t\t\t\t\t\t\t\tonClick={value => handleClickMsgVar(value, setFieldValue)}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t<div className={classes.multFieldLine}>\r\n\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"scheduleModal.form.sendAt\")}\r\n\t\t\t\t\t\t\t\t\t\ttype=\"datetime-local\"\r\n\t\t\t\t\t\t\t\t\t\tname=\"sendAt\"\r\n\t\t\t\t\t\t\t\t\t\tInputLabelProps={{\r\n\t\t\t\t\t\t\t\t\t\t\tshrink: true,\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\terror={touched.sendAt && Boolean(errors.sendAt)}\r\n\t\t\t\t\t\t\t\t\t\thelperText={touched.sendAt && errors.sendAt}\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t{(schedule.mediaPath || attachment) && (\r\n\t\t\t\t\t\t\t\t\t<Grid xs={12} item>\r\n\t\t\t\t\t\t\t\t\t\t<Button startIcon={<AttachFile />}>\r\n\t\t\t\t\t\t\t\t\t\t\t{attachment ? attachment.name : schedule.mediaName}\r\n\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => setConfirmationOpen(true)}\r\n\t\t\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<DeleteOutline color=\"secondary\" />\r\n\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</DialogContent>\r\n\t\t\t\t\t\t\t<DialogActions>\r\n\t\t\t\t\t\t\t\t{!attachment && !schedule.mediaPath && (\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => attachmentFile.current.click()}\r\n\t\t\t\t\t\t\t\t\t\tdisabled={isSubmitting}\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{i18n.t(\"quickMessages.buttons.attach\")}\r\n\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tonClick={handleClose}\r\n\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\t\t\tdisabled={isSubmitting}\r\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{i18n.t(\"scheduleModal.buttons.cancel\")}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t{(schedule.sentAt === null || schedule.sentAt === \"\") && (\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\t\tdisabled={isSubmitting}\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\t\t\tclassName={classes.btnWrapper}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{scheduleId\r\n\t\t\t\t\t\t\t\t\t\t\t? `${i18n.t(\"scheduleModal.buttons.okEdit\")}`\r\n\t\t\t\t\t\t\t\t\t\t\t: `${i18n.t(\"scheduleModal.buttons.okAdd\")}`}\r\n\t\t\t\t\t\t\t\t\t\t{isSubmitting && (\r\n\t\t\t\t\t\t\t\t\t\t\t<CircularProgress\r\n\t\t\t\t\t\t\t\t\t\t\t\tsize={24}\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.buttonProgress}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</DialogActions>\r\n\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Formik>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default ScheduleModal;","import React, { useContext, useEffect, useRef, useState } from \"react\";\r\n\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Menu from \"@material-ui/core/Menu\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport api from \"../../services/api\";\r\nimport ConfirmationModal from \"../ConfirmationModal\";\r\nimport TransferTicketModalCustom from \"../TransferTicketModalCustom\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { Can } from \"../Can\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\n\r\nimport ScheduleModal from \"../ScheduleModal\";\r\n\r\nconst TicketOptionsMenu = ({ ticket, menuOpen, handleClose, anchorEl }) => {\r\n\tconst [confirmationOpen, setConfirmationOpen] = useState(false);\r\n\tconst [transferTicketModalOpen, setTransferTicketModalOpen] = useState(false);\r\n\tconst isMounted = useRef(true);\r\n\tconst { user } = useContext(AuthContext);\r\n\r\n\tconst [scheduleModalOpen, setScheduleModalOpen] = useState(false);\r\n\tconst [contactId, setContactId] = useState(null);\r\n\r\n\tuseEffect(() => {\r\n\t\treturn () => {\r\n\t\t\tisMounted.current = false;\r\n\t\t};\r\n\t}, []);\r\n\r\n\tconst handleDeleteTicket = async () => {\r\n\t\ttry {\r\n\t\t\tawait api.delete(`/tickets/${ticket.id}`);\r\n\t\t} catch (err) {\r\n\t\t\ttoastError(err);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleOpenConfirmationModal = e => {\r\n\t\tsetConfirmationOpen(true);\r\n\t\thandleClose();\r\n\t};\r\n\r\n\tconst handleOpenTransferModal = e => {\r\n\t\tsetTransferTicketModalOpen(true);\r\n\t\thandleClose();\r\n\t};\r\n\r\n\tconst handleCloseTransferTicketModal = () => {\r\n\t\tif (isMounted.current) {\r\n\t\t\tsetTransferTicketModalOpen(false);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleOpenScheduleModal = () => {\r\n\t\thandleClose();\r\n\t\tsetContactId(ticket.contact.id);\r\n\t\tsetScheduleModalOpen(true);\r\n\t}\r\n\r\n\tconst handleCloseScheduleModal = () => {\r\n\t\tsetScheduleModalOpen(false);\r\n\t\tsetContactId(null);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Menu\r\n\t\t\t\tid=\"menu-appbar\"\r\n\t\t\t\tanchorEl={anchorEl}\r\n\t\t\t\tgetContentAnchorEl={null}\r\n\t\t\t\tanchorOrigin={{\r\n\t\t\t\t\tvertical: \"bottom\",\r\n\t\t\t\t\thorizontal: \"right\",\r\n\t\t\t\t}}\r\n\t\t\t\tkeepMounted\r\n\t\t\t\ttransformOrigin={{\r\n\t\t\t\t\tvertical: \"top\",\r\n\t\t\t\t\thorizontal: \"right\",\r\n\t\t\t\t}}\r\n\t\t\t\topen={menuOpen}\r\n\t\t\t\tonClose={handleClose}\r\n\t\t\t>\r\n\t\t\t\t<MenuItem onClick={handleOpenScheduleModal}>\r\n\t\t\t\t\t{i18n.t(\"ticketOptionsMenu.schedule\")}\r\n\t\t\t\t</MenuItem>\r\n\t\t\t\t<MenuItem onClick={handleOpenTransferModal}>\r\n\t\t\t\t\t{i18n.t(\"ticketOptionsMenu.transfer\")}\r\n\t\t\t\t</MenuItem>\r\n\t\t\t\t<Can\r\n\t\t\t\t\trole={user.profile}\r\n\t\t\t\t\tperform=\"ticket-options:deleteTicket\"\r\n\t\t\t\t\tyes={() => (\r\n\t\t\t\t\t\t<MenuItem onClick={handleOpenConfirmationModal}>\r\n\t\t\t\t\t\t\t{i18n.t(\"ticketOptionsMenu.delete\")}\r\n\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t)}\r\n\t\t\t\t/>\r\n\t\t\t</Menu>\r\n\t\t\t<ConfirmationModal\r\n\t\t\t\ttitle={`${i18n.t(\"ticketOptionsMenu.confirmationModal.title\")}${\r\n\t\t\t\t\tticket.id\r\n\t\t\t\t} ${i18n.t(\"ticketOptionsMenu.confirmationModal.titleFrom\")} ${\r\n\t\t\t\t\tticket.contact.name\r\n\t\t\t\t}?`}\r\n\t\t\t\topen={confirmationOpen}\r\n\t\t\t\tonClose={setConfirmationOpen}\r\n\t\t\t\tonConfirm={handleDeleteTicket}\r\n\t\t\t>\r\n\t\t\t\t{i18n.t(\"ticketOptionsMenu.confirmationModal.message\")}\r\n\t\t\t</ConfirmationModal>\r\n\t\t\t<TransferTicketModalCustom\r\n\t\t\t\tmodalOpen={transferTicketModalOpen}\r\n\t\t\t\tonClose={handleCloseTransferTicketModal}\r\n\t\t\t\tticketid={ticket.id}\r\n\t\t\t/>\r\n\t\t\t<ScheduleModal\r\n\t\t\t\topen={scheduleModalOpen}\r\n\t\t\t\tonClose={handleCloseScheduleModal}\r\n\t\t\t\taria-labelledby=\"form-dialog-title\"\r\n\t\t\t\tcontactId={contactId}\r\n\t\t\t/>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default TicketOptionsMenu;","import React, { useContext, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport { makeStyles, createTheme, ThemeProvider } from \"@material-ui/core/styles\";\r\nimport { IconButton } from \"@material-ui/core\";\r\nimport { MoreVert, Replay } from \"@material-ui/icons\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport api from \"../../services/api\";\r\nimport TicketOptionsMenu from \"../TicketOptionsMenu\";\r\nimport ButtonWithSpinner from \"../ButtonWithSpinner\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport { TicketsContext } from \"../../context/Tickets/TicketsContext\";\r\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\r\nimport UndoRoundedIcon from '@material-ui/icons/UndoRounded';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport { green } from '@material-ui/core/colors';\r\n\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tactionButtons: {\r\n\t\tmarginRight: 6,\r\n\t\tflex: \"none\",\r\n\t\talignSelf: \"center\",\r\n\t\tmarginLeft: \"auto\",\r\n\t\t\"& > *\": {\r\n\t\t\tmargin: theme.spacing(0.5),\r\n\t\t},\r\n\t},\r\n}));\r\n\r\nconst TicketActionButtonsCustom = ({ ticket }) => {\r\n\tconst classes = useStyles();\r\n\tconst history = useHistory();\r\n\tconst [anchorEl, setAnchorEl] = useState(null);\r\n\tconst [loading, setLoading] = useState(false);\r\n\tconst ticketOptionsMenuOpen = Boolean(anchorEl);\r\n\tconst { user } = useContext(AuthContext);\r\n\tconst { setCurrentTicket } = useContext(TicketsContext);\r\n\r\n\tconst customTheme = createTheme({\r\n\t\tpalette: {\r\n\t\t  \tprimary: green,\r\n\t\t}\r\n\t});\r\n\r\n\tconst handleOpenTicketOptionsMenu = e => {\r\n\t\tsetAnchorEl(e.currentTarget);\r\n\t};\r\n\r\n\tconst handleCloseTicketOptionsMenu = e => {\r\n\t\tsetAnchorEl(null);\r\n\t};\r\n\r\n\tconst handleUpdateTicketStatus = async (e, status, userId) => {\r\n\t\tsetLoading(true);\r\n\t\ttry {\r\n\t\t\tawait api.put(`/tickets/${ticket.id}`, {\r\n\t\t\t\tstatus: status,\r\n\t\t\t\tuserId: userId || null,\r\n\t\t\t\tuseIntegration: status === \"closed\" ? false : ticket.useIntegration,\r\n\t\t\t\tpromptId: status === \"closed\" ? false : ticket.promptId,\r\n\t\t\t\tintegrationId: status === \"closed\" ? false : ticket.integrationId\r\n\t\t\t});\r\n\r\n\t\t\tsetLoading(false);\r\n\t\t\tif (status === \"open\") {\r\n\t\t\t\tsetCurrentTicket({ ...ticket, code: \"#open\" });\r\n\t\t\t} else {\r\n\t\t\t\tsetCurrentTicket({ id: null, code: null })\r\n\t\t\t\thistory.push(\"/tickets\");\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tsetLoading(false);\r\n\t\t\ttoastError(err);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className={classes.actionButtons}>\r\n\t\t\t{ticket.status === \"closed\" && (\r\n\t\t\t\t<ButtonWithSpinner\r\n\t\t\t\t\tloading={loading}\r\n\t\t\t\t\tstartIcon={<Replay />}\r\n\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\tonClick={e => handleUpdateTicketStatus(e, \"open\", user?.id)}\r\n\t\t\t\t>\r\n\t\t\t\t\t{i18n.t(\"messagesList.header.buttons.reopen\")}\r\n\t\t\t\t</ButtonWithSpinner>\r\n\t\t\t)}\r\n\t\t\t{ticket.status === \"open\" && (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<Tooltip title={i18n.t(\"messagesList.header.buttons.return\")}>\r\n\t\t\t\t\t\t<IconButton onClick={e => handleUpdateTicketStatus(e, \"pending\", null)}>\r\n\t\t\t\t\t\t\t<UndoRoundedIcon />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t<ThemeProvider theme={customTheme}>\r\n\t\t\t\t\t\t<Tooltip title={i18n.t(\"messagesList.header.buttons.resolve\")}>\r\n\t\t\t\t\t\t\t<IconButton onClick={e => handleUpdateTicketStatus(e, \"closed\", user?.id)} color=\"primary\">\r\n\t\t\t\t\t\t\t\t<CheckCircleIcon />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t</ThemeProvider>\r\n\t\t\t\t\t{/* <ButtonWithSpinner\r\n\t\t\t\t\t\tloading={loading}\r\n\t\t\t\t\t\tstartIcon={<Replay />}\r\n\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\tonClick={e => handleUpdateTicketStatus(e, \"pending\", null)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{i18n.t(\"messagesList.header.buttons.return\")}\r\n\t\t\t\t\t</ButtonWithSpinner>\r\n\t\t\t\t\t<ButtonWithSpinner\r\n\t\t\t\t\t\tloading={loading}\r\n\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\tonClick={e => handleUpdateTicketStatus(e, \"closed\", user?.id)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{i18n.t(\"messagesList.header.buttons.resolve\")}\r\n\t\t\t\t\t</ButtonWithSpinner> */}\r\n\t\t\t\t\t<IconButton onClick={handleOpenTicketOptionsMenu}>\r\n\t\t\t\t\t\t<MoreVert />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t<TicketOptionsMenu\r\n\t\t\t\t\t\tticket={ticket}\r\n\t\t\t\t\t\tanchorEl={anchorEl}\r\n\t\t\t\t\t\tmenuOpen={ticketOptionsMenuOpen}\r\n\t\t\t\t\t\thandleClose={handleCloseTicketOptionsMenu}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</>\r\n\t\t\t)}\r\n\t\t\t{ticket.status === \"pending\" && (\r\n\t\t\t\t<ButtonWithSpinner\r\n\t\t\t\t\tloading={loading}\r\n\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tonClick={e => handleUpdateTicketStatus(e, \"open\", user?.id)}\r\n\t\t\t\t>\r\n\t\t\t\t\t{i18n.t(\"messagesList.header.buttons.accept\")}\r\n\t\t\t\t</ButtonWithSpinner>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default TicketActionButtonsCustom;\r\n","import { Chip, Paper, TextField } from \"@material-ui/core\";\r\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { isArray, isString } from \"lodash\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport api from \"../../services/api\";\r\n\r\nexport function TagsContainer({ ticket }) {\r\n\r\n    const [tags, setTags] = useState([]);\r\n    const [selecteds, setSelecteds] = useState([]);\r\n    const isMounted = useRef(true);\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            isMounted.current = false\r\n        }\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if (isMounted.current) {\r\n            loadTags().then(() => {\r\n                if (Array.isArray(ticket.tags)) {\r\n                    setSelecteds(ticket.tags);\r\n                } else {\r\n                    setSelecteds([]);\r\n                }\r\n            });\r\n        }\r\n    }, [ticket]);\r\n\r\n    const createTag = async (data) => {\r\n        try {\r\n            const { data: responseData } = await api.post(`/tags`, data);\r\n            return responseData;\r\n        } catch (err) {\r\n            toastError(err);\r\n        }\r\n    }\r\n\r\n    const loadTags = async () => {\r\n        try {\r\n            const { data } = await api.get(`/tags/list`);\r\n            setTags(data);\r\n        } catch (err) {\r\n            toastError(err);\r\n        }\r\n    }\r\n\r\n    const syncTags = async (data) => {\r\n        try {\r\n            const { data: responseData } = await api.post(`/tags/sync`, data);\r\n            return responseData;\r\n        } catch (err) {\r\n            toastError(err);\r\n        }\r\n    }\r\n\r\n    const onChange = async (value, reason) => {\r\n        let optionsChanged = []\r\n        if (reason === 'create-option') {\r\n            if (isArray(value)) {\r\n                for (let item of value) {\r\n                    if (isString(item)) {\r\n                        const newTag = await createTag({ name: item })\r\n                        optionsChanged.push(newTag);\r\n                    } else {\r\n                        optionsChanged.push(item);\r\n                    }\r\n                }\r\n            }\r\n            await loadTags();\r\n        } else {\r\n            optionsChanged = value;\r\n        }\r\n        setSelecteds(optionsChanged);\r\n        await syncTags({ ticketId: ticket.id, tags: optionsChanged });\r\n    }\r\n\r\n    return (\r\n        <Paper style={{ padding: 12 }}>\r\n            <Autocomplete\r\n                multiple\r\n                size=\"small\"\r\n                options={tags}\r\n                value={selecteds}\r\n                freeSolo\r\n                onChange={(e, v, r) => onChange(v, r)}\r\n                getOptionLabel={(option) => option.name}\r\n                renderTags={(value, getTagProps) =>\r\n                    value.map((option, index) => (\r\n                        <Chip\r\n                            variant=\"outlined\"\r\n                            style={{\r\n                                background: option.color || '#eee',\r\n                                color: \"#FFF\",\r\n                                marginRight: 1,\r\n                                fontWeight: 600,\r\n                                borderRadius: 3,\r\n                                fontSize: \"0.8em\",\r\n                                whiteSpace: \"nowrap\"\r\n                            }}\r\n                            label={option.name.toUpperCase()}\r\n                            {...getTagProps({ index })}\r\n                            size=\"small\"\r\n                        />\r\n                    ))\r\n                }\r\n                renderInput={(params) => (\r\n                    <TextField {...params} variant=\"outlined\" placeholder=\"Tags\" />\r\n                )}\r\n                PaperComponent={({ children }) => (\r\n                    <Paper style={{ width: 400, marginLeft: 12 }}>\r\n                        {children}\r\n                    </Paper>\r\n                )}\r\n            />\r\n        </Paper>\r\n    )\r\n}","import React, { useState, useEffect, useContext } from \"react\";\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\n\r\nimport { toast } from \"react-toastify\";\r\nimport clsx from \"clsx\";\r\n\r\nimport { Paper, makeStyles } from \"@material-ui/core\";\r\n\r\nimport ContactDrawer from \"../ContactDrawer\";\r\nimport MessageInput from \"../MessageInputCustom/\";\r\nimport TicketHeader from \"../TicketHeader\";\r\nimport TicketInfo from \"../TicketInfo\";\r\nimport TicketActionButtons from \"../TicketActionButtonsCustom\";\r\nimport MessagesList from \"../MessagesList\";\r\nimport api from \"../../services/api\";\r\nimport { ReplyMessageProvider } from \"../../context/ReplyingMessage/ReplyingMessageContext\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport { TagsContainer } from \"../TagsContainer\";\r\nimport { SocketContext } from \"../../context/Socket/SocketContext\";\r\n\r\nconst drawerWidth = 320;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    height: \"100%\",\r\n    position: \"relative\",\r\n    overflow: \"hidden\",\r\n  },\r\n\r\n  mainWrapper: {\r\n    flex: 1,\r\n    height: \"100%\",\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    overflow: \"hidden\",\r\n    borderTopLeftRadius: 0,\r\n    borderBottomLeftRadius: 0,\r\n    borderLeft: \"0\",\r\n    marginRight: -drawerWidth,\r\n    transition: theme.transitions.create(\"margin\", {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n  },\r\n\r\n  mainWrapperShift: {\r\n    borderTopRightRadius: 0,\r\n    borderBottomRightRadius: 0,\r\n    transition: theme.transitions.create(\"margin\", {\r\n      easing: theme.transitions.easing.easeOut,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n    marginRight: 0,\r\n  },\r\n}));\r\n\r\nconst Ticket = () => {\r\n  const { ticketId } = useParams();\r\n  const history = useHistory();\r\n  const classes = useStyles();\r\n\r\n  const { user } = useContext(AuthContext);\r\n\r\n  const [drawerOpen, setDrawerOpen] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n  const [contact, setContact] = useState({});\r\n  const [ticket, setTicket] = useState({});\r\n\r\n  const socketManager = useContext(SocketContext);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const delayDebounceFn = setTimeout(() => {\r\n      const fetchTicket = async () => {\r\n        try {\r\n          const { data } = await api.get(\"/tickets/u/\" + ticketId);\r\n          const { queueId } = data;\r\n          const { queues, profile } = user;\r\n\r\n          const queueAllowed = queues.find((q) => q.id === queueId);\r\n          if (queueAllowed === undefined && profile !== \"admin\") {\r\n            toast.error(\"Acesso não permitido\");\r\n            history.push(\"/tickets\");\r\n            return;\r\n          }\r\n\r\n          setContact(data.contact);\r\n          setTicket(data);\r\n          setLoading(false);\r\n        } catch (err) {\r\n          setLoading(false);\r\n          toastError(err);\r\n        }\r\n      };\r\n      fetchTicket();\r\n    }, 500);\r\n    return () => clearTimeout(delayDebounceFn);\r\n  }, [ticketId, user, history]);\r\n\r\n  useEffect(() => {\r\n    const companyId = localStorage.getItem(\"companyId\");\r\n    const socket = socketManager.getSocket(companyId);\r\n\r\n    socket.on(\"ready\", () => socket.emit(\"joinChatBox\", `${ticket.id}`));\r\n\r\n    socket.on(`company-${companyId}-ticket`, (data) => {\r\n      if (data.action === \"update\" && data.ticket.id === ticket.id) {\r\n        setTicket(data.ticket);\r\n      }\r\n\r\n      if (data.action === \"delete\" && data.ticketId === ticket.id) {\r\n        // toast.success(\"Ticket deleted sucessfully.\");\r\n        history.push(\"/tickets\");\r\n      }\r\n    });\r\n\r\n    socket.on(`company-${companyId}-contact`, (data) => {\r\n      if (data.action === \"update\") {\r\n        setContact((prevState) => {\r\n          if (prevState.id === data.contact?.id) {\r\n            return { ...prevState, ...data.contact };\r\n          }\r\n          return prevState;\r\n        });\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, [ticketId, ticket, history, socketManager]);\r\n\r\n  const handleDrawerOpen = () => {\r\n    setDrawerOpen(true);\r\n  };\r\n\r\n  const handleDrawerClose = () => {\r\n    setDrawerOpen(false);\r\n  };\r\n\r\n  const renderTicketInfo = () => {\r\n    if (ticket.user !== undefined) {\r\n      return (\r\n        <TicketInfo\r\n          contact={contact}\r\n          ticket={ticket}\r\n          onClick={handleDrawerOpen}\r\n        />\r\n      );\r\n    }\r\n  };\r\n\r\n  const renderMessagesList = () => {\r\n    return (\r\n      <>\r\n        <MessagesList\r\n          ticket={ticket}\r\n          ticketId={ticket.id}\r\n          isGroup={ticket.isGroup}\r\n        ></MessagesList>\r\n        <MessageInput ticketId={ticket.id} ticketStatus={ticket.status} />\r\n      </>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root} id=\"drawer-container\">\r\n      <Paper\r\n        variant=\"outlined\"\r\n        elevation={0}\r\n        className={clsx(classes.mainWrapper, {\r\n          [classes.mainWrapperShift]: drawerOpen,\r\n        })}\r\n      >\r\n        <TicketHeader loading={loading}>\r\n          {renderTicketInfo()}\r\n          <TicketActionButtons ticket={ticket} />\r\n        </TicketHeader>\r\n        <Paper>\r\n          <TagsContainer ticket={ticket} />\r\n        </Paper>\r\n        <ReplyMessageProvider>{renderMessagesList()}</ReplyMessageProvider>\r\n      </Paper>\r\n      <ContactDrawer\r\n        open={drawerOpen}\r\n        handleDrawerClose={handleDrawerClose}\r\n        contact={contact}\r\n        loading={loading}\r\n        ticket={ticket}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Ticket;\r\n","import React from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport TicketsManager from \"../../components/TicketsManagerTabs/\";\r\nimport Ticket from \"../../components/Ticket/\";\r\nimport logo from \"../../assets/logo.png\"; //PLW DESIGN LOGO//\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tchatContainer: {\r\n\t\tflex: 1,\r\n\t\t// backgroundColor: \"#eee\",\r\n\t\tpadding: theme.spacing(1), //Aqui ele ajusta espaço na tela de ticket\r\n\t\theight: `calc(100% - 48px)`,\r\n\t\toverflowY: \"hidden\",\r\n\t},\r\n\r\n\tchatPapper: {\r\n\t\t// backgroundColor: \"red\",\r\n\t\tdisplay: \"flex\",\r\n\t\theight: \"100%\",\r\n\t},\r\n\r\n\tcontactsWrapper: {\r\n\t\tdisplay: \"flex\",\r\n\t\theight: \"100%\",\r\n\t\tflexDirection: \"column\",\r\n\t\toverflowY: \"hidden\",\r\n\t},\r\n\tmessagesWrapper: {\r\n\t\tdisplay: \"flex\",\r\n\t\theight: \"100%\",\r\n\t\tflexDirection: \"column\",\r\n\t},\r\n\twelcomeMsg: {\r\n\t\tbackgroundColor: theme.palette.boxticket, //DARK MODE PLW DESIGN//\r\n\t\tdisplay: \"flex\",\r\n\t\tjustifyContent: \"space-evenly\",\r\n\t\talignItems: \"center\",\r\n\t\theight: \"100%\",\r\n\t\ttextAlign: \"center\",\r\n\t},\r\n}));\r\n\r\nconst TicketsCustom = () => {\r\n\tconst classes = useStyles();\r\n\tconst { ticketId } = useParams();\r\n\r\n\treturn (\r\n\t\t<div className={classes.chatContainer}>\r\n\t\t\t<div className={classes.chatPapper}>\r\n\t\t\t\t<Grid container spacing={0}>\r\n\t\t\t\t\t<Grid item xs={4} className={classes.contactsWrapper}>\r\n\t\t\t\t\t\t<TicketsManager />\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item xs={8} className={classes.messagesWrapper}>\r\n\t\t\t\t\t\t{ticketId ? (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<Ticket />\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<Paper square variant=\"outlined\" className={classes.welcomeMsg}>\r\n\t\t\t\t\t\t\t{/* PLW DESIGN LOGO */}\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<center><img style={{ margin: \"0 auto\", width: \"70%\" }} src={logo} alt=\"logologin\" /></center>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t{/* PLW DESIGN LOGO */}\r\n\t\t\t\t\t\t\t{/*<span>{i18n.t(\"chat.noTicketMessage\")}</span>*/}\r\n\t\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default TicketsCustom;\r\n","import { styled } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\n\r\nconst TicketAdvancedLayout = styled(Paper)({\r\n    height: `calc(100% - 48px)`,\r\n    display: \"grid\",\r\n    gridTemplateRows: \"56px 1fr\"\r\n})\r\n\r\nexport default TicketAdvancedLayout;","import React, { useState, useEffect, useContext } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from '@material-ui/core/Button';\r\nimport Box from '@material-ui/core/Box';\r\nimport BottomNavigation from '@material-ui/core/BottomNavigation';\r\nimport BottomNavigationAction from '@material-ui/core/BottomNavigationAction';\r\nimport QuestionAnswerIcon from '@material-ui/icons/QuestionAnswer';\r\nimport ChatIcon from '@material-ui/icons/Chat';\r\n\r\nimport TicketsManagerTabs from \"../../components/TicketsManagerTabs/\";\r\nimport Ticket from \"../../components/Ticket/\";\r\nimport TicketAdvancedLayout from \"../../components/TicketAdvancedLayout\";\r\nimport logo from \"../../assets/logo.png\"; //PLW DESIGN LOGO//\r\nimport { TicketsContext } from \"../../context/Tickets/TicketsContext\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    header: {\r\n    },\r\n    content: {\r\n        overflow: \"auto\"\r\n    },\r\n    placeholderContainer: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n        height: \"100%\",\r\n\t\tbackgroundColor: theme.palette.boxticket, //DARK MODE PLW DESIGN//\r\n    },\r\n    placeholderItem: {\r\n    }\r\n}));\r\n\r\nconst TicketAdvanced = (props) => {\r\n\tconst classes = useStyles();\r\n\tconst { ticketId } = useParams();\r\n\tconst [option, setOption] = useState(0);\r\n    const { currentTicket, setCurrentTicket } = useContext(TicketsContext)\r\n\r\n    useEffect(() => {\r\n        if(currentTicket.id !== null) {\r\n            setCurrentTicket({ id: currentTicket.id, code: '#open' })\r\n        }\r\n        if (!ticketId) {\r\n            setOption(1)\r\n        }\r\n        return () => {\r\n            setCurrentTicket({ id: null, code: null })\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if (currentTicket.id !== null) {\r\n            setOption(0)\r\n        }\r\n    }, [currentTicket])\r\n\r\n\tconst renderPlaceholder = () => {\r\n\t\treturn <Box className={classes.placeholderContainer}>\r\n             {/*<div className={classes.placeholderItem}>{i18n.t(\"chat.noTicketMessage\")}</div>*/}\r\n\t\t\t//PLW DESIGN LOGO//\r\n\t\t\t<div>\r\n\t\t\t<center><img style={{ margin: \"0 auto\", width: \"70%\" }} src={logo} alt=\"logologin\" /></center>\r\n\t\t\t</div>\r\n\t\t\t//PLW DESIGN LOGO//\r\n\t\t\t<br />\r\n            <Button onClick={() => setOption(1)} variant=\"contained\" color=\"primary\">\r\n                Selecionar Ticket\r\n            </Button>\r\n        </Box>\r\n\t}\r\n\r\n\tconst renderMessageContext = () => {\r\n\t\tif (ticketId) {\r\n\t\t\treturn <Ticket />\r\n\t\t}\r\n\t\treturn renderPlaceholder()\r\n\t}\r\n\r\n\tconst renderTicketsManagerTabs = () => {\r\n\t\treturn <TicketsManagerTabs />\r\n\t}\r\n\r\n\treturn (\r\n        <TicketAdvancedLayout>\r\n            <Box className={classes.header}>\r\n                <BottomNavigation\r\n                    value={option}\r\n                    onChange={(event, newValue) => {\r\n                        setOption(newValue);\r\n                    }}\r\n                    showLabels\r\n                    className={classes.root}\r\n                >\r\n                    <BottomNavigationAction label=\"Ticket\" icon={<ChatIcon />} />\r\n                    <BottomNavigationAction label=\"Atendimentos\" icon={<QuestionAnswerIcon />} />\r\n                </BottomNavigation>\r\n            </Box>\r\n            <Box className={classes.content}>\r\n                { option === 0 ? renderMessageContext() : renderTicketsManagerTabs() }\r\n            </Box>\r\n        </TicketAdvancedLayout>\r\n\t);\r\n};\r\n\r\nexport default TicketAdvanced;\r\n","import React from \"react\";\r\nimport withWidth, { isWidthUp } from '@material-ui/core/withWidth';\r\n\r\nimport Tickets from \"../TicketsCustom\"\r\nimport TicketAdvanced from \"../TicketsAdvanced\";\r\n\r\nfunction TicketResponsiveContainer (props) {\r\n    if (isWidthUp('md', props.width)) {\r\n        return <Tickets />;    \r\n    }\r\n    return <TicketAdvanced />\r\n}\r\n\r\nexport default withWidth()(TicketResponsiveContainer);","import React from \"react\";\r\nimport { Form, Formik, useFormik } from \"formik\";\r\nimport * as Yup from \"yup\";\r\nimport {\r\n  Box,\r\n  Grid,\r\n  InputAdornment,\r\n  InputLabel,\r\n  TextField,\r\n} from \"@mui/material\";\r\nimport { CalendarToday } from \"@material-ui/icons\";\r\n\r\nconst paymentSchema = Yup.object({\r\n  cardNumber: Yup.string()\r\n    // .matches(/^[0-9]{16}$/, \"Invalid card number\")\r\n    .required(\"Card number is required\"),\r\n  // expiryDate: yup.string().required(\"Expiry date is required\"),\r\n  expiryDate: Yup.string()\r\n    .required(\"Expiry date is required\")\r\n    .test(\"valid-month\", \"Invalid month\", function (value) {\r\n      if (!value) {\r\n        return false;\r\n      }\r\n\r\n      const [month] = value.split(\"/\").map((item) => parseInt(item, 10));\r\n\r\n      return month >= 1 && month <= 12;\r\n    })\r\n    .test(\r\n      \"is-future-date\",\r\n      \"Expiry date must be in the future\",\r\n      function (value) {\r\n        if (!value) {\r\n          return false;\r\n        }\r\n\r\n        const currentDate = new Date();\r\n        const [month, year] = value\r\n          .split(\"/\")\r\n          .map((item) => parseInt(item, 10));\r\n\r\n        // Adding 1 to the month because JavaScript months are zero-indexed\r\n        const expiryDate = new Date(year + 2000, month, 1);\r\n\r\n        return expiryDate > currentDate;\r\n      }\r\n    ),\r\n  name: Yup.string().required(\"Name is required\"),\r\n  cvv: Yup.string()\r\n    .matches(/^[0-9]{3,4}$/, \"Invalid CVV\")\r\n    .required(\"CVV is required\"),\r\n});\r\n\r\nexport const PaymentForm = ({ onChange }) => {\r\n  const formatCardNumber = (value) => {\r\n    return value\r\n      .replace(/\\D/g, \"\")\r\n      .replace(/(.{4})/g, \"$1 \")\r\n      .trim();\r\n  };\r\n\r\n  const formatExpiryDate = (value) => {\r\n    // Remove non-numeric characters\r\n    const numericValue = value.replace(/\\D/g, \"\");\r\n\r\n    // Limit to four numeric characters\r\n    const formattedValue = numericValue.slice(0, 6);\r\n\r\n    // Add the '/' separator after the first two characters\r\n    if (formattedValue.length > 2) {\r\n      return formattedValue.slice(0, 2) + \" / \" + formattedValue.slice(2);\r\n    } else {\r\n      return formattedValue;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Formik\r\n      initialValues={{\r\n        name: \"\",\r\n        cardNumber: \"\",\r\n        expiryDate: \"\",\r\n        cvv: \"\",\r\n      }}\r\n      validationSchema={paymentSchema}\r\n    >\r\n      {({ touched, values, errors, handleChange }) => (\r\n        <Form onChange={() => onChange(values)}>\r\n          <Grid container rowSpacing={2} columnSpacing={2}>\r\n            <Grid item xs={12} sm={12}>\r\n              <Box>\r\n                <InputLabel>Nome no cartão de crédito</InputLabel>\r\n                <TextField\r\n                  fullWidth\r\n                  id=\"name\"\r\n                  name=\"name\"\r\n                  onChange={handleChange}\r\n                  value={values.name}\r\n                  error={touched.name && Boolean(errors.name)}\r\n                  helperText={touched.name && errors.name}\r\n                  placeholder=\"Antônio Oliveira\"\r\n                  required\r\n                />\r\n              </Box>\r\n            </Grid>\r\n            <Grid item xs={12} sm={12}>\r\n              <Box>\r\n                <InputLabel>Número do cartão de crédito</InputLabel>\r\n                <TextField\r\n                  fullWidth\r\n                  id=\"cardNumber\"\r\n                  name=\"cardNumber\"\r\n                  value={formatCardNumber(values.cardNumber)}\r\n                  onChange={(e) => {\r\n                    e.target.value = formatCardNumber(e.target.value);\r\n                    handleChange(e)\r\n                  }}\r\n                  error={touched.cardNumber && Boolean(errors.cardNumber)}\r\n                  helperText={touched.cardNumber && errors.cardNumber}\r\n                  sx={{\r\n                    \"& .MuiInputBase-root\": {\r\n                      paddingLeft: \"8px\",\r\n                    },\r\n                  }}\r\n                  inputProps={{ maxLength: 19 }}\r\n                  placeholder=\"0000 0000 0000 0000\"\r\n                  required\r\n                />\r\n              </Box>\r\n            </Grid>\r\n              <Grid item xs={12} sm={6}>\r\n                <InputLabel>Data de expiração</InputLabel>\r\n                <TextField\r\n                  variant=\"outlined\"\r\n                  fullWidth\r\n                  id=\"expiryDate\"\r\n                  name=\"expiryDate\"\r\n                  value={values.expiryDate}\r\n                  onChange={(e) => {\r\n                    e.target.value = formatExpiryDate(e.target.value);\r\n                    handleChange(e);\r\n                  }}\r\n                  error={touched.expiryDate && Boolean(errors.expiryDate)}\r\n                  helperText={touched.expiryDate && errors.expiryDate}\r\n                  InputProps={{\r\n                    endAdornment: (\r\n                      <InputAdornment position=\"end\">\r\n                        <CalendarToday\r\n                          sx={{ color: \"#ABABAB\", width: \"1rem\" }}\r\n                        />\r\n                      </InputAdornment>\r\n                    ),\r\n                  }}\r\n                  placeholder=\"MM/YYYY\"\r\n                  required\r\n                />\r\n              </Grid>\r\n              <Grid item xs={12} sm={6}>\r\n                <InputLabel>CVV</InputLabel>\r\n                <TextField\r\n                  variant=\"outlined\"\r\n                  fullWidth\r\n                  id=\"cvv\"\r\n                  name=\"cvv\"\r\n                  onChange={handleChange}\r\n                  value={values.cvv}\r\n                  error={touched.cvv && Boolean(errors.cvv)}\r\n                  helperText={touched.cvv && errors.cvv}\r\n                  inputProps={{ maxLength: 4 }}\r\n                  placeholder=\"123\"\r\n                  required\r\n                />\r\n              </Grid>\r\n          </Grid>\r\n        </Form>\r\n      )}\r\n    </Formik>\r\n  );\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\n\r\nimport * as Yup from \"yup\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Link as RouterLink } from \"react-router-dom\";\r\nimport { toast } from \"react-toastify\";\r\nimport { Formik, Form, Field } from \"formik\";\r\nimport usePlans from \"../../hooks/usePlans\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport InputMask from \"react-input-mask\";\r\nimport { InputLabel, MenuItem, Select } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport logo from \"../../assets/logo.png\";\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nimport api from \"../../services/api\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport moment from \"moment\";\r\nimport { PaymentForm } from \"../../components/PaymentForm\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  form: {\r\n    width: \"100%\",\r\n    marginTop: theme.spacing(3),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n}));\r\n\r\nconst PaymentSchema = Yup.object().shape({\r\n  name: Yup.string()\r\n    .min(2, \"Too Short!\")\r\n    .max(50, \"Too Long!\")\r\n    .required(\"Required\"),\r\n  password: Yup.string().min(5, \"Too Short!\").max(50, \"Too Long!\"),\r\n  email: Yup.string().email(\"Invalid email\").required(\"Required\"),\r\n  cpfCnpj: Yup.string()\r\n    .min(11, \"Too Short!\")\r\n    .max(14, \"Too Long!\")\r\n    .required(\"Required\"),\r\n});\r\n\r\nconst SignUp = () => {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const initialState = {\r\n    name: \"\",\r\n    email: \"\",\r\n    phone: \"\",\r\n    password: \"\",\r\n    planId: \"\",\r\n    cpfCnpj: \"\",\r\n    postalCode: \"\",\r\n  };\r\n\r\n  const [creditCard, setCreditCard] = useState({\r\n    name: \"\",\r\n    cardNumber: \"\",\r\n    expiryDate: \"\",\r\n    cvv: \"\",\r\n  });\r\n\r\n  const dueDate = moment().add(3, \"day\").format();\r\n\r\n  const handleSignUp = async (values) => {\r\n    setLoading(true);\r\n    Object.assign(values, { recurrence: \"MENSAL\" });\r\n    Object.assign(values, { dueDate: dueDate });\r\n    Object.assign(values, { status: \"t\" });\r\n    Object.assign(values, { campaignsEnabled: true });\r\n    Object.assign(values, { creditCard });\r\n\r\n    if (\r\n      !creditCard.cardNumber ||\r\n      !creditCard.name ||\r\n      !creditCard.cvv ||\r\n      !creditCard.expiryDate\r\n    ) {\r\n      toast.error(\"Preencha todos os dados do cartão de crédito.\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await api.post(\"/companies/cadastro\", values);\r\n      toast.success(i18n.t(\"signup.toasts.success\"));\r\n      history.push(\"/login\");\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n\r\n    setLoading(false);\r\n  };\r\n\r\n  const [plans, setPlans] = useState([]);\r\n  const { list: listPlans } = usePlans();\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      const list = await listPlans();\r\n      setPlans(list);\r\n    }\r\n    fetchData();\r\n  }, []);\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <CssBaseline />\r\n      <div className={classes.paper}>\r\n        <div>\r\n          <center>\r\n            <img\r\n              style={{ margin: \"0 auto\", width: \"70%\" }}\r\n              src={logo}\r\n              alt=\"Whats\"\r\n            />\r\n          </center>\r\n        </div>\r\n        <Formik\r\n          initialValues={initialState}\r\n          enableReinitialize={true}\r\n          validationSchema={PaymentSchema}\r\n          onSubmit={(values, actions) => {\r\n            setTimeout(() => {\r\n              handleSignUp(values);\r\n              actions.setSubmitting(false);\r\n            }, 400);\r\n          }}\r\n        >\r\n          {({ touched, errors, isSubmitting }) => (\r\n            <Form className={classes.form}>\r\n              <Grid container spacing={2}>\r\n                <Grid item xs={12}>\r\n                  <Field\r\n                    as={TextField}\r\n                    autoComplete=\"name\"\r\n                    name=\"name\"\r\n                    error={touched.name && Boolean(errors.name)}\r\n                    helperText={touched.name && errors.name}\r\n                    variant=\"outlined\"\r\n                    fullWidth\r\n                    id=\"name\"\r\n                    label=\"Nome da Empresa\"\r\n                    required\r\n                  />\r\n                </Grid>\r\n\r\n                <Grid item xs={12}>\r\n                  <Field\r\n                    as={TextField}\r\n                    variant=\"outlined\"\r\n                    fullWidth\r\n                    id=\"email\"\r\n                    label={i18n.t(\"signup.form.email\")}\r\n                    name=\"email\"\r\n                    error={touched.email && Boolean(errors.email)}\r\n                    helperText={touched.email && errors.email}\r\n                    autoComplete=\"email\"\r\n                    required\r\n                  />\r\n                </Grid>\r\n\r\n                <Grid item xs={12}>\r\n                  <Field\r\n                    as={InputMask}\r\n                    mask=\"(99) 99999-9999\"\r\n                    variant=\"outlined\"\r\n                    fullWidth\r\n                    id=\"phone\"\r\n                    name=\"phone\"\r\n                    error={touched.phone && Boolean(errors.phone)}\r\n                    helperText={touched.phone && errors.phone}\r\n                    autoComplete=\"phone\"\r\n                  >\r\n                    {({ field }) => (\r\n                      <TextField\r\n                        {...field}\r\n                        variant=\"outlined\"\r\n                        fullWidth\r\n                        label=\"Telefone com (DDD)\"\r\n                        inputProps={{ maxLength: 11 }} // Definindo o limite de caracteres\r\n                        required\r\n                      />\r\n                    )}\r\n                  </Field>\r\n                </Grid>\r\n                <Grid item xs={12}>\r\n                  <Field\r\n                    as={TextField}\r\n                    autoComplete=\"cpfCnpj\"\r\n                    name=\"cpfCnpj\"\r\n                    error={touched.cpfCnpj && Boolean(errors.cpfCnpj)}\r\n                    helperText={touched.cpfCnpj && errors.cpfCnpj}\r\n                    variant=\"outlined\"\r\n                    fullWidth\r\n                    id=\"cpfCnpj\"\r\n                    label=\"CPF/CNPJ\"\r\n                    required\r\n                  />\r\n                </Grid>\r\n\r\n                <Grid item xs={12}>\r\n                  <Field\r\n                    as={TextField}\r\n                    autoComplete=\"postalCode\"\r\n                    name=\"postalCode\"\r\n                    error={touched.postalCode && Boolean(errors.postalCode)}\r\n                    helperText={touched.postalCode && errors.postalCode}\r\n                    variant=\"outlined\"\r\n                    fullWidth\r\n                    id=\"postalCode\"\r\n                    label=\"CEP\"\r\n                    required\r\n                  />\r\n                </Grid>\r\n\r\n                <Grid item xs={12}>\r\n                  <Field\r\n                    as={TextField}\r\n                    variant=\"outlined\"\r\n                    fullWidth\r\n                    name=\"password\"\r\n                    error={touched.password && Boolean(errors.password)}\r\n                    helperText={touched.password && errors.password}\r\n                    label={i18n.t(\"signup.form.password\")}\r\n                    type=\"password\"\r\n                    id=\"password\"\r\n                    autoComplete=\"current-password\"\r\n                    required\r\n                  />\r\n                </Grid>\r\n                <Grid item xs={12}>\r\n                  <InputLabel htmlFor=\"plan-selection\">Plano</InputLabel>\r\n                  <Field\r\n                    as={Select}\r\n                    variant=\"outlined\"\r\n                    fullWidth\r\n                    id=\"plan-selection\"\r\n                    label=\"Plano\"\r\n                    name=\"planId\"\r\n                    required\r\n                  >\r\n                    {plans.map((plan, key) => (\r\n                      <MenuItem key={key} value={plan.id}>\r\n                        {plan.name} - Atendentes: {plan.users} - WhatsApp:{\" \"}\r\n                        {plan.connections} - Filas: {plan.queues} - R${\" \"}\r\n                        {plan.value}\r\n                      </MenuItem>\r\n                    ))}\r\n                  </Field>\r\n                </Grid>\r\n                <Grid item xs={12}>\r\n                  <PaymentForm onChange={setCreditCard} />\r\n                </Grid>\r\n              </Grid>\r\n              <Button\r\n                type=\"submit\"\r\n                fullWidth\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                className={classes.submit}\r\n                disabled={loading}\r\n                startIcon={loading ? <CircularProgress color=\"inherit\" size={20} /> : null}\r\n              >\r\n                {i18n.t(\"signup.buttons.submit\")}\r\n              </Button>\r\n              <Grid container justify=\"flex-end\">\r\n                <Grid item>\r\n                  <Link\r\n                    href=\"#\"\r\n                    variant=\"body2\"\r\n                    component={RouterLink}\r\n                    to=\"/login\"\r\n                  >\r\n                    {i18n.t(\"signup.buttons.login\")}\r\n                  </Link>\r\n                </Grid>\r\n              </Grid>\r\n            </Form>\r\n          )}\r\n        </Formik>\r\n      </div>\r\n      <Box mt={5}>{/* <Copyright /> */}</Box>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default SignUp;\r\n","import React, { useState, useContext } from \"react\";\r\nimport { Link as RouterLink } from \"react-router-dom\";\r\n\r\nimport Button from \"@material-ui/core/Button\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport Grid from \"@material-ui/core/Grid\"; \r\nimport Box from \"@material-ui/core/Box\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport { versionSystem } from \"../../../package.json\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport { nomeEmpresa } from \"../../../package.json\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport logo from \"../../assets/logo.png\";\r\n\r\n\r\nconst Copyright = () => {\r\n\treturn (\r\n\t\t<Typography variant=\"body2\" color=\"primary\" align=\"center\">\r\n\t\t\t{\"Copyright \"}\r\n \t\t\t<Link color=\"primary\" href=\"#\">\r\n \t\t\t\t{ nomeEmpresa } - v { versionSystem }\r\n \t\t\t</Link>{\" \"}\r\n \t\t\t{new Date().getFullYear()}\r\n \t\t\t{\".\"}\r\n \t\t</Typography>\r\n \t);\r\n };\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\troot: {\r\n\t\twidth: \"100vw\",\r\n\t\theight: \"100vh\",\r\n\t\t//background: \"linear-gradient(to right, #682EE3 , #682EE3 , #682EE3)\",\r\n\t\t//backgroundImage: \"url(https://i.imgur.com/CGby9tN.png)\",\r\n\t\tbackgroundColor: theme.palette.primary.main,\r\n\t\tbackgroundRepeat: \"no-repeat\",\r\n\t\tbackgroundSize: \"100% 100%\",\r\n\t\tbackgroundPosition: \"center\",\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\talignItems: \"center\",\r\n\t\tjustifyContent: \"center\",\r\n\t\ttextAlign: \"center\",\r\n\t},\r\n\tpaper: {\r\n\t\tbackgroundColor: theme.palette.login,\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\talignItems: \"center\",\r\n\t\tpadding: \"55px 30px\",\r\n\t\tborderRadius: \"12.5px\",\r\n\t},\r\n\tavatar: {\r\n\t\tmargin: theme.spacing(1),  \r\n\t\tbackgroundColor: theme.palette.secondary.main,\r\n\t},\r\n\tform: {\r\n\t\twidth: \"100%\", // Fix IE 11 issue.\r\n\t\tmarginTop: theme.spacing(1),\r\n\t},\r\n\tsubmit: {\r\n\t\tmargin: theme.spacing(3, 0, 2),\r\n\t},\r\n\tpowered: {\r\n\t\tcolor: \"white\"\r\n\t}\r\n}));\r\n\r\nconst Login = () => {\r\n\tconst classes = useStyles();\r\n\r\n\tconst [user, setUser] = useState({ email: \"\", password: \"\" });\r\n\r\n\tconst { handleLogin } = useContext(AuthContext);\r\n\r\n\tconst handleChangeInput = e => {\r\n\t\tsetUser({ ...user, [e.target.name]: e.target.value });\r\n\t};\r\n\r\n\tconst handlSubmit = e => {\r\n\t\te.preventDefault();\r\n\t\thandleLogin(user);\r\n\t};\r\n\r\n\t\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t<Container component=\"main\" maxWidth=\"xs\">\r\n\t\t\t<CssBaseline/>\r\n\t\t\t<div className={classes.paper}>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<img style={{ margin: \"0 auto\", width: \"70%\" }} src={logo} alt=\"Whats\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t{/*<Typography component=\"h1\" variant=\"h5\">\r\n\t\t\t\t\t{i18n.t(\"login.title\")}\r\n\t\t\t\t</Typography>*/}\r\n\t\t\t\t<form className={classes.form} noValidate onSubmit={handlSubmit}>\r\n\t\t\t\t\t<TextField\r\n\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\tmargin=\"normal\"\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\tid=\"email\"\r\n\t\t\t\t\t\tlabel={i18n.t(\"login.form.email\")}\r\n\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\tvalue={user.email}\r\n\t\t\t\t\t\tonChange={handleChangeInput}\r\n\t\t\t\t\t\tautoComplete=\"email\"\r\n\t\t\t\t\t\tautoFocus\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<TextField\r\n\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\tmargin=\"normal\"\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\tlabel={i18n.t(\"login.form.password\")}\r\n\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\tid=\"password\"\r\n\t\t\t\t\t\tvalue={user.password}\r\n\t\t\t\t\t\tonChange={handleChangeInput}\r\n\t\t\t\t\t\tautoComplete=\"current-password\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t\r\n\t\t\t\t\t{/* <Grid container justify=\"flex-end\">\r\n\t\t\t\t\t  <Grid item xs={6} style={{ textAlign: \"right\" }}>\r\n\t\t\t\t\t\t<Link component={RouterLink} to=\"/forgetpsw\" variant=\"body2\">\r\n\t\t\t\t\t\t  Esqueceu sua senha?\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t  </Grid>\r\n\t\t\t\t\t</Grid>*/}\r\n\t\t\t\t\t\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\tclassName={classes.submit}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{i18n.t(\"login.buttons.submit\")}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t{ <Grid container>\r\n\t\t\t\t\t\t<Grid item>\r\n\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\thref=\"#\"\r\n\t\t\t\t\t\t\t\tvariant=\"body2\"\r\n\t\t\t\t\t\t\t\tcomponent={RouterLink}\r\n\t\t\t\t\t\t\t\tto=\"/signup\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{i18n.t(\"login.buttons.register\")}\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</Grid> }\r\n\t\t\t\t</form>\r\n\t\t\t\r\n\t\t\t</div>\r\n\t\t\t<Box mt={8}><Copyright /></Box>\r\n\t\t</Container>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Login;\r\n","import React from \"react\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Container from \"@material-ui/core/Container\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tmainContainer: {\r\n\t\tflex: 1,\r\n\t\tpadding: theme.spacing(2),\r\n\t\theight: `calc(100% - 48px)`,\r\n\t},\r\n\r\n\tcontentWrapper: {\r\n\t\theight: \"100%\",\r\n\t\toverflowY: \"hidden\",\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t},\r\n}));\r\n\r\nconst MainContainer = ({ children }) => {\r\n\tconst classes = useStyles();\r\n\r\n\treturn (\r\n\t\t<Container className={classes.mainContainer}>\r\n\t\t\t<div className={classes.contentWrapper}>{children}</div>\r\n\t\t</Container>\r\n\t);\r\n};\r\n\r\nexport default MainContainer;\r\n","import React from \"react\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tcontactsHeader: {\r\n\t\tdisplay: \"flex\",\r\n\t\talignItems: \"center\",\r\n\t\tpadding: \"0px 6px 6px 6px\",\r\n\t},\r\n}));\r\n\r\nconst MainHeader = ({ children }) => {\r\n\tconst classes = useStyles();\r\n\r\n\treturn <div className={classes.contactsHeader}>{children}</div>;\r\n};\r\n\r\nexport default MainHeader;\r\n","import React from \"react\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tMainHeaderButtonsWrapper: {\r\n\t\tflex: \"none\",\r\n\t\tmarginLeft: \"auto\",\r\n\t\t\"& > *\": {\r\n\t\t\tmargin: theme.spacing(1),\r\n\t\t},\r\n\t},\r\n}));\r\n\r\nconst MainHeaderButtonsWrapper = ({ children }) => {\r\n\tconst classes = useStyles();\r\n\r\n\treturn <div className={classes.MainHeaderButtonsWrapper}>{children}</div>;\r\n};\r\n\r\nexport default MainHeaderButtonsWrapper;\r\n","import React from \"react\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nexport default function Title(props) {\r\n\treturn (\r\n\t\t<Typography variant=\"h5\" color=\"primary\" gutterBottom>\r\n\t\t\t{props.children}\r\n\t\t</Typography>\r\n\t);\r\n}\r\n","import React from \"react\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Skeleton from \"@material-ui/lab/Skeleton\";\r\nimport { makeStyles } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tcustomTableCell: {\r\n\t\tdisplay: \"flex\",\r\n\t\talignItems: \"center\",\r\n\t\tjustifyContent: \"center\",\r\n\t},\r\n}));\r\n\r\nconst TableRowSkeleton = ({ avatar, columns }) => {\r\n\tconst classes = useStyles();\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<TableRow>\r\n\t\t\t\t{avatar && (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<TableCell style={{ paddingRight: 0 }}>\r\n\t\t\t\t\t\t\t<Skeleton\r\n\t\t\t\t\t\t\t\tanimation=\"wave\"\r\n\t\t\t\t\t\t\t\tvariant=\"circle\"\r\n\t\t\t\t\t\t\t\twidth={40}\r\n\t\t\t\t\t\t\t\theight={40}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t\t<Skeleton animation=\"wave\" height={30} width={80} />\r\n\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t\t{Array.from({ length: columns }, (_, index) => (\r\n\t\t\t\t\t<TableCell align=\"center\" key={index}>\r\n\t\t\t\t\t\t<div className={classes.customTableCell}>\r\n\t\t\t\t\t\t\t<Skeleton\r\n\t\t\t\t\t\t\t\talign=\"center\"\r\n\t\t\t\t\t\t\t\tanimation=\"wave\"\r\n\t\t\t\t\t\t\t\theight={30}\r\n\t\t\t\t\t\t\t\twidth={80}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t))}\r\n\t\t\t</TableRow>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default TableRowSkeleton;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport * as Yup from \"yup\";\r\nimport { Formik, Form, Field } from \"formik\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { green } from \"@material-ui/core/colors\";\r\n\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogTitle,\r\n  Button,\r\n  DialogActions,\r\n  CircularProgress,\r\n  TextField,\r\n  Switch,\r\n  FormControlLabel,\r\n  Grid,\r\n  FormControl,\r\n  InputLabel,\r\n  Select,\r\n  MenuItem,\r\n} from \"@material-ui/core\";\r\n\r\nimport api from \"../../services/api\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport QueueSelect from \"../QueueSelect\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    flexWrap: \"wrap\",\r\n  },\r\n\r\n  multFieldLine: {\r\n    display: \"flex\",\r\n    \"& > *:not(:last-child)\": {\r\n      marginRight: theme.spacing(1),\r\n    },\r\n  },\r\n\r\n  btnWrapper: {\r\n    position: \"relative\",\r\n  },\r\n\r\n  buttonProgress: {\r\n    color: green[500],\r\n    position: \"absolute\",\r\n    top: \"50%\",\r\n    left: \"50%\",\r\n    marginTop: -12,\r\n    marginLeft: -12,\r\n  },\r\n}));\r\n\r\nconst SessionSchema = Yup.object().shape({\r\n  name: Yup.string()\r\n    .min(2, \"Too Short!\")\r\n    .max(50, \"Too Long!\")\r\n    .required(\"Required\"),\r\n});\r\n\r\nconst WhatsAppModal = ({ open, onClose, whatsAppId }) => {\r\n  const classes = useStyles();\r\n  const initialState = {\r\n    name: \"\",\r\n    greetingMessage: \"\",\r\n    complationMessage: \"\",\r\n    outOfHoursMessage: \"\",\r\n    ratingMessage: \"\",\r\n    isDefault: false,\r\n    token: \"\",\r\n    provider: \"beta\",\r\n    //timeSendQueue: 0,\r\n    //sendIdQueue: 0,\r\n    expiresInactiveMessage: \"\",\r\n    expiresTicket: 0,\r\n    timeUseBotQueues: 0,\r\n    maxUseBotQueues: 3\r\n  };\r\n  const [whatsApp, setWhatsApp] = useState(initialState);\r\n  const [selectedQueueIds, setSelectedQueueIds] = useState([]);\r\n  const [queues, setQueues] = useState([]);\r\n  const [selectedQueueId, setSelectedQueueId] = useState(null)\r\n  const [selectedPrompt, setSelectedPrompt] = useState(null);\r\n  const [prompts, setPrompts] = useState([]);\r\n  \r\n    useEffect(() => {\r\n    const fetchSession = async () => {\r\n      if (!whatsAppId) return;\r\n\r\n      try {\r\n        const { data } = await api.get(`whatsapp/${whatsAppId}?session=0`);\r\n        setWhatsApp(data);\r\n\r\n        const whatsQueueIds = data.queues?.map((queue) => queue.id);\r\n        setSelectedQueueIds(whatsQueueIds);\r\n\t\tsetSelectedQueueId(data.transferQueueId);\r\n      } catch (err) {\r\n        toastError(err);\r\n      }\r\n    };\r\n    fetchSession();\r\n  }, [whatsAppId]);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        const { data } = await api.get(\"/prompt\");\r\n        setPrompts(data.prompts);\r\n      } catch (err) {\r\n        toastError(err);\r\n      }\r\n    })();\r\n  }, [whatsAppId]);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        const { data } = await api.get(\"/queue\");\r\n        setQueues(data);\r\n      } catch (err) {\r\n        toastError(err);\r\n      }\r\n    })();\r\n  }, []);\r\n\r\n  const handleSaveWhatsApp = async (values) => {\r\nconst whatsappData = {\r\n      ...values, queueIds: selectedQueueIds, transferQueueId: selectedQueueId,\r\n      promptId: selectedPrompt ? selectedPrompt : null\r\n    };\r\n    delete whatsappData[\"queues\"];\r\n    delete whatsappData[\"session\"];\r\n\r\n    try {\r\n      if (whatsAppId) {\r\n        await api.put(`/whatsapp/${whatsAppId}`, whatsappData);\r\n      } else {\r\n        await api.post(\"/whatsapp\", whatsappData);\r\n      }\r\n      toast.success(i18n.t(\"whatsappModal.success\"));\r\n      handleClose();\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  };\r\n\r\n  const handleChangeQueue = (e) => {\r\n    setSelectedQueueIds(e);\r\n    setSelectedPrompt(null);\r\n  };\r\n\r\n  const handleChangePrompt = (e) => {\r\n    setSelectedPrompt(e.target.value);\r\n    setSelectedQueueIds([]);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    onClose();\r\n    setWhatsApp(initialState);\r\n\t  setSelectedQueueId(null);\r\n    setSelectedQueueIds([]);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleClose}\r\n        maxWidth=\"md\"\r\n        fullWidth\r\n        scroll=\"paper\"\r\n      >\r\n        <DialogTitle>\r\n          {whatsAppId\r\n            ? i18n.t(\"whatsappModal.title.edit\")\r\n            : i18n.t(\"whatsappModal.title.add\")}\r\n        </DialogTitle>\r\n        <Formik\r\n          initialValues={whatsApp}\r\n          enableReinitialize={true}\r\n          validationSchema={SessionSchema}\r\n          onSubmit={(values, actions) => {\r\n            setTimeout(() => {\r\n              handleSaveWhatsApp(values);\r\n              actions.setSubmitting(false);\r\n            }, 400);\r\n          }}\r\n        >\r\n          {({ values, touched, errors, isSubmitting }) => (\r\n            <Form>\r\n              <DialogContent dividers>\r\n                <div className={classes.multFieldLine}>\r\n                  <Grid spacing={2} container>\r\n                    <Grid item>\r\n                      <Field\r\n                        as={TextField}\r\n                        label={i18n.t(\"whatsappModal.form.name\")}\r\n                        autoFocus\r\n                        name=\"name\"\r\n                        error={touched.name && Boolean(errors.name)}\r\n                        helperText={touched.name && errors.name}\r\n                        variant=\"outlined\"\r\n                        margin=\"dense\"\r\n                        className={classes.textField}\r\n                      />\r\n                    </Grid>\r\n                    <Grid style={{ paddingTop: 15 }} item>\r\n                      <FormControlLabel\r\n                        control={\r\n                          <Field\r\n                            as={Switch}\r\n                            color=\"primary\"\r\n                            name=\"isDefault\"\r\n                            checked={values.isDefault}\r\n                          />\r\n                        }\r\n                        label={i18n.t(\"whatsappModal.form.default\")}\r\n                      />\r\n                    </Grid>\r\n                  </Grid>\r\n                </div>\r\n                <div>\r\n                  <Field\r\n                    as={TextField}\r\n                    label={i18n.t(\"queueModal.form.greetingMessage\")}\r\n                    type=\"greetingMessage\"\r\n                    multiline\r\n                    rows={4}\r\n                    fullWidth\r\n                    name=\"greetingMessage\"\r\n                    error={\r\n                      touched.greetingMessage && Boolean(errors.greetingMessage)\r\n                    }\r\n                    helperText={\r\n                      touched.greetingMessage && errors.greetingMessage\r\n                    }\r\n                    variant=\"outlined\"\r\n                    margin=\"dense\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <Field\r\n                    as={TextField}\r\n                    label={i18n.t(\"queueModal.form.complationMessage\")}\r\n                    type=\"complationMessage\"\r\n                    multiline\r\n                    rows={4}\r\n                    fullWidth\r\n                    name=\"complationMessage\"\r\n                    error={\r\n                      touched.complationMessage &&\r\n                      Boolean(errors.complationMessage)\r\n                    }\r\n                    helperText={\r\n                      touched.complationMessage && errors.complationMessage\r\n                    }\r\n                    variant=\"outlined\"\r\n                    margin=\"dense\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <Field\r\n                    as={TextField}\r\n                    label={i18n.t(\"queueModal.form.outOfHoursMessage\")}\r\n                    type=\"outOfHoursMessage\"\r\n                    multiline\r\n                    rows={4}\r\n                    fullWidth\r\n                    name=\"outOfHoursMessage\"\r\n                    error={\r\n                      touched.outOfHoursMessage &&\r\n                      Boolean(errors.outOfHoursMessage)\r\n                    }\r\n                    helperText={\r\n                      touched.outOfHoursMessage && errors.outOfHoursMessage\r\n                    }\r\n                    variant=\"outlined\"\r\n                    margin=\"dense\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <Field\r\n                    as={TextField}\r\n                    label={i18n.t(\"queueModal.form.ratingMessage\")}\r\n                    type=\"ratingMessage\"\r\n                    multiline\r\n                    rows={4}\r\n                    fullWidth\r\n                    name=\"ratingMessage\"\r\n                    error={\r\n                      touched.ratingMessage && Boolean(errors.ratingMessage)\r\n                    }\r\n                    helperText={touched.ratingMessage && errors.ratingMessage}\r\n                    variant=\"outlined\"\r\n                    margin=\"dense\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <Field\r\n                    as={TextField}\r\n                    label={i18n.t(\"queueModal.form.token\")}\r\n                    type=\"token\"\r\n                    fullWidth\r\n                    name=\"token\"\r\n                    variant=\"outlined\"\r\n                    margin=\"dense\"\r\n                  />\r\n                </div>\r\n                <QueueSelect\r\n                  selectedQueueIds={selectedQueueIds}\r\n                  onChange={(selectedIds) => handleChangeQueue(selectedIds)}\r\n                />\r\n                <FormControl\r\n                  margin=\"dense\"\r\n                  variant=\"outlined\"\r\n                  fullWidth\r\n                >\r\n                  <InputLabel>\r\n                    {i18n.t(\"whatsappModal.form.prompt\")}\r\n                  </InputLabel>\r\n                  <Select\r\n                    labelId=\"dialog-select-prompt-label\"\r\n                    id=\"dialog-select-prompt\"\r\n                    name=\"promptId\"\r\n                    value={selectedPrompt || \"\"}\r\n                    onChange={handleChangePrompt}\r\n                    label={i18n.t(\"whatsappModal.form.prompt\")}\r\n                    fullWidth\r\n                    MenuProps={{\r\n                      anchorOrigin: {\r\n                        vertical: \"bottom\",\r\n                        horizontal: \"left\",\r\n                      },\r\n                      transformOrigin: {\r\n                        vertical: \"top\",\r\n                        horizontal: \"left\",\r\n                      },\r\n                      getContentAnchorEl: null,\r\n                    }}\r\n                  >\r\n                    {prompts.map((prompt) => (\r\n                      <MenuItem\r\n                        key={prompt.id}\r\n                        value={prompt.id}\r\n                      >\r\n                        {prompt.name}\r\n                      </MenuItem>\r\n                    ))}\r\n                  </Select>\r\n                </FormControl>\r\n                <div>\r\n                  <h3>{i18n.t(\"whatsappModal.form.queueRedirection\")}</h3>\r\n                  <p>{i18n.t(\"whatsappModal.form.queueRedirectionDesc\")}</p>\r\n\t\t\t\t<Grid container spacing={2}>\r\n                  <Grid item sm={6} >\r\n                    <Field\r\n                      fullWidth\r\n                      type=\"number\"\r\n                      as={TextField}\r\n                      label='Transferir após x (minutos)'\r\n                      name=\"timeToTransfer\"\r\n                      error={touched.timeToTransfer && Boolean(errors.timeToTransfer)}\r\n                      helperText={touched.timeToTransfer && errors.timeToTransfer}\r\n                      variant=\"outlined\"\r\n                      margin=\"dense\"\r\n                      className={classes.textField}\r\n                      InputLabelProps={{ shrink: values.timeToTransfer ? true : false }}\r\n                    />\r\n\r\n                  </Grid>\r\n\r\n                  <Grid item sm={6}>\r\n                    <QueueSelect\r\n                      selectedQueueIds={selectedQueueId}\r\n                      onChange={(selectedId) => {\r\n                        setSelectedQueueId(selectedId)\r\n                      }}\r\n                      multiple={false}\r\n                      title={'Fila de Transferência'}\r\n                    />\r\n                  </Grid>\r\n\r\n                  </Grid>\r\n                  <Grid spacing={2} container>\r\n                    {/* ENCERRAR CHATS ABERTOS APÓS X HORAS */}\r\n                    <Grid xs={12} md={12} item>\r\n                      <Field\r\n                        as={TextField}\r\n                        label={i18n.t(\"whatsappModal.form.expiresTicket\")}\r\n                        fullWidth\r\n                        name=\"expiresTicket\"\r\n                        variant=\"outlined\"\r\n                        margin=\"dense\"\r\n                        error={touched.expiresTicket && Boolean(errors.expiresTicket)}\r\n                        helperText={touched.expiresTicket && errors.expiresTicket}\r\n                      />\r\n                    </Grid>\r\n                  </Grid>\r\n                  {/* MENSAGEM POR INATIVIDADE*/}\r\n                  <div>\r\n                    <Field\r\n                      as={TextField}\r\n                      label={i18n.t(\"whatsappModal.form.expiresInactiveMessage\")}\r\n                      multiline\r\n                      rows={4}\r\n                      fullWidth\r\n                      name=\"expiresInactiveMessage\"\r\n                      error={touched.expiresInactiveMessage && Boolean(errors.expiresInactiveMessage)}\r\n                      helperText={touched.expiresInactiveMessage && errors.expiresInactiveMessage}\r\n                      variant=\"outlined\"\r\n                      margin=\"dense\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </DialogContent>\r\n              <DialogActions>\r\n                <Button\r\n                  onClick={handleClose}\r\n                  color=\"secondary\"\r\n                  disabled={isSubmitting}\r\n                  variant=\"outlined\"\r\n                >\r\n                  {i18n.t(\"whatsappModal.buttons.cancel\")}\r\n                </Button>\r\n                <Button\r\n                  type=\"submit\"\r\n                  color=\"primary\"\r\n                  disabled={isSubmitting}\r\n                  variant=\"contained\"\r\n                  className={classes.btnWrapper}\r\n                >\r\n                  {whatsAppId\r\n                    ? i18n.t(\"whatsappModal.buttons.okEdit\")\r\n                    : i18n.t(\"whatsappModal.buttons.okAdd\")}\r\n                  {isSubmitting && (\r\n                    <CircularProgress\r\n                      size={24}\r\n                      className={classes.buttonProgress}\r\n                    />\r\n                  )}\r\n                </Button>\r\n              </DialogActions>\r\n            </Form>\r\n          )}\r\n        </Formik>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(WhatsAppModal);\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport QRCode from \"qrcode.react\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nimport { Dialog, DialogContent, Paper, Typography, useTheme } from \"@material-ui/core\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport api from \"../../services/api\";\r\nimport { SocketContext } from \"../../context/Socket/SocketContext\";\r\n\r\nconst QrcodeModal = ({ open, onClose, whatsAppId }) => {\r\n  const [qrCode, setQrCode] = useState(\"\");\r\n  const theme = useTheme();\r\n\r\n  const socketManager = useContext(SocketContext);\r\n\r\n  useEffect(() => {\r\n    const fetchSession = async () => {\r\n      if (!whatsAppId) return;\r\n\r\n      try {\r\n        const { data } = await api.get(`/whatsapp/${whatsAppId}`);\r\n        setQrCode(data.qrcode);\r\n      } catch (err) {\r\n        toastError(err);\r\n      }\r\n    };\r\n    fetchSession();\r\n  }, [whatsAppId]);\r\n\r\n  useEffect(() => {\r\n    if (!whatsAppId) return;\r\n    const companyId = localStorage.getItem(\"companyId\");\r\n    const socket = socketManager.getSocket(companyId);\r\n\r\n    socket.on(`company-${companyId}-whatsappSession`, (data) => {\r\n      if (data.action === \"update\" && data.session.id === whatsAppId) {\r\n        setQrCode(data.session.qrcode);\r\n      }\r\n\r\n      if (data.action === \"update\" && data.session.qrcode === \"\") {\r\n        onClose();\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, [whatsAppId, onClose, socketManager]);\r\n\r\n  return (\r\n    <Dialog open={open} onClose={onClose} maxWidth=\"lg\" scroll=\"paper\">\r\n      <DialogContent>\r\n        <Paper elevation={0} style={{ display: \"flex\", alignItems: \"center\" }}>\r\n          <div style={{ marginRight: \"20px\" }}>\r\n            <Typography variant=\"h2\" component=\"h2\" color=\"textPrimary\" gutterBottom style={{ fontFamily: \"Montserrat\", fontWeight: \"bold\", fontSize:\"20px\",}}>\r\n              Utilize o seu WhatsApp:\r\n            </Typography>\r\n            <Typography variant=\"body1\" color=\"textPrimary\" gutterBottom>\r\n              1 - Abra o WhatsApp no seu celular\r\n            </Typography>\r\n            <Typography variant=\"body1\" color=\"textPrimary\" gutterBottom>\r\n              2 - Toque em Mais opções no Android <svg class=\"MuiSvgIcon-root\" focusable=\"false\" viewBox=\"0 0 24 24\" aria-hidden=\"true\"><path d=\"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\"></path></svg> ou em Configurações <svg class=\"MuiSvgIcon-root\" focusable=\"false\" viewBox=\"0 0 24 24\" aria-hidden=\"true\"><path d=\"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z\"></path></svg> no iPhone\r\n            </Typography>\r\n            <Typography variant=\"body1\" color=\"textPrimary\" gutterBottom>\r\n              3 - Toque em Dispositivos conectados e, em seguida, em Conectar dispositivos\r\n            </Typography>\r\n            <Typography variant=\"body1\" color=\"textPrimary\" gutterBottom>\r\n              4 - Aponte seu celular para essa tela para capturar o QR Code\r\n            </Typography>\r\n          </div>\r\n          <div>\r\n            {qrCode ? (\r\n              <QRCode value={qrCode} size={256} />\r\n            ) : (\r\n              <span>Waiting for QR Code</span>\r\n            )}\r\n          </div>\r\n        </Paper>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default React.memo(QrcodeModal);\r\n","import React, { useState, useCallback, useContext } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\nimport { format, parseISO } from \"date-fns\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { green } from \"@material-ui/core/colors\";\r\nimport {\r\n\tButton,\r\n\tTableBody,\r\n\tTableRow,\r\n\tTableCell,\r\n\tIconButton,\r\n\tTable,\r\n\tTableHead,\r\n\tPaper,\r\n\tTooltip,\r\n\tTypography,\r\n\tCircularProgress,\r\n} from \"@material-ui/core\";\r\nimport {\r\n\tEdit,\r\n\tCheckCircle,\r\n\tSignalCellularConnectedNoInternet2Bar,\r\n\tSignalCellularConnectedNoInternet0Bar,\r\n\tSignalCellular4Bar,\r\n\tCropFree,\r\n\tDeleteOutline,\r\n} from \"@material-ui/icons\";\r\n\r\nimport MainContainer from \"../../components/MainContainer\";\r\nimport MainHeader from \"../../components/MainHeader\";\r\nimport MainHeaderButtonsWrapper from \"../../components/MainHeaderButtonsWrapper\";\r\nimport Title from \"../../components/Title\";\r\nimport TableRowSkeleton from \"../../components/TableRowSkeleton\";\r\n\r\nimport api from \"../../services/api\";\r\nimport WhatsAppModal from \"../../components/WhatsAppModal\";\r\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\r\nimport QrcodeModal from \"../../components/QrcodeModal\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport { WhatsAppsContext } from \"../../context/WhatsApp/WhatsAppsContext\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport { Can } from \"../../components/Can\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tmainPaper: {\r\n\t\tflex: 1,\r\n\t\tpadding: theme.spacing(1),\r\n\t\toverflowY: \"scroll\",\r\n\t\t...theme.scrollbarStyles,\r\n\t},\r\n\tcustomTableCell: {\r\n\t\tdisplay: \"flex\",\r\n\t\talignItems: \"center\",\r\n\t\tjustifyContent: \"center\",\r\n\t},\r\n\ttooltip: {\r\n\t\tbackgroundColor: \"#f5f5f9\",\r\n\t\tcolor: \"rgba(0, 0, 0, 0.87)\",\r\n\t\tfontSize: theme.typography.pxToRem(14),\r\n\t\tborder: \"1px solid #dadde9\",\r\n\t\tmaxWidth: 450,\r\n\t},\r\n\ttooltipPopper: {\r\n\t\ttextAlign: \"center\",\r\n\t},\r\n\tbuttonProgress: {\r\n\t\tcolor: green[500],\r\n\t},\r\n}));\r\n\r\nconst CustomToolTip = ({ title, content, children }) => {\r\n\tconst classes = useStyles();\r\n\r\n\treturn (\r\n\t\t<Tooltip\r\n\t\t\tarrow\r\n\t\t\tclasses={{\r\n\t\t\t\ttooltip: classes.tooltip,\r\n\t\t\t\tpopper: classes.tooltipPopper,\r\n\t\t\t}}\r\n\t\t\ttitle={\r\n\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t<Typography gutterBottom color=\"inherit\">\r\n\t\t\t\t\t\t{title}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t\t{content && <Typography>{content}</Typography>}\r\n\t\t\t\t</React.Fragment>\r\n\t\t\t}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</Tooltip>\r\n\t);\r\n};\r\n\r\nconst Connections = () => {\r\n\tconst classes = useStyles();\r\n\r\n\tconst { user } = useContext(AuthContext);\r\n\tconst { whatsApps, loading } = useContext(WhatsAppsContext);\r\n\tconst [whatsAppModalOpen, setWhatsAppModalOpen] = useState(false);\r\n\tconst [qrModalOpen, setQrModalOpen] = useState(false);\r\n\tconst [selectedWhatsApp, setSelectedWhatsApp] = useState(null);\r\n\tconst [confirmModalOpen, setConfirmModalOpen] = useState(false);\r\n\tconst confirmationModalInitialState = {\r\n\t\taction: \"\",\r\n\t\ttitle: \"\",\r\n\t\tmessage: \"\",\r\n\t\twhatsAppId: \"\",\r\n\t\topen: false,\r\n\t};\r\n\tconst [confirmModalInfo, setConfirmModalInfo] = useState(\r\n\t\tconfirmationModalInitialState\r\n\t);\r\n\r\n\tconst handleStartWhatsAppSession = async whatsAppId => {\r\n\t\ttry {\r\n\t\t\tawait api.post(`/whatsappsession/${whatsAppId}`);\r\n\t\t} catch (err) {\r\n\t\t\ttoastError(err);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleRequestNewQrCode = async whatsAppId => {\r\n\t\ttry {\r\n\t\t\tawait api.put(`/whatsappsession/${whatsAppId}`);\r\n\t\t} catch (err) {\r\n\t\t\ttoastError(err);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleOpenWhatsAppModal = () => {\r\n\t\tsetSelectedWhatsApp(null);\r\n\t\tsetWhatsAppModalOpen(true);\r\n\t};\r\n\r\n\tconst handleCloseWhatsAppModal = useCallback(() => {\r\n\t\tsetWhatsAppModalOpen(false);\r\n\t\tsetSelectedWhatsApp(null);\r\n\t}, [setSelectedWhatsApp, setWhatsAppModalOpen]);\r\n\r\n\tconst handleOpenQrModal = whatsApp => {\r\n\t\tsetSelectedWhatsApp(whatsApp);\r\n\t\tsetQrModalOpen(true);\r\n\t};\r\n\r\n\tconst handleCloseQrModal = useCallback(() => {\r\n\t\tsetSelectedWhatsApp(null);\r\n\t\tsetQrModalOpen(false);\r\n\t}, [setQrModalOpen, setSelectedWhatsApp]);\r\n\r\n\tconst handleEditWhatsApp = whatsApp => {\r\n\t\tsetSelectedWhatsApp(whatsApp);\r\n\t\tsetWhatsAppModalOpen(true);\r\n\t};\r\n\r\n\tconst handleOpenConfirmationModal = (action, whatsAppId) => {\r\n\t\tif (action === \"disconnect\") {\r\n\t\t\tsetConfirmModalInfo({\r\n\t\t\t\taction: action,\r\n\t\t\t\ttitle: i18n.t(\"connections.confirmationModal.disconnectTitle\"),\r\n\t\t\t\tmessage: i18n.t(\"connections.confirmationModal.disconnectMessage\"),\r\n\t\t\t\twhatsAppId: whatsAppId,\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (action === \"delete\") {\r\n\t\t\tsetConfirmModalInfo({\r\n\t\t\t\taction: action,\r\n\t\t\t\ttitle: i18n.t(\"connections.confirmationModal.deleteTitle\"),\r\n\t\t\t\tmessage: i18n.t(\"connections.confirmationModal.deleteMessage\"),\r\n\t\t\t\twhatsAppId: whatsAppId,\r\n\t\t\t});\r\n\t\t}\r\n\t\tsetConfirmModalOpen(true);\r\n\t};\r\n\r\n\tconst handleSubmitConfirmationModal = async () => {\r\n\t\tif (confirmModalInfo.action === \"disconnect\") {\r\n\t\t\ttry {\r\n\t\t\t\tawait api.delete(`/whatsappsession/${confirmModalInfo.whatsAppId}`);\r\n\t\t\t} catch (err) {\r\n\t\t\t\ttoastError(err);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (confirmModalInfo.action === \"delete\") {\r\n\t\t\ttry {\r\n\t\t\t\tawait api.delete(`/whatsapp/${confirmModalInfo.whatsAppId}`);\r\n\t\t\t\ttoast.success(i18n.t(\"connections.toasts.deleted\"));\r\n\t\t\t} catch (err) {\r\n\t\t\t\ttoastError(err);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tsetConfirmModalInfo(confirmationModalInitialState);\r\n\t};\r\n\r\n\tconst renderActionButtons = whatsApp => {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t{whatsApp.status === \"qrcode\" && (\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\tonClick={() => handleOpenQrModal(whatsApp)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{i18n.t(\"connections.buttons.qrcode\")}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t)}\r\n\t\t\t\t{whatsApp.status === \"DISCONNECTED\" && (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\tonClick={() => handleStartWhatsAppSession(whatsApp.id)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{i18n.t(\"connections.buttons.tryAgain\")}\r\n\t\t\t\t\t\t</Button>{\" \"}\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\tonClick={() => handleRequestNewQrCode(whatsApp.id)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{i18n.t(\"connections.buttons.newQr\")}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t\t{(whatsApp.status === \"CONNECTED\" ||\r\n\t\t\t\t\twhatsApp.status === \"PAIRING\" ||\r\n\t\t\t\t\twhatsApp.status === \"TIMEOUT\") && (\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\thandleOpenConfirmationModal(\"disconnect\", whatsApp.id);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{i18n.t(\"connections.buttons.disconnect\")}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t)}\r\n\t\t\t\t{whatsApp.status === \"OPENING\" && (\r\n\t\t\t\t\t<Button size=\"small\" variant=\"outlined\" disabled color=\"default\">\r\n\t\t\t\t\t\t{i18n.t(\"connections.buttons.connecting\")}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t)}\r\n\t\t\t</>\r\n\t\t);\r\n\t};\r\n\r\n\tconst renderStatusToolTips = whatsApp => {\r\n\t\treturn (\r\n\t\t\t<div className={classes.customTableCell}>\r\n\t\t\t\t{whatsApp.status === \"DISCONNECTED\" && (\r\n\t\t\t\t\t<CustomToolTip\r\n\t\t\t\t\t\ttitle={i18n.t(\"connections.toolTips.disconnected.title\")}\r\n\t\t\t\t\t\tcontent={i18n.t(\"connections.toolTips.disconnected.content\")}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<SignalCellularConnectedNoInternet0Bar color=\"secondary\" />\r\n\t\t\t\t\t</CustomToolTip>\r\n\t\t\t\t)}\r\n\t\t\t\t{whatsApp.status === \"OPENING\" && (\r\n\t\t\t\t\t<CircularProgress size={24} className={classes.buttonProgress} />\r\n\t\t\t\t)}\r\n\t\t\t\t{whatsApp.status === \"qrcode\" && (\r\n\t\t\t\t\t<CustomToolTip\r\n\t\t\t\t\t\ttitle={i18n.t(\"connections.toolTips.qrcode.title\")}\r\n\t\t\t\t\t\tcontent={i18n.t(\"connections.toolTips.qrcode.content\")}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<CropFree />\r\n\t\t\t\t\t</CustomToolTip>\r\n\t\t\t\t)}\r\n\t\t\t\t{whatsApp.status === \"CONNECTED\" && (\r\n\t\t\t\t\t<CustomToolTip title={i18n.t(\"connections.toolTips.connected.title\")}>\r\n\t\t\t\t\t\t<SignalCellular4Bar style={{ color: green[500] }} />\r\n\t\t\t\t\t</CustomToolTip>\r\n\t\t\t\t)}\r\n\t\t\t\t{(whatsApp.status === \"TIMEOUT\" || whatsApp.status === \"PAIRING\") && (\r\n\t\t\t\t\t<CustomToolTip\r\n\t\t\t\t\t\ttitle={i18n.t(\"connections.toolTips.timeout.title\")}\r\n\t\t\t\t\t\tcontent={i18n.t(\"connections.toolTips.timeout.content\")}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<SignalCellularConnectedNoInternet2Bar color=\"secondary\" />\r\n\t\t\t\t\t</CustomToolTip>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<MainContainer>\r\n\t\t\t<ConfirmationModal\r\n\t\t\t\ttitle={confirmModalInfo.title}\r\n\t\t\t\topen={confirmModalOpen}\r\n\t\t\t\tonClose={setConfirmModalOpen}\r\n\t\t\t\tonConfirm={handleSubmitConfirmationModal}\r\n\t\t\t>\r\n\t\t\t\t{confirmModalInfo.message}\r\n\t\t\t</ConfirmationModal>\r\n\t\t\t<QrcodeModal\r\n\t\t\t\topen={qrModalOpen}\r\n\t\t\t\tonClose={handleCloseQrModal}\r\n\t\t\t\twhatsAppId={!whatsAppModalOpen && selectedWhatsApp?.id}\r\n\t\t\t/>\r\n\t\t\t<WhatsAppModal\r\n\t\t\t\topen={whatsAppModalOpen}\r\n\t\t\t\tonClose={handleCloseWhatsAppModal}\r\n\t\t\t\twhatsAppId={!qrModalOpen && selectedWhatsApp?.id}\r\n\t\t\t/>\r\n\t\t\t<MainHeader>\r\n\t\t\t\t<Title>{i18n.t(\"connections.title\")}</Title>\r\n\t\t\t\t<MainHeaderButtonsWrapper>\r\n\t\t\t\t\t<Can\r\n\t\t\t\t\t\trole={user.profile}\r\n\t\t\t\t\t\tperform=\"connections-page:addConnection\"\r\n\t\t\t\t\t\tyes={() => (\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\tonClick={handleOpenWhatsAppModal}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{i18n.t(\"connections.buttons.add\")}\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</MainHeaderButtonsWrapper>\r\n\t\t\t</MainHeader>\r\n\t\t\t<Paper className={classes.mainPaper} variant=\"outlined\">\r\n\t\t\t\t<Table size=\"small\">\r\n\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t{i18n.t(\"connections.table.name\")}\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t{i18n.t(\"connections.table.status\")}\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t<Can\r\n\t\t\t\t\t\t\t\trole={user.profile}\r\n\t\t\t\t\t\t\t\tperform=\"connections-page:actionButtons\"\r\n\t\t\t\t\t\t\t\tyes={() => (\r\n\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t\t{i18n.t(\"connections.table.session\")}\r\n\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t{i18n.t(\"connections.table.lastUpdate\")}\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t{i18n.t(\"connections.table.default\")}\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t<Can\r\n\t\t\t\t\t\t\t\trole={user.profile}\r\n\t\t\t\t\t\t\t\tperform=\"connections-page:editOrDeleteConnection\"\r\n\t\t\t\t\t\t\t\tyes={() => (\r\n\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t\t{i18n.t(\"connections.table.actions\")}\r\n\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t{loading ? (\r\n\t\t\t\t\t\t\t<TableRowSkeleton />\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t{whatsApps?.length > 0 &&\r\n\t\t\t\t\t\t\t\t\twhatsApps.map(whatsApp => (\r\n\t\t\t\t\t\t\t\t\t\t<TableRow key={whatsApp.id}>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">{whatsApp.name}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{renderStatusToolTips(whatsApp)}\r\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t<Can\r\n\t\t\t\t\t\t\t\t\t\t\t\trole={user.profile}\r\n\t\t\t\t\t\t\t\t\t\t\t\tperform=\"connections-page:actionButtons\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tyes={() => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{renderActionButtons(whatsApp)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{format(parseISO(whatsApp.updatedAt), \"dd/MM/yy HH:mm\")}\r\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{whatsApp.isDefault && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className={classes.customTableCell}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CheckCircle style={{ color: green[500] }} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t<Can\r\n\t\t\t\t\t\t\t\t\t\t\t\trole={user.profile}\r\n\t\t\t\t\t\t\t\t\t\t\t\tperform=\"connections-page:editOrDeleteConnection\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tyes={() => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleEditWhatsApp(whatsApp)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Edit />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={e => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleOpenConfirmationModal(\"delete\", whatsApp.id);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<DeleteOutline />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</TableBody>\r\n\t\t\t\t</Table>\r\n\t\t\t</Paper>\r\n\t\t</MainContainer>\r\n\t);\r\n};\r\n\r\nexport default Connections;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { makeStyles, TextField, Grid, Container } from \"@material-ui/core\";\r\nimport { Formik, Form, FastField, FieldArray } from \"formik\";\r\nimport { isArray } from \"lodash\";\r\nimport NumberFormat from \"react-number-format\";\r\nimport ButtonWithSpinner from \"../ButtonWithSpinner\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  fullWidth: {\r\n    width: \"100%\",\r\n  },\r\n  textfield: {\r\n    width: \"100%\",\r\n  },\r\n  row: {\r\n    paddingTop: theme.spacing(2),\r\n    paddingBottom: theme.spacing(2),\r\n  },\r\n  control: {\r\n    paddingRight: theme.spacing(1),\r\n    paddingLeft: theme.spacing(1),\r\n  },\r\n  buttonContainer: {\r\n    textAlign: \"right\",\r\n    padding: theme.spacing(1),\r\n  },\r\n}));\r\n\r\nfunction SchedulesForm(props) {\r\n  const { initialValues, onSubmit, loading, labelSaveButton } = props;\r\n  const classes = useStyles();\r\n\r\n  const [schedules, setSchedules] = useState([\r\n    { weekday: \"Segunda-feira\", weekdayEn: \"monday\", startTime: \"\", endTime: \"\", },\r\n    { weekday: \"Terça-feira\", weekdayEn: \"tuesday\", startTime: \"\", endTime: \"\", },\r\n    { weekday: \"Quarta-feira\", weekdayEn: \"wednesday\", startTime: \"\", endTime: \"\", },\r\n    { weekday: \"Quinta-feira\", weekdayEn: \"thursday\", startTime: \"\", endTime: \"\", },\r\n    { weekday: \"Sexta-feira\", weekdayEn: \"friday\", startTime: \"\", endTime: \"\" },\r\n    { weekday: \"Sábado\", weekdayEn: \"saturday\", startTime: \"\", endTime: \"\" },\r\n    { weekday: \"Domingo\", weekdayEn: \"sunday\", startTime: \"\", endTime: \"\" },\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    if (isArray(initialValues) && initialValues.length > 0) {\r\n      setSchedules(initialValues);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [initialValues]);\r\n\r\n  const handleSubmit = (data) => {\r\n    onSubmit(data);\r\n  };\r\n\r\n  return (\r\n    <Formik\r\n      enableReinitialize\r\n      className={classes.fullWidth}\r\n      initialValues={{ schedules }}\r\n      onSubmit={({ schedules }) =>\r\n        setTimeout(() => {\r\n          handleSubmit(schedules);\r\n        }, 500)\r\n      }\r\n    >\r\n      {({ values }) => (\r\n        <Form className={classes.fullWidth}>\r\n          <FieldArray\r\n            name=\"schedules\"\r\n            render={(arrayHelpers) => (\r\n              <Grid spacing={4} container>\r\n                {values.schedules.map((item, index) => {\r\n                  return (\r\n                      <Container>\r\n                          <FastField\r\n                            as={TextField}\r\n                            label=\"Dia da Semana\"\r\n                            name={`schedules[${index}].weekday`}\r\n                            disabled\r\n                            variant=\"outlined\"\r\n                            style={{ marginRight: \"3.2%\", width: \"30%\" }}\r\n                            margin=\"dense\"\r\n                          />\r\n                          <FastField\r\n                            name={`schedules[${index}].startTime`}\r\n                            >\r\n                            {({ field }) => (\r\n                              <NumberFormat\r\n                                label=\"Hora de Inicial\"\r\n                                {...field}\r\n                                variant=\"outlined\"\r\n                                margin=\"dense\"\r\n                                customInput={TextField}\r\n                                format=\"##:##\"\r\n                                style={{ marginRight: \"3.2%\", width: \"30%\" }}\r\n                              />\r\n                            )}\r\n                          </FastField>\r\n                          <FastField\r\n                            name={`schedules[${index}].endTime`}\r\n                            >\r\n                            {({ field }) => (\r\n                              <NumberFormat\r\n                                label=\"Hora de Final\"\r\n                                {...field}\r\n                                variant=\"outlined\"\r\n                                margin=\"dense\"\r\n                                customInput={TextField}\r\n                                format=\"##:##\"\r\n                                style={{ marginRight: \"3.2%\", width: \"30%\" }}\r\n                              />\r\n                            )}\r\n                          </FastField>\r\n\r\n                      </Container>\r\n\r\n                  );\r\n                })}\r\n              </Grid>\r\n            )}\r\n          ></FieldArray>\r\n          <div style={{ textAlign: \"center\", marginTop: \"2%\" }} className={classes.buttonContainer}>\r\n            <ButtonWithSpinner\r\n              loading={loading}\r\n              type=\"submit\"\r\n              color=\"primary\"\r\n              variant=\"contained\"\r\n            >\r\n              {labelSaveButton ?? \"Salvar\"}\r\n            </ButtonWithSpinner>\r\n          </div>\r\n        </Form>\r\n      )}\r\n    </Formik>\r\n  );\r\n}\r\n\r\nexport default SchedulesForm;\r\n","import api from \"../../services/api\";\r\n\r\nconst useCompanies = () => {\r\n\r\n    const save = async (data) => {\r\n        const { data: responseData } = await api.request({\r\n            url: '/companies',\r\n            method: 'POST',\r\n            data\r\n        });\r\n        return responseData;\r\n    }\r\n\r\n    const findAll = async (id) => {\r\n        const { data } = await api.request({\r\n            url: `/companies`,\r\n            method: 'GET'\r\n        });\r\n        return data;\r\n    }\r\n\r\n    const list = async (id) => {\r\n        const { data } = await api.request({\r\n            url: `/companies/list`,\r\n            method: 'GET'\r\n        });\r\n        return data;\r\n    }\r\n\r\n    const find = async (id) => {\r\n        const { data } = await api.request({\r\n            url: `/companies/${id}`,\r\n            method: 'GET'\r\n        });\r\n        return data;\r\n    }\r\n\r\n    const finding = async (id) => {\r\n        const { data } = await api.request({\r\n            url: `/companies/${id}`,\r\n            method: 'GET'\r\n        });\r\n        return data;\r\n    }\r\n\r\n\r\n    const update = async (data) => {\r\n        const { data: responseData } = await api.request({\r\n            url: `/companies/${data.id}`,\r\n            method: 'PUT',\r\n            data\r\n        });\r\n        return responseData;\r\n    }\r\n\r\n    const remove = async (id) => {\r\n        const { data } = await api.request({\r\n            url: `/companies/${id}`,\r\n            method: 'DELETE'\r\n        });\r\n        return data;\r\n    }\r\n\r\n    const updateSchedules = async (data) => {\r\n        const { data: responseData } = await api.request({\r\n            url: `/companies/${data.id}/schedules`,\r\n            method: 'PUT',\r\n            data\r\n        });\r\n        return responseData;\r\n    }\r\n\r\n    return {\r\n        save,\r\n        update,\r\n        remove,\r\n        list,\r\n        find,\r\n        finding,\r\n        findAll,\r\n        updateSchedules\r\n    }\r\n}\r\n\r\nexport default useCompanies;","import React, { useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport Chip from \"@material-ui/core/Chip\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport api from \"../../services/api\";\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tchips: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexWrap: \"wrap\",\r\n\t},\r\n\tchip: {\r\n\t\tmargin: 2,\r\n\t},\r\n}));\r\n\r\nconst QueueSelectCustom = ({ selectedQueueIds, companyId, onChange }) => {\r\n\tconst classes = useStyles();\r\n\tconst [queues, setQueues] = useState([]);\r\n\r\n\tuseEffect(() => {\r\n\t\t(async () => {\r\n\t\t\ttry {\r\n\t\t\t\tconst { data } = await api.get(\"/queue\", {\r\n\t\t\t\t\tparams: { companyId }\r\n\t\t\t\t});\r\n\t\t\t\tsetQueues(data);\r\n\t\t\t} catch (err) {\r\n\t\t\t\ttoastError(err);\r\n\t\t\t}\r\n\t\t})();\r\n\t}, [companyId]);\r\n\r\n\tconst handleChange = e => {\r\n\t\tonChange(e.target.value);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div style={{ marginTop: 6 }}>\r\n\t\t\t<FormControl fullWidth margin=\"dense\" variant=\"outlined\">\r\n\t\t\t\t<InputLabel>{i18n.t(\"queueSelect.inputLabel\")}</InputLabel>\r\n\t\t\t\t<Select\r\n\t\t\t\t\tmultiple\r\n\t\t\t\t\tlabelWidth={60}\r\n\t\t\t\t\tvalue={selectedQueueIds}\r\n\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\tMenuProps={{\r\n\t\t\t\t\t\tanchorOrigin: {\r\n\t\t\t\t\t\t\tvertical: \"bottom\",\r\n\t\t\t\t\t\t\thorizontal: \"left\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\ttransformOrigin: {\r\n\t\t\t\t\t\t\tvertical: \"top\",\r\n\t\t\t\t\t\t\thorizontal: \"left\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tgetContentAnchorEl: null,\r\n\t\t\t\t\t}}\r\n\t\t\t\t\trenderValue={selected => (\r\n\t\t\t\t\t\t<div className={classes.chips}>\r\n\t\t\t\t\t\t\t{selected?.length > 0 &&\r\n\t\t\t\t\t\t\t\tselected.map(id => {\r\n\t\t\t\t\t\t\t\t\tconst queue = queues.find(q => q.id === id);\r\n\t\t\t\t\t\t\t\t\treturn queue ? (\r\n\t\t\t\t\t\t\t\t\t\t<Chip\r\n\t\t\t\t\t\t\t\t\t\t\tkey={id}\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ backgroundColor: queue.color }}\r\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\t\tlabel={queue.name}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.chip}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t) : null;\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t>\r\n\t\t\t\t\t{queues.map(queue => (\r\n\t\t\t\t\t\t<MenuItem key={queue.id} value={queue.id}>\r\n\t\t\t\t\t\t\t{queue.name}\r\n\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</Select>\r\n\t\t\t</FormControl>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default QueueSelectCustom;\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\n\r\nimport * as Yup from \"yup\";\r\nimport { Formik, Form, Field } from \"formik\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { green } from \"@material-ui/core/colors\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nimport api from \"../../services/api\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport QueueSelectCustom from \"../QueueSelectCustom\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport { Can } from \"../Can\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    flexWrap: \"wrap\",\r\n  },\r\n  multFieldLine: {\r\n    display: \"flex\",\r\n    \"& > *:not(:last-child)\": {\r\n      marginRight: theme.spacing(1),\r\n    },\r\n  },\r\n\r\n  btnWrapper: {\r\n    position: \"relative\",\r\n  },\r\n\r\n  buttonProgress: {\r\n    color: green[500],\r\n    position: \"absolute\",\r\n    top: \"50%\",\r\n    left: \"50%\",\r\n    marginTop: -12,\r\n    marginLeft: -12,\r\n  },\r\n  formControl: {\r\n    margin: theme.spacing(1),\r\n    minWidth: 120,\r\n  },\r\n}));\r\n\r\nconst UserSchema = Yup.object().shape({\r\n  name: Yup.string()\r\n    .min(2, \"Too Short!\")\r\n    .max(50, \"Too Long!\")\r\n    .required(\"Required\"),\r\n  password: Yup.string().min(5, \"Too Short!\").max(50, \"Too Long!\"),\r\n  email: Yup.string().email(\"Invalid email\").required(\"Required\"),\r\n});\r\n\r\nconst ModalUsers = ({ open, onClose, userId, companyId }) => {\r\n  const classes = useStyles();\r\n\r\n  const initialState = {\r\n    name: \"\",\r\n    email: \"\",\r\n    password: \"\",\r\n    profile: \"user\",\r\n  };\r\n\r\n  const { user: loggedInUser } = useContext(AuthContext);\r\n\r\n  const [user, setUser] = useState(initialState);\r\n  const [selectedQueueIds, setSelectedQueueIds] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const fetchUser = async () => {\r\n      if (!userId) return;\r\n      if (open) {\r\n        try {\r\n          const { data } = await api.get(`/users/${userId}`);\r\n          setUser((prevState) => {\r\n            return { ...prevState, ...data };\r\n          });\r\n          const userQueueIds = data.queues?.map((queue) => queue.id);\r\n          setSelectedQueueIds(userQueueIds);\r\n        } catch (err) {\r\n          toastError(err);\r\n        }\r\n      }\r\n    };\r\n\r\n    fetchUser();\r\n  }, [userId, open]);\r\n\r\n  const handleClose = () => {\r\n    onClose();\r\n    setUser(initialState);\r\n  };\r\n\r\n  const handleSaveUser = async (values) => {\r\n    const userData = { ...values, companyId, queueIds: selectedQueueIds };\r\n    try {\r\n      if (userId) {\r\n        await api.put(`/users/${userId}`, userData);\r\n      } else {\r\n        await api.post(\"/users\", userData);\r\n      }\r\n      toast.success(i18n.t(\"userModal.success\"));\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n    handleClose();\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleClose}\r\n        maxWidth=\"xs\"\r\n        fullWidth\r\n        scroll=\"paper\"\r\n      >\r\n        <DialogTitle id=\"form-dialog-title\">\r\n          {userId\r\n            ? `${i18n.t(\"userModal.title.edit\")}`\r\n            : `${i18n.t(\"userModal.title.add\")}`}\r\n        </DialogTitle>\r\n        <Formik\r\n          initialValues={user}\r\n          enableReinitialize={true}\r\n          validationSchema={UserSchema}\r\n          onSubmit={(values, actions) => {\r\n            setTimeout(() => {\r\n              handleSaveUser(values);\r\n              actions.setSubmitting(false);\r\n            }, 400);\r\n          }}\r\n        >\r\n          {({ touched, errors, isSubmitting }) => (\r\n            <Form>\r\n              <DialogContent dividers>\r\n                <div className={classes.multFieldLine}>\r\n                  <Field\r\n                    as={TextField}\r\n                    label={i18n.t(\"userModal.form.name\")}\r\n                    autoFocus\r\n                    name=\"name\"\r\n                    error={touched.name && Boolean(errors.name)}\r\n                    helperText={touched.name && errors.name}\r\n                    variant=\"outlined\"\r\n                    margin=\"dense\"\r\n                    fullWidth\r\n                  />\r\n                  <Field\r\n                    as={TextField}\r\n                    label={i18n.t(\"userModal.form.password\")}\r\n                    type=\"password\"\r\n                    name=\"password\"\r\n                    error={touched.password && Boolean(errors.password)}\r\n                    helperText={touched.password && errors.password}\r\n                    variant=\"outlined\"\r\n                    margin=\"dense\"\r\n                    fullWidth\r\n                  />\r\n                </div>\r\n                <div className={classes.multFieldLine}>\r\n                  <Field\r\n                    as={TextField}\r\n                    label={i18n.t(\"userModal.form.email\")}\r\n                    name=\"email\"\r\n                    error={touched.email && Boolean(errors.email)}\r\n                    helperText={touched.email && errors.email}\r\n                    variant=\"outlined\"\r\n                    margin=\"dense\"\r\n                    fullWidth\r\n                  />\r\n                  <FormControl\r\n                    variant=\"outlined\"\r\n                    className={classes.formControl}\r\n                    margin=\"dense\"\r\n                  >\r\n                    <Can\r\n                      role={loggedInUser.profile}\r\n                      perform=\"user-modal:editProfile\"\r\n                      yes={() => (\r\n                        <>\r\n                          <InputLabel id=\"profile-selection-input-label\">\r\n                            {i18n.t(\"userModal.form.profile\")}\r\n                          </InputLabel>\r\n\r\n                          <Field\r\n                            as={Select}\r\n                            label={i18n.t(\"userModal.form.profile\")}\r\n                            name=\"profile\"\r\n                            labelId=\"profile-selection-label\"\r\n                            id=\"profile-selection\"\r\n                            required\r\n                          >\r\n                            <MenuItem value=\"admin\">Admin</MenuItem>\r\n                            <MenuItem value=\"user\">User</MenuItem>\r\n                          </Field>\r\n                        </>\r\n                      )}\r\n                    />\r\n                  </FormControl>\r\n                </div>\r\n                <Can\r\n                  role={loggedInUser.profile}\r\n                  perform=\"user-modal:editQueues\"\r\n                  yes={() => (\r\n                    <QueueSelectCustom\r\n                      companyId={companyId}\r\n                      selectedQueueIds={selectedQueueIds}\r\n                      onChange={(values) => setSelectedQueueIds(values)}\r\n                    />\r\n                  )}\r\n                />\r\n              </DialogContent>\r\n              <DialogActions>\r\n                <Button\r\n                  onClick={handleClose}\r\n                  color=\"secondary\"\r\n                  disabled={isSubmitting}\r\n                  variant=\"outlined\"\r\n                >\r\n                  {i18n.t(\"userModal.buttons.cancel\")}\r\n                </Button>\r\n                <Button\r\n                  type=\"submit\"\r\n                  color=\"primary\"\r\n                  disabled={isSubmitting}\r\n                  variant=\"contained\"\r\n                  className={classes.btnWrapper}\r\n                >\r\n                  {userId\r\n                    ? `${i18n.t(\"userModal.buttons.okEdit\")}`\r\n                    : `${i18n.t(\"userModal.buttons.okAdd\")}`}\r\n                  {isSubmitting && (\r\n                    <CircularProgress\r\n                      size={24}\r\n                      className={classes.buttonProgress}\r\n                    />\r\n                  )}\r\n                </Button>\r\n              </DialogActions>\r\n            </Form>\r\n          )}\r\n        </Formik>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ModalUsers;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  makeStyles,\r\n  Paper,\r\n  Grid,\r\n  FormControl,\r\n  InputLabel,\r\n  MenuItem,\r\n  TextField,\r\n  Table,\r\n  TableHead,\r\n  TableBody,\r\n  TableCell,\r\n  TableRow,\r\n  IconButton,\r\n  Select,\r\n} from \"@material-ui/core\";\r\nimport { Formik, Form, Field } from \"formik\";\r\nimport ButtonWithSpinner from \"../ButtonWithSpinner\";\r\nimport ConfirmationModal from \"../ConfirmationModal\";\r\n\r\nimport { Edit as EditIcon } from \"@material-ui/icons\";\r\n\r\nimport { toast } from \"react-toastify\";\r\nimport useCompanies from \"../../hooks/useCompanies\";\r\nimport usePlans from \"../../hooks/usePlans\";\r\nimport ModalUsers from \"../ModalUsers\";\r\nimport api from \"../../services/api\";\r\nimport { head, isArray, has } from \"lodash\";\r\nimport { useDate } from \"../../hooks/useDate\";\r\n\r\nimport moment from \"moment\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  mainPaper: {\r\n    width: \"100%\",\r\n    flex: 1,\r\n    padding: theme.spacing(2),\r\n  },\r\n  fullWidth: {\r\n    width: \"100%\",\r\n  },\r\n  tableContainer: {\r\n    width: \"100%\",\r\n    overflowX: \"scroll\",\r\n    ...theme.scrollbarStyles,\r\n  },\r\n  textfield: {\r\n    width: \"100%\",\r\n  },\r\n  textRight: {\r\n    textAlign: \"right\",\r\n  },\r\n  row: {\r\n    paddingTop: theme.spacing(2),\r\n    paddingBottom: theme.spacing(2),\r\n  },\r\n  control: {\r\n    paddingRight: theme.spacing(1),\r\n    paddingLeft: theme.spacing(1),\r\n  },\r\n  buttonContainer: {\r\n    textAlign: \"right\",\r\n    padding: theme.spacing(1),\r\n  },\r\n}));\r\n\r\nexport function CompanyForm(props) {\r\n  const { onSubmit, onDelete, onCancel, initialValue, loading } = props;\r\n  const classes = useStyles();\r\n  const [plans, setPlans] = useState([]);\r\n  const [modalUser, setModalUser] = useState(false);\r\n  const [firstUser, setFirstUser] = useState({});\r\n\r\n  const [record, setRecord] = useState({\r\n    name: \"\",\r\n    email: \"\",\r\n    phone: \"\",\r\n    planId: \"\",\r\n    status: true,\r\n    campaignsEnabled: false,\r\n    dueDate: \"\",\r\n    recurrence: \"\",\r\n    ...initialValue,\r\n  });\r\n\r\n  const { list: listPlans } = usePlans();\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      const list = await listPlans();\r\n      setPlans(list);\r\n    }\r\n    fetchData();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setRecord((prev) => {\r\n      if (moment(initialValue).isValid()) {\r\n        initialValue.dueDate = moment(initialValue.dueDate).format(\r\n          \"YYYY-MM-DD\"\r\n        );\r\n      }\r\n      return {\r\n        ...prev,\r\n        ...initialValue,\r\n      };\r\n    });\r\n  }, [initialValue]);\r\n\r\n  const handleSubmit = async (data) => {\r\n    if (data.dueDate === \"\" || moment(data.dueDate).isValid() === false) {\r\n      data.dueDate = null;\r\n    }\r\n    onSubmit(data);\r\n    setRecord({ ...initialValue, dueDate: \"\" });\r\n  };\r\n\r\n  const handleOpenModalUsers = async () => {\r\n    try {\r\n      const { data } = await api.get(\"/users/list\", {\r\n        params: {\r\n          companyId: initialValue.id,\r\n        },\r\n      });\r\n      if (isArray(data) && data.length) {\r\n        setFirstUser(head(data));\r\n      }\r\n      setModalUser(true);\r\n    } catch (e) {\r\n      toast.error(e);\r\n    }\r\n  };\r\n\r\n  const handleCloseModalUsers = () => {\r\n    setFirstUser({});\r\n    setModalUser(false);\r\n  };\r\n\r\n  const incrementDueDate = () => {\r\n    const data = { ...record };\r\n    if (data.dueDate !== \"\" && data.dueDate !== null) {\r\n      switch (data.recurrence) {\r\n        case \"MENSAL\":\r\n          data.dueDate = moment(data.dueDate)\r\n            .add(1, \"month\")\r\n            .format(\"YYYY-MM-DD\");\r\n          break;\r\n        case \"BIMESTRAL\":\r\n          data.dueDate = moment(data.dueDate)\r\n            .add(2, \"month\")\r\n            .format(\"YYYY-MM-DD\");\r\n          break;\r\n        case \"TRIMESTRAL\":\r\n          data.dueDate = moment(data.dueDate)\r\n            .add(3, \"month\")\r\n            .format(\"YYYY-MM-DD\");\r\n          break;\r\n        case \"SEMESTRAL\":\r\n          data.dueDate = moment(data.dueDate)\r\n            .add(6, \"month\")\r\n            .format(\"YYYY-MM-DD\");\r\n          break;\r\n        case \"ANUAL\":\r\n          data.dueDate = moment(data.dueDate)\r\n            .add(12, \"month\")\r\n            .format(\"YYYY-MM-DD\");\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    }\r\n    setRecord(data);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <ModalUsers\r\n        userId={firstUser.id}\r\n        companyId={initialValue.id}\r\n        open={modalUser}\r\n        onClose={handleCloseModalUsers}\r\n      />\r\n      <Formik\r\n        enableReinitialize\r\n        className={classes.fullWidth}\r\n        initialValues={record}\r\n        onSubmit={(values, { resetForm }) =>\r\n          setTimeout(() => {\r\n            handleSubmit(values);\r\n            resetForm();\r\n          }, 500)\r\n        }\r\n      >\r\n        {(values, setValues) => (\r\n          <Form className={classes.fullWidth}>\r\n            <Grid spacing={2} justifyContent=\"flex-end\" container>\r\n              <Grid xs={12} sm={6} md={4} item>\r\n                <Field\r\n                  as={TextField}\r\n                  label=\"Nome\"\r\n                  name=\"name\"\r\n                  variant=\"outlined\"\r\n                  className={classes.fullWidth}\r\n                  margin=\"dense\"\r\n                />\r\n              </Grid>\r\n              <Grid xs={12} sm={6} md={2} item>\r\n                <Field\r\n                  as={TextField}\r\n                  label=\"E-mail\"\r\n                  name=\"email\"\r\n                  variant=\"outlined\"\r\n                  className={classes.fullWidth}\r\n                  margin=\"dense\"\r\n                  required\r\n                />\r\n              </Grid>\r\n              <Grid xs={12} sm={6} md={2} item>\r\n                <Field\r\n                  as={TextField}\r\n                  label=\"Telefone\"\r\n                  name=\"phone\"\r\n                  variant=\"outlined\"\r\n                  className={classes.fullWidth}\r\n                  margin=\"dense\"\r\n                />\r\n              </Grid>\r\n              <Grid xs={12} sm={6} md={2} item>\r\n                <FormControl margin=\"dense\" variant=\"outlined\" fullWidth>\r\n                  <InputLabel htmlFor=\"plan-selection\">Plano</InputLabel>\r\n                  <Field\r\n                    as={Select}\r\n                    id=\"plan-selection\"\r\n                    label=\"Plano\"\r\n                    labelId=\"plan-selection-label\"\r\n                    name=\"planId\"\r\n                    margin=\"dense\"\r\n                    required\r\n                  >\r\n                    {plans.map((plan, key) => (\r\n                      <MenuItem key={key} value={plan.id}>\r\n                        {plan.name}\r\n                      </MenuItem>\r\n                    ))}\r\n                  </Field>\r\n                </FormControl>\r\n              </Grid>\r\n              <Grid xs={12} sm={6} md={2} item>\r\n                <FormControl margin=\"dense\" variant=\"outlined\" fullWidth>\r\n                  <InputLabel htmlFor=\"status-selection\">Status</InputLabel>\r\n                  <Field\r\n                    as={Select}\r\n                    id=\"status-selection\"\r\n                    label=\"Status\"\r\n                    labelId=\"status-selection-label\"\r\n                    name=\"status\"\r\n                    margin=\"dense\"\r\n                  >\r\n                    <MenuItem value={true}>Sim</MenuItem>\r\n                    <MenuItem value={false}>Não</MenuItem>\r\n                  </Field>\r\n                </FormControl>\r\n              </Grid>\r\n              <Grid xs={12} sm={6} md={2} item>\r\n                <FormControl margin=\"dense\" variant=\"outlined\" fullWidth>\r\n                  <InputLabel htmlFor=\"status-selection\">Campanhas</InputLabel>\r\n                  <Field\r\n                    as={Select}\r\n                    id=\"campaigns-selection\"\r\n                    label=\"Campanhas\"\r\n                    labelId=\"campaigns-selection-label\"\r\n                    name=\"campaignsEnabled\"\r\n                    margin=\"dense\"\r\n                  >\r\n                    <MenuItem value={true}>Habilitadas</MenuItem>\r\n                    <MenuItem value={false}>Desabilitadas</MenuItem>\r\n                  </Field>\r\n                </FormControl>\r\n              </Grid>\r\n              <Grid xs={12} sm={6} md={2} item>\r\n                <FormControl variant=\"outlined\" fullWidth>\r\n                  <Field\r\n                    as={TextField}\r\n                    label=\"Data de Vencimento\"\r\n                    type=\"date\"\r\n                    name=\"dueDate\"\r\n                    InputLabelProps={{\r\n                      shrink: true,\r\n                    }}\r\n                    variant=\"outlined\"\r\n                    fullWidth\r\n                    margin=\"dense\"\r\n                  />\r\n                </FormControl>\r\n              </Grid>\r\n              <Grid xs={12} sm={6} md={2} item>\r\n                <FormControl margin=\"dense\" variant=\"outlined\" fullWidth>\r\n                  <InputLabel htmlFor=\"recorrencia-selection\">\r\n                    Recorrência\r\n                  </InputLabel>\r\n                  <Field\r\n                    as={Select}\r\n                    label=\"Recorrência\"\r\n                    labelId=\"recorrencia-selection-label\"\r\n                    id=\"recurrence\"\r\n                    name=\"recurrence\"\r\n                    margin=\"dense\"\r\n                  >\r\n                    <MenuItem value=\"MENSAL\">Mensal</MenuItem>\r\n                    {/*<MenuItem value=\"BIMESTRAL\">Bimestral</MenuItem>*/}\r\n                    {/*<MenuItem value=\"TRIMESTRAL\">Trimestral</MenuItem>*/}\r\n                    {/*<MenuItem value=\"SEMESTRAL\">Semestral</MenuItem>*/}\r\n                    {/*<MenuItem value=\"ANUAL\">Anual</MenuItem>*/}\r\n                  </Field>\r\n                </FormControl>\r\n              </Grid>\r\n              <Grid xs={12} item>\r\n                <Grid justifyContent=\"flex-end\" spacing={1} container>\r\n                  <Grid xs={4} md={1} item>\r\n                    <ButtonWithSpinner\r\n                      className={classes.fullWidth}\r\n                      style={{ marginTop: 7 }}\r\n                      loading={loading}\r\n                      onClick={() => onCancel()}\r\n                      variant=\"contained\"\r\n                    >\r\n                      Limpar\r\n                    </ButtonWithSpinner>\r\n                  </Grid>\r\n                  {record.id !== undefined ? (\r\n                    <>\r\n                      <Grid xs={6} md={1} item>\r\n                        <ButtonWithSpinner\r\n                          style={{ marginTop: 7 }}\r\n                          className={classes.fullWidth}\r\n                          loading={loading}\r\n                          onClick={() => onDelete(record)}\r\n                          variant=\"contained\"\r\n                          color=\"secondary\"\r\n                        >\r\n                          Excluir\r\n                        </ButtonWithSpinner>\r\n                      </Grid>\r\n                      <Grid xs={6} md={2} item>\r\n                        <ButtonWithSpinner\r\n                          style={{ marginTop: 7 }}\r\n                          className={classes.fullWidth}\r\n                          loading={loading}\r\n                          onClick={() => incrementDueDate()}\r\n                          variant=\"contained\"\r\n                          color=\"primary\"\r\n                        >\r\n                          + Vencimento\r\n                        </ButtonWithSpinner>\r\n                      </Grid>\r\n                      <Grid xs={6} md={1} item>\r\n                        <ButtonWithSpinner\r\n                          style={{ marginTop: 7 }}\r\n                          className={classes.fullWidth}\r\n                          loading={loading}\r\n                          onClick={() => handleOpenModalUsers()}\r\n                          variant=\"contained\"\r\n                          color=\"primary\"\r\n                        >\r\n                          Usuário\r\n                        </ButtonWithSpinner>\r\n                      </Grid>\r\n                    </>\r\n                  ) : null}\r\n                  <Grid xs={6} md={1} item>\r\n                    <ButtonWithSpinner\r\n                      className={classes.fullWidth}\r\n                      style={{ marginTop: 7 }}\r\n                      loading={loading}\r\n                      type=\"submit\"\r\n                      variant=\"contained\"\r\n                      color=\"primary\"\r\n                    >\r\n                      Salvar\r\n                    </ButtonWithSpinner>\r\n                  </Grid>\r\n                </Grid>\r\n              </Grid>\r\n            </Grid>\r\n          </Form>\r\n        )}\r\n      </Formik>\r\n    </>\r\n  );\r\n}\r\n\r\nexport function CompaniesManagerGrid(props) {\r\n  const { records, onSelect } = props;\r\n  const classes = useStyles();\r\n  const { dateToClient } = useDate();\r\n\r\n  const renderStatus = (row) => {\r\n    return row.status === false ? \"Não\" : \"Sim\";\r\n  };\r\n\r\n  const renderPlan = (row) => {\r\n    return row.planId !== null ? row.plan.name : \"-\";\r\n  };\r\n\r\n  const renderCampaignsStatus = (row) => {\r\n    if (\r\n      has(row, \"settings\") &&\r\n      isArray(row.settings) &&\r\n      row.settings.length > 0\r\n    ) {\r\n      const setting = row.settings.find((s) => s.key === \"campaignsEnabled\");\r\n      if (setting) {\r\n        return setting.value === \"true\" ? \"Habilitadas\" : \"Desabilitadas\";\r\n      }\r\n    }\r\n    return \"Desabilitadas\";\r\n  };\r\n\r\n  const rowStyle = (record) => {\r\n    if (moment(record.dueDate).isValid()) {\r\n      const now = moment();\r\n      const dueDate = moment(record.dueDate);\r\n      const diff = dueDate.diff(now, \"days\");\r\n      if (diff === 5) {\r\n        return { backgroundColor: \"#fffead\" };\r\n      }\r\n      if (diff >= -3 && diff <= 4) {\r\n        return { backgroundColor: \"#f7cc8f\" };\r\n      }\r\n      if (diff === -4) {\r\n        return { backgroundColor: \"#fa8c8c\" };\r\n      }\r\n    }\r\n    return {};\r\n  };\r\n\r\n  return (\r\n    <Paper className={classes.tableContainer}>\r\n      <Table\r\n        className={classes.fullWidth}\r\n        size=\"small\"\r\n        aria-label=\"a dense table\"\r\n      >\r\n        <TableHead>\r\n          <TableRow>\r\n            <TableCell align=\"center\" style={{ width: \"1%\" }}>\r\n              #\r\n            </TableCell>\r\n            <TableCell align=\"left\">Nome</TableCell>\r\n            <TableCell align=\"left\">E-mail</TableCell>\r\n            <TableCell align=\"left\">Telefone</TableCell>\r\n            <TableCell align=\"left\">Plano</TableCell>\r\n            <TableCell align=\"left\">Campanhas</TableCell>\r\n            <TableCell align=\"left\">Status</TableCell>\r\n            <TableCell align=\"left\">Criada Em</TableCell>\r\n            <TableCell align=\"left\">Vencimento</TableCell>\r\n          </TableRow>\r\n        </TableHead>\r\n        <TableBody>\r\n          {records.map((row, key) => (\r\n            <TableRow style={rowStyle(row)} key={key}>\r\n              <TableCell align=\"center\" style={{ width: \"1%\" }}>\r\n                <IconButton onClick={() => onSelect(row)} aria-label=\"delete\">\r\n                  <EditIcon />\r\n                </IconButton>\r\n              </TableCell>\r\n              <TableCell align=\"left\">{row.name || \"-\"}</TableCell>\r\n              <TableCell align=\"left\">{row.email || \"-\"}</TableCell>\r\n              <TableCell align=\"left\">{row.phone || \"-\"}</TableCell>\r\n              <TableCell align=\"left\">{renderPlan(row)}</TableCell>\r\n              <TableCell align=\"left\">{renderCampaignsStatus(row)}</TableCell>\r\n              <TableCell align=\"left\">{renderStatus(row)}</TableCell>\r\n              <TableCell align=\"left\">{dateToClient(row.createdAt)}</TableCell>\r\n              <TableCell align=\"left\">\r\n                {dateToClient(row.dueDate)}\r\n                <br />\r\n                <span>{row.recurrence}</span>\r\n              </TableCell>\r\n            </TableRow>\r\n          ))}\r\n        </TableBody>\r\n      </Table>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nexport default function CompaniesManager() {\r\n  const classes = useStyles();\r\n  const { list, save, update, remove } = useCompanies();\r\n\r\n  const [showConfirmDialog, setShowConfirmDialog] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [records, setRecords] = useState([]);\r\n  const [record, setRecord] = useState({\r\n    name: \"\",\r\n    email: \"\",\r\n    phone: \"\",\r\n    planId: \"\",\r\n    status: true,\r\n    campaignsEnabled: false,\r\n    dueDate: \"\",\r\n    recurrence: \"\",\r\n  });\r\n\r\n  useEffect(() => {\r\n    loadPlans();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  const loadPlans = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const companyList = await list();\r\n      setRecords(companyList);\r\n    } catch (e) {\r\n      toast.error(\"Não foi possível carregar a lista de registros\");\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  const handleSubmit = async (data) => {\r\n    setLoading(true);\r\n    try {\r\n      if (data.id !== undefined) {\r\n        await update(data);\r\n      } else {\r\n        await save(data);\r\n      }\r\n      await loadPlans();\r\n      handleCancel();\r\n      toast.success(\"Operação realizada com sucesso!\");\r\n    } catch (e) {\r\n      toast.error(\r\n        \"Não foi possível realizar a operação. Verifique se já existe uma empresa com o mesmo nome ou se os campos foram preenchidos corretamente\"\r\n      );\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    setLoading(true);\r\n    try {\r\n      await remove(record.id);\r\n      await loadPlans();\r\n      handleCancel();\r\n      toast.success(\"Operação realizada com sucesso!\");\r\n    } catch (e) {\r\n      toast.error(\"Não foi possível realizar a operação\");\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  const handleOpenDeleteDialog = () => {\r\n    setShowConfirmDialog(true);\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setRecord((prev) => ({\r\n      ...prev,\r\n      name: \"\",\r\n      email: \"\",\r\n      phone: \"\",\r\n      planId: \"\",\r\n      status: true,\r\n      campaignsEnabled: false,\r\n      dueDate: \"\",\r\n      recurrence: \"\",\r\n    }));\r\n  };\r\n\r\n  const handleSelect = (data) => {\r\n    let campaignsEnabled = false;\r\n\r\n    const setting = data.settings.find(\r\n      (s) => s.key.indexOf(\"campaignsEnabled\") > -1\r\n    );\r\n    if (setting) {\r\n      campaignsEnabled =\r\n        setting.value === \"true\" || setting.value === \"enabled\";\r\n    }\r\n\r\n    setRecord((prev) => ({\r\n      ...prev,\r\n      id: data.id,\r\n      name: data.name || \"\",\r\n      phone: data.phone || \"\",\r\n      email: data.email || \"\",\r\n      planId: data.planId || \"\",\r\n      status: data.status === false ? false : true,\r\n      campaignsEnabled,\r\n      dueDate: data.dueDate || \"\",\r\n      recurrence: data.recurrence || \"\",\r\n    }));\r\n  };\r\n\r\n  return (\r\n    <Paper className={classes.mainPaper} elevation={0}>\r\n      <Grid spacing={2} container>\r\n        <Grid xs={12} item>\r\n          <CompanyForm\r\n            initialValue={record}\r\n            onDelete={handleOpenDeleteDialog}\r\n            onSubmit={handleSubmit}\r\n            onCancel={handleCancel}\r\n            loading={loading}\r\n          />\r\n        </Grid>\r\n        <Grid xs={12} item>\r\n          <CompaniesManagerGrid records={records} onSelect={handleSelect} />\r\n        </Grid>\r\n      </Grid>\r\n      <ConfirmationModal\r\n        title=\"Exclusão de Registro\"\r\n        open={showConfirmDialog}\r\n        onClose={() => setShowConfirmDialog(false)}\r\n        onConfirm={() => handleDelete()}\r\n      >\r\n        Deseja realmente excluir esse registro?\r\n      </ConfirmationModal>\r\n    </Paper>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport {\r\n    makeStyles,\r\n    Paper,\r\n    Grid,\r\n    TextField,\r\n    Table,\r\n    TableHead,\r\n    TableBody,\r\n    TableCell,\r\n    TableRow,\r\n    IconButton,\r\n    FormControl,\r\n    InputLabel,\r\n    MenuItem,\r\n    Select\r\n} from \"@material-ui/core\";\r\nimport { Formik, Form, Field } from 'formik';\r\nimport ButtonWithSpinner from \"../ButtonWithSpinner\";\r\nimport ConfirmationModal from \"../ConfirmationModal\";\r\n\r\nimport { Edit as EditIcon } from \"@material-ui/icons\";\r\n\r\nimport { toast } from \"react-toastify\";\r\nimport usePlans from \"../../hooks/usePlans\";\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        width: '100%'\r\n    },\r\n    mainPaper: {\r\n        width: '100%',\r\n        flex: 1,\r\n        padding: theme.spacing(2)\r\n    },\r\n    fullWidth: {\r\n        width: '100%'\r\n    },\r\n    tableContainer: {\r\n        width: '100%',\r\n        overflowX: \"scroll\",\r\n        ...theme.scrollbarStyles\r\n    },\r\n    textfield: {\r\n        width: '100%'\r\n    },\r\n    textRight: {\r\n        textAlign: 'right'\r\n    },\r\n    row: {\r\n        paddingTop: theme.spacing(2),\r\n        paddingBottom: theme.spacing(2)\r\n    },\r\n    control: {\r\n        paddingRight: theme.spacing(1),\r\n        paddingLeft: theme.spacing(1)\r\n    },\r\n    buttonContainer: {\r\n        textAlign: 'right',\r\n        padding: theme.spacing(1)\r\n    }\r\n}));\r\n\r\nexport function PlanManagerForm(props) {\r\n    const { onSubmit, onDelete, onCancel, initialValue, loading } = props;\r\n    const classes = useStyles()\r\n\r\n    const [record, setRecord] = useState({\r\n        name: '',\r\n        users: 0,\r\n        connections: 0,\r\n        queues: 0,\r\n        value: 0,\r\n        useCampaigns: true,\r\n        useSchedules: true,\r\n        useInternalChat: true,\r\n        useExternalApi: true,\r\n        useKanban: true,\r\n        useOpenAi: true,\r\n        useIntegrations: true,\r\n    });\r\n\r\n    useEffect(() => {\r\n        setRecord(initialValue)\r\n    }, [initialValue])\r\n\r\n    const handleSubmit = async (data) => {\r\n        onSubmit(data)\r\n    }\r\n\r\n    return (\r\n        <Formik\r\n            enableReinitialize\r\n            className={classes.fullWidth}\r\n            initialValues={record}\r\n            onSubmit={(values, { resetForm }) =>\r\n                setTimeout(() => {\r\n                    handleSubmit(values)\r\n                    resetForm()\r\n                }, 500)\r\n            }\r\n        >\r\n            {(values) => (\r\n                <Form className={classes.fullWidth}>\r\n                    <Grid spacing={1} justifyContent=\"flex-start\" container>\r\n                        {/* NOME */}\r\n                        <Grid xs={12} sm={6} md={2} item>\r\n                            <Field\r\n                                as={TextField}\r\n                                label={i18n.t(\"plans.form.name\")}\r\n                                name=\"name\"\r\n                                variant=\"outlined\"\r\n                                className={classes.fullWidth}\r\n                                margin=\"dense\"\r\n                            />\r\n                        </Grid>\r\n\r\n                        {/* USUARIOS */}\r\n                        <Grid xs={12} sm={6} md={1} item>\r\n                            <Field\r\n                                as={TextField}\r\n                                label={i18n.t(\"plans.form.users\")}\r\n                                name=\"users\"\r\n                                variant=\"outlined\"\r\n                                className={classes.fullWidth}\r\n                                margin=\"dense\"\r\n                                type=\"number\"\r\n                            />\r\n                        </Grid>\r\n\r\n                        {/* CONEXOES */}\r\n                        <Grid xs={12} sm={6} md={1} item>\r\n                            <Field\r\n                                as={TextField}\r\n                                label={i18n.t(\"plans.form.connections\")}\r\n                                name=\"connections\"\r\n                                variant=\"outlined\"\r\n                                className={classes.fullWidth}\r\n                                margin=\"dense\"\r\n                                type=\"number\"\r\n                            />\r\n                        </Grid>\r\n\r\n                        {/* FILAS */}\r\n                        <Grid xs={12} sm={6} md={1} item>\r\n                            <Field\r\n                                as={TextField}\r\n                                label=\"Filas\"\r\n                                name=\"queues\"\r\n                                variant=\"outlined\"\r\n                                className={classes.fullWidth}\r\n                                margin=\"dense\"\r\n                                type=\"number\"\r\n                            />\r\n                        </Grid>\r\n\r\n                        {/* VALOR */}\r\n                        <Grid xs={12} sm={6} md={1} item>\r\n                            <Field\r\n                                as={TextField}\r\n                                label=\"Valor\"\r\n                                name=\"value\"\r\n                                variant=\"outlined\"\r\n                                className={classes.fullWidth}\r\n                                margin=\"dense\"\r\n                                type=\"text\"\r\n                            />\r\n                        </Grid>\r\n\r\n                        {/* CAMPANHAS */}\r\n                        <Grid xs={12} sm={6} md={2} item>\r\n                            <FormControl margin=\"dense\" variant=\"outlined\" fullWidth>\r\n                                <InputLabel htmlFor=\"useCampaigns-selection\">{i18n.t(\"plans.form.campaigns\")}</InputLabel>\r\n                                <Field\r\n                                    as={Select}\r\n                                    id=\"useCampaigns-selection\"\r\n                                    label={i18n.t(\"plans.form.campaigns\")}\r\n                                    labelId=\"useCampaigns-selection-label\"\r\n                                    name=\"useCampaigns\"\r\n                                    margin=\"dense\"\r\n                                >\r\n                                    <MenuItem value={true}>{i18n.t(\"plans.form.enabled\")}</MenuItem>\r\n                                    <MenuItem value={false}>{i18n.t(\"plans.form.disabled\")}</MenuItem>\r\n                                </Field>\r\n                            </FormControl>\r\n                        </Grid>\r\n\r\n                        {/* AGENDAMENTOS */}\r\n                        <Grid xs={12} sm={8} md={2} item>\r\n                            <FormControl margin=\"dense\" variant=\"outlined\" fullWidth>\r\n                                <InputLabel htmlFor=\"useSchedules-selection\">{i18n.t(\"plans.form.schedules\")}</InputLabel>\r\n                                <Field\r\n                                    as={Select}\r\n                                    id=\"useSchedules-selection\"\r\n                                    label={i18n.t(\"plans.form.schedules\")}\r\n                                    labelId=\"useSchedules-selection-label\"\r\n                                    name=\"useSchedules\"\r\n                                    margin=\"dense\"\r\n                                >\r\n                                    <MenuItem value={true}>{i18n.t(\"plans.form.enabled\")}</MenuItem>\r\n                                    <MenuItem value={false}>{i18n.t(\"plans.form.disabled\")}</MenuItem>\r\n                                </Field>\r\n                            </FormControl>\r\n                        </Grid>\r\n\r\n                        {/* CHAT INTERNO */}\r\n                        <Grid xs={12} sm={8} md={2} item>\r\n                            <FormControl margin=\"dense\" variant=\"outlined\" fullWidth>\r\n                                <InputLabel htmlFor=\"useInternalChat-selection\">Chat Interno</InputLabel>\r\n                                <Field\r\n                                    as={Select}\r\n                                    id=\"useInternalChat-selection\"\r\n                                    label=\"Chat Interno\"\r\n                                    labelId=\"useInternalChat-selection-label\"\r\n                                    name=\"useInternalChat\"\r\n                                    margin=\"dense\"\r\n                                >\r\n                                    <MenuItem value={true}>{i18n.t(\"plans.form.enabled\")}</MenuItem>\r\n                                    <MenuItem value={false}>{i18n.t(\"plans.form.disabled\")}</MenuItem>\r\n                                </Field>\r\n                            </FormControl>\r\n                        </Grid>\r\n\r\n                        {/* API Externa */}\r\n                        <Grid xs={12} sm={8} md={4} item>\r\n                            <FormControl margin=\"dense\" variant=\"outlined\" fullWidth>\r\n                                <InputLabel htmlFor=\"useExternalApi-selection\">API Externa</InputLabel>\r\n                                <Field\r\n                                    as={Select}\r\n                                    id=\"useExternalApi-selection\"\r\n                                    label=\"API Externa\"\r\n                                    labelId=\"useExternalApi-selection-label\"\r\n                                    name=\"useExternalApi\"\r\n                                    margin=\"dense\"\r\n                                >\r\n                                    <MenuItem value={true}>{i18n.t(\"plans.form.enabled\")}</MenuItem>\r\n                                    <MenuItem value={false}>{i18n.t(\"plans.form.disabled\")}</MenuItem>\r\n                                </Field>\r\n                            </FormControl>\r\n                        </Grid>\r\n\r\n                        {/* KANBAN */}\r\n                        <Grid xs={12} sm={8} md={2} item>\r\n                            <FormControl margin=\"dense\" variant=\"outlined\" fullWidth>\r\n                                <InputLabel htmlFor=\"useKanban-selection\">Kanban</InputLabel>\r\n                                <Field\r\n                                    as={Select}\r\n                                    id=\"useKanban-selection\"\r\n                                    label=\"Kanban\"\r\n                                    labelId=\"useKanban-selection-label\"\r\n                                    name=\"useKanban\"\r\n                                    margin=\"dense\"\r\n                                >\r\n                                    <MenuItem value={true}>{i18n.t(\"plans.form.enabled\")}</MenuItem>\r\n                                    <MenuItem value={false}>{i18n.t(\"plans.form.disabled\")}</MenuItem>\r\n                                </Field>\r\n                            </FormControl>\r\n                        </Grid>\r\n\r\n                        {/* OPENAI */}\r\n                        <Grid xs={12} sm={8} md={2} item>\r\n                            <FormControl margin=\"dense\" variant=\"outlined\" fullWidth>\r\n                                <InputLabel htmlFor=\"useOpenAi-selection\">Open.Ai</InputLabel>\r\n                                <Field\r\n                                    as={Select}\r\n                                    id=\"useOpenAi-selection\"\r\n                                    label=\"Talk.Ai\"\r\n                                    labelId=\"useOpenAi-selection-label\"\r\n                                    name=\"useOpenAi\"\r\n                                    margin=\"dense\"\r\n                                >\r\n                                    <MenuItem value={true}>{i18n.t(\"plans.form.enabled\")}</MenuItem>\r\n                                    <MenuItem value={false}>{i18n.t(\"plans.form.disabled\")}</MenuItem>\r\n                                </Field>\r\n                            </FormControl>\r\n                        </Grid>\r\n\r\n                        {/* INTEGRACOES */}\r\n                        <Grid xs={12} sm={8} md={2} item>\r\n                            <FormControl margin=\"dense\" variant=\"outlined\" fullWidth>\r\n                                <InputLabel htmlFor=\"useIntegrations-selection\">Integrações</InputLabel>\r\n                                <Field\r\n                                    as={Select}\r\n                                    id=\"useIntegrations-selection\"\r\n                                    label=\"Integrações\"\r\n                                    labelId=\"useIntegrations-selection-label\"\r\n                                    name=\"useIntegrations\"\r\n                                    margin=\"dense\"\r\n                                >\r\n                                    <MenuItem value={true}>{i18n.t(\"plans.form.enabled\")}</MenuItem>\r\n                                    <MenuItem value={false}>{i18n.t(\"plans.form.disabled\")}</MenuItem>\r\n                                </Field>\r\n                            </FormControl>\r\n                        </Grid>\r\n                    </Grid>\r\n                    <Grid spacing={2} justifyContent=\"flex-end\" container>\r\n\r\n                        <Grid sm={3} md={2} item>\r\n                            <ButtonWithSpinner className={classes.fullWidth} loading={loading} onClick={() => onCancel()} variant=\"contained\">\r\n                                {i18n.t(\"plans.form.clear\")}\r\n                            </ButtonWithSpinner>\r\n                        </Grid>\r\n                        {record.id !== undefined ? (\r\n                            <Grid sm={3} md={2} item>\r\n                                <ButtonWithSpinner className={classes.fullWidth} loading={loading} onClick={() => onDelete(record)} variant=\"contained\" color=\"secondary\">\r\n                                    {i18n.t(\"plans.form.delete\")}\r\n                                </ButtonWithSpinner>\r\n                            </Grid>\r\n                        ) : null}\r\n                        <Grid sm={3} md={2} item>\r\n                            <ButtonWithSpinner className={classes.fullWidth} loading={loading} type=\"submit\" variant=\"contained\" color=\"primary\">\r\n                                {i18n.t(\"plans.form.save\")}\r\n                            </ButtonWithSpinner>\r\n                        </Grid>\r\n                    </Grid>\r\n                </Form>\r\n            )}\r\n        </Formik>\r\n    )\r\n}\r\n\r\nexport function PlansManagerGrid(props) {\r\n    const { records, onSelect } = props\r\n    const classes = useStyles()\r\n    \r\n    const renderCampaigns = (row) => {\r\n        return row.useCampaigns === false ? `${i18n.t(\"plans.form.no\")}` : `${i18n.t(\"plans.form.yes\")}`;\r\n    };\r\n\r\n    const renderSchedules = (row) => {\r\n        return row.useSchedules === false ? `${i18n.t(\"plans.form.no\")}` : `${i18n.t(\"plans.form.yes\")}`;\r\n    };\r\n\r\n    const renderInternalChat = (row) => {\r\n        return row.useInternalChat === false ? `${i18n.t(\"plans.form.no\")}` : `${i18n.t(\"plans.form.yes\")}`;\r\n    };\r\n\r\n    const renderExternalApi = (row) => {\r\n        return row.useExternalApi === false ? `${i18n.t(\"plans.form.no\")}` : `${i18n.t(\"plans.form.yes\")}`;\r\n    };\r\n\r\n    const renderKanban = (row) => {\r\n        return row.useKanban === false ? `${i18n.t(\"plans.form.no\")}` : `${i18n.t(\"plans.form.yes\")}`;\r\n    };\r\n\r\n    const renderOpenAi = (row) => {\r\n        return row.useOpenAi === false ? `${i18n.t(\"plans.form.no\")}` : `${i18n.t(\"plans.form.yes\")}`;\r\n    };\r\n\r\n    const renderIntegrations = (row) => {\r\n        return row.useIntegrations === false ? `${i18n.t(\"plans.form.no\")}` : `${i18n.t(\"plans.form.yes\")}`;\r\n    };\r\n\r\n    return (\r\n        <Paper className={classes.tableContainer}>\r\n            <Table\r\n                className={classes.fullWidth}\r\n                // size=\"small\"\r\n                padding=\"none\"\r\n                aria-label=\"a dense table\"\r\n            >\r\n                <TableHead>\r\n                    <TableRow>\r\n                        <TableCell align=\"center\" style={{ width: '1%' }}>#</TableCell>\r\n                        <TableCell align=\"left\">{i18n.t(\"plans.form.name\")}</TableCell>\r\n                        <TableCell align=\"center\">{i18n.t(\"plans.form.users\")}</TableCell>\r\n                        <TableCell align=\"center\">{i18n.t(\"plans.form.connections\")}</TableCell>\r\n                        <TableCell align=\"center\">Filas</TableCell>\r\n                        <TableCell align=\"center\">Valor</TableCell>\r\n                        <TableCell align=\"center\">{i18n.t(\"plans.form.campaigns\")}</TableCell>\r\n                        <TableCell align=\"center\">{i18n.t(\"plans.form.schedules\")}</TableCell>\r\n                        <TableCell align=\"center\">Chat Interno</TableCell>\r\n                        <TableCell align=\"center\">API Externa</TableCell>\r\n                        <TableCell align=\"center\">Kanban</TableCell>\r\n                        <TableCell align=\"center\">Open.Ai</TableCell>\r\n                        <TableCell align=\"center\">Integrações</TableCell>\r\n                    </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                    {records.map((row) => (\r\n                        <TableRow key={row.id}>\r\n                            <TableCell align=\"center\" style={{ width: '1%' }}>\r\n                                <IconButton onClick={() => onSelect(row)} aria-label=\"delete\">\r\n                                    <EditIcon />\r\n                                </IconButton>\r\n                            </TableCell>\r\n                            <TableCell align=\"left\">{row.name || '-'}</TableCell>\r\n                            <TableCell align=\"center\">{row.users || '-'}</TableCell>\r\n                            <TableCell align=\"center\">{row.connections || '-'}</TableCell>\r\n                            <TableCell align=\"center\">{row.queues || '-'}</TableCell>\r\n                            <TableCell align=\"center\">{i18n.t(\"plans.form.money\")} {row.value ? row.value.toLocaleString('pt-br', { minimumFractionDigits: 2 }) : '00.00'}</TableCell>\r\n                            <TableCell align=\"center\">{renderCampaigns(row)}</TableCell>\r\n                            <TableCell align=\"center\">{renderSchedules(row)}</TableCell>\r\n                            <TableCell align=\"center\">{renderInternalChat(row)}</TableCell>\r\n                            <TableCell align=\"center\">{renderExternalApi(row)}</TableCell>\r\n                            <TableCell align=\"center\">{renderKanban(row)}</TableCell>\r\n                            <TableCell align=\"center\">{renderOpenAi(row)}</TableCell>\r\n                            <TableCell align=\"center\">{renderIntegrations(row)}</TableCell>\r\n                        </TableRow>\r\n                    ))}\r\n                </TableBody>\r\n            </Table>\r\n        </Paper>\r\n    )\r\n}\r\n\r\nexport default function PlansManager() {\r\n    const classes = useStyles()\r\n    const { list, save, update, remove } = usePlans()\r\n\r\n    const [showConfirmDialog, setShowConfirmDialog] = useState(false)\r\n    const [loading, setLoading] = useState(false)\r\n    const [records, setRecords] = useState([])\r\n    const [record, setRecord] = useState({\r\n        name: '',\r\n        users: 0,\r\n        connections: 0,\r\n        queues: 0,\r\n        value: 0,\r\n        useCampaigns: true,\r\n        useSchedules: true,\r\n        useInternalChat: true,\r\n        useExternalApi: true,\r\n        useKanban: true,\r\n        useOpenAi: true,\r\n        useIntegrations: true,\r\n    })\r\n\r\n    useEffect(() => {\r\n        async function fetchData() {\r\n            await loadPlans()\r\n        }\r\n        fetchData()\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [record])\r\n\r\n    const loadPlans = async () => {\r\n        setLoading(true)\r\n        try {\r\n            const planList = await list()\r\n            setRecords(planList)\r\n        } catch (e) {\r\n            toast.error('Não foi possível carregar a lista de registros')\r\n        }\r\n        setLoading(false)\r\n    }\r\n\r\n    const handleSubmit = async (data) => {\r\n        setLoading(true)\r\n        console.log(data)\r\n        try {\r\n            if (data.id !== undefined) {\r\n                await update(data)\r\n            } else {\r\n                await save(data)\r\n            }\r\n            await loadPlans()\r\n            handleCancel()\r\n            toast.success('Operação realizada com sucesso!')\r\n        } catch (e) {\r\n            toast.error('Não foi possível realizar a operação. Verifique se já existe uma plano com o mesmo nome ou se os campos foram preenchidos corretamente')\r\n        }\r\n        setLoading(false)\r\n    }\r\n\r\n    const handleDelete = async () => {\r\n        setLoading(true)\r\n        try {\r\n            await remove(record.id)\r\n            await loadPlans()\r\n            handleCancel()\r\n            toast.success('Operação realizada com sucesso!')\r\n        } catch (e) {\r\n            toast.error('Não foi possível realizar a operação')\r\n        }\r\n        setLoading(false)\r\n    }\r\n\r\n    const handleOpenDeleteDialog = () => {\r\n        setShowConfirmDialog(true)\r\n    }\r\n\r\n    const handleCancel = () => {\r\n        setRecord({\r\n            id: undefined,\r\n            name: '',\r\n            users: 0,\r\n            connections: 0,\r\n            queues: 0,\r\n            value: 0,\r\n            useCampaigns: true,\r\n            useSchedules: true,\r\n            useInternalChat: true,\r\n            useExternalApi: true,\r\n            useKanban: true,\r\n            useOpenAi: true,\r\n            useIntegrations: true\r\n        })\r\n    }\r\n\r\n    const handleSelect = (data) => {\r\n\r\n        let useCampaigns = data.useCampaigns === false ? false : true\r\n        let useSchedules = data.useSchedules === false ? false : true\r\n        let useInternalChat = data.useInternalChat === false ? false : true\r\n        let useExternalApi = data.useExternalApi === false ? false : true\r\n        let useKanban = data.useKanban === false ? false : true\r\n        let useOpenAi = data.useOpenAi === false ? false : true\r\n        let useIntegrations = data.useIntegrations === false ? false : true\r\n\r\n        setRecord({\r\n            id: data.id,\r\n            name: data.name || '',\r\n            users: data.users || 0,\r\n            connections: data.connections || 0,\r\n            queues: data.queues || 0,\r\n            value: data.value?.toLocaleString('pt-br', { minimumFractionDigits: 0 }) || 0,\r\n            useCampaigns,\r\n            useSchedules,\r\n            useInternalChat,\r\n            useExternalApi,\r\n            useKanban,\r\n            useOpenAi,\r\n            useIntegrations\r\n        })\r\n    }\r\n\r\n    return (\r\n        <Paper className={classes.mainPaper} elevation={0}>\r\n            <Grid spacing={2} container>\r\n                <Grid xs={12} item>\r\n                    <PlanManagerForm\r\n                        initialValue={record}\r\n                        onDelete={handleOpenDeleteDialog}\r\n                        onSubmit={handleSubmit}\r\n                        onCancel={handleCancel}\r\n                        loading={loading}\r\n                    />\r\n                </Grid>\r\n                <Grid xs={12} item>\r\n                    <PlansManagerGrid\r\n                        records={records}\r\n                        onSelect={handleSelect}\r\n                    />\r\n                </Grid>\r\n            </Grid>\r\n            <ConfirmationModal\r\n                title=\"Exclusão de Registro\"\r\n                open={showConfirmDialog}\r\n                onClose={() => setShowConfirmDialog(false)}\r\n                onConfirm={() => handleDelete()}\r\n            >\r\n                Deseja realmente excluir esse registro?\r\n            </ConfirmationModal>\r\n        </Paper>\r\n    )\r\n}","import api from \"../../services/api\";\r\n\r\nconst usePlans = () => {\r\n\r\n    const findAll = async (params) => {\r\n        const { data } = await api.request({\r\n            url: `/helps`,\r\n            method: 'GET',\r\n            params\r\n        });\r\n        return data;\r\n    }\r\n\r\n    const list = async (params) => {\r\n        const { data } = await api.request({\r\n            url: '/helps/list',\r\n            method: 'GET',\r\n            params\r\n        });\r\n        return data;\r\n    }\r\n\r\n    const save = async (data) => {\r\n        const { data: responseData } = await api.request({\r\n            url: '/helps',\r\n            method: 'POST',\r\n            data\r\n        });\r\n        return responseData;\r\n    }\r\n\r\n    const update = async (data) => {\r\n        const { data: responseData } = await api.request({\r\n            url: `/helps/${data.id}`,\r\n            method: 'PUT',\r\n            data\r\n        });\r\n        return responseData;\r\n    }\r\n\r\n    const remove = async (id) => {\r\n        const { data } = await api.request({\r\n            url: `/helps/${id}`,\r\n            method: 'DELETE'\r\n        });\r\n        return data;\r\n    }\r\n\r\n    return {\r\n        findAll,\r\n        list,\r\n        save,\r\n        update,\r\n        remove\r\n    }\r\n}\r\n\r\nexport default usePlans;","import React, { useState, useEffect } from \"react\";\r\nimport {\r\n    makeStyles,\r\n    Paper,\r\n    Grid,\r\n    TextField,\r\n    Table,\r\n    TableHead,\r\n    TableBody,\r\n    TableCell,\r\n    TableRow,\r\n    IconButton\r\n} from \"@material-ui/core\";\r\nimport { Formik, Form, Field } from 'formik';\r\nimport ButtonWithSpinner from \"../ButtonWithSpinner\";\r\nimport ConfirmationModal from \"../ConfirmationModal\";\r\n\r\nimport { Edit as EditIcon } from \"@material-ui/icons\";\r\n\r\nimport { toast } from \"react-toastify\";\r\nimport useHelps from \"../../hooks/useHelps\";\r\n\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n    mainPaper: {\r\n\t\twidth: '100%',\r\n\t\tflex: 1,\r\n\t\tpadding: theme.spacing(2)\r\n    },\r\n\tfullWidth: {\r\n\t\twidth: '100%'\r\n\t},\r\n    tableContainer: {\r\n\t\twidth: '100%',\r\n\t\toverflowX: \"scroll\",\r\n\t\t...theme.scrollbarStyles\r\n    },\r\n\ttextfield: {\r\n\t\twidth: '100%'\r\n\t},\r\n    textRight: {\r\n        textAlign: 'right'\r\n    },\r\n    row: {\r\n\t\tpaddingTop: theme.spacing(2),\r\n\t\tpaddingBottom: theme.spacing(2)\r\n    },\r\n    control: {\r\n\t\tpaddingRight: theme.spacing(1),\r\n\t\tpaddingLeft: theme.spacing(1)\r\n\t},\r\n    buttonContainer: {\r\n        textAlign: 'right',\r\n\t\tpadding: theme.spacing(1)\r\n\t}\r\n}));\r\n\r\nexport function HelpManagerForm (props) {\r\n    const { onSubmit, onDelete, onCancel, initialValue, loading } = props;\r\n    const classes = useStyles()\r\n\r\n    const [record, setRecord] = useState(initialValue);\r\n\r\n    useEffect(() => {\r\n        setRecord(initialValue)\r\n    }, [initialValue])\r\n\r\n    const handleSubmit = async(data) => {\r\n        onSubmit(data)\r\n    }\r\n\r\n    return (\r\n        <Formik\r\n            enableReinitialize\r\n            className={classes.fullWidth}\r\n            initialValues={record}\r\n            onSubmit={(values, { resetForm }) =>\r\n                setTimeout(() => {\r\n                    handleSubmit(values)\r\n                    resetForm()\r\n                }, 500)\r\n            }\r\n        >\r\n            {(values) => (\r\n                <Form className={classes.fullWidth}>\r\n                    <Grid spacing={2} justifyContent=\"flex-end\" container>\r\n                        <Grid xs={12} sm={6} md={3} item>\r\n                            <Field\r\n                                as={TextField}\r\n                                label=\"Título\"\r\n                                name=\"title\"\r\n                                variant=\"outlined\"\r\n                                className={classes.fullWidth}\r\n                                margin=\"dense\"\r\n                            />\r\n                        </Grid>\r\n                        <Grid xs={12} sm={6} md={3} item>\r\n                            <Field\r\n                                as={TextField}\r\n                                label=\"Código do Vídeo\"\r\n                                name=\"video\"\r\n                                variant=\"outlined\"\r\n                                className={classes.fullWidth}\r\n                                margin=\"dense\"\r\n                            />\r\n                        </Grid>\r\n                        <Grid xs={12} sm={12} md={6} item>\r\n                            <Field\r\n                                as={TextField}\r\n                                label=\"Descrição\"\r\n                                name=\"description\"\r\n                                variant=\"outlined\"\r\n                                className={classes.fullWidth}\r\n                                margin=\"dense\"\r\n                            />\r\n                        </Grid>\r\n                        <Grid sm={3} md={1} item>\r\n                            <ButtonWithSpinner className={classes.fullWidth} loading={loading} onClick={() => onCancel()} variant=\"contained\">\r\n                                Limpar\r\n                            </ButtonWithSpinner>\r\n                        </Grid>\r\n                        { record.id !== undefined ? (\r\n                            <Grid sm={3} md={1} item>\r\n                                <ButtonWithSpinner className={classes.fullWidth} loading={loading} onClick={() => onDelete(record)} variant=\"contained\" color=\"secondary\">\r\n                                    Excluir\r\n                                </ButtonWithSpinner>\r\n                            </Grid>\r\n                        ) : null}\r\n                        <Grid sm={3} md={1} item>\r\n                            <ButtonWithSpinner className={classes.fullWidth} loading={loading} type=\"submit\" variant=\"contained\" color=\"primary\">\r\n                                Salvar\r\n                            </ButtonWithSpinner>\r\n                        </Grid>\r\n                    </Grid>\r\n                </Form>\r\n            )}\r\n        </Formik>\r\n    )\r\n}\r\n\r\nexport function HelpsManagerGrid (props) {\r\n    const { records, onSelect } = props\r\n    const classes = useStyles()\r\n\r\n    return (\r\n        <Paper className={classes.tableContainer}>\r\n            <Table className={classes.fullWidth} size=\"small\" aria-label=\"a dense table\">\r\n                <TableHead>\r\n                <TableRow>\r\n                    <TableCell align=\"center\" style={{width: '1%'}}>#</TableCell>\r\n                    <TableCell align=\"left\">Título</TableCell>\r\n                    <TableCell align=\"left\">Descrição</TableCell>\r\n                    <TableCell align=\"left\">Vídeo</TableCell>\r\n                </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                {records.map((row) => (\r\n                    <TableRow key={row.id}>\r\n                        <TableCell align=\"center\" style={{width: '1%'}}>\r\n                            <IconButton onClick={() => onSelect(row)} aria-label=\"delete\">\r\n                                <EditIcon />\r\n                            </IconButton>\r\n                        </TableCell>\r\n                        <TableCell align=\"left\">{row.title || '-'}</TableCell>\r\n                        <TableCell align=\"left\">{row.description || '-'}</TableCell>\r\n                        <TableCell align=\"left\">{row.video || '-'}</TableCell>\r\n                    </TableRow>\r\n                ))}\r\n                </TableBody>\r\n            </Table>\r\n        </Paper>\r\n    )\r\n}\r\n\r\nexport default function HelpsManager () {\r\n    const classes = useStyles()\r\n    const { list, save, update, remove } = useHelps()\r\n    \r\n    const [showConfirmDialog, setShowConfirmDialog] = useState(false)\r\n    const [loading, setLoading] = useState(false)\r\n    const [records, setRecords] = useState([])\r\n    const [record, setRecord] = useState({\r\n        title: '',\r\n        description: '',\r\n        video: ''\r\n    })\r\n\r\n    useEffect(() => {\r\n        async function fetchData () {\r\n            await loadHelps()\r\n        }\r\n        fetchData()\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [])\r\n\r\n    const loadHelps = async () => {\r\n        setLoading(true)\r\n        try {\r\n            const helpList = await list()\r\n            setRecords(helpList)\r\n        } catch (e) {\r\n            toast.error('Não foi possível carregar a lista de registros')\r\n        }\r\n        setLoading(false)\r\n    }\r\n\r\n    const handleSubmit = async (data) => {\r\n        setLoading(true)\r\n        try {\r\n            if (data.id !== undefined) {\r\n                await update(data)\r\n            } else {\r\n                await save(data)\r\n            }\r\n            await loadHelps()\r\n            handleCancel()\r\n            toast.success('Operação realizada com sucesso!')\r\n        } catch (e) {\r\n            toast.error('Não foi possível realizar a operação. Verifique se já existe uma helpo com o mesmo nome ou se os campos foram preenchidos corretamente')\r\n        }\r\n        setLoading(false)\r\n    }\r\n\r\n    const handleDelete = async () => {\r\n        setLoading(true)\r\n        try {\r\n            await remove(record.id)\r\n            await loadHelps()\r\n            handleCancel()\r\n            toast.success('Operação realizada com sucesso!')\r\n        } catch (e) {\r\n            toast.error('Não foi possível realizar a operação')\r\n        }\r\n        setLoading(false)\r\n    }\r\n\r\n    const handleOpenDeleteDialog = () => {\r\n        setShowConfirmDialog(true)\r\n    }\r\n\r\n    const handleCancel = () => {\r\n        setRecord({\r\n            title: '',\r\n            description: '',\r\n            video: ''\r\n        })\r\n    }\r\n\r\n    const handleSelect = (data) => {\r\n        setRecord({\r\n            id: data.id,\r\n            title: data.title || '',\r\n            description: data.description || '',\r\n            video: data.video || ''\r\n        })\r\n    }\r\n\r\n    return (\r\n        <Paper className={classes.mainPaper} elevation={0}>\r\n            <Grid spacing={2} container>\r\n                <Grid xs={12} item>\r\n                    <HelpManagerForm \r\n                        initialValue={record} \r\n                        onDelete={handleOpenDeleteDialog} \r\n                        onSubmit={handleSubmit} \r\n                        onCancel={handleCancel} \r\n                        loading={loading}\r\n                    />\r\n                </Grid>\r\n                <Grid xs={12} item>\r\n                    <HelpsManagerGrid \r\n                        records={records}\r\n                        onSelect={handleSelect}\r\n                    />\r\n                </Grid>\r\n            </Grid>\r\n            <ConfirmationModal\r\n                title=\"Exclusão de Registro\"\r\n                open={showConfirmDialog}\r\n                onClose={() => setShowConfirmDialog(false)}\r\n                onConfirm={() => handleDelete()}\r\n            >\r\n                Deseja realmente excluir esse registro?\r\n            </ConfirmationModal>\r\n        </Paper>\r\n    )\r\n}","import api from \"../../services/api\";\r\n\r\nconst useSettings = () => {\r\n\r\n    const getAll = async (params) => {\r\n        const { data } = await api.request({\r\n            url: '/settings',\r\n            method: 'GET',\r\n            params\r\n        });\r\n        return data;\r\n    }\r\n\r\n    const update = async (data) => {\r\n        const { data: responseData } = await api.request({\r\n            url: `/settings/${data.key}`,\r\n            method: 'PUT',\r\n            data\r\n        });\r\n        return responseData;\r\n    }\r\n\r\n    return {\r\n\t\tgetAll,\r\n        update\r\n    }\r\n}\r\n\r\nexport default useSettings;","import React, { useEffect, useState } from \"react\";\r\n\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport FormHelperText from \"@material-ui/core/FormHelperText\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Title from \"../Title\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport useSettings from \"../../hooks/useSettings\";\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { grey, blue } from \"@material-ui/core/colors\";\r\nimport { Tabs, Tab } from \"@material-ui/core\";\r\n\r\n//import 'react-toastify/dist/ReactToastify.css';\r\n \r\nconst useStyles = makeStyles((theme) => ({\r\n  container: {\r\n    paddingTop: theme.spacing(4),\r\n    paddingBottom: theme.spacing(4),\r\n  },\r\n  fixedHeightPaper: {\r\n    padding: theme.spacing(2),\r\n    display: \"flex\",\r\n    overflow: \"auto\",\r\n    flexDirection: \"column\",\r\n    height: 240,\r\n  },\r\n  tab: {\r\n    backgroundColor: theme.palette.options,  //DARK MODE PLW DESIGN//\r\n    borderRadius: 4,\r\n    width: \"100%\",\r\n    \"& .MuiTab-wrapper\": {\r\n      color: theme.palette.fontecor,\r\n    },   //DARK MODE PLW DESIGN//\r\n    \"& .MuiTabs-flexContainer\": {\r\n      justifyContent: \"center\"\r\n    }\r\n\r\n\r\n  },\r\n  paper: {\r\n    padding: theme.spacing(2),\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    marginBottom: 12,\r\n    width: \"100%\",\r\n  },\r\n  cardAvatar: {\r\n    fontSize: \"55px\",\r\n    color: grey[500],\r\n    backgroundColor: \"#ffffff\",\r\n    width: theme.spacing(7),\r\n    height: theme.spacing(7),\r\n  },\r\n  cardTitle: {\r\n    fontSize: \"18px\",\r\n    color: blue[700],\r\n  },\r\n  cardSubtitle: {\r\n    color: grey[600],\r\n    fontSize: \"14px\",\r\n  },\r\n  alignRight: {\r\n    textAlign: \"right\",\r\n  },\r\n  fullWidth: {\r\n    width: \"100%\",\r\n  },\r\n  selectContainer: {\r\n    width: \"100%\",\r\n    textAlign: \"left\",\r\n  },\r\n}));\r\n\r\nexport default function Options(props) {\r\n  const { settings, scheduleTypeChanged } = props;\r\n  const classes = useStyles();\r\n  const [userRating, setUserRating] = useState(\"disabled\");\r\n  const [scheduleType, setScheduleType] = useState(\"disabled\");\r\n  const [callType, setCallType] = useState(\"enabled\");\r\n  const [chatbotType, setChatbotType] = useState(\"\");\r\n  const [CheckMsgIsGroup, setCheckMsgIsGroupType] = useState(\"enabled\");\r\n\r\n  const [loadingUserRating, setLoadingUserRating] = useState(false);\r\n  const [loadingScheduleType, setLoadingScheduleType] = useState(false);\r\n  const [loadingCallType, setLoadingCallType] = useState(false);\r\n  const [loadingChatbotType, setLoadingChatbotType] = useState(false);\r\n  const [loadingCheckMsgIsGroup, setCheckMsgIsGroup] = useState(false);\r\n\r\n\r\n  //const [ipixcType, setIpIxcType] = useState(\"\");\r\n  //const [loadingIpIxcType, setLoadingIpIxcType] = useState(false);\r\n  //const [tokenixcType, setTokenIxcType] = useState(\"\");\r\n  //const [loadingTokenIxcType, setLoadingTokenIxcType] = useState(false);\r\n\r\n  //const [ipmkauthType, setIpMkauthType] = useState(\"\");\r\n  //const [loadingIpMkauthType, setLoadingIpMkauthType] = useState(false);\r\n  //const [clientidmkauthType, setClientIdMkauthType] = useState(\"\");\r\n  //const [loadingClientIdMkauthType, setLoadingClientIdMkauthType] = useState(false);\r\n  //const [clientsecretmkauthType, setClientSecrectMkauthType] = useState(\"\");\r\n  //const [loadingClientSecrectMkauthType, setLoadingClientSecrectMkauthType] = useState(false);\r\n\r\n  const [asaasType, setAsaasType] = useState(\"\");\r\n  const [loadingAsaasType, setLoadingAsaasType] = useState(false);\r\n  \r\n  // recursos a mais da plw design\r\n\r\n  const [SendGreetingAccepted, setSendGreetingAccepted] = useState(\"disabled\");\r\n  const [loadingSendGreetingAccepted, setLoadingSendGreetingAccepted] = useState(false);\r\n  \r\n  const [SettingsTransfTicket, setSettingsTransfTicket] = useState(\"disabled\");\r\n  const [loadingSettingsTransfTicket, setLoadingSettingsTransfTicket] = useState(false);\r\n  \r\n  const [sendGreetingMessageOneQueues, setSendGreetingMessageOneQueues] = useState(\"disabled\");\r\n  const [loadingSendGreetingMessageOneQueues, setLoadingSendGreetingMessageOneQueues] = useState(false);\r\n\r\n  const { update } = useSettings();\r\n\r\n  useEffect(() => {\r\n    if (Array.isArray(settings) && settings.length) {\r\n      const userRating = settings.find((s) => s.key === \"userRating\");\r\n      if (userRating) {\r\n        setUserRating(userRating.value);\r\n      }\r\n      const scheduleType = settings.find((s) => s.key === \"scheduleType\");\r\n      if (scheduleType) {\r\n        setScheduleType(scheduleType.value);\r\n      }\r\n      const callType = settings.find((s) => s.key === \"call\");\r\n      if (callType) {\r\n        setCallType(callType.value);\r\n      }\r\n      const CheckMsgIsGroup = settings.find((s) => s.key === \"CheckMsgIsGroup\");\r\n      if (CheckMsgIsGroup) {\r\n        setCheckMsgIsGroupType(CheckMsgIsGroup.value);\r\n      }\r\n\t  \r\n\t  {/*PLW DESIGN SAUDAÇÃO*/}\r\n      const SendGreetingAccepted = settings.find((s) => s.key === \"sendGreetingAccepted\");\r\n      if (SendGreetingAccepted) {\r\n        setSendGreetingAccepted(SendGreetingAccepted.value);\r\n      }\t \r\n\t  {/*PLW DESIGN SAUDAÇÃO*/}\t \r\n\t  \r\n\t  {/*TRANSFERIR TICKET*/}\t\r\n\t  const SettingsTransfTicket = settings.find((s) => s.key === \"sendMsgTransfTicket\");\r\n      if (SettingsTransfTicket) {\r\n        setSettingsTransfTicket(SettingsTransfTicket.value);\r\n      }\r\n\t  {/*TRANSFERIR TICKET*/}\r\n\r\n      const sendGreetingMessageOneQueues = settings.find((s) => s.key === \"sendGreetingMessageOneQueues\");\r\n      if (sendGreetingMessageOneQueues) {\r\n        setSendGreetingMessageOneQueues(sendGreetingMessageOneQueues.value)\r\n      }\t  \r\n\t  \r\n      const chatbotType = settings.find((s) => s.key === \"chatBotType\");\r\n      if (chatbotType) {\r\n        setChatbotType(chatbotType.value);\r\n      }\r\n\r\n\t    {/*const ipixcType = settings.find((s) => s.key === \"ipixc\");\r\n      if (ipixcType) {\r\n        setIpIxcType(ipixcType.value);\r\n      }*/}\r\n\r\n      {/*const tokenixcType = settings.find((s) => s.key === \"tokenixc\");\r\n      if (tokenixcType) {\r\n        setTokenIxcType(tokenixcType.value);\r\n      }*/}\r\n\r\n      {/*const ipmkauthType = settings.find((s) => s.key === \"ipmkauth\");\r\n      if (ipmkauthType) {\r\n        setIpMkauthType(ipmkauthType.value);\r\n      }*/}\r\n\r\n     {/* const clientidmkauthType = settings.find((s) => s.key === \"clientidmkauth\");\r\n      if (clientidmkauthType) {\r\n        setClientIdMkauthType(clientidmkauthType.value);\r\n      }*/}\r\n\r\n      {/*const clientsecretmkauthType = settings.find((s) => s.key === \"clientsecretmkauth\");\r\n      if (clientsecretmkauthType) {\r\n        setClientSecrectMkauthType(clientsecretmkauthType.value);\r\n      }*/}\r\n\r\n      const asaasType = settings.find((s) => s.key === \"asaas\");\r\n      if (asaasType) {\r\n        setAsaasType(asaasType.value);\r\n      }\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [settings]);\r\n\r\n  async function handleChangeUserRating(value) {\r\n    setUserRating(value);\r\n    setLoadingUserRating(true);\r\n    await update({\r\n      key: \"userRating\",\r\n      value,\r\n    });\r\n    toast.success(\"Operação atualizada com sucesso.\");\r\n    setLoadingUserRating(false);\r\n  }\r\n  \r\n    async function handleSendGreetingMessageOneQueues(value) {\r\n    setSendGreetingMessageOneQueues(value);\r\n    setLoadingSendGreetingMessageOneQueues(true);\r\n    await update({\r\n      key: \"sendGreetingMessageOneQueues\",\r\n      value,\r\n    });\r\n\ttoast.success(\"Operação atualizada com sucesso.\");\r\n    setLoadingSendGreetingMessageOneQueues(false);\r\n  }\r\n\r\n  async function handleScheduleType(value) {\r\n    setScheduleType(value);\r\n    setLoadingScheduleType(true);\r\n    await update({\r\n      key: \"scheduleType\",\r\n      value,\r\n    });\r\n    //toast.success(\"Oraçãpeo atualizada com sucesso.\");\r\n    toast.success('Operação atualizada com sucesso.', {\r\n      position: \"top-right\",\r\n      autoClose: 2000,\r\n      hideProgressBar: false,\r\n      closeOnClick: true,\r\n      pauseOnHover: false,\r\n      draggable: true,\r\n      theme: \"light\",\r\n      });\r\n    setLoadingScheduleType(false);\r\n    if (typeof scheduleTypeChanged === \"function\") {\r\n      scheduleTypeChanged(value);\r\n    }\r\n  }\r\n\r\n  async function handleCallType(value) {\r\n    setCallType(value);\r\n    setLoadingCallType(true);\r\n    await update({\r\n      key: \"call\",\r\n      value,\r\n    });\r\n    toast.success(\"Operação atualizada com sucesso.\");\r\n    setLoadingCallType(false);\r\n  }\r\n\r\n  async function handleChatbotType(value) {\r\n    setChatbotType(value);\r\n    setLoadingChatbotType(true);\r\n    await update({\r\n      key: \"chatBotType\",\r\n      value,\r\n    });\r\n    toast.success(\"Operação atualizada com sucesso.\");\r\n    setLoadingChatbotType(false);\r\n  }\r\n\r\n  async function handleGroupType(value) {\r\n    setCheckMsgIsGroupType(value);\r\n    setCheckMsgIsGroup(true);\r\n    await update({\r\n      key: \"CheckMsgIsGroup\",\r\n      value,\r\n    });\r\n    toast.success(\"Operação atualizada com sucesso.\");\r\n    setCheckMsgIsGroupType(false);\r\n    /*     if (typeof scheduleTypeChanged === \"function\") {\r\n          scheduleTypeChanged(value);\r\n        } */\r\n  }\r\n  \r\n  {/*NOVO CÓDIGO*/}  \r\n  async function handleSendGreetingAccepted(value) {\r\n    setSendGreetingAccepted(value);\r\n    setLoadingSendGreetingAccepted(true);\r\n    await update({\r\n      key: \"sendGreetingAccepted\",\r\n      value,\r\n    });\r\n\ttoast.success(\"Operação atualizada com sucesso.\");\r\n    setLoadingSendGreetingAccepted(false);\r\n  }  \r\n  \r\n  \r\n  {/*NOVO CÓDIGO*/}    \r\n\r\n  async function handleSettingsTransfTicket(value) {\r\n    setSettingsTransfTicket(value);\r\n    setLoadingSettingsTransfTicket(true);\r\n    await update({\r\n      key: \"sendMsgTransfTicket\",\r\n      value,\r\n    });\r\n\r\n    toast.success(\"Operação atualizada com sucesso.\");\r\n    setLoadingSettingsTransfTicket(false);\r\n  } \r\n \r\n {/*async function handleChangeIPIxc(value) {\r\n    setIpIxcType(value);\r\n    setLoadingIpIxcType(true);\r\n    await update({\r\n      key: \"ipixc\",\r\n      value,\r\n    });\r\n    toast.success(\"Operação atualizada com sucesso.\");\r\n    setLoadingIpIxcType(false);\r\n  }\r\n\r\n   {/*async function handleChangeTokenIxc(value) {\r\n    setTokenIxcType(value);\r\n    setLoadingTokenIxcType(true);\r\n    await update({\r\n      key: \"tokenixc\",\r\n      value,\r\n    });\r\n    toast.success(\"Operação atualizada com sucesso.\");\r\n    setLoadingTokenIxcType(false);\r\n  }\r\n\r\n  async function handleChangeIpMkauth(value) {\r\n    setIpMkauthType(value);\r\n    setLoadingIpMkauthType(true);\r\n    await update({\r\n      key: \"ipmkauth\",\r\n      value,\r\n    });\r\n    toast.success(\"Operação atualizada com sucesso.\");\r\n    setLoadingIpMkauthType(false);\r\n  }\r\n\r\n  async function handleChangeClientIdMkauth(value) {\r\n    setClientIdMkauthType(value);\r\n    setLoadingClientIdMkauthType(true);\r\n    await update({\r\n      key: \"clientidmkauth\",\r\n      value,\r\n    });\r\n    toast.success(\"Operação atualizada com sucesso.\");\r\n    setLoadingClientIdMkauthType(false);\r\n  }\r\n\r\n  async function handleChangeClientSecrectMkauth(value) {\r\n    setClientSecrectMkauthType(value);\r\n    setLoadingClientSecrectMkauthType(true);\r\n    await update({\r\n      key: \"clientsecretmkauth\",\r\n      value,\r\n    });\r\n    toast.success(\"Operação atualizada com sucesso.\");\r\n    setLoadingClientSecrectMkauthType(false);\r\n  }*/}\r\n\r\n  async function handleChangeAsaas(value) {\r\n    setAsaasType(value);\r\n    setLoadingAsaasType(true);\r\n    await update({\r\n      key: \"asaas\",\r\n      value,\r\n    });\r\n    toast.success(\"Operação atualizada com sucesso.\");\r\n    setLoadingAsaasType(false);\r\n  }\r\n  return (\r\n    <>\r\n      <Grid spacing={3} container>\r\n        {/* <Grid xs={12} item>\r\n                    <Title>Configurações Gerais</Title>\r\n                </Grid> */}\r\n        <Grid xs={12} sm={6} md={4} item>\r\n          <FormControl className={classes.selectContainer}>\r\n            <InputLabel id=\"ratings-label\">Avaliações</InputLabel>\r\n            <Select\r\n              labelId=\"ratings-label\"\r\n              value={userRating}\r\n              onChange={async (e) => {\r\n                handleChangeUserRating(e.target.value);\r\n              }}\r\n            >\r\n              <MenuItem value={\"disabled\"}>Desabilitadas</MenuItem>\r\n              <MenuItem value={\"enabled\"}>Habilitadas</MenuItem>\r\n            </Select>\r\n            <FormHelperText>\r\n              {loadingUserRating && \"Atualizando...\"}\r\n            </FormHelperText>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid xs={12} sm={6} md={4} item>\r\n          <FormControl className={classes.selectContainer}>\r\n            <InputLabel id=\"schedule-type-label\">\r\n              Gerenciamento de Expediente\r\n            </InputLabel>\r\n            <Select\r\n              labelId=\"schedule-type-label\"\r\n              value={scheduleType}\r\n              onChange={async (e) => {\r\n                handleScheduleType(e.target.value);\r\n              }}\r\n            >\r\n              <MenuItem value={\"disabled\"}>Desabilitado</MenuItem>\r\n              <MenuItem value={\"queue\"}>Fila</MenuItem>\r\n              <MenuItem value={\"company\"}>Empresa</MenuItem>\r\n            </Select>\r\n            <FormHelperText>\r\n              {loadingScheduleType && \"Atualizando...\"}\r\n            </FormHelperText>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid xs={12} sm={6} md={4} item>\r\n          <FormControl className={classes.selectContainer}>\r\n            <InputLabel id=\"group-type-label\">\r\n              Ignorar Mensagens de Grupos\r\n            </InputLabel>\r\n            <Select\r\n              labelId=\"group-type-label\"\r\n              value={CheckMsgIsGroup}\r\n              onChange={async (e) => {\r\n                handleGroupType(e.target.value);\r\n              }}\r\n            >\r\n              <MenuItem value={\"disabled\"}>Desativado</MenuItem>\r\n              <MenuItem value={\"enabled\"}>Ativado</MenuItem>\r\n            </Select>\r\n            <FormHelperText>\r\n              {loadingScheduleType && \"Atualizando...\"}\r\n            </FormHelperText>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid xs={12} sm={6} md={4} item>\r\n          <FormControl className={classes.selectContainer}>\r\n            <InputLabel id=\"call-type-label\">\r\n              Aceitar Chamada\r\n            </InputLabel>\r\n            <Select\r\n              labelId=\"call-type-label\"\r\n              value={callType}\r\n              onChange={async (e) => {\r\n                handleCallType(e.target.value);\r\n              }}\r\n            >\r\n              <MenuItem value={\"disabled\"}>Não Aceitar</MenuItem>\r\n              <MenuItem value={\"enabled\"}>Aceitar</MenuItem>\r\n            </Select>\r\n            <FormHelperText>\r\n              {loadingCallType && \"Atualizando...\"}\r\n            </FormHelperText>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid xs={12} sm={6} md={4} item>\r\n          <FormControl className={classes.selectContainer}>\r\n            <InputLabel id=\"chatbot-type-label\">\r\n              Tipo Chatbot\r\n            </InputLabel>\r\n            <Select\r\n              labelId=\"chatbot-type-label\"\r\n              value={chatbotType}\r\n              onChange={async (e) => {\r\n                handleChatbotType(e.target.value);\r\n              }}\r\n            >\r\n              <MenuItem value={\"text\"}>Texto</MenuItem>\r\n\t\t\t {/*<MenuItem value={\"button\"}>Botão</MenuItem>*/}\r\n             {/*<MenuItem value={\"list\"}>Lista</MenuItem>*/}\r\n            </Select>\r\n            <FormHelperText>\r\n              {loadingChatbotType && \"Atualizando...\"}\r\n            </FormHelperText>\r\n          </FormControl>\r\n        </Grid>\r\n\t\t{/* ENVIAR SAUDAÇÃO AO ACEITAR O TICKET */}\r\n        <Grid xs={12} sm={6} md={4} item>\r\n          <FormControl className={classes.selectContainer}>\r\n            <InputLabel id=\"sendGreetingAccepted-label\">Enviar saudação ao aceitar o ticket</InputLabel>\r\n            <Select\r\n              labelId=\"sendGreetingAccepted-label\"\r\n              value={SendGreetingAccepted}\r\n              onChange={async (e) => {\r\n                handleSendGreetingAccepted(e.target.value);\r\n              }}\r\n            >\r\n              <MenuItem value={\"disabled\"}>Desabilitado</MenuItem>\r\n              <MenuItem value={\"enabled\"}>Habilitado</MenuItem>\r\n            </Select>\r\n            <FormHelperText>\r\n              {loadingSendGreetingAccepted && \"Atualizando...\"}\r\n            </FormHelperText>\r\n          </FormControl>\r\n        </Grid>\r\n\t\t{/* ENVIAR SAUDAÇÃO AO ACEITAR O TICKET */}\r\n\t\t\r\n\t\t{/* ENVIAR MENSAGEM DE TRANSFERENCIA DE SETOR/ATENDENTE */}\r\n        <Grid xs={12} sm={6} md={4} item>\r\n          <FormControl className={classes.selectContainer}>\r\n            <InputLabel id=\"sendMsgTransfTicket-label\">Enviar mensagem de transferencia de Fila/agente</InputLabel>\r\n            <Select\r\n              labelId=\"sendMsgTransfTicket-label\"\r\n              value={SettingsTransfTicket}\r\n              onChange={async (e) => {\r\n                handleSettingsTransfTicket(e.target.value);\r\n              }}\r\n            >\r\n              <MenuItem value={\"disabled\"}>Desabilitado</MenuItem>\r\n              <MenuItem value={\"enabled\"}>Habilitado</MenuItem>\r\n            </Select>\r\n            <FormHelperText>\r\n              {loadingSettingsTransfTicket && \"Atualizando...\"}\r\n            </FormHelperText>\r\n          </FormControl>\r\n        </Grid>\r\n\t\t\r\n\t\t{/* ENVIAR SAUDAÇÃO QUANDO HOUVER SOMENTE 1 FILA */}\r\n        <Grid xs={12} sm={6} md={4} item>\r\n          <FormControl className={classes.selectContainer}>\r\n            <InputLabel id=\"sendGreetingMessageOneQueues-label\">Enviar saudação quando houver somente 1 fila</InputLabel>\r\n            <Select\r\n              labelId=\"sendGreetingMessageOneQueues-label\"\r\n              value={sendGreetingMessageOneQueues}\r\n              onChange={async (e) => {\r\n                handleSendGreetingMessageOneQueues(e.target.value);\r\n              }}\r\n            >\r\n              <MenuItem value={\"disabled\"}>Desabilitado</MenuItem>\r\n              <MenuItem value={\"enabled\"}>Habilitado</MenuItem>\r\n            </Select>\r\n            <FormHelperText>\r\n              {loadingSendGreetingMessageOneQueues && \"Atualizando...\"}\r\n            </FormHelperText>\r\n          </FormControl>\r\n        </Grid>\r\n\t\t\r\n      </Grid>\r\n      <Grid spacing={3} container>\r\n        <Tabs\r\n          indicatorColor=\"primary\"\r\n          textColor=\"primary\"\r\n          scrollButtons=\"on\"\r\n          variant=\"scrollable\"\r\n          className={classes.tab}\r\n          style={{\r\n            marginBottom: 20,\r\n            marginTop: 20\r\n          }}\r\n        >\r\n          <Tab\r\n\r\n            label=\"INTEGRAÇÕES\" />\r\n\r\n        </Tabs>\r\n\r\n      </Grid>\r\n      {/*-----------------IXC DESATIVADO 4.6.5-----------------*/}\r\n      {/*<Grid spacing={3} container\r\n        style={{ marginBottom: 10 }}>\r\n        <Tabs\r\n          indicatorColor=\"primary\"\r\n          textColor=\"primary\"\r\n          scrollButtons=\"on\"\r\n          variant=\"scrollable\"\r\n          className={classes.tab}\r\n        >\r\n          <Tab\r\n\r\n            label=\"IXC\" />\r\n\r\n        </Tabs>\r\n        <Grid xs={12} sm={6} md={6} item>\r\n          <FormControl className={classes.selectContainer}>\r\n            <TextField\r\n              id=\"ipixc\"\r\n              name=\"ipixc\"\r\n              margin=\"dense\"\r\n              label=\"IP do IXC\"\r\n              variant=\"outlined\"\r\n              value={ipixcType}\r\n              onChange={async (e) => {\r\n                handleChangeIPIxc(e.target.value);\r\n              }}\r\n            >\r\n            </TextField>\r\n            <FormHelperText>\r\n              {loadingIpIxcType && \"Atualizando...\"}\r\n            </FormHelperText>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid xs={12} sm={6} md={6} item>\r\n          <FormControl className={classes.selectContainer}>\r\n            <TextField\r\n              id=\"tokenixc\"\r\n              name=\"tokenixc\"\r\n              margin=\"dense\"\r\n              label=\"Token do IXC\"\r\n              variant=\"outlined\"\r\n              value={tokenixcType}\r\n              onChange={async (e) => {\r\n                handleChangeTokenIxc(e.target.value);\r\n              }}\r\n            >\r\n            </TextField>\r\n            <FormHelperText>\r\n              {loadingTokenIxcType && \"Atualizando...\"}\r\n            </FormHelperText>\r\n          </FormControl>\r\n        </Grid>\r\n      </Grid>*/}\r\n      {/*-----------------MK-AUTH DESATIVADO 4.6.5-----------------*/}\r\n      {/*<Grid spacing={3} container\r\n        style={{ marginBottom: 10 }}>\r\n        <Tabs\r\n          indicatorColor=\"primary\"\r\n          textColor=\"primary\"\r\n          scrollButtons=\"on\"\r\n          variant=\"scrollable\"\r\n          className={classes.tab}\r\n        >\r\n          <Tab label=\"MK-AUTH\" />\r\n\r\n        </Tabs>\r\n        <Grid xs={12} sm={12} md={4} item>\r\n          <FormControl className={classes.selectContainer}>\r\n            <TextField\r\n              id=\"ipmkauth\"\r\n              name=\"ipmkauth\"\r\n              margin=\"dense\"\r\n              label=\"Ip Mk-Auth\"\r\n              variant=\"outlined\"\r\n              value={ipmkauthType}\r\n              onChange={async (e) => {\r\n                handleChangeIpMkauth(e.target.value);\r\n              }}\r\n            >\r\n            </TextField>\r\n            <FormHelperText>\r\n              {loadingIpMkauthType && \"Atualizando...\"}\r\n            </FormHelperText>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid xs={12} sm={12} md={4} item>\r\n          <FormControl className={classes.selectContainer}>\r\n            <TextField\r\n              id=\"clientidmkauth\"\r\n              name=\"clientidmkauth\"\r\n              margin=\"dense\"\r\n              label=\"Client Id\"\r\n              variant=\"outlined\"\r\n              value={clientidmkauthType}\r\n              onChange={async (e) => {\r\n                handleChangeClientIdMkauth(e.target.value);\r\n              }}\r\n            >\r\n            </TextField>\r\n            <FormHelperText>\r\n              {loadingClientIdMkauthType && \"Atualizando...\"}\r\n            </FormHelperText>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid xs={12} sm={12} md={4} item>\r\n          <FormControl className={classes.selectContainer}>\r\n            <TextField\r\n              id=\"clientsecretmkauth\"\r\n              name=\"clientsecretmkauth\"\r\n              margin=\"dense\"\r\n              label=\"Client Secret\"\r\n              variant=\"outlined\"\r\n              value={clientsecretmkauthType}\r\n              onChange={async (e) => {\r\n                handleChangeClientSecrectMkauth(e.target.value);\r\n              }}\r\n            >\r\n            </TextField>\r\n            <FormHelperText>\r\n              {loadingClientSecrectMkauthType && \"Atualizando...\"}\r\n            </FormHelperText>\r\n          </FormControl>\r\n        </Grid>\r\n      </Grid>*/}\r\n      {/*-----------------ASAAS-----------------*/}\r\n      <Grid spacing={3} container\r\n        style={{ marginBottom: 10 }}>\r\n        <Tabs\r\n          indicatorColor=\"primary\"\r\n          textColor=\"primary\"\r\n          scrollButtons=\"on\"\r\n          variant=\"scrollable\"\r\n          className={classes.tab}\r\n        >\r\n          <Tab label=\"ASAAS\" />\r\n\r\n        </Tabs>\r\n        <Grid xs={12} sm={12} md={12} item>\r\n          <FormControl className={classes.selectContainer}>\r\n            <TextField\r\n              id=\"asaas\"\r\n              name=\"asaas\"\r\n              margin=\"dense\"\r\n              label=\"Token Asaas\"\r\n              variant=\"outlined\"\r\n              value={asaasType}\r\n              onChange={async (e) => {\r\n                handleChangeAsaas(e.target.value);\r\n              }}\r\n            >\r\n            </TextField>\r\n            <FormHelperText>\r\n              {loadingAsaasType && \"Atualizando...\"}\r\n            </FormHelperText>\r\n          </FormControl>\r\n        </Grid>\r\n      </Grid>\r\n    </>\r\n  );\r\n}\r\n","const OnlyForSuperUser = ({ user, yes, no }) => user.super ? yes() : no();\r\n\r\nOnlyForSuperUser.defaultProps = {\r\n    user: {},\r\n\tyes: () => null,\r\n\tno: () => null,\r\n};\r\n\r\nexport default OnlyForSuperUser;","import React, { useContext, useEffect, useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Grid,\r\n  InputLabel,\r\n  MenuItem,\r\n  Select,\r\n  TextField,\r\n} from \"@material-ui/core\";\r\nimport { PaymentForm } from \"../PaymentForm\";\r\nimport { useFormik } from \"formik\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport InputMask from \"react-input-mask\";\r\nimport usePlans from \"../../hooks/usePlans\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport useCompanies from \"../../hooks/useCompanies\";\r\nimport api from \"../../services/api\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nconst CompanyForm = () => {\r\n  const { user } = useContext(AuthContext);\r\n  const { find: findCompany } = useCompanies();\r\n  const [plans, setPlans] = useState([]);\r\n  const { list: listPlans } = usePlans();\r\n  const [creditCard, setCreditCard] = useState({\r\n    name: \"\",\r\n    cardNumber: \"\",\r\n    expiryDate: \"\",\r\n    cvv: \"\",\r\n  });\r\n\r\n  const formik = useFormik({\r\n    initialValues: {\r\n      id: \"\",\r\n      name: \"\",\r\n      email: \"\",\r\n      phone: \"\",\r\n      password: \"\",\r\n      planId: \"\",\r\n      cpfCnpj: \"\",\r\n      postalCode: \"\",\r\n    },\r\n    onSubmit: (values) => {\r\n      handleSaveCompany(values);\r\n    },\r\n  });\r\n\r\n  useEffect(async () => {\r\n    setPlans(await listPlans());\r\n    formik.setValues(await findCompany(user.companyId));\r\n  }, []);\r\n\r\n  const handleSaveCompany = async () => {\r\n    try {\r\n      await api.put(`/companies/${user.companyId}`, \r\n        {...formik.values, creditCard }\r\n      );\r\n      toast.success(\"Dados atualizados com sucesso!\");\r\n    } catch (error) {\r\n      console.error(error);\r\n      toastError(error);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={formik.handleSubmit}>\r\n      <Grid container spacing={2} alignItems=\"flex-end\">\r\n        <Grid item md={4} xs={12}>\r\n          <TextField\r\n            name=\"name\"\r\n            value={formik.values.name}\r\n            error={formik.touched.name && !!formik.errors.name}\r\n            onChange={formik.handleChange}\r\n            variant=\"outlined\"\r\n            id=\"name\"\r\n            autoComplete=\"name\"\r\n            label=\"Nome da Empresa\"\r\n            required\r\n            fullWidth\r\n          />\r\n        </Grid>\r\n        <Grid item md={4} xs={12}>\r\n          <TextField\r\n            name=\"email\"\r\n            value={formik.values.email}\r\n            error={formik.touched.email && !!formik.errors.email}\r\n            onChange={formik.handleChange}\r\n            variant=\"outlined\"\r\n            id=\"email\"\r\n            label={i18n.t(\"signup.form.email\")}\r\n            required\r\n            autoComplete=\"email\"\r\n            fullWidth\r\n          />\r\n        </Grid>\r\n        <Grid item md={4} xs={12}>\r\n          <InputMask\r\n            mask=\"(99) 99999-9999\"\r\n            value={formik.values.phone}\r\n            onChange={formik.handleChange}\r\n          >\r\n            {(inputProps) => (\r\n              <TextField\r\n                {...inputProps}\r\n                type=\"tel\"\r\n                variant=\"outlined\"\r\n                id=\"phone\"\r\n                name=\"phone\"\r\n                error={formik.touched.phone && !!formik.errors.phone}\r\n                autoComplete=\"phone\"\r\n                label=\"Telefone com (DDD)\"\r\n                required\r\n                fullWidth\r\n              />\r\n            )}\r\n          </InputMask>\r\n        </Grid>\r\n        <Grid item md={4} xs={12}>\r\n          <TextField\r\n            autoComplete=\"postal-code\"\r\n            name=\"postalCode\"\r\n            value={formik.values.postalCode}\r\n            error={formik.touched.postalCode && !!formik.errors.postalCode}\r\n            onChange={formik.handleChange}\r\n            variant=\"outlined\"\r\n            id=\"postalCode\"\r\n            label=\"CEP\"\r\n            required\r\n            fullWidth\r\n          />\r\n        </Grid>\r\n        <Grid item md={8} xs={12}>\r\n          <InputLabel htmlFor=\"plan-selection\">Plano</InputLabel>\r\n          <Select\r\n            variant=\"outlined\"\r\n            id=\"plan-selection\"\r\n            label=\"Plano\"\r\n            name=\"planId\"\r\n            value={formik.values.planId}\r\n            onChange={formik.handleChange}\r\n            required\r\n            fullWidth\r\n          >\r\n            {plans.map((plan, key) => (\r\n              <MenuItem key={key} value={plan.id}>\r\n                {plan.name} - Atendentes: {plan.users} - WhatsApp:{\" \"}\r\n                {plan.connections} - Filas: {plan.queues} - R$ {plan.value}\r\n              </MenuItem>\r\n            ))}\r\n          </Select>\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          <PaymentForm onChange={setCreditCard} />\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          <Button type=\"submit\" color=\"primary\" variant=\"outlined\" fullWidth disabled={!formik.isValid || !formik.touched}>\r\n            Atualizar\r\n          </Button>\r\n        </Grid>\r\n      </Grid>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default CompanyForm;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport MainContainer from \"../../components/MainContainer\";\r\nimport MainHeader from \"../../components/MainHeader\";\r\nimport Title from \"../../components/Title\";\r\nimport { makeStyles, Paper, Tabs, Tab, Grid } from \"@material-ui/core\";\r\n\r\nimport TabPanel from \"../../components/TabPanel\";\r\n\r\nimport SchedulesForm from \"../../components/SchedulesForm\";\r\nimport CompaniesManager from \"../../components/CompaniesManager\";\r\nimport PlansManager from \"../../components/PlansManager\";\r\nimport HelpsManager from \"../../components/HelpsManager\";\r\nimport Options from \"../../components/Settings/Options\";\r\n\r\nimport { i18n } from \"../../translate/i18n.js\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport useCompanies from \"../../hooks/useCompanies\";\r\nimport useAuth from \"../../hooks/useAuth.js\";\r\nimport useSettings from \"../../hooks/useSettings\";\r\n\r\nimport OnlyForSuperUser from \"../../components/OnlyForSuperUser\";\r\nimport { PaymentForm } from \"../../components/PaymentForm/index.js\";\r\nimport CompanyForm from \"../../components/CompanyForm/index.js\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flex: 1,\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n  mainPaper: {\r\n    ...theme.scrollbarStyles,\r\n    overflowY: \"scroll\",\r\n    flex: 1,\r\n  },\r\n  tab: {\r\n    backgroundColor: theme.palette.options,\r\n    borderRadius: 4,\r\n  },\r\n  paper: {\r\n    ...theme.scrollbarStyles,\r\n    overflowY: \"scroll\",\r\n    padding: theme.spacing(2),\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    width: \"100%\",\r\n    maxHeight: \"100%\",\r\n  },\r\n  control: {\r\n    padding: theme.spacing(1),\r\n  },\r\n  textfield: {\r\n    width: \"100%\",\r\n  },\r\n}));\r\n\r\nconst SettingsCustom = () => {\r\n  const classes = useStyles();\r\n  const [tab, setTab] = useState(\"myPlan\");\r\n  const [schedules, setSchedules] = useState([]);\r\n  const [company, setCompany] = useState({});\r\n  const [loading, setLoading] = useState(false);\r\n  const [currentUser, setCurrentUser] = useState({});\r\n  const [settings, setSettings] = useState({});\r\n  const [schedulesEnabled, setSchedulesEnabled] = useState(false);\r\n\r\n  const { getCurrentUserInfo } = useAuth();\r\n  const { find, updateSchedules } = useCompanies();\r\n  const { getAll: getAllSettings } = useSettings();\r\n\r\n  useEffect(() => {\r\n    async function findData() {\r\n      setLoading(true);\r\n      try {\r\n        const companyId = localStorage.getItem(\"companyId\");\r\n        const company = await find(companyId);\r\n        const settingList = await getAllSettings();\r\n        setCompany(company);\r\n        setSchedules(company.schedules);\r\n        setSettings(settingList);\r\n\r\n        if (Array.isArray(settingList)) {\r\n          const scheduleType = settingList.find(\r\n            (d) => d.key === \"scheduleType\"\r\n          );\r\n          if (scheduleType) {\r\n            setSchedulesEnabled(scheduleType.value === \"company\");\r\n          }\r\n        }\r\n\r\n        const user = await getCurrentUserInfo();\r\n        setCurrentUser(user);\r\n      } catch (e) {\r\n        toast.error(e);\r\n      }\r\n      setLoading(false);\r\n    }\r\n    findData();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  const handleTabChange = (event, newValue) => {\r\n    async function findData() {\r\n      setLoading(true);\r\n      try {\r\n        const companyId = localStorage.getItem(\"companyId\");\r\n        const company = await find(companyId);\r\n        const settingList = await getAllSettings();\r\n        setCompany(company);\r\n        setSchedules(company.schedules);\r\n        setSettings(settingList);\r\n\r\n        if (Array.isArray(settingList)) {\r\n          const scheduleType = settingList.find(\r\n            (d) => d.key === \"scheduleType\"\r\n          );\r\n          if (scheduleType) {\r\n            setSchedulesEnabled(scheduleType.value === \"company\");\r\n          }\r\n        }\r\n\r\n        const user = await getCurrentUserInfo();\r\n        setCurrentUser(user);\r\n      } catch (e) {\r\n        toast.error(e);\r\n      }\r\n      setLoading(false);\r\n    }\r\n    findData();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n\r\n    setTab(newValue);\r\n  };\r\n\r\n  const handleSubmitSchedules = async (data) => {\r\n    setLoading(true);\r\n    try {\r\n      setSchedules(data);\r\n      await updateSchedules({ id: company.id, schedules: data });\r\n      toast.success(\"Horários atualizados com sucesso.\");\r\n    } catch (e) {\r\n      toast.error(e);\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  const isSuper = () => {\r\n    return currentUser.super;\r\n  };\r\n\r\n  return (\r\n    <MainContainer className={classes.root}>\r\n      <MainHeader>\r\n        <Title>{i18n.t(\"settings.title\")}</Title>\r\n      </MainHeader>\r\n      <Paper className={classes.mainPaper} elevation={1}>\r\n        <Tabs\r\n          value={tab}\r\n          indicatorColor=\"primary\"\r\n          textColor=\"primary\"\r\n          scrollButtons=\"on\"\r\n          variant=\"scrollable\"\r\n          onChange={handleTabChange}\r\n          className={classes.tab}\r\n        >\r\n          <Tab label=\"Meu plano\" value={\"myPlan\"} />\r\n          <Tab label=\"Opções\" value={\"options\"} />\r\n          {schedulesEnabled && <Tab label=\"Horários\" value={\"schedules\"} />}\r\n          {isSuper() ? <Tab label=\"Empresas\" value={\"companies\"} /> : null}\r\n          {isSuper() ? <Tab label=\"Planos\" value={\"plans\"} /> : null}\r\n          {isSuper() ? <Tab label=\"Ajuda\" value={\"helps\"} /> : null}\r\n        </Tabs>\r\n        <Paper className={classes.paper} elevation={0}>\r\n          <TabPanel\r\n            className={classes.container}\r\n            value={tab}\r\n            name={\"schedules\"}\r\n          >\r\n            <SchedulesForm\r\n              loading={loading}\r\n              onSubmit={handleSubmitSchedules}\r\n              initialValues={schedules}\r\n            />\r\n          </TabPanel>\r\n          <OnlyForSuperUser\r\n            user={currentUser}\r\n            yes={() => (\r\n              <TabPanel\r\n                className={classes.container}\r\n                value={tab}\r\n                name={\"companies\"}\r\n              >\r\n                <CompaniesManager />\r\n              </TabPanel>\r\n            )}\r\n          />\r\n          <OnlyForSuperUser\r\n            user={currentUser}\r\n            yes={() => (\r\n              <TabPanel\r\n                className={classes.container}\r\n                value={tab}\r\n                name={\"plans\"}\r\n              >\r\n                <PlansManager />\r\n              </TabPanel>\r\n            )}\r\n          />\r\n          <OnlyForSuperUser\r\n            user={currentUser}\r\n            yes={() => (\r\n              <TabPanel\r\n                className={classes.container}\r\n                value={tab}\r\n                name={\"helps\"}\r\n              >\r\n                <HelpsManager />\r\n              </TabPanel>\r\n            )}\r\n          />\r\n          <TabPanel className={classes.container} value={tab} name={\"options\"}>\r\n            <Options\r\n              settings={settings}\r\n              scheduleTypeChanged={(value) =>\r\n                setSchedulesEnabled(value === \"company\")\r\n              }\r\n            />\r\n          </TabPanel>\r\n          <TabPanel className={classes.container} value={tab} name={\"myPlan\"}>\r\n            <CompanyForm />\r\n          </TabPanel>\r\n        </Paper>\r\n      </Paper>\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nexport default SettingsCustom;\r\n","import React from 'react';\r\nimport { at } from 'lodash';\r\nimport { useField } from 'formik';\r\nimport { TextField } from '@material-ui/core';\r\n\r\nexport default function InputField(props) {\r\n  const { errorText, ...rest } = props;\r\n  const [field, meta] = useField(props);\r\n\r\n  function _renderHelperText() {\r\n    const [touched, error] = at(meta, 'touched', 'error');\r\n    if (touched && error) {\r\n      return error;\r\n    }\r\n  }\r\n\r\n  return (\r\n    <TextField\r\n      type=\"text\"\r\n      error={meta.touched && meta.error && true}\r\n      helperText={_renderHelperText()}\r\n      {...field}\r\n      {...rest}\r\n    />\r\n  );\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { at } from 'lodash';\r\nimport { useField } from 'formik';\r\nimport {\r\n  InputLabel,\r\n  FormControl,\r\n  Select,\r\n  MenuItem,\r\n  FormHelperText\r\n} from '@material-ui/core';\r\n\r\nfunction SelectField(props) {\r\n  const { label, data, ...rest } = props;\r\n  const [field, meta] = useField(props);\r\n  const { value: selectedValue } = field;\r\n  const [touched, error] = at(meta, 'touched', 'error');\r\n  const isError = touched && error && true;\r\n  function _renderHelperText() {\r\n    if (isError) {\r\n      return <FormHelperText>{error}</FormHelperText>;\r\n    }\r\n  }\r\n\r\n  return (\r\n    <FormControl {...rest} error={isError}>\r\n      <InputLabel>{label}</InputLabel>\r\n      <Select {...field} value={selectedValue ? selectedValue : ''}>\r\n        {data.map((item, index) => (\r\n          <MenuItem key={index} value={item.value}>\r\n            {item.label}\r\n          </MenuItem>\r\n        ))}\r\n      </Select>\r\n      {_renderHelperText()}\r\n    </FormControl>\r\n  );\r\n}\r\n\r\nSelectField.defaultProps = {\r\n  data: []\r\n};\r\n\r\nSelectField.propTypes = {\r\n  data: PropTypes.array.isRequired\r\n};\r\n\r\nexport default SelectField;\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { Grid, Typography } from \"@material-ui/core\";\r\nimport { InputField, SelectField } from \"../../FormFields\";\r\nimport { AuthContext } from \"../../../context/Auth/AuthContext\";\r\n\r\nconst countries = [\r\n  {\r\n    value: \"BR\",\r\n    label: \"Brasil\",\r\n  },\r\n  {\r\n    value: \"usa\",\r\n    label: \"United States\",\r\n  },\r\n];\r\n\r\nexport default function AddressForm(props) {\r\n\r\n  const { user } = useContext(AuthContext);\r\n  const [billingName, setBillingName] = useState(user.company.billingName);\r\n  const [addressZipCode, setAddressZipCode] = useState(user.company.addressZipCode);\r\n  const [addressStreet, setAddressStreet] = useState(user.company.addressStreet);\r\n  const [addressState, setAddressState] = useState(user.company.addressState);\r\n  const [addressCity, setAddressCity] = useState(user.company.addressCity);\r\n  const [addressDistrict, setAddressDistrict] = useState(user.company.addressDistrict);\r\n\r\n  const {\r\n    formField: {\r\n      firstName,\r\n      address1,\r\n      city,\r\n      state,\r\n      zipcode,\r\n      country,\r\n    },\r\n    setFieldValue\r\n  } = props;\r\n  useEffect(() => {\r\n    setFieldValue(\"firstName\", billingName)\r\n    setFieldValue(\"zipcode\", addressZipCode)\r\n    setFieldValue(\"address2\", addressStreet)\r\n    setFieldValue(\"state\", addressState)\r\n    setFieldValue(\"city\", addressCity)\r\n    setFieldValue(\"country\", addressDistrict)\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [])\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Typography variant=\"h6\" gutterBottom>\r\n        Vamos precisar de algumas informações\r\n      </Typography>\r\n      <Grid container spacing={3}>\r\n\r\n        <Grid item xs={6} sm={6}>\r\n          <InputField name={firstName.name} label={firstName.label} fullWidth\r\n            value={billingName}\r\n            onChange={(e) => {\r\n              setBillingName(e.target.value)\r\n              setFieldValue(\"firstName\", e.target.value)\r\n            }}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={6} sm={6}>\r\n          <SelectField\r\n            name={country.name}\r\n            label={country.label}\r\n            data={countries}\r\n            fullWidth\r\n            value={addressDistrict}\r\n            onChange={(e) => {\r\n              setAddressDistrict(e.target.value)\r\n              setFieldValue(\"country\", e.target.value)\r\n            }\r\n            }\r\n          />\r\n        </Grid>\r\n\r\n        <Grid item xs={4}>\r\n          <InputField\r\n            name={zipcode.name}\r\n            label={zipcode.label}\r\n            fullWidth\r\n            value={addressZipCode}\r\n            onChange={(e) => {\r\n              setAddressZipCode(e.target.value)\r\n              setFieldValue(\"zipcode\", e.target.value)\r\n            }}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={8}>\r\n          <InputField\r\n            name={address1.name}\r\n            label={address1.label}\r\n            fullWidth\r\n            value={addressStreet}\r\n            onChange={(e) => {\r\n              setAddressStreet(e.target.value)\r\n              setFieldValue(\"address2\", e.target.value)\r\n\r\n            }}\r\n          />\r\n        </Grid>\r\n\r\n        <Grid item xs={4}>\r\n          <InputField\r\n            name={state.name}\r\n            label={state.label}\r\n            fullWidth\r\n            value={addressState}\r\n            onChange={(e) => {\r\n              setAddressState(e.target.value)\r\n              setFieldValue(\"state\", e.target.value)\r\n\r\n            }}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={8}>\r\n          <InputField\r\n            name={city.name}\r\n            label={city.label}\r\n            fullWidth\r\n            value={addressCity}\r\n            onChange={(e) => {\r\n              setAddressCity(e.target.value)\r\n              setFieldValue(\"city\", e.target.value)\r\n            }}\r\n          />\r\n        </Grid>\r\n\r\n      </Grid>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, { useState, useEffect, useReducer } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport StarIcon from '@material-ui/icons/StarBorder';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MinimizeIcon from '@material-ui/icons/Minimize';\r\nimport AddIcon from '@material-ui/icons/Add';\r\n\r\nimport usePlans from \"../../../hooks/usePlans\";\r\nimport useCompanies from \"../../../hooks/useCompanies\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  '@global': {\r\n    ul: {\r\n      margin: 0,\r\n      padding: 0,\r\n      listStyle: 'none',\r\n    },\r\n  },\r\n  margin: {\r\n    margin: theme.spacing(1),\r\n  },\r\n\r\n\r\n  cardHeader: {\r\n    backgroundColor:\r\n      theme.palette.type === 'light' ? theme.palette.grey[200] : theme.palette.grey[700],\r\n  },\r\n  cardPricing: {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    alignItems: 'baseline',\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n  footer: {\r\n    borderTop: `1px solid ${theme.palette.divider}`,\r\n    marginTop: theme.spacing(8),\r\n    paddingTop: theme.spacing(3),\r\n    paddingBottom: theme.spacing(3),\r\n    [theme.breakpoints.up('sm')]: {\r\n      paddingTop: theme.spacing(6),\r\n      paddingBottom: theme.spacing(6),\r\n    },\r\n  },\r\n\r\n  customCard: {\r\n    display: \"flex\",\r\n    marginTop: \"16px\",\r\n    alignItems: \"center\",\r\n    flexDirection: \"column\",\r\n  },\r\n  custom: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"space-between\",\r\n  }\r\n}));\r\n\r\n\r\nexport default function Pricing(props) {\r\n  const {\r\n    setFieldValue,\r\n    setActiveStep,\r\n    activeStep,\r\n  } = props;\r\n\r\n  const handleChangeAdd = (event, newValue) => {\r\n    if (newValue < 3) return\r\n\r\n    const newPrice = 11.00;\r\n\r\n    setUsersPlans(newValue);\r\n    setCustomValuePlans(customValuePlans + newPrice);\r\n  }\r\n\r\n  const handleChangeMin = (event, newValue) => {\r\n    if (newValue < 3) return\r\n\r\n    const newPrice = 11;\r\n\r\n    setUsersPlans(newValue);\r\n    setCustomValuePlans(customValuePlans - newPrice);\r\n  }\r\n\r\n  const handleChangeConnectionsAdd = (event, newValue) => {\r\n    if (newValue < 3) return\r\n    const newPrice = 20.00;\r\n    setConnectionsPlans(newValue);\r\n    setCustomValuePlans(customValuePlans + newPrice);\r\n  }\r\n\r\n  const handleChangeConnectionsMin = (event, newValue) => {\r\n    if (newValue < 3) return\r\n    const newPrice = 20;\r\n    setConnectionsPlans(newValue);\r\n    setCustomValuePlans(customValuePlans - newPrice);\r\n  }\r\n\r\n  const { list, finder } = usePlans();\r\n  const { find } = useCompanies();\r\n\r\n  const classes = useStyles();\r\n  const [usersPlans, setUsersPlans] = React.useState(3);\r\n  const [companiesPlans, setCompaniesPlans] = useState(0);\r\n  const [connectionsPlans, setConnectionsPlans] = React.useState(3);\r\n  const [storagePlans, setStoragePlans] = React.useState([]);\r\n  const [customValuePlans, setCustomValuePlans] = React.useState(49.00);\r\n  const [loading, setLoading] = React.useState(false);\r\n  const companyId = localStorage.getItem(\"companyId\");\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      await loadCompanies();\r\n    }\r\n    fetchData();\r\n  }, [])\r\n\r\n  const loadCompanies = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const companiesList = await find(companyId);\r\n      setCompaniesPlans(companiesList.planId);\r\n      await loadPlans(companiesList.planId);\r\n    } catch (e) {\r\n      console.log(e);\r\n      // toast.error(\"Não foi possível carregar a lista de registros\");\r\n    }\r\n    setLoading(false);\r\n  };\r\n  const loadPlans = async (companiesPlans) => {\r\n    setLoading(true);\r\n    try {\r\n      const plansCompanies = await finder(companiesPlans);\r\n      const plans = []\r\n\r\n      //plansCompanies.forEach((plan) => {\r\n      plans.push({\r\n        title: plansCompanies.name,\r\n        planId: plansCompanies.id,\r\n        price: plansCompanies.value,\r\n        description: [\r\n          `${plansCompanies.users} Usuários`,\r\n          `${plansCompanies.connections} Conexão`,\r\n          `${plansCompanies.queues} Filas`\r\n        ],\r\n        users: plansCompanies.users,\r\n        connections: plansCompanies.connections,\r\n        queues: plansCompanies.queues,\r\n        buttonText: 'SELECIONAR',\r\n        buttonVariant: 'outlined',\r\n      })\r\n\r\n      // setStoragePlans(data);\r\n      //});\r\n      setStoragePlans(plans);\r\n    } catch (e) {\r\n      console.log(e);\r\n      // toast.error(\"Não foi possível carregar a lista de registros\");\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n\r\n  const tiers = storagePlans\r\n  return (\r\n    <React.Fragment>\r\n      <Grid container spacing={3}>\r\n        {tiers.map((tier) => (\r\n          // Enterprise card is full width at sm breakpoint\r\n          <Grid item key={tier.title} xs={12} sm={tier.title === 'Enterprise' ? 12 : 12} md={12}>\r\n            <Card>\r\n              <CardHeader\r\n                title={tier.title}\r\n                subheader={tier.subheader}\r\n                titleTypographyProps={{ align: 'center' }}\r\n                subheaderTypographyProps={{ align: 'center' }}\r\n                action={tier.title === 'Pro' ? <StarIcon /> : null}\r\n                className={classes.cardHeader}\r\n              />\r\n              <CardContent>\r\n                <div className={classes.cardPricing}>\r\n                  <Typography component=\"h2\" variant=\"h3\" color=\"textPrimary\">\r\n                    {\r\n\r\n                      <React.Fragment>\r\n                        R${tier.price.toLocaleString('pt-br', { minimumFractionDigits: 2 })}\r\n                      </React.Fragment>\r\n                    }\r\n                  </Typography>\r\n                  <Typography variant=\"h6\" color=\"textSecondary\">\r\n                    /mês\r\n                  </Typography>\r\n                </div>\r\n                <ul>\r\n                  {tier.description.map((line) => (\r\n                    <Typography component=\"li\" variant=\"subtitle1\" align=\"center\" key={line}>\r\n                      {line}\r\n                    </Typography>\r\n                  ))}\r\n                </ul>\r\n              </CardContent>\r\n              <CardActions>\r\n                <Button\r\n                  fullWidth\r\n                  variant={tier.buttonVariant}\r\n                  color=\"primary\"\r\n                  onClick={() => {\r\n                    if (tier.custom) {\r\n                      setFieldValue(\"plan\", JSON.stringify({\r\n                        users: usersPlans,\r\n                        connections: connectionsPlans,\r\n                        price: customValuePlans,\r\n                      }));\r\n                    } else {\r\n                      setFieldValue(\"plan\", JSON.stringify(tier));\r\n                    }\r\n                    setActiveStep(activeStep + 1);\r\n                  }\r\n                  }\r\n                >\r\n                  {tier.buttonText}\r\n                </Button>\r\n              </CardActions>\r\n            </Card>\r\n          </Grid>\r\n        ))}\r\n      </Grid>\r\n    </React.Fragment>\r\n  );\r\n}","import { makeStyles } from '@material-ui/core/styles';\r\nexport default makeStyles(theme => ({\r\n  listItem: {\r\n    padding: theme.spacing(1, 0)\r\n  },\r\n  total: {\r\n    fontWeight: '700'\r\n  },\r\n  title: {\r\n    marginTop: theme.spacing(2)\r\n  }\r\n}));\r\n","import React from 'react';\r\nimport { Typography, Grid } from '@material-ui/core';\r\nimport useStyles from './styles';\r\n\r\nfunction PaymentDetails(props) {\r\n  const { formValues } = props;\r\n  const classes = useStyles();\r\n  const { plan } = formValues;\r\n\r\n  const newPlan = JSON.parse(plan);\r\n  const { users, connections, price } = newPlan;\r\n  return (\r\n    <Grid item xs={12} sm={12}>\r\n      <Typography variant=\"h6\" gutterBottom className={classes.title}>\r\n        Detalhes do plano\r\n      </Typography>\r\n      <Typography gutterBottom>Usuários: {users}</Typography>\r\n      <Typography gutterBottom>Whatsapps: {connections}</Typography>\r\n      <Typography gutterBottom>Cobrança: Mensal</Typography>\r\n      <Typography gutterBottom>Total: R${price.toLocaleString('pt-br', {minimumFractionDigits: 2})}</Typography>\r\n    </Grid>\r\n  );\r\n}\r\n\r\nexport default PaymentDetails;\r\n","import ReviewOrder from './ReviewOrder';\r\nexport default ReviewOrder;\r\n","import React from 'react';\r\nimport { useFormikContext } from 'formik';\r\nimport { Typography, Grid } from '@material-ui/core';\r\nimport ShippingDetails from './ShippingDetails';\r\nimport PaymentDetails from './PaymentDetails';\r\n\r\nexport default function ReviewOrder() {\r\n  const { values: formValues } = useFormikContext();\r\n  return (\r\n    <React.Fragment>\r\n      <Typography variant=\"h6\" gutterBottom>\r\n        Resumo da assinatura\r\n      </Typography>\r\n      <Grid container spacing={2}>\r\n        <ShippingDetails formValues={formValues} />\r\n      </Grid>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import styled from 'styled-components';\r\n\r\nexport const Container = styled.div`\r\n  footer {\r\n    margin-top: 30px;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    width: 100%;\r\n\r\n    @media (max-width: 768px) {\r\n      flex-direction: column;\r\n      .checkout-buttons {\r\n        display: flex;\r\n        flex-direction: column-reverse;\r\n        width: 100%;\r\n\r\n        button {\r\n          width: 100%;\r\n          margin-top: 16px;\r\n          margin-left: 0;\r\n        }\r\n      }\r\n    }\r\n\r\n    button {\r\n      margin-left: 16px;\r\n    }\r\n  }\r\n`;\r\nexport const Total = styled.div`\r\n  display: flex;\r\n  align-items: baseline;\r\n\r\n  span {\r\n    color: #333;\r\n    font-weight: bold;\r\n  }\r\n\r\n  strong {\r\n    color: #333;\r\n    font-size: 28px;\r\n    margin-left: 5px;\r\n  }\r\n\r\n  @media (max-width: 768px) {\r\n    min-width: 100%;\r\n    justify-content: space-between;\r\n  }\r\n`;\r\n\r\nexport const SuccessContent = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n\r\n  > h2 {\r\n    text-align: center;\r\n  }\r\n\r\n  > svg {\r\n    margin-top: 16px;\r\n  }\r\n\r\n  > span {\r\n    margin-top: 24px;\r\n    text-align: center;\r\n  }\r\n\r\n  > p,\r\n  strong {\r\n    margin-top: 8px;\r\n    font-size: 9px;\r\n    color: #999;\r\n  }\r\n\r\n  .copy-button {\r\n    font-size: 14px;\r\n    cursor: pointer;\r\n    text-align: center;\r\n    user-select: none;\r\n    min-height: 56px;\r\n    display: inline-flex;\r\n    -webkit-box-pack: center;\r\n    justify-content: center;\r\n    -webkit-box-align: center;\r\n    align-items: center;\r\n    background-color: #f9f9f9;\r\n    color: #000;\r\n    -webkit-appearance: none !important;\r\n    outline: none;\r\n    margin-top: 16px;\r\n    width: 256px;\r\n    font-weight: 600;\r\n    text-transform: uppercase;\r\n    border: none;\r\n\r\n    > span {\r\n      margin-right: 8px;\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CheckoutWrapper = styled.div`\r\n  width: 100%;\r\n  margin: 0 auto 0;\r\n  max-width: 1110px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  -webkit-box-align: center;\r\n  align-items: center;\r\n  padding: 50px 95px;\r\n  background: #fff;\r\n  @media (max-width: 768px) {\r\n    padding: 16px 24px;\r\n`;","import React, { useState, useEffect, useContext } from 'react';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport QRCode from 'react-qr-code';\r\nimport { SuccessContent, Total } from './style';\r\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\r\nimport { FaCopy, FaCheckCircle } from 'react-icons/fa';\r\nimport { SocketContext } from \"../../../context/Socket/SocketContext\";\r\nimport { useDate } from \"../../../hooks/useDate\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nfunction CheckoutSuccess(props) {\r\n\r\n  const { pix } = props;\r\n  const [pixString,] = useState(pix.qrcode.qrcode);\r\n  const [copied, setCopied] = useState(false);\r\n  const history = useHistory();\r\n\r\n  const { dateToClient } = useDate();\r\n\r\n  const socketManager = useContext(SocketContext);\r\n\r\n  useEffect(() => {\r\n    const companyId = localStorage.getItem(\"companyId\");\r\n    const socket = socketManager.getSocket(companyId);\r\n    \r\n    socket.on(`company-${companyId}-payment`, (data) => {\r\n\r\n      if (data.action === \"CONCLUIDA\") {\r\n        toast.success(`Sua licença foi renovada até ${dateToClient(data.company.dueDate)}!`);\r\n        setTimeout(() => {\r\n          history.push(\"/\");\r\n        }, 4000);\r\n      }\r\n    });\r\n  }, [history, socketManager]);\r\n\r\n  const handleCopyQR = () => {\r\n    setTimeout(() => {\r\n      setCopied(false);\r\n    }, 1 * 1000);\r\n    setCopied(true);\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Total>\r\n        <span>TOTAL</span>\r\n        <strong>R${pix.valor.original.toLocaleString('pt-br', { minimumFractionDigits: 2 })}</strong>\r\n      </Total>\r\n      <SuccessContent>\r\n        <QRCode value={pixString} />\r\n        <CopyToClipboard text={pixString} onCopy={handleCopyQR}>\r\n          <button className=\"copy-button\" type=\"button\">\r\n            {copied ? (\r\n              <>\r\n                <span>Copiado</span>\r\n                <FaCheckCircle size={18} />\r\n              </>\r\n            ) : (\r\n              <>\r\n                <span>Copiar código QR</span>\r\n                <FaCopy size={18} />\r\n              </>\r\n            )}\r\n          </button>\r\n        </CopyToClipboard>\r\n        <span>\r\n          Para finalizar, basta realizar o pagamento escaneando ou colando o\r\n          código Pix acima :)\r\n        </span>\r\n      </SuccessContent>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default CheckoutSuccess;\r\n","export default {\r\n  formId: 'checkoutForm',\r\n  formField: {\r\n    firstName: {\r\n      name: 'firstName',\r\n      label: 'Nome completo*',\r\n      requiredErrorMsg: 'O nome completo é obrigatório'\r\n    },\r\n    lastName: {\r\n      name: 'lastName',\r\n      label: 'Last name*',\r\n      requiredErrorMsg: 'Last name is required'\r\n    },\r\n    address1: {\r\n      name: 'address2',\r\n      label: 'Endereço*',\r\n      requiredErrorMsg: 'O Endereço é obrigatório'\r\n    },\r\n\r\n    city: {\r\n      name: 'city',\r\n      label: 'Cidade*',\r\n      requiredErrorMsg: 'Cidade é obrigatória'\r\n    },\r\n    state: {\r\n      name: 'state',\r\n      label: 'Estado*',\r\n      requiredErrorMsg: 'Cidade é obrigatória'\r\n    },\r\n    zipcode: {\r\n      name: 'zipcode',\r\n      label: 'CEP*',\r\n      requiredErrorMsg: 'CEP é obrigatório',\r\n      invalidErrorMsg: 'Formato de CEP inválido'\r\n    },\r\n    country: {\r\n      name: 'country',\r\n      label: 'País*',\r\n      requiredErrorMsg: 'País é obrigatório'\r\n    },\r\n    useAddressForPaymentDetails: {\r\n      name: 'useAddressForPaymentDetails',\r\n      label: 'Use this address for payment details'\r\n    },\r\n    invoiceId: {\r\n      name: 'invoiceId',\r\n      label: 'Use this invoiceId'\r\n    },\r\n    nameOnCard: {\r\n      name: 'nameOnCard',\r\n      label: 'Name on card*',\r\n      requiredErrorMsg: 'Name on card is required'\r\n    },\r\n    cardNumber: {\r\n      name: 'cardNumber',\r\n      label: 'Card number*',\r\n      requiredErrorMsg: 'Card number is required',\r\n      invalidErrorMsg: 'Card number is not valid (e.g. 4111111111111)'\r\n    },\r\n    expiryDate: {\r\n      name: 'expiryDate',\r\n      label: 'Expiry date*',\r\n      requiredErrorMsg: 'Expiry date is required',\r\n      invalidErrorMsg: 'Expiry date is not valid'\r\n    },\r\n    cvv: {\r\n      name: 'cvv',\r\n      label: 'CVV*',\r\n      requiredErrorMsg: 'CVV is required',\r\n      invalidErrorMsg: 'CVV is invalid (e.g. 357)'\r\n    }\r\n  }\r\n};\r\n","import * as Yup from 'yup';\r\nimport checkoutFormModel from './checkoutFormModel';\r\nconst {\r\n  formField: {\r\n    firstName,\r\n    address1,\r\n    city,\r\n    zipcode,\r\n    country,\r\n  }\r\n} = checkoutFormModel;\r\n\r\n\r\nexport default [\r\n  Yup.object().shape({\r\n    [firstName.name]: Yup.string().required(`${firstName.requiredErrorMsg}`),\r\n    [address1.name]: Yup.string().required(`${address1.requiredErrorMsg}`),\r\n    [city.name]: Yup.string()\r\n      .nullable()\r\n      .required(`${city.requiredErrorMsg}`),\r\n    [zipcode.name]: Yup.string()\r\n      .required(`${zipcode.requiredErrorMsg}`),\r\n\r\n    [country.name]: Yup.string()\r\n      .nullable()\r\n      .required(`${country.requiredErrorMsg}`)\r\n  }),\r\n\r\n];\r\n","import checkoutFormModel from './checkoutFormModel';\r\nconst {\r\n  formField: {\r\n    firstName,\r\n    lastName,\r\n    address1,\r\n    city,\r\n    state,\r\n    zipcode,\r\n    country,\r\n    useAddressForPaymentDetails,\r\n    nameOnCard,\r\n    cardNumber,\r\n    invoiceId,\r\n    cvv\r\n  }\r\n} = checkoutFormModel;\r\n\r\nexport default {\r\n  [firstName.name]: '',\r\n  [lastName.name]: '',\r\n  [address1.name]: '',\r\n  [city.name]: '',\r\n  [state.name]: '',\r\n  [zipcode.name]: '',\r\n  [country.name]: '',\r\n  [useAddressForPaymentDetails.name]: false,\r\n  [nameOnCard.name]: '',\r\n  [cardNumber.name]: '',\r\n  [invoiceId.name]: '',\r\n  [cvv.name]: ''\r\n};\r\n","import { makeStyles } from '@material-ui/core/styles';\r\nexport default makeStyles(theme => ({\r\n  stepper: {\r\n    padding: theme.spacing(3, 0, 5)\r\n  },\r\n  buttons: {\r\n    display: 'flex',\r\n    justifyContent: 'flex-end'\r\n  },\r\n  button: {\r\n    marginTop: theme.spacing(3),\r\n    marginLeft: theme.spacing(1)\r\n  },\r\n  wrapper: {\r\n    margin: theme.spacing(1),\r\n    position: 'relative'\r\n  },\r\n  buttonProgress: {\r\n    position: 'absolute',\r\n    top: '50%',\r\n    left: '50%'\r\n  }\r\n}));\r\n","import CheckoutPage from './CheckoutPage';\r\nexport default CheckoutPage;\r\n","import React, { useContext, useState } from \"react\";\r\nimport {\r\n  Stepper,\r\n  Step,\r\n  StepLabel,\r\n  Button,\r\n  Typography,\r\n  CircularProgress,\r\n} from \"@material-ui/core\";\r\nimport { Formik, Form } from \"formik\";\r\n\r\nimport AddressForm from \"./Forms/AddressForm\";\r\nimport PaymentForm from \"./Forms/PaymentForm\";\r\nimport ReviewOrder from \"./ReviewOrder\";\r\nimport CheckoutSuccess from \"./CheckoutSuccess\";\r\n\r\nimport api from \"../../services/api\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { toast } from \"react-toastify\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\n\r\n\r\nimport validationSchema from \"./FormModel/validationSchema\";\r\nimport checkoutFormModel from \"./FormModel/checkoutFormModel\";\r\nimport formInitialValues from \"./FormModel/formInitialValues\";\r\n\r\nimport useStyles from \"./styles\";\r\nimport Invoices from \"../../pages/Financeiro\";\r\n\r\n\r\nexport default function CheckoutPage({ Invoice, handleClose }) {\r\n  const steps = [\"Dados\", \"Personalizar\", \"Revisar\"];\r\n  const { formId, formField } = checkoutFormModel;\r\n  \r\n  const classes = useStyles();\r\n  const [activeStep, setActiveStep] = useState(1);\r\n  const [invoiceId, setinvoiceId] = useState(Invoice.id);\r\n  const currentValidationSchema = validationSchema[activeStep];\r\n  const isLastStep = activeStep === steps.length - 1;\r\n  const { user } = useContext(AuthContext);\r\n\r\nfunction _renderStepContent(step, setFieldValue, setActiveStep, values ) {\r\n\r\n  switch (step) {\r\n    case 0:\r\n      return <AddressForm formField={formField} values={values} setFieldValue={setFieldValue}  />;\r\n    case 1:\r\n      return <PaymentForm \r\n      formField={formField} \r\n      setFieldValue={setFieldValue} \r\n      setActiveStep={setActiveStep} \r\n      activeStep={step} \r\n      invoiceId={invoiceId}\r\n      values={values}\r\n      />;\r\n    case 2:\r\n      return <ReviewOrder />;\r\n    default:\r\n      return <div>Not Found</div>;\r\n  }\r\n}\r\n\r\n\r\n  async function _submitForm(values, actions) {\r\n    try {\r\n      const plan = JSON.parse(values.plan);\r\n      const newValues = {\r\n        firstName: values.firstName,\r\n        lastName: values.lastName,\r\n        address2: values.address2,\r\n        city: values.city,\r\n        state: values.state,\r\n        zipcode: values.zipcode,\r\n        country: values.country,\r\n        useAddressForPaymentDetails: values.useAddressForPaymentDetails,\r\n        nameOnCard: values.nameOnCard,\r\n        cardNumber: values.cardNumber,\r\n        cvv: values.cvv,\r\n        plan: values.plan,\r\n        planId: plan.id,\r\n        price: plan.price,\r\n        users: plan.users,\r\n        connections: plan.connections,\r\n        invoiceId: invoiceId\r\n      }\r\n\r\n      const { data } = await api.post(\"/asaas/payment-link\", newValues);\r\n      if (data.url) {\r\n        window.open(data.url, '_blank');\r\n      }\r\n      actions.setSubmitting(false);\r\n      setActiveStep(activeStep + 1);\r\n      toast.success(\"Assinatura realizada com sucesso!, aguardando a realização do pagamento\");\r\n      if (handleClose) {\r\n        handleClose();\r\n      }\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  }\r\n\r\n  function _handleSubmit(values, actions) {\r\n    if (isLastStep) {\r\n      _submitForm(values, actions);\r\n    } else {\r\n      setActiveStep(activeStep + 1);\r\n      actions.setTouched({});\r\n      actions.setSubmitting(false);\r\n    }\r\n  }\r\n\r\n  function _handleBack() {\r\n    setActiveStep(activeStep - 1);\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Typography component=\"h1\" variant=\"h4\" align=\"center\">\r\n        Falta pouco!\r\n      </Typography>\r\n      <Stepper activeStep={activeStep} className={classes.stepper}>\r\n        {steps.map((label) => (\r\n          <Step key={label}>\r\n            <StepLabel>{label}</StepLabel>\r\n          </Step>\r\n        ))}\r\n      </Stepper>\r\n      <React.Fragment>\r\n        {/* {activeStep === steps.length ? (\r\n          <CheckoutSuccess pix={datePayment} />\r\n        ) : ( */}\r\n          <Formik\r\n            initialValues={{\r\n              ...user, \r\n              ...formInitialValues\r\n            }}\r\n            validationSchema={currentValidationSchema}\r\n            onSubmit={_handleSubmit}\r\n          >\r\n            {({ isSubmitting, setFieldValue, values }) => (\r\n              <Form id={formId}>\r\n                {_renderStepContent(activeStep, setFieldValue, setActiveStep, values)}\r\n\r\n                <div className={classes.buttons}>\r\n                  {activeStep !== 1 && (\r\n                    <Button onClick={_handleBack} className={classes.button}>\r\n                      VOLTAR\r\n                    </Button>\r\n                  )}\r\n                  <div className={classes.wrapper}>\r\n                    {activeStep !== 1 && (\r\n                      <Button\r\n                        disabled={isSubmitting}\r\n                        type=\"submit\"\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        className={classes.button}\r\n                      >\r\n                        {isLastStep ? \"PAGAR\" : \"PRÓXIMO\"}\r\n                      </Button>\r\n                    )}\r\n                    {isSubmitting && (\r\n                      <CircularProgress\r\n                        size={24}\r\n                        className={classes.buttonProgress}\r\n                      />\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </Form>\r\n            )}\r\n          </Formik>\r\n        {/* )} */}\r\n      </React.Fragment>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, { useEffect, useRef } from \"react\";\r\n\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { green } from \"@material-ui/core/colors\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport CheckoutPage from \"../CheckoutPage/\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    flexWrap: \"wrap\",\r\n  },\r\n  textField: {\r\n    marginRight: theme.spacing(1),\r\n    flex: 1,\r\n  },\r\n\r\n  extraAttr: {\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n\r\n  btnWrapper: {\r\n    position: \"relative\",\r\n  },\r\n\r\n  buttonProgress: {\r\n    color: green[500],\r\n    position: \"absolute\",\r\n    top: \"50%\",\r\n    left: \"50%\",\r\n    marginTop: -12,\r\n    marginLeft: -12,\r\n  },\r\n}));\r\n\r\n\r\nconst ContactModal = ({ open, onClose, Invoice, contactId, initialValues, onSave }) => {\r\n  const classes = useStyles();\r\n  const isMounted = useRef(true);\r\n\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      isMounted.current = false;\r\n    };\r\n  }, []);\r\n\r\n\r\n  const handleClose = () => {\r\n    onClose();\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Dialog open={open} onClose={handleClose} maxWidth=\"md\" scroll=\"paper\">\r\n        <DialogContent dividers>\r\n          <CheckoutPage\r\n            Invoice={Invoice}\r\n            handleClose={handleClose}\r\n          />\r\n        </DialogContent>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ContactModal;\r\n","import React, { useState, useEffect, useReducer, useContext } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\n\r\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\n\r\nimport MainContainer from \"../../components/MainContainer\";\r\nimport MainHeader from \"../../components/MainHeader\";\r\nimport MainHeaderButtonsWrapper from \"../../components/MainHeaderButtonsWrapper\";\r\nimport Title from \"../../components/Title\";\r\nimport SubscriptionModal from \"../../components/SubscriptionModal\";\r\nimport api from \"../../services/api\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport TableRowSkeleton from \"../../components/TableRowSkeleton\";\r\nimport UserModal from \"../../components/UserModal\";\r\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nimport moment from \"moment\";\r\nimport usePlans from \"../../hooks/usePlans\";\r\nimport { Grid, InputLabel, MenuItem, Select } from \"@material-ui/core\";\r\nimport { Field } from \"formik\";\r\nimport useAuth from \"../../hooks/useAuth.js\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\n\r\nconst reducer = (state, action) => {\r\n  if (action.type === \"LOAD_INVOICES\") {\r\n    const invoices = action.payload;\r\n    const newUsers = [];\r\n\r\n    invoices.forEach((user) => {\r\n      const userIndex = state.findIndex((u) => u.id === user.id);\r\n      if (userIndex !== -1) {\r\n        state[userIndex] = user;\r\n      } else {\r\n        newUsers.push(user);\r\n      }\r\n    });\r\n\r\n    return [...state, ...newUsers];\r\n  }\r\n\r\n  if (action.type === \"UPDATE_USERS\") {\r\n    const user = action.payload;\r\n    const userIndex = state.findIndex((u) => u.id === user.id);\r\n\r\n    if (userIndex !== -1) {\r\n      state[userIndex] = user;\r\n      return [...state];\r\n    } else {\r\n      return [user, ...state];\r\n    }\r\n  }\r\n\r\n  if (action.type === \"DELETE_USER\") {\r\n    const userId = action.payload;\r\n\r\n    const userIndex = state.findIndex((u) => u.id === userId);\r\n    if (userIndex !== -1) {\r\n      state.splice(userIndex, 1);\r\n    }\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"RESET\") {\r\n    return [];\r\n  }\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainPaper: {\r\n    flex: 1,\r\n    padding: theme.spacing(1),\r\n    overflowY: \"scroll\",\r\n    ...theme.scrollbarStyles,\r\n  },\r\n}));\r\n\r\nconst Invoices = () => {\r\n  const classes = useStyles();\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [pageNumber, setPageNumber] = useState(1);\r\n  const [hasMore, setHasMore] = useState(false);\r\n  const [searchParam, setSearchParam] = useState(\"\");\r\n  const [invoices, dispatch] = useReducer(reducer, []);\r\n  const [storagePlans, setStoragePlans] = React.useState([]);\r\n  const [selectedContactId, setSelectedContactId] = useState(null);\r\n  const [contactModalOpen, setContactModalOpen] = useState(false);\r\n  const { user } = useContext(AuthContext);\r\n  const [selectedPlanId, setSelectedPlanId] = useState(user?.company?.planId);\r\n\r\n  const [plans, setPlans] = useState([]);\r\n\tconst { list: listPlans } = usePlans();\r\n\r\n\tuseEffect(() => {\r\n\t\tasync function fetchData() {\r\n\t\t\tconst list = await listPlans();\r\n\t\t\tsetPlans(list);\r\n\t\t}\r\n\t\tfetchData();\r\n\t}, []);\r\n\r\n\r\n  const handleOpenContactModal = (invoices) => {\r\n    setStoragePlans(invoices);\r\n    setSelectedContactId(null);\r\n    setContactModalOpen(true);\r\n  };\r\n\r\n\r\n  const handleCloseContactModal = () => {\r\n    setSelectedContactId(null);\r\n    setContactModalOpen(false);\r\n    setPageNumber(1);\r\n  };\r\n  useEffect(() => {\r\n    dispatch({ type: \"RESET\" });\r\n    setPageNumber(1);\r\n  }, [searchParam]);\r\n\r\n  const fetchInvoices = async () => {\r\n    try {\r\n      const { data } = await api.get(\"/invoices/all\", {\r\n        params: { searchParam, pageNumber },\r\n      });\r\n      dispatch({ type: \"LOAD_INVOICES\", payload: data });\r\n      setHasMore(data.hasMore);\r\n      setLoading(false);\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const delayDebounceFn = setTimeout(() => {    \r\n      fetchInvoices();\r\n    }, 500);\r\n    return () => clearTimeout(delayDebounceFn);\r\n  }, [searchParam, pageNumber]);\r\n\r\n\r\n  const loadMore = () => {\r\n    setPageNumber((prevState) => prevState + 1);\r\n  };\r\n\r\n  const handleScroll = (e) => {\r\n    if (!hasMore || loading) return;\r\n    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\r\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\r\n      loadMore();\r\n    }\r\n  };\r\n  const rowStyle = (record) => {\r\n    const hoje = moment(moment()).format(\"DD/MM/yyyy\");\r\n    const vencimento = moment(record.dueDate).format(\"DD/MM/yyyy\");\r\n    var diff = moment(vencimento, \"DD/MM/yyyy\").diff(moment(hoje, \"DD/MM/yyyy\"));\r\n    var dias = moment.duration(diff).asDays();    \r\n    if (dias < 0 && record.status !== \"paid\") {\r\n      return { backgroundColor: \"#ffbcbc9c\" };\r\n    }\r\n  };\r\n\r\n  const rowStatus = (record) => {\r\n    const hoje = moment(moment()).format(\"DD/MM/yyyy\");\r\n    const vencimento = moment(record.dueDate).format(\"DD/MM/yyyy\");\r\n    var diff = moment(vencimento, \"DD/MM/yyyy\").diff(moment(hoje, \"DD/MM/yyyy\"));\r\n    var dias = moment.duration(diff).asDays();    \r\n    const status = record.status;\r\n    if (status === \"paid\") {\r\n      return \"Pago\";\r\n    }\r\n\r\n    if (status === \"deleted\") {\r\n      return \"Cancelado\";\r\n    }\r\n\r\n    if (dias < 0) {\r\n      return \"Vencido\";\r\n    } else {\r\n      return \"Em Aberto\"\r\n    }\r\n\r\n  }\r\n\r\n  const handleChangePlan = async (ev) => {\r\n    try {\r\n      const value = ev.target.value;\r\n      setSelectedPlanId(value);\r\n\r\n      await api.put(`/companies/${user.company.id}/plan`, {planId: value});\r\n      fetchInvoices();\r\n      toast.success('Sua assinatura foi atualizada com sucesso.');\r\n    } catch (error) {\r\n      toastError(error);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <MainContainer>\r\n      <SubscriptionModal\r\n        open={contactModalOpen}\r\n        onClose={handleCloseContactModal}\r\n        aria-labelledby=\"form-dialog-title\"\r\n        Invoice={storagePlans}\r\n        contactId={selectedContactId}\r\n\r\n      ></SubscriptionModal>\r\n      <MainHeader>\r\n        <Grid container  justifyContent=\"space-between\">\r\n          <Grid item>\r\n            <Title>Faturas</Title>\r\n          </Grid>\r\n          <Grid item xs={4}>\r\n            <InputLabel htmlFor=\"plan-selection\">Plano</InputLabel>\r\n            <Select\r\n              variant=\"outlined\"\r\n              value={selectedPlanId}\r\n              fullWidth\r\n              id=\"plan-selection\"\r\n              label=\"Plano\"\r\n              onChange={handleChangePlan}\r\n              required\r\n            >\r\n              {plans.map((plan, key) => (\r\n                <MenuItem key={key} value={plan.id}>\r\n                  {plan.name} - Atendentes: {plan.users} - WhatsApp: {plan.connections} - Filas: {plan.queues} - R$ {plan.value}\r\n                </MenuItem>\r\n              ))}\r\n            </Select>\r\n        </Grid>\r\n        </Grid>\r\n      </MainHeader>\r\n      <Paper\r\n        className={classes.mainPaper}\r\n        variant=\"outlined\"\r\n        onScroll={handleScroll}\r\n      >\r\n        <Table size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell align=\"center\">Id</TableCell>\r\n              <TableCell align=\"center\">Detalhes</TableCell>\r\n              <TableCell align=\"center\">Valor</TableCell>\r\n              <TableCell align=\"center\">Data Venc.</TableCell>\r\n              <TableCell align=\"center\">Status</TableCell>\r\n              <TableCell align=\"center\">Link de pagamento</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            <>\r\n              {invoices.map((invoices) => (\r\n                <TableRow style={rowStyle(invoices)} key={invoices.id}>\r\n                  <TableCell align=\"center\">{invoices.id}</TableCell>\r\n                  <TableCell align=\"center\">{invoices.detail}</TableCell>\r\n                  <TableCell style={{ fontWeight: 'bold' }} align=\"center\">{invoices.value.toLocaleString('pt-br', { style: 'currency', currency: 'BRL' })}</TableCell>\r\n                  <TableCell align=\"center\">{moment(invoices.dueDate).format(\"DD/MM/YYYY\")}</TableCell>\r\n                  <TableCell style={{ fontWeight: 'bold' }} align=\"center\">{rowStatus(invoices)}</TableCell>\r\n                  <TableCell style={{ fontWeight: 'bold' }} align=\"center\"> {![\"Pago\", \"Cancelado\"].includes(rowStatus(invoices)) ? <a href={invoices.paymentUrl} target=\"_blank\">pagar</a> : '-'}</TableCell>\r\n                  \r\n                    {\r\n                    /* rowStatus(invoices) !== \"Pago\" ?\r\n                      <Button\r\n                        size=\"small\"\r\n                        variant=\"outlined\"\r\n                        color=\"secondary\"\r\n                        onClick={() => handleOpenContactModal(invoices)}\r\n                      >\r\n                        Selecionar plano\r\n                      </Button> :\r\n                      <Button\r\n                        size=\"small\"\r\n                        variant=\"outlined\"\r\n                      >\r\n                        PAGO \r\n                      </Button> */\r\n                      }\r\n                </TableRow>\r\n              ))}\r\n              {loading && <TableRowSkeleton columns={4} />}\r\n            </>\r\n          </TableBody>\r\n        </Table>\r\n      </Paper>\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nexport default Invoices;\r\n","import React, { useState, useEffect, useReducer, useContext } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\n\r\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\n\r\nimport MainContainer from \"../../components/MainContainer\";\r\nimport MainHeader from \"../../components/MainHeader\";\r\nimport MainHeaderButtonsWrapper from \"../../components/MainHeaderButtonsWrapper\";\r\nimport Title from \"../../components/Title\";\r\n\r\nimport api from \"../../services/api\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport TableRowSkeleton from \"../../components/TableRowSkeleton\";\r\nimport UserModal from \"../../components/UserModal\";\r\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { SocketContext } from \"../../context/Socket/SocketContext\";\r\n\r\nconst reducer = (state, action) => {\r\n  if (action.type === \"LOAD_USERS\") {\r\n    const users = action.payload;\r\n    const newUsers = [];\r\n\r\n    users.forEach((user) => {\r\n      const userIndex = state.findIndex((u) => u.id === user.id);\r\n      if (userIndex !== -1) {\r\n        state[userIndex] = user;\r\n      } else {\r\n        newUsers.push(user);\r\n      }\r\n    });\r\n\r\n    return [...state, ...newUsers];\r\n  }\r\n\r\n  if (action.type === \"UPDATE_USERS\") {\r\n    const user = action.payload;\r\n    const userIndex = state.findIndex((u) => u.id === user.id);\r\n\r\n    if (userIndex !== -1) {\r\n      state[userIndex] = user;\r\n      return [...state];\r\n    } else {\r\n      return [user, ...state];\r\n    }\r\n  }\r\n\r\n  if (action.type === \"DELETE_USER\") {\r\n    const userId = action.payload;\r\n\r\n    const userIndex = state.findIndex((u) => u.id === userId);\r\n    if (userIndex !== -1) {\r\n      state.splice(userIndex, 1);\r\n    }\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"RESET\") {\r\n    return [];\r\n  }\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainPaper: {\r\n    flex: 1,\r\n    padding: theme.spacing(1),\r\n    overflowY: \"scroll\",\r\n    ...theme.scrollbarStyles,\r\n  },\r\n}));\r\n\r\nconst Users = () => {\r\n  const classes = useStyles();\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [pageNumber, setPageNumber] = useState(1);\r\n  const [hasMore, setHasMore] = useState(false);\r\n  const [selectedUser, setSelectedUser] = useState(null);\r\n  const [deletingUser, setDeletingUser] = useState(null);\r\n  const [userModalOpen, setUserModalOpen] = useState(false);\r\n  const [confirmModalOpen, setConfirmModalOpen] = useState(false);\r\n  const [searchParam, setSearchParam] = useState(\"\");\r\n  const [users, dispatch] = useReducer(reducer, []);\r\n\r\n  const socketManager = useContext(SocketContext);\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: \"RESET\" });\r\n    setPageNumber(1);\r\n  }, [searchParam]);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const delayDebounceFn = setTimeout(() => {\r\n      const fetchUsers = async () => {\r\n        try {\r\n          const { data } = await api.get(\"/users/\", {\r\n            params: { searchParam, pageNumber },\r\n          });\r\n          dispatch({ type: \"LOAD_USERS\", payload: data.users });\r\n          setHasMore(data.hasMore);\r\n          setLoading(false);\r\n        } catch (err) {\r\n          toastError(err);\r\n        }\r\n      };\r\n      fetchUsers();\r\n    }, 500);\r\n    return () => clearTimeout(delayDebounceFn);\r\n  }, [searchParam, pageNumber]);\r\n\r\n  useEffect(() => {\r\n    const companyId = localStorage.getItem(\"companyId\");\r\n    const socket = socketManager.getSocket(companyId);\r\n\r\n    socket.on(`company-${companyId}-user`, (data) => {\r\n      if (data.action === \"update\" || data.action === \"create\") {\r\n        dispatch({ type: \"UPDATE_USERS\", payload: data.user });\r\n      }\r\n\r\n      if (data.action === \"delete\") {\r\n        dispatch({ type: \"DELETE_USER\", payload: +data.userId });\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, [socketManager]);\r\n\r\n  const handleOpenUserModal = () => {\r\n    setSelectedUser(null);\r\n    setUserModalOpen(true);\r\n  };\r\n\r\n  const handleCloseUserModal = () => {\r\n    setSelectedUser(null);\r\n    setUserModalOpen(false);\r\n  };\r\n\r\n  const handleSearch = (event) => {\r\n    setSearchParam(event.target.value.toLowerCase());\r\n  };\r\n\r\n  const handleEditUser = (user) => {\r\n    setSelectedUser(user);\r\n    setUserModalOpen(true);\r\n  };\r\n\r\n  const handleDeleteUser = async (userId) => {\r\n    try {\r\n      await api.delete(`/users/${userId}`);\r\n      toast.success(i18n.t(\"users.toasts.deleted\"));\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n    setDeletingUser(null);\r\n    setSearchParam(\"\");\r\n    setPageNumber(1);\r\n  };\r\n\r\n  const loadMore = () => {\r\n    setPageNumber((prevState) => prevState + 1);\r\n  };\r\n\r\n  const handleScroll = (e) => {\r\n    if (!hasMore || loading) return;\r\n    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\r\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\r\n      loadMore();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <MainContainer>\r\n      <ConfirmationModal\r\n        title={\r\n          deletingUser &&\r\n          `${i18n.t(\"users.confirmationModal.deleteTitle\")} ${\r\n            deletingUser.name\r\n          }?`\r\n        }\r\n        open={confirmModalOpen}\r\n        onClose={setConfirmModalOpen}\r\n        onConfirm={() => handleDeleteUser(deletingUser.id)}\r\n      >\r\n        {i18n.t(\"users.confirmationModal.deleteMessage\")}\r\n      </ConfirmationModal>\r\n      <UserModal\r\n        open={userModalOpen}\r\n        onClose={handleCloseUserModal}\r\n        aria-labelledby=\"form-dialog-title\"\r\n        userId={selectedUser && selectedUser.id}\r\n      />\r\n      <MainHeader>\r\n        <Title>{i18n.t(\"users.title\")}</Title>\r\n        <MainHeaderButtonsWrapper>\r\n          <TextField\r\n            placeholder={i18n.t(\"contacts.searchPlaceholder\")}\r\n            type=\"search\"\r\n            value={searchParam}\r\n            onChange={handleSearch}\r\n            InputProps={{\r\n              startAdornment: (\r\n                <InputAdornment position=\"start\">\r\n                  <SearchIcon style={{ color: \"gray\" }} />\r\n                </InputAdornment>\r\n              ),\r\n            }}\r\n          />\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={handleOpenUserModal}\r\n          >\r\n            {i18n.t(\"users.buttons.add\")}\r\n          </Button>\r\n        </MainHeaderButtonsWrapper>\r\n      </MainHeader>\r\n      <Paper\r\n        className={classes.mainPaper}\r\n        variant=\"outlined\"\r\n        onScroll={handleScroll}\r\n      >\r\n        <Table size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n\t\t\t<TableCell align=\"center\">\r\n                {i18n.t(\"users.table.id\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">{i18n.t(\"users.table.name\")}</TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"users.table.email\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"users.table.profile\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"users.table.actions\")}\r\n              </TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            <>\r\n              {users.map((user) => (\r\n                <TableRow key={user.id}>\r\n\t\t\t\t  <TableCell align=\"center\">{user.id}</TableCell>\r\n                  <TableCell align=\"center\">{user.name}</TableCell>\r\n                  <TableCell align=\"center\">{user.email}</TableCell>\r\n                  <TableCell align=\"center\">{user.profile}</TableCell>\r\n                  <TableCell align=\"center\">\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={() => handleEditUser(user)}\r\n                    >\r\n                      <EditIcon />\r\n                    </IconButton>\r\n\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={(e) => {\r\n                        setConfirmModalOpen(true);\r\n                        setDeletingUser(user);\r\n                      }}\r\n                    >\r\n                      <DeleteOutlineIcon />\r\n                    </IconButton>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n              {loading && <TableRowSkeleton columns={4} />}\r\n            </>\r\n          </TableBody>\r\n        </Table>\r\n      </Paper>\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nexport default Users;\r\n","import React, { useState, useEffect, useReducer, useContext } from \"react\";\r\n\r\nimport { toast } from \"react-toastify\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Tooltip } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport WhatsAppIcon from \"@material-ui/icons/WhatsApp\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\n\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\nimport api from \"../../services/api\";\r\nimport TableRowSkeleton from \"../../components/TableRowSkeleton\";\r\nimport ContactModal from \"../../components/ContactModal\";\r\nimport ConfirmationModal from \"../../components/ConfirmationModal/\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport MainHeader from \"../../components/MainHeader\";\r\nimport Title from \"../../components/Title\";\r\nimport MainHeaderButtonsWrapper from \"../../components/MainHeaderButtonsWrapper\";\r\nimport MainContainer from \"../../components/MainContainer\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport { Can } from \"../../components/Can\";\r\nimport NewTicketModal from \"../../components/NewTicketModal\";\r\nimport { SocketContext } from \"../../context/Socket/SocketContext\";\r\n\r\nimport {CSVLink} from \"react-csv\";\r\n\r\nconst reducer = (state, action) => {\r\n  if (action.type === \"LOAD_CONTACTS\") {\r\n    const contacts = action.payload;\r\n    const newContacts = [];\r\n\r\n    contacts.forEach((contact) => {\r\n      const contactIndex = state.findIndex((c) => c.id === contact.id);\r\n      if (contactIndex !== -1) {\r\n        state[contactIndex] = contact;\r\n      } else {\r\n        newContacts.push(contact);\r\n      }\r\n    });\r\n\r\n    return [...state, ...newContacts];\r\n  }\r\n\r\n  if (action.type === \"UPDATE_CONTACTS\") {\r\n    const contact = action.payload;\r\n    const contactIndex = state.findIndex((c) => c.id === contact.id);\r\n\r\n    if (contactIndex !== -1) {\r\n      state[contactIndex] = contact;\r\n      return [...state];\r\n    } else {\r\n      return [contact, ...state];\r\n    }\r\n  }\r\n\r\n  if (action.type === \"DELETE_CONTACT\") {\r\n    const contactId = action.payload;\r\n\r\n    const contactIndex = state.findIndex((c) => c.id === contactId);\r\n    if (contactIndex !== -1) {\r\n      state.splice(contactIndex, 1);\r\n    }\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"RESET\") {\r\n    return [];\r\n  }\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainPaper: {\r\n    flex: 1,\r\n    padding: theme.spacing(1),\r\n    overflowY: \"scroll\",\r\n    ...theme.scrollbarStyles,\r\n  },\r\n}));\r\n\r\nconst Contacts = () => {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n\r\n  const { user } = useContext(AuthContext);\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [pageNumber, setPageNumber] = useState(1);\r\n  const [searchParam, setSearchParam] = useState(\"\");\r\n  const [contacts, dispatch] = useReducer(reducer, []);\r\n  const [selectedContactId, setSelectedContactId] = useState(null);\r\n  const [contactModalOpen, setContactModalOpen] = useState(false);\r\n  const [newTicketModalOpen, setNewTicketModalOpen] = useState(false);\r\n  const [contactTicket, setContactTicket] = useState({});\r\n  const [deletingContact, setDeletingContact] = useState(null);\r\n  const [confirmOpen, setConfirmOpen] = useState(false);\r\n  const [hasMore, setHasMore] = useState(false);\r\n\r\n  const socketManager = useContext(SocketContext);\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: \"RESET\" });\r\n    setPageNumber(1);\r\n  }, [searchParam]);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const delayDebounceFn = setTimeout(() => {\r\n      const fetchContacts = async () => {\r\n        try {\r\n          const { data } = await api.get(\"/contacts/\", {\r\n            params: { searchParam, pageNumber },\r\n          });\r\n          dispatch({ type: \"LOAD_CONTACTS\", payload: data.contacts });\r\n          setHasMore(data.hasMore);\r\n          setLoading(false);\r\n        } catch (err) {\r\n          toastError(err);\r\n        }\r\n      };\r\n      fetchContacts();\r\n    }, 500);\r\n    return () => clearTimeout(delayDebounceFn);\r\n  }, [searchParam, pageNumber]);\r\n\r\n  useEffect(() => {\r\n    const companyId = localStorage.getItem(\"companyId\");\r\n    const socket = socketManager.getSocket(companyId);\r\n\r\n    socket.on(`company-${companyId}-contact`, (data) => {\r\n      if (data.action === \"update\" || data.action === \"create\") {\r\n        dispatch({ type: \"UPDATE_CONTACTS\", payload: data.contact });\r\n      }\r\n\r\n      if (data.action === \"delete\") {\r\n        dispatch({ type: \"DELETE_CONTACT\", payload: +data.contactId });\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, [ socketManager]);\r\n\r\n  const handleSearch = (event) => {\r\n    setSearchParam(event.target.value.toLowerCase());\r\n  };\r\n\r\n  const handleOpenContactModal = () => {\r\n    setSelectedContactId(null);\r\n    setContactModalOpen(true);\r\n  };\r\n\r\n  const handleCloseContactModal = () => {\r\n    setSelectedContactId(null);\r\n    setContactModalOpen(false);\r\n  };\r\n\r\n  // const handleSaveTicket = async contactId => {\r\n  // \tif (!contactId) return;\r\n  // \tsetLoading(true);\r\n  // \ttry {\r\n  // \t\tconst { data: ticket } = await api.post(\"/tickets\", {\r\n  // \t\t\tcontactId: contactId,\r\n  // \t\t\tuserId: user?.id,\r\n  // \t\t\tstatus: \"open\",\r\n  // \t\t});\r\n  // \t\thistory.push(`/tickets/${ticket.id}`);\r\n  // \t} catch (err) {\r\n  // \t\ttoastError(err);\r\n  // \t}\r\n  // \tsetLoading(false);\r\n  // };\r\n\r\n  const handleCloseOrOpenTicket = (ticket) => {\r\n    setNewTicketModalOpen(false);\r\n    if (ticket !== undefined && ticket.uuid !== undefined) {\r\n      history.push(`/tickets/${ticket.uuid}`);\r\n    }\r\n  };\r\n\r\n  const hadleEditContact = (contactId) => {\r\n    setSelectedContactId(contactId);\r\n    setContactModalOpen(true);\r\n  };\r\n\r\n  const handleDeleteContact = async (contactId) => {\r\n    try {\r\n      await api.delete(`/contacts/${contactId}`);\r\n      toast.success(i18n.t(\"contacts.toasts.deleted\"));\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n    setDeletingContact(null);\r\n    setSearchParam(\"\");\r\n    setPageNumber(1);\r\n  };\r\n\r\n  const handleimportContact = async () => {\r\n    try {\r\n      await api.post(\"/contacts/import\");\r\n      history.go(0);\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  };\r\n\r\n  const loadMore = () => {\r\n    setPageNumber((prevState) => prevState + 1);\r\n  };\r\n\r\n  const handleScroll = (e) => {\r\n    if (!hasMore || loading) return;\r\n    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\r\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\r\n      loadMore();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <MainContainer className={classes.mainContainer}>\r\n      <NewTicketModal\r\n        modalOpen={newTicketModalOpen}\r\n        initialContact={contactTicket}\r\n        onClose={(ticket) => {\r\n          handleCloseOrOpenTicket(ticket);\r\n        }}\r\n      />\r\n      <ContactModal\r\n        open={contactModalOpen}\r\n        onClose={handleCloseContactModal}\r\n        aria-labelledby=\"form-dialog-title\"\r\n        contactId={selectedContactId}\r\n      ></ContactModal>\r\n      <ConfirmationModal\r\n        title={\r\n          deletingContact\r\n            ? `${i18n.t(\"contacts.confirmationModal.deleteTitle\")} ${\r\n                deletingContact.name\r\n              }?`\r\n            : `${i18n.t(\"contacts.confirmationModal.importTitlte\")}`\r\n        }\r\n        open={confirmOpen}\r\n        onClose={setConfirmOpen}\r\n        onConfirm={(e) =>\r\n          deletingContact\r\n            ? handleDeleteContact(deletingContact.id)\r\n            : handleimportContact()\r\n        }\r\n      >\r\n        {deletingContact\r\n          ? `${i18n.t(\"contacts.confirmationModal.deleteMessage\")}`\r\n          : `${i18n.t(\"contacts.confirmationModal.importMessage\")}`}\r\n      </ConfirmationModal>\r\n      <MainHeader>\r\n        <Title>{i18n.t(\"contacts.title\")}</Title>\r\n        <MainHeaderButtonsWrapper>\r\n          <TextField\r\n            placeholder={i18n.t(\"contacts.searchPlaceholder\")}\r\n            type=\"search\"\r\n            value={searchParam}\r\n            onChange={handleSearch}\r\n            InputProps={{\r\n              startAdornment: (\r\n                <InputAdornment position=\"start\">\r\n                  <SearchIcon style={{ color: \"gray\" }} />\r\n                </InputAdornment>\r\n              ),\r\n            }}\r\n          />\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={(e) => setConfirmOpen(true)}\r\n          >\r\n            {i18n.t(\"contacts.buttons.import\")}\r\n          </Button>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={handleOpenContactModal}\r\n          >\r\n            {i18n.t(\"contacts.buttons.add\")}\r\n          </Button>\r\n\r\n         <CSVLink style={{ textDecoration:'none'}} separator=\";\" filename={'contatos.csv'} data={contacts.map((contact) => ({ name: contact.name, number: contact.number, email: contact.email }))}>\r\n          <Button\tvariant=\"contained\" color=\"primary\"> \r\n          EXPORTAR CONTATOS \r\n          </Button>\r\n          </CSVLink>\t\t  \r\n\r\n        </MainHeaderButtonsWrapper>\r\n      </MainHeader>\r\n      <Paper\r\n        className={classes.mainPaper}\r\n        variant=\"outlined\"\r\n        onScroll={handleScroll}\r\n      >\r\n        <Table size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell padding=\"checkbox\" />\r\n              <TableCell>{i18n.t(\"contacts.table.name\")}</TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"contacts.table.whatsapp\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"contacts.table.email\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"contacts.table.actions\")}\r\n              </TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            <>\r\n              {contacts.map((contact) => (\r\n                <TableRow key={contact.id}>\r\n                  <TableCell style={{ paddingRight: 0 }}>\r\n                    {<Avatar src={contact.profilePicUrl} />}\r\n                  </TableCell>\r\n                  <TableCell>{contact.name}</TableCell>\r\n                  <TableCell align=\"center\">{contact.number}</TableCell>\r\n                  <TableCell align=\"center\">{contact.email}</TableCell>\r\n                  <TableCell align=\"center\">\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={() => {\r\n                        setContactTicket(contact);\r\n                        setNewTicketModalOpen(true);\r\n                      }}\r\n                    >\r\n                      <WhatsAppIcon />\r\n                    </IconButton>\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={() => hadleEditContact(contact.id)}\r\n                    >\r\n                      <EditIcon />\r\n                    </IconButton>\r\n                    <Can\r\n                      role={user.profile}\r\n                      perform=\"contacts-page:deleteContact\"\r\n                      yes={() => (\r\n                        <IconButton\r\n                          size=\"small\"\r\n                          onClick={(e) => {\r\n                            setConfirmOpen(true);\r\n                            setDeletingContact(contact);\r\n                          }}\r\n                        >\r\n                          <DeleteOutlineIcon />\r\n                        </IconButton>\r\n                      )}\r\n                    />\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n              {loading && <TableRowSkeleton avatar columns={3} />}\r\n            </>\r\n          </TableBody>\r\n        </Table>\r\n      </Paper>\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nexport default Contacts;\r\n","import { Dialog } from \"@material-ui/core\";\r\nimport React, { useState } from \"react\";\r\n\r\nimport { BlockPicker } from \"react-color\";\r\n\r\nconst ColorPicker = ({ onChange, currentColor, handleClose, open }) => {\r\n\tconst [selectedColor, setSelectedColor] = useState(currentColor);\r\n\r\n\tconst handleChange = color => {\r\n\t\tsetSelectedColor(color.hex);\r\n\t\thandleClose();\r\n\t};\r\n\r\n\tconst colors = [\r\n\t\t\"#B80000\",\r\n\t\t\"#DB3E00\",\r\n\t\t\"#FCCB00\",\r\n\t\t\"#008B02\",\r\n\t\t\"#006B76\",\r\n\t\t\"#1273DE\",\r\n\t\t\"#004DCF\",\r\n\t\t\"#5300EB\",\r\n\t\t\"#EB9694\",\r\n\t\t\"#FAD0C3\",\r\n\t\t\"#FEF3BD\",\r\n\t\t\"#C1E1C5\",\r\n\t\t\"#BEDADC\",\r\n\t\t\"#C4DEF6\",\r\n\t\t\"#BED3F3\",\r\n\t\t\"#D4C4FB\",\r\n\t\t\"#4D4D4D\",\r\n\t\t\"#999999\",\r\n\t\t\"#F44E3B\",\r\n\t\t\"#FE9200\",\r\n\t\t\"#FCDC00\",\r\n\t\t\"#DBDF00\",\r\n\t\t\"#A4DD00\",\r\n\t\t\"#68CCCA\",\r\n\t\t\"#73D8FF\",\r\n\t\t\"#AEA1FF\",\r\n\t\t\"#FDA1FF\",\r\n\t\t\"#333333\",\r\n\t\t\"#808080\",\r\n\t\t\"#cccccc\",\r\n\t\t\"#D33115\",\r\n\t\t\"#E27300\",\r\n\t\t\"#FCC400\",\r\n\t\t\"#B0BC00\",\r\n\t\t\"#68BC00\",\r\n\t\t\"#16A5A5\",\r\n\t\t\"#009CE0\",\r\n\t\t\"#7B64FF\",\r\n\t\t\"#FA28FF\",\r\n\t\t\"#666666\",\r\n\t\t\"#B3B3B3\",\r\n\t\t\"#9F0500\",\r\n\t\t\"#C45100\",\r\n\t\t\"#FB9E00\",\r\n\t\t\"#808900\",\r\n\t\t\"#194D33\",\r\n\t\t\"#0C797D\",\r\n\t\t\"#0062B1\",\r\n\t\t\"#653294\",\r\n\t\t\"#AB149E\",\r\n\t];\r\n\r\n\treturn (\r\n\t\t<Dialog\r\n\t\t\tonClose={handleClose}\r\n\t\t\taria-labelledby=\"simple-dialog-title\"\r\n\t\t\topen={open}\r\n\t\t>\r\n\t\t\t<BlockPicker\r\n\t\t\t\twidth={\"100%\"}\r\n\t\t\t\ttriangle=\"hide\"\r\n\t\t\t\tcolor={selectedColor}\r\n\t\t\t\tcolors={colors}\r\n\t\t\t\tonChange={handleChange}\r\n\t\t\t\tonChangeComplete={color => onChange(color.hex)}\r\n\t\t\t/>\r\n\t\t</Dialog>\r\n\t);\r\n};\r\n\r\nexport default ColorPicker;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Stepper from \"@material-ui/core/Stepper\";\r\nimport Step from \"@material-ui/core/Step\";\r\nimport StepLabel from \"@material-ui/core/StepLabel\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { Button, IconButton, StepContent, TextField } from \"@material-ui/core\";\r\nimport AddIcon from \"@material-ui/icons/Add\";\r\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\r\nimport SaveIcon from \"@material-ui/icons/Save\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\nimport api from \"../../services/api\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n    //height: 400,\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      maxHeight: \"20vh\",\r\n    },\r\n  },\r\n  button: {\r\n    marginRight: theme.spacing(1),\r\n  },\r\n  input: {\r\n    marginTop: theme.spacing(1),\r\n    marginBottom: theme.spacing(1),\r\n  },\r\n  addButton: {\r\n    marginTop: theme.spacing(2),\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nexport function QueueOptionStepper({ queueId, options, updateOptions }) {\r\n  const classes = useStyles();\r\n  const [activeOption, setActiveOption] = useState(-1);\r\n\r\n  const handleOption = (index) => async () => {\r\n    setActiveOption(index);\r\n    const option = options[index];\r\n\r\n    if (option !== undefined && option.id !== undefined) {\r\n      try {\r\n        const { data } = await api.request({\r\n          url: \"/queue-options\",\r\n          method: \"GET\",\r\n          params: { queueId, parentId: option.id },\r\n        });\r\n        const optionList = data.map((option) => {\r\n          return {\r\n            ...option,\r\n            children: [],\r\n            edition: false,\r\n          };\r\n        });\r\n        option.children = optionList;\r\n        updateOptions();\r\n      } catch (e) {\r\n        toastError(e);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleSave = async (option) => {\r\n    try {\r\n      if (option.id) {\r\n        await api.request({\r\n          url: `/queue-options/${option.id}`,\r\n          method: \"PUT\",\r\n          data: option,\r\n        });\r\n      } else {\r\n        const { data } = await api.request({\r\n          url: `/queue-options`,\r\n          method: \"POST\",\r\n          data: option,\r\n        });\r\n        option.id = data.id;\r\n      }\r\n      option.edition = false;\r\n      updateOptions();\r\n    } catch (e) {\r\n      toastError(e);\r\n    }\r\n  };\r\n\r\n  const handleEdition = (index) => {\r\n    options[index].edition = !options[index].edition;\r\n    updateOptions();\r\n  };\r\n\r\n  const handleDeleteOption = async (index) => {\r\n    const option = options[index];\r\n    if (option !== undefined && option.id !== undefined) {\r\n      try {\r\n        await api.request({\r\n          url: `/queue-options/${option.id}`,\r\n          method: \"DELETE\",\r\n        });\r\n      } catch (e) {\r\n        toastError(e);\r\n      }\r\n    }\r\n    options.splice(index, 1);\r\n    options.forEach(async (option, order) => {\r\n      option.option = order + 1;\r\n      await handleSave(option);\r\n    });\r\n    updateOptions();\r\n  };\r\n\r\n  const handleOptionChangeTitle = (event, index) => {\r\n    options[index].title = event.target.value;\r\n    updateOptions();\r\n  };\r\n\r\n  const handleOptionChangeMessage = (event, index) => {\r\n    options[index].message = event.target.value;\r\n    updateOptions();\r\n  };\r\n\r\n  const renderTitle = (index) => {\r\n    const option = options[index];\r\n    if (option.edition) {\r\n      return (\r\n        <>\r\n          <TextField\r\n            value={option.title}\r\n            onChange={(event) => handleOptionChangeTitle(event, index)}\r\n            size=\"small\"\r\n            className={classes.input}\r\n            placeholder=\"Título da opção\"\r\n          />\r\n          {option.edition && (\r\n            <>\r\n              <IconButton\r\n                color=\"primary\"\r\n                variant=\"outlined\"\r\n                size=\"small\"\r\n                className={classes.button}\r\n                onClick={() => handleSave(option)}\r\n              >\r\n                <SaveIcon />\r\n              </IconButton>\r\n              <IconButton\r\n                variant=\"outlined\"\r\n                color=\"secondary\"\r\n                size=\"small\"\r\n                className={classes.button}\r\n                onClick={() => handleDeleteOption(index)}\r\n              >\r\n                <DeleteOutlineIcon />\r\n              </IconButton>\r\n            </>\r\n          )}\r\n        </>\r\n      );\r\n    }\r\n    return (\r\n      <>\r\n        <Typography>\r\n          {option.title !== \"\" ? option.title : \"Título não definido\"}\r\n          <IconButton\r\n            variant=\"outlined\"\r\n            size=\"small\"\r\n            className={classes.button}\r\n            onClick={() => handleEdition(index)}\r\n          >\r\n            <EditIcon />\r\n          </IconButton>\r\n        </Typography>\r\n      </>\r\n    );\r\n  };\r\n\r\n  const renderMessage = (index) => {\r\n    const option = options[index];\r\n    if (option.edition) {\r\n      return (\r\n        <>\r\n          <TextField\r\n            style={{ width: \"100%\" }}\r\n            multiline\r\n            value={option.message}\r\n            onChange={(event) => handleOptionChangeMessage(event, index)}\r\n            size=\"small\"\r\n            className={classes.input}\r\n            placeholder=\"Digite o texto da opção\"\r\n          />\r\n        </>\r\n      );\r\n    }\r\n    return (\r\n      <>\r\n        <Typography onClick={() => handleEdition(index)}>\r\n          {option.message}\r\n        </Typography>\r\n      </>\r\n    );\r\n  };\r\n\r\n  const handleAddOption = (index) => {\r\n    const optionNumber = options[index].children.length + 1;\r\n    options[index].children.push({\r\n      title: \"\",\r\n      message: \"\",\r\n      edition: false,\r\n      option: optionNumber,\r\n      queueId,\r\n      parentId: options[index].id,\r\n      children: [],\r\n    });\r\n    updateOptions();\r\n  };\r\n\r\n  const renderStep = (option, index) => {\r\n    return (\r\n      <Step key={index}>\r\n        <StepLabel style={{ cursor: \"pointer\" }} onClick={handleOption(index)}>\r\n          {renderTitle(index)}\r\n        </StepLabel>\r\n        <StepContent>\r\n          {renderMessage(index)}\r\n\r\n          {option.id !== undefined && (\r\n            <>\r\n              <Button\r\n                color=\"primary\"\r\n                size=\"small\"\r\n                onClick={() => handleAddOption(index)}\r\n                startIcon={<AddIcon />}\r\n                variant=\"outlined\"\r\n                className={classes.addButton}\r\n              >\r\n                Adicionar\r\n              </Button>\r\n            </>\r\n          )}\r\n          <QueueOptionStepper\r\n            queueId={queueId}\r\n            options={option.children}\r\n            updateOptions={updateOptions}\r\n          />\r\n        </StepContent>\r\n      </Step>\r\n    );\r\n  };\r\n\r\n  const renderStepper = () => {\r\n    return (\r\n      <Stepper\r\n        style={{ marginBottom: 0, paddingBottom: 0 }}\r\n        nonLinear\r\n        activeStep={activeOption}\r\n        orientation=\"vertical\"\r\n      >\r\n        {options.map((option, index) => renderStep(option, index))}\r\n      </Stepper>\r\n    );\r\n  };\r\n\r\n  return renderStepper();\r\n}\r\n\r\nexport function QueueOptions({ queueId }) {\r\n  const classes = useStyles();\r\n  const [options, setOptions] = useState([]);\r\n\r\n  useEffect(() => {\r\n    if (queueId) {\r\n      const fetchOptions = async () => {\r\n        try {\r\n          const { data } = await api.request({\r\n            url: \"/queue-options\",\r\n            method: \"GET\",\r\n            params: { queueId, parentId: -1 },\r\n          });\r\n          const optionList = data.map((option) => {\r\n            return {\r\n              ...option,\r\n              children: [],\r\n              edition: false,\r\n            };\r\n          });\r\n          setOptions(optionList);\r\n        } catch (e) {\r\n          toastError(e);\r\n        }\r\n      };\r\n      fetchOptions();\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  const renderStepper = () => {\r\n    if (options.length > 0) {\r\n      return (\r\n        <QueueOptionStepper\r\n          queueId={queueId}\r\n          updateOptions={updateOptions}\r\n          options={options}\r\n        />\r\n      );\r\n    }\r\n  };\r\n\r\n  const updateOptions = () => {\r\n    setOptions([...options]);\r\n  };\r\n\r\n  const addOption = () => {\r\n    const newOption = {\r\n      title: \"\",\r\n      message: \"\",\r\n      edition: false,\r\n      option: options.length + 1,\r\n      queueId,\r\n      parentId: null,\r\n      children: [],\r\n    };\r\n    setOptions([...options, newOption]);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <br />\r\n      <Typography>\r\n        Opções\r\n        <Button\r\n          color=\"primary\"\r\n          size=\"small\"\r\n          onClick={addOption}\r\n          startIcon={<AddIcon />}\r\n          style={{ marginLeft: 10 }}\r\n          variant=\"outlined\"\r\n        >\r\n          Adicionar\r\n        </Button>\r\n      </Typography>\r\n      {renderStepper()}\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\n\r\nimport * as Yup from \"yup\";\r\nimport { Formik, Form, Field } from \"formik\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { green } from \"@material-ui/core/colors\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nimport api from \"../../services/api\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport ColorPicker from \"../ColorPicker\";\r\nimport {\r\n  FormControl,\r\n  Grid,\r\n  IconButton,\r\n  InputAdornment,\r\n  InputLabel,\r\n  MenuItem,\r\n  Paper,\r\n  Select,\r\n  Tab,\r\n  Tabs,\r\n} from \"@material-ui/core\";\r\nimport { Colorize } from \"@material-ui/icons\";\r\nimport { QueueOptions } from \"../QueueOptions\";\r\nimport SchedulesForm from \"../SchedulesForm\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    flexWrap: \"wrap\",\r\n  },\r\n  textField: {\r\n    marginRight: theme.spacing(1),\r\n    flex: 1,\r\n  },\r\n\r\n  btnWrapper: {\r\n    position: \"relative\",\r\n  },\r\n\r\n  buttonProgress: {\r\n    color: green[500],\r\n    position: \"absolute\",\r\n    top: \"50%\",\r\n    left: \"50%\",\r\n    marginTop: -12,\r\n    marginLeft: -12,\r\n  },\r\n  formControl: {\r\n    margin: theme.spacing(1),\r\n    minWidth: 120,\r\n  },\r\n  colorAdorment: {\r\n    width: 20,\r\n    height: 20,\r\n  },\r\n}));\r\n\r\nconst QueueSchema = Yup.object().shape({\r\n  name: Yup.string()\r\n    .min(2, \"Too Short!\")\r\n    .max(50, \"Too Long!\")\r\n    .required(\"Required\"),\r\n  color: Yup.string().min(3, \"Too Short!\").max(9, \"Too Long!\").required(),\r\n  greetingMessage: Yup.string(),\r\n});\r\n\r\nconst QueueModal = ({ open, onClose, queueId }) => {\r\n  const classes = useStyles();\r\n\r\n  const initialState = {\r\n    name: \"\",\r\n    color: \"\",\r\n    greetingMessage: \"\",\r\n    outOfHoursMessage: \"\",\r\n    orderQueue: \"\",\r\n    integrationId: \"\",\r\n    promptId: \"\"\r\n  };\r\n\r\n  const [colorPickerModalOpen, setColorPickerModalOpen] = useState(false);\r\n  const [queue, setQueue] = useState(initialState);\r\n  const [tab, setTab] = useState(0);\r\n  const [schedulesEnabled, setSchedulesEnabled] = useState(false);\r\n  const greetingRef = useRef();\r\n  const [integrations, setIntegrations] = useState([]);\r\n\r\n  const [schedules, setSchedules] = useState([\r\n    { weekday: \"Segunda-feira\", weekdayEn: \"monday\", startTime: \"08:00\", endTime: \"18:00\", },\r\n    { weekday: \"Terça-feira\", weekdayEn: \"tuesday\", startTime: \"08:00\", endTime: \"18:00\", },\r\n    { weekday: \"Quarta-feira\", weekdayEn: \"wednesday\", startTime: \"08:00\", endTime: \"18:00\", },\r\n    { weekday: \"Quinta-feira\", weekdayEn: \"thursday\", startTime: \"08:00\", endTime: \"18:00\", },\r\n    { weekday: \"Sexta-feira\", weekdayEn: \"friday\", startTime: \"08:00\", endTime: \"18:00\", },\r\n    { weekday: \"Sábado\", weekdayEn: \"saturday\", startTime: \"08:00\", endTime: \"12:00\", },\r\n    { weekday: \"Domingo\", weekdayEn: \"sunday\", startTime: \"00:00\", endTime: \"00:00\", },\r\n  ]);\r\n  const [selectedPrompt, setSelectedPrompt] = useState(null);\r\n  const [prompts, setPrompts] = useState([]);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        const { data } = await api.get(\"/prompt\");\r\n        setPrompts(data.prompts);\r\n      } catch (err) {\r\n        toastError(err);\r\n      }\r\n    })();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    api.get(`/settings`).then(({ data }) => {\r\n      if (Array.isArray(data)) {\r\n        const scheduleType = data.find((d) => d.key === \"scheduleType\");\r\n        if (scheduleType) {\r\n          setSchedulesEnabled(scheduleType.value === \"queue\");\r\n        }\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        const { data } = await api.get(\"/queueIntegration\");\r\n\r\n        setIntegrations(data.queueIntegrations);\r\n      } catch (err) {\r\n        toastError(err);\r\n      }\r\n    })();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      if (!queueId) return;\r\n      try {\r\n        const { data } = await api.get(`/queue/${queueId}`);\r\n        setQueue((prevState) => {\r\n          return { ...prevState, ...data };\r\n        });\r\n        data.promptId ? setSelectedPrompt(data.promptId) : setSelectedPrompt(null);\r\n\r\n        setSchedules(data.schedules);\r\n      } catch (err) {\r\n        toastError(err);\r\n      }\r\n    })();\r\n\r\n    return () => {\r\n      setQueue({\r\n        name: \"\",\r\n        color: \"\",\r\n        greetingMessage: \"\",\r\n        outOfHoursMessage: \"\",\r\n        orderQueue: \"\",\r\n        integrationId: \"\"\r\n      });\r\n    };\r\n  }, [queueId, open]);\r\n\r\n  const handleClose = () => {\r\n    onClose();\r\n    setQueue(initialState);\r\n  };\r\n\r\n  const handleSaveQueue = async (values) => {\r\n    try {\r\n      if (queueId) {\r\n        await api.put(`/queue/${queueId}`, {\r\n          ...values, schedules, promptId: selectedPrompt ? selectedPrompt : null\r\n        });\r\n      } else {\r\n        await api.post(\"/queue\", {\r\n          ...values, schedules, promptId: selectedPrompt ? selectedPrompt : null\r\n        });\r\n      }\r\n      toast.success(\"Queue saved successfully\");\r\n      handleClose();\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  };\r\n\r\n  const handleSaveSchedules = async (values) => {\r\n    toast.success(\"Clique em salvar para registar as alterações\");\r\n    setSchedules(values);\r\n    setTab(0);\r\n  };\r\n\r\n  const handleChangePrompt = (e) => {\r\n    setSelectedPrompt(e.target.value);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Dialog\r\n        maxWidth=\"md\"\r\n        fullWidth={true}\r\n        open={open}\r\n        onClose={handleClose}\r\n        scroll=\"paper\"\r\n      >\r\n        <DialogTitle>\r\n          {queueId\r\n            ? `${i18n.t(\"queueModal.title.edit\")}`\r\n            : `${i18n.t(\"queueModal.title.add\")}`}\r\n        </DialogTitle>\r\n        <Tabs\r\n          value={tab}\r\n          indicatorColor=\"primary\"\r\n          textColor=\"primary\"\r\n          onChange={(_, v) => setTab(v)}\r\n          aria-label=\"disabled tabs example\"\r\n        >\r\n          <Tab label=\"Dados da Fila\" />\r\n          {schedulesEnabled && <Tab label=\"Horários de Atendimento\" />}\r\n        </Tabs>\r\n        {tab === 0 && (\r\n          <Paper>\r\n            <Formik\r\n              initialValues={queue}\r\n              enableReinitialize={true}\r\n              validationSchema={QueueSchema}\r\n              onSubmit={(values, actions) => {\r\n                setTimeout(() => {\r\n                  handleSaveQueue(values);\r\n                  actions.setSubmitting(false);\r\n                }, 400);\r\n              }}\r\n            >\r\n              {({ touched, errors, isSubmitting, values }) => (\r\n                <Form>\r\n                  <DialogContent dividers>\r\n                    <Field\r\n                      as={TextField}\r\n                      label={i18n.t(\"queueModal.form.name\")}\r\n                      autoFocus\r\n                      name=\"name\"\r\n                      error={touched.name && Boolean(errors.name)}\r\n                      helperText={touched.name && errors.name}\r\n                      variant=\"outlined\"\r\n                      margin=\"dense\"\r\n                      className={classes.textField}\r\n                    />\r\n                    <Field\r\n                      as={TextField}\r\n                      label={i18n.t(\"queueModal.form.color\")}\r\n                      name=\"color\"\r\n                      id=\"color\"\r\n                      onFocus={() => {\r\n                        setColorPickerModalOpen(true);\r\n                        greetingRef.current.focus();\r\n                      }}\r\n                      error={touched.color && Boolean(errors.color)}\r\n                      helperText={touched.color && errors.color}\r\n                      InputProps={{\r\n                        startAdornment: (\r\n                          <InputAdornment position=\"start\">\r\n                            <div\r\n                              style={{ backgroundColor: values.color }}\r\n                              className={classes.colorAdorment}\r\n                            ></div>\r\n                          </InputAdornment>\r\n                        ),\r\n                        endAdornment: (\r\n                          <IconButton\r\n                            size=\"small\"\r\n                            color=\"default\"\r\n                            onClick={() => setColorPickerModalOpen(true)}\r\n                          >\r\n                            <Colorize />\r\n                          </IconButton>\r\n                        ),\r\n                      }}\r\n                      variant=\"outlined\"\r\n                      margin=\"dense\"\r\n                      className={classes.textField}\r\n                    />\r\n                    <ColorPicker\r\n                      open={colorPickerModalOpen}\r\n                      handleClose={() => setColorPickerModalOpen(false)}\r\n                      onChange={(color) => {\r\n                        values.color = color;\r\n                        setQueue(() => {\r\n                          return { ...values, color };\r\n                        });\r\n                      }}\r\n                    />\r\n                    <Field\r\n                      as={TextField}\r\n                      label={i18n.t(\"queueModal.form.orderQueue\")}\r\n                      name=\"orderQueue\"\r\n                      type=\"orderQueue\"\r\n                      error={touched.orderQueue && Boolean(errors.orderQueue)}\r\n                      helperText={touched.orderQueue && errors.orderQueue}\r\n                      variant=\"outlined\"\r\n                      margin=\"dense\"\r\n                      className={classes.textField1}\r\n                    />\r\n                    <div>\r\n                      <FormControl\r\n                        variant=\"outlined\"\r\n                        margin=\"dense\"\r\n                        className={classes.FormControl}\r\n                        fullWidth\r\n                      >\r\n                        <InputLabel id=\"integrationId-selection-label\">\r\n                          {i18n.t(\"queueModal.form.integrationId\")}\r\n                        </InputLabel>\r\n                        <Field\r\n                          as={Select}\r\n                          label={i18n.t(\"queueModal.form.integrationId\")}\r\n                          name=\"integrationId\"\r\n                          id=\"integrationId\"\r\n                          placeholder={i18n.t(\"queueModal.form.integrationId\")}\r\n                          labelId=\"integrationId-selection-label\"\r\n                          value={values.integrationId || \"\"}\r\n                        >\r\n                          <MenuItem value={\"\"} >{\"Nenhum\"}</MenuItem>\r\n                          {integrations.map((integration) => (\r\n                            <MenuItem key={integration.id} value={integration.id}>\r\n                              {integration.name}\r\n                            </MenuItem>\r\n                          ))}\r\n                        </Field>\r\n\r\n                      </FormControl>\r\n                      <FormControl\r\n                        margin=\"dense\"\r\n                        variant=\"outlined\"\r\n                        fullWidth\r\n                      >\r\n                        <InputLabel>\r\n                          {i18n.t(\"whatsappModal.form.prompt\")}\r\n                        </InputLabel>\r\n                        <Select\r\n                          labelId=\"dialog-select-prompt-label\"\r\n                          id=\"dialog-select-prompt\"\r\n                          name=\"promptId\"\r\n                          value={selectedPrompt || \"\"}\r\n                          onChange={handleChangePrompt}\r\n                          label={i18n.t(\"whatsappModal.form.prompt\")}\r\n                          fullWidth\r\n                          MenuProps={{\r\n                            anchorOrigin: {\r\n                              vertical: \"bottom\",\r\n                              horizontal: \"left\",\r\n                            },\r\n                            transformOrigin: {\r\n                              vertical: \"top\",\r\n                              horizontal: \"left\",\r\n                            },\r\n                            getContentAnchorEl: null,\r\n                          }}\r\n                        >\r\n                          {prompts.map((prompt) => (\r\n                            <MenuItem\r\n                              key={prompt.id}\r\n                              value={prompt.id}\r\n                            >\r\n                              {prompt.name}\r\n                            </MenuItem>\r\n                          ))}\r\n                        </Select>\r\n                      </FormControl>\r\n                    </div>\r\n                    <div style={{ marginTop: 5 }}>\r\n                      <Field\r\n                        as={TextField}\r\n                        label={i18n.t(\"queueModal.form.greetingMessage\")}\r\n                        type=\"greetingMessage\"\r\n                        multiline\r\n                        inputRef={greetingRef}\r\n                        rows={5}\r\n                        fullWidth\r\n                        name=\"greetingMessage\"\r\n                        error={\r\n                          touched.greetingMessage &&\r\n                          Boolean(errors.greetingMessage)\r\n                        }\r\n                        helperText={\r\n                          touched.greetingMessage && errors.greetingMessage\r\n                        }\r\n                        variant=\"outlined\"\r\n                        margin=\"dense\"\r\n                      />\r\n                      {schedulesEnabled && (\r\n                        <Field\r\n                          as={TextField}\r\n                          label={i18n.t(\"queueModal.form.outOfHoursMessage\")}\r\n                          type=\"outOfHoursMessage\"\r\n                          multiline\r\n                          inputRef={greetingRef}\r\n                          rows={5}\r\n                          fullWidth\r\n                          name=\"outOfHoursMessage\"\r\n                          error={\r\n                            touched.outOfHoursMessage &&\r\n                            Boolean(errors.outOfHoursMessage)\r\n                          }\r\n                          helperText={\r\n                            touched.outOfHoursMessage && errors.outOfHoursMessage\r\n                          }\r\n                          variant=\"outlined\"\r\n                          margin=\"dense\"\r\n                        />\r\n                      )}\r\n                    </div>\r\n                    <QueueOptions queueId={queueId} />\r\n                  </DialogContent>\r\n                  <DialogActions>\r\n                    <Button\r\n                      onClick={handleClose}\r\n                      color=\"secondary\"\r\n                      disabled={isSubmitting}\r\n                      variant=\"outlined\"\r\n                    >\r\n                      {i18n.t(\"queueModal.buttons.cancel\")}\r\n                    </Button>\r\n                    <Button\r\n                      type=\"submit\"\r\n                      color=\"primary\"\r\n                      disabled={isSubmitting}\r\n                      variant=\"contained\"\r\n                      className={classes.btnWrapper}\r\n                    >\r\n                      {queueId\r\n                        ? `${i18n.t(\"queueModal.buttons.okEdit\")}`\r\n                        : `${i18n.t(\"queueModal.buttons.okAdd\")}`}\r\n                      {isSubmitting && (\r\n                        <CircularProgress\r\n                          size={24}\r\n                          className={classes.buttonProgress}\r\n                        />\r\n                      )}\r\n                    </Button>\r\n                  </DialogActions>\r\n                </Form>\r\n              )}\r\n            </Formik>\r\n          </Paper>\r\n        )}\r\n        {tab === 1 && (\r\n          <Paper style={{ padding: 20 }}>\r\n            <SchedulesForm\r\n              loading={false}\r\n              onSubmit={handleSaveSchedules}\r\n              initialValues={schedules}\r\n              labelSaveButton=\"Adicionar\"\r\n            />\r\n          </Paper>\r\n        )}\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default QueueModal;\r\n","import React, { useEffect, useReducer, useState, useContext } from \"react\";\r\n\r\nimport {\r\n  Button,\r\n  IconButton,\r\n  makeStyles,\r\n  Paper,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableRow,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\n\r\nimport MainContainer from \"../../components/MainContainer\";\r\nimport MainHeader from \"../../components/MainHeader\";\r\nimport MainHeaderButtonsWrapper from \"../../components/MainHeaderButtonsWrapper\";\r\nimport TableRowSkeleton from \"../../components/TableRowSkeleton\";\r\nimport Title from \"../../components/Title\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport api from \"../../services/api\";\r\nimport { DeleteOutline, Edit } from \"@material-ui/icons\";\r\nimport QueueModal from \"../../components/QueueModal\";\r\nimport { toast } from \"react-toastify\";\r\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\r\nimport { SocketContext } from \"../../context/Socket/SocketContext\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainPaper: {\r\n    flex: 1,\r\n    padding: theme.spacing(1),\r\n    overflowY: \"scroll\",\r\n    ...theme.scrollbarStyles,\r\n  },\r\n  customTableCell: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n}));\r\n\r\nconst reducer = (state, action) => {\r\n  if (action.type === \"LOAD_QUEUES\") {\r\n    const queues = action.payload;\r\n    const newQueues = [];\r\n\r\n    queues.forEach((queue) => {\r\n      const queueIndex = state.findIndex((q) => q.id === queue.id);\r\n      if (queueIndex !== -1) {\r\n        state[queueIndex] = queue;\r\n      } else {\r\n        newQueues.push(queue);\r\n      }\r\n    });\r\n\r\n    return [...state, ...newQueues];\r\n  }\r\n\r\n  if (action.type === \"UPDATE_QUEUES\") {\r\n    const queue = action.payload;\r\n    const queueIndex = state.findIndex((u) => u.id === queue.id);\r\n\r\n    if (queueIndex !== -1) {\r\n      state[queueIndex] = queue;\r\n      return [...state];\r\n    } else {\r\n      return [queue, ...state];\r\n    }\r\n  }\r\n\r\n  if (action.type === \"DELETE_QUEUE\") {\r\n    const queueId = action.payload;\r\n    const queueIndex = state.findIndex((q) => q.id === queueId);\r\n    if (queueIndex !== -1) {\r\n      state.splice(queueIndex, 1);\r\n    }\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"RESET\") {\r\n    return [];\r\n  }\r\n};\r\n\r\nconst Queues = () => {\r\n  const classes = useStyles();\r\n\r\n  const [queues, dispatch] = useReducer(reducer, []);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [queueModalOpen, setQueueModalOpen] = useState(false);\r\n  const [selectedQueue, setSelectedQueue] = useState(null);\r\n  const [confirmModalOpen, setConfirmModalOpen] = useState(false);\r\n\r\n  const socketManager = useContext(SocketContext);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      setLoading(true);\r\n      try {\r\n        const { data } = await api.get(\"/queue\");\r\n        dispatch({ type: \"LOAD_QUEUES\", payload: data });\r\n\r\n        setLoading(false);\r\n      } catch (err) {\r\n        toastError(err);\r\n        setLoading(false);\r\n      }\r\n    })();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const companyId = localStorage.getItem(\"companyId\");\r\n    const socket = socketManager.getSocket(companyId);\r\n\r\n    socket.on(`company-${companyId}-queue`, (data) => {\r\n      if (data.action === \"update\" || data.action === \"create\") {\r\n        dispatch({ type: \"UPDATE_QUEUES\", payload: data.queue });\r\n      }\r\n\r\n      if (data.action === \"delete\") {\r\n        dispatch({ type: \"DELETE_QUEUE\", payload: data.queueId });\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, [socketManager]);\r\n\r\n  const handleOpenQueueModal = () => {\r\n    setQueueModalOpen(true);\r\n    setSelectedQueue(null);\r\n  };\r\n\r\n  const handleCloseQueueModal = () => {\r\n    setQueueModalOpen(false);\r\n    setSelectedQueue(null);\r\n  };\r\n\r\n  const handleEditQueue = (queue) => {\r\n    setSelectedQueue(queue);\r\n    setQueueModalOpen(true);\r\n  };\r\n\r\n  const handleCloseConfirmationModal = () => {\r\n    setConfirmModalOpen(false);\r\n    setSelectedQueue(null);\r\n  };\r\n\r\n  const handleDeleteQueue = async (queueId) => {\r\n    try {\r\n      await api.delete(`/queue/${queueId}`);\r\n      toast.success(i18n.t(\"Queue deleted successfully!\"));\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n    setSelectedQueue(null);\r\n  };\r\n\r\n  return (\r\n    <MainContainer>\r\n      <ConfirmationModal\r\n        title={\r\n          selectedQueue &&\r\n          `${i18n.t(\"queues.confirmationModal.deleteTitle\")} ${\r\n            selectedQueue.name\r\n          }?`\r\n        }\r\n        open={confirmModalOpen}\r\n        onClose={handleCloseConfirmationModal}\r\n        onConfirm={() => handleDeleteQueue(selectedQueue.id)}\r\n      >\r\n        {i18n.t(\"queues.confirmationModal.deleteMessage\")}\r\n      </ConfirmationModal>\r\n      <QueueModal\r\n        open={queueModalOpen}\r\n        onClose={handleCloseQueueModal}\r\n        queueId={selectedQueue?.id}\r\n      />\r\n      <MainHeader>\r\n        <Title>{i18n.t(\"queues.title\")}</Title>\r\n        <MainHeaderButtonsWrapper>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={handleOpenQueueModal}\r\n          >\r\n            {i18n.t(\"queues.buttons.add\")}\r\n          </Button>\r\n        </MainHeaderButtonsWrapper>\r\n      </MainHeader>\r\n      <Paper className={classes.mainPaper} variant=\"outlined\">\r\n        <Table size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n\t\t\t   <TableCell align=\"center\">\r\n                {i18n.t(\"queues.table.id\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"queues.table.name\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"queues.table.color\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"queues.table.orderQueue\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"queues.table.greeting\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"queues.table.actions\")}\r\n              </TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            <>\r\n              {queues.map((queue) => (\r\n                <TableRow key={queue.id}>\r\n\t\t\t\t<TableCell align=\"center\">{queue.id}</TableCell>\r\n                  <TableCell align=\"center\">{queue.name}</TableCell>\r\n                  <TableCell align=\"center\">\r\n                    <div className={classes.customTableCell}>\r\n                      <span\r\n                        style={{\r\n                          backgroundColor: queue.color,\r\n                          width: 60,\r\n                          height: 20,\r\n                          alignSelf: \"center\",\r\n                        }}\r\n                      />\r\n                    </div>\r\n                  </TableCell>\r\n                  <TableCell align=\"center\">\r\n                    <div className={classes.customTableCell}>\r\n                      <Typography\r\n                        style={{ width: 300, align: \"center\" }}\r\n                        noWrap\r\n                        variant=\"body2\"\r\n                      >\r\n                        {queue.orderQueue}\r\n                      </Typography>\r\n                    </div>\r\n                  </TableCell>\r\n                  <TableCell align=\"center\">\r\n                    <div className={classes.customTableCell}>\r\n                      <Typography\r\n                        style={{ width: 300, align: \"center\" }}\r\n                        noWrap\r\n                        variant=\"body2\"\r\n                      >\r\n                        {queue.greetingMessage}\r\n                      </Typography>\r\n                    </div>\r\n                  </TableCell>\r\n                  <TableCell align=\"center\">\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={() => handleEditQueue(queue)}\r\n                    >\r\n                      <Edit />\r\n                    </IconButton>\r\n\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={() => {\r\n                        setSelectedQueue(queue);\r\n                        setConfirmModalOpen(true);\r\n                      }}\r\n                    >\r\n                      <DeleteOutline />\r\n                    </IconButton>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n              {loading && <TableRowSkeleton columns={4} />}\r\n            </>\r\n          </TableBody>\r\n        </Table>\r\n      </Paper>\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nexport default Queues;\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\n\r\nimport * as Yup from \"yup\";\r\nimport { Formik, Form, Field } from \"formik\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { green } from \"@material-ui/core/colors\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport { Colorize } from \"@material-ui/icons\";\r\nimport { ColorBox } from 'material-ui-color';\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nimport api from \"../../services/api\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport { IconButton, InputAdornment } from \"@material-ui/core\";\r\nimport { FormControlLabel, Switch } from '@material-ui/core';\r\nimport Select from \"@material-ui/core/Select\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\troot: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexWrap: \"wrap\",\r\n\t},\r\n\tmultFieldLine: {\r\n\t\tdisplay: \"flex\",\r\n\t\t\"& > *:not(:last-child)\": {\r\n\t\t\tmarginRight: theme.spacing(1),\r\n\t\t},\r\n\t},\r\n\r\n\tbtnWrapper: {\r\n\t\tposition: \"relative\",\r\n\t},\r\n\r\n\tbuttonProgress: {\r\n\t\tcolor: green[500],\r\n\t\tposition: \"absolute\",\r\n\t\ttop: \"50%\",\r\n\t\tleft: \"50%\",\r\n\t\tmarginTop: -12,\r\n\t\tmarginLeft: -12,\r\n\t},\r\n\tformControl: {\r\n\t\tmargin: theme.spacing(1),\r\n\t\tminWidth: 120,\r\n\t},\r\n\tcolorAdorment: {\r\n\t\twidth: 20,\r\n\t\theight: 20,\r\n\t},\r\n}));\r\n\r\nconst TagSchema = Yup.object().shape({\r\n\tname: Yup.string()\r\n\t\t.min(3, \"Mensagem muito curta\")\r\n\t\t.required(\"Obrigatório\")\r\n});\r\n\r\nconst TagModal = ({ open, onClose, tagId, reload }) => {\r\n\tconst classes = useStyles();\r\n\tconst { user } = useContext(AuthContext);\r\n\tconst [colorPickerModalOpen, setColorPickerModalOpen] = useState(false);\r\n\r\n\tconst initialState = {\r\n\t\tname: \"\",\r\n\t\tcolor: \"\",\r\n\t\tkanban: 0\r\n\t};\r\n\r\n\tconst [tag, setTag] = useState(initialState);\r\n\tconst [ kanban, setKanban] = useState(0);\r\n\r\n\tuseEffect(() => {\r\n\t\ttry {\r\n\t\t\t(async () => {\r\n\t\t\t\tif (!tagId) return;\r\n\r\n\t\t\t\tconst { data } = await api.get(`/tags/${tagId}`);\r\n\t\t\t\tsetKanban(data.kanban);\r\n\t\t\t\tsetTag(prevState => {\r\n\t\t\t\t\treturn { ...prevState, ...data };\r\n\t\t\t\t});\r\n\t\t\t})()\r\n\t\t} catch (err) {\r\n\t\t\ttoastError(err);\r\n\t\t}\r\n\t}, [tagId, open]);\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetTag(initialState);\r\n\t\tsetColorPickerModalOpen(false);\r\n\t\tonClose();\r\n\t};\r\n\r\n\tconst handleKanbanChange = (e) => {\r\n\t\tsetKanban( e.target.checked ? 1 : 0);\r\n\t};\r\n\r\n\tconst handleSaveTag = async values => {\r\n\t\tconst tagData = { ...values, userId: user.id, kanban };\r\n\t\ttry {\r\n\t\t\tif (tagId) {\r\n\t\t\t\tawait api.put(`/tags/${tagId}`, tagData);\r\n\t\t\t} else {\r\n\t\t\t\tawait api.post(\"/tags\", tagData);\r\n\t\t\t}\r\n\t\t\ttoast.success(i18n.t(\"tagModal.success\"));\r\n\t\t\tif (typeof reload == 'function') {\r\n\t\t\t\treload();\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\ttoastError(err);\r\n\t\t}\r\n\t\thandleClose();\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<Dialog\r\n\t\t\t\topen={open}\r\n\t\t\t\tonClose={handleClose}\r\n\t\t\t\tmaxWidth=\"xs\"\r\n\t\t\t\tfullWidth\r\n\t\t\t\tscroll=\"paper\"\r\n\t\t\t>\r\n\t\t\t\t<DialogTitle id=\"form-dialog-title\">\r\n\t\t\t\t\t{(tagId ? `${i18n.t(\"tagModal.title.edit\")}` : `${i18n.t(\"tagModal.title.add\")}`)}\r\n\t\t\t\t</DialogTitle>\r\n\t\t\t\t<Formik\r\n\t\t\t\t\tinitialValues={tag}\r\n\t\t\t\t\tenableReinitialize={true}\r\n\t\t\t\t\tvalidationSchema={TagSchema}\r\n\t\t\t\t\tonSubmit={(values, actions) => {\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\thandleSaveTag(values);\r\n\t\t\t\t\t\t\tactions.setSubmitting(false);\r\n\t\t\t\t\t\t}, 400);\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{({ touched, errors, isSubmitting, values }) => (\r\n\t\t\t\t\t\t<Form>\r\n\t\t\t\t\t\t\t<DialogContent dividers>\r\n\t\t\t\t\t\t\t\t<div className={classes.multFieldLine}>\r\n\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"tagModal.form.name\")}\r\n\t\t\t\t\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\t\t\t\t\terror={touched.name && Boolean(errors.name)}\r\n\t\t\t\t\t\t\t\t\t\thelperText={touched.name && errors.name}\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => setTag(prev => ({ ...prev, name: e.target.value }))}\r\n\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t<div className={classes.multFieldLine}>\r\n\t\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\t\tas={TextField}\r\n\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(\"tagModal.form.color\")}\r\n\t\t\t\t\t\t\t\t\t\tname=\"color\"\r\n\t\t\t\t\t\t\t\t\t\tid=\"color\"\r\n\t\t\t\t\t\t\t\t\t\terror={touched.color && Boolean(errors.color)}\r\n\t\t\t\t\t\t\t\t\t\thelperText={touched.color && errors.color}\r\n\t\t\t\t\t\t\t\t\t\tInputProps={{\r\n\t\t\t\t\t\t\t\t\t\t\tstartAdornment: (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<InputAdornment position=\"start\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ backgroundColor: values.color }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.colorAdorment}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t></div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</InputAdornment>\r\n\t\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\t\tendAdornment: (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"default\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => setColorPickerModalOpen(!colorPickerModalOpen)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Colorize />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\tmargin=\"dense\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t{(user.profile === \"admin\" || user.profile === \"supervisor\") && (\r\n                                <>\r\n\t\t\t\t\t\t\t\t<div className={classes.multFieldLine}>\r\n        \t\t\t\t\t\t\t<FormControlLabel\r\n          \t\t\t\t\t\t\t\tcontrol={\r\n            \t\t\t\t\t\t\t\t<Checkbox\r\n             \t\t\t\t\t\t\t\t\tchecked={kanban === 1}\r\n             \t\t\t\t\t\t\t\t\tonChange={handleKanbanChange}\r\n              \t\t\t\t\t\t\t\t\tvalue={kanban}\r\n              \t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n            \t\t\t\t\t\t\t\t/>\r\n          \t\t\t\t\t\t\t\t}\r\n          \t\t\t\t\t\t\t\tlabel=\"Kanban\"\r\n          \t\t\t\t\t\t\t\tlabelPlacement=\"start\"\r\n        \t\t\t\t\t\t\t/>\r\n      \t\t\t\t\t\t\t</div>\r\n      \t\t\t\t\t\t\t<br />\r\n                                </>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t{colorPickerModalOpen && (\r\n\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t<ColorBox\r\n\t\t\t\t\t\t\t\t\t\t\tdisableAlpha={true}\r\n\t\t\t\t\t\t\t\t\t\t\thslGradient={false}\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ margin: '20px auto 0' }}\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={tag.color}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={val => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetTag(prev => ({ ...prev, color: `#${val.hex}` }));\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</DialogContent>\r\n\t\t\t\t\t\t\t<DialogActions>\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tonClick={handleClose}\r\n\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\t\t\tdisabled={isSubmitting}\r\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{i18n.t(\"tagModal.buttons.cancel\")}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\tdisabled={isSubmitting}\r\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\t\tclassName={classes.btnWrapper}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{tagId\r\n\t\t\t\t\t\t\t\t\t\t? `${i18n.t(\"tagModal.buttons.okEdit\")}`\r\n\t\t\t\t\t\t\t\t\t\t: `${i18n.t(\"tagModal.buttons.okAdd\")}`}\r\n\t\t\t\t\t\t\t\t\t{isSubmitting && (\r\n\t\t\t\t\t\t\t\t\t\t<CircularProgress\r\n\t\t\t\t\t\t\t\t\t\t\tsize={24}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName={classes.buttonProgress}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</DialogActions>\r\n\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Formik>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default TagModal;\r\n","import React, {\r\n  useState,\r\n  useEffect,\r\n  useReducer,\r\n  useCallback,\r\n  useContext,\r\n} from \"react\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\n\r\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\nimport MainContainer from \"../../components/MainContainer\";\r\nimport MainHeader from \"../../components/MainHeader\";\r\nimport MainHeaderButtonsWrapper from \"../../components/MainHeaderButtonsWrapper\";\r\nimport Title from \"../../components/Title\";\r\n\r\nimport api from \"../../services/api\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport TableRowSkeleton from \"../../components/TableRowSkeleton\";\r\nimport TagModal from \"../../components/TagModal\";\r\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { Chip } from \"@material-ui/core\";\r\nimport { Tooltip } from \"@material-ui/core\";\r\nimport { SocketContext } from \"../../context/Socket/SocketContext\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\n\r\nconst reducer = (state, action) => {\r\n  if (action.type === \"LOAD_TAGS\") {\r\n    const tags = action.payload;\r\n    const newTags = [];\r\n\r\n    tags.forEach((tag) => {\r\n      const tagIndex = state.findIndex((s) => s.id === tag.id);\r\n      if (tagIndex !== -1) {\r\n        state[tagIndex] = tag;\r\n      } else {\r\n        newTags.push(tag);\r\n      }\r\n    });\r\n\r\n    return [...state, ...newTags];\r\n  }\r\n\r\n  if (action.type === \"UPDATE_TAGS\") {\r\n    const tag = action.payload;\r\n    const tagIndex = state.findIndex((s) => s.id === tag.id);\r\n\r\n    if (tagIndex !== -1) {\r\n      state[tagIndex] = tag;\r\n      return [...state];\r\n    } else {\r\n      return [tag, ...state];\r\n    }\r\n  }\r\n\r\n  if (action.type === \"DELETE_TAG\") {\r\n    const tagId = action.payload;\r\n\r\n    const tagIndex = state.findIndex((s) => s.id === tagId);\r\n    if (tagIndex !== -1) {\r\n      state.splice(tagIndex, 1);\r\n    }\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"RESET\") {\r\n    return [];\r\n  }\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainPaper: {\r\n    flex: 1,\r\n    padding: theme.spacing(1),\r\n    overflowY: \"scroll\",\r\n    ...theme.scrollbarStyles,\r\n  },\r\n}));\r\n\r\nconst Tags = () => {\r\n  const classes = useStyles();\r\n\r\n  const { user } = useContext(AuthContext);\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [pageNumber, setPageNumber] = useState(1);\r\n  const [hasMore, setHasMore] = useState(false);\r\n  const [selectedTag, setSelectedTag] = useState(null);\r\n  const [deletingTag, setDeletingTag] = useState(null);\r\n  const [confirmModalOpen, setConfirmModalOpen] = useState(false);\r\n  const [searchParam, setSearchParam] = useState(\"\");\r\n  const [tags, dispatch] = useReducer(reducer, []);\r\n  const [tagModalOpen, setTagModalOpen] = useState(false);\r\n\r\n  const fetchTags = useCallback(async () => {\r\n    try {\r\n      const { data } = await api.get(\"/tags/\", {\r\n        params: { searchParam, pageNumber },\r\n      });\r\n      dispatch({ type: \"LOAD_TAGS\", payload: data.tags });\r\n      setHasMore(data.hasMore);\r\n      setLoading(false);\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  }, [searchParam, pageNumber]);\r\n\r\n  const socketManager = useContext(SocketContext);\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: \"RESET\" });\r\n    setPageNumber(1);\r\n  }, [searchParam]);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const delayDebounceFn = setTimeout(() => {\r\n      fetchTags();\r\n    }, 500);\r\n    return () => clearTimeout(delayDebounceFn);\r\n  }, [searchParam, pageNumber, fetchTags]);\r\n\r\n  useEffect(() => {\r\n    const socket = socketManager.getSocket(user.companyId);\r\n\r\n    socket.on(\"user\", (data) => {\r\n      if (data.action === \"update\" || data.action === \"create\") {\r\n        dispatch({ type: \"UPDATE_TAGS\", payload: data.tags });\r\n      }\r\n\r\n      if (data.action === \"delete\") {\r\n        dispatch({ type: \"DELETE_USER\", payload: +data.tagId });\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, [socketManager, user]);\r\n\r\n  const handleOpenTagModal = () => {\r\n    setSelectedTag(null);\r\n    setTagModalOpen(true);\r\n  };\r\n\r\n  const handleCloseTagModal = () => {\r\n    setSelectedTag(null);\r\n    setTagModalOpen(false);\r\n  };\r\n\r\n  const handleSearch = (event) => {\r\n    setSearchParam(event.target.value.toLowerCase());\r\n  };\r\n\r\n  const handleEditTag = (tag) => {\r\n    setSelectedTag(tag);\r\n    setTagModalOpen(true);\r\n  };\r\n\r\n  const handleDeleteTag = async (tagId) => {\r\n    try {\r\n      await api.delete(`/tags/${tagId}`);\r\n      toast.success(i18n.t(\"tags.toasts.deleted\"));\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n    setDeletingTag(null);\r\n    setSearchParam(\"\");\r\n    setPageNumber(1);\r\n\r\n    dispatch({ type: \"RESET\" });\r\n    setPageNumber(1);\r\n    await fetchTags();\r\n  };\r\n\r\n  const loadMore = () => {\r\n    setPageNumber((prevState) => prevState + 1);\r\n  };\r\n\r\n  const handleScroll = (e) => {\r\n    if (!hasMore || loading) return;\r\n    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\r\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\r\n      loadMore();\r\n    }\r\n  };\r\n\r\nreturn (\r\n    <MainContainer>\r\n      <ConfirmationModal\r\n        title={deletingTag && `${i18n.t(\"tags.confirmationModal.deleteTitle\")}`}\r\n        open={confirmModalOpen}\r\n        onClose={setConfirmModalOpen}\r\n        onConfirm={() => handleDeleteTag(deletingTag.id)}\r\n      >\r\n        {i18n.t(\"tags.confirmationModal.deleteMessage\")}\r\n      </ConfirmationModal>\r\n      <TagModal\r\n        open={tagModalOpen}\r\n        onClose={handleCloseTagModal}\r\n        reload={fetchTags}\r\n        aria-labelledby=\"form-dialog-title\"\r\n        tagId={selectedTag && selectedTag.id}\r\n      />\r\n      <MainHeader>\r\n        <Title>{i18n.t(\"tags.title\")}</Title>\r\n        <MainHeaderButtonsWrapper>\r\n          <TextField\r\n            placeholder={i18n.t(\"contacts.searchPlaceholder\")}\r\n            type=\"search\"\r\n            value={searchParam}\r\n            onChange={handleSearch}\r\n            InputProps={{\r\n              startAdornment: (\r\n                <InputAdornment position=\"start\">\r\n                  <SearchIcon style={{ color: \"gray\" }} />\r\n                </InputAdornment>\r\n              ),\r\n            }}\r\n          />\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={handleOpenTagModal}\r\n          >\r\n            {i18n.t(\"tags.buttons.add\")}\r\n          </Button>\t\t  \r\n        </MainHeaderButtonsWrapper>\r\n      </MainHeader>\r\n      <Paper\r\n        className={classes.mainPaper}\r\n        variant=\"outlined\"\r\n        onScroll={handleScroll}\r\n      >\r\n        <Table size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell align=\"center\">{i18n.t(\"tags.table.name\")}</TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"tags.table.tickets\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"tags.table.actions\")}\r\n              </TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            <>\r\n              {tags.map((tag) => (\r\n                <TableRow key={tag.id}>\r\n                  <TableCell align=\"center\">\r\n                    <Chip\r\n                      variant=\"outlined\"\r\n                      style={{\r\n                        backgroundColor: tag.color,\r\n                        textShadow: \"1px 1px 1px #000\",\r\n                        color: \"white\",\r\n                      }}\r\n                      label={tag.name}\r\n                      size=\"small\"\r\n                    />\r\n                  </TableCell>\r\n                  <TableCell align=\"center\">{tag.ticketsCount}</TableCell>\r\n                  <TableCell align=\"center\">\r\n                    <IconButton size=\"small\" onClick={() => handleEditTag(tag)}>\r\n                      <EditIcon />\r\n                    </IconButton>\r\n\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={(e) => {\r\n                        setConfirmModalOpen(true);\r\n                        setDeletingTag(tag);\r\n                      }}\r\n                    >\r\n                      <DeleteOutlineIcon />\r\n                    </IconButton>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n              {loading && <TableRowSkeleton columns={4} />}\r\n            </>\r\n          </TableBody>\r\n        </Table>\r\n      </Paper>\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nexport default Tags;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport { Button, CircularProgress, Grid, TextField, Typography } from \"@material-ui/core\";\r\nimport { Field, Form, Formik } from \"formik\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { toast } from \"react-toastify\";\r\n// import api from \"../../services/api\";\r\nimport axios from \"axios\";\r\nimport usePlans from \"../../hooks/usePlans\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainPaper: {\r\n    flex: 1,\r\n    padding: theme.spacing(2),\r\n    paddingBottom: 100\r\n  },\r\n  mainHeader: {\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  elementMargin: {\r\n    padding: theme.spacing(2),\r\n  },\r\n  formContainer: {\r\n    maxWidth: 500,\r\n  },\r\n  textRight: {\r\n    textAlign: \"right\"\r\n  }\r\n}));\r\n\r\nconst MessagesAPI = () => {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n\r\n  const [formMessageTextData,] = useState({ token: '', number: '', body: '' })\r\n  const [formMessageMediaData,] = useState({ token: '', number: '', medias: '' })\r\n  const [file, setFile] = useState({})\r\n\r\n  const { getPlanCompany } = usePlans();\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      const companyId = localStorage.getItem(\"companyId\");\r\n      const planConfigs = await getPlanCompany(undefined, companyId);\r\n      if (!planConfigs.plan.useExternalApi) {\r\n        toast.error(\"Esta empresa não possui permissão para acessar essa página! Estamos lhe redirecionando.\");\r\n        setTimeout(() => {\r\n          history.push(`/`)\r\n        }, 1000);\r\n      }\r\n    }\r\n    fetchData();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  const getEndpoint = () => {\r\n    return process.env.REACT_APP_BACKEND_URL + '/api/messages/send'\r\n  }\r\n\r\n  const handleSendTextMessage = async (values) => {\r\n    const { number, body } = values;\r\n    const data = { number, body };\r\n    try {\r\n      await axios.request({\r\n        url: getEndpoint(),\r\n        method: 'POST',\r\n        data,\r\n        headers: {\r\n          'Content-type': 'application/json',\r\n          'Authorization': `Bearer ${values.token}`\r\n        }\r\n      })\r\n      toast.success('Mensagem enviada com sucesso');\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  }\r\n\r\n  const handleSendMediaMessage = async (values) => {\r\n    try {\r\n      const firstFile = file[0];\r\n      const data = new FormData();\r\n      data.append('number', values.number);\r\n      data.append('body', firstFile.name);\r\n      data.append('medias', firstFile);\r\n      await axios.request({\r\n        url: getEndpoint(),\r\n        method: 'POST',\r\n        data,\r\n        headers: {\r\n          'Content-type': 'multipart/form-data',\r\n          'Authorization': `Bearer ${values.token}`\r\n        }\r\n      })\r\n      toast.success('Mensagem enviada com sucesso');\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  }\r\n\r\n  const renderFormMessageText = () => {\r\n    return (\r\n      <Formik\r\n        initialValues={formMessageTextData}\r\n        enableReinitialize={true}\r\n        onSubmit={(values, actions) => {\r\n          setTimeout(async () => {\r\n            await handleSendTextMessage(values);\r\n            actions.setSubmitting(false);\r\n            actions.resetForm()\r\n          }, 400);\r\n        }}\r\n        className={classes.elementMargin}\r\n      >\r\n        {({ isSubmitting }) => (\r\n          <Form className={classes.formContainer}>\r\n            <Grid container spacing={2}>\r\n              <Grid item xs={12} md={6}>\r\n                <Field\r\n                  as={TextField}\r\n                  label={i18n.t(\"messagesAPI.textMessage.token\")}\r\n                  name=\"token\"\r\n                  autoFocus\r\n                  variant=\"outlined\"\r\n                  margin=\"dense\"\r\n                  fullWidth\r\n                  className={classes.textField}\r\n                  required\r\n                />\r\n              </Grid>\r\n              <Grid item xs={12} md={6}>\r\n                <Field\r\n                  as={TextField}\r\n                  label={i18n.t(\"messagesAPI.textMessage.number\")}\r\n                  name=\"number\"\r\n                  autoFocus\r\n                  variant=\"outlined\"\r\n                  margin=\"dense\"\r\n                  fullWidth\r\n                  className={classes.textField}\r\n                  required\r\n                />\r\n              </Grid>\r\n              <Grid item xs={12}>\r\n                <Field\r\n                  as={TextField}\r\n                  label={i18n.t(\"messagesAPI.textMessage.body\")}\r\n                  name=\"body\"\r\n                  autoFocus\r\n                  variant=\"outlined\"\r\n                  margin=\"dense\"\r\n                  fullWidth\r\n                  className={classes.textField}\r\n                  required\r\n                />\r\n              </Grid>\r\n              <Grid item xs={12} className={classes.textRight}>\r\n                <Button\r\n                  type=\"submit\"\r\n                  color=\"primary\"\r\n                  variant=\"contained\"\r\n                  className={classes.btnWrapper}\r\n                >\r\n                  {isSubmitting ? (\r\n                    <CircularProgress\r\n                      size={24}\r\n                      className={classes.buttonProgress}\r\n                    />\r\n                  ) : 'Enviar'}\r\n                </Button>\r\n              </Grid>\r\n            </Grid>\r\n          </Form>\r\n        )}\r\n      </Formik>\r\n    )\r\n  }\r\n\r\n  const renderFormMessageMedia = () => {\r\n    return (\r\n      <Formik\r\n        initialValues={formMessageMediaData}\r\n        enableReinitialize={true}\r\n        onSubmit={(values, actions) => {\r\n          setTimeout(async () => {\r\n            await handleSendMediaMessage(values);\r\n            actions.setSubmitting(false);\r\n            actions.resetForm()\r\n            document.getElementById('medias').files = null\r\n            document.getElementById('medias').value = null\r\n          }, 400);\r\n        }}\r\n        className={classes.elementMargin}\r\n      >\r\n        {({ isSubmitting }) => (\r\n          <Form className={classes.formContainer}>\r\n            <Grid container spacing={2}>\r\n              <Grid item xs={12} md={6}>\r\n                <Field\r\n                  as={TextField}\r\n                  label={i18n.t(\"messagesAPI.mediaMessage.token\")}\r\n                  name=\"token\"\r\n                  autoFocus\r\n                  variant=\"outlined\"\r\n                  margin=\"dense\"\r\n                  fullWidth\r\n                  className={classes.textField}\r\n                  required\r\n                />\r\n              </Grid>\r\n              <Grid item xs={12} md={6}>\r\n                <Field\r\n                  as={TextField}\r\n                  label={i18n.t(\"messagesAPI.mediaMessage.number\")}\r\n                  name=\"number\"\r\n                  autoFocus\r\n                  variant=\"outlined\"\r\n                  margin=\"dense\"\r\n                  fullWidth\r\n                  className={classes.textField}\r\n                  required\r\n                />\r\n              </Grid>\r\n              <Grid item xs={12}>\r\n                <input type=\"file\" name=\"medias\" id=\"medias\" required onChange={(e) => setFile(e.target.files)} />\r\n              </Grid>\r\n              <Grid item xs={12} className={classes.textRight}>\r\n                <Button\r\n                  type=\"submit\"\r\n                  color=\"primary\"\r\n                  variant=\"contained\"\r\n                  className={classes.btnWrapper}\r\n                >\r\n                  {isSubmitting ? (\r\n                    <CircularProgress\r\n                      size={24}\r\n                      className={classes.buttonProgress}\r\n                    />\r\n                  ) : 'Enviar'}\r\n                </Button>\r\n              </Grid>\r\n            </Grid>\r\n          </Form>\r\n        )}\r\n      </Formik>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <Paper\r\n      className={classes.mainPaper}\r\n      style={{marginLeft: \"5px\"}}\r\n      // className={classes.elementMargin}\r\n      variant=\"outlined\"\r\n    >\r\n      <Typography variant=\"h5\">\r\n        Documentação para envio de mensagens\r\n      </Typography>\r\n      <Typography variant=\"h6\" color=\"primary\" className={classes.elementMargin}>\r\n        Métodos de Envio\r\n      </Typography>\r\n      <Typography component=\"div\">\r\n        <ol>\r\n          <li>Mensagens de Texto</li>\r\n          <li>Mensagens de Media</li>\r\n        </ol>\r\n      </Typography>\r\n      <Typography variant=\"h6\" color=\"primary\" className={classes.elementMargin}>\r\n        Instruções\r\n      </Typography>\r\n      <Typography className={classes.elementMargin} component=\"div\">\r\n        <b>Observações importantes</b><br />\r\n        <ul>\r\n          <li>Antes de enviar mensagens, é necessário o cadastro do token vinculado à conexão que enviará as mensagens. <br />Para realizar o cadastro acesse o menu \"Conexões\", clique no botão editar da conexão e insira o token no devido campo.</li>\r\n          <li>\r\n            O número para envio não deve ter mascara ou caracteres especiais e deve ser composto por:\r\n            <ul>\r\n              <li>Código do país</li>\r\n              <li>DDD</li>\r\n              <li>Número</li>\r\n            </ul>\r\n          </li>\r\n        </ul>\r\n      </Typography>\r\n      <Typography variant=\"h6\" color=\"primary\" className={classes.elementMargin}>\r\n        1. Mensagens de Texto\r\n      </Typography>\r\n      <Grid container>\r\n        <Grid item xs={12} sm={6}>\r\n          <Typography className={classes.elementMargin} component=\"div\">\r\n            <p>Seguem abaixo a lista de informações necessárias para envio das mensagens de texto:</p>\r\n            <b>Endpoint: </b> {getEndpoint()} <br />\r\n            <b>Método: </b> POST <br />\r\n            <b>Headers: </b> Authorization (Bearer token) e Content-Type (application/json) <br />\r\n            <b>Body: </b> {\"{ \\\"number\\\": \\\"5599999999999\\\", \\\"body\\\": \\\"Sua mensagem\\\" }\"}\r\n          </Typography>\r\n        </Grid>\r\n        <Grid item xs={12} sm={6}>\r\n          <Typography className={classes.elementMargin}>\r\n            <b>Teste de Envio</b>\r\n          </Typography>\r\n          {renderFormMessageText()}\r\n        </Grid>\r\n      </Grid>\r\n      <Typography variant=\"h6\" color=\"primary\" className={classes.elementMargin}>\r\n        2. Mensagens de Media\r\n      </Typography>\r\n      <Grid container>\r\n        <Grid item xs={12} sm={6}>\r\n          <Typography className={classes.elementMargin} component=\"div\">\r\n            <p>Seguem abaixo a lista de informações necessárias para envio das mensagens de texto:</p>\r\n            <b>Endpoint: </b> {getEndpoint()} <br />\r\n            <b>Método: </b> POST <br />\r\n            <b>Headers: </b> Authorization (Bearer token) e Content-Type (multipart/form-data) <br />\r\n            <b>FormData: </b> <br />\r\n            <ul>\r\n              <li>\r\n                <b>number: </b> 5599999999999\r\n              </li>\r\n              <li>\r\n                <b>medias: </b> arquivo\r\n              </li>\r\n            </ul>\r\n          </Typography>\r\n        </Grid>\r\n        <Grid item xs={12} sm={6}>\r\n          <Typography className={classes.elementMargin}>\r\n            <b>Teste de Envio</b>\r\n          </Typography>\r\n          {renderFormMessageMedia()}\r\n        </Grid>\r\n      </Grid>\r\n    </Paper>\r\n  );\r\n};\r\n\r\nexport default MessagesAPI;\r\n","import React, { useState, useEffect, useCallback } from \"react\";\r\nimport { makeStyles, Paper, Typography, Modal, IconButton } from \"@material-ui/core\";\r\nimport MainContainer from \"../../components/MainContainer\";\r\nimport MainHeader from \"../../components/MainHeader\";\r\nimport MainHeaderButtonsWrapper from \"../../components/MainHeaderButtonsWrapper\";\r\nimport Title from \"../../components/Title\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport useHelps from \"../../hooks/useHelps\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  mainPaperContainer: {\r\n    overflowY: 'auto',\r\n    maxHeight: 'calc(100vh - 200px)',\r\n  },\r\n  mainPaper: {\r\n    width: '100%',\r\n    display: 'grid',\r\n    gridTemplateColumns: 'repeat(auto-fit, minmax(320px, 1fr))',\r\n    gap: theme.spacing(3),\r\n    padding: theme.spacing(2),\r\n    marginBottom: theme.spacing(3),\r\n  },\r\n  helpPaper: {\r\n    position: 'relative',\r\n    width: '100%',\r\n    minHeight: '340px',\r\n    padding: theme.spacing(2),\r\n    boxShadow: theme.shadows[3],\r\n    borderRadius: theme.spacing(1),\r\n    cursor: 'pointer',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    justifyContent: 'space-between',\r\n    maxWidth: '340px',\r\n  },\r\n  paperHover: {\r\n    transition: 'transform 0.3s, box-shadow 0.3s',\r\n    '&:hover': {\r\n      transform: 'scale(1.03)',\r\n      boxShadow: `0 0 8px`,\r\n      color: theme.palette.primary.main,\r\n    },\r\n  },\r\n  videoThumbnail: {\r\n    width: '100%',\r\n    height: 'calc(100% - 56px)',\r\n    objectFit: 'cover',\r\n    borderRadius: `${theme.spacing(1)}px ${theme.spacing(1)}px 0 0`,\r\n  },\r\n  videoTitle: {\r\n    marginTop: theme.spacing(1),\r\n    flex: 1,\r\n  },\r\n  videoDescription: {\r\n    maxHeight: '100px',\r\n    overflow: 'hidden',\r\n  },\r\n  videoModal: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n  videoModalContent: {\r\n    outline: 'none',\r\n    width: '90%',\r\n    maxWidth: 1024,\r\n    aspectRatio: '16/9',\r\n    position: 'relative',\r\n    backgroundColor: 'white',\r\n    borderRadius: theme.spacing(1),\r\n    overflow: 'hidden',\r\n  },\r\n}));\r\n\r\nconst Helps = () => {\r\n  const classes = useStyles();\r\n  const [records, setRecords] = useState([]);\r\n  const { list } = useHelps();\r\n  const [selectedVideo, setSelectedVideo] = useState(null);\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      const helps = await list();\r\n      setRecords(helps);\r\n    }\r\n    fetchData();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  const openVideoModal = (video) => {\r\n    setSelectedVideo(video);\r\n  };\r\n\r\n  const closeVideoModal = () => {\r\n    setSelectedVideo(null);\r\n  };\r\n\r\n  const handleModalClose = useCallback((event) => {\r\n    if (event.key === \"Escape\") {\r\n      closeVideoModal();\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    document.addEventListener(\"keydown\", handleModalClose);\r\n    return () => {\r\n      document.removeEventListener(\"keydown\", handleModalClose);\r\n    };\r\n  }, [handleModalClose]);\r\n\r\n  const renderVideoModal = () => {\r\n    return (\r\n      <Modal\r\n        open={Boolean(selectedVideo)}\r\n        onClose={closeVideoModal}\r\n        className={classes.videoModal}\r\n      >\r\n        <div className={classes.videoModalContent}>\r\n          {selectedVideo && (\r\n            <iframe\r\n              style={{ width: \"100%\", height: \"100%\", position: \"absolute\", top: 0, left: 0 }}\r\n              src={`https://www.youtube.com/embed/${selectedVideo}`}\r\n              title=\"YouTube video player\"\r\n              frameBorder=\"0\"\r\n              allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\r\n              allowFullScreen\r\n            />\r\n          )}\r\n        </div>\r\n      </Modal>\r\n    );\r\n  };\r\n\r\n  const renderHelps = () => {\r\n    return (\r\n      <>\r\n        <div className={`${classes.mainPaper} ${classes.mainPaperContainer}`}>\r\n          {records.length ? records.map((record, key) => (\r\n            <Paper key={key} className={`${classes.helpPaper} ${classes.paperHover}`} onClick={() => openVideoModal(record.video)}>\r\n              <img\r\n                src={`https://img.youtube.com/vi/${record.video}/mqdefault.jpg`}\r\n                alt=\"Thumbnail\"\r\n                className={classes.videoThumbnail}\r\n              />\r\n              <Typography variant=\"button\" className={classes.videoTitle}>\r\n                {record.title}\r\n              </Typography>\r\n              <Typography variant=\"caption\" className={classes.videoDescription}>\r\n                {record.description}\r\n              </Typography>\r\n            </Paper>\r\n          )) : null}\r\n        </div>\r\n      </>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <MainContainer>\r\n      <MainHeader>\r\n        <Title>{i18n.t(\"helps.title\")} ({records.length})</Title>\r\n        <MainHeaderButtonsWrapper></MainHeaderButtonsWrapper>\r\n      </MainHeader>\r\n      <div className={classes.mainPaper}>\r\n        {renderHelps()}\r\n      </div>\r\n      {renderVideoModal()}\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nexport default Helps;","import React, { useState, useEffect } from \"react\";\r\n\r\nimport * as Yup from \"yup\";\r\nimport { Formik, Form, Field } from \"formik\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { green } from \"@material-ui/core/colors\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nimport api from \"../../services/api\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    flexWrap: \"wrap\",\r\n  },\r\n  multFieldLine: {\r\n    display: \"flex\",\r\n    \"& > *:not(:last-child)\": {\r\n      marginRight: theme.spacing(1),\r\n    },\r\n  },\r\n\r\n  btnWrapper: {\r\n    position: \"relative\",\r\n  },\r\n\r\n  buttonProgress: {\r\n    color: green[500],\r\n    position: \"absolute\",\r\n    top: \"50%\",\r\n    left: \"50%\",\r\n    marginTop: -12,\r\n    marginLeft: -12,\r\n  },\r\n  formControl: {\r\n    margin: theme.spacing(1),\r\n    minWidth: 120,\r\n  },\r\n}));\r\n\r\nconst ContactListSchema = Yup.object().shape({\r\n  name: Yup.string()\r\n    .min(2, \"Too Short!\")\r\n    .max(50, \"Too Long!\")\r\n    .required(\"Required\"),\r\n});\r\n\r\nconst ContactListModal = ({ open, onClose, contactListId }) => {\r\n  const classes = useStyles();\r\n\r\n  const initialState = {\r\n    name: \"\",\r\n  };\r\n\r\n  const [contactList, setContactList] = useState(initialState);\r\n\r\n  useEffect(() => {\r\n    const fetchContactList = async () => {\r\n      if (!contactListId) return;\r\n      try {\r\n        const { data } = await api.get(`/contact-lists/${contactListId}`);\r\n        setContactList((prevState) => {\r\n          return { ...prevState, ...data };\r\n        });\r\n      } catch (err) {\r\n        toastError(err);\r\n      }\r\n    };\r\n\r\n    fetchContactList();\r\n  }, [contactListId, open]);\r\n\r\n  const handleClose = () => {\r\n    onClose();\r\n    setContactList(initialState);\r\n  };\r\n\r\n  const handleSaveContactList = async (values) => {\r\n    const contactListData = { ...values };\r\n    try {\r\n      if (contactListId) {\r\n        await api.put(`/contact-lists/${contactListId}`, contactListData);\r\n      } else {\r\n        await api.post(\"/contact-lists\", contactListData);\r\n      }\r\n      toast.success(i18n.t(\"contactList.dialog\"));\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n    handleClose();\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleClose}\r\n        maxWidth=\"xs\"\r\n        fullWidth\r\n        scroll=\"paper\"\r\n      >\r\n        <DialogTitle id=\"form-dialog-title\">\r\n          {contactListId\r\n            ? `${i18n.t(\"contactLists.dialog.edit\")}`\r\n            : `${i18n.t(\"contactLists.dialog.add\")}`}\r\n        </DialogTitle>\r\n        <Formik\r\n          initialValues={contactList}\r\n          enableReinitialize={true}\r\n          validationSchema={ContactListSchema}\r\n          onSubmit={(values, actions) => {\r\n            setTimeout(() => {\r\n              handleSaveContactList(values);\r\n              actions.setSubmitting(false);\r\n            }, 400);\r\n          }}\r\n        >\r\n          {({ touched, errors, isSubmitting }) => (\r\n            <Form>\r\n              <DialogContent dividers>\r\n                <div className={classes.multFieldLine}>\r\n                  <Field\r\n                    as={TextField}\r\n                    label={i18n.t(\"contactLists.dialog.name\")}\r\n                    autoFocus\r\n                    name=\"name\"\r\n                    error={touched.name && Boolean(errors.name)}\r\n                    helperText={touched.name && errors.name}\r\n                    variant=\"outlined\"\r\n                    margin=\"dense\"\r\n                    fullWidth\r\n                  />\r\n                </div>\r\n              </DialogContent>\r\n              <DialogActions>\r\n                <Button\r\n                  onClick={handleClose}\r\n                  color=\"secondary\"\r\n                  disabled={isSubmitting}\r\n                  variant=\"outlined\"\r\n                >\r\n                  {i18n.t(\"contactLists.dialog.cancel\")}\r\n                </Button>\r\n                <Button\r\n                  type=\"submit\"\r\n                  color=\"primary\"\r\n                  disabled={isSubmitting}\r\n                  variant=\"contained\"\r\n                  className={classes.btnWrapper}\r\n                >\r\n                  {contactListId\r\n                    ? `${i18n.t(\"contactLists.dialog.okEdit\")}`\r\n                    : `${i18n.t(\"contactLists.dialog.okAdd\")}`}\r\n                  {isSubmitting && (\r\n                    <CircularProgress\r\n                      size={24}\r\n                      className={classes.buttonProgress}\r\n                    />\r\n                  )}\r\n                </Button>\r\n              </DialogActions>\r\n            </Form>\r\n          )}\r\n        </Formik>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ContactListModal;\r\n","import React, { useState, useEffect, useReducer, useContext } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\n\r\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\nimport PeopleIcon from \"@material-ui/icons/People\";\r\nimport DownloadIcon from \"@material-ui/icons/GetApp\";\r\n\r\nimport MainContainer from \"../../components/MainContainer\";\r\nimport MainHeader from \"../../components/MainHeader\";\r\nimport Title from \"../../components/Title\";\r\n\r\nimport api from \"../../services/api\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport TableRowSkeleton from \"../../components/TableRowSkeleton\";\r\nimport ContactListDialog from \"../../components/ContactListDialog\";\r\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { Grid } from \"@material-ui/core\";\r\n\r\nimport planilhaExemplo from \"../../assets/planilha.xlsx\";\r\nimport { SocketContext } from \"../../context/Socket/SocketContext\";\r\n\r\nconst reducer = (state, action) => {\r\n  if (action.type === \"LOAD_CONTACTLISTS\") {\r\n    const contactLists = action.payload;\r\n    const newContactLists = [];\r\n\r\n    contactLists.forEach((contactList) => {\r\n      const contactListIndex = state.findIndex((u) => u.id === contactList.id);\r\n      if (contactListIndex !== -1) {\r\n        state[contactListIndex] = contactList;\r\n      } else {\r\n        newContactLists.push(contactList);\r\n      }\r\n    });\r\n\r\n    return [...state, ...newContactLists];\r\n  }\r\n\r\n  if (action.type === \"UPDATE_CONTACTLIST\") {\r\n    const contactList = action.payload;\r\n    const contactListIndex = state.findIndex((u) => u.id === contactList.id);\r\n\r\n    if (contactListIndex !== -1) {\r\n      state[contactListIndex] = contactList;\r\n      return [...state];\r\n    } else {\r\n      return [contactList, ...state];\r\n    }\r\n  }\r\n\r\n  if (action.type === \"DELETE_CONTACTLIST\") {\r\n    const contactListId = action.payload;\r\n\r\n    const contactListIndex = state.findIndex((u) => u.id === contactListId);\r\n    if (contactListIndex !== -1) {\r\n      state.splice(contactListIndex, 1);\r\n    }\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"RESET\") {\r\n    return [];\r\n  }\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainPaper: {\r\n    flex: 1,\r\n    padding: theme.spacing(1),\r\n    overflowY: \"scroll\",\r\n    ...theme.scrollbarStyles,\r\n  },\r\n}));\r\n\r\nconst ContactLists = () => {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [pageNumber, setPageNumber] = useState(1);\r\n  const [hasMore, setHasMore] = useState(false);\r\n  const [selectedContactList, setSelectedContactList] = useState(null);\r\n  const [deletingContactList, setDeletingContactList] = useState(null);\r\n  const [contactListModalOpen, setContactListModalOpen] = useState(false);\r\n  const [confirmModalOpen, setConfirmModalOpen] = useState(false);\r\n  const [searchParam, setSearchParam] = useState(\"\");\r\n  const [contactLists, dispatch] = useReducer(reducer, []);\r\n\r\n  const socketManager = useContext(SocketContext);\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: \"RESET\" });\r\n    setPageNumber(1);\r\n  }, [searchParam]);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const delayDebounceFn = setTimeout(() => {\r\n      const fetchContactLists = async () => {\r\n        try {\r\n          const { data } = await api.get(\"/contact-lists/\", {\r\n            params: { searchParam, pageNumber },\r\n          });\r\n          dispatch({ type: \"LOAD_CONTACTLISTS\", payload: data.records });\r\n          setHasMore(data.hasMore);\r\n          setLoading(false);\r\n        } catch (err) {\r\n          toastError(err);\r\n        }\r\n      };\r\n      fetchContactLists();\r\n    }, 500);\r\n    return () => clearTimeout(delayDebounceFn);\r\n  }, [searchParam, pageNumber]);\r\n\r\n  useEffect(() => {\r\n    const companyId = localStorage.getItem(\"companyId\");\r\n    const socket = socketManager.getSocket(companyId);\r\n\r\n    socket.on(`company-${companyId}-ContactList`, (data) => {\r\n      if (data.action === \"update\" || data.action === \"create\") {\r\n        dispatch({ type: \"UPDATE_CONTACTLIST\", payload: data.record });\r\n      }\r\n\r\n      if (data.action === \"delete\") {\r\n        dispatch({ type: \"DELETE_CONTACTLIST\", payload: +data.id });\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, [socketManager]);\r\n\r\n  const handleOpenContactListModal = () => {\r\n    setSelectedContactList(null);\r\n    setContactListModalOpen(true);\r\n  };\r\n\r\n  const handleCloseContactListModal = () => {\r\n    setSelectedContactList(null);\r\n    setContactListModalOpen(false);\r\n  };\r\n\r\n  const handleSearch = (event) => {\r\n    setSearchParam(event.target.value.toLowerCase());\r\n  };\r\n\r\n  const handleEditContactList = (contactList) => {\r\n    setSelectedContactList(contactList);\r\n    setContactListModalOpen(true);\r\n  };\r\n\r\n  const handleDeleteContactList = async (contactListId) => {\r\n    try {\r\n      await api.delete(`/contact-lists/${contactListId}`);\r\n      toast.success(i18n.t(\"contactLists.toasts.deleted\"));\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n    setDeletingContactList(null);\r\n    setSearchParam(\"\");\r\n    setPageNumber(1);\r\n  };\r\n\r\n  const loadMore = () => {\r\n    setPageNumber((prevState) => prevState + 1);\r\n  };\r\n\r\n  const handleScroll = (e) => {\r\n    if (!hasMore || loading) return;\r\n    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\r\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\r\n      loadMore();\r\n    }\r\n  };\r\n\r\n  const goToContacts = (id) => {\r\n    history.push(`/contact-lists/${id}/contacts`);\r\n  };\r\n\r\n  return (\r\n    <MainContainer>\r\n      <ConfirmationModal\r\n        title={\r\n          deletingContactList &&\r\n          `${i18n.t(\"contactLists.confirmationModal.deleteTitle\")} ${\r\n            deletingContactList.name\r\n          }?`\r\n        }\r\n        open={confirmModalOpen}\r\n        onClose={setConfirmModalOpen}\r\n        onConfirm={() => handleDeleteContactList(deletingContactList.id)}\r\n      >\r\n        {i18n.t(\"contactLists.confirmationModal.deleteMessage\")}\r\n      </ConfirmationModal>\r\n      <ContactListDialog\r\n        open={contactListModalOpen}\r\n        onClose={handleCloseContactListModal}\r\n        aria-labelledby=\"form-dialog-title\"\r\n        contactListId={selectedContactList && selectedContactList.id}\r\n      />\r\n      <MainHeader>\r\n        <Grid style={{ width: \"99.6%\" }} container>\r\n          <Grid xs={12} sm={8} item>\r\n            <Title>{i18n.t(\"contactLists.title\")}</Title>\r\n          </Grid>\r\n          <Grid xs={12} sm={4} item>\r\n            <Grid spacing={2} container>\r\n              <Grid xs={7} sm={6} item>\r\n                <TextField\r\n                  fullWidth\r\n                  placeholder={i18n.t(\"contacts.searchPlaceholder\")}\r\n                  type=\"search\"\r\n                  value={searchParam}\r\n                  onChange={handleSearch}\r\n                  InputProps={{\r\n                    startAdornment: (\r\n                      <InputAdornment position=\"start\">\r\n                        <SearchIcon style={{ color: \"gray\" }} />\r\n                      </InputAdornment>\r\n                    ),\r\n                  }}\r\n                />\r\n              </Grid>\r\n              <Grid xs={5} sm={6} item>\r\n                <Button\r\n                  fullWidth\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  onClick={handleOpenContactListModal}\r\n                >\r\n                  {i18n.t(\"contactLists.buttons.add\")}\r\n                </Button>\r\n              </Grid>\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n      </MainHeader>\r\n      <Paper\r\n        className={classes.mainPaper}\r\n        variant=\"outlined\"\r\n        onScroll={handleScroll}\r\n      >\r\n        <Table size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"contactLists.table.name\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"contactLists.table.contacts\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"contactLists.table.actions\")}\r\n              </TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            <>\r\n              {contactLists.map((contactList) => (\r\n                <TableRow key={contactList.id}>\r\n                  <TableCell align=\"center\">{contactList.name}</TableCell>\r\n                  <TableCell align=\"center\">\r\n                    {contactList.contactsCount || 0}\r\n                  </TableCell>\r\n                  <TableCell align=\"center\">\r\n                    <a href={planilhaExemplo} download=\"planilha.xlsx\">\r\n                      <IconButton size=\"small\" title=\"Baixar Planilha Exemplo\">\r\n                        <DownloadIcon />\r\n                      </IconButton>\r\n                    </a>\r\n\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={() => goToContacts(contactList.id)}\r\n                    >\r\n                      <PeopleIcon />\r\n                    </IconButton>\r\n\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={() => handleEditContactList(contactList)}\r\n                    >\r\n                      <EditIcon />\r\n                    </IconButton>\r\n\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={(e) => {\r\n                        setConfirmModalOpen(true);\r\n                        setDeletingContactList(contactList);\r\n                      }}\r\n                    >\r\n                      <DeleteOutlineIcon />\r\n                    </IconButton>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n              {loading && <TableRowSkeleton columns={3} />}\r\n            </>\r\n          </TableBody>\r\n        </Table>\r\n      </Paper>\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nexport default ContactLists;\r\n","import React, { useState, useEffect, useRef, useContext } from \"react\";\r\n\r\nimport * as Yup from \"yup\";\r\nimport { Formik, Form, Field } from \"formik\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { green } from \"@material-ui/core/colors\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nimport api from \"../../services/api\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    flexWrap: \"wrap\",\r\n  },\r\n  textField: {\r\n    marginRight: theme.spacing(1),\r\n    flex: 1,\r\n  },\r\n\r\n  extraAttr: {\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n\r\n  btnWrapper: {\r\n    position: \"relative\",\r\n  },\r\n\r\n  buttonProgress: {\r\n    color: green[500],\r\n    position: \"absolute\",\r\n    top: \"50%\",\r\n    left: \"50%\",\r\n    marginTop: -12,\r\n    marginLeft: -12,\r\n  },\r\n}));\r\n\r\nconst ContactSchema = Yup.object().shape({\r\n  name: Yup.string()\r\n    .min(2, \"Too Short!\")\r\n    .max(50, \"Too Long!\")\r\n    .required(\"Required\"),\r\n  number: Yup.string().min(8, \"Too Short!\").max(50, \"Too Long!\"),\r\n  email: Yup.string().email(\"Invalid email\"),\r\n});\r\n\r\nconst ContactListItemModal = ({\r\n  open,\r\n  onClose,\r\n  contactId,\r\n  initialValues,\r\n  onSave,\r\n}) => {\r\n  const classes = useStyles();\r\n  const isMounted = useRef(true);\r\n\r\n  const {\r\n    user: { companyId },\r\n  } = useContext(AuthContext);\r\n  const { contactListId } = useParams();\r\n\r\n  const initialState = {\r\n    name: \"\",\r\n    number: \"\",\r\n    email: \"\",\r\n  };\r\n\r\n  const [contact, setContact] = useState(initialState);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      isMounted.current = false;\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const fetchContact = async () => {\r\n      if (initialValues) {\r\n        setContact((prevState) => {\r\n          return { ...prevState, ...initialValues };\r\n        });\r\n      }\r\n\r\n      if (!contactId) return;\r\n\r\n      try {\r\n        const { data } = await api.get(`/contact-list-items/${contactId}`);\r\n        if (isMounted.current) {\r\n          setContact(data);\r\n        }\r\n      } catch (err) {\r\n        toastError(err);\r\n      }\r\n    };\r\n\r\n    fetchContact();\r\n  }, [contactId, open, initialValues]);\r\n\r\n  const handleClose = () => {\r\n    onClose();\r\n    setContact(initialState);\r\n  };\r\n\r\n  const handleSaveContact = async (values) => {\r\n    try {\r\n      if (contactId) {\r\n        await api.put(`/contact-list-items/${contactId}`, {\r\n          ...values,\r\n          companyId,\r\n          contactListId,\r\n        });\r\n        handleClose();\r\n      } else {\r\n        const { data } = await api.post(\"/contact-list-items\", {\r\n          ...values,\r\n          companyId,\r\n          contactListId,\r\n        });\r\n        if (onSave) {\r\n          onSave(data);\r\n        }\r\n        handleClose();\r\n      }\r\n      toast.success(i18n.t(\"contactModal.success\"));\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Dialog open={open} onClose={handleClose} maxWidth=\"lg\" scroll=\"paper\">\r\n        <DialogTitle id=\"form-dialog-title\">\r\n          {contactId\r\n            ? `${i18n.t(\"contactModal.title.edit\")}`\r\n            : `${i18n.t(\"contactModal.title.add\")}`}\r\n        </DialogTitle>\r\n        <Formik\r\n          initialValues={contact}\r\n          enableReinitialize={true}\r\n          validationSchema={ContactSchema}\r\n          onSubmit={(values, actions) => {\r\n            setTimeout(() => {\r\n              handleSaveContact(values);\r\n              actions.setSubmitting(false);\r\n            }, 400);\r\n          }}\r\n        >\r\n          {({ values, errors, touched, isSubmitting }) => (\r\n            <Form>\r\n              <DialogContent dividers>\r\n                <Typography variant=\"subtitle1\" gutterBottom>\r\n                  {i18n.t(\"contactModal.form.mainInfo\")}\r\n                </Typography>\r\n                <Field\r\n                  as={TextField}\r\n                  label={i18n.t(\"contactModal.form.name\")}\r\n                  name=\"name\"\r\n                  autoFocus\r\n                  error={touched.name && Boolean(errors.name)}\r\n                  helperText={touched.name && errors.name}\r\n                  variant=\"outlined\"\r\n                  margin=\"dense\"\r\n                  className={classes.textField}\r\n                />\r\n                <Field\r\n                  as={TextField}\r\n                  label={i18n.t(\"contactModal.form.number\")}\r\n                  name=\"number\"\r\n                  error={touched.number && Boolean(errors.number)}\r\n                  helperText={touched.number && errors.number}\r\n                  placeholder=\"5513912344321\"\r\n                  variant=\"outlined\"\r\n                  margin=\"dense\"\r\n                />\r\n                <div>\r\n                  <Field\r\n                    as={TextField}\r\n                    label={i18n.t(\"contactModal.form.email\")}\r\n                    name=\"email\"\r\n                    error={touched.email && Boolean(errors.email)}\r\n                    helperText={touched.email && errors.email}\r\n                    placeholder=\"Email address\"\r\n                    fullWidth\r\n                    margin=\"dense\"\r\n                    variant=\"outlined\"\r\n                  />\r\n                </div>\r\n              </DialogContent>\r\n              <DialogActions>\r\n                <Button\r\n                  onClick={handleClose}\r\n                  color=\"secondary\"\r\n                  disabled={isSubmitting}\r\n                  variant=\"outlined\"\r\n                >\r\n                  {i18n.t(\"contactModal.buttons.cancel\")}\r\n                </Button>\r\n                <Button\r\n                  type=\"submit\"\r\n                  color=\"primary\"\r\n                  disabled={isSubmitting}\r\n                  variant=\"contained\"\r\n                  className={classes.btnWrapper}\r\n                >\r\n                  {contactId\r\n                    ? `${i18n.t(\"contactModal.buttons.okEdit\")}`\r\n                    : `${i18n.t(\"contactModal.buttons.okAdd\")}`}\r\n                  {isSubmitting && (\r\n                    <CircularProgress\r\n                      size={24}\r\n                      className={classes.buttonProgress}\r\n                    />\r\n                  )}\r\n                </Button>\r\n              </DialogActions>\r\n            </Form>\r\n          )}\r\n        </Formik>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ContactListItemModal;\r\n","import api from \"../../services/api\";\r\n\r\nconst useContactLists = () => {\r\n  const save = async (data) => {\r\n    const { data: responseData } = await api.request({\r\n      url: \"/contact-lists\",\r\n      method: \"POST\",\r\n      data,\r\n    });\r\n    return responseData;\r\n  };\r\n\r\n  const update = async (data) => {\r\n    const { data: responseData } = await api.request({\r\n      url: `/contact-lists/${data.id}`,\r\n      method: \"PUT\",\r\n      data,\r\n    });\r\n    return responseData;\r\n  };\r\n\r\n  const deleteRecord = async (id) => {\r\n    const { data } = await api.request({\r\n      url: `/contact-lists/${id}`,\r\n      method: \"DELETE\",\r\n    });\r\n    return data;\r\n  };\r\n\r\n  const findById = async (id) => {\r\n    const { data } = await api.request({\r\n      url: `/contact-lists/${id}`,\r\n      method: \"GET\",\r\n    });\r\n    return data;\r\n  };\r\n\r\n  const list = async (params) => {\r\n    const { data } = await api.request({\r\n      url: \"/contact-lists/list\",\r\n      method: \"GET\",\r\n      params,\r\n    });\r\n    return data;\r\n  };\r\n\r\n  return {\r\n    findById,\r\n    save,\r\n    update,\r\n    deleteRecord,\r\n    list,\r\n  };\r\n};\r\n\r\nexport default useContactLists;\r\n","import React, {\r\n  useState,\r\n  useEffect,\r\n  useReducer,\r\n  useContext,\r\n  useRef,\r\n} from \"react\";\r\n\r\nimport { toast } from \"react-toastify\";\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\n\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\nimport CheckCircleIcon from \"@material-ui/icons/CheckCircle\";\r\nimport BlockIcon from \"@material-ui/icons/Block\";\r\n\r\nimport api from \"../../services/api\";\r\nimport TableRowSkeleton from \"../../components/TableRowSkeleton\";\r\nimport ContactListItemModal from \"../../components/ContactListItemModal\";\r\nimport ConfirmationModal from \"../../components/ConfirmationModal/\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport MainHeader from \"../../components/MainHeader\";\r\nimport Title from \"../../components/Title\";\r\nimport MainContainer from \"../../components/MainContainer\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport { Can } from \"../../components/Can\";\r\nimport useContactLists from \"../../hooks/useContactLists\";\r\nimport { Grid } from \"@material-ui/core\";\r\n\r\nimport planilhaExemplo from \"../../assets/planilha.xlsx\";\r\nimport { SocketContext } from \"../../context/Socket/SocketContext\";\r\n\r\nconst reducer = (state, action) => {\r\n  if (action.type === \"LOAD_CONTACTS\") {\r\n    const contacts = action.payload;\r\n    const newContacts = [];\r\n\r\n    contacts.forEach((contact) => {\r\n      const contactIndex = state.findIndex((c) => c.id === contact.id);\r\n      if (contactIndex !== -1) {\r\n        state[contactIndex] = contact;\r\n      } else {\r\n        newContacts.push(contact);\r\n      }\r\n    });\r\n\r\n    return [...state, ...newContacts];\r\n  }\r\n\r\n  if (action.type === \"UPDATE_CONTACTS\") {\r\n    const contact = action.payload;\r\n    const contactIndex = state.findIndex((c) => c.id === contact.id);\r\n\r\n    if (contactIndex !== -1) {\r\n      state[contactIndex] = contact;\r\n      return [...state];\r\n    } else {\r\n      return [contact, ...state];\r\n    }\r\n  }\r\n\r\n  if (action.type === \"DELETE_CONTACT\") {\r\n    const contactId = action.payload;\r\n\r\n    const contactIndex = state.findIndex((c) => c.id === contactId);\r\n    if (contactIndex !== -1) {\r\n      state.splice(contactIndex, 1);\r\n    }\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"RESET\") {\r\n    return [];\r\n  }\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainPaper: {\r\n    flex: 1,\r\n    padding: theme.spacing(1),\r\n    overflowY: \"scroll\",\r\n    ...theme.scrollbarStyles,\r\n  },\r\n}));\r\n\r\nconst ContactListItems = () => {\r\n  const classes = useStyles();\r\n\r\n  const { user } = useContext(AuthContext);\r\n  const { contactListId } = useParams();\r\n  const history = useHistory();\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [pageNumber, setPageNumber] = useState(1);\r\n  const [searchParam, setSearchParam] = useState(\"\");\r\n  const [contacts, dispatch] = useReducer(reducer, []);\r\n  const [selectedContactId, setSelectedContactId] = useState(null);\r\n  const [contactListItemModalOpen, setContactListItemModalOpen] =\r\n    useState(false);\r\n  const [deletingContact, setDeletingContact] = useState(null);\r\n  const [confirmOpen, setConfirmOpen] = useState(false);\r\n  const [hasMore, setHasMore] = useState(false);\r\n  const [contactList, setContactList] = useState({});\r\n  const fileUploadRef = useRef(null);\r\n\r\n  const { findById: findContactList } = useContactLists();\r\n\r\n  const socketManager = useContext(SocketContext);\r\n\r\n  useEffect(() => {\r\n    findContactList(contactListId).then((data) => {\r\n      setContactList(data);\r\n    });\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [contactListId]);\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: \"RESET\" });\r\n    setPageNumber(1);\r\n  }, [searchParam]);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const delayDebounceFn = setTimeout(() => {\r\n      const fetchContacts = async () => {\r\n        try {\r\n          const { data } = await api.get(`contact-list-items`, {\r\n            params: { searchParam, pageNumber, contactListId },\r\n          });\r\n          dispatch({ type: \"LOAD_CONTACTS\", payload: data.contacts });\r\n          setHasMore(data.hasMore);\r\n          setLoading(false);\r\n        } catch (err) {\r\n          toastError(err);\r\n        }\r\n      };\r\n      fetchContacts();\r\n    }, 500);\r\n    return () => clearTimeout(delayDebounceFn);\r\n  }, [searchParam, pageNumber, contactListId]);\r\n\r\n  useEffect(() => {\r\n    const companyId = localStorage.getItem(\"companyId\");\r\n    const socket = socketManager.getSocket(companyId);\r\n\r\n    socket.on(`company-${companyId}-ContactListItem`, (data) => {\r\n      if (data.action === \"update\" || data.action === \"create\") {\r\n        dispatch({ type: \"UPDATE_CONTACTS\", payload: data.record });\r\n      }\r\n\r\n      if (data.action === \"delete\") {\r\n        dispatch({ type: \"DELETE_CONTACT\", payload: +data.id });\r\n      }\r\n\r\n      if (data.action === \"reload\") {\r\n        dispatch({ type: \"LOAD_CONTACTS\", payload: data.records });\r\n      }\r\n    });\r\n\r\n    socket.on(\r\n      `company-${companyId}-ContactListItem-${contactListId}`,\r\n      (data) => {\r\n        if (data.action === \"reload\") {\r\n          dispatch({ type: \"LOAD_CONTACTS\", payload: data.records });\r\n        }\r\n      }\r\n    );\r\n\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, [contactListId, socketManager]);\r\n\r\n  const handleSearch = (event) => {\r\n    setSearchParam(event.target.value.toLowerCase());\r\n  };\r\n\r\n  const handleOpenContactListItemModal = () => {\r\n    setSelectedContactId(null);\r\n    setContactListItemModalOpen(true);\r\n  };\r\n\r\n  const handleCloseContactListItemModal = () => {\r\n    setSelectedContactId(null);\r\n    setContactListItemModalOpen(false);\r\n  };\r\n\r\n  const hadleEditContact = (contactId) => {\r\n    setSelectedContactId(contactId);\r\n    setContactListItemModalOpen(true);\r\n  };\r\n\r\n  const handleDeleteContact = async (contactId) => {\r\n    try {\r\n      await api.delete(`/contact-list-items/${contactId}`);\r\n      toast.success(i18n.t(\"contacts.toasts.deleted\"));\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n    setDeletingContact(null);\r\n    setSearchParam(\"\");\r\n    setPageNumber(1);\r\n  };\r\n\r\n  const handleImportContacts = async () => {\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append(\"file\", fileUploadRef.current.files[0]);\r\n      await api.request({\r\n        url: `contact-lists/${contactListId}/upload`,\r\n        method: \"POST\",\r\n        data: formData,\r\n      });\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  };\r\n\r\n  const loadMore = () => {\r\n    setPageNumber((prevState) => prevState + 1);\r\n  };\r\n\r\n  const handleScroll = (e) => {\r\n    if (!hasMore || loading) return;\r\n    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\r\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\r\n      loadMore();\r\n    }\r\n  };\r\n\r\n  const goToContactLists = () => {\r\n    history.push(\"/contact-lists\");\r\n  };\r\n\r\n  return (\r\n    <MainContainer className={classes.mainContainer}>\r\n      <ContactListItemModal\r\n        open={contactListItemModalOpen}\r\n        onClose={handleCloseContactListItemModal}\r\n        aria-labelledby=\"form-dialog-title\"\r\n        contactId={selectedContactId}\r\n      ></ContactListItemModal>\r\n      <ConfirmationModal\r\n        title={\r\n          deletingContact\r\n            ? `${i18n.t(\"contactListItems.confirmationModal.deleteTitle\")} ${\r\n                deletingContact.name\r\n              }?`\r\n            : `${i18n.t(\"contactListItems.confirmationModal.importTitlte\")}`\r\n        }\r\n        open={confirmOpen}\r\n        onClose={setConfirmOpen}\r\n        onConfirm={() =>\r\n          deletingContact\r\n            ? handleDeleteContact(deletingContact.id)\r\n            : handleImportContacts()\r\n        }\r\n      >\r\n        {deletingContact ? (\r\n          `${i18n.t(\"contactListItems.confirmationModal.deleteMessage\")}`\r\n        ) : (\r\n          <>\r\n            {i18n.t(\"contactListItems.confirmationModal.importMessage\")}\r\n            <a href={planilhaExemplo} download=\"planilha.xlsx\">\r\n              Clique aqui para baixar planilha exemplo.\r\n            </a>\r\n          </>\r\n        )}\r\n      </ConfirmationModal>\r\n      <MainHeader>\r\n        <Grid style={{ width: \"99.6%\" }} container>\r\n          <Grid xs={12} sm={5} item>\r\n            <Title>{contactList.name}</Title>\r\n          </Grid>\r\n          <Grid xs={12} sm={7} item>\r\n            <Grid spacing={2} container>\r\n              <Grid xs={12} sm={6} item>\r\n                <TextField\r\n                  fullWidth\r\n                  placeholder={i18n.t(\"contactListItems.searchPlaceholder\")}\r\n                  type=\"search\"\r\n                  value={searchParam}\r\n                  onChange={handleSearch}\r\n                  InputProps={{\r\n                    startAdornment: (\r\n                      <InputAdornment position=\"start\">\r\n                        <SearchIcon style={{ color: \"gray\" }} />\r\n                      </InputAdornment>\r\n                    ),\r\n                  }}\r\n                />\r\n              </Grid>\r\n              <Grid xs={4} sm={2} item>\r\n                <Button\r\n                  fullWidth\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  onClick={goToContactLists}\r\n                >\r\n                  {i18n.t(\"contactListItems.buttons.lists\")}\r\n                </Button>\r\n              </Grid>\r\n              <Grid xs={4} sm={2} item>\r\n                <Button\r\n                  fullWidth\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  onClick={() => {\r\n                    fileUploadRef.current.value = null;\r\n                    fileUploadRef.current.click();\r\n                  }}\r\n                >\r\n                  {i18n.t(\"contactListItems.buttons.import\")}\r\n                </Button>\r\n              </Grid>\r\n              <Grid xs={4} sm={2} item>\r\n                <Button\r\n                  fullWidth\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  onClick={handleOpenContactListItemModal}\r\n                >\r\n                  {i18n.t(\"contactListItems.buttons.add\")}\r\n                </Button>\r\n              </Grid>\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n      </MainHeader>\r\n      <Paper\r\n        className={classes.mainPaper}\r\n        variant=\"outlined\"\r\n        onScroll={handleScroll}\r\n      >\r\n        <>\r\n          <input\r\n            style={{ display: \"none\" }}\r\n            id=\"upload\"\r\n            name=\"file\"\r\n            type=\"file\"\r\n            accept=\".xls,.xlsx\"\r\n            onChange={() => {\r\n              setConfirmOpen(true);\r\n            }}\r\n            ref={fileUploadRef}\r\n          />\r\n        </>\r\n        <Table size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell align=\"center\" style={{ width: \"0%\" }}>\r\n                #\r\n              </TableCell>\r\n              <TableCell>{i18n.t(\"contactListItems.table.name\")}</TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"contactListItems.table.number\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"contactListItems.table.email\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"contactListItems.table.actions\")}\r\n              </TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            <>\r\n              {contacts.map((contact) => (\r\n                <TableRow key={contact.id}>\r\n                  <TableCell align=\"center\" style={{ width: \"0%\" }}>\r\n                    <IconButton>\r\n                      {contact.isWhatsappValid ? (\r\n                        <CheckCircleIcon\r\n                          titleAccess=\"Whatsapp Válido\"\r\n                          htmlColor=\"green\"\r\n                        />\r\n                      ) : (\r\n                        <BlockIcon\r\n                          titleAccess=\"Whatsapp Inválido\"\r\n                          htmlColor=\"grey\"\r\n                        />\r\n                      )}\r\n                    </IconButton>\r\n                  </TableCell>\r\n                  <TableCell>{contact.name}</TableCell>\r\n                  <TableCell align=\"center\">{contact.number}</TableCell>\r\n                  <TableCell align=\"center\">{contact.email}</TableCell>\r\n                  <TableCell align=\"center\">\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={() => hadleEditContact(contact.id)}\r\n                    >\r\n                      <EditIcon />\r\n                    </IconButton>\r\n                    <Can\r\n                      role={user.profile}\r\n                      perform=\"contacts-page:deleteContact\"\r\n                      yes={() => (\r\n                        <IconButton\r\n                          size=\"small\"\r\n                          onClick={() => {\r\n                            setConfirmOpen(true);\r\n                            setDeletingContact(contact);\r\n                          }}\r\n                        >\r\n                          <DeleteOutlineIcon />\r\n                        </IconButton>\r\n                      )}\r\n                    />\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n              {loading && <TableRowSkeleton columns={4} />}\r\n            </>\r\n          </TableBody>\r\n        </Table>\r\n      </Paper>\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nexport default ContactListItems;\r\n","import React, { useContext, useState, useEffect, useRef } from \"react\";\r\n\r\nimport * as Yup from \"yup\";\r\nimport { Formik, Form, Field } from \"formik\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { green } from \"@material-ui/core/colors\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport AttachFileIcon from \"@material-ui/icons/AttachFile\";\r\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport { head } from \"lodash\";\r\nimport api from \"../../services/api\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport MessageVariablesPicker from \"../MessageVariablesPicker\";\r\nimport ButtonWithSpinner from \"../ButtonWithSpinner\";\r\n\r\nimport {\r\n    FormControl,\r\n    Grid,\r\n    InputLabel,\r\n    MenuItem,\r\n    Select,\r\n} from \"@material-ui/core\";\r\nimport ConfirmationModal from \"../ConfirmationModal\";\r\n\r\nconst path = require('path');\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        display: \"flex\",\r\n        flexWrap: \"wrap\",\r\n    },\r\n    multFieldLine: {\r\n        display: \"flex\",\r\n        \"& > *:not(:last-child)\": {\r\n            marginRight: theme.spacing(1),\r\n        },\r\n    },\r\n\r\n    btnWrapper: {\r\n        position: \"relative\",\r\n    },\r\n\r\n    buttonProgress: {\r\n        color: green[500],\r\n        position: \"absolute\",\r\n        top: \"50%\",\r\n        left: \"50%\",\r\n        marginTop: -12,\r\n        marginLeft: -12,\r\n    },\r\n    formControl: {\r\n        margin: theme.spacing(1),\r\n        minWidth: 120,\r\n    },\r\n    colorAdorment: {\r\n        width: 20,\r\n        height: 20,\r\n    },\r\n}));\r\n\r\nconst QuickeMessageSchema = Yup.object().shape({\r\n    shortcode: Yup.string().required(\"Obrigatório\"),\r\n    //   message: Yup.string().required(\"Obrigatório\"),\r\n});\r\n\r\nconst QuickMessageDialog = ({ open, onClose, quickemessageId, reload }) => {\r\n    const classes = useStyles();\r\n    const { user } = useContext(AuthContext);\r\n    const { profile } = user;\r\n    const messageInputRef = useRef();\r\n\r\n    const initialState = {\r\n        shortcode: \"\",\r\n        message: \"\",\r\n        geral: false,\r\n        status: true,\r\n    };\r\n\r\n    const [confirmationOpen, setConfirmationOpen] = useState(false);\r\n    const [quickemessage, setQuickemessage] = useState(initialState);\r\n    const [attachment, setAttachment] = useState(null);\r\n    const attachmentFile = useRef(null);\r\n\r\n    useEffect(() => {\r\n        try {\r\n            (async () => {\r\n                if (!quickemessageId) return;\r\n\r\n                const { data } = await api.get(`/quick-messages/${quickemessageId}`);\r\n\r\n                setQuickemessage((prevState) => {\r\n                    return { ...prevState, ...data };\r\n                });\r\n            })();\r\n        } catch (err) {\r\n            toastError(err);\r\n        }\r\n    }, [quickemessageId, open]);\r\n\r\n    const handleClose = () => {\r\n        setQuickemessage(initialState);\r\n        setAttachment(null);\r\n        onClose();\r\n    };\r\n\r\n    const handleAttachmentFile = (e) => {\r\n      \r\n        const file = head(e.target.files);\r\n        if (file) {\r\n            setAttachment(file);\r\n        }\r\n    };\r\n\r\n    const handleSaveQuickeMessage = async (values) => {\r\n\r\n        const quickemessageData = { ...values, isMedia: true, mediaPath: attachment ? String(attachment.name).replace(/ /g, \"_\") : values.mediaPath ? path.basename(values.mediaPath).replace(/ /g, \"_\") : null };\r\n\r\n        try {\r\n            if (quickemessageId) {\r\n                await api.put(`/quick-messages/${quickemessageId}`, quickemessageData);\r\n                if (attachment != null) {\r\n                    const formData = new FormData();\r\n                    formData.append(\"typeArch\", \"quickMessage\");\r\n                    formData.append(\"file\", attachment);\r\n                    await api.post(\r\n                        `/quick-messages/${quickemessageId}/media-upload`,\r\n                        formData\r\n                    );\r\n                }\r\n            } else {\r\n                const { data } = await api.post(\"/quick-messages\", quickemessageData);\r\n                if (attachment != null) {\r\n                    const formData = new FormData();\r\n                    formData.append(\"typeArch\", \"quickMessage\");\r\n                    formData.append(\"file\", attachment);\r\n                    await api.post(`/quick-messages/${data.id}/media-upload`, formData);\r\n                }\r\n            }\r\n            toast.success(i18n.t(\"quickMessages.toasts.success\"));\r\n            if (typeof reload == \"function\") {\r\n\r\n                reload();\r\n            }\r\n        } catch (err) {\r\n            toastError(err);\r\n        }\r\n        handleClose();\r\n    };\r\n\r\n    const deleteMedia = async () => {\r\n        if (attachment) {\r\n            setAttachment(null);\r\n            attachmentFile.current.value = null;\r\n        }\r\n\r\n        if (quickemessage.mediaPath) {\r\n            await api.delete(`/quick-messages/${quickemessage.id}/media-upload`);\r\n            setQuickemessage((prev) => ({\r\n                ...prev,\r\n                mediaPath: null,\r\n            }));\r\n            toast.success(i18n.t(\"quickMessages.toasts.deleted\"));\r\n            if (typeof reload == \"function\") {\r\n\r\n                reload();\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleClickMsgVar = async (msgVar, setValueFunc) => {\r\n        const el = messageInputRef.current;\r\n        const firstHalfText = el.value.substring(0, el.selectionStart);\r\n        const secondHalfText = el.value.substring(el.selectionEnd);\r\n        const newCursorPos = el.selectionStart + msgVar.length;\r\n\r\n        setValueFunc(\"message\", `${firstHalfText}${msgVar}${secondHalfText}`);\r\n\r\n        await new Promise(r => setTimeout(r, 100));\r\n        messageInputRef.current.setSelectionRange(newCursorPos, newCursorPos);\r\n    };\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <ConfirmationModal\r\n                title={i18n.t(\"quickMessages.confirmationModal.deleteTitle\")}\r\n                open={confirmationOpen}\r\n                onClose={() => setConfirmationOpen(false)}\r\n                onConfirm={deleteMedia}\r\n            >\r\n                {i18n.t(\"quickMessages.confirmationModal.deleteMessage\")}\r\n            </ConfirmationModal>\r\n            <Dialog\r\n                open={open}\r\n                onClose={handleClose}\r\n                maxWidth=\"xs\"\r\n                fullWidth\r\n                scroll=\"paper\"\r\n            >\r\n                <DialogTitle id=\"form-dialog-title\">\r\n                    {quickemessageId\r\n                        ? `${i18n.t(\"quickMessages.dialog.edit\")}`\r\n                        : `${i18n.t(\"quickMessages.dialog.add\")}`}\r\n                </DialogTitle>\r\n                <div style={{ display: \"none\" }}>\r\n                    <input\r\n                        type=\"file\"\r\n                        ref={attachmentFile}\r\n                        onChange={(e) => handleAttachmentFile(e)}\r\n                    />\r\n                </div>\r\n                <Formik\r\n                    initialValues={quickemessage}\r\n                    enableReinitialize={true}\r\n                    validationSchema={QuickeMessageSchema}\r\n                    onSubmit={(values, actions) => {\r\n                        setTimeout(() => {\r\n                            handleSaveQuickeMessage(values);\r\n                            actions.setSubmitting(false);\r\n                        }, 400);\r\n                    }}\r\n                >\r\n                    {({ touched, errors, isSubmitting, setFieldValue, values }) => (\r\n                        <Form>\r\n                            <DialogContent dividers>\r\n                                <Grid spacing={2} container>\r\n                                    <Grid xs={12} item>\r\n                                        <Field\r\n                                            as={TextField}\r\n                                            autoFocus\r\n                                            label={i18n.t(\"quickMessages.dialog.shortcode\")}\r\n                                            name=\"shortcode\"\r\n                                            error={touched.shortcode && Boolean(errors.shortcode)}\r\n                                            helperText={touched.shortcode && errors.shortcode}\r\n                                            variant=\"outlined\"\r\n                                            margin=\"dense\"\r\n                                            fullWidth\r\n                                        />\r\n                                    </Grid>\r\n                                    <Grid xs={12} item>\r\n                                        <Field\r\n                                            as={TextField}\r\n                                            label={i18n.t(\"quickMessages.dialog.message\")}\r\n                                            name=\"message\"\r\n                                            inputRef={messageInputRef}\r\n                                            error={touched.message && Boolean(errors.message)}\r\n                                            helperText={touched.message && errors.message}\r\n                                            variant=\"outlined\"\r\n                                            margin=\"dense\"\r\n                                            multiline={true}\r\n                                            rows={7}\r\n                                            fullWidth\r\n                                        // disabled={quickemessage.mediaPath || attachment ? true : false}\r\n                                        />\r\n                                    </Grid>\r\n                                    <Grid item>\r\n                                        <MessageVariablesPicker\r\n                                            disabled={isSubmitting}\r\n                                            onClick={value => handleClickMsgVar(value, setFieldValue)}\r\n                                        />\r\n                                    </Grid>\r\n                                    {(quickemessage.mediaPath || attachment) && (\r\n                                        <Grid xs={12} item>\r\n                                            <Button startIcon={<AttachFileIcon />}>\r\n                                                {attachment ? attachment.name : quickemessage.mediaName}\r\n                                            </Button>\r\n                                            <IconButton\r\n                                                onClick={() => setConfirmationOpen(true)}\r\n                                                color=\"secondary\"\r\n                                            >\r\n                                                <DeleteOutlineIcon color=\"secondary\" />\r\n                                            </IconButton>\r\n                                        </Grid>\r\n                                    )}\r\n                                </Grid>\r\n                            </DialogContent>\r\n                            <DialogActions>\r\n                                {!attachment && !quickemessage.mediaPath && (\r\n                                    <Button\r\n                                        color=\"primary\"\r\n                                        onClick={() => attachmentFile.current.click()}\r\n                                        disabled={isSubmitting}\r\n                                        variant=\"outlined\"\r\n                                    >\r\n                                        {i18n.t(\"quickMessages.buttons.attach\")}\r\n                                    </Button>\r\n                                )}\r\n                                <Button\r\n                                    onClick={handleClose}\r\n                                    color=\"secondary\"\r\n                                    disabled={isSubmitting}\r\n                                    variant=\"outlined\"\r\n                                >\r\n                                    {i18n.t(\"quickMessages.buttons.cancel\")}\r\n                                </Button>\r\n                                <Button\r\n                                    type=\"submit\"\r\n                                    color=\"primary\"\r\n                                    disabled={isSubmitting}\r\n                                    variant=\"contained\"\r\n                                    className={classes.btnWrapper}\r\n                                >\r\n                                    {quickemessageId\r\n                                        ? `${i18n.t(\"quickMessages.buttons.edit\")}`\r\n                                        : `${i18n.t(\"quickMessages.buttons.add\")}`}\r\n                                    {isSubmitting && (\r\n                                        <CircularProgress\r\n                                            size={24}\r\n                                            className={classes.buttonProgress}\r\n                                        />\r\n                                    )}\r\n                                </Button>\r\n                            </DialogActions>\r\n                        </Form>\r\n                    )}\r\n                </Formik>\r\n            </Dialog>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default QuickMessageDialog;","import React, { useState, useEffect, useReducer, useContext, useCallback } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\r\n\r\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\n\r\nimport MainContainer from \"../../components/MainContainer\";\r\nimport MainHeader from \"../../components/MainHeader\";\r\nimport Title from \"../../components/Title\";\r\n\r\nimport api from \"../../services/api\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport TableRowSkeleton from \"../../components/TableRowSkeleton\";\r\nimport QuickMessageDialog from \"../../components/QuickMessageDialog\";\r\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { Grid } from \"@material-ui/core\";\r\nimport { isArray } from \"lodash\";\r\nimport { SocketContext } from \"../../context/Socket/SocketContext\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\n\r\n\r\nconst reducer = (state, action) => {\r\n  if (action.type === \"LOAD_QUICKMESSAGES\") {\r\n    //console.log(\"aqui\");\r\n    //console.log(action);\r\n    //console.log(action.payload);\r\n    const quickmessages = action.payload;\r\n    const newQuickmessages = [];\r\n    //console.log(newQuickmessages);\r\n\r\n    if (isArray(quickmessages)) {\r\n      quickmessages.forEach((quickemessage) => {\r\n        const quickemessageIndex = state.findIndex(\r\n          (u) => u.id === quickemessage.id\r\n        );\r\n        if (quickemessageIndex !== -1) {\r\n          state[quickemessageIndex] = quickemessage;\r\n        } else {\r\n          newQuickmessages.push(quickemessage);\r\n        }\r\n      });\r\n    }\r\n\r\n    return [...state, ...newQuickmessages];\r\n  }\r\n\r\n  if (action.type === \"UPDATE_QUICKMESSAGES\") {\r\n    const quickemessage = action.payload;\r\n    const quickemessageIndex = state.findIndex((u) => u.id === quickemessage.id);\r\n\r\n    if (quickemessageIndex !== -1) {\r\n      state[quickemessageIndex] = quickemessage;\r\n      return [...state];\r\n    } else {\r\n      return [quickemessage, ...state];\r\n    }\r\n  }\r\n\r\n  if (action.type === \"DELETE_QUICKMESSAGE\") {\r\n    const quickemessageId = action.payload;\r\n\r\n    const quickemessageIndex = state.findIndex((u) => u.id === quickemessageId);\r\n    if (quickemessageIndex !== -1) {\r\n      state.splice(quickemessageIndex, 1);\r\n    }\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"RESET\") {\r\n    return [];\r\n  }\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainPaper: {\r\n    flex: 1,\r\n    padding: theme.spacing(1),\r\n    overflowY: \"scroll\",\r\n    ...theme.scrollbarStyles,\r\n  },\r\n}));\r\n\r\nconst Quickemessages = () => {\r\n  const classes = useStyles();\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [pageNumber, setPageNumber] = useState(1);\r\n  const [hasMore, setHasMore] = useState(false);\r\n  const [selectedQuickemessage, setSelectedQuickemessage] = useState(null);\r\n  const [deletingQuickemessage, setDeletingQuickemessage] = useState(null);\r\n  const [quickemessageModalOpen, setQuickMessageDialogOpen] = useState(false);\r\n  const [confirmModalOpen, setConfirmModalOpen] = useState(false);\r\n  const [searchParam, setSearchParam] = useState(\"\");\r\n  const [quickemessages, dispatch] = useReducer(reducer, []);\r\n  const { user } = useContext(AuthContext);\r\n  const { profile } = user;\r\n\r\n  const socketManager = useContext(SocketContext);\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: \"RESET\" });\r\n    setPageNumber(1);\r\n  }, [searchParam]);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const delayDebounceFn = setTimeout(() => {\r\n      fetchQuickemessages();\r\n    }, 500);\r\n    return () => clearTimeout(delayDebounceFn);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [searchParam, pageNumber]);\r\n\r\n  useEffect(() => {\r\n    const companyId = user.companyId;\r\n    const socket = socketManager.getSocket(companyId);\r\n\r\n    socket.on(`company${companyId}-quickemessage`, (data) => {\r\n      if (data.action === \"update\" || data.action === \"create\") {\r\n        dispatch({ type: \"UPDATE_QUICKMESSAGES\", payload: data.record });\r\n      }\r\n      if (data.action === \"delete\") {\r\n        dispatch({ type: \"DELETE_QUICKMESSAGE\", payload: +data.id });\r\n      }\r\n    });\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, [socketManager, user.companyId]);\r\n\r\n  const fetchQuickemessages = async () => {\r\n    try {\r\n      const companyId = user.companyId;\r\n      //const searchParam = ({ companyId, userId: user.id });\r\n      const { data } = await api.get(\"/quick-messages\", {\r\n        params: { searchParam, pageNumber, userId: user.id },\r\n      });\r\n\r\n      dispatch({ type: \"LOAD_QUICKMESSAGES\", payload: data.records });\r\n      setHasMore(data.hasMore);\r\n      setLoading(false);\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  };\r\n\r\n  const handleOpenQuickMessageDialog = () => {\r\n    setSelectedQuickemessage(null);\r\n    setQuickMessageDialogOpen(true);\r\n  };\r\n\r\n  const handleCloseQuickMessageDialog = () => {\r\n    setSelectedQuickemessage(null);\r\n    setQuickMessageDialogOpen(false);\r\n    //window.location.reload();\r\n    fetchQuickemessages();\r\n  };\r\n\r\n  const handleSearch = (event) => {\r\n    setSearchParam(event.target.value.toLowerCase());\r\n  };\r\n\r\n  const handleEditQuickemessage = (quickemessage) => {\r\n    //console.log(quickemessage);\r\n    setSelectedQuickemessage(quickemessage);\r\n    setQuickMessageDialogOpen(true);\r\n  };\r\n\r\n  const handleDeleteQuickemessage = async (quickemessageId) => {\r\n    try {\r\n      await api.delete(`/quick-messages/${quickemessageId}`);\r\n      toast.success(i18n.t(\"quickemessages.toasts.deleted\"));\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n    setDeletingQuickemessage(null);\r\n    setSearchParam(\"\");\r\n    setPageNumber(1);\r\n    fetchQuickemessages();\r\n    dispatch({ type: \"RESET\" });\r\n\r\n  };\r\n\r\n  const loadMore = () => {\r\n    setPageNumber((prevState) => prevState + 1);\r\n  };\r\n\r\n  const handleScroll = (e) => {\r\n    if (!hasMore || loading) return;\r\n    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\r\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\r\n      loadMore();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <MainContainer>\r\n      <ConfirmationModal\r\n        title={deletingQuickemessage && `${i18n.t(\"quickMessages.confirmationModal.deleteTitle\")} ${deletingQuickemessage.shortcode}?`}\r\n        open={confirmModalOpen}\r\n        onClose={setConfirmModalOpen}\r\n        onConfirm={() => handleDeleteQuickemessage(deletingQuickemessage.id)}\r\n      >\r\n        {i18n.t(\"quickMessages.confirmationModal.deleteMessage\")}\r\n      </ConfirmationModal>\r\n      <QuickMessageDialog\r\n        resetPagination={() => {\r\n          setPageNumber(1);\r\n          fetchQuickemessages();\r\n        }}\r\n        open={quickemessageModalOpen}\r\n        onClose={handleCloseQuickMessageDialog}\r\n        aria-labelledby=\"form-dialog-title\"\r\n        quickemessageId={selectedQuickemessage && selectedQuickemessage.id}\r\n      />\r\n      <MainHeader>\r\n        <Grid style={{ width: \"99.6%\" }} container>\r\n          <Grid xs={12} sm={8} item>\r\n            <Title>{i18n.t(\"quickMessages.title\")}</Title>\r\n          </Grid>\r\n          <Grid xs={12} sm={4} item>\r\n            <Grid spacing={2} container>\r\n              <Grid xs={6} sm={6} item>\r\n                <TextField\r\n                  fullWidth\r\n                  placeholder={i18n.t(\"quickMessages.searchPlaceholder\")}\r\n                  type=\"search\"\r\n                  value={searchParam}\r\n                  onChange={handleSearch}\r\n                  InputProps={{\r\n                    startAdornment: (\r\n                      <InputAdornment position=\"start\">\r\n                        <SearchIcon style={{ color: \"gray\" }} />\r\n                      </InputAdornment>\r\n                    ),\r\n                  }}\r\n                />\r\n              </Grid>\r\n              <Grid xs={6} sm={6} item>\r\n                <Button\r\n                  fullWidth\r\n                  variant=\"contained\"\r\n                  onClick={handleOpenQuickMessageDialog}\r\n                  color=\"primary\"\r\n                >\r\n                  {i18n.t(\"quickMessages.buttons.add\")}\r\n                </Button>\r\n              </Grid>\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n      </MainHeader>\r\n      <Paper\r\n        className={classes.mainPaper}\r\n        variant=\"outlined\"\r\n        onScroll={handleScroll}\r\n      >\r\n        <Table size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"quickMessages.table.shortcode\")}\r\n              </TableCell>\r\n\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"quickMessages.table.mediaName\")}\r\n              </TableCell>        \r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"quickMessages.table.actions\")}\r\n              </TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            <>\r\n              {quickemessages.map((quickemessage) => (\r\n                <TableRow key={quickemessage.id}>\r\n                  <TableCell align=\"center\">{quickemessage.shortcode}</TableCell>\r\n\r\n                  <TableCell align=\"center\">\r\n                    {quickemessage.mediaName ?? i18n.t(\"quickMessages.noAttachment\")}\r\n                  </TableCell>\r\n                  <TableCell align=\"center\">\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={() => handleEditQuickemessage(quickemessage)}\r\n                    >\r\n                      <EditIcon />\r\n                    </IconButton>\r\n\r\n\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={(e) => {\r\n                        setConfirmModalOpen(true);\r\n                        setDeletingQuickemessage(quickemessage);\r\n                      }}\r\n                    >\r\n                      <DeleteOutlineIcon />\r\n                    </IconButton>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n              {loading && <TableRowSkeleton columns={5} />}\r\n            </>\r\n          </TableBody>\r\n        </Table>\r\n      </Paper>\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nexport default Quickemessages;","import React, { useState, useEffect, useReducer, useContext, useCallback } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport api from \"../../services/api\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport Board from 'react-trello';\r\nimport { toast } from \"react-toastify\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    padding: theme.spacing(1),\r\n  },\r\n  button: {\r\n    background: \"#10a110\",\r\n    border: \"none\",\r\n    padding: \"10px\",\r\n    color: \"white\",\r\n    fontWeight: \"bold\",\r\n    borderRadius: \"5px\",\r\n  },\r\n  \r\n}));\r\n\r\nconst Kanban = () => {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n\r\n  const [tags, setTags] = useState([]);\r\n  const [reloadData, setReloadData] = useState(false);\r\n  const [isInitialLoadComplete, setIsInitialLoadComplete] = useState(false);\r\n\r\n\r\n  const fetchTags = async () => {\r\n    try {\r\n      const response = await api.get(\"/tags/kanban\");\r\n      const fetchedTags = response.data.lista || []; \r\n\r\n      setTags(fetchedTags);\r\n\r\n      // Fetch tickets after fetching tags\r\n      await fetchTickets(jsonString);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchTags();\r\n  }, []);\r\n\r\n  const [file, setFile] = useState({\r\n    lanes: []\r\n  });\r\n\r\n\r\n  const [tickets, setTickets] = useState([]);\r\n  const { user } = useContext(AuthContext);\r\n  const { profile, queues } = user;\r\n  const jsonString = user.queues.map(queue => queue.UserQueue.queueId);\r\n\r\n  const fetchTickets = async (jsonString) => {\r\n    try {\r\n      \r\n      const { data } = await api.get(\"/ticket/kanban\", {\r\n        params: {\r\n          queueIds: JSON.stringify(jsonString),\r\n          teste: true\r\n        }\r\n      });\r\n      setTickets(data.tickets);\r\n    } catch (err) {\r\n      console.log(err);\r\n      setTickets([]);\r\n    }\r\n  };\r\n\r\n\r\n  const popularCards = (jsonString) => {\r\n    const filteredTickets = tickets.filter(ticket => ticket.tags.length === 0);\r\n\r\n    const lanes = [\r\n      {\r\n        id: \"lane0\",\r\n        title: i18n.t(\"Em aberto\"),\r\n        label: \"0\",\r\n        cards: filteredTickets.map(ticket => ({\r\n          id: ticket.id.toString(),\r\n          label: \"Ticket nº \" + ticket.id.toString(),\r\n          description: (\r\n              <div>\r\n                <p>\r\n                  {ticket.contact.number}\r\n                  <br />\r\n                  {ticket.lastMessage}\r\n                </p>\r\n                <button \r\n                  className={classes.button} \r\n                  onClick={() => {\r\n                    handleCardClick(ticket.uuid)\r\n                  }}>\r\n                    Ver Ticket\r\n                </button>\r\n              </div>\r\n            ),\r\n          title: ticket.contact.name,\r\n          draggable: true,\r\n          href: \"/tickets/\" + ticket.uuid,\r\n        })),\r\n      },\r\n      ...tags.map(tag => {\r\n        const filteredTickets = tickets.filter(ticket => {\r\n          const tagIds = ticket.tags.map(tag => tag.id);\r\n          return tagIds.includes(tag.id);\r\n        });\r\n\r\n        return {\r\n          id: tag.id.toString(),\r\n          title: tag.name,\r\n          label: tag.id.toString(),\r\n          cards: filteredTickets.map(ticket => ({\r\n            id: ticket.id.toString(),\r\n            label: \"Ticket nº \" + ticket.id.toString(),\r\n            description: (\r\n              <div>\r\n                <p>\r\n                  {ticket.contact.number}\r\n                  <br />\r\n                  {ticket.lastMessage}\r\n                </p>\r\n                <button \r\n                  className={classes.button} \r\n                  onClick={() => {\r\n                    \r\n                    handleCardClick(ticket.uuid)\r\n                  }}>\r\n                    Ver Ticket\r\n                </button>\r\n              </div>\r\n            ),\r\n            title: ticket.contact.name,\r\n            draggable: true,\r\n            href: \"/tickets/\" + ticket.uuid,          \r\n          })),\r\n          style: { backgroundColor: tag.color, color: \"white\" }\r\n        };\r\n      }),\r\n    ];\r\n\r\n    setFile({ lanes });\r\n  };\r\n\r\n  const handleCardClick = (uuid) => {  \r\n    //console.log(\"Clicked on card with UUID:\", uuid);\r\n    history.push('/tickets/' + uuid);\r\n  };\r\n\r\n  useEffect(() => {\r\n    popularCards(jsonString);\r\n}, [tags, tickets, reloadData]);\r\n\r\n  const handleCardMove = async (cardId, sourceLaneId, targetLaneId) => {\r\n    try {\r\n        \r\n          await api.delete(`/ticket-tags/${targetLaneId}`);\r\n        toast.success('Ticket Tag Removido!');\r\n          await api.put(`/ticket-tags/${targetLaneId}/${sourceLaneId}`);\r\n        toast.success('Ticket Tag Adicionado com Sucesso!');\r\n\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Board \r\n\t\tdata={file} \r\n\t\tonCardMoveAcrossLanes={handleCardMove}\r\n\t\tstyle={{backgroundColor: 'rgba(252, 252, 252, 0.03)'}}\r\n    />\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\nexport default Kanban;\r\n","import React, { useContext } from \"react\";\r\nimport { Route as RouterRoute, Redirect } from \"react-router-dom\";\r\n\r\nimport { AuthContext } from \"../context/Auth/AuthContext\";\r\nimport BackdropLoading from \"../components/BackdropLoading\";\r\n\r\nconst Route = ({ component: Component, isPrivate = false, ...rest }) => {\r\n\tconst { isAuth, loading } = useContext(AuthContext);\r\n\r\n\tif (!isAuth && isPrivate) {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t{loading && <BackdropLoading />}\r\n\t\t\t\t<Redirect to={{ pathname: \"/login\", state: { from: rest.location } }} />\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n\r\n\tif (isAuth && !isPrivate) {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t{loading && <BackdropLoading />}\r\n\t\t\t\t<Redirect to={{ pathname: \"/\", state: { from: rest.location } }} />;\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{loading && <BackdropLoading />}\r\n\t\t\t<RouterRoute {...rest} component={Component} />\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default Route;\r\n","import React, { useState, useEffect, useReducer, useCallback, useContext } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport MainContainer from \"../../components/MainContainer\";\r\nimport MainHeader from \"../../components/MainHeader\";\r\nimport Title from \"../../components/Title\";\r\nimport api from \"../../services/api\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport MainHeaderButtonsWrapper from \"../../components/MainHeaderButtonsWrapper\";\r\nimport ScheduleModal from \"../../components/ScheduleModal\";\r\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport moment from \"moment\";\r\nimport { SocketContext } from \"../../context/Socket/SocketContext\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport usePlans from \"../../hooks/usePlans\";\r\nimport { Calendar, momentLocalizer } from \"react-big-calendar\";\r\nimport \"moment/locale/pt-br\";\r\nimport \"react-big-calendar/lib/css/react-big-calendar.css\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\n\r\nimport \"./Schedules.css\"; // Importe o arquivo CSS\r\n\r\n// Defina a função getUrlParam antes de usá-la\r\nfunction getUrlParam(paramName) {\r\n  const searchParams = new URLSearchParams(window.location.search);\r\n  return searchParams.get(paramName);\r\n}\r\n\r\nconst eventTitleStyle = {\r\n  fontSize: \"14px\", // Defina um tamanho de fonte menor\r\n  overflow: \"hidden\", // Oculte qualquer conteúdo excedente\r\n  whiteSpace: \"nowrap\", // Evite a quebra de linha do texto\r\n  textOverflow: \"ellipsis\", // Exiba \"...\" se o texto for muito longo\r\n};\r\n\r\nconst localizer = momentLocalizer(moment);\r\nvar defaultMessages = {\r\n  date: \"Data\",\r\n  time: \"Hora\",\r\n  event: \"Evento\",\r\n  allDay: \"Dia Todo\",\r\n  week: \"Semana\",\r\n  work_week: \"Agendamentos\",\r\n  day: \"Dia\",\r\n  month: \"Mês\",\r\n  previous: \"Anterior\",\r\n  next: \"Próximo\",\r\n  yesterday: \"Ontem\",\r\n  tomorrow: \"Amanhã\",\r\n  today: \"Hoje\",\r\n  agenda: \"Agenda\",\r\n  noEventsInRange: \"Não há agendamentos no período.\",\r\n  showMore: function showMore(total) {\r\n    return \"+\" + total + \" mais\";\r\n  }\r\n};\r\n\r\nconst reducer = (state, action) => {\r\n  if (action.type === \"LOAD_SCHEDULES\") {\r\n    return [...state, ...action.payload];\r\n  }\r\n\r\n  if (action.type === \"UPDATE_SCHEDULES\") {\r\n    const schedule = action.payload;\r\n    const scheduleIndex = state.findIndex((s) => s.id === schedule.id);\r\n\r\n    if (scheduleIndex !== -1) {\r\n      state[scheduleIndex] = schedule;\r\n      return [...state];\r\n    } else {\r\n      return [schedule, ...state];\r\n    }\r\n  }\r\n\r\n  if (action.type === \"DELETE_SCHEDULE\") {\r\n    const scheduleId = action.payload;\r\n    return state.filter((s) => s.id !== scheduleId);\r\n  }\r\n\r\n  if (action.type === \"RESET\") {\r\n    return [];\r\n  }\r\n\r\n  return state;\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainPaper: {\r\n    flex: 1,\r\n    padding: theme.spacing(1),\r\n    overflowY: \"scroll\",\r\n    ...theme.scrollbarStyles,\r\n  },\r\n}));\r\n\r\nconst Schedules = () => {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n\r\n  const { user } = useContext(AuthContext);\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [pageNumber, setPageNumber] = useState(1);\r\n  const [hasMore, setHasMore] = useState(false);\r\n  const [selectedSchedule, setSelectedSchedule] = useState(null);\r\n  const [deletingSchedule, setDeletingSchedule] = useState(null);\r\n  const [confirmModalOpen, setConfirmModalOpen] = useState(false);\r\n  const [searchParam, setSearchParam] = useState(\"\");\r\n  const [schedules, dispatch] = useReducer(reducer, []);\r\n  const [scheduleModalOpen, setScheduleModalOpen] = useState(false);\r\n  const [contactId, setContactId] = useState(+getUrlParam(\"contactId\"));\r\n\r\n\r\n  const fetchSchedules = useCallback(async () => {\r\n    try {\r\n      const { data } = await api.get(\"/schedules/\", {\r\n        params: { searchParam, pageNumber },\r\n      });\r\n\r\n      dispatch({ type: \"LOAD_SCHEDULES\", payload: data.schedules });\r\n      setHasMore(data.hasMore);\r\n      setLoading(false);\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  }, [searchParam, pageNumber]);\r\n\r\n  const handleOpenScheduleModalFromContactId = useCallback(() => {\r\n    if (contactId) {\r\n      handleOpenScheduleModal();\r\n    }\r\n  }, [contactId]);\r\n\r\n  const socketManager = useContext(SocketContext);\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: \"RESET\" });\r\n    setPageNumber(1);\r\n  }, [searchParam]);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const delayDebounceFn = setTimeout(() => {\r\n      fetchSchedules();\r\n    }, 500);\r\n    return () => clearTimeout(delayDebounceFn);\r\n  }, [\r\n    searchParam,\r\n    pageNumber,\r\n    contactId,\r\n    fetchSchedules,\r\n    handleOpenScheduleModalFromContactId,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    handleOpenScheduleModalFromContactId();\r\n    const socket = socketManager.getSocket(user.companyId);\r\n\r\n    socket.on(`company${user.companyId}-schedule`, (data) => {\r\n      if (data.action === \"update\" || data.action === \"create\") {\r\n        dispatch({ type: \"UPDATE_SCHEDULES\", payload: data.schedule });\r\n      }\r\n\r\n      if (data.action === \"delete\") {\r\n        dispatch({ type: \"DELETE_SCHEDULE\", payload: +data.scheduleId });\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, [handleOpenScheduleModalFromContactId, socketManager, user]);\r\n\r\n  const cleanContact = () => {\r\n    setContactId(\"\");\r\n  };\r\n\r\n  const handleOpenScheduleModal = () => {\r\n    setSelectedSchedule(null);\r\n    setScheduleModalOpen(true);\r\n  };\r\n\r\n  const handleCloseScheduleModal = () => {\r\n    setSelectedSchedule(null);\r\n    setScheduleModalOpen(false);\r\n  };\r\n\r\n  const handleSearch = (event) => {\r\n    setSearchParam(event.target.value.toLowerCase());\r\n  };\r\n\r\n  const handleEditSchedule = (schedule) => {\r\n    setSelectedSchedule(schedule);\r\n    setScheduleModalOpen(true);\r\n  };\r\n\r\n  const handleDeleteSchedule = async (scheduleId) => {\r\n    try {\r\n      await api.delete(`/schedules/${scheduleId}`);\r\n      toast.success(i18n.t(\"schedules.toasts.deleted\"));\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n    setDeletingSchedule(null);\r\n    setSearchParam(\"\");\r\n    setPageNumber(1);\r\n\r\n    dispatch({ type: \"RESET\" });\r\n    setPageNumber(1);\r\n    await fetchSchedules();\r\n  };\r\n\r\n  const loadMore = () => {\r\n    setPageNumber((prevState) => prevState + 1);\r\n  };\r\n\r\n  const handleScroll = (e) => {\r\n    if (!hasMore || loading) return;\r\n    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\r\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\r\n      loadMore();\r\n    }\r\n  };\r\n\r\n  const truncate = (str, len) => {\r\n    if (str.length > len) {\r\n      return str.substring(0, len) + \"...\";\r\n    }\r\n    return str;\r\n  };\r\n\r\n  return (\r\n    <MainContainer>\r\n      <ConfirmationModal\r\n        title={\r\n          deletingSchedule &&\r\n          `${i18n.t(\"schedules.confirmationModal.deleteTitle\")}`\r\n        }\r\n        open={confirmModalOpen}\r\n        onClose={() => setConfirmModalOpen(false)}\r\n        onConfirm={() => handleDeleteSchedule(deletingSchedule.id)}\r\n      >\r\n        {i18n.t(\"schedules.confirmationModal.deleteMessage\")}\r\n      </ConfirmationModal>\r\n      <ScheduleModal\r\n        open={scheduleModalOpen}\r\n        onClose={handleCloseScheduleModal}\r\n        reload={fetchSchedules}\r\n        aria-labelledby=\"form-dialog-title\"\r\n        scheduleId={selectedSchedule && selectedSchedule.id}\r\n        contactId={contactId}\r\n        cleanContact={cleanContact}\r\n      />\r\n      <MainHeader>\r\n        <Title>{i18n.t(\"schedules.title\")} ({schedules.length})</Title>\r\n        <MainHeaderButtonsWrapper>\r\n          <TextField\r\n            placeholder={i18n.t(\"contacts.searchPlaceholder\")}\r\n            type=\"search\"\r\n            value={searchParam}\r\n            onChange={handleSearch}\r\n            InputProps={{\r\n              startAdornment: (\r\n                <InputAdornment position=\"start\">\r\n                  <SearchIcon style={{ color: \"gray\" }} />\r\n                </InputAdornment>\r\n              ),\r\n            }}\r\n          />\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={handleOpenScheduleModal}\r\n          >\r\n            {i18n.t(\"schedules.buttons.add\")}\r\n          </Button>\r\n        </MainHeaderButtonsWrapper>\r\n      </MainHeader>\r\n      <Paper className={classes.mainPaper} variant=\"outlined\" onScroll={handleScroll}>\r\n        <Calendar\r\n          messages={defaultMessages}\r\n          formats={{\r\n          agendaDateFormat: \"DD/MM ddd\",\r\n          weekdayFormat: \"dddd\"\r\n      }}\r\n          localizer={localizer}\r\n          events={schedules.map((schedule) => ({\r\n            title: (\r\n              <div className=\"event-container\">\r\n                <div style={eventTitleStyle}>{schedule.contact.name}</div>\r\n                <DeleteOutlineIcon\r\n                  onClick={() => handleDeleteSchedule(schedule.id)}\r\n                  className=\"delete-icon\"\r\n                />\r\n                <EditIcon\r\n                  onClick={() => {\r\n                    handleEditSchedule(schedule);\r\n                    setScheduleModalOpen(true);\r\n                  }}\r\n                  className=\"edit-icon\"\r\n                />\r\n              </div>\r\n            ),\r\n            start: new Date(schedule.sendAt),\r\n            end: new Date(schedule.sendAt),\r\n          }))}\r\n          startAccessor=\"start\"\r\n          endAccessor=\"end\"\r\n          style={{ height: 500 }}\r\n        />\r\n      </Paper>\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nexport default Schedules;","import React, { useState, useEffect, useRef, useContext } from \"react\";\r\n\r\nimport * as Yup from \"yup\";\r\nimport { Formik, Form, Field } from \"formik\";\r\nimport { toast } from \"react-toastify\";\r\nimport { head } from \"lodash\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { green } from \"@material-ui/core/colors\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport AttachFileIcon from \"@material-ui/icons/AttachFile\";\r\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport moment from \"moment\";\r\n\r\nimport api from \"../../services/api\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport {\r\n  Box,\r\n  FormControl,\r\n  Grid,\r\n  InputLabel,\r\n  MenuItem,\r\n  Select,\r\n  Tab,\r\n  Tabs,\r\n} from \"@material-ui/core\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport ConfirmationModal from \"../ConfirmationModal\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    flexWrap: \"wrap\",\r\n    backgroundColor: \"#fff\"\r\n  },\r\n\r\n  tabmsg: {\r\n    backgroundColor: theme.palette.campaigntab,\r\n  },\r\n\r\n  textField: {\r\n    marginRight: theme.spacing(1),\r\n    flex: 1,\r\n  },\r\n\r\n  extraAttr: {\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n\r\n  btnWrapper: {\r\n    position: \"relative\",\r\n  },\r\n\r\n  buttonProgress: {\r\n    color: green[500],\r\n    position: \"absolute\",\r\n    top: \"50%\",\r\n    left: \"50%\",\r\n    marginTop: -12,\r\n    marginLeft: -12,\r\n  },\r\n}));\r\n\r\nconst CampaignSchema = Yup.object().shape({\r\n  name: Yup.string()\r\n    .min(2, \"Too Short!\")\r\n    .max(50, \"Too Long!\")\r\n    .required(\"Required\"),\r\n});\r\n\r\nconst CampaignModal = ({\r\n  open,\r\n  onClose,\r\n  campaignId,\r\n  initialValues,\r\n  onSave,\r\n  resetPagination,\r\n}) => {\r\n  const classes = useStyles();\r\n  const isMounted = useRef(true);\r\n  const { user } = useContext(AuthContext);\r\n  const { companyId } = user;\r\n  const [file, setFile] = useState(null);\r\n\r\n  const initialState = {\r\n    name: \"\",\r\n    message1: \"\",\r\n    message2: \"\",\r\n    message3: \"\",\r\n    message4: \"\",\r\n    message5: \"\",\r\n    confirmationMessage1: \"\",\r\n    confirmationMessage2: \"\",\r\n    confirmationMessage3: \"\",\r\n    confirmationMessage4: \"\",\r\n    confirmationMessage5: \"\",\r\n    status: \"INATIVA\", // INATIVA, PROGRAMADA, EM_ANDAMENTO, CANCELADA, FINALIZADA,\r\n    confirmation: false,\r\n    scheduledAt: \"\",\r\n    whatsappId: \"\",\r\n    contactListId: \"\",\r\n    tagListId: \"Nenhuma\",\r\n    companyId,\r\n  };\r\n\r\n  const [campaign, setCampaign] = useState(initialState);\r\n  const [whatsapps, setWhatsapps] = useState([]);\r\n  const [contactLists, setContactLists] = useState([]);\r\n  const [messageTab, setMessageTab] = useState(0);\r\n  const [attachment, setAttachment] = useState(null);\r\n  const [confirmationOpen, setConfirmationOpen] = useState(false);\r\n  const [campaignEditable, setCampaignEditable] = useState(true);\r\n  const attachmentFile = useRef(null);\r\n  const [tagLists, setTagLists] = useState([]);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      isMounted.current = false;\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        const { data } = await api.get(\"/files/\", {\r\n          params: { companyId }\r\n        });\r\n\r\n        setFile(data.files);\r\n      } catch (err) {\r\n        toastError(err);\r\n      }\r\n    })();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (isMounted.current) {\r\n      if (initialValues) {\r\n        setCampaign((prevState) => {\r\n          return { ...prevState, ...initialValues };\r\n        });\r\n      }\r\n\r\n      api\r\n        .get(`/contact-lists/list`, { params: { companyId } })\r\n        .then(({ data }) => setContactLists(data));\r\n\r\n      api\r\n        .get(`/whatsapp`, { params: { companyId, session: 0 } })\r\n        .then(({ data }) => setWhatsapps(data));\r\n\r\n      api.get(`/tags`, { params: { companyId } })\r\n        .then(({ data }) => {\r\n          const fetchedTags = data.tags;\r\n          // Perform any necessary data transformation here\r\n          const formattedTagLists = fetchedTags.map((tag) => ({\r\n            id: tag.id,\r\n            name: tag.name,\r\n          }));\r\n          setTagLists(formattedTagLists);\r\n        })\r\n        .catch((error) => {\r\n          console.error(\"Error retrieving tags:\", error);\r\n        });\r\n        \r\n      if (!campaignId) return;\r\n\r\n      api.get(`/campaigns/${campaignId}`).then(({ data }) => {\r\n        setCampaign((prev) => {\r\n          let prevCampaignData = Object.assign({}, prev);\r\n\r\n          Object.entries(data).forEach(([key, value]) => {\r\n            if (key === \"scheduledAt\" && value !== \"\" && value !== null) {\r\n              prevCampaignData[key] = moment(value).format(\"YYYY-MM-DDTHH:mm\");\r\n            } else {\r\n              prevCampaignData[key] = value === null ? \"\" : value;\r\n            }\r\n          });\r\n\r\n          return prevCampaignData;\r\n        });\r\n      });\r\n    }\r\n  }, [campaignId, open, initialValues, companyId]);\r\n\r\n  useEffect(() => {\r\n    const now = moment();\r\n    const scheduledAt = moment(campaign.scheduledAt);\r\n    const moreThenAnHour =\r\n      !Number.isNaN(scheduledAt.diff(now)) && scheduledAt.diff(now, \"hour\") > 1;\r\n    const isEditable =\r\n      campaign.status === \"INATIVA\" ||\r\n      (campaign.status === \"PROGRAMADA\" && moreThenAnHour);\r\n\r\n    setCampaignEditable(isEditable);\r\n  }, [campaign.status, campaign.scheduledAt]);\r\n\r\n  const handleClose = () => {\r\n    onClose();\r\n    setCampaign(initialState);\r\n  };\r\n\r\n  const handleAttachmentFile = (e) => {\r\n    const file = head(e.target.files);\r\n    if (file) {\r\n      setAttachment(file);\r\n    }\r\n  };\r\n\r\n  const handleSaveCampaign = async (values) => {\r\n    try {\r\n      const dataValues = {};\r\n      Object.entries(values).forEach(([key, value]) => {\r\n        if (key === \"scheduledAt\" && value !== \"\" && value !== null) {\r\n          dataValues[key] = moment(value).format(\"YYYY-MM-DD HH:mm:ss\");\r\n        } else {\r\n          dataValues[key] = value === \"\" ? null : value;\r\n        }\r\n      });\r\n\r\n      if (campaignId) {\r\n        await api.put(`/campaigns/${campaignId}`, dataValues);\r\n\r\n        if (attachment != null) {\r\n          const formData = new FormData();\r\n          formData.append(\"file\", attachment);\r\n          await api.post(`/campaigns/${campaignId}/media-upload`, formData);\r\n        }\r\n        handleClose();\r\n      } else {\r\n        const { data } = await api.post(\"/campaigns\", dataValues);\r\n\r\n        if (attachment != null) {\r\n          const formData = new FormData();\r\n          formData.append(\"file\", attachment);\r\n          await api.post(`/campaigns/${data.id}/media-upload`, formData);\r\n        }\r\n        if (onSave) {\r\n          onSave(data);\r\n        }\r\n        handleClose();\r\n      }\r\n      toast.success(i18n.t(\"campaigns.toasts.success\"));\r\n    } catch (err) {\r\n      console.log(err);\r\n      toastError(err);\r\n    }\r\n  };\r\n\r\n  const deleteMedia = async () => {\r\n    if (attachment) {\r\n      setAttachment(null);\r\n      attachmentFile.current.value = null;\r\n    }\r\n\r\n    if (campaign.mediaPath) {\r\n      await api.delete(`/campaigns/${campaign.id}/media-upload`);\r\n      setCampaign((prev) => ({ ...prev, mediaPath: null, mediaName: null }));\r\n      toast.success(i18n.t(\"campaigns.toasts.deleted\"));\r\n    }\r\n  };\r\n\r\n  const renderMessageField = (identifier) => {\r\n    return (\r\n      <Field\r\n        as={TextField}\r\n        id={identifier}\r\n        name={identifier}\r\n        fullWidth\r\n        rows={5}\r\n        label={i18n.t(`campaigns.dialog.form.${identifier}`)}\r\n        placeholder={i18n.t(\"campaigns.dialog.form.messagePlaceholder\")}\r\n        multiline={true}\r\n        variant=\"outlined\"\r\n        helperText=\"Utilize variáveis como {nome}, {numero}, {email} ou defina variáveis personalziadas.\"\r\n        disabled={!campaignEditable && campaign.status !== \"CANCELADA\"}\r\n      />\r\n    );\r\n  };\r\n\r\n  const renderConfirmationMessageField = (identifier) => {\r\n    return (\r\n      <Field\r\n        as={TextField}\r\n        id={identifier}\r\n        name={identifier}\r\n        fullWidth\r\n        rows={5}\r\n        label={i18n.t(`campaigns.dialog.form.${identifier}`)}\r\n        placeholder={i18n.t(\"campaigns.dialog.form.messagePlaceholder\")}\r\n        multiline={true}\r\n        variant=\"outlined\"\r\n        disabled={!campaignEditable && campaign.status !== \"CANCELADA\"}\r\n      />\r\n    );\r\n  };\r\n\r\n  const cancelCampaign = async () => {\r\n    try {\r\n      await api.post(`/campaigns/${campaign.id}/cancel`);\r\n      toast.success(i18n.t(\"campaigns.toasts.cancel\"));\r\n      setCampaign((prev) => ({ ...prev, status: \"CANCELADA\" }));\r\n      resetPagination();\r\n    } catch (err) {\r\n      toast.error(err.message);\r\n    }\r\n  };\r\n\r\n  const restartCampaign = async () => {\r\n    try {\r\n      await api.post(`/campaigns/${campaign.id}/restart`);\r\n      toast.success(i18n.t(\"campaigns.toasts.restart\"));\r\n      setCampaign((prev) => ({ ...prev, status: \"EM_ANDAMENTO\" }));\r\n      resetPagination();\r\n    } catch (err) {\r\n      toast.error(err.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <ConfirmationModal\r\n        title={i18n.t(\"campaigns.confirmationModal.deleteTitle\")}\r\n        open={confirmationOpen}\r\n        onClose={() => setConfirmationOpen(false)}\r\n        onConfirm={deleteMedia}\r\n      >\r\n        {i18n.t(\"campaigns.confirmationModal.deleteMessage\")}\r\n      </ConfirmationModal>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleClose}\r\n        fullWidth\r\n        maxWidth=\"md\"\r\n        scroll=\"paper\"\r\n      >\r\n        <DialogTitle id=\"form-dialog-title\">\r\n          {campaignEditable ? (\r\n            <>\r\n              {campaignId\r\n                ? `${i18n.t(\"campaigns.dialog.update\")}`\r\n                : `${i18n.t(\"campaigns.dialog.new\")}`}\r\n            </>\r\n          ) : (\r\n            <>{`${i18n.t(\"campaigns.dialog.readonly\")}`}</>\r\n          )}\r\n        </DialogTitle>\r\n        <div style={{ display: \"none\" }}>\r\n          <input\r\n            type=\"file\"\r\n            ref={attachmentFile}\r\n            onChange={(e) => handleAttachmentFile(e)}\r\n          />\r\n        </div>\r\n        <Formik\r\n          initialValues={campaign}\r\n          enableReinitialize={true}\r\n          validationSchema={CampaignSchema}\r\n          onSubmit={(values, actions) => {\r\n            setTimeout(() => {\r\n              handleSaveCampaign(values);\r\n              actions.setSubmitting(false);\r\n            }, 400);\r\n          }}\r\n        >\r\n          {({ values, errors, touched, isSubmitting }) => (\r\n            <Form>\r\n              <DialogContent dividers>\r\n                <Grid spacing={2} container>\r\n                  <Grid xs={12} md={9} item>\r\n                    <Field\r\n                      as={TextField}\r\n                      label={i18n.t(\"campaigns.dialog.form.name\")}\r\n                      name=\"name\"\r\n                      error={touched.name && Boolean(errors.name)}\r\n                      helperText={touched.name && errors.name}\r\n                      variant=\"outlined\"\r\n                      margin=\"dense\"\r\n                      fullWidth\r\n                      className={classes.textField}\r\n                      disabled={!campaignEditable}\r\n                    />\r\n                  </Grid>\r\n                  <Grid xs={12} md={3} item>\r\n                    <FormControl\r\n                      variant=\"outlined\"\r\n                      margin=\"dense\"\r\n                      fullWidth\r\n                      className={classes.formControl}\r\n                    >\r\n                      <InputLabel id=\"confirmation-selection-label\">\r\n                        {i18n.t(\"campaigns.dialog.form.confirmation\")}\r\n                      </InputLabel>\r\n                      <Field\r\n                        as={Select}\r\n                        label={i18n.t(\"campaigns.dialog.form.confirmation\")}\r\n                        placeholder={i18n.t(\r\n                          \"campaigns.dialog.form.confirmation\"\r\n                        )}\r\n                        labelId=\"confirmation-selection-label\"\r\n                        id=\"confirmation\"\r\n                        name=\"confirmation\"\r\n                        error={\r\n                          touched.confirmation && Boolean(errors.confirmation)\r\n                        }\r\n                        disabled={!campaignEditable}\r\n                      >\r\n                        <MenuItem value={false}>Desabilitada</MenuItem>\r\n                        <MenuItem value={true}>Habilitada</MenuItem>\r\n                      </Field>\r\n                    </FormControl>\r\n                  </Grid>\r\n                  <Grid xs={12} md={4} item>\r\n                    <FormControl\r\n                      variant=\"outlined\"\r\n                      margin=\"dense\"\r\n                      fullWidth\r\n                      className={classes.formControl}\r\n                    >\r\n                      <InputLabel id=\"contactList-selection-label\">\r\n                        {i18n.t(\"campaigns.dialog.form.contactList\")}\r\n                      </InputLabel>\r\n                      <Field\r\n                        as={Select}\r\n                        label={i18n.t(\"campaigns.dialog.form.contactList\")}\r\n                        placeholder={i18n.t(\r\n                          \"campaigns.dialog.form.contactList\"\r\n                        )}\r\n                        labelId=\"contactList-selection-label\"\r\n                        id=\"contactListId\"\r\n                        name=\"contactListId\"\r\n                        error={\r\n                          touched.contactListId && Boolean(errors.contactListId)\r\n                        }\r\n                        disabled={!campaignEditable}\r\n                      >\r\n                        <MenuItem value=\"\">Nenhuma</MenuItem>\r\n                        {contactLists &&\r\n                          contactLists.map((contactList) => (\r\n                            <MenuItem\r\n                              key={contactList.id}\r\n                              value={contactList.id}\r\n                            >\r\n                              {contactList.name}\r\n                            </MenuItem>\r\n                          ))}\r\n                      </Field>\r\n                    </FormControl>\r\n                  </Grid>\r\n                  <Grid xs={12} md={4} item>\r\n                    <FormControl\r\n                      variant=\"outlined\"\r\n                      margin=\"dense\"\r\n                      fullWidth\r\n                      className={classes.formControl}\r\n                    >\r\n                      <InputLabel id=\"tagList-selection-label\">\r\n                        {i18n.t(\"campaigns.dialog.form.tagList\")}\r\n                      </InputLabel>\r\n                      <Field\r\n                        as={Select}\r\n                        label={i18n.t(\"campaigns.dialog.form.tagList\")}\r\n                        placeholder={i18n.t(\"campaigns.dialog.form.tagList\")}\r\n                        labelId=\"tagList-selection-label\"\r\n                        id=\"tagListId\"\r\n                        name=\"tagListId\"\r\n                        error={touched.tagListId && Boolean(errors.tagListId)}\r\n                        disabled={!campaignEditable}\r\n                      >\r\n                        <MenuItem value=\"\">Nenhuma</MenuItem>\r\n                        {Array.isArray(tagLists) &&\r\n                          tagLists.map((tagList) => (\r\n                            <MenuItem key={tagList.id} value={tagList.id}>\r\n                              {tagList.name}\r\n                            </MenuItem>\r\n                          ))}\r\n                      </Field>\r\n                    </FormControl>\r\n                  </Grid>\r\n                  <Grid xs={12} md={4} item>\r\n                    <FormControl\r\n                      variant=\"outlined\"\r\n                      margin=\"dense\"\r\n                      fullWidth\r\n                      className={classes.formControl}\r\n                    >\r\n                      <InputLabel id=\"whatsapp-selection-label\">\r\n                        {i18n.t(\"campaigns.dialog.form.whatsapp\")}\r\n                      </InputLabel>\r\n                      <Field\r\n                        as={Select}\r\n                        label={i18n.t(\"campaigns.dialog.form.whatsapp\")}\r\n                        placeholder={i18n.t(\"campaigns.dialog.form.whatsapp\")}\r\n                        labelId=\"whatsapp-selection-label\"\r\n                        id=\"whatsappId\"\r\n                        name=\"whatsappId\"\r\n                        error={touched.whatsappId && Boolean(errors.whatsappId)}\r\n                        disabled={!campaignEditable}\r\n                      >\r\n                        <MenuItem value=\"\">Nenhuma</MenuItem>\r\n                        {whatsapps &&\r\n                          whatsapps.map((whatsapp) => (\r\n                            <MenuItem key={whatsapp.id} value={whatsapp.id}>\r\n                              {whatsapp.name}\r\n                            </MenuItem>\r\n                          ))}\r\n                      </Field>\r\n                    </FormControl>\r\n                  </Grid>\r\n                  <Grid xs={12} md={4} item>\r\n                    <Field\r\n                      as={TextField}\r\n                      label={i18n.t(\"campaigns.dialog.form.scheduledAt\")}\r\n                      name=\"scheduledAt\"\r\n                      error={touched.scheduledAt && Boolean(errors.scheduledAt)}\r\n                      helperText={touched.scheduledAt && errors.scheduledAt}\r\n                      variant=\"outlined\"\r\n                      margin=\"dense\"\r\n                      type=\"datetime-local\"\r\n                      InputLabelProps={{\r\n                        shrink: true,\r\n                      }}\r\n                      fullWidth\r\n                      className={classes.textField}\r\n                      disabled={!campaignEditable}\r\n                    />\r\n                  </Grid>\r\n                  <Grid xs={12} md={4} item>\r\n                  <FormControl\r\n                      variant=\"outlined\"\r\n                      margin=\"dense\"\r\n                      className={classes.FormControl}\r\n                      fullWidth\r\n                    >\r\n                      <InputLabel id=\"fileListId-selection-label\">{i18n.t(\"campaigns.dialog.form.fileList\")}</InputLabel>\r\n                      <Field\r\n                        as={Select}\r\n                        label={i18n.t(\"campaigns.dialog.form.fileList\")}\r\n                        name=\"fileListId\"\r\n                        id=\"fileListId\"\r\n                        placeholder={i18n.t(\"campaigns.dialog.form.fileList\")}\r\n                        labelId=\"fileListId-selection-label\"\r\n                        value={values.fileListId || \"\"}\r\n                      >\r\n                        <MenuItem value={\"\"} >{\"Nenhum\"}</MenuItem>\r\n                        {file.map(f => (\r\n                          <MenuItem key={f.id} value={f.id}>\r\n                            {f.name}\r\n                          </MenuItem>\r\n                        ))}\r\n                      </Field>\r\n                    </FormControl>\r\n                  </Grid>\r\n                  <Grid xs={12} item>\r\n                    <Tabs\r\n                      value={messageTab}\r\n                      indicatorColor=\"primary\"\r\n                      textColor=\"primary\"\r\n                      className={classes.tabmsg}\r\n                      onChange={(e, v) => setMessageTab(v)}\r\n                      variant=\"fullWidth\"\r\n                      centered\r\n                      style={{\r\n                        borderRadius: 2,\r\n                      }}\r\n                    >\r\n                      <Tab label=\"Msg. 1\" index={0} />\r\n                      <Tab label=\"Msg. 2\" index={1} />\r\n                      <Tab label=\"Msg. 3\" index={2} />\r\n                      <Tab label=\"Msg. 4\" index={3} />\r\n                      <Tab label=\"Msg. 5\" index={4} />\r\n                    </Tabs>\r\n                    <Box style={{ paddingTop: 20, border: \"none\" }}>\r\n                      {messageTab === 0 && (\r\n                        <>\r\n                          {values.confirmation ? (\r\n                            <Grid spacing={2} container>\r\n                              <Grid xs={12} md={8} item>\r\n                                <>{renderMessageField(\"message1\")}</>\r\n                              </Grid>\r\n                              <Grid xs={12} md={4} item>\r\n                                <>\r\n                                  {renderConfirmationMessageField(\r\n                                    \"confirmationMessage1\"\r\n                                  )}\r\n                                </>\r\n                              </Grid>\r\n                            </Grid>\r\n                          ) : (\r\n                            <>{renderMessageField(\"message1\")}</>\r\n                          )}\r\n                        </>\r\n                      )}\r\n                      {messageTab === 1 && (\r\n                        <>\r\n                          {values.confirmation ? (\r\n                            <Grid spacing={2} container>\r\n                              <Grid xs={12} md={8} item>\r\n                                <>{renderMessageField(\"message2\")}</>\r\n                              </Grid>\r\n                              <Grid xs={12} md={4} item>\r\n                                <>\r\n                                  {renderConfirmationMessageField(\r\n                                    \"confirmationMessage2\"\r\n                                  )}\r\n                                </>\r\n                              </Grid>\r\n                            </Grid>\r\n                          ) : (\r\n                            <>{renderMessageField(\"message2\")}</>\r\n                          )}\r\n                        </>\r\n                      )}\r\n                      {messageTab === 2 && (\r\n                        <>\r\n                          {values.confirmation ? (\r\n                            <Grid spacing={2} container>\r\n                              <Grid xs={12} md={8} item>\r\n                                <>{renderMessageField(\"message3\")}</>\r\n                              </Grid>\r\n                              <Grid xs={12} md={4} item>\r\n                                <>\r\n                                  {renderConfirmationMessageField(\r\n                                    \"confirmationMessage3\"\r\n                                  )}\r\n                                </>\r\n                              </Grid>\r\n                            </Grid>\r\n                          ) : (\r\n                            <>{renderMessageField(\"message3\")}</>\r\n                          )}\r\n                        </>\r\n                      )}\r\n                      {messageTab === 3 && (\r\n                        <>\r\n                          {values.confirmation ? (\r\n                            <Grid spacing={2} container>\r\n                              <Grid xs={12} md={8} item>\r\n                                <>{renderMessageField(\"message4\")}</>\r\n                              </Grid>\r\n                              <Grid xs={12} md={4} item>\r\n                                <>\r\n                                  {renderConfirmationMessageField(\r\n                                    \"confirmationMessage4\"\r\n                                  )}\r\n                                </>\r\n                              </Grid>\r\n                            </Grid>\r\n                          ) : (\r\n                            <>{renderMessageField(\"message4\")}</>\r\n                          )}\r\n                        </>\r\n                      )}\r\n                      {messageTab === 4 && (\r\n                        <>\r\n                          {values.confirmation ? (\r\n                            <Grid spacing={2} container>\r\n                              <Grid xs={12} md={8} item>\r\n                                <>{renderMessageField(\"message5\")}</>\r\n                              </Grid>\r\n                              <Grid xs={12} md={4} item>\r\n                                <>\r\n                                  {renderConfirmationMessageField(\r\n                                    \"confirmationMessage5\"\r\n                                  )}\r\n                                </>\r\n                              </Grid>\r\n                            </Grid>\r\n                          ) : (\r\n                            <>{renderMessageField(\"message5\")}</>\r\n                          )}\r\n                        </>\r\n                      )}\r\n                    </Box>\r\n                  </Grid>\r\n                  {(campaign.mediaPath || attachment) && (\r\n                    <Grid xs={12} item>\r\n                      <Button startIcon={<AttachFileIcon />}>\r\n                        {attachment != null\r\n                          ? attachment.name\r\n                          : campaign.mediaName}\r\n                      </Button>\r\n                      {campaignEditable && (\r\n                        <IconButton\r\n                          onClick={() => setConfirmationOpen(true)}\r\n                          color=\"secondary\"\r\n                        >\r\n                          <DeleteOutlineIcon />\r\n                        </IconButton>\r\n                      )}\r\n                    </Grid>\r\n                  )}\r\n                </Grid>\r\n              </DialogContent>\r\n              <DialogActions>\r\n                {campaign.status === \"CANCELADA\" && (\r\n                  <Button\r\n                    color=\"primary\"\r\n                    onClick={() => restartCampaign()}\r\n                    variant=\"outlined\"\r\n                  >\r\n                    {i18n.t(\"campaigns.dialog.buttons.restart\")}\r\n                  </Button>\r\n                )}\r\n                {campaign.status === \"EM_ANDAMENTO\" && (\r\n                  <Button\r\n                    color=\"primary\"\r\n                    onClick={() => cancelCampaign()}\r\n                    variant=\"outlined\"\r\n                  >\r\n                    {i18n.t(\"campaigns.dialog.buttons.cancel\")}\r\n                  </Button>\r\n                )}\r\n                {!attachment && !campaign.mediaPath && campaignEditable && (\r\n                  <Button\r\n                    color=\"primary\"\r\n                    onClick={() => attachmentFile.current.click()}\r\n                    disabled={isSubmitting}\r\n                    variant=\"outlined\"\r\n                  >\r\n                    {i18n.t(\"campaigns.dialog.buttons.attach\")}\r\n                  </Button>\r\n                )}\r\n                <Button\r\n                  onClick={handleClose}\r\n                  color=\"secondary\"\r\n                  disabled={isSubmitting}\r\n                  variant=\"outlined\"\r\n                >\r\n                  {i18n.t(\"campaigns.dialog.buttons.close\")}\r\n                </Button>\r\n                {(campaignEditable || campaign.status === \"CANCELADA\") && (\r\n                  <Button\r\n                    type=\"submit\"\r\n                    color=\"primary\"\r\n                    disabled={isSubmitting}\r\n                    variant=\"contained\"\r\n                    className={classes.btnWrapper}\r\n                  >\r\n                    {campaignId\r\n                      ? `${i18n.t(\"campaigns.dialog.buttons.edit\")}`\r\n                      : `${i18n.t(\"campaigns.dialog.buttons.add\")}`}\r\n                    {isSubmitting && (\r\n                      <CircularProgress\r\n                        size={24}\r\n                        className={classes.buttonProgress}\r\n                      />\r\n                    )}\r\n                  </Button>\r\n                )}\r\n              </DialogActions>\r\n            </Form>\r\n          )}\r\n        </Formik>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CampaignModal;\r\n","/* eslint-disable no-unused-vars */\r\n\r\nimport React, { useState, useEffect, useReducer, useContext } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\n\r\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\nimport DescriptionIcon from \"@material-ui/icons/Description\";\r\nimport TimerOffIcon from \"@material-ui/icons/TimerOff\";\r\nimport PlayCircleOutlineIcon from \"@material-ui/icons/PlayCircleOutline\";\r\nimport PauseCircleOutlineIcon from \"@material-ui/icons/PauseCircleOutline\";\r\n\r\nimport MainContainer from \"../../components/MainContainer\";\r\nimport MainHeader from \"../../components/MainHeader\";\r\nimport Title from \"../../components/Title\";\r\n\r\nimport api from \"../../services/api\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport TableRowSkeleton from \"../../components/TableRowSkeleton\";\r\nimport CampaignModal from \"../../components/CampaignModal\";\r\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { Grid } from \"@material-ui/core\";\r\nimport { isArray } from \"lodash\";\r\nimport { useDate } from \"../../hooks/useDate\";\r\nimport { SocketContext } from \"../../context/Socket/SocketContext\";\r\n\r\nconst reducer = (state, action) => {\r\n  if (action.type === \"LOAD_CAMPAIGNS\") {\r\n    const campaigns = action.payload;\r\n    const newCampaigns = [];\r\n\r\n    if (isArray(campaigns)) {\r\n      campaigns.forEach((campaign) => {\r\n        const campaignIndex = state.findIndex((u) => u.id === campaign.id);\r\n        if (campaignIndex !== -1) {\r\n          state[campaignIndex] = campaign;\r\n        } else {\r\n          newCampaigns.push(campaign);\r\n        }\r\n      });\r\n    }\r\n\r\n    return [...state, ...newCampaigns];\r\n  }\r\n\r\n  if (action.type === \"UPDATE_CAMPAIGNS\") {\r\n    const campaign = action.payload;\r\n    const campaignIndex = state.findIndex((u) => u.id === campaign.id);\r\n\r\n    if (campaignIndex !== -1) {\r\n      state[campaignIndex] = campaign;\r\n      return [...state];\r\n    } else {\r\n      return [campaign, ...state];\r\n    }\r\n  }\r\n\r\n  if (action.type === \"DELETE_CAMPAIGN\") {\r\n    const campaignId = action.payload;\r\n\r\n    const campaignIndex = state.findIndex((u) => u.id === campaignId);\r\n    if (campaignIndex !== -1) {\r\n      state.splice(campaignIndex, 1);\r\n    }\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"RESET\") {\r\n    return [];\r\n  }\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainPaper: {\r\n    flex: 1,\r\n    padding: theme.spacing(1),\r\n    overflowY: \"scroll\",\r\n    ...theme.scrollbarStyles,\r\n  },\r\n}));\r\n\r\nconst Campaigns = () => {\r\n  const classes = useStyles();\r\n\r\n  const history = useHistory();\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [pageNumber, setPageNumber] = useState(1);\r\n  const [hasMore, setHasMore] = useState(false);\r\n  const [selectedCampaign, setSelectedCampaign] = useState(null);\r\n  const [deletingCampaign, setDeletingCampaign] = useState(null);\r\n  const [campaignModalOpen, setCampaignModalOpen] = useState(false);\r\n  const [confirmModalOpen, setConfirmModalOpen] = useState(false);\r\n  const [searchParam, setSearchParam] = useState(\"\");\r\n  const [campaigns, dispatch] = useReducer(reducer, []);\r\n\r\n  const { datetimeToClient } = useDate();\r\n\r\n  const socketManager = useContext(SocketContext);\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: \"RESET\" });\r\n    setPageNumber(1);\r\n  }, [searchParam]);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const delayDebounceFn = setTimeout(() => {\r\n      fetchCampaigns();\r\n    }, 500);\r\n    return () => clearTimeout(delayDebounceFn);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [searchParam, pageNumber]);\r\n\r\n  useEffect(() => {\r\n    const companyId = localStorage.getItem(\"companyId\");\r\n    const socket = socketManager.getSocket(companyId);\r\n\r\n    socket.on(`company-${companyId}-campaign`, (data) => {\r\n      if (data.action === \"update\" || data.action === \"create\") {\r\n        dispatch({ type: \"UPDATE_CAMPAIGNS\", payload: data.record });\r\n      }\r\n      if (data.action === \"delete\") {\r\n        dispatch({ type: \"DELETE_CAMPAIGN\", payload: +data.id });\r\n      }\r\n    });\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, [socketManager]);\r\n\r\n  const fetchCampaigns = async () => {\r\n    try {\r\n      const { data } = await api.get(\"/campaigns/\", {\r\n        params: { searchParam, pageNumber },\r\n      });\r\n      dispatch({ type: \"LOAD_CAMPAIGNS\", payload: data.records });\r\n      setHasMore(data.hasMore);\r\n      setLoading(false);\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  };\r\n\r\n  const handleOpenCampaignModal = () => {\r\n    setSelectedCampaign(null);\r\n    setCampaignModalOpen(true);\r\n  };\r\n\r\n  const handleCloseCampaignModal = () => {\r\n    setSelectedCampaign(null);\r\n    setCampaignModalOpen(false);\r\n  };\r\n\r\n  const handleSearch = (event) => {\r\n    setSearchParam(event.target.value.toLowerCase());\r\n  };\r\n\r\n  const handleEditCampaign = (campaign) => {\r\n    setSelectedCampaign(campaign);\r\n    setCampaignModalOpen(true);\r\n  };\r\n\r\n  const handleDeleteCampaign = async (campaignId) => {\r\n    try {\r\n      await api.delete(`/campaigns/${campaignId}`);\r\n      toast.success(i18n.t(\"campaigns.toasts.deleted\"));\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n    setDeletingCampaign(null);\r\n    setSearchParam(\"\");\r\n    setPageNumber(1);\r\n  };\r\n\r\n  const loadMore = () => {\r\n    setPageNumber((prevState) => prevState + 1);\r\n  };\r\n\r\n  const handleScroll = (e) => {\r\n    if (!hasMore || loading) return;\r\n    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\r\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\r\n      loadMore();\r\n    }\r\n  };\r\n\r\n  const formatStatus = (val) => {\r\n    switch (val) {\r\n      case \"INATIVA\":\r\n        return \"Inativa\";\r\n      case \"PROGRAMADA\":\r\n        return \"Programada\";\r\n      case \"EM_ANDAMENTO\":\r\n        return \"Em Andamento\";\r\n      case \"CANCELADA\":\r\n        return \"Cancelada\";\r\n      case \"FINALIZADA\":\r\n        return \"Finalizada\";\r\n      default:\r\n        return val;\r\n    }\r\n  };\r\n\r\n  const cancelCampaign = async (campaign) => {\r\n    try {\r\n      await api.post(`/campaigns/${campaign.id}/cancel`);\r\n      toast.success(i18n.t(\"campaigns.toasts.cancel\"));\r\n      setPageNumber(1);\r\n      fetchCampaigns();\r\n    } catch (err) {\r\n      toast.error(err.message);\r\n    }\r\n  };\r\n\r\n  const restartCampaign = async (campaign) => {\r\n    try {\r\n      await api.post(`/campaigns/${campaign.id}/restart`);\r\n      toast.success(i18n.t(\"campaigns.toasts.restart\"));\r\n      setPageNumber(1);\r\n      fetchCampaigns();\r\n    } catch (err) {\r\n      toast.error(err.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <MainContainer>\r\n      <ConfirmationModal\r\n        title={\r\n          deletingCampaign &&\r\n          `${i18n.t(\"campaigns.confirmationModal.deleteTitle\")} ${\r\n            deletingCampaign.name\r\n          }?`\r\n        }\r\n        open={confirmModalOpen}\r\n        onClose={setConfirmModalOpen}\r\n        onConfirm={() => handleDeleteCampaign(deletingCampaign.id)}\r\n      >\r\n        {i18n.t(\"campaigns.confirmationModal.deleteMessage\")}\r\n      </ConfirmationModal>\r\n      <CampaignModal\r\n        resetPagination={() => {\r\n          setPageNumber(1);\r\n          fetchCampaigns();\r\n        }}\r\n        open={campaignModalOpen}\r\n        onClose={handleCloseCampaignModal}\r\n        aria-labelledby=\"form-dialog-title\"\r\n        campaignId={selectedCampaign && selectedCampaign.id}\r\n      />\r\n      <MainHeader>\r\n        <Grid style={{ width: \"99.6%\" }} container>\r\n          <Grid xs={12} sm={8} item>\r\n            <Title>{i18n.t(\"campaigns.title\")}</Title>\r\n          </Grid>\r\n          <Grid xs={12} sm={4} item>\r\n            <Grid spacing={2} container>\r\n              <Grid xs={6} sm={6} item>\r\n                <TextField\r\n                  fullWidth\r\n                  placeholder={i18n.t(\"campaigns.searchPlaceholder\")}\r\n                  type=\"search\"\r\n                  value={searchParam}\r\n                  onChange={handleSearch}\r\n                  InputProps={{\r\n                    startAdornment: (\r\n                      <InputAdornment position=\"start\">\r\n                        <SearchIcon style={{ color: \"gray\" }} />\r\n                      </InputAdornment>\r\n                    ),\r\n                  }}\r\n                />\r\n              </Grid>\r\n              <Grid xs={6} sm={6} item>\r\n                <Button\r\n                  fullWidth\r\n                  variant=\"contained\"\r\n                  onClick={handleOpenCampaignModal}\r\n                  color=\"primary\"\r\n                >\r\n                  {i18n.t(\"campaigns.buttons.add\")}\r\n                </Button>\r\n              </Grid>\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n      </MainHeader>\r\n      <Paper\r\n        className={classes.mainPaper}\r\n        variant=\"outlined\"\r\n        onScroll={handleScroll}\r\n      >\r\n        <Table size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"campaigns.table.name\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"campaigns.table.status\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"campaigns.table.contactList\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"campaigns.table.whatsapp\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"campaigns.table.scheduledAt\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"campaigns.table.completedAt\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"campaigns.table.confirmation\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"campaigns.table.actions\")}\r\n              </TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            <>\r\n              {campaigns.map((campaign) => (\r\n                <TableRow key={campaign.id}>\r\n                  <TableCell align=\"center\">{campaign.name}</TableCell>\r\n                  <TableCell align=\"center\">\r\n                    {formatStatus(campaign.status)}\r\n                  </TableCell>\r\n                  <TableCell align=\"center\">\r\n                    {campaign.contactListId\r\n                      ? campaign.contactList.name\r\n                      : \"Não definida\"}\r\n                  </TableCell>\r\n                  <TableCell align=\"center\">\r\n                    {campaign.whatsappId\r\n                      ? campaign.whatsapp.name\r\n                      : \"Não definido\"}\r\n                  </TableCell>\r\n                  <TableCell align=\"center\">\r\n                    {campaign.scheduledAt\r\n                      ? datetimeToClient(campaign.scheduledAt)\r\n                      : \"Sem agendamento\"}\r\n                  </TableCell>\r\n                  <TableCell align=\"center\">\r\n                    {campaign.completedAt\r\n                      ? datetimeToClient(campaign.completedAt)\r\n                      : \"Não concluída\"}\r\n                  </TableCell>\r\n                  <TableCell align=\"center\">\r\n                    {campaign.confirmation ? \"Habilitada\" : \"Desabilitada\"}\r\n                  </TableCell>\r\n                  <TableCell align=\"center\">\r\n                    {campaign.status === \"EM_ANDAMENTO\" && (\r\n                      <IconButton\r\n                        onClick={() => cancelCampaign(campaign)}\r\n                        title=\"Parar Campanha\"\r\n                        size=\"small\"\r\n                      >\r\n                        <PauseCircleOutlineIcon />\r\n                      </IconButton>\r\n                    )}\r\n                    {campaign.status === \"CANCELADA\" && (\r\n                      <IconButton\r\n                        onClick={() => restartCampaign(campaign)}\r\n                        title=\"Parar Campanha\"\r\n                        size=\"small\"\r\n                      >\r\n                        <PlayCircleOutlineIcon />\r\n                      </IconButton>\r\n                    )}\r\n                    <IconButton\r\n                      onClick={() =>\r\n                        history.push(`/campaign/${campaign.id}/report`)\r\n                      }\r\n                      size=\"small\"\r\n                    >\r\n                      <DescriptionIcon />\r\n                    </IconButton>\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={() => handleEditCampaign(campaign)}\r\n                    >\r\n                      <EditIcon />\r\n                    </IconButton>\r\n\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={(e) => {\r\n                        setConfirmModalOpen(true);\r\n                        setDeletingCampaign(campaign);\r\n                      }}\r\n                    >\r\n                      <DeleteOutlineIcon />\r\n                    </IconButton>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n              {loading && <TableRowSkeleton columns={8} />}\r\n            </>\r\n          </TableBody>\r\n        </Table>\r\n      </Paper>\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nexport default Campaigns;\r\n","import React, { useEffect, useState } from \"react\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport MainContainer from \"../../components/MainContainer\";\r\nimport MainHeader from \"../../components/MainHeader\";\r\nimport Title from \"../../components/Title\";\r\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\r\nimport api from \"../../services/api\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  FormControl,\r\n  Grid,\r\n  IconButton,\r\n  InputLabel,\r\n  MenuItem,\r\n  Select,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableRow,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainPaper: {\r\n    flex: 1,\r\n    padding: theme.spacing(1),\r\n    overflowY: \"scroll\",\r\n    ...theme.scrollbarStyles,\r\n  },\r\n  textRight: {\r\n    textAlign: \"right\",\r\n  },\r\n  tabPanelsContainer: {\r\n    padding: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nconst initialSettings = {\r\n  messageInterval: 20,\r\n  longerIntervalAfter: 20,\r\n  greaterInterval: 60,\r\n  variables: [],\r\n};\r\n\r\nconst CampaignsConfig = () => {\r\n  const classes = useStyles();\r\n\r\n  const [settings, setSettings] = useState(initialSettings);\r\n  const [showVariablesForm, setShowVariablesForm] = useState(false);\r\n  const [confirmationOpen, setConfirmationOpen] = useState(false);\r\n  const [selectedKey, setSelectedKey] = useState(null);\r\n  const [variable, setVariable] = useState({ key: \"\", value: \"\" });\r\n\r\n  useEffect(() => {\r\n    api.get(\"/campaign-settings\").then(({ data }) => {\r\n      const settingsList = [];\r\n      if (Array.isArray(data) && data.length > 0) {\r\n        data.forEach((item) => {\r\n          settingsList.push([item.key, JSON.parse(item.value)]);\r\n        });\r\n        setSettings(Object.fromEntries(settingsList));\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  const handleOnChangeVariable = (e) => {\r\n    if (e.target.value !== null) {\r\n      const changedProp = {};\r\n      changedProp[e.target.name] = e.target.value;\r\n      setVariable((prev) => ({ ...prev, ...changedProp }));\r\n    }\r\n  };\r\n\r\n  const handleOnChangeSettings = (e) => {\r\n    const changedProp = {};\r\n    changedProp[e.target.name] = e.target.value;\r\n    setSettings((prev) => ({ ...prev, ...changedProp }));\r\n  };\r\n\r\n  const addVariable = () => {\r\n    setSettings((prev) => {\r\n      const variablesExists = settings.variables.filter(\r\n        (v) => v.key === variable.key\r\n      );\r\n      const variables = prev.variables;\r\n      if (variablesExists.length === 0) {\r\n        variables.push(Object.assign({}, variable));\r\n        setVariable({ key: \"\", value: \"\" });\r\n      }\r\n      return { ...prev, variables };\r\n    });\r\n  };\r\n\r\n  const removeVariable = () => {\r\n    const newList = settings.variables.filter((v) => v.key !== selectedKey);\r\n    setSettings((prev) => ({ ...prev, variables: newList }));\r\n    setSelectedKey(null);\r\n  };\r\n\r\n  const saveSettings = async () => {\r\n    await api.post(\"/campaign-settings\", { settings });\r\n    toast.success(\"Configurações salvas\");\r\n  };\r\n\r\n  return (\r\n    <MainContainer>\r\n      <ConfirmationModal\r\n        title={i18n.t(\"campaigns.confirmationModal.deleteTitle\")}\r\n        open={confirmationOpen}\r\n        onClose={() => setConfirmationOpen(false)}\r\n        onConfirm={removeVariable}\r\n      >\r\n        {i18n.t(\"campaigns.confirmationModal.deleteMessage\")}\r\n      </ConfirmationModal>\r\n      <MainHeader>\r\n        <Grid style={{ width: \"99.6%\" }} container>\r\n          <Grid xs={12} item>\r\n            <Title>{i18n.t(\"campaignsConfig.title\")}</Title>\r\n          </Grid>\r\n        </Grid>\r\n      </MainHeader>\r\n      <Paper className={classes.mainPaper} variant=\"outlined\">\r\n        <Box className={classes.tabPanelsContainer}>\r\n          <Grid spacing={2} container>\r\n            <Grid xs={12} item>\r\n              <Typography component={\"h3\"}>Intervalos</Typography>\r\n            </Grid>\r\n            <Grid xs={12} md={4} item>\r\n              <FormControl\r\n                variant=\"outlined\"\r\n                className={classes.formControl}\r\n                fullWidth\r\n              >\r\n                <InputLabel id=\"messageInterval-label\">\r\n                  Intervalo Randômico de Disparo\r\n                </InputLabel>\r\n                <Select\r\n                  name=\"messageInterval\"\r\n                  id=\"messageInterval\"\r\n                  labelId=\"messageInterval-label\"\r\n                  label=\"Intervalo Randômico de Disparo\"\r\n                  value={settings.messageInterval}\r\n                  onChange={(e) => handleOnChangeSettings(e)}\r\n                >\r\n                  <MenuItem value={0}>Sem Intervalo</MenuItem>\r\n                  <MenuItem value={5}>5 segundos</MenuItem>\r\n                  <MenuItem value={10}>10 segundos</MenuItem>\r\n                  <MenuItem value={15}>15 segundos</MenuItem>\r\n                  <MenuItem value={20}>20 segundos</MenuItem>\r\n                </Select>\r\n              </FormControl>\r\n            </Grid>\r\n            <Grid xs={12} md={4} item>\r\n              <FormControl\r\n                variant=\"outlined\"\r\n                className={classes.formControl}\r\n                fullWidth\r\n              >\r\n                <InputLabel id=\"longerIntervalAfter-label\">\r\n                  Intervalo Maior Após\r\n                </InputLabel>\r\n                <Select\r\n                  name=\"longerIntervalAfter\"\r\n                  id=\"longerIntervalAfter\"\r\n                  labelId=\"longerIntervalAfter-label\"\r\n                  label=\"Intervalo Maior Após\"\r\n                  value={settings.longerIntervalAfter}\r\n                  onChange={(e) => handleOnChangeSettings(e)}\r\n                >\r\n                  <MenuItem value={0}>Não definido</MenuItem>\r\n                  <MenuItem value={1}>1 segundo</MenuItem>\r\n                  <MenuItem value={5}>5 segundos</MenuItem>\r\n                  <MenuItem value={10}>10 segundos</MenuItem>\r\n                  <MenuItem value={15}>15 segundos</MenuItem>\r\n                  <MenuItem value={20}>20 segundos</MenuItem>\r\n                  <MenuItem value={30}>30 segundos</MenuItem>\r\n                  <MenuItem value={40}>40 segundos</MenuItem>\r\n                  <MenuItem value={60}>60 segundos</MenuItem>\r\n                  <MenuItem value={80}>80 segundos</MenuItem>\r\n                  <MenuItem value={100}>100 segundos</MenuItem>\r\n                  <MenuItem value={120}>120 segundos</MenuItem>\r\n                </Select>\r\n              </FormControl>\r\n            </Grid>\r\n            <Grid xs={12} md={4} item>\r\n              <FormControl\r\n                variant=\"outlined\"\r\n                className={classes.formControl}\r\n                fullWidth\r\n              >\r\n                <InputLabel id=\"greaterInterval-label\">\r\n                  Intervalo de Disparo Maior\r\n                </InputLabel>\r\n                <Select\r\n                  name=\"greaterInterval\"\r\n                  id=\"greaterInterval\"\r\n                  labelId=\"greaterInterval-label\"\r\n                  label=\"Intervalo de Disparo Maior\"\r\n                  value={settings.greaterInterval}\r\n                  onChange={(e) => handleOnChangeSettings(e)}\r\n                >\r\n                  <MenuItem value={0}>Sem Intervalo</MenuItem>\r\n                  <MenuItem value={1}>1 segundo</MenuItem>\r\n                  <MenuItem value={5}>5 segundos</MenuItem>\r\n                  <MenuItem value={10}>10 segundos</MenuItem>\r\n                  <MenuItem value={15}>15 segundos</MenuItem>\r\n                  <MenuItem value={20}>20 segundos</MenuItem>\r\n                  <MenuItem value={30}>30 segundos</MenuItem>\r\n                  <MenuItem value={40}>40 segundos</MenuItem>\r\n                  <MenuItem value={60}>60 segundos</MenuItem>\r\n                  <MenuItem value={80}>80 segundos</MenuItem>\r\n                  <MenuItem value={100}>100 segundos</MenuItem>\r\n                  <MenuItem value={120}>120 segundos</MenuItem>\r\n                </Select>\r\n              </FormControl>\r\n            </Grid>\r\n            <Grid xs={12} className={classes.textRight} item>\r\n              <Button\r\n                onClick={() => setShowVariablesForm(!showVariablesForm)}\r\n                color=\"primary\"\r\n                style={{ marginRight: 10 }}\r\n              >\r\n                Adicionar Variável\r\n              </Button>\r\n              <Button\r\n                onClick={saveSettings}\r\n                color=\"primary\"\r\n                variant=\"contained\"\r\n              >\r\n                Salvar Configurações\r\n              </Button>\r\n            </Grid>\r\n            {showVariablesForm && (\r\n              <>\r\n                <Grid xs={12} md={6} item>\r\n                  <TextField\r\n                    label=\"Atalho\"\r\n                    variant=\"outlined\"\r\n                    value={variable.key}\r\n                    name=\"key\"\r\n                    onChange={handleOnChangeVariable}\r\n                    fullWidth\r\n                  />\r\n                </Grid>\r\n                <Grid xs={12} md={6} item>\r\n                  <TextField\r\n                    label=\"Conteúdo\"\r\n                    variant=\"outlined\"\r\n                    value={variable.value}\r\n                    name=\"value\"\r\n                    onChange={handleOnChangeVariable}\r\n                    fullWidth\r\n                  />\r\n                </Grid>\r\n                <Grid xs={12} className={classes.textRight} item>\r\n                  <Button\r\n                    onClick={() => setShowVariablesForm(!showVariablesForm)}\r\n                    color=\"primary\"\r\n                    style={{ marginRight: 10 }}\r\n                  >\r\n                    Fechar\r\n                  </Button>\r\n                  <Button\r\n                    onClick={addVariable}\r\n                    color=\"primary\"\r\n                    variant=\"contained\"\r\n                  >\r\n                    Adicionar\r\n                  </Button>\r\n                </Grid>\r\n              </>\r\n            )}\r\n            {settings.variables.length > 0 && (\r\n              <Grid xs={12} className={classes.textRight} item>\r\n                <Table size=\"small\">\r\n                  <TableHead>\r\n                    <TableRow>\r\n                      <TableCell style={{ width: \"1%\" }}></TableCell>\r\n                      <TableCell>Atalho</TableCell>\r\n                      <TableCell>Conteúdo</TableCell>\r\n                    </TableRow>\r\n                  </TableHead>\r\n                  <TableBody>\r\n                    {Array.isArray(settings.variables) &&\r\n                      settings.variables.map((v, k) => (\r\n                        <TableRow key={k}>\r\n                          <TableCell>\r\n                            <IconButton\r\n                              size=\"small\"\r\n                              onClick={() => {\r\n                                setSelectedKey(v.key);\r\n                                setConfirmationOpen(true);\r\n                              }}\r\n                            >\r\n                              <DeleteOutlineIcon />\r\n                            </IconButton>\r\n                          </TableCell>\r\n                          <TableCell>{\"{\" + v.key + \"}\"}</TableCell>\r\n                          <TableCell>{v.value}</TableCell>\r\n                        </TableRow>\r\n                      ))}\r\n                  </TableBody>\r\n                </Table>\r\n              </Grid>\r\n            )}\r\n          </Grid>\r\n        </Box>\r\n      </Paper>\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nexport default CampaignsConfig;\r\n","import React, { useEffect, useRef, useState, useContext } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\n\r\nimport MainContainer from \"../../components/MainContainer\";\r\nimport MainHeader from \"../../components/MainHeader\";\r\nimport Title from \"../../components/Title\";\r\n\r\nimport { Grid, LinearProgress, Typography } from \"@material-ui/core\";\r\nimport api from \"../../services/api\";\r\nimport { has, get, isNull } from \"lodash\";\r\nimport CardCounter from \"../../components/Dashboard/CardCounter\";\r\nimport GroupIcon from \"@material-ui/icons/Group\";\r\nimport ScheduleIcon from \"@material-ui/icons/Schedule\";\r\nimport EventAvailableIcon from \"@material-ui/icons/EventAvailable\";\r\nimport DoneIcon from \"@material-ui/icons/Done\";\r\nimport DoneAllIcon from \"@material-ui/icons/DoneAll\";\r\nimport CheckCircleIcon from \"@material-ui/icons/CheckCircle\";\r\nimport WhatsAppIcon from \"@material-ui/icons/WhatsApp\";\r\nimport ListAltIcon from \"@material-ui/icons/ListAlt\";\r\nimport { useDate } from \"../../hooks/useDate\";\r\n\r\nimport { SocketContext } from \"../../context/Socket/SocketContext\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainPaper: {\r\n    flex: 1,\r\n    padding: theme.spacing(2),\r\n    overflowY: \"scroll\",\r\n    ...theme.scrollbarStyles,\r\n  },\r\n  textRight: {\r\n    textAlign: \"right\",\r\n  },\r\n  tabPanelsContainer: {\r\n    padding: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nconst CampaignReport = () => {\r\n  const classes = useStyles();\r\n\r\n  const { campaignId } = useParams();\r\n\r\n  const [campaign, setCampaign] = useState({});\r\n  const [validContacts, setValidContacts] = useState(0);\r\n  const [delivered, setDelivered] = useState(0);\r\n  const [confirmationRequested, setConfirmationRequested] = useState(0);\r\n  const [confirmed, setConfirmed] = useState(0);\r\n  const [percent, setPercent] = useState(0);\r\n  const [loading, setLoading] = useState(false);\r\n  const mounted = useRef(true);\r\n\r\n  const { datetimeToClient } = useDate();\r\n\r\n  const socketManager = useContext(SocketContext);\r\n\r\n  useEffect(() => {\r\n    if (mounted.current) {\r\n      findCampaign();\r\n    }\r\n\r\n    return () => {\r\n      mounted.current = false;\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (mounted.current && has(campaign, \"shipping\")) {\r\n      if (has(campaign, \"contactList\")) {\r\n        const contactList = get(campaign, \"contactList\");\r\n        const valids = contactList.contacts.filter((c) => c.isWhatsappValid);\r\n        setValidContacts(valids.length);\r\n      }\r\n\r\n      if (has(campaign, \"shipping\")) {\r\n        const contacts = get(campaign, \"shipping\");\r\n        const delivered = contacts.filter((c) => !isNull(c.deliveredAt));\r\n        const confirmationRequested = contacts.filter(\r\n          (c) => !isNull(c.confirmationRequestedAt)\r\n        );\r\n        const confirmed = contacts.filter(\r\n          (c) => !isNull(c.deliveredAt) && !isNull(c.confirmationRequestedAt)\r\n        );\r\n        setDelivered(delivered.length);\r\n        setConfirmationRequested(confirmationRequested.length);\r\n        setConfirmed(confirmed.length);\r\n        setDelivered(delivered.length);\r\n      }\r\n    }\r\n  }, [campaign]);\r\n\r\n  useEffect(() => {\r\n    setPercent((delivered / validContacts) * 100);\r\n  }, [delivered, validContacts]);\r\n\r\n  useEffect(() => {\r\n    const companyId = localStorage.getItem(\"companyId\");\r\n    const socket = socketManager.getSocket(companyId);\r\n\r\n    socket.on(`company-${companyId}-campaign`, (data) => {\r\n     \r\n      if (data.record.id === +campaignId) {\r\n        setCampaign(data.record);\r\n\r\n        if (data.record.status === \"FINALIZADA\") {\r\n          setTimeout(() => {\r\n            findCampaign();\r\n          }, 5000);\r\n        }\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [campaignId, socketManager]);\r\n\r\n  const findCampaign = async () => {\r\n    setLoading(true);\r\n    const { data } = await api.get(`/campaigns/${campaignId}`);\r\n    setCampaign(data);\r\n    setLoading(false);\r\n  };\r\n\r\n  const formatStatus = (val) => {\r\n    switch (val) {\r\n      case \"INATIVA\":\r\n        return \"Inativa\";\r\n      case \"PROGRAMADA\":\r\n        return \"Programada\";\r\n      case \"EM_ANDAMENTO\":\r\n        return \"Em Andamento\";\r\n      case \"CANCELADA\":\r\n        return \"Cancelada\";\r\n      case \"FINALIZADA\":\r\n        return \"Finalizada\";\r\n      default:\r\n        return val;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <MainContainer>\r\n      <MainHeader>\r\n        <Grid style={{ width: \"99.6%\" }} container>\r\n          <Grid xs={12} item>\r\n            <Title>Relatório da {campaign.name || \"Campanha\"}</Title>\r\n          </Grid>\r\n        </Grid>\r\n      </MainHeader>\r\n      <Paper className={classes.mainPaper} variant=\"outlined\">\r\n        <Typography variant=\"h6\" component=\"h2\">\r\n          Status: {formatStatus(campaign.status)} {delivered} de {validContacts}\r\n        </Typography>\r\n        <Grid spacing={2} container>\r\n          <Grid xs={12} item>\r\n            <LinearProgress\r\n              variant=\"determinate\"\r\n              style={{ height: 15, borderRadius: 3, margin: \"20px 0\" }}\r\n              value={percent}\r\n            />\r\n          </Grid>\r\n          <Grid xs={12} md={4} item>\r\n            <CardCounter\r\n              icon={<GroupIcon fontSize=\"inherit\" />}\r\n              title=\"Contatos Válidos\"\r\n              value={validContacts}\r\n              loading={loading}\r\n            />\r\n          </Grid>\r\n          {campaign.confirmation && (\r\n            <>\r\n              <Grid xs={12} md={4} item>\r\n                <CardCounter\r\n                  icon={<DoneIcon fontSize=\"inherit\" />}\r\n                  title=\"Confirmações Solicitadas\"\r\n                  value={confirmationRequested}\r\n                  loading={loading}\r\n                />\r\n              </Grid>\r\n              <Grid xs={12} md={4} item>\r\n                <CardCounter\r\n                  icon={<DoneAllIcon fontSize=\"inherit\" />}\r\n                  title=\"Confirmações\"\r\n                  value={confirmed}\r\n                  loading={loading}\r\n                />\r\n              </Grid>\r\n            </>\r\n          )}\r\n          <Grid xs={12} md={4} item>\r\n            <CardCounter\r\n              icon={<CheckCircleIcon fontSize=\"inherit\" />}\r\n              title=\"Entregues\"\r\n              value={delivered}\r\n              loading={loading}\r\n            />\r\n          </Grid>\r\n          {campaign.whatsappId && (\r\n            <Grid xs={12} md={4} item>\r\n              <CardCounter\r\n                icon={<WhatsAppIcon fontSize=\"inherit\" />}\r\n                title=\"Conexão\"\r\n                value={campaign.whatsapp.name}\r\n                loading={loading}\r\n              />\r\n            </Grid>\r\n          )}\r\n          {campaign.contactListId && (\r\n            <Grid xs={12} md={4} item>\r\n              <CardCounter\r\n                icon={<ListAltIcon fontSize=\"inherit\" />}\r\n                title=\"Lista de Contatos\"\r\n                value={campaign.contactList.name}\r\n                loading={loading}\r\n              />\r\n            </Grid>\r\n          )}\r\n          <Grid xs={12} md={4} item>\r\n            <CardCounter\r\n              icon={<ScheduleIcon fontSize=\"inherit\" />}\r\n              title=\"Agendamento\"\r\n              value={datetimeToClient(campaign.scheduledAt)}\r\n              loading={loading}\r\n            />\r\n          </Grid>\r\n          <Grid xs={12} md={4} item>\r\n            <CardCounter\r\n              icon={<EventAvailableIcon fontSize=\"inherit\" />}\r\n              title=\"Conclusão\"\r\n              value={datetimeToClient(campaign.completedAt)}\r\n              loading={loading}\r\n            />\r\n          </Grid>\r\n        </Grid>\r\n      </Paper>\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nexport default CampaignReport;\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\n\r\nimport * as Yup from \"yup\";\r\nimport { Formik, Form, Field } from \"formik\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { green } from \"@material-ui/core/colors\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport AttachFileIcon from \"@material-ui/icons/AttachFile\";\r\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport { head } from \"lodash\";\r\n\r\nimport api from \"../../services/api\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport {\r\n  FormControl,\r\n  Grid,\r\n  InputLabel,\r\n  MenuItem,\r\n  Select,\r\n} from \"@material-ui/core\";\r\nimport ConfirmationModal from \"../ConfirmationModal\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    flexWrap: \"wrap\",\r\n  },\r\n  multFieldLine: {\r\n    display: \"flex\",\r\n    \"& > *:not(:last-child)\": {\r\n      marginRight: theme.spacing(1),\r\n    },\r\n  },\r\n\r\n  btnWrapper: {\r\n    position: \"relative\",\r\n  },\r\n\r\n  buttonProgress: {\r\n    color: green[500],\r\n    position: \"absolute\",\r\n    top: \"50%\",\r\n    left: \"50%\",\r\n    marginTop: -12,\r\n    marginLeft: -12,\r\n  },\r\n  formControl: {\r\n    margin: theme.spacing(1),\r\n    minWidth: 120,\r\n  },\r\n  colorAdorment: {\r\n    width: 20,\r\n    height: 20,\r\n  },\r\n}));\r\n\r\nconst AnnouncementSchema = Yup.object().shape({\r\n  title: Yup.string().required(\"Obrigatório\"),\r\n  text: Yup.string().required(\"Obrigatório\"),\r\n});\r\n\r\nconst AnnouncementModal = ({ open, onClose, announcementId, reload }) => {\r\n  const classes = useStyles();\r\n\r\n  const initialState = {\r\n    title: \"\",\r\n    text: \"\",\r\n    priority: 3,\r\n    status: true,\r\n  };\r\n\r\n  const [confirmationOpen, setConfirmationOpen] = useState(false);\r\n  const [announcement, setAnnouncement] = useState(initialState);\r\n  const [attachment, setAttachment] = useState(null);\r\n  const attachmentFile = useRef(null);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      (async () => {\r\n        if (!announcementId) return;\r\n\r\n        const { data } = await api.get(`/announcements/${announcementId}`);\r\n        setAnnouncement((prevState) => {\r\n          return { ...prevState, ...data };\r\n        });\r\n      })();\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  }, [announcementId, open]);\r\n\r\n  const handleClose = () => {\r\n    setAnnouncement(initialState);\r\n    setAttachment(null);\r\n    onClose();\r\n  };\r\n\r\n  const handleAttachmentFile = (e) => {\r\n    const file = head(e.target.files);\r\n    if (file) {\r\n      setAttachment(file);\r\n    }\r\n  };\r\n\r\n  const handleSaveAnnouncement = async (values) => {\r\n    const announcementData = { ...values };\r\n    try {\r\n      if (announcementId) {\r\n        await api.put(`/announcements/${announcementId}`, announcementData);\r\n        if (attachment != null) {\r\n          const formData = new FormData();\r\n          formData.append(\"file\", attachment);\r\n          await api.post(\r\n            `/announcements/${announcementId}/media-upload`,\r\n            formData\r\n          );\r\n        }\r\n      } else {\r\n        const { data } = await api.post(\"/announcements\", announcementData);\r\n        if (attachment != null) {\r\n          const formData = new FormData();\r\n          formData.append(\"file\", attachment);\r\n          await api.post(`/announcements/${data.id}/media-upload`, formData);\r\n        }\r\n      }\r\n      toast.success(i18n.t(\"announcements.toasts.success\"));\r\n      if (typeof reload == \"function\") {\r\n        reload();\r\n      }\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n    handleClose();\r\n  };\r\n\r\n  const deleteMedia = async () => {\r\n    if (attachment) {\r\n      setAttachment(null);\r\n      attachmentFile.current.value = null;\r\n    }\r\n\r\n    if (announcement.mediaPath) {\r\n      await api.delete(`/announcements/${announcement.id}/media-upload`);\r\n      setAnnouncement((prev) => ({\r\n        ...prev,\r\n        mediaPath: null,\r\n      }));\r\n      toast.success(i18n.t(\"announcements.toasts.deleted\"));\r\n      if (typeof reload == \"function\") {\r\n        reload();\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <ConfirmationModal\r\n        title={i18n.t(\"announcements.confirmationModal.deleteTitle\")}\r\n        open={confirmationOpen}\r\n        onClose={() => setConfirmationOpen(false)}\r\n        onConfirm={deleteMedia}\r\n      >\r\n        {i18n.t(\"announcements.confirmationModal.deleteMessage\")}\r\n      </ConfirmationModal>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleClose}\r\n        maxWidth=\"xs\"\r\n        fullWidth\r\n        scroll=\"paper\"\r\n      >\r\n        <DialogTitle id=\"form-dialog-title\">\r\n          {announcementId\r\n            ? `${i18n.t(\"announcements.dialog.edit\")}`\r\n            : `${i18n.t(\"announcements.dialog.add\")}`}\r\n        </DialogTitle>\r\n        <div style={{ display: \"none\" }}>\r\n          <input\r\n            type=\"file\"\r\n            accept=\".png,.jpg,.jpeg\"\r\n            ref={attachmentFile}\r\n            onChange={(e) => handleAttachmentFile(e)}\r\n          />\r\n        </div>\r\n        <Formik\r\n          initialValues={announcement}\r\n          enableReinitialize={true}\r\n          validationSchema={AnnouncementSchema}\r\n          onSubmit={(values, actions) => {\r\n            setTimeout(() => {\r\n              handleSaveAnnouncement(values);\r\n              actions.setSubmitting(false);\r\n            }, 400);\r\n          }}\r\n        >\r\n          {({ touched, errors, isSubmitting, values }) => (\r\n            <Form>\r\n              <DialogContent dividers>\r\n                <Grid spacing={2} container>\r\n                  <Grid xs={12} item>\r\n                    <Field\r\n                      as={TextField}\r\n                      label={i18n.t(\"announcements.dialog.form.title\")}\r\n                      name=\"title\"\r\n                      error={touched.title && Boolean(errors.title)}\r\n                      helperText={touched.title && errors.title}\r\n                      variant=\"outlined\"\r\n                      margin=\"dense\"\r\n                      fullWidth\r\n                    />\r\n                  </Grid>\r\n                  <Grid xs={12} item>\r\n                    <Field\r\n                      as={TextField}\r\n                      label={i18n.t(\"announcements.dialog.form.text\")}\r\n                      name=\"text\"\r\n                      error={touched.text && Boolean(errors.text)}\r\n                      helperText={touched.text && errors.text}\r\n                      variant=\"outlined\"\r\n                      margin=\"dense\"\r\n                      multiline={true}\r\n                      rows={7}\r\n                      fullWidth\r\n                    />\r\n                  </Grid>\r\n                  <Grid xs={12} item>\r\n                    <FormControl variant=\"outlined\" margin=\"dense\" fullWidth>\r\n                      <InputLabel id=\"status-selection-label\">\r\n                        {i18n.t(\"announcements.dialog.form.status\")}\r\n                      </InputLabel>\r\n                      <Field\r\n                        as={Select}\r\n                        label={i18n.t(\"announcements.dialog.form.status\")}\r\n                        placeholder={i18n.t(\"announcements.dialog.form.status\")}\r\n                        labelId=\"status-selection-label\"\r\n                        id=\"status\"\r\n                        name=\"status\"\r\n                        error={touched.status && Boolean(errors.status)}\r\n                      >\r\n                        <MenuItem value={true}>Ativo</MenuItem>\r\n                        <MenuItem value={false}>Inativo</MenuItem>\r\n                      </Field>\r\n                    </FormControl>\r\n                  </Grid>\r\n                  <Grid xs={12} item>\r\n                    <FormControl variant=\"outlined\" margin=\"dense\" fullWidth>\r\n                      <InputLabel id=\"priority-selection-label\">\r\n                        {i18n.t(\"announcements.dialog.form.priority\")}\r\n                      </InputLabel>\r\n                      <Field\r\n                        as={Select}\r\n                        label={i18n.t(\"announcements.dialog.form.priority\")}\r\n                        placeholder={i18n.t(\r\n                          \"announcements.dialog.form.priority\"\r\n                        )}\r\n                        labelId=\"priority-selection-label\"\r\n                        id=\"priority\"\r\n                        name=\"priority\"\r\n                        error={touched.priority && Boolean(errors.priority)}\r\n                      >\r\n                        <MenuItem value={1}>Alta</MenuItem>\r\n                        <MenuItem value={2}>Média</MenuItem>\r\n                        <MenuItem value={3}>Baixa</MenuItem>\r\n                      </Field>\r\n                    </FormControl>\r\n                  </Grid>\r\n                  {(announcement.mediaPath || attachment) && (\r\n                    <Grid xs={12} item>\r\n                      <Button startIcon={<AttachFileIcon />}>\r\n                        {attachment ? attachment.name : announcement.mediaName}\r\n                      </Button>\r\n                      <IconButton\r\n                        onClick={() => setConfirmationOpen(true)}\r\n                        color=\"secondary\"\r\n                      >\r\n                        <DeleteOutlineIcon />\r\n                      </IconButton>\r\n                    </Grid>\r\n                  )}\r\n                </Grid>\r\n              </DialogContent>\r\n              <DialogActions>\r\n                {!attachment && !announcement.mediaPath && (\r\n                  <Button\r\n                    color=\"primary\"\r\n                    onClick={() => attachmentFile.current.click()}\r\n                    disabled={isSubmitting}\r\n                    variant=\"outlined\"\r\n                  >\r\n                    {i18n.t(\"announcements.dialog.buttons.attach\")}\r\n                  </Button>\r\n                )}\r\n                <Button\r\n                  onClick={handleClose}\r\n                  color=\"secondary\"\r\n                  disabled={isSubmitting}\r\n                  variant=\"outlined\"\r\n                >\r\n                  {i18n.t(\"announcements.dialog.buttons.cancel\")}\r\n                </Button>\r\n                <Button\r\n                  type=\"submit\"\r\n                  color=\"primary\"\r\n                  disabled={isSubmitting}\r\n                  variant=\"contained\"\r\n                  className={classes.btnWrapper}\r\n                >\r\n                  {announcementId\r\n                    ? `${i18n.t(\"announcements.dialog.buttons.add\")}`\r\n                    : `${i18n.t(\"announcements.dialog.buttons.edit\")}`}\r\n                  {isSubmitting && (\r\n                    <CircularProgress\r\n                      size={24}\r\n                      className={classes.buttonProgress}\r\n                    />\r\n                  )}\r\n                </Button>\r\n              </DialogActions>\r\n            </Form>\r\n          )}\r\n        </Formik>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AnnouncementModal;\r\n","import React, { useState, useEffect, useReducer, useContext } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\n\r\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\n\r\nimport MainContainer from \"../../components/MainContainer\";\r\nimport MainHeader from \"../../components/MainHeader\";\r\nimport Title from \"../../components/Title\";\r\n\r\nimport api from \"../../services/api\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport TableRowSkeleton from \"../../components/TableRowSkeleton\";\r\nimport AnnouncementModal from \"../../components/AnnouncementModal\";\r\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { Grid } from \"@material-ui/core\";\r\nimport { isArray } from \"lodash\";\r\nimport { SocketContext } from \"../../context/Socket/SocketContext\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\n\r\nconst reducer = (state, action) => {\r\n  if (action.type === \"LOAD_ANNOUNCEMENTS\") {\r\n    const announcements = action.payload;\r\n    const newAnnouncements = [];\r\n\r\n    if (isArray(announcements)) {\r\n      announcements.forEach((announcement) => {\r\n        const announcementIndex = state.findIndex(\r\n          (u) => u.id === announcement.id\r\n        );\r\n        if (announcementIndex !== -1) {\r\n          state[announcementIndex] = announcement;\r\n        } else {\r\n          newAnnouncements.push(announcement);\r\n        }\r\n      });\r\n    }\r\n\r\n    return [...state, ...newAnnouncements];\r\n  }\r\n\r\n  if (action.type === \"UPDATE_ANNOUNCEMENTS\") {\r\n    const announcement = action.payload;\r\n    const announcementIndex = state.findIndex((u) => u.id === announcement.id);\r\n\r\n    if (announcementIndex !== -1) {\r\n      state[announcementIndex] = announcement;\r\n      return [...state];\r\n    } else {\r\n      return [announcement, ...state];\r\n    }\r\n  }\r\n\r\n  if (action.type === \"DELETE_ANNOUNCEMENT\") {\r\n    const announcementId = action.payload;\r\n\r\n    const announcementIndex = state.findIndex((u) => u.id === announcementId);\r\n    if (announcementIndex !== -1) {\r\n      state.splice(announcementIndex, 1);\r\n    }\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"RESET\") {\r\n    return [];\r\n  }\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainPaper: {\r\n    flex: 1,\r\n    // padding: theme.spacing(1),\r\n    padding: theme.padding,\r\n    overflowY: \"scroll\",\r\n    ...theme.scrollbarStyles,\r\n  },\r\n}));\r\n\r\nconst Announcements = () => {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n\r\n  const { user } = useContext(AuthContext);\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [pageNumber, setPageNumber] = useState(1);\r\n  const [hasMore, setHasMore] = useState(false);\r\n  const [selectedAnnouncement, setSelectedAnnouncement] = useState(null);\r\n  const [deletingAnnouncement, setDeletingAnnouncement] = useState(null);\r\n  const [announcementModalOpen, setAnnouncementModalOpen] = useState(false);\r\n  const [confirmModalOpen, setConfirmModalOpen] = useState(false);\r\n  const [searchParam, setSearchParam] = useState(\"\");\r\n  const [announcements, dispatch] = useReducer(reducer, []);\r\n\r\n  const socketManager = useContext(SocketContext);\r\n\r\n  // trava para nao acessar pagina que não pode  \r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      if (!user.super) {\r\n        toast.error(\"Esta empresa não possui permissão para acessar essa página! Estamos lhe redirecionando.\");\r\n        setTimeout(() => {\r\n          history.push(`/`)\r\n        }, 1000);\r\n      }\r\n    }\r\n    fetchData();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: \"RESET\" });\r\n    setPageNumber(1);\r\n  }, [searchParam]);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const delayDebounceFn = setTimeout(() => {\r\n      fetchAnnouncements();\r\n    }, 500);\r\n    return () => clearTimeout(delayDebounceFn);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [searchParam, pageNumber]);\r\n\r\n  useEffect(() => {\r\n    const companyId = user.companyId;\r\n    const socket = socketManager.getSocket(companyId);\r\n\r\n    socket.on(`company-announcement`, (data) => {\r\n      if (data.action === \"update\" || data.action === \"create\") {\r\n        dispatch({ type: \"UPDATE_ANNOUNCEMENTS\", payload: data.record });\r\n      }\r\n      if (data.action === \"delete\") {\r\n        dispatch({ type: \"DELETE_ANNOUNCEMENT\", payload: +data.id });\r\n      }\r\n    });\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, [socketManager, user.companyId]);\r\n\r\n  const fetchAnnouncements = async () => {\r\n    try {\r\n      const { data } = await api.get(\"/announcements/\", {\r\n        params: { searchParam, pageNumber },\r\n      });\r\n      dispatch({ type: \"LOAD_ANNOUNCEMENTS\", payload: data.records });\r\n      setHasMore(data.hasMore);\r\n      setLoading(false);\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  };\r\n\r\n  const handleOpenAnnouncementModal = () => {\r\n    setSelectedAnnouncement(null);\r\n    setAnnouncementModalOpen(true);\r\n  };\r\n\r\n  const handleCloseAnnouncementModal = () => {\r\n    setSelectedAnnouncement(null);\r\n    setAnnouncementModalOpen(false);\r\n  };\r\n\r\n  const handleSearch = (event) => {\r\n    setSearchParam(event.target.value.toLowerCase());\r\n  };\r\n\r\n  const handleEditAnnouncement = (announcement) => {\r\n    setSelectedAnnouncement(announcement);\r\n    setAnnouncementModalOpen(true);\r\n  };\r\n\r\n  const handleDeleteAnnouncement = async (announcement) => {\r\n    try {\r\n      if (announcement.mediaName)\r\n      await api.delete(`/announcements/${announcement.id}/media-upload`);\r\n\r\n      await api.delete(`/announcements/${announcement.id}`);\r\n      \r\n      toast.success(i18n.t(\"announcements.toasts.deleted\"));\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n    setDeletingAnnouncement(null);\r\n    setSearchParam(\"\");\r\n    setPageNumber(1);\r\n  };\r\n\r\n  const loadMore = () => {\r\n    setPageNumber((prevState) => prevState + 1);\r\n  };\r\n\r\n  const handleScroll = (e) => {\r\n    if (!hasMore || loading) return;\r\n    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\r\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\r\n      loadMore();\r\n    }\r\n  };\r\n\r\n  const translatePriority = (val) => {\r\n    if (val === 1) {\r\n      return \"Alta\";\r\n    }\r\n    if (val === 2) {\r\n      return \"Média\";\r\n    }\r\n    if (val === 3) {\r\n      return \"Baixa\";\r\n    }\r\n  };\r\n\r\n  return (\r\n    <MainContainer >\r\n      <ConfirmationModal\r\n        title={\r\n          deletingAnnouncement &&\r\n          `${i18n.t(\"announcements.confirmationModal.deleteTitle\")} ${deletingAnnouncement.name\r\n          }?`\r\n        }\r\n        open={confirmModalOpen}\r\n        onClose={setConfirmModalOpen}\r\n        onConfirm={() => handleDeleteAnnouncement(deletingAnnouncement)}\r\n      >\r\n        {i18n.t(\"announcements.confirmationModal.deleteMessage\")}\r\n      </ConfirmationModal>\r\n      <AnnouncementModal\r\n        resetPagination={() => {\r\n          setPageNumber(1);\r\n          fetchAnnouncements();\r\n        }}\r\n        open={announcementModalOpen}\r\n        onClose={handleCloseAnnouncementModal}\r\n        aria-labelledby=\"form-dialog-title\"\r\n        announcementId={selectedAnnouncement && selectedAnnouncement.id}\r\n      />\r\n      <MainHeader>\r\n        <Grid style={{ width: \"99.6%\" }} container>\r\n          <Grid xs={12} sm={8} item>\r\n            <Title>{i18n.t(\"announcements.title\")} ({announcements.length})</Title>\r\n          </Grid>\r\n          <Grid xs={12} sm={4} item>\r\n            <Grid spacing={2} container>\r\n              <Grid xs={6} sm={6} item>\r\n                <TextField\r\n                  fullWidth\r\n                  placeholder={i18n.t(\"announcements.searchPlaceholder\")}\r\n                  type=\"search\"\r\n                  value={searchParam}\r\n                  onChange={handleSearch}\r\n                  InputProps={{\r\n                    startAdornment: (\r\n                      <InputAdornment position=\"start\">\r\n                        <SearchIcon style={{ color: \"gray\" }} />\r\n                      </InputAdornment>\r\n                    ),\r\n                  }}\r\n                />\r\n              </Grid>\r\n              <Grid xs={6} sm={6} item>\r\n                <Button\r\n                  fullWidth\r\n                  variant=\"contained\"\r\n                  onClick={handleOpenAnnouncementModal}\r\n                  color=\"primary\"\r\n                >\r\n                  {i18n.t(\"announcements.buttons.add\")}\r\n                </Button>\r\n              </Grid>\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n      </MainHeader>\r\n      <Paper\r\n        className={classes.mainPaper}\r\n        variant=\"outlined\"\r\n        onScroll={handleScroll}\r\n      >\r\n        <Table size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"announcements.table.title\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"announcements.table.priority\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"announcements.table.mediaName\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"announcements.table.status\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"announcements.table.actions\")}\r\n              </TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            <>\r\n              {announcements.map((announcement) => (\r\n                <TableRow key={announcement.id}>\r\n                  <TableCell align=\"center\">{announcement.title}</TableCell>\r\n                  <TableCell align=\"center\">\r\n                    {translatePriority(announcement.priority)}\r\n                  </TableCell>\r\n                  <TableCell align=\"center\">\r\n                    {announcement.mediaName ?? i18n.t(\"quickMessages.noAttachment\")}\r\n                  </TableCell>\r\n                  <TableCell align=\"center\">\r\n                    {announcement.status ? i18n.t(\"announcements.active\") : i18n.t(\"announcements.inactive\")}\r\n                  </TableCell>\r\n                  <TableCell align=\"center\">\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={() => handleEditAnnouncement(announcement)}\r\n                    >\r\n                      <EditIcon />\r\n                    </IconButton>\r\n\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={(e) => {\r\n                        setConfirmModalOpen(true);\r\n                        setDeletingAnnouncement(announcement);\r\n                      }}\r\n                    >\r\n                      <DeleteOutlineIcon />\r\n                    </IconButton>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n              {loading && <TableRowSkeleton columns={5} />}\r\n            </>\r\n          </TableBody>\r\n        </Table>\r\n      </Paper>\r\n    </MainContainer >\r\n  )\r\n};\r\n\r\nexport default Announcements;","import React, { useContext, useState } from \"react\";\r\nimport {\r\n  Chip,\r\n  IconButton,\r\n  List,\r\n  ListItem,\r\n  ListItemSecondaryAction,\r\n  ListItemText,\r\n  makeStyles,\r\n} from \"@material-ui/core\";\r\n\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport { useDate } from \"../../hooks/useDate\";\r\n\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\n\r\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\r\nimport api from \"../../services/api\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainContainer: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    position: \"relative\",\r\n    flex: 1,\r\n    height: \"calc(100% - 58px)\",\r\n    overflow: \"hidden\",\r\n    borderRadius: 0,\r\n    backgroundColor: theme.palette.boxlist, //DARK MODE PLW DESIGN//\r\n  },\r\n  chatList: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    position: \"relative\",\r\n    flex: 1,\r\n    overflowY: \"scroll\",\r\n    ...theme.scrollbarStyles,\r\n  },\r\n  listItem: {\r\n    cursor: \"pointer\",\r\n  },\r\n}));\r\n\r\nexport default function ChatList({\r\n  chats,\r\n  handleSelectChat,\r\n  handleDeleteChat,\r\n  handleEditChat,\r\n  pageInfo,\r\n  loading,\r\n}) {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  const { user } = useContext(AuthContext);\r\n  const { datetimeToClient } = useDate();\r\n\r\n  const [confirmationModal, setConfirmModalOpen] = useState(false);\r\n  const [selectedChat, setSelectedChat] = useState({});\r\n\r\n  const { id } = useParams();\r\n\r\n  const goToMessages = async (chat) => {\r\n    if (unreadMessages(chat) > 0) {\r\n      try {\r\n        await api.post(`/chats/${chat.id}/read`, { userId: user.id });\r\n      } catch (err) {}\r\n    }\r\n\r\n    if (id !== chat.uuid) {\r\n      history.push(`/chats/${chat.uuid}`);\r\n      handleSelectChat(chat);\r\n    }\r\n  };\r\n\r\n  const handleDelete = () => {\r\n    handleDeleteChat(selectedChat);\r\n  };\r\n\r\n  const unreadMessages = (chat) => {\r\n    const currentUser = chat.users.find((u) => u.userId === user.id);\r\n    return currentUser.unreads;\r\n  };\r\n\r\n  const getPrimaryText = (chat) => {\r\n    const mainText = chat.title;\r\n    const unreads = unreadMessages(chat);\r\n    return (\r\n      <>\r\n        {mainText}\r\n        {unreads > 0 && (\r\n          <Chip\r\n            size=\"small\"\r\n            style={{ marginLeft: 5 }}\r\n            label={unreads}\r\n            color=\"secondary\"\r\n          />\r\n        )}\r\n      </>\r\n    );\r\n  };\r\n\r\n  const getSecondaryText = (chat) => {\r\n    return chat.lastMessage !== \"\"\r\n      ? `${datetimeToClient(chat.updatedAt)}: ${chat.lastMessage}`\r\n      : \"\";\r\n  };\r\n\r\n  const getItemStyle = (chat) => {\r\n    return {\r\n      borderLeft: chat.uuid === id ? \"6px solid #002d6e\" : null,\r\n      backgroundColor: chat.uuid === id ? \"theme.palette.chatlist\" : null,\r\n    };\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <ConfirmationModal\r\n        title={\"Excluir Conversa\"}\r\n        open={confirmationModal}\r\n        onClose={setConfirmModalOpen}\r\n        onConfirm={handleDelete}\r\n      >\r\n        Esta ação não pode ser revertida, confirmar?\r\n      </ConfirmationModal>\r\n      <div className={classes.mainContainer}>\r\n        <div className={classes.chatList}>\r\n          <List>\r\n            {Array.isArray(chats) &&\r\n              chats.length > 0 &&\r\n              chats.map((chat, key) => (\r\n                <ListItem\r\n                  onClick={() => goToMessages(chat)}\r\n                  key={key}\r\n                  className={classes.listItem}\r\n                  style={getItemStyle(chat)}\r\n                  button\r\n                >\r\n                  <ListItemText\r\n                    primary={getPrimaryText(chat)}\r\n                    secondary={getSecondaryText(chat)}\r\n                  />\r\n                  {chat.ownerId === user.id && (\r\n                    <ListItemSecondaryAction>\r\n                      <IconButton\r\n                        onClick={() => {\r\n                          goToMessages(chat).then(() => {\r\n                            handleEditChat(chat);\r\n                          });\r\n                        }}\r\n                        edge=\"end\"\r\n                        aria-label=\"delete\"\r\n                        size=\"small\"\r\n                        style={{ marginRight: 5 }}\r\n                      >\r\n                        <EditIcon />\r\n                      </IconButton>\r\n                      <IconButton\r\n                        onClick={() => {\r\n                          setSelectedChat(chat);\r\n                          setConfirmModalOpen(true);\r\n                        }}\r\n                        edge=\"end\"\r\n                        aria-label=\"delete\"\r\n                        size=\"small\"\r\n                      >\r\n                        <DeleteIcon />\r\n                      </IconButton>\r\n                    </ListItemSecondaryAction>\r\n                  )}\r\n                </ListItem>\r\n              ))}\r\n          </List>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n","import React, { useContext, useEffect, useRef, useState } from \"react\";\r\nimport {\r\n  Box,\r\n  FormControl,\r\n  IconButton,\r\n  Input,\r\n  InputAdornment,\r\n  makeStyles,\r\n  Paper,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport SendIcon from \"@material-ui/icons/Send\";\r\n\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport { useDate } from \"../../hooks/useDate\";\r\nimport api from \"../../services/api\";\r\nimport { green } from \"@material-ui/core/colors\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainContainer: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    position: \"relative\",\r\n    flex: 1,\r\n    overflow: \"hidden\",\r\n    borderRadius: 0,\r\n    height: \"100%\",\r\n    borderLeft: \"1px solid rgba(0, 0, 0, 0.12)\",\r\n  },\r\n  messageList: {\r\n    position: \"relative\",\r\n    overflowY: \"auto\",\r\n    height: \"100%\",\r\n    ...theme.scrollbarStyles,\r\n    backgroundColor: theme.palette.chatlist, //DARK MODE PLW DESIGN//\r\n  },\r\n  inputArea: {\r\n    position: \"relative\",\r\n    height: \"auto\",\r\n  },\r\n  input: {\r\n    padding: \"20px\",\r\n  },\r\n  buttonSend: {\r\n    margin: theme.spacing(1),\r\n  },\r\n  boxLeft: {\r\n    padding: \"10px 10px 5px\",\r\n    margin: \"10px\",\r\n    position: \"relative\",\r\n    backgroundColor: \"blue\",\r\n    maxWidth: 300,\r\n    borderRadius: 10,\r\n    borderBottomLeftRadius: 0,\r\n    border: \"1px solid rgba(0, 0, 0, 0.12)\",\r\n  },\r\n  boxRight: {\r\n    padding: \"10px 10px 5px\",\r\n    margin: \"10px 10px 10px auto\",\r\n    position: \"relative\",\r\n    backgroundColor: \"green\", //DARK MODE PLW DESIGN//\r\n    textAlign: \"right\",\r\n    maxWidth: 300,\r\n    borderRadius: 10,\r\n    borderBottomRightRadius: 0,\r\n    border: \"1px solid rgba(0, 0, 0, 0.12)\",\r\n  },\r\n}));\r\n\r\nexport default function ChatMessages({\r\n  chat,\r\n  messages,\r\n  handleSendMessage,\r\n  handleLoadMore,\r\n  scrollToBottomRef,\r\n  pageInfo,\r\n  loading,\r\n}) {\r\n  const classes = useStyles();\r\n  const { user } = useContext(AuthContext);\r\n  const { datetimeToClient } = useDate();\r\n  const baseRef = useRef();\r\n\r\n  const [contentMessage, setContentMessage] = useState(\"\");\r\n\r\n  const scrollToBottom = () => {\r\n    if (baseRef.current) {\r\n      baseRef.current.scrollIntoView({});\r\n    }\r\n  };\r\n\r\n  const unreadMessages = (chat) => {\r\n    if (chat !== undefined) {\r\n      const currentUser = chat.users.find((u) => u.userId === user.id);\r\n      return currentUser.unreads > 0;\r\n    }\r\n    return 0;\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (unreadMessages(chat) > 0) {\r\n      try {\r\n        api.post(`/chats/${chat.id}/read`, { userId: user.id });\r\n      } catch (err) {}\r\n    }\r\n    scrollToBottomRef.current = scrollToBottom;\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  const handleScroll = (e) => {\r\n    const { scrollTop } = e.currentTarget;\r\n    if (!pageInfo.hasMore || loading) return;\r\n    if (scrollTop < 600) {\r\n      handleLoadMore();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Paper className={classes.mainContainer}>\r\n      <div onScroll={handleScroll} className={classes.messageList}>\r\n        {Array.isArray(messages) &&\r\n          messages.map((item, key) => {\r\n            if (item.senderId === user.id) {\r\n              return (\r\n                <Box key={key} className={classes.boxRight}>\r\n                  <Typography variant=\"subtitle2\">\r\n                    {item.sender.name}\r\n                  </Typography>\r\n                  {item.message}\r\n                  <Typography variant=\"caption\" display=\"block\">\r\n                    {datetimeToClient(item.createdAt)}\r\n                  </Typography>\r\n                </Box>\r\n              );\r\n            } else {\r\n              return (\r\n                <Box key={key} className={classes.boxLeft}>\r\n                  <Typography variant=\"subtitle2\">\r\n                    {item.sender.name}\r\n                  </Typography>\r\n                  {item.message}\r\n                  <Typography variant=\"caption\" display=\"block\">\r\n                    {datetimeToClient(item.createdAt)}\r\n                  </Typography>\r\n                </Box>\r\n              );\r\n            }\r\n          })}\r\n        <div ref={baseRef}></div>\r\n      </div>\r\n      <div className={classes.inputArea}>\r\n        <FormControl variant=\"outlined\" fullWidth>\r\n          <Input\r\n            multiline\r\n            value={contentMessage}\r\n            onKeyUp={(e) => {\r\n              if (e.key === \"Enter\" && contentMessage.trim() !== \"\") {\r\n                handleSendMessage(contentMessage);\r\n                setContentMessage(\"\");\r\n              }\r\n            }}\r\n            onChange={(e) => setContentMessage(e.target.value)}\r\n            className={classes.input}\r\n            endAdornment={\r\n              <InputAdornment position=\"end\">\r\n                <IconButton\r\n                  onClick={() => {\r\n                    if (contentMessage.trim() !== \"\") {\r\n                      handleSendMessage(contentMessage);\r\n                      setContentMessage(\"\");\r\n                    }\r\n                  }}\r\n                  className={classes.buttonSend}\r\n                >\r\n                  <SendIcon />\r\n                </IconButton>\r\n              </InputAdornment>\r\n            }\r\n          />\r\n        </FormControl>\r\n      </div>\r\n    </Paper>\r\n  );\r\n}\r\n","import React, { useContext, useEffect, useRef, useState } from \"react\";\r\n\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\n\r\nimport {\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n  Grid,\r\n  makeStyles,\r\n  Paper,\r\n  Tab,\r\n  Tabs,\r\n  TextField,\r\n} from \"@material-ui/core\";\r\nimport ChatList from \"./ChatList\";\r\nimport ChatMessages from \"./ChatMessages\";\r\nimport { UsersFilter } from \"../../components/UsersFilter\";\r\nimport api from \"../../services/api\";\r\nimport { SocketContext } from \"../../context/Socket/SocketContext\";\r\n\r\nimport { has, isObject } from \"lodash\";\r\n\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport withWidth, { isWidthUp } from \"@material-ui/core/withWidth\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainContainer: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    position: \"relative\",\r\n    flex: 1,\r\n    padding: theme.spacing(2),\r\n    height: `calc(100% - 48px)`,\r\n    overflowY: \"hidden\",\r\n    border: \"1px solid rgba(0, 0, 0, 0.12)\",\r\n  },\r\n  gridContainer: {\r\n    flex: 1,\r\n    height: \"100%\",\r\n    border: \"1px solid rgba(0, 0, 0, 0.12)\",\r\n    backgroundColor: theme.palette.dark,\r\n  },\r\n  gridItem: {\r\n    height: \"100%\",\r\n  },\r\n  gridItemTab: {\r\n    height: \"92%\",\r\n    width: \"100%\",\r\n  },\r\n  btnContainer: {\r\n    textAlign: \"right\",\r\n    padding: 10,\r\n  },\r\n}));\r\n\r\nexport function ChatModal({\r\n  open,\r\n  chat,\r\n  type,\r\n  handleClose,\r\n  handleLoadNewChat,\r\n}) {\r\n  const [users, setUsers] = useState([]);\r\n  const [title, setTitle] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    setTitle(\"\");\r\n    setUsers([]);\r\n    if (type === \"edit\") {\r\n      const userList = chat.users.map((u) => ({\r\n        id: u.user.id,\r\n        name: u.user.name,\r\n      }));\r\n      setUsers(userList);\r\n      setTitle(chat.title);\r\n    }\r\n  }, [chat, open, type]);\r\n\r\n  const handleSave = async () => {\r\n    try {\r\n      if (!title) {\r\n        alert(\"Por favor, preencha o título da conversa.\");\r\n        return;\r\n      }\r\n\r\n      if (!users || users.length === 0) {\r\n        alert(\"Por favor, selecione pelo menos um usuário.\");\r\n        return;\r\n      }\r\n\r\n      if (type === \"edit\") {\r\n        await api.put(`/chats/${chat.id}`, {\r\n          users,\r\n          title,\r\n        });\r\n      } else {\r\n        const { data } = await api.post(\"/chats\", {\r\n          users,\r\n          title,\r\n        });\r\n        handleLoadNewChat(data);\r\n      }\r\n      handleClose();\r\n    } catch (err) {}\r\n  };  \r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={handleClose}\r\n      aria-labelledby=\"alert-dialog-title\"\r\n      aria-describedby=\"alert-dialog-description\"\r\n    >\r\n      <DialogTitle id=\"alert-dialog-title\">Conversa</DialogTitle>\r\n      <DialogContent>\r\n        <Grid spacing={2} container>\r\n          <Grid xs={12} style={{ padding: 18 }} item>\r\n            <TextField\r\n              label=\"Título\"\r\n              placeholder=\"Título\"\r\n              value={title}\r\n              onChange={(e) => setTitle(e.target.value)}\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n              fullWidth\r\n            />\r\n          </Grid>\r\n          <Grid xs={12} item>\r\n            <UsersFilter\r\n              onFiltered={(users) => setUsers(users)}\r\n              initialUsers={users}\r\n            />\r\n          </Grid>\r\n        </Grid>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={handleClose} color=\"primary\">\r\n          Fechar\r\n        </Button>\r\n        <Button onClick={handleSave} color=\"primary\" variant=\"contained\">\r\n          Salvar\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nfunction Chat(props) {\r\n  const classes = useStyles();\r\n  const { user } = useContext(AuthContext);\r\n  const history = useHistory();\r\n\r\n  const [showDialog, setShowDialog] = useState(false);\r\n  const [dialogType, setDialogType] = useState(\"new\");\r\n  const [currentChat, setCurrentChat] = useState({});\r\n  const [chats, setChats] = useState([]);\r\n  const [chatsPageInfo, setChatsPageInfo] = useState({ hasMore: false });\r\n  const [messages, setMessages] = useState([]);\r\n  const [messagesPageInfo, setMessagesPageInfo] = useState({ hasMore: false });\r\n  const [messagesPage, setMessagesPage] = useState(1);\r\n  const [loading, setLoading] = useState(false);\r\n  const [tab, setTab] = useState(0);\r\n  const isMounted = useRef(true);\r\n  const scrollToBottomRef = useRef();\r\n  const { id } = useParams();\r\n\r\n  const socketManager = useContext(SocketContext);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      isMounted.current = false;\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (isMounted.current) {\r\n      findChats().then((data) => {\r\n        const { records } = data;\r\n        if (records.length > 0) {\r\n          setChats(records);\r\n          setChatsPageInfo(data);\r\n\r\n          if (id && records.length) {\r\n            const chat = records.find((r) => r.uuid === id);\r\n            selectChat(chat);\r\n          }\r\n        }\r\n      });\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (isObject(currentChat) && has(currentChat, \"id\")) {\r\n      findMessages(currentChat.id).then(() => {\r\n        if (typeof scrollToBottomRef.current === \"function\") {\r\n          setTimeout(() => {\r\n            scrollToBottomRef.current();\r\n          }, 300);\r\n        }\r\n      });\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [currentChat]);\r\n\r\n  useEffect(() => {\r\n    const companyId = localStorage.getItem(\"companyId\");\r\n    const socket = socketManager.getSocket(companyId);\r\n\r\n    socket.on(`company-${companyId}-chat-user-${user.id}`, (data) => {\r\n      if (data.action === \"create\") {\r\n        setChats((prev) => [data.record, ...prev]);\r\n      }\r\n      if (data.action === \"update\") {\r\n        const changedChats = chats.map((chat) => {\r\n          if (chat.id === data.record.id) {\r\n            setCurrentChat(data.record);\r\n            return {\r\n              ...data.record,\r\n            };\r\n          }\r\n          return chat;\r\n        });\r\n        setChats(changedChats);\r\n      }\r\n    });\r\n\r\n    socket.on(`company-${companyId}-chat`, (data) => {\r\n      if (data.action === \"delete\") {\r\n        const filteredChats = chats.filter((c) => c.id !== +data.id);\r\n        setChats(filteredChats);\r\n        setMessages([]);\r\n        setMessagesPage(1);\r\n        setMessagesPageInfo({ hasMore: false });\r\n        setCurrentChat({});\r\n        history.push(\"/chats\");\r\n      }\r\n    });\r\n\r\n    if (isObject(currentChat) && has(currentChat, \"id\")) {\r\n      socket.on(`company-${companyId}-chat-${currentChat.id}`, (data) => {\r\n        if (data.action === \"new-message\") {\r\n          setMessages((prev) => [...prev, data.newMessage]);\r\n          const changedChats = chats.map((chat) => {\r\n            if (chat.id === data.newMessage.chatId) {\r\n              return {\r\n                ...data.chat,\r\n              };\r\n            }\r\n            return chat;\r\n          });\r\n          setChats(changedChats);\r\n          scrollToBottomRef.current();\r\n        }\r\n\r\n        if (data.action === \"update\") {\r\n          const changedChats = chats.map((chat) => {\r\n            if (chat.id === data.chat.id) {\r\n              return {\r\n                ...data.chat,\r\n              };\r\n            }\r\n            return chat;\r\n          });\r\n          setChats(changedChats);\r\n          scrollToBottomRef.current();\r\n        }\r\n      });\r\n    }\r\n\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [currentChat, socketManager]);\r\n\r\n  const selectChat = (chat) => {\r\n    try {\r\n      setMessages([]);\r\n      setMessagesPage(1);\r\n      setCurrentChat(chat);\r\n      setTab(1);\r\n    } catch (err) {}\r\n  };\r\n\r\n  const sendMessage = async (contentMessage) => {\r\n    setLoading(true);\r\n    try {\r\n      await api.post(`/chats/${currentChat.id}/messages`, {\r\n        message: contentMessage,\r\n      });\r\n    } catch (err) {}\r\n    setLoading(false);\r\n  };\r\n\r\n  const deleteChat = async (chat) => {\r\n    try {\r\n      await api.delete(`/chats/${chat.id}`);\r\n    } catch (err) {}\r\n  };\r\n\r\n  const findMessages = async (chatId) => {\r\n    setLoading(true);\r\n    try {\r\n      const { data } = await api.get(\r\n        `/chats/${chatId}/messages?pageNumber=${messagesPage}`\r\n      );\r\n      setMessagesPage((prev) => prev + 1);\r\n      setMessagesPageInfo(data);\r\n      setMessages((prev) => [...data.records, ...prev]);\r\n    } catch (err) {}\r\n    setLoading(false);\r\n  };\r\n\r\n  const loadMoreMessages = async () => {\r\n    if (!loading) {\r\n      findMessages(currentChat.id);\r\n    }\r\n  };\r\n\r\n  const findChats = async () => {\r\n    try {\r\n      const { data } = await api.get(\"/chats\");\r\n      return data;\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  const renderGrid = () => {\r\n    return (\r\n      <Grid className={classes.gridContainer} container>\r\n        <Grid className={classes.gridItem} md={3} item>\r\n          \r\n            <div className={classes.btnContainer}>\r\n              <Button\r\n                onClick={() => {\r\n                  setDialogType(\"new\");\r\n                  setShowDialog(true);\r\n                }}\r\n                color=\"primary\"\r\n                variant=\"contained\"\r\n              >\r\n                Nova\r\n              </Button>\r\n            </div>\r\n          \r\n          <ChatList\r\n            chats={chats}\r\n            pageInfo={chatsPageInfo}\r\n            loading={loading}\r\n            handleSelectChat={(chat) => selectChat(chat)}\r\n            handleDeleteChat={(chat) => deleteChat(chat)}\r\n            handleEditChat={() => {\r\n              setDialogType(\"edit\");\r\n              setShowDialog(true);\r\n            }}\r\n          />\r\n        </Grid>\r\n        <Grid className={classes.gridItem} md={9} item>\r\n          {isObject(currentChat) && has(currentChat, \"id\") && (\r\n            <ChatMessages\r\n              chat={currentChat}\r\n              scrollToBottomRef={scrollToBottomRef}\r\n              pageInfo={messagesPageInfo}\r\n              messages={messages}\r\n              loading={loading}\r\n              handleSendMessage={sendMessage}\r\n              handleLoadMore={loadMoreMessages}\r\n            />\r\n          )}\r\n        </Grid>\r\n      </Grid>\r\n    );\r\n  };\r\n\r\n  const renderTab = () => {\r\n    return (\r\n      <Grid className={classes.gridContainer} container>\r\n        <Grid md={12} item>\r\n          <Tabs\r\n            value={tab}\r\n            indicatorColor=\"primary\"\r\n            textColor=\"primary\"\r\n            onChange={(e, v) => setTab(v)}\r\n            aria-label=\"disabled tabs example\"\r\n          >\r\n            <Tab label=\"Chats\" />\r\n            <Tab label=\"Mensagens\" />\r\n          </Tabs>\r\n        </Grid>\r\n        {tab === 0 && (\r\n          <Grid className={classes.gridItemTab} md={12} item>\r\n            <div className={classes.btnContainer}>\r\n              <Button\r\n                onClick={() => setShowDialog(true)}\r\n                color=\"primary\"\r\n                variant=\"contained\"\r\n              >\r\n                Novo\r\n              </Button>\r\n            </div>\r\n            <ChatList\r\n              chats={chats}\r\n              pageInfo={chatsPageInfo}\r\n              loading={loading}\r\n              handleSelectChat={(chat) => selectChat(chat)}\r\n              handleDeleteChat={(chat) => deleteChat(chat)}\r\n            />\r\n          </Grid>\r\n        )}\r\n        {tab === 1 && (\r\n          <Grid className={classes.gridItemTab} md={12} item>\r\n            {isObject(currentChat) && has(currentChat, \"id\") && (\r\n              <ChatMessages\r\n                scrollToBottomRef={scrollToBottomRef}\r\n                pageInfo={messagesPageInfo}\r\n                messages={messages}\r\n                loading={loading}\r\n                handleSendMessage={sendMessage}\r\n                handleLoadMore={loadMoreMessages}\r\n              />\r\n            )}\r\n          </Grid>\r\n        )}\r\n      </Grid>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <ChatModal\r\n        type={dialogType}\r\n        open={showDialog}\r\n        chat={currentChat}\r\n        handleLoadNewChat={(data) => {\r\n          setMessages([]);\r\n          setMessagesPage(1);\r\n          setCurrentChat(data);\r\n          setTab(1);\r\n          history.push(`/chats/${data.uuid}`);\r\n        }}\r\n        handleClose={() => setShowDialog(false)}\r\n      />\r\n      <Paper className={classes.mainContainer}>\r\n        {isWidthUp(\"md\", props.width) ? renderGrid() : renderTab()}\r\n      </Paper>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default withWidth()(Chat);\r\n","import React, { useState, useContext } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Grid from '@material-ui/core/Grid';\r\nimport TextField from '@material-ui/core/TextField';\r\n\r\nimport SubscriptionModal from \"../../components/SubscriptionModal\";\r\nimport MainHeader from \"../../components/MainHeader\";\r\nimport Title from \"../../components/Title\";\r\nimport MainContainer from \"../../components/MainContainer\";\r\n\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainPaper: {\r\n    flex: 1,\r\n    padding: theme.spacing(1),\r\n    overflowY: \"scroll\",\r\n    ...theme.scrollbarStyles,\r\n  },\r\n}));\r\n\r\nconst _formatDate = (date) => {\r\n  const now = new Date();\r\n  const past = new Date(date);\r\n  const diff = Math.abs(now.getTime() - past.getTime());\r\n  const days = Math.ceil(diff / (1000 * 60 * 60 * 24));\r\n\r\n  return days;\r\n}\r\n\r\nconst Contacts = () => {\r\n  const classes = useStyles();\r\n  const { user } = useContext(AuthContext);\r\n\r\n  const [loading,] = useState(false);\r\n  const [, setPageNumber] = useState(1);\r\n  const [selectedContactId, setSelectedContactId] = useState(null);\r\n  const [contactModalOpen, setContactModalOpen] = useState(false);\r\n  const [hasMore,] = useState(false);\r\n\r\n\r\n  const handleOpenContactModal = () => {\r\n    setSelectedContactId(null);\r\n    setContactModalOpen(true);\r\n  };\r\n\r\n  const handleCloseContactModal = () => {\r\n    setSelectedContactId(null);\r\n    setContactModalOpen(false);\r\n  };\r\n\r\n  const loadMore = () => {\r\n    setPageNumber((prevState) => prevState + 1);\r\n  };\r\n\r\n  const handleScroll = (e) => {\r\n    if (!hasMore || loading) return;\r\n    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\r\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\r\n      loadMore();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <MainContainer className={classes.mainContainer}>\r\n      <SubscriptionModal\r\n        open={contactModalOpen}\r\n        onClose={handleCloseContactModal}\r\n        aria-labelledby=\"form-dialog-title\"\r\n        contactId={selectedContactId}\r\n      ></SubscriptionModal>\r\n\r\n      <MainHeader>\r\n        <Title>Assinatura</Title>\r\n      </MainHeader>\r\n      <Grid item xs={12} sm={4}>\r\n        <Paper\r\n          className={classes.mainPaper}\r\n          variant=\"outlined\"\r\n          onScroll={handleScroll}\r\n        >\r\n\r\n          <div>\r\n            <TextField\r\n              id=\"outlined-full-width\"\r\n              label=\"Período de teste\"\r\n              defaultValue={`Seu período de teste termina em ${_formatDate(user?.company?.trialExpiration)} dias!`}\r\n              fullWidth\r\n              margin=\"normal\"\r\n              InputLabelProps={{\r\n                shrink: true,\r\n              }}\r\n              InputProps={{\r\n                readOnly: true,\r\n              }}\r\n              variant=\"outlined\"\r\n            />\r\n\r\n          </div>\r\n\r\n          <div>\r\n            <TextField\r\n              id=\"outlined-full-width\"\r\n              label=\"Email de cobrança\"\r\n              defaultValue={user?.company?.email}\r\n              fullWidth\r\n              margin=\"normal\"\r\n              InputLabelProps={{\r\n                shrink: true,\r\n              }}\r\n              InputProps={{\r\n                readOnly: true,\r\n              }}\r\n              variant=\"outlined\"\r\n            />\r\n\r\n          </div>\r\n\r\n          <div>\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={handleOpenContactModal}\r\n              fullWidth\r\n            >\r\n              Assine Agora!\r\n            </Button>\r\n          </div>\r\n\r\n        </Paper>\r\n      </Grid>\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nexport default Contacts;\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\n\r\nimport * as Yup from \"yup\";\r\nimport {\r\n    Formik,\r\n    Form,\r\n    Field,\r\n    FieldArray\r\n} from \"formik\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport {\r\n    Box,\r\n    Button,\r\n    CircularProgress,\r\n    Dialog,\r\n    DialogActions,\r\n    DialogContent,\r\n    DialogTitle,\r\n    Divider,\r\n    Grid,\r\n    makeStyles,\r\n    TextField\r\n} from \"@material-ui/core\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\r\nimport AttachFileIcon from \"@material-ui/icons/AttachFile\";\r\n\r\nimport { green } from \"@material-ui/core/colors\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nimport api from \"../../services/api\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        display: \"flex\",\r\n        flexWrap: \"wrap\",\r\n        gap: 4\r\n    },\r\n    multFieldLine: {\r\n        display: \"flex\",\r\n        \"& > *:not(:last-child)\": {\r\n            marginRight: theme.spacing(1),\r\n        },\r\n    },\r\n    textField: {\r\n        marginRight: theme.spacing(1),\r\n        flex: 1,\r\n    },\r\n\r\n    extraAttr: {\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n    },\r\n\r\n    btnWrapper: {\r\n        position: \"relative\",\r\n    },\r\n\r\n    buttonProgress: {\r\n        color: green[500],\r\n        position: \"absolute\",\r\n        top: \"50%\",\r\n        left: \"50%\",\r\n        marginTop: -12,\r\n        marginLeft: -12,\r\n    },\r\n    formControl: {\r\n        margin: theme.spacing(1),\r\n        minWidth: 2000,\r\n    },\r\n    colorAdorment: {\r\n        width: 20,\r\n        height: 20,\r\n    },\r\n}));\r\n\r\nconst FileListSchema = Yup.object().shape({\r\n    name: Yup.string()\r\n        .min(3, \"nome muito curto\")\r\n        .required(\"Obrigatório\"),\r\n    message: Yup.string()\r\n        .required(\"Obrigatório\")\r\n});\r\n\r\nconst FilesModal = ({ open, onClose, fileListId, reload }) => {\r\n    const classes = useStyles();\r\n    const { user } = useContext(AuthContext);\r\n    const [ files, setFiles ] = useState([]);\r\n    const [selectedFileNames, setSelectedFileNames] = useState([]);\r\n\r\n\r\n    const initialState = {\r\n        name: \"\",\r\n        message: \"\",\r\n        options: [{ name: \"\", path:\"\", mediaType:\"\" }],\r\n    };\r\n\r\n    const [fileList, setFileList] = useState(initialState);\r\n\r\n    useEffect(() => {\r\n        try {\r\n            (async () => {\r\n                if (!fileListId) return;\r\n\r\n                const { data } = await api.get(`/files/${fileListId}`);\r\n                setFileList(data);\r\n            })()\r\n        } catch (err) {\r\n            toastError(err);\r\n        }\r\n    }, [fileListId, open]);\r\n\r\n    const handleClose = () => {\r\n        setFileList(initialState);\r\n        setFiles([]);\r\n        onClose();\r\n    };\r\n\r\n    const handleSaveFileList = async (values) => {\r\n\r\n        const uploadFiles = async (options, filesOptions, id) => {\r\n                const formData = new FormData();\r\n                formData.append(\"fileId\", id);\r\n                formData.append(\"typeArch\", \"fileList\")\r\n                filesOptions.forEach((fileOption, index) => {\r\n                    if (fileOption.file) {\r\n                        formData.append(\"files\", fileOption.file);\r\n                        formData.append(\"mediaType\", fileOption.file.type)\r\n                        formData.append(\"name\", options[index].name);\r\n                        formData.append(\"id\", options[index].id);\r\n                    }\r\n                });\r\n      \r\n              try {\r\n                const { data } = await api.post(`/files/uploadList/${id}`, formData);\r\n                setFiles([]);\r\n                return data;\r\n              } catch (err) {\r\n                toastError(err);\r\n              }\r\n            return null;\r\n        }\r\n\r\n        const fileData = { ...values, userId: user.id };\r\n        \r\n        try {\r\n            if (fileListId) {\r\n                const { data } = await api.put(`/files/${fileListId}`, fileData)\r\n                if (data.options.length > 0)\r\n\r\n                    uploadFiles(data.options, values.options, fileListId)\r\n            } else {\r\n                const { data } = await api.post(\"/files\", fileData);\r\n                if (data.options.length > 0)\r\n                    uploadFiles(data.options, values.options, data.id)\r\n            }\r\n            toast.success(i18n.t(\"fileModal.success\"));\r\n            if (typeof reload == 'function') {\r\n                reload();\r\n            }            \r\n        } catch (err) {\r\n            toastError(err);\r\n        }\r\n        handleClose();\r\n    };\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <Dialog\r\n                open={open}\r\n                onClose={handleClose}\r\n                maxWidth=\"md\"\r\n                fullWidth\r\n                scroll=\"paper\">\r\n                <DialogTitle id=\"form-dialog-title\">\r\n                    {(fileListId ? `${i18n.t(\"fileModal.title.edit\")}` : `${i18n.t(\"fileModal.title.add\")}`)}\r\n                </DialogTitle>\r\n                <Formik\r\n                    initialValues={fileList}\r\n                    enableReinitialize={true}\r\n                    validationSchema={FileListSchema}\r\n                    onSubmit={(values, actions) => {\r\n                        setTimeout(() => {\r\n                            handleSaveFileList(values);\r\n                            actions.setSubmitting(false);\r\n                        }, 400);\r\n                    }}\r\n                >\r\n                    {({ touched, errors, isSubmitting, values }) => (\r\n                        <Form>\r\n                            <DialogContent dividers>\r\n                                <div className={classes.multFieldLine}>\r\n                                    <Field\r\n                                        as={TextField}\r\n                                        label={i18n.t(\"fileModal.form.name\")}\r\n                                        name=\"name\"\r\n                                        error={touched.name && Boolean(errors.name)}\r\n                                        helperText={touched.name && errors.name}\r\n                                        variant=\"outlined\"\r\n                                        margin=\"dense\"\r\n                                        fullWidth\r\n                                    />\r\n                                </div>\r\n                                <br />\r\n                                <div className={classes.multFieldLine}>\r\n                                    <Field\r\n                                        as={TextField}\r\n                                        label={i18n.t(\"fileModal.form.message\")}\r\n                                        type=\"message\"\r\n                                        multiline\r\n                                        minRows={5}\r\n                                        fullWidth\r\n                                        name=\"message\"\r\n                                        error={\r\n                                            touched.message && Boolean(errors.message)\r\n                                        }\r\n                                        helperText={\r\n                                            touched.message && errors.message\r\n                                        }\r\n                                        variant=\"outlined\"\r\n                                        margin=\"dense\"\r\n                                    />\r\n                                </div>\r\n                                <Typography\r\n                                    style={{ marginBottom: 8, marginTop: 12 }}\r\n                                    variant=\"subtitle1\"\r\n                                >\r\n                                    {i18n.t(\"fileModal.form.fileOptions\")}\r\n                                </Typography>\r\n\r\n                                <FieldArray name=\"options\">\r\n                                    {({ push, remove }) => (\r\n                                        <>\r\n                                            {values.options &&\r\n                                                values.options.length > 0 &&\r\n                                                values.options.map((info, index) => (    \r\n                                                    <div\r\n                                                        className={classes.extraAttr}\r\n                                                        key={`${index}-info`}\r\n                                                    >\r\n                                                        <Grid container  spacing={0}>\r\n                                                            <Grid xs={6} md={10} item> \r\n                                                                <Field\r\n                                                                    as={TextField}\r\n                                                                    label={i18n.t(\"fileModal.form.extraName\")}\r\n                                                                    name={`options[${index}].name`}\r\n                                                                    variant=\"outlined\"\r\n                                                                    margin=\"dense\"\r\n                                                                    multiline\r\n                                                                    fullWidth\r\n                                                                    minRows={2}\r\n                                                                    className={classes.textField}\r\n                                                                />\r\n                                                            </Grid>     \r\n                                                            <Grid xs={2} md={2} item style={{ display: 'flex', alignItems: 'center', justifyContent: 'flex-end' }}>\r\n                                                                <input\r\n                                                                    type=\"file\"\r\n                                                                    onChange={(e) => {\r\n                                                                        const selectedFile = e.target.files[0];\r\n                                                                        const updatedOptions = [...values.options];                                                                \r\n                                                                        updatedOptions[index].file = selectedFile;\r\n                                                                       \r\n                                                                        setFiles('options', updatedOptions);\r\n\r\n                                                                        // Atualize a lista selectedFileNames para o campo específico\r\n                                                                        const updatedFileNames = [...selectedFileNames];\r\n                                                                        updatedFileNames[index] = selectedFile ? selectedFile.name : '';\r\n                                                                        setSelectedFileNames(updatedFileNames);\r\n                                                                    }}\r\n                                                                    style={{ display: 'none' }}\r\n                                                                    name={`options[${index}].file`}\r\n                                                                    id={`file-upload-${index}`}\r\n                                                                />\r\n                                                                <label htmlFor={`file-upload-${index}`}>\r\n                                                                    <IconButton component=\"span\">\r\n                                                                        <AttachFileIcon />\r\n                                                                    </IconButton>\r\n                                                                </label>\r\n                                                                <IconButton\r\n                                                                    size=\"small\"\r\n                                                                    onClick={() => remove(index)}\r\n                                                                >\r\n                                                                    <DeleteOutlineIcon />\r\n                                                                </IconButton>    \r\n                                                            </Grid>\r\n                                                            <Grid xs={12} md={12} item>\r\n                                                                {info.path? info.path : selectedFileNames[index]}                               \r\n                                                            </Grid> \r\n                                                        </Grid>                                                    \r\n                                                </div>                     \r\n                                                                                           \r\n                                                ))}\r\n                                            <div className={classes.extraAttr}>\r\n                                                <Button\r\n                                                    style={{ flex: 1, marginTop: 8 }}\r\n                                                    variant=\"outlined\"\r\n                                                    color=\"primary\"\r\n                                                    onClick={() => {push({ name: \"\", path: \"\"});\r\n                                                    setSelectedFileNames([...selectedFileNames, \"\"]);\r\n                                                }}\r\n                                                >\r\n                                                    {`+ ${i18n.t(\"fileModal.buttons.fileOptions\")}`}\r\n                                                </Button>\r\n                                            </div>\r\n                                        </>\r\n                                    )}\r\n                                </FieldArray>\r\n                            </DialogContent>\r\n                            <DialogActions>\r\n                                <Button\r\n                                    onClick={handleClose}\r\n                                    color=\"secondary\"\r\n                                    disabled={isSubmitting}\r\n                                    variant=\"outlined\"\r\n                                >\r\n                                    {i18n.t(\"fileModal.buttons.cancel\")}\r\n                                </Button>\r\n                                <Button\r\n                                    type=\"submit\"\r\n                                    color=\"primary\"\r\n                                    disabled={isSubmitting}\r\n                                    variant=\"contained\"\r\n                                    className={classes.btnWrapper}\r\n                                >\r\n                                    {fileListId\r\n                                        ? `${i18n.t(\"fileModal.buttons.okEdit\")}`\r\n                                        : `${i18n.t(\"fileModal.buttons.okAdd\")}`}\r\n                                    {isSubmitting && (\r\n                                        <CircularProgress\r\n                                            size={24}\r\n                                            className={classes.buttonProgress}\r\n                                        />\r\n                                    )}\r\n                                </Button>\r\n                            </DialogActions>\r\n                        </Form>\r\n                    )}\r\n                </Formik>\r\n            </Dialog>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default FilesModal;","import React, {\r\n    useState,\r\n    useEffect,\r\n    useReducer,\r\n    useCallback,\r\n    useContext,\r\n} from \"react\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\n\r\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\n\r\nimport MainContainer from \"../../components/MainContainer\";\r\nimport MainHeader from \"../../components/MainHeader\";\r\nimport MainHeaderButtonsWrapper from \"../../components/MainHeaderButtonsWrapper\";\r\nimport Title from \"../../components/Title\";\r\n\r\nimport api from \"../../services/api\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport TableRowSkeleton from \"../../components/TableRowSkeleton\";\r\nimport FileModal from \"../../components/FileModal\";\r\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { SocketContext } from \"../../context/Socket/SocketContext\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\n\r\nconst reducer = (state, action) => {\r\n    if (action.type === \"LOAD_FILES\") {\r\n        const files = action.payload;\r\n        const newFiles = [];\r\n\r\n        files.forEach((fileList) => {\r\n            const fileListIndex = state.findIndex((s) => s.id === fileList.id);\r\n            if (fileListIndex !== -1) {\r\n                state[fileListIndex] = fileList;\r\n            } else {\r\n                newFiles.push(fileList);\r\n            }\r\n        });\r\n\r\n        return [...state, ...newFiles];\r\n    }\r\n\r\n    if (action.type === \"UPDATE_FILES\") {\r\n        const fileList = action.payload;\r\n        const fileListIndex = state.findIndex((s) => s.id === fileList.id);\r\n\r\n        if (fileListIndex !== -1) {\r\n            state[fileListIndex] = fileList;\r\n            return [...state];\r\n        } else {\r\n            return [fileList, ...state];\r\n        }\r\n    }\r\n\r\n    if (action.type === \"DELETE_TAG\") {\r\n        const fileListId = action.payload;\r\n\r\n        const fileListIndex = state.findIndex((s) => s.id === fileListId);\r\n        if (fileListIndex !== -1) {\r\n            state.splice(fileListIndex, 1);\r\n        }\r\n        return [...state];\r\n    }\r\n\r\n    if (action.type === \"RESET\") {\r\n        return [];\r\n    }\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    mainPaper: {\r\n        flex: 1,\r\n        padding: theme.spacing(1),\r\n        overflowY: \"scroll\",\r\n        ...theme.scrollbarStyles,\r\n    },\r\n}));\r\n\r\nconst FileLists = () => {\r\n    const classes = useStyles();\r\n\r\n    const { user } = useContext(AuthContext);\r\n\r\n    const [loading, setLoading] = useState(false);\r\n    const [pageNumber, setPageNumber] = useState(1);\r\n    const [hasMore, setHasMore] = useState(false);\r\n    const [selectedFileList, setSelectedFileList] = useState(null);\r\n    const [deletingFileList, setDeletingFileList] = useState(null);\r\n    const [confirmModalOpen, setConfirmModalOpen] = useState(false);\r\n    const [searchParam, setSearchParam] = useState(\"\");\r\n    const [files, dispatch] = useReducer(reducer, []);\r\n    const [fileListModalOpen, setFileListModalOpen] = useState(false);\r\n\r\n    const fetchFileLists = useCallback(async () => {\r\n        try {\r\n            const { data } = await api.get(\"/files/\", {\r\n                params: { searchParam, pageNumber },\r\n            });\r\n            dispatch({ type: \"LOAD_FILES\", payload: data.files });\r\n            setHasMore(data.hasMore);\r\n            setLoading(false);\r\n        } catch (err) {\r\n            toastError(err);\r\n        }\r\n    }, [searchParam, pageNumber]);\r\n\r\n    const socketManager = useContext(SocketContext);\r\n\r\n    useEffect(() => {\r\n        dispatch({ type: \"RESET\" });\r\n        setPageNumber(1);\r\n    }, [searchParam]);\r\n\r\n    useEffect(() => {\r\n        setLoading(true);\r\n        const delayDebounceFn = setTimeout(() => {\r\n            fetchFileLists();\r\n        }, 500);\r\n        return () => clearTimeout(delayDebounceFn);\r\n    }, [searchParam, pageNumber, fetchFileLists]);\r\n\r\n    useEffect(() => {\r\n        const socket = socketManager.getSocket(user.companyId);\r\n\r\n        socket.on(`company-${user.companyId}-file`, (data) => {\r\n            if (data.action === \"update\" || data.action === \"create\") {\r\n                dispatch({ type: \"UPDATE_FILES\", payload: data.files });\r\n            }\r\n\r\n            if (data.action === \"delete\") {\r\n                dispatch({ type: \"DELETE_USER\", payload: +data.fileId });\r\n            }\r\n        });\r\n\r\n        return () => {\r\n            socket.disconnect();\r\n        };\r\n    }, [socketManager, user]);\r\n\r\n    const handleOpenFileListModal = () => {\r\n        setSelectedFileList(null);\r\n        setFileListModalOpen(true);\r\n    };\r\n\r\n    const handleCloseFileListModal = () => {\r\n        setSelectedFileList(null);\r\n        setFileListModalOpen(false);\r\n    };\r\n\r\n    const handleSearch = (event) => {\r\n        setSearchParam(event.target.value.toLowerCase());\r\n    };\r\n\r\n    const handleEditFileList = (fileList) => {\r\n        setSelectedFileList(fileList);\r\n        setFileListModalOpen(true);\r\n    };\r\n\r\n    const handleDeleteFileList = async (fileListId) => {\r\n        try {\r\n            await api.delete(`/files/${fileListId}`);\r\n            toast.success(i18n.t(\"files.toasts.deleted\"));\r\n        } catch (err) {\r\n            toastError(err);\r\n        }\r\n        setDeletingFileList(null);\r\n        setSearchParam(\"\");\r\n        setPageNumber(1);\r\n\r\n        dispatch({ type: \"RESET\" });\r\n        setPageNumber(1);\r\n        await fetchFileLists();\r\n    };\r\n\r\n    const loadMore = () => {\r\n        setPageNumber((prevState) => prevState + 1);\r\n    };\r\n\r\n    const handleScroll = (e) => {\r\n        if (!hasMore || loading) return;\r\n        const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\r\n        if (scrollHeight - (scrollTop + 100) < clientHeight) {\r\n            loadMore();\r\n        }\r\n    };\r\n\r\n    return (\r\n        <MainContainer>\r\n            <ConfirmationModal\r\n                title={deletingFileList && `${i18n.t(\"files.confirmationModal.deleteTitle\")}`}\r\n                open={confirmModalOpen}\r\n                onClose={setConfirmModalOpen}\r\n                onConfirm={() => handleDeleteFileList(deletingFileList.id)}\r\n            >\r\n                {i18n.t(\"files.confirmationModal.deleteMessage\")}\r\n            </ConfirmationModal>\r\n            <FileModal\r\n                open={fileListModalOpen}\r\n                onClose={handleCloseFileListModal}\r\n                reload={fetchFileLists}\r\n                aria-labelledby=\"form-dialog-title\"\r\n                fileListId={selectedFileList && selectedFileList.id}\r\n            />\r\n            <MainHeader>\r\n                <Title>{i18n.t(\"files.title\")} ({files.length})</Title>\r\n                <MainHeaderButtonsWrapper>\r\n                    <TextField\r\n                        placeholder={i18n.t(\"contacts.searchPlaceholder\")}\r\n                        type=\"search\"\r\n                        value={searchParam}\r\n                        onChange={handleSearch}\r\n                        InputProps={{\r\n                            startAdornment: (\r\n                                <InputAdornment position=\"start\">\r\n                                    <SearchIcon style={{ color: \"gray\" }} />\r\n                                </InputAdornment>\r\n                            ),\r\n                        }}\r\n                    />\r\n                    <Button\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        onClick={handleOpenFileListModal}\r\n                    >\r\n                        {i18n.t(\"files.buttons.add\")}\r\n                    </Button>\r\n                </MainHeaderButtonsWrapper>\r\n            </MainHeader>\r\n            <Paper\r\n                className={classes.mainPaper}\r\n                variant=\"outlined\"\r\n                onScroll={handleScroll}\r\n            >\r\n                <Table size=\"small\">\r\n                    <TableHead>\r\n                        <TableRow>\r\n                            <TableCell align=\"center\">{i18n.t(\"files.table.name\")}</TableCell>\r\n                            <TableCell align=\"center\">\r\n                                {i18n.t(\"files.table.actions\")}\r\n                            </TableCell>\r\n                        </TableRow>\r\n                    </TableHead>\r\n                    <TableBody>\r\n                        <>\r\n                            {files.map((fileList) => (\r\n                                <TableRow key={fileList.id}>\r\n                                    <TableCell align=\"center\">\r\n                                        {fileList.name}\r\n                                    </TableCell>\r\n                                    <TableCell align=\"center\">\r\n                                        <IconButton size=\"small\" onClick={() => handleEditFileList(fileList)}>\r\n                                            <EditIcon />\r\n                                        </IconButton>\r\n\r\n                                        <IconButton\r\n                                            size=\"small\"\r\n                                            onClick={(e) => {\r\n                                                setConfirmModalOpen(true);\r\n                                                setDeletingFileList(fileList);\r\n                                            }}\r\n                                        >\r\n                                            <DeleteOutlineIcon />\r\n                                        </IconButton>\r\n                                    </TableCell>\r\n                                </TableRow>\r\n                            ))}\r\n                            {loading && <TableRowSkeleton columns={4} />}\r\n                        </>\r\n                    </TableBody>\r\n                </Table>\r\n            </Paper>\r\n        </MainContainer>\r\n    );\r\n};\r\n\r\nexport default FileLists;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Field } from \"formik\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport api from \"../../services/api\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    formControl: {\r\n        margin: theme.spacing(1),\r\n        minWidth: 120,\r\n    },\r\n}));\r\n\r\nconst QueueSelectSingle = () => {\r\n    const classes = useStyles();\r\n    const [queues, setQueues] = useState([]);\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            try {\r\n                const { data } = await api.get(\"/queue\");\r\n                setQueues(data);\r\n            } catch (err) {\r\n                toastError(`QUEUESELETSINGLE >>> ${err}`);\r\n            }\r\n        })();\r\n    }, []);\r\n\r\n    return (\r\n        <div style={{ marginTop: 6 }}>\r\n            <FormControl\r\n                variant=\"outlined\"\r\n                className={classes.FormControl}\r\n                margin=\"dense\"\r\n                fullWidth\r\n            >\r\n                <div>\r\n                    <Typography>\r\n                        {i18n.t(\"queueSelect.inputLabel\")}\r\n                    </Typography>\r\n                    <Field\r\n                        as={Select}\r\n                        label={i18n.t(\"queueSelect.inputLabel\")}\r\n                        name=\"queueId\"\r\n                        labelId=\"queue-selection-label\"\r\n                        id=\"queue-selection\"\r\n                        fullWidth\r\n                    >\r\n                        {queues.map(queue => (\r\n                            <MenuItem key={queue.id} value={queue.id}>\r\n                                {queue.name}\r\n                            </MenuItem>\r\n                        ))}\r\n                    </Field>\r\n                </div>\r\n            </FormControl>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default QueueSelectSingle;\r\n","import React, { useState, useEffect } from \"react\";\r\n\r\nimport * as Yup from \"yup\";\r\nimport { Formik, Form, Field } from \"formik\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { green } from \"@material-ui/core/colors\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport { MenuItem, FormControl, InputLabel, Select } from \"@material-ui/core\";\r\nimport { Visibility, VisibilityOff } from \"@material-ui/icons\";\r\nimport { InputAdornment, IconButton } from \"@material-ui/core\";\r\nimport QueueSelectSingle from \"../../components/QueueSelectSingle\";\r\n\r\nimport api from \"../../services/api\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        display: \"flex\",\r\n        flexWrap: \"wrap\",\r\n    },\r\n    multFieldLine: {\r\n        display: \"flex\",\r\n        \"& > *:not(:last-child)\": {\r\n            marginRight: theme.spacing(1),\r\n        },\r\n    },\r\n\r\n    btnWrapper: {\r\n        position: \"relative\",\r\n    },\r\n\r\n    buttonProgress: {\r\n        color: green[500],\r\n        position: \"absolute\",\r\n        top: \"50%\",\r\n        left: \"50%\",\r\n        marginTop: -12,\r\n        marginLeft: -12,\r\n    },\r\n    formControl: {\r\n        margin: theme.spacing(1),\r\n        minWidth: 120,\r\n    },\r\n    colorAdorment: {\r\n        width: 20,\r\n        height: 20,\r\n    },\r\n}));\r\n\r\nconst PromptSchema = Yup.object().shape({\r\n    name: Yup.string().min(5, \"Muito curto!\").max(100, \"Muito longo!\").required(\"Obrigatório\"),\r\n    prompt: Yup.string().min(50, \"Muito curto!\").required(\"Descreva o treinamento para Inteligência Artificial\"),\r\n    voice: Yup.string().required(\"Informe o modo para Voz\"),\r\n    max_tokens: Yup.number().required(\"Informe o número máximo de tokens\"),\r\n    temperature: Yup.number().required(\"Informe a temperatura\"),\r\n    apikey: Yup.string().required(\"Informe a API Key\"),\r\n    queueId: Yup.number().required(\"Informe a fila\"),\r\n    max_messages: Yup.number().required(\"Informe o número máximo de mensagens\")\r\n});\r\n\r\nconst PromptModal = ({ open, onClose, promptId }) => {\r\n    const classes = useStyles();\r\n    const [selectedVoice, setSelectedVoice] = useState(\"texto\");\r\n    const [showApiKey, setShowApiKey] = useState(false);\r\n\r\n    const handleToggleApiKey = () => {\r\n        setShowApiKey(!showApiKey);\r\n    };\r\n\r\n    const initialState = {\r\n        name: \"\",\r\n        prompt: \"\",\r\n        voice: \"texto\",\r\n        voiceKey: \"\",\r\n        voiceRegion: \"\",\r\n        maxTokens: 100,\r\n        temperature: 1,\r\n        apiKey: \"\",\r\n        queueId: null,\r\n        maxMessages: 10\r\n    };\r\n\r\n    const [prompt, setPrompt] = useState(initialState);\r\n\r\n    useEffect(() => {\r\n        const fetchPrompt = async () => {\r\n            if (!promptId) {\r\n                setPrompt(initialState);\r\n                return;\r\n            }\r\n            try {\r\n                const { data } = await api.get(`/prompt/${promptId}`);\r\n                setPrompt(prevState => {\r\n                    return { ...prevState, ...data };\r\n                });\r\n                setSelectedVoice(data.voice);\r\n            } catch (err) {\r\n                toastError(err);\r\n            }\r\n        };\r\n\r\n        fetchPrompt();\r\n    }, [promptId, open]);\r\n\r\n    const handleClose = () => {\r\n        setPrompt(initialState);\r\n        setSelectedVoice(\"texto\");\r\n        onClose();\r\n    };\r\n\r\n    const handleChangeVoice = (e) => {\r\n        setSelectedVoice(e.target.value);\r\n    };\r\n\r\n    const handleSavePrompt = async values => {\r\n        const promptData = { ...values, voice: selectedVoice };\r\n        if (!values.queueId) {\r\n            toastError(\"Informe o setor\");\r\n            return;\r\n        }\r\n        try {\r\n            if (promptId) {\r\n                await api.put(`/prompt/${promptId}`, promptData);\r\n            } else {\r\n                await api.post(\"/prompt\", promptData);\r\n            }\r\n            toast.success(i18n.t(\"promptModal.success\"));\r\n        } catch (err) {\r\n            toastError(err);\r\n        }\r\n        handleClose();\r\n    };\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <Dialog\r\n                open={open}\r\n                onClose={handleClose}\r\n                maxWidth=\"md\"\r\n                scroll=\"paper\"\r\n                fullWidth\r\n            >\r\n                <DialogTitle id=\"form-dialog-title\">\r\n                    {promptId\r\n                        ? `${i18n.t(\"promptModal.title.edit\")}`\r\n                        : `${i18n.t(\"promptModal.title.add\")}`}\r\n                </DialogTitle>\r\n                <Formik\r\n                    initialValues={prompt}\r\n                    enableReinitialize={true}\r\n                    onSubmit={(values, actions) => {\r\n                        setTimeout(() => {\r\n                            handleSavePrompt(values);\r\n                            actions.setSubmitting(false);\r\n                        }, 400);\r\n                    }}\r\n                >\r\n                    {({ touched, errors, isSubmitting, values }) => (\r\n                        <Form style={{ width: \"100%\" }}>\r\n                            <DialogContent dividers>\r\n                                <Field\r\n                                    as={TextField}\r\n                                    label={i18n.t(\"promptModal.form.name\")}\r\n                                    name=\"name\"\r\n                                    error={touched.name && Boolean(errors.name)}\r\n                                    helperText={touched.name && errors.name}\r\n                                    variant=\"outlined\"\r\n                                    margin=\"dense\"\r\n                                    fullWidth\r\n                                />\r\n                                <FormControl fullWidth margin=\"dense\" variant=\"outlined\">\r\n                                    <Field\r\n                                        as={TextField}\r\n                                        label={i18n.t(\"promptModal.form.apikey\")}\r\n                                        name=\"apiKey\"\r\n                                        type={showApiKey ? 'text' : 'password'}\r\n                                        error={touched.apiKey && Boolean(errors.apiKey)}\r\n                                        helperText={touched.apiKey && errors.apiKey}\r\n                                        variant=\"outlined\"\r\n                                        margin=\"dense\"\r\n                                        fullWidth\r\n                                        InputProps={{\r\n                                            endAdornment: (\r\n                                                <InputAdornment position=\"end\">\r\n                                                    <IconButton onClick={handleToggleApiKey}>\r\n                                                        {showApiKey ? <VisibilityOff /> : <Visibility />}\r\n                                                    </IconButton>\r\n                                                </InputAdornment>\r\n                                            ),\r\n                                        }}\r\n                                    />\r\n                                </FormControl>\r\n                                <Field\r\n                                    as={TextField}\r\n                                    label={i18n.t(\"promptModal.form.prompt\")}\r\n                                    name=\"prompt\"\r\n                                    error={touched.prompt && Boolean(errors.prompt)}\r\n                                    helperText={touched.prompt && errors.prompt}\r\n                                    variant=\"outlined\"\r\n                                    margin=\"dense\"\r\n                                    fullWidth\r\n                                    rows={10}\r\n                                    multiline={true}\r\n                                />\r\n                                <QueueSelectSingle />\r\n                                <div className={classes.multFieldLine}>\r\n                                    <FormControl fullWidth margin=\"dense\" variant=\"outlined\">\r\n                                    <InputLabel>{i18n.t(\"promptModal.form.voice\")}</InputLabel>\r\n                                        <Select\r\n                                            id=\"type-select\"\r\n                                            labelWidth={60}\r\n                                            name=\"voice\"\r\n                                            value={selectedVoice}\r\n                                            onChange={handleChangeVoice}\r\n                                            multiple={false}\r\n                                        >\r\n                                            <MenuItem key={\"texto\"} value={\"texto\"}>\r\n                                                Texto\r\n                                            </MenuItem>\r\n                                            <MenuItem key={\"pt-BR-FranciscaNeural\"} value={\"pt-BR-FranciscaNeural\"}>\r\n                                                Francisa\r\n                                            </MenuItem>\r\n                                            <MenuItem key={\"pt-BR-AntonioNeural\"} value={\"pt-BR-AntonioNeural\"}>\r\n                                                Antônio\r\n                                            </MenuItem>\r\n                                            <MenuItem key={\"pt-BR-BrendaNeural\"} value={\"pt-BR-BrendaNeural\"}>\r\n                                                Brenda\r\n                                            </MenuItem>\r\n                                            <MenuItem key={\"pt-BR-DonatoNeural\"} value={\"pt-BR-DonatoNeural\"}>\r\n                                                Donato\r\n                                            </MenuItem>\r\n                                            <MenuItem key={\"pt-BR-ElzaNeural\"} value={\"pt-BR-ElzaNeural\"}>\r\n                                                Elza\r\n                                            </MenuItem>\r\n                                            <MenuItem key={\"pt-BR-FabioNeural\"} value={\"pt-BR-FabioNeural\"}>\r\n                                                Fábio\r\n                                            </MenuItem>\r\n                                            <MenuItem key={\"pt-BR-GiovannaNeural\"} value={\"pt-BR-GiovannaNeural\"}>\r\n                                                Giovanna\r\n                                            </MenuItem>\r\n                                            <MenuItem key={\"pt-BR-HumbertoNeural\"} value={\"pt-BR-HumbertoNeural\"}>\r\n                                                Humberto\r\n                                            </MenuItem>\r\n                                            <MenuItem key={\"pt-BR-JulioNeural\"} value={\"pt-BR-JulioNeural\"}>\r\n                                                Julio\r\n                                            </MenuItem>\r\n                                            <MenuItem key={\"pt-BR-LeilaNeural\"} value={\"pt-BR-LeilaNeural\"}>\r\n                                                Leila\r\n                                            </MenuItem>\r\n                                            <MenuItem key={\"pt-BR-LeticiaNeural\"} value={\"pt-BR-LeticiaNeural\"}>\r\n                                                Letícia\r\n                                            </MenuItem>\r\n                                            <MenuItem key={\"pt-BR-ManuelaNeural\"} value={\"pt-BR-ManuelaNeural\"}>\r\n                                                Manuela\r\n                                            </MenuItem>\r\n                                            <MenuItem key={\"pt-BR-NicolauNeural\"} value={\"pt-BR-NicolauNeural\"}>\r\n                                                Nicolau\r\n                                            </MenuItem>\r\n                                            <MenuItem key={\"pt-BR-ValerioNeural\"} value={\"pt-BR-ValerioNeural\"}>\r\n                                                Valério\r\n                                            </MenuItem>\r\n                                            <MenuItem key={\"pt-BR-YaraNeural\"} value={\"pt-BR-YaraNeural\"}>\r\n                                                Yara\r\n                                            </MenuItem>\r\n                                        </Select>\r\n                                    </FormControl>\r\n                                    <Field\r\n                                        as={TextField}\r\n                                        label={i18n.t(\"promptModal.form.voiceKey\")}\r\n                                        name=\"voiceKey\"\r\n                                        error={touched.voiceKey && Boolean(errors.voiceKey)}\r\n                                        helperText={touched.voiceKey && errors.voiceKey}\r\n                                        variant=\"outlined\"\r\n                                        margin=\"dense\"\r\n                                        fullWidth\r\n                                    />\r\n                                    <Field\r\n                                        as={TextField}\r\n                                        label={i18n.t(\"promptModal.form.voiceRegion\")}\r\n                                        name=\"voiceRegion\"\r\n                                        error={touched.voiceRegion && Boolean(errors.voiceRegion)}\r\n                                        helperText={touched.voiceRegion && errors.voiceRegion}\r\n                                        variant=\"outlined\"\r\n                                        margin=\"dense\"\r\n                                        fullWidth\r\n                                    />\r\n                                </div>\r\n                                \r\n                                <div className={classes.multFieldLine}>\r\n                                    <Field\r\n                                        as={TextField}\r\n                                        label={i18n.t(\"promptModal.form.temperature\")}\r\n                                        name=\"temperature\"\r\n                                        error={touched.temperature && Boolean(errors.temperature)}\r\n                                        helperText={touched.temperature && errors.temperature}\r\n                                        variant=\"outlined\"\r\n                                        margin=\"dense\"\r\n                                        fullWidth\r\n                                    />\r\n                                    <Field\r\n                                        as={TextField}\r\n                                        label={i18n.t(\"promptModal.form.max_tokens\")}\r\n                                        name=\"maxTokens\"\r\n                                        error={touched.maxTokens && Boolean(errors.maxTokens)}\r\n                                        helperText={touched.maxTokens && errors.maxTokens}\r\n                                        variant=\"outlined\"\r\n                                        margin=\"dense\"\r\n                                        fullWidth\r\n                                    />\r\n                                    <Field\r\n                                        as={TextField}\r\n                                        label={i18n.t(\"promptModal.form.max_messages\")}\r\n                                        name=\"maxMessages\"\r\n                                        error={touched.maxMessages && Boolean(errors.maxMessages)}\r\n                                        helperText={touched.maxMessages && errors.maxMessages}\r\n                                        variant=\"outlined\"\r\n                                        margin=\"dense\"\r\n                                        fullWidth\r\n                                    />\r\n                                </div>\r\n                            </DialogContent>\r\n                            <DialogActions>\r\n                                <Button\r\n                                    onClick={handleClose}\r\n                                    color=\"secondary\"\r\n                                    disabled={isSubmitting}\r\n                                    variant=\"outlined\"\r\n                                >\r\n                                    {i18n.t(\"promptModal.buttons.cancel\")}\r\n                                </Button>\r\n                                <Button\r\n                                    type=\"submit\"\r\n                                    color=\"primary\"\r\n                                    disabled={isSubmitting}\r\n                                    variant=\"contained\"\r\n                                    className={classes.btnWrapper}\r\n                                >\r\n                                    {promptId\r\n                                        ? `${i18n.t(\"promptModal.buttons.okEdit\")}`\r\n                                        : `${i18n.t(\"promptModal.buttons.okAdd\")}`}\r\n                                    {isSubmitting && (\r\n                                        <CircularProgress\r\n                                            size={24}\r\n                                            className={classes.buttonProgress}\r\n                                        />\r\n                                    )}\r\n                                </Button>\r\n                            </DialogActions>\r\n                        </Form>\r\n                    )}\r\n                </Formik>\r\n            </Dialog>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default PromptModal;","import React, { useContext, useEffect, useReducer, useState } from \"react\";\r\n\r\nimport {\r\n  Button,\r\n  IconButton,\r\n  Paper,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableRow,\r\n  Typography // Importar Typography do Material-UI\r\n} from \"@material-ui/core\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport MainContainer from \"../../components/MainContainer\";\r\nimport MainHeader from \"../../components/MainHeader\";\r\nimport MainHeaderButtonsWrapper from \"../../components/MainHeaderButtonsWrapper\";\r\nimport TableRowSkeleton from \"../../components/TableRowSkeleton\";\r\nimport Title from \"../../components/Title\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport api from \"../../services/api\";\r\nimport { DeleteOutline, Edit } from \"@material-ui/icons\";\r\nimport PromptModal from \"../../components/PromptModal\";\r\nimport { toast } from \"react-toastify\";\r\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport usePlans from \"../../hooks/usePlans\";\r\nimport { useHistory } from \"react-router-dom/cjs/react-router-dom.min\";\r\nimport { SocketContext } from \"../../context/Socket/SocketContext\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainPaper: {\r\n    flex: 1,\r\n    padding: theme.spacing(1),\r\n    overflowY: \"scroll\",\r\n    ...theme.scrollbarStyles,\r\n  },\r\n  customTableCell: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n  // Adicione um estilo para a box vermelha\r\n  redBox: {\r\n    backgroundColor: \"#ffcccc\", // Definindo a cor de fundo vermelha\r\n    padding: theme.spacing(2), // Adicionando um espaçamento interno\r\n    marginBottom: theme.spacing(2), // Adicionando margem inferior para separar do conteúdo abaixo\r\n  },\r\n}));\r\n\r\nconst reducer = (state, action) => {\r\n  if (action.type === \"LOAD_PROMPTS\") {\r\n    const prompts = action.payload;\r\n    const newPrompts = [];\r\n\r\n    prompts.forEach((prompt) => {\r\n      const promptIndex = state.findIndex((p) => p.id === prompt.id);\r\n      if (promptIndex !== -1) {\r\n        state[promptIndex] = prompt;\r\n      } else {\r\n        newPrompts.push(prompt);\r\n      }\r\n    });\r\n\r\n    return [...state, ...newPrompts];\r\n  }\r\n\r\n  if (action.type === \"UPDATE_PROMPTS\") {\r\n    const prompt = action.payload;\r\n    const promptIndex = state.findIndex((p) => p.id === prompt.id);\r\n\r\n    if (promptIndex !== -1) {\r\n      state[promptIndex] = prompt;\r\n      return [...state];\r\n    } else {\r\n      return [prompt, ...state];\r\n    }\r\n  }\r\n\r\n  if (action.type === \"DELETE_PROMPT\") {\r\n    const promptId = action.payload;\r\n    const promptIndex = state.findIndex((p) => p.id === promptId);\r\n    if (promptIndex !== -1) {\r\n      state.splice(promptIndex, 1);\r\n    }\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"RESET\") {\r\n    return [];\r\n  }\r\n};\r\n\r\nconst Prompts = () => {\r\n  const classes = useStyles();\r\n\r\n  const [prompts, dispatch] = useReducer(reducer, []);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [promptModalOpen, setPromptModalOpen] = useState(false);\r\n  const [selectedPrompt, setSelectedPrompt] = useState(null);\r\n  const [confirmModalOpen, setConfirmModalOpen] = useState(false);\r\n  const { user } = useContext(AuthContext);\r\n  const { getPlanCompany } = usePlans();\r\n  const history = useHistory();\r\n  const companyId = user.companyId;\r\n\r\n  const socketManager = useContext(SocketContext);\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      const planConfigs = await getPlanCompany(undefined, companyId);\r\n      if (!planConfigs.plan.useOpenAi) {\r\n        toast.error(\"Esta empresa não possui permissão para acessar essa página! Estamos lhe redirecionando.\");\r\n        setTimeout(() => {\r\n          history.push(`/`)\r\n        }, 1000);\r\n      }\r\n    }\r\n    fetchData();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      setLoading(true);\r\n      try {\r\n        const { data } = await api.get(\"/prompt\");\r\n        dispatch({ type: \"LOAD_PROMPTS\", payload: data.prompts });\r\n\r\n        setLoading(false);\r\n      } catch (err) {\r\n        toastError(err);\r\n        setLoading(false);\r\n      }\r\n    })();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const socket = socketManager.getSocket(companyId);\r\n\r\n    socket.on(`company-${companyId}-prompt`, (data) => {\r\n      if (data.action === \"update\" || data.action === \"create\") {\r\n        dispatch({ type: \"UPDATE_PROMPTS\", payload: data.prompt });\r\n      }\r\n\r\n      if (data.action === \"delete\") {\r\n        dispatch({ type: \"DELETE_PROMPT\", payload: data.promptId });\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, [companyId, socketManager]);\r\n\r\n  const handleOpenPromptModal = () => {\r\n    setPromptModalOpen(true);\r\n    setSelectedPrompt(null);\r\n  };\r\n\r\n  const handleClosePromptModal = () => {\r\n    setPromptModalOpen(false);\r\n    setSelectedPrompt(null);\r\n  };\r\n\r\n  const handleEditPrompt = (prompt) => {\r\n    setSelectedPrompt(prompt);\r\n    setPromptModalOpen(true);\r\n  };\r\n\r\n  const handleCloseConfirmationModal = () => {\r\n    setConfirmModalOpen(false);\r\n    setSelectedPrompt(null);\r\n  };\r\n\r\n  const handleDeletePrompt = async (promptId) => {\r\n    try {\r\n      const { data } = await api.delete(`/prompt/${promptId}`);\r\n      toast.info(i18n.t(data.message));\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n    setSelectedPrompt(null);\r\n  };\r\n\r\n  return (\r\n    <MainContainer>\r\n   \r\n\r\n      <ConfirmationModal\r\n        title={\r\n          selectedPrompt &&\r\n          `${i18n.t(\"prompts.confirmationModal.deleteTitle\")} ${selectedPrompt.name\r\n          }?`\r\n        }\r\n        open={confirmModalOpen}\r\n        onClose={handleCloseConfirmationModal}\r\n        onConfirm={() => handleDeletePrompt(selectedPrompt.id)}\r\n      >\r\n        {i18n.t(\"prompts.confirmationModal.deleteMessage\")}\r\n      </ConfirmationModal>\r\n      <PromptModal\r\n        open={promptModalOpen}\r\n        onClose={handleClosePromptModal}\r\n        promptId={selectedPrompt?.id}\r\n      />\r\n      <MainHeader>\r\n        <Title>{i18n.t(\"prompts.title\")}</Title>\r\n        <MainHeaderButtonsWrapper>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={handleOpenPromptModal}\r\n          >\r\n            {i18n.t(\"prompts.buttons.add\")}\r\n          </Button>\r\n        </MainHeaderButtonsWrapper>\r\n      </MainHeader>\r\n      <Paper className={classes.mainPaper} variant=\"outlined\">\r\n        <Table size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell align=\"left\">\r\n                {i18n.t(\"prompts.table.name\")}\r\n              </TableCell>\r\n              <TableCell align=\"left\">\r\n                {i18n.t(\"prompts.table.queue\")}\r\n              </TableCell>\r\n              <TableCell align=\"left\">\r\n                {i18n.t(\"prompts.table.max_tokens\")}\r\n              </TableCell>\r\n              <TableCell align=\"center\">\r\n                {i18n.t(\"prompts.table.actions\")}\r\n              </TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            <>\r\n              {prompts.map((prompt) => (\r\n                <TableRow key={prompt.id}>\r\n                  <TableCell align=\"left\">{prompt.name}</TableCell>\r\n                  <TableCell align=\"left\">{prompt.queue.name}</TableCell>\r\n                  <TableCell align=\"left\">{prompt.maxTokens}</TableCell>\r\n                  <TableCell align=\"center\">\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={() => handleEditPrompt(prompt)}\r\n                    >\r\n                      <Edit />\r\n                    </IconButton>\r\n\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={() => {\r\n                        setSelectedPrompt(prompt);\r\n                        setConfirmModalOpen(true);\r\n                      }}\r\n                    >\r\n                      <DeleteOutline />\r\n                    </IconButton>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n              {loading && <TableRowSkeleton columns={4} />}\r\n            </>\r\n          </TableBody>\r\n        </Table>\r\n      </Paper>\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nexport default Prompts;\r\n","import React, { useState, useEffect } from \"react\";\r\n\r\nimport * as Yup from \"yup\";\r\nimport { Formik, Form, Field } from \"formik\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport {\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n  CircularProgress,\r\n  Select,\r\n  InputLabel,\r\n  MenuItem,\r\n  FormControl,\r\n  TextField,\r\n  Grid,\r\n  Paper,\r\n} from \"@material-ui/core\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { green } from \"@material-ui/core/colors\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nimport api from \"../../services/api\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    flexWrap: \"wrap\",\r\n    gap: 4\r\n  },\r\n  textField: {\r\n    marginRight: theme.spacing(1),\r\n    flex: 1,\r\n  },\r\n\r\n  btnWrapper: {\r\n    position: \"relative\",\r\n  },\r\n\r\n  buttonProgress: {\r\n    color: green[500],\r\n    position: \"absolute\",\r\n    top: \"50%\",\r\n    left: \"50%\",\r\n    marginTop: -12,\r\n    marginLeft: -12,\r\n  },\r\n  btnLeft: {\r\n    display: \"flex\",\r\n    marginRight: \"auto\",\r\n    marginLeft: 12,\r\n  },\r\n  colorAdorment: {\r\n    width: 20,\r\n    height: 20,\r\n  },\r\n}));\r\n\r\nconst DialogflowSchema = Yup.object().shape({\r\n  name: Yup.string()\r\n    .min(2, \"Too Short!\")\r\n    .max(50, \"Too Long!\")\r\n    .required(\"Required\"),\r\n  // projectName: Yup.string()\r\n  //   .min(3, \"Too Short!\")\r\n  //   .max(100, \"Too Long!\")\r\n  //   .required(),\r\n  // jsonContent: Yup.string().min(3, \"Too Short!\").required(),\r\n  // language: Yup.string().min(2, \"Too Short!\").max(50, \"Too Long!\").required(),\r\n});\r\n\r\n\r\n\r\nconst QueueIntegration = ({ open, onClose, integrationId }) => {\r\n  const classes = useStyles();\r\n\r\n  const initialState = {\r\n    type: \"typebot\",\r\n    name: \"\",\r\n    projectName: \"\",\r\n    jsonContent: \"\",\r\n    language: \"\",\r\n    urlN8N: \"\",\r\n    typebotDelayMessage: 1000,\r\n    typebotExpires: 1,\r\n    typebotKeywordFinish: \"\",\r\n    typebotKeywordRestart: \"\",\r\n    typebotRestartMessage: \"\",\r\n    typebotSlug: \"\",\r\n    typebotUnknownMessage: \"\",\r\n\r\n  };\r\n\r\n  const [integration, setIntegration] = useState(initialState);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      if (!integrationId) return;\r\n      try {\r\n        const { data } = await api.get(`/queueIntegration/${integrationId}`);\r\n        setIntegration((prevState) => {\r\n          return { ...prevState, ...data };\r\n        });\r\n      } catch (err) {\r\n        toastError(err);\r\n      }\r\n    })();\r\n\r\n    return () => {\r\n      setIntegration({\r\n        type: \"dialogflow\",\r\n        name: \"\",\r\n        projectName: \"\",\r\n        jsonContent: \"\",\r\n        language: \"\",\r\n        urlN8N: \"\",\r\n        typebotDelayMessage: 1000\r\n      });\r\n    };\r\n\r\n  }, [integrationId, open]);\r\n\r\n  const handleClose = () => {\r\n    onClose();\r\n    setIntegration(initialState);\r\n  };\r\n\r\n  const handleTestSession = async (event, values) => {\r\n    try {\r\n      const { projectName, jsonContent, language } = values;\r\n\r\n      await api.post(`/queueIntegration/testSession`, {\r\n        projectName,\r\n        jsonContent,\r\n        language,\r\n      });\r\n\r\n      toast.success(i18n.t(\"queueIntegrationModal.messages.testSuccess\"));\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  };\r\n\r\n  const handleSaveDialogflow = async (values) => {\r\n    try {\r\n      if (values.type === 'n8n' || values.type === 'webhook' || values.type === 'typebot') values.projectName = values.name\r\n      if (integrationId) {\r\n        await api.put(`/queueIntegration/${integrationId}`, values);\r\n        toast.success(i18n.t(\"queueIntegrationModal.messages.editSuccess\"));\r\n      } else {\r\n        await api.post(\"/queueIntegration\", values);\r\n        toast.success(i18n.t(\"queueIntegrationModal.messages.addSuccess\"));\r\n      }\r\n      handleClose();\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Dialog open={open} onClose={handleClose} fullWidth maxWidth=\"md\" scroll=\"paper\">\r\n        <DialogTitle>\r\n          {integrationId\r\n            ? `${i18n.t(\"queueIntegrationModal.title.edit\")}`\r\n            : `${i18n.t(\"queueIntegrationModal.title.add\")}`}\r\n        </DialogTitle>\r\n        <Formik\r\n          initialValues={integration}\r\n          enableReinitialize={true}\r\n          validationSchema={DialogflowSchema}\r\n          onSubmit={(values, actions, event) => {\r\n            setTimeout(() => {\r\n              handleSaveDialogflow(values);\r\n              actions.setSubmitting(false);\r\n            }, 400);\r\n          }}\r\n        >\r\n          {({ touched, errors, isSubmitting, values }) => (\r\n            <Form>\r\n              <Paper square className={classes.mainPaper} elevation={1}>\r\n                <DialogContent dividers>\r\n                  <Grid container spacing={1}>\r\n                    <Grid item xs={12} md={6} xl={6}>\r\n                      <FormControl\r\n                        variant=\"outlined\"\r\n                        className={classes.formControl}\r\n                        margin=\"dense\"\r\n                        fullWidth\r\n                      >\r\n                        <InputLabel id=\"type-selection-input-label\">\r\n                          {i18n.t(\"queueIntegrationModal.form.type\")}\r\n                        </InputLabel>\r\n\r\n                        <Field\r\n                          as={Select}\r\n                          label={i18n.t(\"queueIntegrationModal.form.type\")}\r\n                          name=\"type\"\r\n                          labelId=\"profile-selection-label\"\r\n                          error={touched.type && Boolean(errors.type)}\r\n                          helpertext={touched.type && errors.type}\r\n                          id=\"type\"\r\n                          required\r\n                        >\r\n                          <MenuItem value=\"dialogflow\">DialogFlow</MenuItem>\r\n                          <MenuItem value=\"n8n\">N8N</MenuItem>\r\n                          <MenuItem value=\"webhook\">WebHooks</MenuItem>\r\n                          <MenuItem value=\"typebot\">Typebot</MenuItem>\r\n                        </Field>\r\n                      </FormControl>\r\n                    </Grid>\r\n                    {values.type === \"dialogflow\" && (\r\n                      <>\r\n                        <Grid item xs={12} md={6} xl={6} >\r\n                          <Field\r\n                            as={TextField}\r\n                            label={i18n.t(\"queueIntegrationModal.form.name\")}\r\n                            autoFocus\r\n                            name=\"name\"\r\n                            fullWidth\r\n                            error={touched.name && Boolean(errors.name)}\r\n                            helpertext={touched.name && errors.name}\r\n                            variant=\"outlined\"\r\n                            margin=\"dense\"\r\n                            className={classes.textField}\r\n                          />\r\n                        </Grid>\r\n                        <Grid item xs={12} md={6} xl={6} >\r\n                          <FormControl\r\n                            variant=\"outlined\"\r\n                            className={classes.formControl}\r\n                            margin=\"dense\"\r\n                            fullWidth\r\n                          >\r\n                            <InputLabel id=\"language-selection-input-label\">\r\n                              {i18n.t(\"queueIntegrationModal.form.language\")}\r\n                            </InputLabel>\r\n\r\n                            <Field\r\n                              as={Select}\r\n                              label={i18n.t(\"queueIntegrationModal.form.language\")}\r\n                              name=\"language\"\r\n                              labelId=\"profile-selection-label\"\r\n                              fullWidth\r\n                              error={touched.language && Boolean(errors.language)}\r\n                              helpertext={touched.language && errors.language}\r\n                              id=\"language-selection\"\r\n                              required\r\n                            >\r\n                              <MenuItem value=\"pt-BR\">Portugues</MenuItem>\r\n                              <MenuItem value=\"en\">Inglês</MenuItem>\r\n                              <MenuItem value=\"es\">Español</MenuItem>\r\n                            </Field>\r\n                          </FormControl>\r\n                        </Grid>\r\n                        <Grid item xs={12} md={6} xl={6} >\r\n                          <Field\r\n                            as={TextField}\r\n                            label={i18n.t(\"queueIntegrationModal.form.projectName\")}\r\n                            name=\"projectName\"\r\n                            error={touched.projectName && Boolean(errors.projectName)}\r\n                            helpertext={touched.projectName && errors.projectName}\r\n                            fullWidth\r\n                            variant=\"outlined\"\r\n                            margin=\"dense\"\r\n                          />\r\n                        </Grid>\r\n                        <Grid item xs={12} md={12} xl={12} >\r\n                          <Field\r\n                            as={TextField}\r\n                            label={i18n.t(\"queueIntegrationModal.form.jsonContent\")}\r\n                            type=\"jsonContent\"\r\n                            multiline\r\n                            //inputRef={greetingRef}\r\n                            maxRows={5}\r\n                            minRows={5}\r\n                            fullWidth\r\n                            name=\"jsonContent\"\r\n                            error={touched.jsonContent && Boolean(errors.jsonContent)}\r\n                            helpertext={touched.jsonContent && errors.jsonContent}\r\n                            variant=\"outlined\"\r\n                            margin=\"dense\"\r\n                          />\r\n                        </Grid>\r\n                      </>\r\n                    )}\r\n\r\n                    {(values.type === \"n8n\" || values.type === \"webhook\") && (\r\n                      <>\r\n                        <Grid item xs={12} md={6} xl={6} >\r\n                          <Field\r\n                            as={TextField}\r\n                            label={i18n.t(\"queueIntegrationModal.form.name\")}\r\n                            autoFocus\r\n                            required\r\n                            name=\"name\"\r\n                            error={touched.name && Boolean(errors.name)}\r\n                            helpertext={touched.name && errors.name}\r\n                            variant=\"outlined\"\r\n                            margin=\"dense\"\r\n                            fullWidth\r\n                            className={classes.textField}\r\n                          />\r\n                        </Grid>\r\n                        <Grid item xs={12} md={12} xl={12} >\r\n                          <Field\r\n                            as={TextField}\r\n                            label={i18n.t(\"queueIntegrationModal.form.urlN8N\")}\r\n                            name=\"urlN8N\"\r\n                            error={touched.urlN8N && Boolean(errors.urlN8N)}\r\n                            helpertext={touched.urlN8N && errors.urlN8N}\r\n                            variant=\"outlined\"\r\n                            margin=\"dense\"\r\n                            required\r\n                            fullWidth\r\n                            className={classes.textField}\r\n                          />\r\n                        </Grid>\r\n                      </>\r\n                    )}\r\n                    {(values.type === \"typebot\") && (\r\n                      <>\r\n                        <Grid item xs={12} md={6} xl={6} >\r\n                          <Field\r\n                            as={TextField}\r\n                            label={i18n.t(\"queueIntegrationModal.form.name\")}\r\n                            autoFocus\r\n                            name=\"name\"\r\n                            error={touched.name && Boolean(errors.name)}\r\n                            helpertext={touched.name && errors.name}\r\n                            variant=\"outlined\"\r\n                            margin=\"dense\"\r\n                            required\r\n                            fullWidth\r\n                            className={classes.textField}\r\n                          />\r\n                        </Grid>\r\n                        <Grid item xs={12} md={12} xl={12} >\r\n                          <Field\r\n                            as={TextField}\r\n                            label={i18n.t(\"queueIntegrationModal.form.urlN8N\")}\r\n                            name=\"urlN8N\"\r\n                            error={touched.urlN8N && Boolean(errors.urlN8N)}\r\n                            helpertext={touched.urlN8N && errors.urlN8N}\r\n                            variant=\"outlined\"\r\n                            margin=\"dense\"\r\n                            required\r\n                            fullWidth\r\n                            className={classes.textField}\r\n                          />\r\n                        </Grid>\r\n                        <Grid item xs={12} md={6} xl={6} >\r\n                          <Field\r\n                            as={TextField}\r\n                            label={i18n.t(\"queueIntegrationModal.form.typebotSlug\")}\r\n                            name=\"typebotSlug\"\r\n                            error={touched.typebotSlug && Boolean(errors.typebotSlug)}\r\n                            helpertext={touched.typebotSlug && errors.typebotSlug}\r\n                            required\r\n                            variant=\"outlined\"\r\n                            margin=\"dense\"\r\n                            fullWidth\r\n                            className={classes.textField}\r\n                          />\r\n                        </Grid>\r\n                        <Grid item xs={12} md={6} xl={6} >\r\n                          <Field\r\n                            as={TextField}\r\n                            label={i18n.t(\"queueIntegrationModal.form.typebotExpires\")}\r\n                            name=\"typebotExpires\"\r\n                            error={touched.typebotExpires && Boolean(errors.typebotExpires)}\r\n                            helpertext={touched.typebotExpires && errors.typebotExpires}\r\n                            variant=\"outlined\"\r\n                            margin=\"dense\"\r\n                            fullWidth\r\n                            className={classes.textField}\r\n                          />\r\n                        </Grid>\r\n                        <Grid item xs={12} md={6} xl={6} >\r\n                          <Field\r\n                            as={TextField}\r\n                            label={i18n.t(\"queueIntegrationModal.form.typebotDelayMessage\")}\r\n                            name=\"typebotDelayMessage\"\r\n                            error={touched.typebotDelayMessage && Boolean(errors.typebotDelayMessage)}\r\n                            helpertext={touched.typebotDelayMessage && errors.typebotDelayMessage}\r\n                            variant=\"outlined\"\r\n                            margin=\"dense\"\r\n                            fullWidth\r\n                            className={classes.textField}\r\n                          />\r\n                        </Grid>\r\n                        <Grid item xs={12} md={6} xl={6} >\r\n                          <Field\r\n                            as={TextField}\r\n                            label={i18n.t(\"queueIntegrationModal.form.typebotKeywordFinish\")}\r\n                            name=\"typebotKeywordFinish\"\r\n                            error={touched.typebotKeywordFinish && Boolean(errors.typebotKeywordFinish)}\r\n                            helpertext={touched.typebotKeywordFinish && errors.typebotKeywordFinish}\r\n                            variant=\"outlined\"\r\n                            margin=\"dense\"\r\n                            fullWidth\r\n                            className={classes.textField}\r\n                          />\r\n                        </Grid>\r\n                        <Grid item xs={12} md={6} xl={6} >\r\n                          <Field\r\n                            as={TextField}\r\n                            label={i18n.t(\"queueIntegrationModal.form.typebotKeywordRestart\")}\r\n                            name=\"typebotKeywordRestart\"\r\n                            error={touched.typebotKeywordRestart && Boolean(errors.typebotKeywordRestart)}\r\n                            helpertext={touched.typebotKeywordRestart && errors.typebotKeywordRestart}\r\n                            variant=\"outlined\"\r\n                            margin=\"dense\"\r\n                            fullWidth\r\n                            className={classes.textField}\r\n                          />\r\n                        </Grid>\r\n                        <Grid item xs={12} md={6} xl={6} >\r\n                          <Field\r\n                            as={TextField}\r\n                            label={i18n.t(\"queueIntegrationModal.form.typebotUnknownMessage\")}\r\n                            name=\"typebotUnknownMessage\"\r\n                            error={touched.typebotUnknownMessage && Boolean(errors.typebotUnknownMessage)}\r\n                            helpertext={touched.typebotUnknownMessage && errors.typebotUnknownMessage}\r\n                            variant=\"outlined\"\r\n                            margin=\"dense\"\r\n                            fullWidth\r\n                            className={classes.textField}\r\n                          />\r\n                        </Grid>\r\n                        <Grid item xs={12} md={12} xl={12} >\r\n                          <Field\r\n                            as={TextField}\r\n                            label={i18n.t(\"queueIntegrationModal.form.typebotRestartMessage\")}\r\n                            name=\"typebotRestartMessage\"\r\n                            error={touched.typebotRestartMessage && Boolean(errors.typebotRestartMessage)}\r\n                            helpertext={touched.typebotRestartMessage && errors.typebotRestartMessage}\r\n                            variant=\"outlined\"\r\n                            margin=\"dense\"\r\n                            fullWidth\r\n                            className={classes.textField}\r\n                          />\r\n                        </Grid>\r\n                        \r\n                      </>\r\n                    )}\r\n                  </Grid>\r\n                </DialogContent>\r\n              </Paper>\r\n\r\n              <DialogActions>\r\n                {values.type === \"dialogflow\" && (\r\n                  <Button\r\n                    //type=\"submit\"\r\n                    onClick={(e) => handleTestSession(e, values)}\r\n                    color=\"inherit\"\r\n                    disabled={isSubmitting}\r\n                    name=\"testSession\"\r\n                    variant=\"outlined\"\r\n                    className={classes.btnLeft}\r\n                  >\r\n                    {i18n.t(\"queueIntegrationModal.buttons.test\")}\r\n                  </Button>\r\n                )}\r\n                <Button\r\n                  onClick={handleClose}\r\n                  color=\"secondary\"\r\n                  disabled={isSubmitting}\r\n                  variant=\"outlined\"\r\n                >\r\n                  {i18n.t(\"queueIntegrationModal.buttons.cancel\")}\r\n                </Button>\r\n                <Button\r\n                  type=\"submit\"\r\n                  color=\"primary\"\r\n                  disabled={isSubmitting}\r\n                  variant=\"contained\"\r\n                  className={classes.btnWrapper}\r\n                >\r\n                  {integrationId\r\n                    ? `${i18n.t(\"queueIntegrationModal.buttons.okEdit\")}`\r\n                    : `${i18n.t(\"queueIntegrationModal.buttons.okAdd\")}`}\r\n                  {isSubmitting && (\r\n                    <CircularProgress\r\n                      size={24}\r\n                      className={classes.buttonProgress}\r\n                    />\r\n                  )}\r\n                </Button>\r\n              </DialogActions>\r\n            </Form>\r\n          )}\r\n        </Formik>\r\n      </Dialog>\r\n    </div >\r\n  );\r\n};\r\n\r\nexport default QueueIntegration;","import React, { useState, useEffect, useReducer, useContext } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\nimport { SocketContext } from \"../../context/Socket/SocketContext\";\r\nimport n8n from \"../../assets/n8n.png\";\r\nimport dialogflow from \"../../assets/dialogflow.png\";\r\nimport webhooks from \"../../assets/webhook.png\";\r\nimport typebot from \"../../assets/typebot.jpg\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport {\r\n  Avatar,\r\n  Button,\r\n  IconButton,\r\n  InputAdornment,\r\n  Paper,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableRow,\r\n  TextField,\r\n  Tooltip\r\n} from \"@material-ui/core\";\r\n\r\nimport {\r\n  DeleteOutline,\r\n  Edit\r\n} from \"@material-ui/icons\";\r\n\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\n\r\nimport MainContainer from \"../../components/MainContainer\";\r\nimport MainHeader from \"../../components/MainHeader\";\r\nimport MainHeaderButtonsWrapper from \"../../components/MainHeaderButtonsWrapper\";\r\nimport Title from \"../../components/Title\";\r\nimport TableRowSkeleton from \"../../components/TableRowSkeleton\";\r\nimport IntegrationModal from \"../../components/QueueIntegrationModal\";\r\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\r\n\r\nimport api from \"../../services/api\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport usePlans from \"../../hooks/usePlans\";\r\nimport { useHistory } from \"react-router-dom/cjs/react-router-dom.min\";\r\n\r\nconst reducer = (state, action) => {\r\n  if (action.type === \"LOAD_INTEGRATIONS\") {\r\n    const queueIntegration = action.payload;\r\n    const newIntegrations = [];\r\n\r\n    queueIntegration.forEach((integration) => {\r\n      const integrationIndex = state.findIndex((u) => u.id === integration.id);\r\n      if (integrationIndex !== -1) {\r\n        state[integrationIndex] = integration;\r\n      } else {\r\n        newIntegrations.push(integration);\r\n      }\r\n    });\r\n\r\n    return [...state, ...newIntegrations];\r\n  }\r\n\r\n  if (action.type === \"UPDATE_INTEGRATIONS\") {\r\n    const queueIntegration = action.payload;\r\n    const integrationIndex = state.findIndex((u) => u.id === queueIntegration.id);\r\n\r\n    if (integrationIndex !== -1) {\r\n      state[integrationIndex] = queueIntegration;\r\n      return [...state];\r\n    } else {\r\n      return [queueIntegration, ...state];\r\n    }\r\n  }\r\n\r\n  if (action.type === \"DELETE_INTEGRATION\") {\r\n    const integrationId = action.payload;\r\n\r\n    const integrationIndex = state.findIndex((u) => u.id === integrationId);\r\n    if (integrationIndex !== -1) {\r\n      state.splice(integrationIndex, 1);\r\n    }\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"RESET\") {\r\n    return [];\r\n  }\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainPaper: {\r\n    flex: 1,\r\n    padding: theme.spacing(2),\r\n    margin: theme.spacing(1),\r\n    overflowY: \"scroll\",\r\n    ...theme.scrollbarStyles,\r\n  },\r\n  avatar: {\r\n    width: \"140px\",\r\n    height: \"40px\",\r\n    borderRadius: 4\r\n  },\r\n}));\r\n\r\nconst QueueIntegration = () => {\r\n  const classes = useStyles();\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [pageNumber, setPageNumber] = useState(1);\r\n  const [hasMore, setHasMore] = useState(false);\r\n  const [selectedIntegration, setSelectedIntegration] = useState(null);\r\n  const [deletingUser, setDeletingUser] = useState(null);\r\n  const [userModalOpen, setUserModalOpen] = useState(false);\r\n  const [confirmModalOpen, setConfirmModalOpen] = useState(false);\r\n  const [searchParam, setSearchParam] = useState(\"\");\r\n  const [queueIntegration, dispatch] = useReducer(reducer, []);\r\n  const { user } = useContext(AuthContext);\r\n  const { getPlanCompany } = usePlans();\r\n  const companyId = user.companyId;\r\n  const history = useHistory();\r\n\r\n  const socketManager = useContext(SocketContext);\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      const planConfigs = await getPlanCompany(undefined, companyId);\r\n      if (!planConfigs.plan.useIntegrations) {\r\n        toast.error(\"Esta empresa não possui permissão para acessar essa página! Estamos lhe redirecionando.\");\r\n        setTimeout(() => {\r\n          history.push(`/`)\r\n        }, 1000);\r\n      }\r\n    }\r\n    fetchData();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: \"RESET\" });\r\n    setPageNumber(1);\r\n  }, [searchParam]);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const delayDebounceFn = setTimeout(() => {\r\n      const fetchIntegrations = async () => {\r\n        try {\r\n          const { data } = await api.get(\"/queueIntegration/\", {\r\n            params: { searchParam, pageNumber },\r\n          });\r\n          dispatch({ type: \"LOAD_INTEGRATIONS\", payload: data.queueIntegrations });\r\n          setHasMore(data.hasMore);\r\n          setLoading(false);\r\n        } catch (err) {\r\n          toastError(err);\r\n        }\r\n      };\r\n      fetchIntegrations();\r\n    }, 500);\r\n    return () => clearTimeout(delayDebounceFn);\r\n  }, [searchParam, pageNumber]);\r\n\r\n  useEffect(() => {\r\n    const companyId = localStorage.getItem(\"companyId\");\r\n    const socket = socketManager.getSocket(companyId);\r\n\r\n    socket.on(`company-${companyId}-queueIntegration`, (data) => {\r\n      if (data.action === \"update\" || data.action === \"create\") {\r\n        dispatch({ type: \"UPDATE_INTEGRATIONS\", payload: data.queueIntegration });\r\n      }\r\n\r\n      if (data.action === \"delete\") {\r\n        dispatch({ type: \"DELETE_INTEGRATION\", payload: +data.integrationId });\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, [socketManager]);\r\n\r\n  const handleOpenUserModal = () => {\r\n    setSelectedIntegration(null);\r\n    setUserModalOpen(true);\r\n  };\r\n\r\n  const handleCloseIntegrationModal = () => {\r\n    setSelectedIntegration(null);\r\n    setUserModalOpen(false);\r\n  };\r\n\r\n  const handleSearch = (event) => {\r\n    setSearchParam(event.target.value.toLowerCase());\r\n  };\r\n\r\n  const handleEditIntegration = (queueIntegration) => {\r\n    setSelectedIntegration(queueIntegration);\r\n    setUserModalOpen(true);\r\n  };\r\n\r\n  const handleDeleteIntegration = async (integrationId) => {\r\n    try {\r\n      await api.delete(`/queueIntegration/${integrationId}`);\r\n      toast.success(i18n.t(\"queueIntegration.toasts.deleted\"));\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n    setDeletingUser(null);\r\n    setSearchParam(\"\");\r\n    setPageNumber(1);\r\n  };\r\n\r\n  const loadMore = () => {\r\n    setPageNumber((prevState) => prevState + 1);\r\n  };\r\n\r\n  const handleScroll = (e) => {\r\n    if (!hasMore || loading) return;\r\n    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\r\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\r\n      loadMore();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <MainContainer>\r\n      <ConfirmationModal\r\n        title={\r\n          deletingUser &&\r\n          `${i18n.t(\"queueIntegration.confirmationModal.deleteTitle\")} ${deletingUser.name\r\n          }?`\r\n        }\r\n        open={confirmModalOpen}\r\n        onClose={setConfirmModalOpen}\r\n        onConfirm={() => handleDeleteIntegration(deletingUser.id)}\r\n      >\r\n        {i18n.t(\"queueIntegration.confirmationModal.deleteMessage\")}\r\n      </ConfirmationModal>\r\n      <IntegrationModal\r\n        open={userModalOpen}\r\n        onClose={handleCloseIntegrationModal}\r\n        aria-labelledby=\"form-dialog-title\"\r\n        integrationId={selectedIntegration && selectedIntegration.id}\r\n      />\r\n      <MainHeader>\r\n        <Title>{i18n.t(\"queueIntegration.title\")} ({queueIntegration.length})</Title>\r\n        <MainHeaderButtonsWrapper>\r\n          <TextField\r\n            placeholder={i18n.t(\"queueIntegration.searchPlaceholder\")}\r\n            type=\"search\"\r\n            value={searchParam}\r\n            onChange={handleSearch}\r\n            InputProps={{\r\n              startAdornment: (\r\n                <InputAdornment position=\"start\">\r\n                  <SearchIcon color=\"secondary\" />\r\n                </InputAdornment>\r\n              ),\r\n            }}\r\n          />\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={handleOpenUserModal}\r\n          >\r\n            {i18n.t(\"queueIntegration.buttons.add\")}\r\n          </Button>\r\n        </MainHeaderButtonsWrapper>\r\n      </MainHeader>\r\n      <Paper\r\n        className={classes.mainPaper}\r\n        variant=\"outlined\"\r\n        onScroll={handleScroll}\r\n      >\r\n        <Table size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell padding=\"checkbox\"></TableCell>\r\n              <TableCell align=\"center\">{i18n.t(\"queueIntegration.table.id\")}</TableCell>\r\n              <TableCell align=\"center\">{i18n.t(\"queueIntegration.table.name\")}</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            <>\r\n              {queueIntegration.map((integration) => (\r\n                <TableRow key={integration.id}>\r\n                  <TableCell >\r\n                    {integration.type === \"dialogflow\" && (<Avatar \r\n                      src={dialogflow} className={classes.avatar} />)}\r\n                    {integration.type === \"n8n\" && (<Avatar\r\n                      src={n8n} className={classes.avatar} />)}\r\n                    {integration.type === \"webhook\" && (<Avatar\r\n                      src={webhooks} className={classes.avatar} />)}\r\n                    {integration.type === \"typebot\" && (<Avatar\r\n                      src={typebot} className={classes.avatar} />)}\r\n                  </TableCell>\r\n\r\n                  <TableCell align=\"center\">{integration.id}</TableCell>\r\n                  <TableCell align=\"center\">{integration.name}</TableCell>\r\n                  <TableCell align=\"center\">\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={() => handleEditIntegration(integration)}\r\n                    >\r\n                      <Edit color=\"secondary\" />\r\n                    </IconButton>\r\n\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={(e) => {\r\n                        setConfirmModalOpen(true);\r\n                        setDeletingUser(integration);\r\n                      }}\r\n                    >\r\n                      <DeleteOutline color=\"secondary\" />\r\n                    </IconButton>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n              {loading && <TableRowSkeleton columns={7} />}\r\n            </>\r\n          </TableBody>\r\n        </Table>\r\n      </Paper>\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nexport default QueueIntegration;","import React, { useState } from \"react\";\r\nimport qs from \"query-string\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport VisibilityIcon from \"@material-ui/icons/Visibility\";\r\nimport VisibilityOffIcon from \"@material-ui/icons/VisibilityOff\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport * as Yup from \"yup\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Link as RouterLink } from \"react-router-dom\";\r\nimport { Formik, Form, Field } from \"formik\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport api from \"../../services/api\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport moment from \"moment\";\r\nimport logo from \"../../assets/logo.png\";\r\nimport { toast } from 'react-toastify'; \r\nimport toastError from '../../errors/toastError';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100vw\",\r\n    height: \"100vh\",\r\n    background: \"black\", //Cor de fundo\r\n    backgroundRepeat: \"no-repeat\",\r\n    backgroundSize: \"100% 100%\",\r\n    backgroundPosition: \"center\",\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    textAlign: \"center\",\r\n  },\r\n  paper: {\r\n    backgroundColor: \"white\",\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n    padding: \"55px 30px\",\r\n    borderRadius: \"12.5px\",\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  form: {\r\n    width: \"100%\", // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n  powered: {\r\n    color: \"white\",\r\n  },\r\n}));\r\n\r\nconst passwordRegex = /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}$/;\r\n\r\nconst ForgetPassword = () => {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  let companyId = null;\r\n  const [showAdditionalFields, setShowAdditionalFields] = useState(false);\r\n  const [showResetPasswordButton, setShowResetPasswordButton] = useState(false);\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [showConfirmPassword, setShowConfirmPassword] = useState(false);\r\n  const [error, setError] = useState(\"\"); // Estado para mensagens de erro\r\n\r\n  const togglePasswordVisibility = () => {\r\n    setShowPassword(!showPassword);\r\n  };\r\n\r\n  const toggleConfirmPasswordVisibility = () => {\r\n    setShowConfirmPassword(!showConfirmPassword);\r\n  };\r\n\r\n  const toggleAdditionalFields = () => {\r\n    setShowAdditionalFields(!showAdditionalFields);\r\n    if (showAdditionalFields) {\r\n      setShowResetPasswordButton(false);\r\n    } else {\r\n      setShowResetPasswordButton(true);\r\n    }\r\n  };\r\n\r\n  const params = qs.parse(window.location.search);\r\n  if (params.companyId !== undefined) {\r\n    companyId = params.companyId;\r\n  }\r\n\r\n  const initialState = { email: \"\" };\r\n\r\n  const [user] = useState(initialState);\r\n  const dueDate = moment().add(3, \"day\").format();\r\n\r\nconst handleSendEmail = async (values) => {\r\n  const email = values.email;\r\n  try {\r\n    const response = await api.post(\r\n      `${process.env.REACT_APP_BACKEND_URL}/forgetpassword/${email}`\r\n    );\r\n    console.log(\"API Response:\", response.data);\r\n\r\n    if (response.data.status === 404) {\r\n      toast.error(\"Email não encontrado\");\r\n    } else {\r\n      toast.success(i18n.t(\"Email enviado com sucesso!\"));\r\n    }\r\n  } catch (err) {\r\n    console.log(\"API Error:\", err);\r\n    toastError(err);\r\n  }\r\n};\r\n\r\n  const handleResetPassword = async (values) => {\r\n    const email = values.email;\r\n    const token = values.token;\r\n    const newPassword = values.newPassword;\r\n    const confirmPassword = values.confirmPassword;\r\n\r\n    if (newPassword === confirmPassword) {\r\n      try {\r\n        await api.post(\r\n          `${process.env.REACT_APP_BACKEND_URL}/resetpasswords/${email}/${token}/${newPassword}`\r\n        );\r\n        setError(\"\"); // Limpe o erro se não houver erro\r\n        toast.success(i18n.t(\"Senha redefinida com sucesso.\"));\r\n        history.push(\"/login\");\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    }\r\n  };\r\n\r\n  const isResetPasswordButtonClicked = showResetPasswordButton;\r\n  const UserSchema = Yup.object().shape({\r\n    email: Yup.string().email(\"Invalid email\").required(\"Required\"),\r\n    newPassword: isResetPasswordButtonClicked\r\n      ? Yup.string()\r\n          .required(\"Campo obrigatório\")\r\n          .matches(\r\n            passwordRegex,\r\n            \"Sua senha precisa ter no mínimo 8 caracteres, sendo uma letra maiúscula, uma minúscula e um número.\"\r\n          )\r\n      : Yup.string(), // Sem validação se não for redefinição de senha\r\n    confirmPassword: Yup.string().when(\"newPassword\", {\r\n      is: (newPassword) => isResetPasswordButtonClicked && newPassword,\r\n      then: Yup.string()\r\n        .oneOf([Yup.ref(\"newPassword\"), null], \"As senhas não correspondem\")\r\n        .required(\"Campo obrigatório\"),\r\n      otherwise: Yup.string(), // Sem validação se não for redefinição de senha\r\n    }),\r\n  });\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Container component=\"main\" maxWidth=\"xs\">\r\n        <CssBaseline />\r\n        <div className={classes.paper}>\r\n          <div>\r\n            <img\r\n              style={{ margin: \"0 auto\", height: \"80px\", width: \"100%\" }}\r\n              src={logo}\r\n              alt=\"Whats\"\r\n            />\r\n          </div>\r\n          <Typography component=\"h1\" variant=\"h5\">\r\n            {i18n.t(\"Redefinir senha\")}\r\n          </Typography>\r\n          <Formik\r\n            initialValues={{\r\n              email: \"\",\r\n              token: \"\",\r\n              newPassword: \"\",\r\n              confirmPassword: \"\",\r\n            }}\r\n            enableReinitialize={true}\r\n            validationSchema={UserSchema}\r\n            onSubmit={(values, actions) => {\r\n              setTimeout(() => {\r\n                if (showResetPasswordButton) {\r\n                  handleResetPassword(values);\r\n                } else {\r\n                  handleSendEmail(values);\r\n                }\r\n                actions.setSubmitting(false);\r\n                toggleAdditionalFields();\r\n              }, 400);\r\n            }}\r\n          >\r\n            {({ touched, errors, isSubmitting }) => (\r\n              <Form className={classes.form}>\r\n                <Grid container spacing={2}>\r\n                  <Grid item xs={12}>\r\n                    <Field\r\n                      as={TextField}\r\n                      variant=\"outlined\"\r\n                      fullWidth\r\n                      id=\"email\"\r\n                      label={i18n.t(\"signup.form.email\")}\r\n                      name=\"email\"\r\n                      error={touched.email && Boolean(errors.email)}\r\n                      helperText={touched.email && errors.email}\r\n                      autoComplete=\"email\"\r\n                      required\r\n                    />\r\n                  </Grid>\r\n                  {showAdditionalFields && (\r\n                    <>\r\n                      <Grid item xs={12}>\r\n                        <Field\r\n                          as={TextField}\r\n                          variant=\"outlined\"\r\n                          fullWidth\r\n                          id=\"token\"\r\n                          label=\"Código de Verificação\"\r\n                          name=\"token\"\r\n                          error={touched.token && Boolean(errors.token)}\r\n                          helperText={touched.token && errors.token}\r\n                          autoComplete=\"off\"\r\n                          required\r\n                        />\r\n                      </Grid>\r\n                      <Grid item xs={12}>\r\n                        <Field\r\n                          as={TextField}\r\n                          variant=\"outlined\"\r\n                          fullWidth\r\n                          type={showPassword ? \"text\" : \"password\"}\r\n                          id=\"newPassword\"\r\n                          label=\"Nova senha\"\r\n                          name=\"newPassword\"\r\n                          error={\r\n                            touched.newPassword &&\r\n                            Boolean(errors.newPassword)\r\n                          }\r\n                          helperText={\r\n                            touched.newPassword && errors.newPassword\r\n                          }\r\n                          autoComplete=\"off\"\r\n                          required\r\n                          InputProps={{\r\n                            endAdornment: (\r\n                              <InputAdornment position=\"end\">\r\n                                <IconButton\r\n                                  onClick={togglePasswordVisibility}\r\n                                >\r\n                                  {showPassword ? (\r\n                                    <VisibilityIcon />\r\n                                  ) : (\r\n                                    <VisibilityOffIcon />\r\n                                  )}\r\n                                </IconButton>\r\n                              </InputAdornment>\r\n                            ),\r\n                          }}\r\n                        />\r\n                      </Grid>\r\n                      <Grid item xs={12}>\r\n                        <Field\r\n                          as={TextField}\r\n                          variant=\"outlined\"\r\n                          fullWidth\r\n                          type={showConfirmPassword ? \"text\" : \"password\"}\r\n                          id=\"confirmPassword\"\r\n                          label=\"Confirme a senha\"\r\n                          name=\"confirmPassword\"\r\n                          error={\r\n                            touched.confirmPassword &&\r\n                            Boolean(errors.confirmPassword)\r\n                          }\r\n                          helperText={\r\n                            touched.confirmPassword &&\r\n                            errors.confirmPassword\r\n                          }\r\n                          autoComplete=\"off\"\r\n                          required\r\n                          InputProps={{\r\n                            endAdornment: (\r\n                              <InputAdornment position=\"end\">\r\n                                <IconButton\r\n                                  onClick={toggleConfirmPasswordVisibility}\r\n                                >\r\n                                  {showConfirmPassword ? (\r\n                                    <VisibilityIcon />\r\n                                  ) : (\r\n                                    <VisibilityOffIcon />\r\n                                  )}\r\n                                </IconButton>\r\n                              </InputAdornment>\r\n                            ),\r\n                          }}\r\n                        />\r\n                      </Grid>\r\n                    </>\r\n                  )}\r\n                </Grid>\r\n                {showResetPasswordButton ? (\r\n                  <Button\r\n                    type=\"submit\"\r\n                    fullWidth\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    className={classes.submit}\r\n                  >\r\n                    Redefinir Senha\r\n                  </Button>\r\n                ) : (\r\n                  <Button\r\n                    type=\"submit\"\r\n                    fullWidth\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    className={classes.submit}\r\n                  >\r\n                    Enviar Email\r\n                  </Button>\r\n                )}\r\n                <Grid container justifyContent=\"flex-end\">\r\n                  <Grid item>\r\n                    <Link\r\n                      href=\"#\"\r\n                      variant=\"body2\"\r\n                      component={RouterLink}\r\n                      to=\"/signup\"\r\n                    >\r\n                      {i18n.t(\"Não tem uma conta? Cadastre-se!\")}\r\n                    </Link>\r\n                  </Grid>\r\n                </Grid>\r\n                {error && (\r\n                  <Typography variant=\"body2\" color=\"error\">\r\n                    {error}\r\n                  </Typography>\r\n                )}\r\n              </Form>\r\n            )}\r\n          </Formik>\r\n        </div>\r\n        <Box mt={5} />\r\n      </Container>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ForgetPassword;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { BrowserRouter, Switch } from \"react-router-dom\";\r\nimport { ToastContainer } from \"react-toastify\";\r\n\r\nimport LoggedInLayout from \"../layout\";\r\nimport Dashboard from \"../pages/Dashboard/\";\r\nimport TicketResponsiveContainer from \"../pages/TicketResponsiveContainer\";\r\nimport Signup from \"../pages/Signup/\";\r\nimport Login from \"../pages/Login/\";\r\nimport Connections from \"../pages/Connections/\";\r\nimport SettingsCustom from \"../pages/SettingsCustom/\";\r\nimport Financeiro from \"../pages/Financeiro/\";\r\nimport Users from \"../pages/Users\";\r\nimport Contacts from \"../pages/Contacts/\";\r\nimport Queues from \"../pages/Queues/\";\r\nimport Tags from \"../pages/Tags/\";\r\nimport MessagesAPI from \"../pages/MessagesAPI/\";\r\nimport Helps from \"../pages/Helps/\";\r\nimport ContactLists from \"../pages/ContactLists/\";\r\nimport ContactListItems from \"../pages/ContactListItems/\";\r\n// import Companies from \"../pages/Companies/\";\r\nimport QuickMessages from \"../pages/QuickMessages/\";\r\nimport Kanban from \"../pages/Kanban\";\r\nimport { AuthProvider } from \"../context/Auth/AuthContext\";\r\nimport { TicketsContextProvider } from \"../context/Tickets/TicketsContext\";\r\nimport { WhatsAppsProvider } from \"../context/WhatsApp/WhatsAppsContext\";\r\nimport Route from \"./Route\";\r\nimport Schedules from \"../pages/Schedules\";\r\nimport Campaigns from \"../pages/Campaigns\";\r\nimport CampaignsConfig from \"../pages/CampaignsConfig\";\r\nimport CampaignReport from \"../pages/CampaignReport\";\r\nimport Annoucements from \"../pages/Annoucements\";\r\nimport Chat from \"../pages/Chat\";\r\nimport ToDoList from \"../pages/ToDoList/\";\r\nimport Subscription from \"../pages/Subscription/\";\r\nimport Files from \"../pages/Files/\";\r\nimport Prompts from \"../pages/Prompts\";\r\nimport QueueIntegration from \"../pages/QueueIntegration\";\r\nimport ForgetPassword from \"../pages/ForgetPassWord/\"; // Reset PassWd\r\n\r\nconst Routes = () => {\r\n  const [showCampaigns, setShowCampaigns] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const cshow = localStorage.getItem(\"cshow\");\r\n    if (cshow !== undefined) {\r\n      setShowCampaigns(true);\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <BrowserRouter>\r\n      <AuthProvider>\r\n        <TicketsContextProvider>\r\n          <Switch>\r\n            <Route exact path=\"/login\" component={Login} />\r\n            <Route exact path=\"/signup\" component={Signup} />\r\n\t\t\t<Route exact path=\"/forgetpsw\" component={ForgetPassword} /> \r\n            {/* <Route exact path=\"/create-company\" component={Companies} /> */}\r\n            <WhatsAppsProvider>\r\n              <LoggedInLayout>\r\n                <Route exact path=\"/\" component={Dashboard} isPrivate />\r\n                <Route\r\n                  exact\r\n                  path=\"/tickets/:ticketId?\"\r\n                  component={TicketResponsiveContainer}\r\n                  isPrivate\r\n                />\r\n                <Route\r\n                  exact\r\n                  path=\"/connections\"\r\n                  component={Connections}\r\n                  isPrivate\r\n                />\r\n                <Route\r\n                  exact\r\n                  path=\"/quick-messages\"\r\n                  component={QuickMessages}\r\n                  isPrivate\r\n                />\r\n                <Route\r\n                  exact\r\n                  path=\"/todolist\"\r\n                  component={ToDoList}\r\n                  isPrivate\r\n                  />\r\n                <Route\r\n                  exact\r\n                  path=\"/schedules\"\r\n                  component={Schedules}\r\n                  isPrivate\r\n                />\r\n                <Route exact path=\"/tags\" component={Tags} isPrivate />\r\n                <Route exact path=\"/contacts\" component={Contacts} isPrivate />\r\n                <Route exact path=\"/helps\" component={Helps} isPrivate />\r\n                <Route exact path=\"/users\" component={Users} isPrivate />\r\n                <Route exact path=\"/files\" component={Files} isPrivate />\r\n                <Route exact path=\"/prompts\" component={Prompts} isPrivate />\r\n                <Route exact path=\"/queue-integration\" component={QueueIntegration} isPrivate />\r\n\r\n                <Route\r\n                  exact\r\n                  path=\"/messages-api\"\r\n                  component={MessagesAPI}\r\n                  isPrivate\r\n                />\r\n                <Route\r\n                  exact\r\n                  path=\"/settings\"\r\n                  component={SettingsCustom}\r\n                  isPrivate\r\n                />\r\n\t\t\t\t        <Route \r\n                  exact\r\n                  path=\"/kanban\"\r\n                  component={Kanban}\r\n                  isPrivate\r\n                />\r\n                <Route\r\n                  exact\r\n                  path=\"/financeiro\"\r\n                  component={Financeiro}\r\n                  isPrivate\r\n                />\r\n                <Route exact path=\"/queues\" component={Queues} isPrivate />\r\n                <Route\r\n                  exact\r\n                  path=\"/announcements\"\r\n                  component={Annoucements}\r\n                  isPrivate\r\n                />\r\n                <Route\r\n                  exact\r\n                  path=\"/subscription\"\r\n                  component={Subscription}\r\n                  isPrivate\r\n                />\r\n                <Route exact path=\"/chats/:id?\" component={Chat} isPrivate />\r\n                {showCampaigns && (\r\n                  <>\r\n                    <Route\r\n                      exact\r\n                      path=\"/contact-lists\"\r\n                      component={ContactLists}\r\n                      isPrivate\r\n                    />\r\n                    <Route\r\n                      exact\r\n                      path=\"/contact-lists/:contactListId/contacts\"\r\n                      component={ContactListItems}\r\n                      isPrivate\r\n                    />\r\n                    <Route\r\n                      exact\r\n                      path=\"/campaigns\"\r\n                      component={Campaigns}\r\n                      isPrivate\r\n                    />\r\n                    <Route\r\n                      exact\r\n                      path=\"/campaign/:campaignId/report\"\r\n                      component={CampaignReport}\r\n                      isPrivate\r\n                    />\r\n                    <Route\r\n                      exact\r\n                      path=\"/campaigns-config\"\r\n                      component={CampaignsConfig}\r\n                      isPrivate\r\n                    />\r\n                  </>\r\n                )}\r\n              </LoggedInLayout>\r\n            </WhatsAppsProvider>\r\n          </Switch>\r\n          <ToastContainer autoClose={3000} />\r\n        </TicketsContextProvider>\r\n      </AuthProvider>\r\n    </BrowserRouter>\r\n  );\r\n};\r\n\r\nexport default Routes;\r\n","import React, { useState, useEffect } from \"react\";\r\n\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport { QueryClient, QueryClientProvider } from \"react-query\";\r\n\r\nimport { ptBR } from \"@material-ui/core/locale\";\r\nimport { createTheme, ThemeProvider } from \"@material-ui/core/styles\";\r\nimport { useMediaQuery } from \"@material-ui/core\";\r\nimport ColorModeContext from \"./layout/themeContext\";\r\nimport { SocketContext, SocketManager } from './context/Socket/SocketContext';\r\n\r\nimport Routes from \"./routes\";\r\n\r\nconst queryClient = new QueryClient();\r\n\r\nconst App = () => {\r\n    const [locale, setLocale] = useState();\r\n\r\n    const prefersDarkMode = useMediaQuery(\"(prefers-color-scheme: dark)\");\r\n    const preferredTheme = window.localStorage.getItem(\"preferredTheme\");\r\n    const [mode, setMode] = useState(preferredTheme ? preferredTheme : prefersDarkMode ? \"dark\" : \"light\");\r\n\r\n    const colorMode = React.useMemo(\r\n        () => ({\r\n            toggleColorMode: () => {\r\n                setMode((prevMode) => (prevMode === \"light\" ? \"dark\" : \"light\"));\r\n            },\r\n        }),\r\n        []\r\n    );\r\n\r\n    const theme = createTheme(\r\n        {\r\n            scrollbarStyles: {\r\n                \"&::-webkit-scrollbar\": {\r\n                    width: '8px',\r\n                    height: '8px',\r\n                },\r\n                \"&::-webkit-scrollbar-thumb\": {\r\n                    boxShadow: 'inset 0 0 6px rgba(0, 0, 0, 0.3)',\r\n                    backgroundColor: \"#0021b6\",\r\n                },\r\n            },\r\n            scrollbarStylesSoft: {\r\n                \"&::-webkit-scrollbar\": {\r\n                    width: \"8px\",\r\n                },\r\n                \"&::-webkit-scrollbar-thumb\": {\r\n                    backgroundColor: mode === \"light\" ? \"#F3F3F3\" : \"#333333\",\r\n                },\r\n            },\r\n            palette: {\r\n                type: mode,\r\n                primary: { main: mode === \"light\" ? \"#0021b6\" : \"#FFFFFF\" },\r\n                textPrimary: mode === \"light\" ? \"#0021b6\" : \"#FFFFFF\",\r\n                borderPrimary: mode === \"light\" ? \"#0021b6\" : \"#FFFFFF\",\r\n                dark: { main: mode === \"light\" ? \"#333333\" : \"#F3F3F3\" },\r\n                light: { main: mode === \"light\" ? \"#F3F3F3\" : \"#333333\" },\r\n                tabHeaderBackground: mode === \"light\" ? \"#EEE\" : \"#666\",\r\n                optionsBackground: mode === \"light\" ? \"#fafafa\" : \"#333\",\r\n\t\t\t\toptions: mode === \"light\" ? \"#fafafa\" : \"#666\",\r\n\t\t\t\tfontecor: mode === \"light\" ? \"#128c7e\" : \"#fff\",\r\n                fancyBackground: mode === \"light\" ? \"#fafafa\" : \"#333\",\r\n\t\t\t\tbordabox: mode === \"light\" ? \"#eee\" : \"#333\",\r\n\t\t\t\tnewmessagebox: mode === \"light\" ? \"#eee\" : \"#333\",\r\n\t\t\t\tinputdigita: mode === \"light\" ? \"#fff\" : \"#666\",\r\n\t\t\t\tcontactdrawer: mode === \"light\" ? \"#fff\" : \"#666\",\r\n\t\t\t\tannouncements: mode === \"light\" ? \"#ededed\" : \"#333\",\r\n\t\t\t\tlogin: mode === \"light\" ? \"#fff\" : \"#1C1C1C\",\r\n\t\t\t\tannouncementspopover: mode === \"light\" ? \"#fff\" : \"#666\",\r\n\t\t\t\tchatlist: mode === \"light\" ? \"#eee\" : \"#666\",\r\n\t\t\t\tboxlist: mode === \"light\" ? \"#ededed\" : \"#666\",\r\n\t\t\t\tboxchatlist: mode === \"light\" ? \"#ededed\" : \"#333\",\r\n                total: mode === \"light\" ? \"#fff\" : \"#222\",\r\n                messageIcons: mode === \"light\" ? \"grey\" : \"#F3F3F3\",\r\n                inputBackground: mode === \"light\" ? \"#FFFFFF\" : \"#333\",\r\n                barraSuperior: mode === \"light\" ? \"linear-gradient(to right, #0021b6, #0021b6 , #0021b6)\" : \"#666\",\r\n\t\t\t\tboxticket: mode === \"light\" ? \"#EEE\" : \"#666\",\r\n\t\t\t\tcampaigntab: mode === \"light\" ? \"#ededed\" : \"#666\",\r\n\t\t\t\tmediainput: mode === \"light\" ? \"#ededed\" : \"#1c1c1c\",\r\n            },\r\n            mode,\r\n        },\r\n        locale\r\n    );\r\n\r\n    useEffect(() => {\r\n        const i18nlocale = localStorage.getItem(\"i18nextLng\");\r\n        const browserLocale =\r\n            i18nlocale.substring(0, 2) + i18nlocale.substring(3, 5);\r\n\r\n        if (browserLocale === \"ptBR\") {\r\n            setLocale(ptBR);\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        window.localStorage.setItem(\"preferredTheme\", mode);\r\n    }, [mode]);\r\n\r\n\r\n\r\n    return (\r\n        <ColorModeContext.Provider value={{ colorMode }}>\r\n            <ThemeProvider theme={theme}>\r\n                <QueryClientProvider client={queryClient}>\r\n                  <SocketContext.Provider value={SocketManager}>\r\n                      <Routes />\r\n                  </SocketContext.Provider>\r\n                </QueryClientProvider>\r\n            </ThemeProvider>\r\n        </ColorModeContext.Provider>\r\n    );\r\n};\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\n\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(\r\n\t<CssBaseline>\r\n\t\t<App />\r\n\t</CssBaseline>,\r\n\tdocument.getElementById(\"root\")\r\n);\r\n\r\n// ReactDOM.render(\r\n// \t<React.StrictMode>\r\n// \t\t<CssBaseline>\r\n// \t\t\t<App />\r\n// \t\t</CssBaseline>,\r\n//   </React.StrictMode>\r\n\r\n// \tdocument.getElementById(\"root\")\r\n// );\r\n","module.exports = __webpack_public_path__ + \"static/media/logo.1719adbb.png\";","module.exports = __webpack_public_path__ + \"static/media/planilha.549edeba.xlsx\";","module.exports = __webpack_public_path__ + \"static/media/wa-background.2675a051.png\";","module.exports = __webpack_public_path__ + \"static/media/wa-background-dark.8244f042.png\";","module.exports = __webpack_public_path__ + \"static/media/sound.9fd5812c.mp3\";","module.exports = __webpack_public_path__ + \"static/media/chat_notify.2529c259.mp3\";"],"sourceRoot":""}